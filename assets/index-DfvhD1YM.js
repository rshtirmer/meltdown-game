(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const F of document.querySelectorAll('link[rel="modulepreload"]'))T(F);new MutationObserver(F=>{for(const D of F)if(D.type==="childList")for(const p of D.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&T(p)}).observe(document,{childList:!0,subtree:!0});function x(F){const D={};return F.integrity&&(D.integrity=F.integrity),F.referrerPolicy&&(D.referrerPolicy=F.referrerPolicy),F.crossOrigin==="use-credentials"?D.credentials="include":F.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function T(F){if(F.ep)return;F.ep=!0;const D=x(F);fetch(F.href,D)}})();function sT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Sr={exports:{}},nT=Sr.exports,Nu;function rT(){return Nu||(Nu=1,(function(i,v){(function(T,F){i.exports=F()})(nT,()=>(()=>{var x={50792:(p=>{var M=Object.prototype.hasOwnProperty,t="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(t=!1));function g(e,n,u){this.fn=e,this.context=n,this.once=u||!1}function o(e,n,u,s,l){if(typeof u!="function")throw new TypeError("The listener must be a function");var c=new g(u,s||e,l),d=t?t+n:n;return e._events[d]?e._events[d].fn?e._events[d]=[e._events[d],c]:e._events[d].push(c):(e._events[d]=c,e._eventsCount++),e}function a(e,n){--e._eventsCount===0?e._events=new h:delete e._events[n]}function r(){this._events=new h,this._eventsCount=0}r.prototype.eventNames=function(){var n=[],u,s;if(this._eventsCount===0)return n;for(s in u=this._events)M.call(u,s)&&n.push(t?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(u)):n},r.prototype.listeners=function(n){var u=t?t+n:n,s=this._events[u];if(!s)return[];if(s.fn)return[s.fn];for(var l=0,c=s.length,d=new Array(c);l<c;l++)d[l]=s[l].fn;return d},r.prototype.listenerCount=function(n){var u=t?t+n:n,s=this._events[u];return s?s.fn?1:s.length:0},r.prototype.emit=function(n,u,s,l,c,d){var f=t?t+n:n;if(!this._events[f])return!1;var m=this._events[f],y=arguments.length,S,C;if(m.fn){switch(m.once&&this.removeListener(n,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,s),!0;case 4:return m.fn.call(m.context,u,s,l),!0;case 5:return m.fn.call(m.context,u,s,l,c),!0;case 6:return m.fn.call(m.context,u,s,l,c,d),!0}for(C=1,S=new Array(y-1);C<y;C++)S[C-1]=arguments[C];m.fn.apply(m.context,S)}else{var E=m.length,P;for(C=0;C<E;C++)switch(m[C].once&&this.removeListener(n,m[C].fn,void 0,!0),y){case 1:m[C].fn.call(m[C].context);break;case 2:m[C].fn.call(m[C].context,u);break;case 3:m[C].fn.call(m[C].context,u,s);break;case 4:m[C].fn.call(m[C].context,u,s,l);break;default:if(!S)for(P=1,S=new Array(y-1);P<y;P++)S[P-1]=arguments[P];m[C].fn.apply(m[C].context,S)}}return!0},r.prototype.on=function(n,u,s){return o(this,n,u,s,!1)},r.prototype.once=function(n,u,s){return o(this,n,u,s,!0)},r.prototype.removeListener=function(n,u,s,l){var c=t?t+n:n;if(!this._events[c])return this;if(!u)return a(this,c),this;var d=this._events[c];if(d.fn)d.fn===u&&(!l||d.once)&&(!s||d.context===s)&&a(this,c);else{for(var f=0,m=[],y=d.length;f<y;f++)(d[f].fn!==u||l&&!d[f].once||s&&d[f].context!==s)&&m.push(d[f]);m.length?this._events[c]=m.length===1?m[0]:m:a(this,c)}return this},r.prototype.removeAllListeners=function(n){var u;return n?(u=t?t+n:n,this._events[u]&&a(this,u)):(this._events=new h,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=t,r.EventEmitter=r,p.exports=r}),11517:((p,M,t)=>{var h=t(38829),g=function(o,a,r,e){for(var n=o[0],u=1;u<o.length;u++){var s=o[u];h(s,n,a,r,e),n=s}return o};p.exports=g}),80318:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"angle",a,r,e,n)};p.exports=g}),60757:(p=>{var M=function(t,h,g){for(var o=0;o<t.length;o++){var a=t[o];h.call(g,a)}return t};p.exports=M}),69927:(p=>{var M=function(t,h,g){g===void 0&&(g=0);for(var o=g;o<t.length;o++){var a=t[o],r=!0;for(var e in h)a[e]!==h[e]&&(r=!1);if(r)return a}return null};p.exports=M}),32265:(p=>{var M=function(t,h,g){g===void 0&&(g=0);for(var o=t.length-1;o>=g;o--){var a=t[o],r=!0;for(var e in h)a[e]!==h[e]&&(r=!1);if(r)return a}return null};p.exports=M}),94420:((p,M,t)=>{var h=t(11879),g=t(60461),o=t(95540),a=t(29747),r=t(41481),e=new r({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1).setOrigin(0,0),n=function(u,s){s===void 0&&(s={});var l=s.hasOwnProperty("width"),c=s.hasOwnProperty("height"),d=o(s,"width",-1),f=o(s,"height",-1),m=o(s,"cellWidth",1),y=o(s,"cellHeight",m),S=o(s,"position",g.TOP_LEFT),C=o(s,"x",0),E=o(s,"y",0),P=0,A=0,R=d*m,G=f*y;e.setPosition(C,E),e.setSize(m,y);for(var b=0;b<u.length;b++)if(h(u[b],e,S),l&&d===-1)e.x+=m;else if(c&&f===-1)e.y+=y;else if(c&&!l){if(A+=y,e.y+=y,A===G&&(A=0,P+=m,e.y=E,e.x+=m,P===R))break}else if(P+=m,e.x+=m,P===R&&(P=0,A+=y,e.x=C,e.y+=y,A===G))break;return u};p.exports=n}),41721:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"alpha",a,r,e,n)};p.exports=g}),67285:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"x",a,r,e,n)};p.exports=g}),9074:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n,u,s){return r==null&&(r=a),h(o,"x",a,e,u,s),h(o,"y",r,n,u,s)};p.exports=g}),75222:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"y",a,r,e,n)};p.exports=g}),22983:(p=>{var M=function(t,h,g,o){g===void 0&&(g=0),o===void 0&&(o=6.28);for(var a=g,r=(o-g)/t.length,e=h.x,n=h.y,u=h.radius,s=0;s<t.length;s++)t[s].x=e+u*Math.cos(a),t[s].y=n+u*Math.sin(a),a+=r;return t};p.exports=M}),95253:(p=>{var M=function(t,h,g,o){g===void 0&&(g=0),o===void 0&&(o=6.28);for(var a=g,r=(o-g)/t.length,e=h.width/2,n=h.height/2,u=0;u<t.length;u++)t[u].x=h.x+e*Math.cos(a),t[u].y=h.y+n*Math.sin(a),a+=r;return t};p.exports=M}),88505:((p,M,t)=>{var h=t(15258),g=t(26708),o=function(a,r,e){var n;e?n=g(r,e,a.length):n=h(r,a.length);for(var u=0;u<a.length;u++){var s=a[u],l=n[u];s.x=l.x,s.y=l.y}return a};p.exports=o}),41346:((p,M,t)=>{var h=t(14649),g=t(86003),o=t(49498),a=function(r,e,n){n===void 0&&(n=0);var u=h(e,!1,r.length);n>0?g(u,n):n<0&&o(u,Math.abs(n));for(var s=0;s<r.length;s++)r[s].x=u[s].x,r[s].y=u[s].y;return r};p.exports=a}),11575:((p,M,t)=>{var h=t(84993),g=function(o,a,r){var e=h({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},r),n=h({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},r),u=h({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},r);e.pop(),n.pop(),u.pop(),e=e.concat(n,u);for(var s=e.length/o.length,l=0,c=0;c<o.length;c++){var d=o[c],f=e[Math.floor(l)];d.x=f.x,d.y=f.y,l+=s}return o};p.exports=g}),29953:(p=>{var M=function(t,h,g){for(var o=0;o<t.length;o++){var a=t[o];a.anims&&a.anims.play(h,g)}return t};p.exports=M}),66979:(p=>{var M=function(t,h,g,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=1);var e,n=0,u=t.length;if(r===1)for(e=a;e<u;e++)t[e][h]+=g+n*o,n++;else for(e=a;e>=0;e--)t[e][h]+=g+n*o,n++;return t};p.exports=M}),43967:(p=>{var M=function(t,h,g,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=1);var e,n=0,u=t.length;if(r===1)for(e=a;e<u;e++)t[e][h]=g+n*o,n++;else for(e=a;e>=0;e--)t[e][h]=g+n*o,n++;return t};p.exports=M}),88926:((p,M,t)=>{var h=t(28176),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};p.exports=g}),33286:((p,M,t)=>{var h=t(24820),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};p.exports=g}),96e3:((p,M,t)=>{var h=t(65822),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};p.exports=g}),28789:((p,M,t)=>{var h=t(26597),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};p.exports=g}),97154:((p,M,t)=>{var h=t(90260),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};p.exports=g}),20510:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"rotation",a,r,e,n)};p.exports=g}),91051:((p,M,t)=>{var h=t(1163),g=t(20339),o=function(a,r,e){for(var n=r.x,u=r.y,s=0;s<a.length;s++){var l=a[s];h(l,n,u,e,Math.max(1,g(l.x,l.y,n,u)))}return a};p.exports=o}),76332:((p,M,t)=>{var h=t(1163),g=function(o,a,r,e){var n=a.x,u=a.y;if(e===0)return o;for(var s=0;s<o.length;s++)h(o[s],n,u,r,e);return o};p.exports=g}),61619:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"scaleX",a,r,e,n)};p.exports=g}),94868:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n,u,s){return r==null&&(r=a),h(o,"scaleX",a,e,u,s),h(o,"scaleY",r,n,u,s)};p.exports=g}),95532:((p,M,t)=>{var h=t(66979),g=function(o,a,r,e,n){return h(o,"scaleY",a,r,e,n)};p.exports=g}),8689:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"alpha",a,r,e,n)};p.exports=g}),2645:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e){return h(o,"blendMode",a,0,r,e)};p.exports=g}),32372:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"depth",a,r,e,n)};p.exports=g}),85373:(p=>{var M=function(t,h,g){for(var o=0;o<t.length;o++)t[o].setInteractive(h,g);return t};p.exports=M}),81583:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n,u,s){return r==null&&(r=a),h(o,"originX",a,e,u,s),h(o,"originY",r,n,u,s),o.forEach(function(l){l.updateDisplayOrigin()}),o};p.exports=g}),79939:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"rotation",a,r,e,n)};p.exports=g}),2699:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n,u,s){return r==null&&(r=a),h(o,"scaleX",a,e,u,s),h(o,"scaleY",r,n,u,s)};p.exports=g}),98739:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"scaleX",a,r,e,n)};p.exports=g}),98476:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"scaleY",a,r,e,n)};p.exports=g}),6207:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n,u,s){return r==null&&(r=a),h(o,"scrollFactorX",a,e,u,s),h(o,"scrollFactorY",r,n,u,s)};p.exports=g}),6607:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"scrollFactorX",a,r,e,n)};p.exports=g}),72248:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"scrollFactorY",a,r,e,n)};p.exports=g}),14036:(p=>{var M=function(t,h,g,o,a){for(var r=0;r<t.length;r++)t[r].setTint(h,g,o,a);return t};p.exports=M}),50159:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e){return h(o,"visible",a,0,r,e)};p.exports=g}),77597:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"x",a,r,e,n)};p.exports=g}),83194:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n,u,s){return r==null&&(r=a),h(o,"x",a,e,u,s),h(o,"y",r,n,u,s)};p.exports=g}),67678:((p,M,t)=>{var h=t(43967),g=function(o,a,r,e,n){return h(o,"y",a,r,e,n)};p.exports=g}),35850:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n){e===void 0&&(e=0),n===void 0&&(n=new h);var u,s,l=o.length;if(l===1)u=o[0].x,s=o[0].y,o[0].x=a,o[0].y=r;else{var c=1,d=0;e===0&&(d=l-1,c=l-2),u=o[d].x,s=o[d].y,o[d].x=a,o[d].y=r;for(var f=0;f<l;f++)if(!(c>=l||c===-1)){var m=o[c],y=m.x,S=m.y;m.x=u,m.y=s,u=y,s=S,e===0?c--:c++}}return n.x=u,n.y=s,n};p.exports=g}),8628:((p,M,t)=>{var h=t(33680),g=function(o){return h(o)};p.exports=g}),21837:((p,M,t)=>{var h=t(7602),g=function(o,a,r,e,n){n===void 0&&(n=!1);var u=Math.abs(e-r)/o.length,s;if(n)for(s=0;s<o.length;s++)o[s][a]+=h(s*u,r,e);else for(s=0;s<o.length;s++)o[s][a]=h(s*u,r,e);return o};p.exports=g}),21910:((p,M,t)=>{var h=t(54261),g=function(o,a,r,e,n){n===void 0&&(n=!1);var u=Math.abs(e-r)/o.length,s;if(n)for(s=0;s<o.length;s++)o[s][a]+=h(s*u,r,e);else for(s=0;s<o.length;s++)o[s][a]=h(s*u,r,e);return o};p.exports=g}),62054:(p=>{var M=function(t,h,g,o,a){if(a===void 0&&(a=!1),t.length===0)return t;if(t.length===1)return a?t[0][h]+=(o+g)/2:t[0][h]=(o+g)/2,t;var r=Math.abs(o-g)/(t.length-1),e;if(a)for(e=0;e<t.length;e++)t[e][h]+=e*r+g;else for(e=0;e<t.length;e++)t[e][h]=e*r+g;return t};p.exports=M}),79815:(p=>{var M=function(t){for(var h=0;h<t.length;h++)t[h].visible=!t[h].visible;return t};p.exports=M}),39665:((p,M,t)=>{var h=t(15994),g=function(o,a,r){r===void 0&&(r=0);for(var e=0;e<o.length;e++){var n=o[e];n.x=h(n.x,a.left-r,a.right+r),n.y=h(n.y,a.top-r,a.bottom+r)}return o};p.exports=g}),61061:((p,M,t)=>{p.exports={AlignTo:t(11517),Angle:t(80318),Call:t(60757),GetFirst:t(69927),GetLast:t(32265),GridAlign:t(94420),IncAlpha:t(41721),IncX:t(67285),IncXY:t(9074),IncY:t(75222),PlaceOnCircle:t(22983),PlaceOnEllipse:t(95253),PlaceOnLine:t(88505),PlaceOnRectangle:t(41346),PlaceOnTriangle:t(11575),PlayAnimation:t(29953),PropertyValueInc:t(66979),PropertyValueSet:t(43967),RandomCircle:t(88926),RandomEllipse:t(33286),RandomLine:t(96e3),RandomRectangle:t(28789),RandomTriangle:t(97154),Rotate:t(20510),RotateAround:t(91051),RotateAroundDistance:t(76332),ScaleX:t(61619),ScaleXY:t(94868),ScaleY:t(95532),SetAlpha:t(8689),SetBlendMode:t(2645),SetDepth:t(32372),SetHitArea:t(85373),SetOrigin:t(81583),SetRotation:t(79939),SetScale:t(2699),SetScaleX:t(98739),SetScaleY:t(98476),SetScrollFactor:t(6207),SetScrollFactorX:t(6607),SetScrollFactorY:t(72248),SetTint:t(14036),SetVisible:t(50159),SetX:t(77597),SetXY:t(83194),SetY:t(67678),ShiftPosition:t(35850),Shuffle:t(8628),SmootherStep:t(21910),SmoothStep:t(21837),Spread:t(62054),ToggleVisible:t(79815),WrapInRectangle:t(39665)}}),42099:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(74943),a=t(81957),r=t(41138),e=t(35154),n=t(90126),u=new g({initialize:function(l,c,d){this.manager=l,this.key=c,this.type="frame",this.frames=this.getFrames(l.textureManager,e(d,"frames",[]),e(d,"defaultTextureKey",null),e(d,"sortFrames",!0)),this.frameRate=e(d,"frameRate",null),this.duration=e(d,"duration",null),this.msPerFrame,this.skipMissedFrames=e(d,"skipMissedFrames",!0),this.delay=e(d,"delay",0),this.repeat=e(d,"repeat",0),this.repeatDelay=e(d,"repeatDelay",0),this.yoyo=e(d,"yoyo",!1),this.showBeforeDelay=e(d,"showBeforeDelay",!1),this.showOnStart=e(d,"showOnStart",!1),this.hideOnComplete=e(d,"hideOnComplete",!1),this.randomFrame=e(d,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(o.PAUSE_ALL,this.pause,this),this.manager.on(o.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(s,l,c,d){c===null&&d===null?(s.frameRate=24,s.duration=24/l*1e3):c&&d===null?(s.duration=c,s.frameRate=l/(c/1e3)):(s.frameRate=d,s.duration=l/d*1e3),s.msPerFrame=1e3/s.frameRate},addFrame:function(s){return this.addFrameAt(this.frames.length,s)},addFrameAt:function(s,l){var c=this.getFrames(this.manager.textureManager,l);if(c.length>0){if(s===0)this.frames=c.concat(this.frames);else if(s===this.frames.length)this.frames=this.frames.concat(c);else{var d=this.frames.slice(0,s),f=this.frames.slice(s);this.frames=d.concat(c,f)}this.updateFrameSequence()}return this},checkFrame:function(s){return s>=0&&s<this.frames.length},getFirstTick:function(s){s.accumulator=0,s.nextTick=s.frameRate===s.currentAnim.frameRate&&s.currentFrame.duration||s.msPerFrame},getFrameAt:function(s){return this.frames[s]},getFrames:function(s,l,c,d){d===void 0&&(d=!0);var f=[],m,y,S=1,C,E;if(typeof l=="string"){if(E=l,!s.exists(E))return console.warn('Texture "%s" not found',E),f;var P=s.get(E),A=P.getFrameNames();d&&n(A),l=[],A.forEach(function(B){l.push({key:E,frame:B})})}if(!Array.isArray(l)||l.length===0)return f;for(C=0;C<l.length;C++){var R=l[C],G=e(R,"key",c);if(G){var b=e(R,"frame",0),L=s.getFrame(G,b);if(!L){console.warn('Texture "%s" not found',G);continue}y=new r(G,b,S,L),y.duration=e(R,"duration",0),y.isFirst=!m,m&&(m.nextFrame=y,y.prevFrame=m),f.push(y),m=y,S++}}if(f.length>0){y.isLast=!0,y.nextFrame=f[0],f[0].prevFrame=y;var w=1/(f.length-1);for(C=0;C<f.length;C++)f[C].progress=C*w}return f},getNextTick:function(s){s.accumulator-=s.nextTick,s.nextTick=s.frameRate===s.currentAnim.frameRate&&s.currentFrame.duration||s.msPerFrame},getFrameByProgress:function(s){return s=h(s,0,1),a(s,this.frames,"progress")},nextFrame:function(s){var l=s.currentFrame;l.isLast?s.yoyo?this.handleYoyoFrame(s,!1):s.repeatCounter>0?s.inReverse&&s.forward?s.forward=!1:this.repeatAnimation(s):s.complete():this.updateAndGetNextTick(s,l.nextFrame)},handleYoyoFrame:function(s,l){if(l||(l=!1),s.inReverse===!l&&s.repeatCounter>0){(s.repeatDelay===0||s.pendingRepeat)&&(s.forward=l),this.repeatAnimation(s);return}if(s.inReverse!==l&&s.repeatCounter===0){s.complete();return}s.forward=l;var c=l?s.currentFrame.nextFrame:s.currentFrame.prevFrame;this.updateAndGetNextTick(s,c)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(s){var l=s.currentFrame;l.isFirst?s.yoyo?this.handleYoyoFrame(s,!0):s.repeatCounter>0?s.inReverse&&!s.forward?this.repeatAnimation(s):(s.forward=!0,this.repeatAnimation(s)):s.complete():this.updateAndGetNextTick(s,l.prevFrame)},updateAndGetNextTick:function(s,l){s.setCurrentFrame(l),this.getNextTick(s)},removeFrame:function(s){var l=this.frames.indexOf(s);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(s){return this.frames.splice(s,1),this.updateFrameSequence(),this},repeatAnimation:function(s){if(s._pendingStop===2){if(s._pendingStopValue===0)return s.stop();s._pendingStopValue--}s.repeatDelay>0&&!s.pendingRepeat?(s.pendingRepeat=!0,s.accumulator-=s.nextTick,s.nextTick+=s.repeatDelay):(s.repeatCounter--,s.forward?s.setCurrentFrame(s.currentFrame.nextFrame):s.setCurrentFrame(s.currentFrame.prevFrame),s.isPlaying&&(this.getNextTick(s),s.handleRepeat()))},toJSON:function(){var s={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){s.frames.push(l.toJSON())}),s},updateFrameSequence:function(){for(var s=this.frames.length,l=1/(s-1),c,d=0;d<s;d++)c=this.frames[d],c.index=d+1,c.isFirst=!1,c.isLast=!1,c.progress=d*l,d===0?(c.isFirst=!0,s===1?(c.isLast=!0,c.nextFrame=c,c.prevFrame=c):(c.isLast=!1,c.prevFrame=this.frames[s-1],c.nextFrame=this.frames[d+1])):d===s-1&&s>1?(c.isLast=!0,c.prevFrame=this.frames[s-2],c.nextFrame=this.frames[0]):s>1&&(c.prevFrame=this.frames[d-1],c.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(o.PAUSE_ALL,this.pause,this),this.manager.off(o.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var s=0;s<this.frames.length;s++)this.frames[s].destroy();this.frames=[],this.manager=null}});p.exports=u}),41138:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n,u){u===void 0&&(u=!1),this.textureKey=a,this.textureFrame=r,this.index=e,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});p.exports=g}),60848:((p,M,t)=>{var h=t(42099),g=t(83419),o=t(90330),a=t(50792),r=t(74943),e=t(8443),n=t(95540),u=t(35154),s=t(36383),l=t(20283),c=t(41836),d=new g({Extends:a,initialize:function(m){a.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new o,this.mixes=new o,this.paused=!1,this.name="AnimationManager",m.events.once(e.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(e.DESTROY,this.destroy,this)},addMix:function(f,m,y){var S=this.anims,C=this.mixes,E=typeof f=="string"?f:f.key,P=typeof m=="string"?m:m.key;if(S.has(E)&&S.has(P)){var A=C.get(E);A||(A={}),A[P]=y,C.set(E,A)}return this},removeMix:function(f,m){var y=this.mixes,S=typeof f=="string"?f:f.key,C=y.get(S);if(C)if(m){var E=typeof m=="string"?m:m.key;C.hasOwnProperty(E)&&delete C[E]}else m||y.delete(S);return this},getMix:function(f,m){var y=this.mixes,S=typeof f=="string"?f:f.key,C=typeof m=="string"?m:m.key,E=y.get(S);return E&&E.hasOwnProperty(C)?E[C]:0},add:function(f,m){return this.anims.has(f)?(console.warn("Animation key exists: "+f),this):(m.key=f,this.anims.set(f,m),this.emit(r.ADD_ANIMATION,f,m),this)},exists:function(f){return this.anims.has(f)},createFromAseprite:function(f,m,y){var S=[],C=this.game.cache.json.get(f);if(!C)return console.warn("No Aseprite data found for: "+f),S;var E=this,P=u(C,"meta",null),A=u(C,"frames",null);if(P&&A){var R=u(P,"frameTags",[]);R.forEach(function(G){var b=[],L=n(G,"name",null),w=n(G,"from",0),B=n(G,"to",0),N=n(G,"direction","forward");if(L&&(!m||m&&m.indexOf(L)>-1)){for(var Y=0,U=w;U<=B;U++){var W=U.toString(),O=A[W];if(O){var V=n(O,"duration",s.MAX_SAFE_INTEGER);b.push({key:f,frame:W,duration:V}),Y+=V}}N==="reverse"&&(b=b.reverse());var X={key:L,frames:b,duration:Y,yoyo:N==="pingpong"},z;y?y.anims&&(z=y.anims.create(X)):z=E.create(X),z&&S.push(z)}})}return S},create:function(f){var m=f.key,y=!1;return m&&(y=this.get(m),y?console.warn("AnimationManager key already exists: "+m):(y=new h(this,m,f),this.anims.set(m,y),this.emit(r.ADD_ANIMATION,m,y))),y},fromJSON:function(f,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof f=="string"&&(f=JSON.parse(f));var y=[];if(f.hasOwnProperty("anims")&&Array.isArray(f.anims)){for(var S=0;S<f.anims.length;S++)y.push(this.create(f.anims[S]));f.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=f.globalTimeScale)}else f.hasOwnProperty("key")&&f.type==="frame"&&y.push(this.create(f));return y},generateFrameNames:function(f,m){var y=u(m,"prefix",""),S=u(m,"start",0),C=u(m,"end",0),E=u(m,"suffix",""),P=u(m,"zeroPad",0),A=u(m,"outputArray",[]),R=u(m,"frames",!1);if(!this.textureManager.exists(f))return console.warn('Texture "%s" not found',f),A;var G=this.textureManager.get(f);if(!G)return A;var b;if(m)for(R||(R=l(S,C)),b=0;b<R.length;b++){var L=y+c(R[b],P,"0",1)+E;G.has(L)?A.push({key:f,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,f)}else for(R=G.getFrameNames(),b=0;b<R.length;b++)A.push({key:f,frame:R[b]});return A},generateFrameNumbers:function(f,m){var y=u(m,"start",0),S=u(m,"end",-1),C=u(m,"first",!1),E=u(m,"outputArray",[]),P=u(m,"frames",!1);if(!this.textureManager.exists(f))return console.warn('Texture "%s" not found',f),E;var A=this.textureManager.get(f);if(!A)return E;C&&A.has(C)&&E.push({key:f,frame:C}),P||(S===-1&&(S=A.frameTotal-2),P=l(y,S));for(var R=0;R<P.length;R++){var G=P[R];A.has(G)?E.push({key:f,frame:G}):console.warn('Frame "%s" not found in texture "%s"',G,f)}return E},get:function(f){return this.anims.get(f)},getAnimsFromTexture:function(f){for(var m=this.textureManager.get(f),y=m.key,S=this.anims.getArray(),C=[],E=0;E<S.length;E++)for(var P=S[E],A=P.frames,R=0;R<A.length;R++)if(A[R].textureKey===y){C.push(P.key);break}return C},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(r.PAUSE_ALL)),this},play:function(f,m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)m[y].anims.play(f);return this},staggerPlay:function(f,m,y,S){y===void 0&&(y=0),S===void 0&&(S=!0),Array.isArray(m)||(m=[m]);var C=m.length;S||C--;for(var E=0;E<m.length;E++){var P=y<0?Math.abs(y)*(C-E):y*E;m[E].anims.playAfterDelay(f,P)}return this},remove:function(f){var m=this.get(f);return m&&(this.emit(r.REMOVE_ANIMATION,f,m),this.anims.delete(f),this.removeMix(f)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(r.RESUME_ALL)),this},toJSON:function(f){var m={anims:[],globalTimeScale:this.globalTimeScale};return f!==void 0&&f!==""?m.anims.push(this.anims.get(f).toJSON()):this.anims.each(function(y,S){m.anims.push(S.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});p.exports=d}),9674:((p,M,t)=>{var h=t(42099),g=t(30976),o=t(83419),a=t(90330),r=t(74943),e=t(95540),n=new o({initialize:function(s){this.parent=s,this.animationManager=s.scene.sys.anims,this.animationManager.on(r.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(u){var s=this.parent;if(u===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,s;Array.isArray(u)||(u=[u]);for(var l=0;l<u.length;l++){var c=u[l];this.nextAnim?this.nextAnimsQueue.push(c):this.nextAnim=c}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(u){this.isPlaying&&this.stop();var s=this.animationManager,l=typeof u=="string"?u:e(u,"key",null),c=this.exists(l)?this.get(l):s.get(l);if(!c)console.warn("Missing animation: "+l);else{this.currentAnim=c;var d=c.getTotalFrames(),f=e(u,"frameRate",c.frameRate),m=e(u,"duration",c.duration);c.calculateDuration(this,d,m,f),this.delay=e(u,"delay",c.delay),this.repeat=e(u,"repeat",c.repeat),this.repeatDelay=e(u,"repeatDelay",c.repeatDelay),this.yoyo=e(u,"yoyo",c.yoyo),this.showBeforeDelay=e(u,"showBeforeDelay",c.showBeforeDelay),this.showOnStart=e(u,"showOnStart",c.showOnStart),this.hideOnComplete=e(u,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=e(u,"skipMissedFrames",c.skipMissedFrames),this.randomFrame=e(u,"randomFrame",c.randomFrame),this.timeScale=e(u,"timeScale",this.timeScale);var y=e(u,"startFrame",0);y>d&&(y=0),this.randomFrame&&(y=g(0,d-1));var S=c.frames[y];y===0&&!this.forward&&(S=c.getLastFrame()),this.currentFrame=S}return this.parent},pause:function(u){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),u!==void 0&&this.setCurrentFrame(u),this.parent},resume:function(u){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),u!==void 0&&this.setCurrentFrame(u),this.parent},playAfterDelay:function(u,s){if(!this.isPlaying)this.delayCounter=s,this.play(u,!0);else{var l=this.nextAnim,c=this.nextAnimsQueue;l&&c.unshift(l),this.nextAnim=u,this._pendingStop=1,this._pendingStopValue=s}return this.parent},playAfterRepeat:function(u,s){if(s===void 0&&(s=1),!this.isPlaying)this.play(u);else{var l=this.nextAnim,c=this.nextAnimsQueue;l&&c.unshift(l),this.repeatCounter!==-1&&s>this.repeatCounter&&(s=this.repeatCounter),this.nextAnim=u,this._pendingStop=2,this._pendingStopValue=s}return this.parent},play:function(u,s){s===void 0&&(s=!1);var l=this.currentAnim,c=this.parent,d=typeof u=="string"?u:u.key;if(s&&this.isPlaying&&l.key===d)return c;if(l&&this.isPlaying){var f=this.animationManager.getMix(l.key,u);if(f>0)return this.playAfterDelay(u,f)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u)},playReverse:function(u,s){s===void 0&&(s=!1);var l=typeof u=="string"?u:u.key;return s&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u))},startAnimation:function(u){this.load(u);var s=this.currentAnim,l=this.parent;return s&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,s.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(r.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(r.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(r.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(r.ANIMATION_COMPLETE,r.ANIMATION_COMPLETE_KEY)},emitEvents:function(u,s){var l=this.currentAnim;if(l){var c=this.currentFrame,d=this.parent,f=c.textureFrame;d.emit(u,l,c,d,f),s&&d.emit(s+l.key,l,c,d,f)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var u=this.currentFrame;if(!u)return 0;var s=u.progress;return this.inReverse&&(s*=-1),s},setProgress:function(u){return this.forward||(u=1-u),this.setCurrentFrame(this.currentAnim.getFrameByProgress(u)),this.parent},setRepeat:function(u){return this.repeatCounter=u===-1?Number.MAX_VALUE:u,this.parent},globalRemove:function(u,s){s===void 0&&(s=this.currentAnim),this.isPlaying&&s.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(u,s){u===void 0&&(u=!1),s===void 0&&(s=!1);var l=this.currentAnim,c=this.parent;return l?(s&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(r.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!u,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(u)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(u)}return this.parent},stopAfterDelay:function(u){return this._pendingStop=1,this._pendingStopValue=u,this.parent},stopAfterRepeat:function(u){return u===void 0&&(u=1),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=u,this.parent},stopOnFrame:function(u){return this._pendingStop=3,this._pendingStopValue=u,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(u,s){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=s*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=s,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?l.nextFrame(this):l.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(u){var s=this.parent;return this.currentFrame=u,s.texture=u.frame.texture,s.frame=u.frame,s.isCropped&&s.frame.updateCropUVs(s._crop,s.flipX,s.flipY),u.setAlpha&&(s.alpha=u.alpha),s.setSizeToFrame(),s._originComponent&&(u.frame.customPivot?s.setOrigin(u.frame.pivotX,u.frame.pivotY):s.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(r.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===u&&this.stop()),s},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(u){return this.anims?this.anims.get(u):null},exists:function(u){return this.anims?this.anims.has(u):!1},create:function(u){var s=u.key,l=!1;return s&&(l=this.get(s),l?console.warn("Animation key already exists: "+s):(l=new h(this,s,u),this.anims||(this.anims=new a),this.anims.set(s,l))),l},createFromAseprite:function(u,s){return this.animationManager.createFromAseprite(u,s,this.parent)},generateFrameNames:function(u,s){return this.animationManager.generateFrameNames(u,s)},generateFrameNumbers:function(u,s){return this.animationManager.generateFrameNumbers(u,s)},remove:function(u){var s=this.get(u);return s&&(this.currentAnim===s&&this.stop(),this.anims.delete(u)),s},destroy:function(){this.animationManager.off(r.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});p.exports=n}),57090:(p=>{p.exports="add"}),25312:(p=>{p.exports="animationcomplete"}),89580:(p=>{p.exports="animationcomplete-"}),52860:(p=>{p.exports="animationrepeat"}),63850:(p=>{p.exports="animationrestart"}),99085:(p=>{p.exports="animationstart"}),28087:(p=>{p.exports="animationstop"}),1794:(p=>{p.exports="animationupdate"}),52562:(p=>{p.exports="pauseall"}),57953:(p=>{p.exports="remove"}),68339:(p=>{p.exports="resumeall"}),74943:((p,M,t)=>{p.exports={ADD_ANIMATION:t(57090),ANIMATION_COMPLETE:t(25312),ANIMATION_COMPLETE_KEY:t(89580),ANIMATION_REPEAT:t(52860),ANIMATION_RESTART:t(63850),ANIMATION_START:t(99085),ANIMATION_STOP:t(28087),ANIMATION_UPDATE:t(1794),PAUSE_ALL:t(52562),REMOVE_ANIMATION:t(57953),RESUME_ALL:t(68339)}}),60421:((p,M,t)=>{p.exports={Animation:t(42099),AnimationFrame:t(41138),AnimationManager:t(60848),AnimationState:t(9674),Events:t(74943)}}),2161:((p,M,t)=>{var h=t(83419),g=t(90330),o=t(50792),a=t(24736),r=new h({initialize:function(){this.entries=new g,this.events=new o},add:function(e,n){return this.entries.set(e,n),this.events.emit(a.ADD,this,e,n),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var n=this.get(e);return n&&(this.entries.delete(e),this.events.emit(a.REMOVE,this,e,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});p.exports=r}),24047:((p,M,t)=>{var h=t(2161),g=t(83419),o=t(8443),a=new g({initialize:function(e){this.game=e,this.binary=new h,this.bitmapFont=new h,this.json=new h,this.physics=new h,this.shader=new h,this.audio=new h,this.video=new h,this.text=new h,this.html=new h,this.obj=new h,this.tilemap=new h,this.xml=new h,this.custom={},this.game.events.once(o.DESTROY,this.destroy,this)},addCustom:function(r){return this.custom.hasOwnProperty(r)||(this.custom[r]=new h),this.custom[r]},destroy:function(){for(var r=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<r.length;e++)this[r[e]].destroy(),this[r[e]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});p.exports=a}),51464:(p=>{p.exports="add"}),59261:(p=>{p.exports="remove"}),24736:((p,M,t)=>{p.exports={ADD:t(51464),REMOVE:t(59261)}}),83388:((p,M,t)=>{p.exports={BaseCache:t(2161),CacheManager:t(24047),Events:t(24736)}}),71911:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(39506),a=t(50792),r=t(19715),e=t(87841),n=t(61340),u=t(80333),s=t(26099),l=new h({Extends:a,Mixins:[g.AlphaSingle,g.Visible],initialize:function(d,f,m,y){d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new e,this.dirty=!0,this._x=d,this._y=f,this._width=m,this._height=y,this._bounds=new e,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new s(m/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(c){this.renderList.push(c)},setOrigin:function(c,d){return c===void 0&&(c=.5),d===void 0&&(d=c),this.originX=c,this.originY=d,this},getScroll:function(c,d,f){f===void 0&&(f=new s);var m=this.width*.5,y=this.height*.5;return f.x=c-m,f.y=d-y,this.useBounds&&(f.x=this.clampX(f.x),f.y=this.clampY(f.y)),f},centerOnX:function(c){var d=this.width*.5;return this.midPoint.x=c,this.scrollX=c-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var d=this.height*.5;return this.midPoint.y=c,this.scrollY=c-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,d){return this.centerOnX(c),this.centerOnY(d),this},centerToBounds:function(){if(this.useBounds){var c=this._bounds,d=this.width*.5,f=this.height*.5;this.midPoint.set(c.centerX,c.centerY),this.scrollX=c.centerX-d,this.scrollY=c.centerY-f}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(c){if(this.disableCull)return c;var d=this.matrix.matrix,f=d[0],m=d[1],y=d[2],S=d[3],C=f*S-m*y;if(!C)return c;var E=d[4],P=d[5],A=this.scrollX,R=this.scrollY,G=this.width,b=this.height,L=this.y,w=L+b,B=this.x,N=B+G,Y=this.culledObjects,U=c.length;C=1/C,Y.length=0;for(var W=0;W<U;++W){var O=c[W];if(!O.hasOwnProperty("width")||O.parentContainer){Y.push(O);continue}var V=O.width,X=O.height,z=O.x-A*O.scrollFactorX-V*O.originX,I=O.y-R*O.scrollFactorY-X*O.originY,Z=z*f+I*y+E,J=z*m+I*S+P,k=(z+V)*f+(I+X)*y+E,j=(z+V)*m+(I+X)*S+P;k>B&&Z<N&&j>L&&J<w&&Y.push(O)}return Y},getWorldPoint:function(c,d,f){f===void 0&&(f=new s);var m=this.matrix.matrix,y=m[0],S=m[1],C=m[2],E=m[3],P=m[4],A=m[5],R=y*E-S*C;if(!R)return f.x=c,f.y=d,f;R=1/R;var G=E*R,b=-S*R,L=-C*R,w=y*R,B=(C*A-E*P)*R,N=(S*P-y*A)*R,Y=Math.cos(this.rotation),U=Math.sin(this.rotation),W=this.zoomX,O=this.zoomY,V=this.scrollX,X=this.scrollY,z=c+(V*Y-X*U)*W,I=d+(V*U+X*Y)*O;return f.x=z*G+I*L+B,f.y=z*b+I*w+N,f},ignore:function(c){var d=this.id;Array.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++){var m=c[f];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=d}return this},clampX:function(c){var d=this._bounds,f=this.displayWidth,m=d.x+(f-this.width)/2,y=Math.max(m,m+d.width-f);return c<m?c=m:c>y&&(c=y),c},clampY:function(c){var d=this._bounds,f=this.displayHeight,m=d.y+(f-this.height)/2,y=Math.max(m,m+d.height-f);return c<m?c=m:c>y&&(c=y),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return c===void 0&&(c=0),this.rotation=o(c),this},setBackgroundColor:function(c){return c===void 0&&(c="rgba(0,0,0,0)"),this.backgroundColor=u(c),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(c,d,f,m,y){return y===void 0&&(y=!1),this._bounds.setTo(c,d,f,m),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){c===void 0&&(c=new e);var d=this._bounds;return c.setTo(d.x,d.y,d.width,d.height),c},setName:function(c){return c===void 0&&(c=""),this.name=c,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},setRotation:function(c){return c===void 0&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c,d){d===void 0&&(d=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=c,this.isSceneCamera=d;var f=c.sys;return this.sceneManager=f.game.scene,this.scaleManager=f.scale,this.cameraManager=f.cameras,this.updateSystem(),this},setScroll:function(c,d){return d===void 0&&(d=c),this.scrollX=c,this.scrollY=d,this},setSize:function(c,d){return d===void 0&&(d=c),this.width=c,this.height=d,this},setViewport:function(c,d,f,m){return this.x=c,this.y=d,this.width=f,this.height=m,this},setZoom:function(c,d){return c===void 0&&(c=1),d===void 0&&(d=c),c===0&&(c=.001),d===0&&(d=.001),this.zoomX=c,this.zoomY=d,this},setMask:function(c,d){return d===void 0&&(d=!0),this.mask=c,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(c){return c===void 0&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},setIsSceneCamera:function(c){return this.isSceneCamera=c,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var c=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,d=this.sceneManager;c&&!this._customViewport?d.customViewports++:!c&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=c}},destroy:function(){this.emit(r.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){c!==this._scrollX&&(this._scrollX=c,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(c){c!==this._scrollY&&(this._scrollY=c,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});p.exports=l}),38058:((p,M,t)=>{var h=t(71911),g=t(67502),o=t(45319),a=t(83419),r=t(31401),e=t(20052),n=t(19715),u=t(28915),s=t(87841),l=t(26099),c=new a({Extends:h,Mixins:[r.PostPipeline],initialize:function(f,m,y,S){h.call(this,f,m,y,S),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new e.Fade(this),this.flashEffect=new e.Flash(this),this.shakeEffect=new e.Shake(this),this.panEffect=new e.Pan(this),this.rotateToEffect=new e.RotateTo(this),this.zoomEffect=new e.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(d,f){if(d===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=d,this.deadzone.height=f):this.deadzone=new s(0,0,d,f),this._follow){var m=this.width/2,y=this.height/2,S=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(S,C),this.scrollX=S-m,this.scrollY=C-y}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(d,f,m,y,S,C){return this.fadeEffect.start(!1,d,f,m,y,!0,S,C)},fadeOut:function(d,f,m,y,S,C){return this.fadeEffect.start(!0,d,f,m,y,!0,S,C)},fadeFrom:function(d,f,m,y,S,C,E){return this.fadeEffect.start(!1,d,f,m,y,S,C,E)},fade:function(d,f,m,y,S,C,E){return this.fadeEffect.start(!0,d,f,m,y,S,C,E)},flash:function(d,f,m,y,S,C,E){return this.flashEffect.start(d,f,m,y,S,C,E)},shake:function(d,f,m,y,S){return this.shakeEffect.start(d,f,m,y,S)},pan:function(d,f,m,y,S,C,E){return this.panEffect.start(d,f,m,y,S,C,E)},rotateTo:function(d,f,m,y,S,C,E){return this.rotateToEffect.start(d,f,m,y,S,C,E)},zoomTo:function(d,f,m,y,S,C){return this.zoomEffect.start(d,f,m,y,S,C)},preRender:function(){this.renderList.length=0;var d=this.width,f=this.height,m=d*.5,y=f*.5,S=this.zoomX,C=this.zoomY,E=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(S)&&Number.isInteger(C);var P=d*this.originX,A=f*this.originY,R=this._follow,G=this.deadzone,b=this.scrollX,L=this.scrollY;G&&g(G,this.midPoint.x,this.midPoint.y);var w=!1;if(R&&!this.panEffect.isRunning){var B=this.lerp,N=R.x-this.followOffset.x,Y=R.y-this.followOffset.y;G?(N<G.x?b=u(b,b-(G.x-N),B.x):N>G.right&&(b=u(b,b+(N-G.right),B.x)),Y<G.y?L=u(L,L-(G.y-Y),B.y):Y>G.bottom&&(L=u(L,L+(Y-G.bottom),B.y))):(b=u(b,N-P,B.x),L=u(L,Y-A,B.y)),w=!0}this.roundPixels&&(b=Math.floor(b),L=Math.floor(L)),this.useBounds&&(b=this.clampX(b),L=this.clampY(L)),this.scrollX=b,this.scrollY=L;var U=b+m,W=L+y;this.midPoint.set(U,W);var O=Math.floor(d/S+.5),V=Math.floor(f/C+.5),X=Math.floor(U-O/2+.5),z=Math.floor(W-V/2+.5);this.worldView.setTo(X,z,O,V),E.applyITRS(Math.floor(this.x+P+.5),Math.floor(this.y+A+.5),this.rotation,S,C),E.translate(-P,-A),this.shakeEffect.preRender(),w&&this.emit(n.FOLLOW_UPDATE,this,R)},setLerp:function(d,f){return d===void 0&&(d=1),f===void 0&&(f=d),this.lerp.set(d,f),this},setFollowOffset:function(d,f){return d===void 0&&(d=0),f===void 0&&(f=0),this.followOffset.set(d,f),this},startFollow:function(d,f,m,y,S,C){f===void 0&&(f=!1),m===void 0&&(m=1),y===void 0&&(y=m),S===void 0&&(S=0),C===void 0&&(C=S),this._follow=d,this.roundPixels=f,m=o(m,0,1),y=o(y,0,1),this.lerp.set(m,y),this.followOffset.set(S,C);var E=this.width/2,P=this.height/2,A=d.x-S,R=d.y-C;return this.midPoint.set(A,R),this.scrollX=A-E,this.scrollY=R-P,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,f){this.visible&&(this.rotateToEffect.update(d,f),this.panEffect.update(d,f),this.zoomEffect.update(d,f),this.shakeEffect.update(d,f),this.flashEffect.update(d,f),this.fadeEffect.update(d,f))},destroy:function(){this.resetFX(),h.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});p.exports=c}),32743:((p,M,t)=>{var h=t(38058),g=t(83419),o=t(95540),a=t(37277),r=t(37303),e=t(97480),n=t(44594),u=new g({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(n.BOOT,this.boot,this),l.sys.events.on(n.START,this.start,this)},boot:function(){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new h(0,0,s.scale.width,s.scale.height).setScene(this.scene),s.game.scale.on(e.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(n.UPDATE,this.update,this),l.once(n.SHUTDOWN,this.shutdown,this)},add:function(s,l,c,d,f,m){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),f===void 0&&(f=!1),m===void 0&&(m="");var y=new h(s,l,c,d);return y.setName(m),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),f&&(this.main=y),y},addExisting:function(s,l){l===void 0&&(l=!1);var c=this.cameras.indexOf(s);return c===-1?(s.id=this.getNextID(),s.setRoundPixels(this.roundPixels),this.cameras.push(s),l&&(this.main=s),s):null},getNextID:function(){for(var s=this.cameras,l=1,c=0;c<32;c++){for(var d=!1,f=0;f<s.length;f++){var m=s[f];if(m&&m.id===l){d=!0;continue}}if(d)l=l<<1;else return l}return 0},getTotal:function(s){s===void 0&&(s=!1);for(var l=0,c=this.cameras,d=0;d<c.length;d++){var f=c[d];(!s||s&&f.visible)&&l++}return l},fromJSON:function(s){Array.isArray(s)||(s=[s]);for(var l=this.scene.sys.scale.width,c=this.scene.sys.scale.height,d=0;d<s.length;d++){var f=s[d],m=o(f,"x",0),y=o(f,"y",0),S=o(f,"width",l),C=o(f,"height",c),E=this.add(m,y,S,C);E.name=o(f,"name",""),E.zoom=o(f,"zoom",1),E.rotation=o(f,"rotation",0),E.scrollX=o(f,"scrollX",0),E.scrollY=o(f,"scrollY",0),E.roundPixels=o(f,"roundPixels",!1),E.visible=o(f,"visible",!0);var P=o(f,"backgroundColor",!1);P&&E.setBackgroundColor(P);var A=o(f,"bounds",null);if(A){var R=o(A,"x",0),G=o(A,"y",0),b=o(A,"width",l),L=o(A,"height",c);E.setBounds(R,G,b,L)}}return this},getCamera:function(s){for(var l=this.cameras,c=0;c<l.length;c++)if(l[c].name===s)return l[c];return null},getCamerasBelowPointer:function(s){for(var l=this.cameras,c=s.x,d=s.y,f=[],m=0;m<l.length;m++){var y=l[m];y.visible&&y.inputEnabled&&r(y,c,d)&&f.unshift(y)}return f},remove:function(s,l){l===void 0&&(l=!0),Array.isArray(s)||(s=[s]);for(var c=0,d=this.cameras,f=0;f<s.length;f++){var m=d.indexOf(s[f]);m!==-1&&(l?d[m].destroy():d[m].renderList=[],d.splice(m,1),c++)}return!this.main&&d[0]&&(this.main=d[0]),c},render:function(s,l){for(var c=this.scene,d=this.cameras,f=0;f<d.length;f++){var m=d[f];if(m.visible&&m.alpha>0){m.preRender();var y=this.getVisibleChildren(l.getChildren(),m);s.render(c,y,m)}}},getVisibleChildren:function(s,l){return s.filter(function(c){return c.willRender(l)})},resetAll:function(){for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(s,l){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(s,l)},onResize:function(s,l,c,d,f){for(var m=0;m<this.cameras.length;m++){var y=this.cameras[m];y._x===0&&y._y===0&&y._width===d&&y._height===f&&y.setSize(l.width,l.height)}},resize:function(s,l){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(s,l)},shutdown:function(){this.main=void 0;for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();this.cameras=[];var l=this.systems.events;l.off(n.UPDATE,this.update,this),l.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(n.START,this.start,this),this.systems.events.off(n.DESTROY,this.destroy,this),this.systems.game.scale.off(e.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});a.register("CameraManager",u,"cameras"),p.exports=u}),5020:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,e,n,u,s,l,c,d){if(r===void 0&&(r=!0),e===void 0&&(e=1e3),n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=r,this.progress=0,this.red=n,this.green=u,this.blue=s,this.alpha=r?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d;var f=r?o.FADE_OUT_START:o.FADE_IN_START;return this.camera.emit(f,this.camera,this,e,n,u,s),this.camera},update:function(r,e){this.isRunning&&(this._elapsed+=e,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(r){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(r,e){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,u=this.red/255,s=this.green/255,l=this.blue/255;return r.drawFillRect(n.x,n.y,n.width,n.height,e(l,s,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var r=this.direction?o.FADE_OUT_COMPLETE:o.FADE_IN_COMPLETE;this.camera.emit(r,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});p.exports=a}),10662:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(r,e,n,u,s,l,c){return r===void 0&&(r=250),e===void 0&&(e=255),n===void 0&&(n=255),u===void 0&&(u=255),s===void 0&&(s=!1),l===void 0&&(l=null),c===void 0&&(c=this.camera.scene),!s&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,this.red=e,this.green=n,this.blue=u,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=c,this.camera.emit(o.FLASH_START,this.camera,this,r,e,n,u),this.camera)},update:function(r,e){this.isRunning&&(this._elapsed+=e,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(r){if(!this.isRunning)return!1;var e=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(r,e){if(!this.isRunning)return!1;var n=this.camera,u=this.red/255,s=this.green/255,l=this.blue/255;return r.drawFillRect(n.x,n.y,n.width,n.height,e(l,s,u,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});p.exports=a}),20359:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(62640),a=t(19715),r=t(26099),e=new g({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=new r,this.current=new r,this.destination=new r,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,u,s,l,c,d,f){s===void 0&&(s=1e3),l===void 0&&(l=o.Linear),c===void 0&&(c=!1),d===void 0&&(d=null),f===void 0&&(f=this.camera.scene);var m=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(n,u),m.getScroll(n,u,this.current),typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(a.PAN_START,this.camera,this,s,n,u)),m},update:function(n,u){if(this.isRunning){this._elapsed+=u;var s=h(this._elapsed/this.duration,0,1);this.progress=s;var l=this.camera;if(this._elapsed<this.duration){var c=this.ease(s);l.getScroll(this.destination.x,this.destination.y,this.current);var d=this.source.x+(this.current.x-this.source.x)*c,f=this.source.y+(this.current.y-this.source.y)*c;l.setScroll(d,f),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,s,d,f)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,s,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});p.exports=e}),34208:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=t(62640),r=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,n,u,s,l,c,d){u===void 0&&(u=1e3),s===void 0&&(s=a.Linear),l===void 0&&(l=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var f=e;e<0?(f=-1*e,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;f=f-Math.floor(f/m)*m;var y=this.camera;if(!l&&this.isRunning)return y;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=y.rotation,this.destination=f,typeof s=="string"&&a.hasOwnProperty(s)?this.ease=a[s]:typeof s=="function"&&(this.ease=s),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.shortestPath){var S=0,C=0;this.destination>this.source?S=Math.abs(this.destination-this.source):S=Math.abs(this.destination+m)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+m)-this.destination,S<C?this.clockwise=!0:S>C&&(this.clockwise=!1)}return this.camera.emit(o.ROTATE_START,this.camera,this,u,f),y},update:function(e,n){if(this.isRunning){this._elapsed+=n;var u=h(this._elapsed/this.duration,0,1);this.progress=u;var s=this.camera;if(this._elapsed<this.duration){var l=this.ease(u);this.current=s.rotation;var c=0,d=360*Math.PI/180,f=this.destination,m=this.current;this.clockwise===!1&&(f=this.current,m=this.destination),f>=m?c=Math.abs(f-m):c=Math.abs(f+d)-m;var y=0;this.clockwise?y=s.rotation+c*l:y=s.rotation-c*l,s.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,u,y)}else s.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});p.exports=r}),30330:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=t(26099),r=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,n,u,s,l){return e===void 0&&(e=100),n===void 0&&(n=.05),u===void 0&&(u=!1),s===void 0&&(s=null),l===void 0&&(l=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=s,this._onUpdateScope=l,this.camera.emit(o.SHAKE_START,this.camera,this,e,n),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,n){if(this.isRunning)if(this._elapsed+=n,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,s=this.camera.width,l=this.camera.height,c=this.camera.zoom;this._offsetX=(Math.random()*u.x*s*2-u.x*s)*c,this._offsetY=(Math.random()*u.y*l*2-u.y*l)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});p.exports=r}),45641:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(62640),a=t(19715),r=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,n,u,s,l,c){n===void 0&&(n=1e3),u===void 0&&(u=o.Linear),s===void 0&&(s=!1),l===void 0&&(l=null),c===void 0&&(c=this.camera.scene);var d=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=d.zoom,this.destination=e,typeof u=="string"&&o.hasOwnProperty(u)?this.ease=o[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=c,this.camera.emit(a.ZOOM_START,this.camera,this,n,e)),d},update:function(e,n){this.isRunning&&(this._elapsed+=n,this.progress=h(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});p.exports=r}),20052:((p,M,t)=>{p.exports={Fade:t(5020),Flash:t(10662),Pan:t(20359),Shake:t(30330),RotateTo:t(34208),Zoom:t(45641)}}),16438:(p=>{p.exports="cameradestroy"}),32726:(p=>{p.exports="camerafadeincomplete"}),87807:(p=>{p.exports="camerafadeinstart"}),45917:(p=>{p.exports="camerafadeoutcomplete"}),95666:(p=>{p.exports="camerafadeoutstart"}),47056:(p=>{p.exports="cameraflashcomplete"}),91261:(p=>{p.exports="cameraflashstart"}),45047:(p=>{p.exports="followupdate"}),81927:(p=>{p.exports="camerapancomplete"}),74264:(p=>{p.exports="camerapanstart"}),54419:(p=>{p.exports="postrender"}),79330:(p=>{p.exports="prerender"}),93183:(p=>{p.exports="camerarotatecomplete"}),80112:(p=>{p.exports="camerarotatestart"}),62252:(p=>{p.exports="camerashakecomplete"}),86017:(p=>{p.exports="camerashakestart"}),539:(p=>{p.exports="camerazoomcomplete"}),51892:(p=>{p.exports="camerazoomstart"}),19715:((p,M,t)=>{p.exports={DESTROY:t(16438),FADE_IN_COMPLETE:t(32726),FADE_IN_START:t(87807),FADE_OUT_COMPLETE:t(45917),FADE_OUT_START:t(95666),FLASH_COMPLETE:t(47056),FLASH_START:t(91261),FOLLOW_UPDATE:t(45047),PAN_COMPLETE:t(81927),PAN_START:t(74264),POST_RENDER:t(54419),PRE_RENDER:t(79330),ROTATE_COMPLETE:t(93183),ROTATE_START:t(80112),SHAKE_COMPLETE:t(62252),SHAKE_START:t(86017),ZOOM_COMPLETE:t(539),ZOOM_START:t(51892)}}),87969:((p,M,t)=>{p.exports={Camera:t(38058),BaseCamera:t(71911),CameraManager:t(32743),Effects:t(20052),Events:t(19715)}}),63091:((p,M,t)=>{var h=t(83419),g=t(35154),o=new h({initialize:function(r){this.camera=g(r,"camera",null),this.left=g(r,"left",null),this.right=g(r,"right",null),this.up=g(r,"up",null),this.down=g(r,"down",null),this.zoomIn=g(r,"zoomIn",null),this.zoomOut=g(r,"zoomOut",null),this.zoomSpeed=g(r,"zoomSpeed",.01),this.minZoom=g(r,"minZoom",.001),this.maxZoom=g(r,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=g(r,"speed",null);typeof e=="number"?(this.speedX=e,this.speedY=e):(this.speedX=g(r,"speed.x",0),this.speedY=g(r,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var r=this.camera;this.up&&this.up.isDown?r.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(r.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?r.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(r.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(r.zoom-=this.zoomSpeed,r.zoom<this.minZoom&&(r.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(r.zoom+=this.zoomSpeed,r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});p.exports=o}),58818:((p,M,t)=>{var h=t(83419),g=t(35154),o=new h({initialize:function(r){this.camera=g(r,"camera",null),this.left=g(r,"left",null),this.right=g(r,"right",null),this.up=g(r,"up",null),this.down=g(r,"down",null),this.zoomIn=g(r,"zoomIn",null),this.zoomOut=g(r,"zoomOut",null),this.zoomSpeed=g(r,"zoomSpeed",.01),this.minZoom=g(r,"minZoom",.001),this.maxZoom=g(r,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=g(r,"acceleration",null);typeof e=="number"?(this.accelX=e,this.accelY=e):(this.accelX=g(r,"acceleration.x",0),this.accelY=g(r,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=g(r,"drag",null);typeof n=="number"?(this.dragX=n,this.dragY=n):(this.dragX=g(r,"drag.x",0),this.dragY=g(r,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var u=g(r,"maxSpeed",null);typeof u=="number"?(this.maxSpeedX=u,this.maxSpeedY=u):(this.maxSpeedX=g(r,"maxSpeed.x",0),this.maxSpeedY=g(r,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var r=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(r.scrollX-=this._speedX*a|0),this._speedY!==0&&(r.scrollY-=this._speedY*a|0),this._zoom!==0&&(r.zoom+=this._zoom,r.zoom<this.minZoom?r.zoom=this.minZoom:r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});p.exports=o}),38865:((p,M,t)=>{p.exports={FixedKeyControl:t(63091),SmoothedKeyControl:t(58818)}}),26638:((p,M,t)=>{p.exports={Controls:t(38865),Scene2D:t(87969)}}),8054:((p,M,t)=>{var h={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:t(10312),ScaleModes:t(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};p.exports=h}),69547:((p,M,t)=>{var h=t(83419),g=t(8054),o=t(42363),a=t(82264),r=t(95540),e=t(35154),n=t(41212),u=t(29747),s=t(75508),l=t(36060),c=t(80333),d=new h({initialize:function(m){m===void 0&&(m={});var y=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],S="#ffffff",C=e(m,"scale",null);this.width=e(C,"width",1024,m),this.height=e(C,"height",768,m),this.zoom=e(C,"zoom",1,m),this.parent=e(C,"parent",void 0,m),this.scaleMode=e(C,C?"mode":"scaleMode",0,m),this.expandParent=e(C,"expandParent",!0,m),this.autoRound=e(C,"autoRound",!1,m),this.autoCenter=e(C,"autoCenter",0,m),this.resizeInterval=e(C,"resizeInterval",500,m),this.fullscreenTarget=e(C,"fullscreenTarget",null,m),this.minWidth=e(C,"min.width",0,m),this.maxWidth=e(C,"max.width",0,m),this.minHeight=e(C,"min.height",0,m),this.maxHeight=e(C,"max.height",0,m),this.snapWidth=e(C,"snap.width",0,m),this.snapHeight=e(C,"snap.height",0,m),this.renderType=e(m,"type",g.AUTO),this.canvas=e(m,"canvas",null),this.context=e(m,"context",null),this.canvasStyle=e(m,"canvasStyle",null),this.customEnvironment=e(m,"customEnvironment",!1),this.sceneConfig=e(m,"scene",null),this.seed=e(m,"seed",[(Date.now()*Math.random()).toString()]),s.RND=new s.RandomDataGenerator(this.seed),this.gameTitle=e(m,"title",""),this.gameURL=e(m,"url","https://phaser.io/"+g.LOG_VERSION),this.gameVersion=e(m,"version",""),this.autoFocus=e(m,"autoFocus",!0),this.stableSort=e(m,"stableSort",-1),this.stableSort===-1&&(this.stableSort=a.browser.es2019?1:0),a.features.stableSort=this.stableSort,this.domCreateContainer=e(m,"dom.createContainer",!1),this.domPointerEvents=e(m,"dom.pointerEvents","none"),this.inputKeyboard=e(m,"input.keyboard",!0),this.inputKeyboardEventTarget=e(m,"input.keyboard.target",window),this.inputKeyboardCapture=e(m,"input.keyboard.capture",[]),this.inputMouse=e(m,"input.mouse",!0),this.inputMouseEventTarget=e(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=e(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=e(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=e(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=e(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=e(m,"input.touch",a.input.touch),this.inputTouchEventTarget=e(m,"input.touch.target",null),this.inputTouchCapture=e(m,"input.touch.capture",!0),this.inputActivePointers=e(m,"input.activePointers",1),this.inputSmoothFactor=e(m,"input.smoothFactor",0),this.inputWindowEvents=e(m,"input.windowEvents",!0),this.inputGamepad=e(m,"input.gamepad",!1),this.inputGamepadEventTarget=e(m,"input.gamepad.target",window),this.disableContextMenu=e(m,"disableContextMenu",!1),this.audio=e(m,"audio",{}),this.hideBanner=e(m,"banner",null)===!1,this.hidePhaser=e(m,"banner.hidePhaser",!1),this.bannerTextColor=e(m,"banner.text",S),this.bannerBackgroundColor=e(m,"banner.background",y),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=e(m,"fps",null),this.disablePreFX=e(m,"disablePreFX",!1),this.disablePostFX=e(m,"disablePostFX",!1);var E=e(m,"render",null);this.pipeline=e(E,"pipeline",null,m),this.autoMobilePipeline=e(E,"autoMobilePipeline",!0,m),this.defaultPipeline=e(E,"defaultPipeline",l.MULTI_PIPELINE,m),this.antialias=e(E,"antialias",!0,m),this.antialiasGL=e(E,"antialiasGL",!0,m),this.mipmapFilter=e(E,"mipmapFilter","",m),this.desynchronized=e(E,"desynchronized",!1,m),this.roundPixels=e(E,"roundPixels",!1,m),this.pixelArt=e(E,"pixelArt",this.zoom!==1,m),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=e(E,"transparent",!1,m),this.clearBeforeRender=e(E,"clearBeforeRender",!0,m),this.preserveDrawingBuffer=e(E,"preserveDrawingBuffer",!1,m),this.premultipliedAlpha=e(E,"premultipliedAlpha",!0,m),this.failIfMajorPerformanceCaveat=e(E,"failIfMajorPerformanceCaveat",!1,m),this.powerPreference=e(E,"powerPreference","default",m),this.batchSize=e(E,"batchSize",4096,m),this.maxTextures=e(E,"maxTextures",-1,m),this.maxLights=e(E,"maxLights",10,m);var P=e(m,"backgroundColor",0);this.backgroundColor=c(P),this.transparent&&(this.backgroundColor=c(0),this.backgroundColor.alpha=0),this.preBoot=e(m,"callbacks.preBoot",u),this.postBoot=e(m,"callbacks.postBoot",u),this.physics=e(m,"physics",{}),this.defaultPhysicsSystem=e(this.physics,"default",!1),this.loaderBaseURL=e(m,"loader.baseURL",""),this.loaderPath=e(m,"loader.path",""),this.loaderMaxParallelDownloads=e(m,"loader.maxParallelDownloads",a.os.android?6:32),this.loaderCrossOrigin=e(m,"loader.crossOrigin",void 0),this.loaderResponseType=e(m,"loader.responseType",""),this.loaderAsync=e(m,"loader.async",!0),this.loaderUser=e(m,"loader.user",""),this.loaderPassword=e(m,"loader.password",""),this.loaderTimeout=e(m,"loader.timeout",0),this.loaderMaxRetries=e(m,"loader.maxRetries",2),this.loaderWithCredentials=e(m,"loader.withCredentials",!1),this.loaderImageLoadType=e(m,"loader.imageLoadType","XHR"),this.loaderLocalScheme=e(m,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=e(m,"fx.glow.quality",.1),this.glowFXDistance=e(m,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=e(m,"plugins",null),R=o.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:n(A)&&(this.installGlobalPlugins=r(A,"global",[]),this.installScenePlugins=r(A,"scene",[]),Array.isArray(A.default)?R=A.default:Array.isArray(A.defaultMerge)&&(R=R.concat(A.defaultMerge)))),this.defaultPlugins=R;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=e(m,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=e(m,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=e(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});p.exports=d}),86054:((p,M,t)=>{var h=t(20623),g=t(27919),o=t(8054),a=t(89357),r=function(e){var n=e.config;if((n.customEnvironment||n.canvas)&&n.renderType===o.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!n.customEnvironment&&!n.canvas&&n.renderType!==o.HEADLESS)if(n.renderType===o.AUTO&&(n.renderType=a.webGL?o.WEBGL:o.CANVAS),n.renderType===o.WEBGL){if(!a.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(n.renderType===o.CANVAS){if(!a.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+n.renderType);n.antialias||g.disableSmoothing();var u=e.scale.baseSize,s=u.width,l=u.height;if(n.canvas?(e.canvas=n.canvas,e.canvas.width=s,e.canvas.height=l):e.canvas=g.create(e,s,l,n.renderType),n.canvasStyle&&(e.canvas.style=n.canvasStyle),n.antialias||h.setCrisp(e.canvas),n.renderType!==o.HEADLESS){var c,d;c=t(68627),d=t(74797),n.renderType===o.WEBGL?e.renderer=new d(e):(e.renderer=new c(e),e.context=e.renderer.gameContext)}};p.exports=r}),96391:((p,M,t)=>{var h=t(8054),g=function(o){var a=o.config;if(!a.hideBanner){var r="WebGL";a.renderType===h.CANVAS?r="Canvas":a.renderType===h.HEADLESS&&(r="Headless");var e=a.audio,n=o.device.audio,u;if(n.webAudio&&!e.disableWebAudio?u="Web Audio":e.noAudio||!n.webAudio&&!n.audioData?u="No Audio":u="HTML5 Audio",o.device.browser.ie)window.console&&console.log("Phaser v"+h.VERSION+" / https://phaser.io");else{var s="",l=[s];if(Array.isArray(a.bannerBackgroundColor)){var c;a.bannerBackgroundColor.forEach(function(f){s=s.concat("%c "),l.push("background: "+f),c=f}),l[l.length-1]="color: "+a.bannerTextColor+"; background: "+c}else s=s.concat("%c "),l.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);l.push("background: transparent"),a.gameTitle&&(s=s.concat(a.gameTitle),a.gameVersion&&(s=s.concat(" v"+a.gameVersion)),a.hidePhaser||(s=s.concat(" / ")));var d="";a.hidePhaser||(s=s.concat("Phaser v"+h.VERSION+d+" ("+r+" | "+u+")")),s=s.concat(" %c "+a.gameURL),l[0]=s,console.log.apply(console,l)}}};p.exports=g}),50127:((p,M,t)=>{var h=t(40366),g=t(60848),o=t(24047),a=t(27919),r=t(83419),e=t(69547),n=t(83719),u=t(86054),s=t(45893),l=t(96391),c=t(82264),d=t(57264),f=t(50792),m=t(8443),y=t(7003),S=t(37277),C=t(77332),E=t(76531),P=t(60903),A=t(69442),R=t(17130),G=t(65898),b=t(51085),L=t(14747),w=new r({initialize:function(N){this.config=new e(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new f,this.anims=new g(this),this.textures=new R(this),this.cache=new o(this),this.registry=new s(this,new f),this.input=new y(this,this.config),this.scene=new P(this,this.config.sceneConfig),this.device=c,this.scale=new E(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new G(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,d(this.boot.bind(this))},boot:function(){if(!S.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),n(this),l(this),h(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),b(this);var B=this.events;B.on(m.HIDDEN,this.onHidden,this),B.on(m.VISIBLE,this.onVisible,this),B.on(m.BLUR,this.onBlur,this),B.on(m.FOCUS,this.onFocus,this)},step:function(B,N){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(m.PRE_STEP,B,N),Y.emit(m.STEP,B,N),this.scene.update(B,N),Y.emit(m.POST_STEP,B,N);var U=this.renderer;U.preRender(),Y.emit(m.PRE_RENDER,U,B,N),this.scene.render(U),U.postRender(),Y.emit(m.POST_RENDER,U,B,N)}},headlessStep:function(B,N){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(m.PRE_STEP,B,N),Y.emit(m.STEP,B,N),this.scene.update(B,N),Y.emit(m.POST_STEP,B,N),this.scene.isProcessing=!1,Y.emit(m.PRE_RENDER,null,B,N),Y.emit(m.POST_RENDER,null,B,N)}},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME,this.loop.pauseDuration)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(m.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});p.exports=w}),65898:((p,M,t)=>{var h=t(83419),g=t(35154),o=t(29747),a=t(43092),r=new h({initialize:function(n,u){this.game=n,this.raf=new a,this.started=!1,this.running=!1,this.minFps=g(u,"min",5),this.targetFps=g(u,"target",60),this.fpsLimit=g(u,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=o,this.forceSetTimeOut=g(u,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(u,"deltaHistory",10),this.panicMax=g(u,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(u,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e;var u=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(u,this.forceSetTimeOut,this._target)},smoothDelta:function(e){var n=this.deltaIndex,u=this.deltaHistory,s=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,e=Math.min(e,this._target)),e>this._min&&(e=u[n],e=Math.min(e,this._min)),u[n]=e,this.deltaIndex++,this.deltaIndex>=s&&(this.deltaIndex=0);for(var l=0,c=0;c<s;c++)l+=u[c];return l/=s,l},updateFPS:function(e){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0},stepLimitFPS:function(e){this.now=e;var n=Math.max(0,e-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta+=n,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(e,this.delta),this.delta=0),this.lastTime=e,this.frame++},step:function(e){this.now=e;var n=Math.max(0,e-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta=n,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.callback(e,n),this.lastTime=e,this.frame++},tick:function(){var e=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(e):this.step(e)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){e===void 0&&(e=!1);var n=window.performance.now();if(!this.running){e&&(this.startTime+=-this.lastTime+(this.lastTime+n));var u=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(u,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});p.exports=r}),51085:((p,M,t)=>{var h=t(8443),g=function(o){var a,r=o.events;if(document.hidden!==void 0)a="visibilitychange";else{var e=["webkit","moz","ms"];e.forEach(function(u){document[u+"Hidden"]!==void 0&&(document.hidden=function(){return document[u+"Hidden"]},a=u+"visibilitychange")})}var n=function(u){document.hidden||u.type==="pause"?r.emit(h.HIDDEN):r.emit(h.VISIBLE)};a&&document.addEventListener(a,n,!1),window.onblur=function(){r.emit(h.BLUR)},window.onfocus=function(){r.emit(h.FOCUS)},window.focus&&o.config.autoFocus&&window.focus()};p.exports=g}),97217:(p=>{p.exports="blur"}),47548:(p=>{p.exports="boot"}),19814:(p=>{p.exports="contextlost"}),68446:(p=>{p.exports="destroy"}),41700:(p=>{p.exports="focus"}),25432:(p=>{p.exports="hidden"}),65942:(p=>{p.exports="pause"}),59211:(p=>{p.exports="postrender"}),47789:(p=>{p.exports="poststep"}),39066:(p=>{p.exports="prerender"}),460:(p=>{p.exports="prestep"}),16175:(p=>{p.exports="ready"}),42331:(p=>{p.exports="resume"}),11966:(p=>{p.exports="step"}),32969:(p=>{p.exports="systemready"}),94830:(p=>{p.exports="visible"}),8443:((p,M,t)=>{p.exports={BLUR:t(97217),BOOT:t(47548),CONTEXT_LOST:t(19814),DESTROY:t(68446),FOCUS:t(41700),HIDDEN:t(25432),PAUSE:t(65942),POST_RENDER:t(59211),POST_STEP:t(47789),PRE_RENDER:t(39066),PRE_STEP:t(460),READY:t(16175),RESUME:t(42331),STEP:t(11966),SYSTEM_READY:t(32969),VISIBLE:t(94830)}}),42857:((p,M,t)=>{p.exports={Config:t(69547),CreateRenderer:t(86054),DebugHeader:t(96391),Events:t(8443),TimeStep:t(65898),VisibilityHandler:t(51085)}}),99584:((p,M,t)=>{var h=t(5290),g=t(27919),o=t(35154),a=function(r){var e=o(r,"data",[]),n=o(r,"canvas",null),u=o(r,"palette",h),s=o(r,"pixelWidth",1),l=o(r,"pixelHeight",s),c=o(r,"resizeCanvas",!0),d=o(r,"clearCanvas",!0),f=o(r,"preRender",null),m=o(r,"postRender",null),y=Math.floor(Math.abs(e[0].length*s)),S=Math.floor(Math.abs(e.length*l));n||(n=g.create2D(this,y,S),c=!1,d=!1),c&&(n.width=y,n.height=S);var C=n.getContext("2d",{willReadFrequently:!0});d&&C.clearRect(0,0,y,S),f&&f(n,C);for(var E=0;E<e.length;E++)for(var P=e[E],A=0;A<P.length;A++){var R=P[A];R!=="."&&R!==" "&&(C.fillStyle=u[R],C.fillRect(A*s,E*l,s,l))}return m&&m(n,C),n};p.exports=a}),15822:((p,M,t)=>{p.exports={GenerateTexture:t(99584),Palettes:t(57763)}}),5290:(p=>{p.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(p=>{p.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(p=>{p.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(p=>{p.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(p=>{p.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((p,M,t)=>{p.exports={ARNE16:t(5290),C64:t(23816),CGA:t(9866),JMP:t(77552),MSX:t(92259)}}),46728:((p,M,t)=>{var h=t(83419),g=t(36316),o=t(80021),a=t(26099),r=new h({Extends:o,initialize:function(n,u,s,l){o.call(this,"CubicBezierCurve"),Array.isArray(n)&&(l=new a(n[6],n[7]),s=new a(n[4],n[5]),u=new a(n[2],n[3]),n=new a(n[0],n[1])),this.p0=n,this.p1=u,this.p2=s,this.p3=l},getStartPoint:function(e){return e===void 0&&(e=new a),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,n){n===void 0&&(n=new a);var u=this.p0,s=this.p1,l=this.p2,c=this.p3;return n.set(g(e,u.x,s.x,l.x,c.x),g(e,u.y,s.y,l.y,c.y))},draw:function(e,n){n===void 0&&(n=32);var u=this.getPoints(n);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var s=1;s<u.length;s++)e.lineTo(u[s].x,u[s].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});r.fromJSON=function(e){var n=e.points,u=new a(n[0],n[1]),s=new a(n[2],n[3]),l=new a(n[4],n[5]),c=new a(n[6],n[7]);return new r(u,s,l,c)},p.exports=r}),80021:((p,M,t)=>{var h=t(83419),g=t(19217),o=t(87841),a=t(26099),r=new h({initialize:function(n){this.type=n,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(e,n){return n===void 0&&(n=32),e.strokePoints(this.getPoints(n))},getBounds:function(e,n){e||(e=new o),n===void 0&&(n=16);var u=this.getLength();n>u&&(n=u/2);var s=Math.max(1,Math.round(u/n));return g(this.getSpacedPoints(s),e)},getDistancePoints:function(e){var n=this.getLength(),u=Math.max(1,n/e);return this.getSpacedPoints(u)},getEndPoint:function(e){return e===void 0&&(e=new a),this.getPointAt(1,e)},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],u,s=this.getPoint(0,this._tmpVec2A),l=0;n.push(0);for(var c=1;c<=e;c++)u=this.getPoint(c/e,this._tmpVec2B),l+=u.distance(s),n.push(l),s.copy(u);return this.cacheArcLengths=n,n},getPointAt:function(e,n){var u=this.getUtoTmapping(e);return this.getPoint(u,n)},getPoints:function(e,n,u){u===void 0&&(u=[]),e||(n?e=this.getLength()/n:e=this.defaultDivisions);for(var s=0;s<=e;s++)u.push(this.getPoint(s/e));return u},getRandomPoint:function(e){return e===void 0&&(e=new a),this.getPoint(Math.random(),e)},getSpacedPoints:function(e,n,u){u===void 0&&(u=[]),e||(n?e=this.getLength()/n:e=this.defaultDivisions);for(var s=0;s<=e;s++){var l=this.getUtoTmapping(s/e,null,e);u.push(this.getPoint(l))}return u},getStartPoint:function(e){return e===void 0&&(e=new a),this.getPointAt(0,e)},getTangent:function(e,n){n===void 0&&(n=new a);var u=1e-4,s=e-u,l=e+u;return s<0&&(s=0),l>1&&(l=1),this.getPoint(s,this._tmpVec2A),this.getPoint(l,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(e,n){var u=this.getUtoTmapping(e);return this.getTangent(u,n)},getTFromDistance:function(e,n){return e<=0?0:this.getUtoTmapping(0,e,n)},getUtoTmapping:function(e,n,u){var s=this.getLengths(u),l=0,c=s.length,d;n?d=Math.min(n,s[c-1]):d=e*s[c-1];for(var f=0,m=c-1,y;f<=m;)if(l=Math.floor(f+(m-f)/2),y=s[l]-d,y<0)f=l+1;else if(y>0)m=l-1;else{m=l;break}if(l=m,s[l]===d)return l/(c-1);var S=s[l],C=s[l+1],E=C-S,P=(d-S)/E;return(l+P)/(c-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});p.exports=r}),73825:((p,M,t)=>{var h=t(83419),g=t(80021),o=t(39506),a=t(35154),r=t(43396),e=t(26099),n=new h({Extends:g,initialize:function(s,l,c,d,f,m,y,S){if(typeof s=="object"){var C=s;s=a(C,"x",0),l=a(C,"y",0),c=a(C,"xRadius",0),d=a(C,"yRadius",c),f=a(C,"startAngle",0),m=a(C,"endAngle",360),y=a(C,"clockwise",!1),S=a(C,"rotation",0)}else d===void 0&&(d=c),f===void 0&&(f=0),m===void 0&&(m=360),y===void 0&&(y=!1),S===void 0&&(S=0);g.call(this,"EllipseCurve"),this.p0=new e(s,l),this._xRadius=c,this._yRadius=d,this._startAngle=o(f),this._endAngle=o(m),this._clockwise=y,this._rotation=o(S)},getStartPoint:function(u){return u===void 0&&(u=new e),this.getPoint(0,u)},getResolution:function(u){return u*2},getPoint:function(u,s){s===void 0&&(s=new e);for(var l=Math.PI*2,c=this._endAngle-this._startAngle,d=Math.abs(c)<Number.EPSILON;c<0;)c+=l;for(;c>l;)c-=l;c<Number.EPSILON&&(d?c=0:c=l),this._clockwise&&!d&&(c===l?c=-l:c=c-l);var f=this._startAngle+u*c,m=this.p0.x+this._xRadius*Math.cos(f),y=this.p0.y+this._yRadius*Math.sin(f);if(this._rotation!==0){var S=Math.cos(this._rotation),C=Math.sin(this._rotation),E=m-this.p0.x,P=y-this.p0.y;m=E*S-P*C+this.p0.x,y=E*C+P*S+this.p0.y}return s.set(m,y)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return r(this._startAngle)},set:function(u){this._startAngle=o(u)}},endAngle:{get:function(){return r(this._endAngle)},set:function(u){this._endAngle=o(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return r(this._rotation)},set:function(u){this._rotation=o(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:r(this._startAngle),endAngle:r(this._endAngle),clockwise:this._clockwise,rotation:r(this._rotation)}}});n.fromJSON=function(u){return new n(u)},p.exports=n}),33951:((p,M,t)=>{var h=t(83419),g=t(80021),o=t(19217),a=t(87841),r=t(26099),e=new h({Extends:g,initialize:function(u,s){g.call(this,"LineCurve"),Array.isArray(u)&&(s=new r(u[2],u[3]),u=new r(u[0],u[1])),this.p0=u,this.p1=s,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new a),o([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,u){return u===void 0&&(u=new r),n===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),u)},getPointAt:function(n,u){return this.getPoint(n,u)},getTangent:function(n,u){return u===void 0&&(u=new r),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(n,u,s){var l;if(u){var c=this.getLengths(s),d=c[c.length-1],f=Math.min(u,d);l=f/d}else l=n;return l},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});e.fromJSON=function(n){var u=n.points,s=new r(u[0],u[1]),l=new r(u[2],u[3]);return new e(s,l)},p.exports=e}),14744:((p,M,t)=>{var h=t(83419),g=t(80021),o=t(32112),a=t(26099),r=new h({Extends:g,initialize:function(n,u,s){g.call(this,"QuadraticBezierCurve"),Array.isArray(n)&&(s=new a(n[4],n[5]),u=new a(n[2],n[3]),n=new a(n[0],n[1])),this.p0=n,this.p1=u,this.p2=s},getStartPoint:function(e){return e===void 0&&(e=new a),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,n){n===void 0&&(n=new a);var u=this.p0,s=this.p1,l=this.p2;return n.set(o(e,u.x,s.x,l.x),o(e,u.y,s.y,l.y))},draw:function(e,n){n===void 0&&(n=32);var u=this.getPoints(n);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var s=1;s<u.length;s++)e.lineTo(u[s].x,u[s].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});r.fromJSON=function(e){var n=e.points,u=new a(n[0],n[1]),s=new a(n[2],n[3]),l=new a(n[4],n[5]);return new r(u,s,l)},p.exports=r}),42534:((p,M,t)=>{var h=t(87842),g=t(83419),o=t(80021),a=t(26099),r=new g({Extends:o,initialize:function(n){n===void 0&&(n=[]),o.call(this,"SplineCurve"),this.points=[],this.addPoints(n)},addPoints:function(e){for(var n=0;n<e.length;n++){var u=new a;typeof e[n]=="number"?(u.x=e[n],u.y=e[n+1],n++):Array.isArray(e[n])?(u.x=e[n][0],u.y=e[n][1]):(u.x=e[n].x,u.y=e[n].y),this.points.push(u)}return this},addPoint:function(e,n){var u=new a(e,n);return this.points.push(u),u},getStartPoint:function(e){return e===void 0&&(e=new a),e.copy(this.points[0])},getResolution:function(e){return e*this.points.length},getPoint:function(e,n){n===void 0&&(n=new a);var u=this.points,s=(u.length-1)*e,l=Math.floor(s),c=s-l,d=u[l===0?l:l-1],f=u[l],m=u[l>u.length-2?u.length-1:l+1],y=u[l>u.length-3?u.length-1:l+2];return n.set(h(c,d.x,f.x,m.x,y.x),h(c,d.y,f.y,m.y,y.y))},toJSON:function(){for(var e=[],n=0;n<this.points.length;n++)e.push(this.points[n].x),e.push(this.points[n].y);return{type:this.type,points:e}}});r.fromJSON=function(e){return new r(e.points)},p.exports=r}),25410:((p,M,t)=>{p.exports={Path:t(46669),MoveTo:t(68618),CubicBezier:t(46728),Curve:t(80021),Ellipse:t(73825),Line:t(33951),QuadraticBezier:t(14744),Spline:t(42534)}}),68618:((p,M,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(r,e){this.active=!1,this.p0=new g(r,e)},getPoint:function(a,r){return r===void 0&&(r=new g),r.copy(this.p0)},getPointAt:function(a,r){return this.getPoint(a,r)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});p.exports=o}),46669:((p,M,t)=>{var h=t(83419),g=t(46728),o=t(73825),a=t(39429),r=t(33951),e=t(68618),n=t(14744),u=t(87841),s=t(42534),l=t(26099),c=t(36383),d=new h({initialize:function(m,y){m===void 0&&(m=0),y===void 0&&(y=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,y)},add:function(f){return this.curves.push(f),this},circleTo:function(f,m,y){return m===void 0&&(m=!1),this.ellipseTo(f,f,0,360,m,y)},closePath:function(){var f=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return f.equals(m)||this.curves.push(new r(m,f)),this},cubicBezierTo:function(f,m,y,S,C,E){var P=this.getEndPoint(),A,R,G;return f instanceof l?(A=f,R=m,G=y):(A=new l(y,S),R=new l(C,E),G=new l(f,m)),this.add(new g(P,A,R,G))},quadraticBezierTo:function(f,m,y,S){var C=this.getEndPoint(),E,P;return f instanceof l?(E=f,P=m):(E=new l(y,S),P=new l(f,m)),this.add(new n(C,E,P))},draw:function(f,m){for(var y=0;y<this.curves.length;y++){var S=this.curves[y];S.active&&S.draw(f,m)}return f},ellipseTo:function(f,m,y,S,C,E){var P=new o(0,0,f,m,y,S,C,E),A=this.getEndPoint(this._tmpVec2A),R=P.getStartPoint(this._tmpVec2B);return A.subtract(R),P.x=A.x,P.y=A.y,this.add(P)},fromJSON:function(f){this.curves=[],this.cacheLengths=[],this.startPoint.set(f.x,f.y),this.autoClose=f.autoClose;for(var m=0;m<f.curves.length;m++){var y=f.curves[m];switch(y.type){case"LineCurve":this.add(r.fromJSON(y));break;case"EllipseCurve":this.add(o.fromJSON(y));break;case"SplineCurve":this.add(s.fromJSON(y));break;case"CubicBezierCurve":this.add(g.fromJSON(y));break;case"QuadraticBezierCurve":this.add(n.fromJSON(y));break}}return this},getBounds:function(f,m){f===void 0&&(f=new u),m===void 0&&(m=16),f.x=Number.MAX_VALUE,f.y=Number.MAX_VALUE;for(var y=new u,S=c.MIN_SAFE_INTEGER,C=c.MIN_SAFE_INTEGER,E=0;E<this.curves.length;E++){var P=this.curves[E];P.active&&(P.getBounds(y,m),f.x=Math.min(f.x,y.x),f.y=Math.min(f.y,y.y),S=Math.max(S,y.right),C=Math.max(C,y.bottom))}return f.right=S,f.bottom=C,f},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var f=[],m=0,y=0;y<this.curves.length;y++)m+=this.curves[y].getLength(),f.push(m);return this.cacheLengths=f,f},getCurveAt:function(f){for(var m=f*this.getLength(),y=this.getCurveLengths(),S=0;S<y.length;){if(y[S]>=m)return this.curves[S];S++}return null},getEndPoint:function(f){return f===void 0&&(f=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,f):f.copy(this.startPoint),f},getLength:function(){var f=this.getCurveLengths();return f[f.length-1]},getPoint:function(f,m){m===void 0&&(m=new l);for(var y=f*this.getLength(),S=this.getCurveLengths(),C=0;C<S.length;){if(S[C]>=y){var E=S[C]-y,P=this.curves[C],A=P.getLength(),R=A===0?0:1-E/A;return P.getPointAt(R,m)}C++}return null},getPoints:function(f,m){!f&&!m&&(f=this.defaultDivisions);for(var y=[],S,C=0;C<this.curves.length;C++){var E=this.curves[C];if(E.active)for(var P=E.getResolution(f),A=E.getPoints(P,m),R=0;R<A.length;R++){var G=A[R];S&&S.equals(G)||(y.push(G),S=G)}}return this.autoClose&&y.length>1&&!y[y.length-1].equals(y[0])&&y.push(y[0]),y},getRandomPoint:function(f){return f===void 0&&(f=new l),this.getPoint(Math.random(),f)},getSpacedPoints:function(f){f===void 0&&(f=40);for(var m=[],y=0;y<=f;y++)m.push(this.getPoint(y/f));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(f){return f===void 0&&(f=new l),f.copy(this.startPoint)},getTangent:function(f,m){m===void 0&&(m=new l);for(var y=f*this.getLength(),S=this.getCurveLengths(),C=0;C<S.length;){if(S[C]>=y){var E=S[C]-y,P=this.curves[C],A=P.getLength(),R=A===0?0:1-E/A;return P.getTangentAt(R,m)}C++}return null},lineTo:function(f,m){f instanceof l?this._tmpVec2B.copy(f):typeof f=="object"?this._tmpVec2B.setFromObject(f):this._tmpVec2B.set(f,m);var y=this.getEndPoint(this._tmpVec2A);return this.add(new r([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(f){return f.unshift(this.getEndPoint()),this.add(new s(f))},moveTo:function(f,m){return f instanceof l?this.add(new e(f.x,f.y)):this.add(new e(f,m))},toJSON:function(){for(var f=[],m=0;m<this.curves.length;m++)f.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:f}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(f,m){return new d(f,m)}),p.exports=d}),45893:((p,M,t)=>{var h=t(83419),g=t(24882),o=new h({initialize:function(r,e){this.parent=r,this.events=e,e||(this.events=r.events?r.events:r),this.list={},this.values={},this._frozen=!1,!r.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(a){var r=this.list;if(Array.isArray(a)){for(var e=[],n=0;n<a.length;n++)e.push(r[a[n]]);return e}else return r[a]},getAll:function(){var a={};for(var r in this.list)this.list.hasOwnProperty(r)&&(a[r]=this.list[r]);return a},query:function(a){var r={};for(var e in this.list)this.list.hasOwnProperty(e)&&e.match(a)&&(r[e]=this.list[e]);return r},set:function(a,r){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,r);for(var e in a)this.setValue(e,a[e]);return this},inc:function(a,r){if(this._frozen)return this;r===void 0&&(r=1);var e=this.get(a);return e===void 0&&(e=0),this.set(a,e+r),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,r){if(this._frozen)return this;if(this.has(a))this.values[a]=r;else{var e=this,n=this.list,u=this.events,s=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return n[a]},set:function(l){if(!e._frozen){var c=n[a];n[a]=l,u.emit(g.CHANGE_DATA,s,a,l,c),u.emit(g.CHANGE_DATA_KEY+a,s,l,c)}}}),n[a]=r,u.emit(g.SET_DATA,s,a,r)}return this},each:function(a,r){for(var e=[this.parent,null,void 0],n=1;n<arguments.length;n++)e.push(arguments[n]);for(var u in this.list)e[1]=u,e[2]=this.list[u],a.apply(r,e);return this},merge:function(a,r){r===void 0&&(r=!0);for(var e in a)a.hasOwnProperty(e)&&(r||!r&&!this.has(e))&&this.setValue(e,a[e]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var r=0;r<a.length;r++)this.removeValue(a[r]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var r=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(g.REMOVE_DATA,this.parent,a,r)}return this},pop:function(a){var r=void 0;return!this._frozen&&this.has(a)&&(r=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(g.REMOVE_DATA,this.parent,a,r)),r},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var r in this.list)this.list[r]!==void 0&&a++;return a}}});p.exports=o}),63646:((p,M,t)=>{var h=t(83419),g=t(45893),o=t(37277),a=t(44594),r=new h({Extends:g,initialize:function(n){g.call(this,n,n.sys.events),this.scene=n,this.systems=n.sys,n.sys.events.once(a.BOOT,this.boot,this),n.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("DataManagerPlugin",r,"data"),p.exports=r}),10700:(p=>{p.exports="changedata"}),93608:(p=>{p.exports="changedata-"}),60883:(p=>{p.exports="destroy"}),69780:(p=>{p.exports="removedata"}),22166:(p=>{p.exports="setdata"}),24882:((p,M,t)=>{p.exports={CHANGE_DATA:t(10700),CHANGE_DATA_KEY:t(93608),DESTROY:t(60883),REMOVE_DATA:t(69780),SET_DATA:t(22166)}}),44965:((p,M,t)=>{p.exports={DataManager:t(45893),DataManagerPlugin:t(63646),Events:t(24882)}}),7098:((p,M,t)=>{var h=t(84148),g={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function o(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),r=!!a.canPlayType;try{if(r){var e=function(s,l){var c=a.canPlayType("audio/"+s).replace(/^no$/,"");return l?!!(c||a.canPlayType("audio/"+l).replace(/^no$/,"")):!!c};if(g.ogg=e('ogg; codecs="vorbis"'),g.opus=e('ogg; codecs="opus"',"opus"),g.mp3=e("mpeg"),g.wav=e("wav"),g.m4a=e("x-m4a"),g.aac=e("aac"),g.flac=e("flac","x-flac"),g.webm=e('webm; codecs="vorbis"'),a.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(h.edge)g.dolby=!0;else if(h.safari&&h.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(n===10&&u>=11||n>10)&&(g.dolby=!0)}}}}catch{}return g}p.exports=o()}),84148:((p,M,t)=>{var h=t(25892),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function o(){var a=navigator.userAgent;return/Edg\/\d+/.test(a)?(g.edge=!0,g.es2019=!0):/OPR/.test(a)?(g.opera=!0,g.es2019=!0):/Chrome\/(\d+)/.test(a)&&!h.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10),g.es2019=g.chromeVersion>69):/Firefox\D+(\d+)/.test(a)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10),g.es2019=g.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(a)&&h.iOS?(g.mobileSafari=!0,g.es2019=!0):/MSIE (\d+\.\d+);/.test(a)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(a)&&!h.windowsPhone?(g.safari=!0,g.safariVersion=parseInt(RegExp.$1,10),g.es2019=g.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(g.silk=!0),g}p.exports=o()}),89289:((p,M,t)=>{var h=t(27919),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function o(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",u=new Image;return u.onload=function(){var s=new Image;s.onload=function(){var l=h.create2D(s,6),c=l.getContext("2d",{willReadFrequently:!0});if(c.globalCompositeOperation="multiply",c.drawImage(u,0,0),c.drawImage(s,2,0),!c.getImageData(2,0,1,1))return!1;var d=c.getImageData(2,0,1,1).data;h.remove(s),g.supportNewBlendModes=d[0]===255&&d[1]===0&&d[2]===0},s.src=e+"/wCKxvRF"+n},u.src=e+"AP804Oa6"+n,!1}function a(){var e=h.create2D(this,2),n=e.getContext("2d",{willReadFrequently:!0});n.fillStyle="rgba(10, 20, 30, 0.5)",n.fillRect(0,0,1,1);var u=n.getImageData(0,0,1,1);if(u===null)return!1;n.putImageData(u,1,0);var s=n.getImageData(1,0,1,1),l=s.data[0]===u.data[0]&&s.data[1]===u.data[1]&&s.data[2]===u.data[2]&&s.data[3]===u.data[3];return h.remove(this),l}function r(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=o(),g.supportInverseAlpha=a()),g}p.exports=r()}),89357:((p,M,t)=>{var h=t(25892),g=t(84148),o=t(27919),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function r(){var n=new ArrayBuffer(4),u=new Uint8Array(n),s=new Uint32Array(n);return u[0]=161,u[1]=178,u[2]=195,u[3]=212,s[0]===3569595041?!0:s[0]===2712847316?!1:null}function e(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var n=!1,u=function(){if(window.WebGLRenderingContext)try{var s=o.createWebGL(this),l=s.getContext("webgl")||s.getContext("experimental-webgl"),c=o.create2D(this),d=c.getContext("2d",{willReadFrequently:!0}),f=d.createImageData(1,1);return n=f.data instanceof Uint8ClampedArray,o.remove(s),o.remove(c),!!l}catch{return!1}return!1};return a.webGL=u(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(a.getUserMedia=!1),!h.iOS&&(g.ie||g.firefox||g.chrome)&&(a.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(a.littleEndian=r()),a.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&a.littleEndian!==null&&n,a}p.exports=e()}),91639:(p=>{var M={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return M;var h,g="Fullscreen",o="FullScreen",a=["request"+g,"request"+o,"webkitRequest"+g,"webkitRequest"+o,"msRequest"+g,"msRequest"+o,"mozRequest"+o,"mozRequest"+g];for(h=0;h<a.length;h++)if(document.documentElement[a[h]]){M.available=!0,M.request=a[h];break}var r=["cancel"+o,"exit"+g,"webkitCancel"+o,"webkitExit"+g,"msCancel"+o,"msExit"+g,"mozCancel"+o,"mozExit"+g];if(M.available){for(h=0;h<r.length;h++)if(document[r[h]]){M.cancel=r[h];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(M.keyboard=!0),Object.defineProperty(M,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),M}p.exports=t()}),31784:((p,M,t)=>{var h=t(84148),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function o(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||h.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":h.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}p.exports=o()}),25892:(p=>{var M={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return M;var h=navigator.userAgent;/Windows/.test(h)?M.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(M.iOS=!0,M.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),M.iOSVersion=parseInt(RegExp.$1,10)):M.macOS=!0:/Android/.test(h)?M.android=!0:/Linux/.test(h)?M.linux=!0:/iP[ao]d|iPhone/i.test(h)?(M.iOS=!0,navigator.appVersion.match(/OS (\d+)/),M.iOSVersion=parseInt(RegExp.$1,10),M.iPhone=h.toLowerCase().indexOf("iphone")!==-1,M.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?M.kindle=!0:/CrOS/.test(h)&&(M.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(M.android=!1,M.iOS=!1,M.macOS=!1,M.windows=!0,M.windowsPhone=!0);var g=/Silk/.test(h);return(M.windows||M.macOS||M.linux&&!g||M.chromeOS)&&(M.desktop=!0),(M.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(M.desktop=!1),navigator.standalone&&(M.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(M.cordova=!0),window.ejecta!==void 0&&(M.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(M.node=!0),M.node&&typeof process.versions=="object"&&(M.nodeWebkit=!!process.versions["node-webkit"],M.electron=!!process.versions.electron),/Crosswalk/.test(h)&&(M.crosswalk=!0),M.pixelRatio=window.devicePixelRatio||1,M}p.exports=t()}),43267:((p,M,t)=>{var h=t(95540),g={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function o(){if(typeof importScripts=="function")return g;var a=document.createElement("video"),r=!!a.canPlayType,e=/^no$/;try{r&&(a.canPlayType('video/ogg; codecs="theora"').replace(e,"")&&(g.ogg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(e,"")&&(g.h264=!0,g.mp4=!0),a.canPlayType("video/x-m4v").replace(e,"")&&(g.m4v=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(e,"")&&(g.webm=!0),a.canPlayType('video/webm; codecs="vp9"').replace(e,"")&&(g.vp9=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(e,"")&&(g.hls=!0))}catch{}return a.parentNode&&a.parentNode.removeChild(a),g.getVideoURL=function(n){Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++){var s=h(n[u],"url",n[u]);if(s.indexOf("blob:")===0)return{url:s,type:""};var l;if(s.indexOf("data:")===0?l=s.split(",")[0].match(/\/(.*?);/):l=s.match(/\.([a-zA-Z0-9]+)($|\?)/),l=h(n[u],"type",l?l[1]:"").toLowerCase(),g[l])return{url:s,type:l}}return null},g}p.exports=o()}),82264:((p,M,t)=>{p.exports={os:t(25892),browser:t(84148),features:t(89357),input:t(31784),audio:t(7098),video:t(43267),fullscreen:t(91639),canvasFeatures:t(89289)}}),89422:((p,M,t)=>{var h=t(83419),g=new Float32Array(20),o=new h({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(a){return this._matrix.set(a),this._dirty=!0,this},reset:function(){var a=this._matrix;return a.fill(0),a[0]=1,a[6]=1,a[12]=1,a[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var a=this._data;return this._dirty&&(a.set(this._matrix),a[4]/=255,a[9]/=255,a[14]/=255,a[19]/=255,this._dirty=!1),a},brightness:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var e=a;return this.multiply([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],r)},saturate:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var e=a*2/3+1,n=(e-1)*-.5;return this.multiply([e,n,n,0,0,n,e,n,0,0,n,n,e,0,0,0,0,0,1,0],r)},desaturate:function(a){return a===void 0&&(a=!1),this.saturate(-1,a)},hue:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1),a=a/180*Math.PI;var e=Math.cos(a),n=Math.sin(a),u=.213,s=.715,l=.072;return this.multiply([u+e*(1-u)+n*-u,s+e*-s+n*-s,l+e*-l+n*(1-l),0,0,u+e*-u+n*.143,s+e*(1-s)+n*.14,l+e*-l+n*-.283,0,0,u+e*-u+n*-.787,s+e*-s+n*s,l+e*(1-l)+n*l,0,0,0,0,0,1,0],r)},grayscale:function(a,r){return a===void 0&&(a=1),r===void 0&&(r=!1),this.saturate(-a,r)},blackWhite:function(a){return a===void 0&&(a=!1),this.multiply(o.BLACK_WHITE,a)},contrast:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var e=a+1,n=-.5*(e-1);return this.multiply([e,0,0,0,n,0,e,0,0,n,0,0,e,0,n,0,0,0,1,0],r)},negative:function(a){return a===void 0&&(a=!1),this.multiply(o.NEGATIVE,a)},desaturateLuminance:function(a){return a===void 0&&(a=!1),this.multiply(o.DESATURATE_LUMINANCE,a)},sepia:function(a){return a===void 0&&(a=!1),this.multiply(o.SEPIA,a)},night:function(a,r){return a===void 0&&(a=.1),r===void 0&&(r=!1),this.multiply([a*-2,-a,0,0,0,-a,0,a,0,0,0,a,a*2,0,0,0,0,0,1,0],r)},lsd:function(a){return a===void 0&&(a=!1),this.multiply(o.LSD,a)},brown:function(a){return a===void 0&&(a=!1),this.multiply(o.BROWN,a)},vintagePinhole:function(a){return a===void 0&&(a=!1),this.multiply(o.VINTAGE,a)},kodachrome:function(a){return a===void 0&&(a=!1),this.multiply(o.KODACHROME,a)},technicolor:function(a){return a===void 0&&(a=!1),this.multiply(o.TECHNICOLOR,a)},polaroid:function(a){return a===void 0&&(a=!1),this.multiply(o.POLAROID,a)},shiftToBGR:function(a){return a===void 0&&(a=!1),this.multiply(o.SHIFT_BGR,a)},multiply:function(a,r){r===void 0&&(r=!1),r||this.reset();var e=this._matrix,n=g;return n.set(e),e.set([n[0]*a[0]+n[1]*a[5]+n[2]*a[10]+n[3]*a[15],n[0]*a[1]+n[1]*a[6]+n[2]*a[11]+n[3]*a[16],n[0]*a[2]+n[1]*a[7]+n[2]*a[12]+n[3]*a[17],n[0]*a[3]+n[1]*a[8]+n[2]*a[13]+n[3]*a[18],n[0]*a[4]+n[1]*a[9]+n[2]*a[14]+n[3]*a[19]+n[4],n[5]*a[0]+n[6]*a[5]+n[7]*a[10]+n[8]*a[15],n[5]*a[1]+n[6]*a[6]+n[7]*a[11]+n[8]*a[16],n[5]*a[2]+n[6]*a[7]+n[7]*a[12]+n[8]*a[17],n[5]*a[3]+n[6]*a[8]+n[7]*a[13]+n[8]*a[18],n[5]*a[4]+n[6]*a[9]+n[7]*a[14]+n[8]*a[19]+n[9],n[10]*a[0]+n[11]*a[5]+n[12]*a[10]+n[13]*a[15],n[10]*a[1]+n[11]*a[6]+n[12]*a[11]+n[13]*a[16],n[10]*a[2]+n[11]*a[7]+n[12]*a[12]+n[13]*a[17],n[10]*a[3]+n[11]*a[8]+n[12]*a[13]+n[13]*a[18],n[10]*a[4]+n[11]*a[9]+n[12]*a[14]+n[13]*a[19]+n[14],n[15]*a[0]+n[16]*a[5]+n[17]*a[10]+n[18]*a[15],n[15]*a[1]+n[16]*a[6]+n[17]*a[11]+n[18]*a[16],n[15]*a[2]+n[16]*a[7]+n[17]*a[12]+n[18]*a[17],n[15]*a[3]+n[16]*a[8]+n[17]*a[13]+n[18]*a[18],n[15]*a[4]+n[16]*a[9]+n[17]*a[14]+n[18]*a[19]+n[19]]),this._dirty=!0,this}});o.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],o.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],o.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],o.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],o.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],o.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],o.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],o.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],o.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],o.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],o.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],p.exports=o}),51767:((p,M,t)=>{var h=t(83419),g=t(29747),o=new h({initialize:function(r,e,n){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(r,e,n)},set:function(a,r,e){return a===void 0&&(a=0),r===void 0&&(r=0),e===void 0&&(e=0),this._rgb=[a,r,e],this.onChange(),this},equals:function(a,r,e){var n=this._rgb;return n[0]===a&&n[1]===r&&n[2]===e},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});p.exports=o}),60461:(p=>{var M={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};p.exports=M}),54312:((p,M,t)=>{var h=t(62235),g=t(35893),o=t(86327),a=t(88417),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)+u),o(e,h(n)+s),e};p.exports=r}),46768:((p,M,t)=>{var h=t(62235),g=t(26541),o=t(86327),a=t(385),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)-u),o(e,h(n)+s),e};p.exports=r}),35827:((p,M,t)=>{var h=t(62235),g=t(54380),o=t(86327),a=t(40136),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)+u),o(e,h(n)+s),e};p.exports=r}),46871:((p,M,t)=>{var h=t(66786),g=t(35893),o=t(7702),a=function(r,e,n,u){return n===void 0&&(n=0),u===void 0&&(u=0),h(r,g(e)+n,o(e)+u),r};p.exports=a}),5198:((p,M,t)=>{var h=t(7702),g=t(26541),o=t(20786),a=t(385),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)-u),o(e,h(n)+s),e};p.exports=r}),11879:((p,M,t)=>{var h=t(60461),g=[];g[h.BOTTOM_CENTER]=t(54312),g[h.BOTTOM_LEFT]=t(46768),g[h.BOTTOM_RIGHT]=t(35827),g[h.CENTER]=t(46871),g[h.LEFT_CENTER]=t(5198),g[h.RIGHT_CENTER]=t(80503),g[h.TOP_CENTER]=t(89698),g[h.TOP_LEFT]=t(922),g[h.TOP_RIGHT]=t(21373),g[h.LEFT_BOTTOM]=g[h.BOTTOM_LEFT],g[h.LEFT_TOP]=g[h.TOP_LEFT],g[h.RIGHT_BOTTOM]=g[h.BOTTOM_RIGHT],g[h.RIGHT_TOP]=g[h.TOP_RIGHT];var o=function(a,r,e,n,u){return g[e](a,r,n,u)};p.exports=o}),80503:((p,M,t)=>{var h=t(7702),g=t(54380),o=t(20786),a=t(40136),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)+u),o(e,h(n)+s),e};p.exports=r}),89698:((p,M,t)=>{var h=t(35893),g=t(17717),o=t(88417),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,h(n)+u),a(e,g(n)-s),e};p.exports=r}),922:((p,M,t)=>{var h=t(26541),g=t(17717),o=t(385),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,h(n)-u),a(e,g(n)-s),e};p.exports=r}),21373:((p,M,t)=>{var h=t(54380),g=t(17717),o=t(40136),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,h(n)+u),a(e,g(n)-s),e};p.exports=r}),91660:((p,M,t)=>{p.exports={BottomCenter:t(54312),BottomLeft:t(46768),BottomRight:t(35827),Center:t(46871),LeftCenter:t(5198),QuickSet:t(11879),RightCenter:t(80503),TopCenter:t(89698),TopLeft:t(922),TopRight:t(21373)}}),71926:((p,M,t)=>{var h=t(60461),g=t(79291),o={In:t(91660),To:t(16694)};o=g(!1,o,h),p.exports=o}),21578:((p,M,t)=>{var h=t(62235),g=t(35893),o=t(88417),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,g(n)+u),a(e,h(n)+s),e};p.exports=r}),10210:((p,M,t)=>{var h=t(62235),g=t(26541),o=t(385),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,g(n)-u),a(e,h(n)+s),e};p.exports=r}),82341:((p,M,t)=>{var h=t(62235),g=t(54380),o=t(40136),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,g(n)+u),a(e,h(n)+s),e};p.exports=r}),87958:((p,M,t)=>{var h=t(62235),g=t(26541),o=t(86327),a=t(40136),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)-u),o(e,h(n)+s),e};p.exports=r}),40080:((p,M,t)=>{var h=t(7702),g=t(26541),o=t(20786),a=t(40136),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)-u),o(e,h(n)+s),e};p.exports=r}),88466:((p,M,t)=>{var h=t(26541),g=t(17717),o=t(40136),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,h(n)-u),a(e,g(n)-s),e};p.exports=r}),38829:((p,M,t)=>{var h=t(60461),g=[];g[h.BOTTOM_CENTER]=t(21578),g[h.BOTTOM_LEFT]=t(10210),g[h.BOTTOM_RIGHT]=t(82341),g[h.LEFT_BOTTOM]=t(87958),g[h.LEFT_CENTER]=t(40080),g[h.LEFT_TOP]=t(88466),g[h.RIGHT_BOTTOM]=t(19211),g[h.RIGHT_CENTER]=t(34609),g[h.RIGHT_TOP]=t(48741),g[h.TOP_CENTER]=t(49440),g[h.TOP_LEFT]=t(81288),g[h.TOP_RIGHT]=t(61323);var o=function(a,r,e,n,u){return g[e](a,r,n,u)};p.exports=o}),19211:((p,M,t)=>{var h=t(62235),g=t(54380),o=t(86327),a=t(385),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)+u),o(e,h(n)+s),e};p.exports=r}),34609:((p,M,t)=>{var h=t(7702),g=t(54380),o=t(20786),a=t(385),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,g(n)+u),o(e,h(n)+s),e};p.exports=r}),48741:((p,M,t)=>{var h=t(54380),g=t(17717),o=t(385),a=t(66737),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(e,h(n)+u),a(e,g(n)-s),e};p.exports=r}),49440:((p,M,t)=>{var h=t(35893),g=t(17717),o=t(86327),a=t(88417),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,h(n)+u),o(e,g(n)-s),e};p.exports=r}),81288:((p,M,t)=>{var h=t(26541),g=t(17717),o=t(86327),a=t(385),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,h(n)-u),o(e,g(n)-s),e};p.exports=r}),61323:((p,M,t)=>{var h=t(54380),g=t(17717),o=t(86327),a=t(40136),r=function(e,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(e,h(n)+u),o(e,g(n)-s),e};p.exports=r}),16694:((p,M,t)=>{p.exports={BottomCenter:t(21578),BottomLeft:t(10210),BottomRight:t(82341),LeftBottom:t(87958),LeftCenter:t(40080),LeftTop:t(88466),QuickSet:t(38829),RightBottom:t(19211),RightCenter:t(34609),RightTop:t(48741),TopCenter:t(49440),TopLeft:t(81288),TopRight:t(61323)}}),66786:((p,M,t)=>{var h=t(88417),g=t(20786),o=function(a,r,e){return h(a,r),g(a,e)};p.exports=o}),62235:(p=>{var M=function(t){return t.y+t.height-t.height*t.originY};p.exports=M}),72873:((p,M,t)=>{var h=t(62235),g=t(26541),o=t(54380),a=t(17717),r=t(87841),e=function(n,u){u===void 0&&(u=new r);var s=g(n),l=a(n);return u.x=s,u.y=l,u.width=o(n)-s,u.height=h(n)-l,u};p.exports=e}),35893:(p=>{var M=function(t){return t.x-t.width*t.originX+t.width*.5};p.exports=M}),7702:(p=>{var M=function(t){return t.y-t.height*t.originY+t.height*.5};p.exports=M}),26541:(p=>{var M=function(t){return t.x-t.width*t.originX};p.exports=M}),87431:(p=>{var M=function(t){return t.width*t.originX};p.exports=M}),46928:(p=>{var M=function(t){return t.height*t.originY};p.exports=M}),54380:(p=>{var M=function(t){return t.x+t.width-t.width*t.originX};p.exports=M}),17717:(p=>{var M=function(t){return t.y-t.height*t.originY};p.exports=M}),86327:(p=>{var M=function(t,h){return t.y=h-t.height+t.height*t.originY,t};p.exports=M}),88417:(p=>{var M=function(t,h){var g=t.width*t.originX;return t.x=h+g-t.width*.5,t};p.exports=M}),20786:(p=>{var M=function(t,h){var g=t.height*t.originY;return t.y=h+g-t.height*.5,t};p.exports=M}),385:(p=>{var M=function(t,h){return t.x=h+t.width*t.originX,t};p.exports=M}),40136:(p=>{var M=function(t,h){return t.x=h-t.width+t.width*t.originX,t};p.exports=M}),66737:(p=>{var M=function(t,h){return t.y=h+t.height*t.originY,t};p.exports=M}),58724:((p,M,t)=>{p.exports={CenterOn:t(66786),GetBottom:t(62235),GetBounds:t(72873),GetCenterX:t(35893),GetCenterY:t(7702),GetLeft:t(26541),GetOffsetX:t(87431),GetOffsetY:t(46928),GetRight:t(54380),GetTop:t(17717),SetBottom:t(86327),SetCenterX:t(88417),SetCenterY:t(20786),SetLeft:t(385),SetRight:t(40136),SetTop:t(66737)}}),20623:(p=>{var M={setCrisp:function(t){var h=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return h.forEach(function(g){t.style["image-rendering"]=g}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};p.exports=M}),27919:((p,M,t)=>{var h=t(8054),g=t(68703),o=[],a=!1,r=function(){var e=function(y,S,C,E,P){S===void 0&&(S=1),C===void 0&&(C=1),E===void 0&&(E=h.CANVAS),P===void 0&&(P=!1);var A,R=s(E);return R===null?(R={parent:y,canvas:document.createElement("canvas"),type:E},E===h.CANVAS&&o.push(R),A=R.canvas):(R.parent=y,A=R.canvas),P&&(R.parent=A),A.width=S,A.height=C,a&&E===h.CANVAS&&g.disable(A.getContext("2d",{willReadFrequently:!1})),A},n=function(y,S,C){return e(y,S,C,h.CANVAS)},u=function(y,S,C){return e(y,S,C,h.WEBGL)},s=function(y){if(y===void 0&&(y=h.CANVAS),y===h.WEBGL)return null;for(var S=0;S<o.length;S++){var C=o[S];if(!C.parent&&C.type===y)return C}return null},l=function(y){var S=y instanceof HTMLCanvasElement;o.forEach(function(C){(S&&C.canvas===y||!S&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},c=function(){var y=0;return o.forEach(function(S){S.parent&&y++}),y},d=function(){return o.length-c()},f=function(){a=!0},m=function(){a=!1};return{create2D:n,create:e,createWebGL:u,disableSmoothing:f,enableSmoothing:m,first:s,free:d,pool:o,remove:l,total:c}};p.exports=r()}),68703:(p=>{var M="",t=function(){var h=function(r){for(var e=["i","webkitI","msI","mozI","oI"],n=0;n<e.length;n++){var u=e[n]+"mageSmoothingEnabled";if(u in r)return u}return null},g=function(r){return M===""&&(M=h(r)),M&&(r[M]=!0),r},o=function(r){return M===""&&(M=h(r)),M&&(r[M]=!1),r},a=function(r){return M!==null?r[M]:null};return{disable:o,enable:g,getPrefix:h,isEnabled:a}};p.exports=t()}),65208:(p=>{var M=function(t,h){return h===void 0&&(h="none"),t.style.msTouchAction=h,t.style["ms-touch-action"]=h,t.style["touch-action"]=h,t};p.exports=M}),91610:(p=>{var M=function(t,h){h===void 0&&(h="none");var g=["-webkit-","-khtml-","-moz-","-ms-",""];return g.forEach(function(o){t.style[o+"user-select"]=h}),t.style["-webkit-touch-callout"]=h,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};p.exports=M}),26253:((p,M,t)=>{p.exports={CanvasInterpolation:t(20623),CanvasPool:t(27919),Smoothing:t(68703),TouchAction:t(65208),UserSelect:t(91610)}}),40987:((p,M,t)=>{var h=t(83419),g=t(37589),o=t(1e3),a=t(7537),r=t(87837),e=new h({initialize:function(u,s,l,c){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(u,s,l,c)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,u,s,l,c){return l===void 0&&(l=255),c===void 0&&(c=!0),this._locked=!0,this.red=n,this.green=u,this.blue=s,this.alpha=l,this._locked=!1,this.update(c)},setGLTo:function(n,u,s,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=n,this.greenGL=u,this.blueGL=s,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,u,s){return a(n,u,s,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var u=this.r,s=this.g,l=this.b,c=this.a;return this._color=g(u,s,l),this._color32=o(u,s,l,c),this._rgba="rgba("+u+","+s+","+l+","+c/255+")",n&&r(u,s,l,this),this},updateHSV:function(){var n=this.r,u=this.g,s=this.b;return r(n,u,s,this),this},clone:function(){return new e(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,u){n===void 0&&(n=0),u===void 0&&(u=255);var s=Math.floor(n+Math.random()*(u-n)),l=Math.floor(n+Math.random()*(u-n)),c=Math.floor(n+Math.random()*(u-n));return this.setTo(s,l,c)},randomGray:function(n,u){n===void 0&&(n=0),u===void 0&&(u=255);var s=Math.floor(n+Math.random()*(u-n));return this.setTo(s,s,s)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var u=this.r,s=this.g,l=this.b;return u=Math.max(0,Math.min(255,u-Math.round(255*-(n/100)))),s=Math.max(0,Math.min(255,s-Math.round(255*-(n/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(n/100)))),this.setTo(u,s,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,a(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,a(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,a(this._h,this._s,n,this)}}});p.exports=e}),92728:((p,M,t)=>{var h=t(37589),g=function(o){o===void 0&&(o=1024);var a=[],r=255,e,n=255,u=0,s=0;for(e=0;e<=r;e++)a.push({r:n,g:e,b:s,color:h(n,e,s)});for(u=255,e=r;e>=0;e--)a.push({r:e,g:u,b:s,color:h(e,u,s)});for(n=0,e=0;e<=r;e++,u--)a.push({r:n,g:u,b:e,color:h(n,u,e)});for(u=0,s=255,e=0;e<=r;e++,s--,n++)a.push({r:n,g:u,b:s,color:h(n,u,s)});if(o===1024)return a;var l=[],c=0,d=1024/o;for(e=0;e<o;e++)l.push(a[Math.floor(c)]),c+=d;return l};p.exports=g}),91588:(p=>{var M=function(t){var h={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(h.a=t>>>24),h};p.exports=M}),62957:(p=>{var M=function(t){var h=t.toString(16);return h.length===1?"0"+h:h};p.exports=M}),37589:(p=>{var M=function(t,h,g){return t<<16|h<<8|g};p.exports=M}),1e3:(p=>{var M=function(t,h,g,o){return o<<24|t<<16|h<<8|g};p.exports=M}),62183:((p,M,t)=>{var h=t(40987),g=t(89528),o=function(a,r,e){var n=e,u=e,s=e;if(r!==0){var l=e<.5?e*(1+r):e+r-e*r,c=2*e-l;n=g(c,l,a+1/3),u=g(c,l,a),s=g(c,l,a-1/3)}var d=new h;return d.setGLTo(n,u,s,1)};p.exports=o}),27939:((p,M,t)=>{var h=t(7537),g=function(o,a){o===void 0&&(o=1),a===void 0&&(a=1);for(var r=[],e=0;e<=359;e++)r.push(h(e/359,o,a));return r};p.exports=g}),7537:((p,M,t)=>{var h=t(37589);function g(a,r,e,n){var u=(a+r*6)%6,s=Math.min(u,4-u,1);return Math.round(255*(n-n*e*Math.max(0,s)))}var o=function(a,r,e,n){r===void 0&&(r=1),e===void 0&&(e=1);var u=g(5,a,r,e),s=g(3,a,r,e),l=g(1,a,r,e);return n?n.setTo?n.setTo(u,s,l,n.alpha,!0):(n.r=u,n.g=s,n.b=l,n.color=h(u,s,l),n):{r:u,g:s,b:l,color:h(u,s,l)}};p.exports=o}),70238:((p,M,t)=>{var h=t(40987),g=function(o){var a=new h;o=o.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(s,l,c,d){return l+l+c+c+d+d});var r=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);if(r){var e=parseInt(r[1],16),n=parseInt(r[2],16),u=parseInt(r[3],16);a.setTo(e,n,u)}return a};p.exports=g}),89528:(p=>{var M=function(t,h,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?t+(h-t)*6*g:g<.5?h:g<.6666666666666666?t+(h-t)*(.6666666666666666-g)*6:t};p.exports=M}),30100:((p,M,t)=>{var h=t(40987),g=t(90664),o=function(a){var r=g(a);return new h(r.r,r.g,r.b,r.a)};p.exports=o}),90664:(p=>{var M=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};p.exports=M}),13699:((p,M,t)=>{var h=t(28915),g=t(37589),o=function(e,n,u,s,l,c,d,f){d===void 0&&(d=100),f===void 0&&(f=0);var m=f/d,y=h(e,s,m),S=h(n,l,m),C=h(u,c,m);return{r:y,g:S,b:C,a:255,color:g(y,S,C)}},a=function(e,n,u,s){return u===void 0&&(u=100),s===void 0&&(s=0),o(e.r,e.g,e.b,n.r,n.g,n.b,u,s)},r=function(e,n,u,s,l,c){return l===void 0&&(l=100),c===void 0&&(c=0),o(e.r,e.g,e.b,n,u,s,l,c)};p.exports={RGBWithRGB:o,ColorWithRGB:r,ColorWithColor:a}}),68957:((p,M,t)=>{var h=t(40987),g=function(o){return new h(o.r,o.g,o.b,o.a)};p.exports=g}),87388:((p,M,t)=>{var h=t(40987),g=function(o){var a=new h,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(o.toLowerCase());if(r){var e=parseInt(r[1],10),n=parseInt(r[2],10),u=parseInt(r[3],10),s=r[4]!==void 0?parseFloat(r[4]):1;a.setTo(e,n,u,s*255)}return a};p.exports=g}),87837:(p=>{var M=function(t,h,g,o){o===void 0&&(o={h:0,s:0,v:0}),t/=255,h/=255,g/=255;var a=Math.min(t,h,g),r=Math.max(t,h,g),e=r-a,n=0,u=r===0?0:e/r,s=r;return r!==a&&(r===t?n=(h-g)/e+(h<g?6:0):r===h?n=(g-t)/e+2:r===g&&(n=(t-h)/e+4),n/=6),o.hasOwnProperty("_h")?(o._h=n,o._s=u,o._v=s):(o.h=n,o.s=u,o.v=s),o};p.exports=M}),75723:((p,M,t)=>{var h=t(62957),g=function(o,a,r,e,n){return e===void 0&&(e=255),n===void 0&&(n="#"),n==="#"?"#"+((1<<24)+(o<<16)+(a<<8)+r).toString(16).slice(1,7):"0x"+h(e)+h(o)+h(a)+h(r)};p.exports=g}),85386:((p,M,t)=>{var h=t(30976),g=t(40987),o=function(a,r){return a===void 0&&(a=0),r===void 0&&(r=255),new g(h(a,r),h(a,r),h(a,r))};p.exports=o}),80333:((p,M,t)=>{var h=t(70238),g=t(30100),o=t(68957),a=t(87388),r=function(e){var n=typeof e;switch(n){case"string":return e.substr(0,3).toLowerCase()==="rgb"?a(e):h(e);case"number":return g(e);case"object":return o(e)}};p.exports=r}),3956:((p,M,t)=>{var h=t(40987);h.ColorSpectrum=t(92728),h.ColorToRGBA=t(91588),h.ComponentToHex=t(62957),h.GetColor=t(37589),h.GetColor32=t(1e3),h.HexStringToColor=t(70238),h.HSLToColor=t(62183),h.HSVColorWheel=t(27939),h.HSVToRGB=t(7537),h.HueToComponent=t(89528),h.IntegerToColor=t(30100),h.IntegerToRGB=t(90664),h.Interpolate=t(13699),h.ObjectToColor=t(68957),h.RandomRGB=t(85386),h.RGBStringToColor=t(87388),h.RGBToHSV=t(87837),h.RGBToString=t(75723),h.ValueToColor=t(80333),p.exports=h}),27460:((p,M,t)=>{p.exports={Align:t(71926),BaseShader:t(73894),Bounds:t(58724),Canvas:t(26253),Color:t(3956),ColorMatrix:t(89422),Masks:t(69781),RGB:t(51767)}}),6858:((p,M,t)=>{var h=t(83419),g=t(39429),o=new h({initialize:function(r,e,n,u,s,l){e||(e=r.sys.make.image({x:n,y:u,key:s,frame:l,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(a){this.bitmapMask=a},preRenderWebGL:function(a,r,e){a.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,e)},postRenderWebGL:function(a,r,e){a.pipelines.BITMAPMASK_PIPELINE.endMask(this,r,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});g.register("bitmapMask",function(a,r,e,n,u){return new o(this.scene,a,r,e,n,u)}),p.exports=o}),80661:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(o){return this.geometryMask=o,this},setInvertAlpha:function(o){return o===void 0&&(o=!0),this.invertAlpha=o,this},preRenderWebGL:function(o,a,r){var e=o.gl;o.flush(),o.maskStack.length===0&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),o.maskCount=0),o.currentCameraMask.mask!==this&&(o.currentMask.mask=this),o.maskStack.push({mask:this,camera:r}),this.applyStencil(o,r,!0),o.maskCount++},applyStencil:function(o,a,r){var e=o.gl,n=this.geometryMask,u=o.maskCount,s=255;e.colorMask(!1,!1,!1,!1),r?(e.stencilFunc(e.EQUAL,u,s),e.stencilOp(e.KEEP,e.KEEP,e.INCR),u++):(e.stencilFunc(e.EQUAL,u+1,s),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),this.level=u,n.renderWebGL(o,n,a),o.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),this.invertAlpha?e.stencilFunc(e.NOTEQUAL,u,s):e.stencilFunc(e.EQUAL,u,s)},postRenderWebGL:function(o){var a=o.gl;o.maskStack.pop(),o.maskCount--,o.flush();var r=o.currentMask;if(o.maskStack.length===0)r.mask=null,a.disable(a.STENCIL_TEST);else{var e=o.maskStack[o.maskStack.length-1];e.mask.applyStencil(o,e.camera,!1),o.currentCameraMask.mask!==e.mask?(r.mask=e.mask,r.camera=e.camera):r.mask=null}},preRenderCanvas:function(o,a,r){var e=this.geometryMask;o.currentContext.save(),e.renderCanvas(o,e,r,null,null,!0),o.currentContext.clip()},postRenderCanvas:function(o){o.currentContext.restore()},destroy:function(){this.geometryMask=null}});p.exports=g}),69781:((p,M,t)=>{p.exports={BitmapMask:t(6858),GeometryMask:t(80661)}}),73894:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n){(!r||r==="")&&(r=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!e||e==="")&&(e=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),n===void 0&&(n=null),this.key=a,this.fragmentSrc=r,this.vertexSrc=e,this.uniforms=n}});p.exports=g}),40366:(p=>{var M=function(t,h){var g;if(h)typeof h=="string"?g=document.getElementById(h):typeof h=="object"&&h.nodeType===1&&(g=h);else if(t.parentElement||h===null)return t;return g||(g=document.body),g.appendChild(t),t};p.exports=M}),83719:((p,M,t)=>{var h=t(40366),g=function(o){var a=o.config;if(!(!a.parent||!a.domCreateContainer)){var r=document.createElement("div");r.style.cssText=["display: block;","width: "+o.scale.width+"px;","height: "+o.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),o.domContainer=r,h(r,a.parent)}};p.exports=g}),57264:((p,M,t)=>{var h=t(25892),g=function(o){if(document.readyState==="complete"||document.readyState==="interactive"){o();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),o()};document.body?h.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};p.exports=g}),57811:(p=>{var M=function(t){if(!t)return window.innerHeight;var h=Math.abs(window.orientation),g={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),g.w=h===90?o.offsetHeight:window.innerWidth,g.h=h===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?g.h:g.w};p.exports=M}),45818:((p,M,t)=>{var h=t(13560),g=function(o,a){var r=window.screen,e=r?r.orientation||r.mozOrientation||r.msOrientation:!1;if(e&&typeof e.type=="string")return e.type;if(typeof e=="string")return e;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return h.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return h.ORIENTATION.LANDSCAPE}else return a>o?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE};p.exports=g}),74403:(p=>{var M=function(t){var h;return t!==""&&(typeof t=="string"?h=document.getElementById(t):t&&t.nodeType===1&&(h=t)),h||(h=document.body),h};p.exports=M}),56836:(p=>{var M=function(t){var h="";try{if(window.DOMParser){var g=new DOMParser;h=g.parseFromString(t,"text/xml")}else h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(t)}catch{h=null}return!h||!h.documentElement||h.getElementsByTagName("parsererror").length?null:h};p.exports=M}),35846:(p=>{var M=function(t){t.parentNode&&t.parentNode.removeChild(t)};p.exports=M}),43092:((p,M,t)=>{var h=t(83419),g=t(29747),o=new h({initialize:function(){this.isRunning=!1,this.callback=g,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var r=this;this.step=function e(n){r.callback(n),r.isRunning&&(r.timeOutID=window.requestAnimationFrame(e))},this.stepTimeout=function e(){r.isRunning&&(r.timeOutID=window.setTimeout(e,r.delay)),r.callback(window.performance.now())}},start:function(a,r,e){this.isRunning||(this.callback=a,this.isSetTimeOut=r,this.delay=e,this.isRunning=!0,this.timeOutID=r?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});p.exports=o}),84902:((p,M,t)=>{var h={AddToDOM:t(40366),DOMContentLoaded:t(57264),GetInnerHeight:t(57811),GetScreenOrientation:t(45818),GetTarget:t(74403),ParseXML:t(56836),RemoveFromDOM:t(35846),RequestAnimationFrame:t(43092)};p.exports=h}),47565:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(37277),a=new h({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});o.register("EventEmitter",a,"events"),p.exports=a}),93055:((p,M,t)=>{p.exports={EventEmitter:t(47565)}}),20122:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n){n===void 0&&(n=1),g.call(this,o.BARREL,e),this.amount=n}});p.exports=a}),32251:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l,c,d){u===void 0&&(u=1),s===void 0&&(s=1),l===void 0&&(l=1),c===void 0&&(c=1),d===void 0&&(d=4),g.call(this,o.BLOOM,e),this.steps=d,this.offsetX=u,this.offsetY=s,this.blurStrength=l,this.strength=c,this.glcolor=[1,1,1],n!=null&&(this.color=n)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});p.exports=a}),9047:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l,c,d){n===void 0&&(n=0),u===void 0&&(u=2),s===void 0&&(s=2),l===void 0&&(l=1),d===void 0&&(d=4),g.call(this,o.BLUR,e),this.quality=n,this.x=u,this.y=s,this.steps=d,this.strength=l,this.glcolor=[1,1,1],c!=null&&(this.color=c)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});p.exports=a}),27885:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l,c,d,f){n===void 0&&(n=.5),u===void 0&&(u=1),s===void 0&&(s=.2),l===void 0&&(l=!1),c===void 0&&(c=1),d===void 0&&(d=1),f===void 0&&(f=1),g.call(this,o.BOKEH,e),this.radius=n,this.amount=u,this.contrast=s,this.isTiltShift=l,this.strength=f,this.blurX=c,this.blurY=d}});p.exports=a}),12578:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l,c){n===void 0&&(n=8),l===void 0&&(l=1),c===void 0&&(c=.005),g.call(this,o.CIRCLE,e),this.scale=l,this.feather=c,this.thickness=n,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],u!=null&&(this.color=u),s!=null&&(this.backgroundColor=s)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}},backgroundColor:{get:function(){var r=this.glcolor2;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor2;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(r){this.glcolor2[3]=r}}});p.exports=a}),15802:((p,M,t)=>{var h=t(83419),g=t(89422),o=t(14811),a=new h({Extends:g,initialize:function(e){g.call(this),this.type=o.COLOR_MATRIX,this.gameObject=e,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});p.exports=a}),72898:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.type=a,this.gameObject=r,this.active=!0},setActive:function(o){return this.active=o,this},destroy:function(){this.gameObject=null,this.active=!1}});p.exports=g}),44553:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s){n===void 0&&(n="__WHITE"),u===void 0&&(u=.005),s===void 0&&(s=.005),g.call(this,o.DISPLACEMENT,e),this.x=u,this.y=s,this.glTexture,this.setTexture(n)},setTexture:function(r){var e=this.gameObject.scene.sys.textures.getFrame(r);return e&&(this.glTexture=e.glTexture),this}});p.exports=a}),68531:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l){u===void 0&&(u=4),s===void 0&&(s=0),l===void 0&&(l=!1),g.call(this,o.GLOW,e),this.outerStrength=u,this.innerStrength=s,this.knockout=l,this.glcolor=[1,1,1,1],n!==void 0&&(this.color=n)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});p.exports=a}),37102:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l,c,d,f,m){s===void 0&&(s=.2),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=1),m===void 0&&(m=0),g.call(this,o.GRADIENT,e),this.alpha=s,this.size=m,this.fromX=l,this.fromY=c,this.toX=d,this.toY=f,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],n!=null&&(this.color1=n),u!=null&&(this.color2=u)},color1:{get:function(){var r=this.glcolor1;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var e=this.glcolor1;e[0]=r>>16&255,e[1]=r>>8&255,e[2]=r&255}},color2:{get:function(){var r=this.glcolor2;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var e=this.glcolor2;e[0]=r>>16&255,e[1]=r>>8&255,e[2]=r&255}}});p.exports=a}),86886:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n){n===void 0&&(n=1),g.call(this,o.PIXELATE,e),this.amount=n}});p.exports=a}),92322:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l,c,d,f){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=.1),l===void 0&&(l=1),d===void 0&&(d=6),f===void 0&&(f=1),g.call(this,o.SHADOW,e),this.x=n,this.y=u,this.decay=s,this.power=l,this.glcolor=[0,0,0,1],this.samples=d,this.intensity=f,c!==void 0&&(this.color=c)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});p.exports=a}),39563:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l){n===void 0&&(n=.5),u===void 0&&(u=.5),s===void 0&&(s=3),l===void 0&&(l=!1),g.call(this,o.SHINE,e),this.speed=n,this.lineWidth=u,this.gradient=s,this.reveal=l}});p.exports=a}),56448:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l){n===void 0&&(n=.5),u===void 0&&(u=.5),s===void 0&&(s=.5),l===void 0&&(l=.5),g.call(this,o.VIGNETTE,e),this.x=n,this.y=u,this.radius=s,this.strength=l}});p.exports=a}),38433:((p,M,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,n,u,s,l){n===void 0&&(n=.1),u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=!1),g.call(this,o.WIPE,e),this.progress=0,this.wipeWidth=n,this.direction=u,this.axis=s,this.reveal=l}});p.exports=a}),14811:(p=>{var M={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};p.exports=M}),66064:((p,M,t)=>{var h=t(79291),g=t(14811),o={Barrel:t(20122),Controller:t(72898),Bloom:t(32251),Blur:t(9047),Bokeh:t(27885),Circle:t(12578),ColorMatrix:t(15802),Displacement:t(44553),Glow:t(68531),Gradient:t(37102),Pixelate:t(86886),Shadow:t(92322),Shine:t(39563),Vignette:t(56448),Wipe:t(38433)};o=h(!1,o,g),p.exports=o}),25305:((p,M,t)=>{var h=t(10312),g=t(23568),o=function(a,r,e){r.x=g(e,"x",0),r.y=g(e,"y",0),r.depth=g(e,"depth",0),r.flipX=g(e,"flipX",!1),r.flipY=g(e,"flipY",!1);var n=g(e,"scale",null);typeof n=="number"?r.setScale(n):n!==null&&(r.scaleX=g(n,"x",1),r.scaleY=g(n,"y",1));var u=g(e,"scrollFactor",null);typeof u=="number"?r.setScrollFactor(u):u!==null&&(r.scrollFactorX=g(u,"x",1),r.scrollFactorY=g(u,"y",1)),r.rotation=g(e,"rotation",0);var s=g(e,"angle",null);s!==null&&(r.angle=s),r.alpha=g(e,"alpha",1);var l=g(e,"origin",null);if(typeof l=="number")r.setOrigin(l);else if(l!==null){var c=g(l,"x",.5),d=g(l,"y",.5);r.setOrigin(c,d)}r.blendMode=g(e,"blendMode",h.NORMAL),r.visible=g(e,"visible",!0);var f=g(e,"add",!0);return f&&a.sys.displayList.add(r),r.preUpdate&&a.sys.updateList.add(r),r};p.exports=o}),13059:((p,M,t)=>{var h=t(23568),g=function(o,a){var r=h(a,"anims",null);if(r===null)return o;if(typeof r=="string")o.anims.play(r);else if(typeof r=="object"){var e=o.anims,n=h(r,"key",void 0);if(n){var u=h(r,"startFrame",void 0),s=h(r,"delay",0),l=h(r,"repeat",0),c=h(r,"repeatDelay",0),d=h(r,"yoyo",!1),f=h(r,"play",!1),m=h(r,"delayedPlay",0),y={key:n,delay:s,repeat:l,repeatDelay:c,yoyo:d,startFrame:u};f?e.play(y):m>0?e.playAfterDelay(y,m):e.load(y)}}return o};p.exports=g}),8050:((p,M,t)=>{var h=t(83419),g=t(73162),o=t(37277),a=t(51708),r=t(44594),e=t(19186),n=new h({Extends:g,initialize:function(s){g.call(this,s),this.sortChildrenFlag=!1,this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.parentContainer&&u.parentContainer.remove(u),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(a.ADDED_TO_SCENE,u,this.scene),this.events.emit(r.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(a.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(r.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(e(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,s){return u._depth-s._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list,s=u.length;s--;)u[s]&&u[s].destroy(!0);u.length=0,this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});o.register("DisplayList",n,"displayList"),p.exports=n}),95643:((p,M,t)=>{var h=t(83419),g=t(53774),o=t(45893),a=t(50792),r=t(51708),e=t(44594),n=new h({Extends:a,initialize:function(s,l){a.call(this),this.scene=s,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this),s.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(u,s){return this.data||(this.data=new o(this)),this.data.set(u,s),this},incData:function(u,s){return this.data||(this.data=new o(this)),this.data.inc(u,s),this},toggleData:function(u){return this.data||(this.data=new o(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new o(this)),this.data.get(u)},setInteractive:function(u,s,l){return this.scene.sys.input.enable(this,u,s,l),this},disableInteractive:function(u){return u===void 0&&(u=!1),this.scene.sys.input.disable(this,u),this},removeInteractive:function(u){return u===void 0&&(u=!1),this.scene.sys.input.clear(this),u&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(u){var s=this.displayList&&this.displayList.active?this.displayList.willRender(u):!0;return!(!s||n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,s=this.parentContainer,l=[];s&&(l.unshift(s.getIndex(u)),u=s,s.parentContainer);)s=s.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(u)):l.unshift(this.scene.sys.displayList.getIndex(u)),l},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(r.ADDED_TO_SCENE,this,this.scene),u.events.emit(e.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u&&u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(r.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(e.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var u=null;return this.parentContainer?u=this.parentContainer.list:this.displayList&&(u=this.displayList.list),u},destroy:function(u){!this.scene||this.ignoreDestroy||(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(r.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,p.exports=n}),44603:((p,M,t)=>{var h=t(83419),g=t(37277),o=t(44594),a=new h({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(r,e){a.prototype.hasOwnProperty(r)||(a.prototype[r]=e)},a.remove=function(r){a.prototype.hasOwnProperty(r)&&delete a.prototype[r]},g.register("GameObjectCreator",a,"make"),p.exports=a}),39429:((p,M,t)=>{var h=t(83419),g=t(37277),o=t(44594),a=new h({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(r){return(r.renderCanvas||r.renderWebGL)&&this.displayList.add(r),r.preUpdate&&this.updateList.add(r),r},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(r,e){a.prototype.hasOwnProperty(r)||(a.prototype[r]=e)},a.remove=function(r){a.prototype.hasOwnProperty(r)&&delete a.prototype[r]},g.register("GameObjectFactory",a,"add"),p.exports=a}),91296:((p,M,t)=>{var h=t(61340),g=new h,o=new h,a=new h,r={camera:g,sprite:o,calc:a},e=function(n,u,s){var l=g,c=o,d=a;return c.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),l.copyFrom(u.matrix),s?(l.multiplyWithOffset(s,-u.scrollX*n.scrollFactorX,-u.scrollY*n.scrollFactorY),c.e=n.x,c.f=n.y):(c.e-=u.scrollX*n.scrollFactorX,c.f-=u.scrollY*n.scrollFactorY),l.multiply(c,d),r};p.exports=e}),45027:((p,M,t)=>{var h=t(83419),g=t(25774),o=t(37277),a=t(44594),r=new h({Extends:g,initialize:function(n){g.call(this),this.checkQueue=!0,this.scene=n,this.systems=n.sys,n.sys.events.once(a.BOOT,this.boot,this),n.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(a.PRE_UPDATE,this.update,this),e.on(a.UPDATE,this.sceneUpdate,this),e.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,n){for(var u=this._active,s=u.length,l=0;l<s;l++){var c=u[l];c.active&&c.preUpdate.call(c,e,n)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(a.PRE_UPDATE,this.update,this),n.off(a.UPDATE,this.sceneUpdate,this),n.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("UpdateList",r,"updateList"),p.exports=r}),3217:(p=>{var M=function(t,h,g,o,a,r,e,n,u,s,l,c,d,f,m){var y=g.x-h.displayOriginX+a,S=g.y-h.displayOriginY+r,C=y+g.w,E=S+g.h,P=e.a,A=e.b,R=e.c,G=e.d,b=e.e,L=e.f,w=y*P+S*R+b,B=y*A+S*G+L,N=y*P+E*R+b,Y=y*A+E*G+L,U=C*P+E*R+b,W=C*A+E*G+L,O=C*P+S*R+b,V=C*A+S*G+L;n&&(w=Math.round(w),B=Math.round(B),N=Math.round(N),Y=Math.round(Y),U=Math.round(U),W=Math.round(W),O=Math.round(O),V=Math.round(V)),t.batchQuad(h,w,B,N,Y,U,W,O,V,o.u0,o.v0,o.u1,o.v1,u,s,l,c,d,f,m)};p.exports=M}),53048:(p=>{var M=function(t,h,g,o){if(g===void 0&&(g=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var a=t.text,r=a.length,e=t.maxWidth,n=t.wordWrapCharCode,u=Number.MAX_VALUE,s=Number.MAX_VALUE,l=0,c=0,d=t.fontData.chars,f=t.fontData.lineHeight,m=t.letterSpacing,y=t.lineSpacing,S=0,C=0,E=0,P=null,A=t._align,R=0,G=0,b=t.fontSize/t.fontData.size,L=b*t.scaleX,w=b*t.scaleY,B=null,N=0,Y=[],U=Number.MAX_VALUE,W=0,O=0,V=0,X,z,I,Z=[],J=[],k=null,j=function(le,pe){for(var Ut=0,he=0;he<le.length;he++){var Pt=le.charCodeAt(he),Ot=pe.chars[Pt];Ot&&(Ut+=Ot.xAdvance)}return Ut*L};if(e>0){I=a.split(`
`);var tt=[];for(X=0;X<I.length;X++){var ht=I[X],ot="",st="",ft="",ut="";for(z=0;z<ht.length;z++)if(E=ht.charCodeAt(z),ot+=ht[z],E===n||z===ht.length-1){ut=ft+ot;var lt=j(ut,t.fontData);lt<=e?ft=ut:(st=st.slice(0,-1),st+=(st?`
`:"")+ft,ft=ot),ot=""}st=st.slice(0,-1),st+=(st?`
`:"")+ft,tt.push(st)}a=tt.join(`
`),o.wrappedText=a,r=a.length}var Tt=0;for(X=0;X<r;X++){if(E=a.charCodeAt(X),E===10){k!==null&&(Z.push({word:k.word,i:k.i,x:k.x*L,y:k.y*w,w:k.w*L,h:k.h*w}),k=null),B=null,Y[O]=V,V>W&&(W=V),V<U&&(U=V),O++,V=0,S=0,C=(f+y)*O;continue}if(P=d[E],!!P){if(R=S,G=C,B!==null){var bt=P.kerning[N];R+=bt!==void 0?bt:0}u>R&&(u=R),s>G&&(s=G);var Dt=R+P.xAdvance,ct=G+f;l<Dt&&(l=Dt),c<ct&&(c=ct);var yt=P.xOffset+P.xAdvance+(bt!==void 0?bt:0);E===n?k!==null&&(Z.push({word:k.word,i:k.i,x:k.x*L,y:k.y*w,w:k.w*L,h:k.h*w}),k=null):(k===null&&(k={word:"",i:Tt,x:S,y:C,w:0,h:f}),k.word=k.word.concat(a[X]),k.w+=yt),J.push({i:Tt,idx:X,char:a[X],code:E,x:(P.xOffset+R)*b,y:(P.yOffset+C)*b,w:P.width*b,h:P.height*b,t:C*b,r:Dt*b,b:f*b,line:O,glyph:P}),S+=P.xAdvance+m+(bt!==void 0?bt:0),B=P,N=E,V=Dt*b,Tt++}}if(k!==null&&Z.push({word:k.word,i:k.i,x:k.x*L,y:k.y*w,w:k.w*L,h:k.h*w}),Y[O]=V,V>W&&(W=V),V<U&&(U=V),A>0)for(var Et=0;Et<J.length;Et++){var At=J[Et];if(A===1){var It=(W-Y[At.line])/2;At.x+=It,At.r+=It}else if(A===2){var Ft=W-Y[At.line];At.x+=Ft,At.r+=Ft}}var wt=o.local,Bt=o.global;return I=o.lines,wt.x=u*b,wt.y=s*b,wt.width=l*b,wt.height=c*b,Bt.x=t.x-t._displayOriginX+u*L,Bt.y=t.y-t._displayOriginY+s*w,Bt.width=l*L,Bt.height=c*w,I.shortest=U,I.longest=W,I.lengths=Y,h&&(wt.x=Math.ceil(wt.x),wt.y=Math.ceil(wt.y),wt.width=Math.ceil(wt.width),wt.height=Math.ceil(wt.height),Bt.x=Math.ceil(Bt.x),Bt.y=Math.ceil(Bt.y),Bt.width=Math.ceil(Bt.width),Bt.height=Math.ceil(Bt.height),I.shortest=Math.ceil(U),I.longest=Math.ceil(W)),g&&(t._displayOriginX=t.originX*wt.width,t._displayOriginY=t.originY*wt.height,Bt.x=t.x-t._displayOriginX*t.scaleX,Bt.y=t.y-t._displayOriginY*t.scaleY,h&&(Bt.x=Math.ceil(Bt.x),Bt.y=Math.ceil(Bt.y))),o.words=Z,o.characters=J,o.lines.height=f,o.scale=b,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o};p.exports=M}),61327:((p,M,t)=>{var h=t(21859),g=function(o,a,r,e,n,u,s){var l=o.sys.textures.get(r),c=l.get(e),d=o.sys.cache.xml.get(n);if(c&&d){var f=h(d,c,u,s,l);return o.sys.cache.bitmapFont.add(a,{data:f,texture:r,frame:e,fromAtlas:!0}),!0}else return!1};p.exports=g}),6925:((p,M,t)=>{var h=t(35154),g=function(o,a){var r=a.width,e=a.height,n=Math.floor(r/2),u=Math.floor(e/2),s=h(a,"chars","");if(s!==""){var l=h(a,"image",""),c=o.sys.textures.getFrame(l),d=c.cutX,f=c.cutY,m=c.source.width,y=c.source.height,S=h(a,"offset.x",0),C=h(a,"offset.y",0),E=h(a,"spacing.x",0),P=h(a,"spacing.y",0),A=h(a,"lineSpacing",0),R=h(a,"charsPerRow",null);R===null&&(R=m/r,R>s.length&&(R=s.length));for(var G=S,b=C,L={retroFont:!0,font:l,size:r,lineHeight:e+A,chars:{}},w=0,B=0;B<s.length;B++){var N=s.charCodeAt(B),Y=(d+G)/m,U=(f+b)/y,W=(d+G+r)/m,O=(f+b+e)/y;L.chars[N]={x:G,y:b,width:r,height:e,centerX:n,centerY:u,xOffset:0,yOffset:0,xAdvance:r,data:{},kerning:{},u0:Y,v0:U,u1:W,v1:O},w++,w===R?(w=0,G=S,b+=e+P):G+=r+E}var V={data:L,frame:null,texture:l};return V}};p.exports=g}),21859:(p=>{function M(h,g){return parseInt(h.getAttribute(g),10)}var t=function(h,g,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0);var e=g.cutX,n=g.cutY,u=g.source.width,s=g.source.height,l=g.sourceIndex,c={},d=h.getElementsByTagName("info")[0],f=h.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=M(d,"size"),c.lineHeight=M(f,"lineHeight")+a,c.chars={};var m=h.getElementsByTagName("char"),y=g!==void 0&&g.trimmed;if(y)var S=g.height,C=g.width;for(var E=0;E<m.length;E++){var P=m[E],A=M(P,"id"),R=String.fromCharCode(A),G=M(P,"x"),b=M(P,"y"),L=M(P,"width"),w=M(P,"height");y&&(G<C&&(C=G),b<S&&(S=b)),y&&S!==0&&C!==0&&(G-=g.x,b-=g.y);var B=(e+G)/u,N=(n+b)/s,Y=(e+G+L)/u,U=(n+b+w)/s;if(c.chars[A]={x:G,y:b,width:L,height:w,centerX:Math.floor(L/2),centerY:Math.floor(w/2),xOffset:M(P,"xoffset"),yOffset:M(P,"yoffset"),xAdvance:M(P,"xadvance")+o,data:{},kerning:{},u0:B,v0:N,u1:Y,v1:U},r&&L!==0&&w!==0){var W=r.add(R,l,G,b,L,w);W&&W.setUVs(L,w,B,N,Y,U)}}var O=h.getElementsByTagName("kerning");for(E=0;E<O.length;E++){var V=O[E],X=M(V,"first"),z=M(V,"second"),I=M(V,"amount");c.chars[z].kerning[X]=I}return c};p.exports=t}),196:((p,M,t)=>{var h=t(87662),g=t(79291),o={Parse:t(6925)};o=g(!1,o,h),p.exports=o}),87662:(p=>{var M={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};p.exports=M}),2638:((p,M,t)=>{var h=t(22186),g=t(83419),o=t(12310),a=new g({Extends:h,Mixins:[o],initialize:function(e,n,u,s,l,c,d){h.call(this,e,n,u,s,l,c,d),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(r,e){return this.cropWidth=r,this.cropHeight=e,this},setDisplayCallback:function(r){return this.displayCallback=r,this},setScrollX:function(r){return this.scrollX=r,this},setScrollY:function(r){return this.scrollY=r,this}});p.exports=a}),86741:((p,M,t)=>{var h=t(20926),g=function(o,a,r,e){var n=a._text,u=n.length,s=o.currentContext;if(!(u===0||!h(o,s,a,r,e))){r.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,c=a.displayCallback,d=a.callbackData,f=a.fontData.chars,m=a.fontData.lineHeight,y=a._letterSpacing,S=0,C=0,E=0,P=null,A=0,R=0,G=0,b=0,L=0,w=0,B=null,N=0,Y=a.frame.source.image,U=l.cutX,W=l.cutY,O=0,V=0,X=a._fontSize/a.fontData.size,z=a._align,I=0,Z=0;a.getTextBounds(!1);var J=a._bounds.lines;z===1?Z=(J.longest-J.lengths[0])/2:z===2&&(Z=J.longest-J.lengths[0]),s.translate(-a.displayOriginX,-a.displayOriginY);var k=r.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(s.beginPath(),s.rect(0,0,a.cropWidth,a.cropHeight),s.clip());for(var j=0;j<u;j++){if(V=X,O=0,E=n.charCodeAt(j),E===10){I++,z===1?Z=(J.longest-J.lengths[I])/2:z===2&&(Z=J.longest-J.lengths[I]),S=0,C+=m,B=null;continue}if(P=f[E],!!P){if(A=U+P.x,R=W+P.y,G=P.width,b=P.height,L=P.xOffset+S-a.scrollX,w=P.yOffset+C-a.scrollY,B!==null){var tt=P.kerning[N];L+=tt!==void 0?tt:0}if(c){d.index=j,d.charCode=E,d.x=L,d.y=w,d.scale=V,d.rotation=O,d.data=P.data;var ht=c(d);L=ht.x,w=ht.y,V=ht.scale,O=ht.rotation}L*=V,w*=V,L+=Z,S+=P.xAdvance+y+(tt!==void 0?tt:0),B=P,N=E,!(G===0||b===0||E===32)&&(k&&(L=Math.round(L),w=Math.round(w)),s.save(),s.translate(L,w),s.rotate(O),s.scale(V,V),s.drawImage(Y,A,R,G,b,0,0,G,b),s.restore())}}s.restore()}};p.exports=g}),11164:((p,M,t)=>{var h=t(2638),g=t(25305),o=t(44603),a=t(23568);o.register("dynamicBitmapText",function(r,e){r===void 0&&(r={});var n=a(r,"font",""),u=a(r,"text",""),s=a(r,"size",!1),l=new h(this.scene,0,0,n,u,s);return e!==void 0&&(r.add=e),g(this.scene,l,r),l})}),72566:((p,M,t)=>{var h=t(2638),g=t(39429);g.register("dynamicBitmapText",function(o,a,r,e,n){return this.displayList.add(new h(this.scene,o,a,r,e,n))})}),12310:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(73482),o=t(86741),p.exports={renderWebGL:g,renderCanvas:o}}),73482:((p,M,t)=>{var h=t(91296),g=t(61340),o=t(70554),a=new g,r=function(e,n,u,s){var l=n.text,c=l.length;if(c!==0){u.addToRenderList(n);var d=e.pipelines.set(n.pipeline,n),f=h(n,u,s);e.pipelines.preBatch(n);var m=f.sprite,y=f.calc,S=a,C=n.cropWidth>0||n.cropHeight>0;C&&(d.flush(),e.pushScissor(y.tx,y.ty,n.cropWidth*y.scaleX,n.cropHeight*y.scaleY));var E=n.frame,P=E.glTexture,A=n.tintFill,R=o.getTintAppendFloatAlpha(n.tintTopLeft,u.alpha*n._alphaTL),G=o.getTintAppendFloatAlpha(n.tintTopRight,u.alpha*n._alphaTR),b=o.getTintAppendFloatAlpha(n.tintBottomLeft,u.alpha*n._alphaBL),L=o.getTintAppendFloatAlpha(n.tintBottomRight,u.alpha*n._alphaBR),w=d.setGameObject(n),B=0,N=0,Y=0,U=0,W=n.letterSpacing,O,V=0,X=0,z,I=n.scrollX,Z=n.scrollY,J=n.fontData,k=J.chars,j=J.lineHeight,tt=n.fontSize/J.size,ht=0,ot=n._align,st=0,ft=0,ut=n.getTextBounds(!1);n.maxWidth>0&&(l=ut.wrappedText,c=l.length);var lt=n._bounds.lines;ot===1?ft=(lt.longest-lt.lengths[0])/2:ot===2&&(ft=lt.longest-lt.lengths[0]);for(var Tt=u.roundPixels,bt=n.displayCallback,Dt=n.callbackData,ct=0;ct<c;ct++){if(Y=l.charCodeAt(ct),Y===10){st++,ot===1?ft=(lt.longest-lt.lengths[st])/2:ot===2&&(ft=lt.longest-lt.lengths[st]),B=0,N+=j,z=null;continue}if(O=k[Y],!!O){V=O.width,X=O.height;var yt=O.xOffset+B-I,Et=O.yOffset+N-Z;if(z!==null){var At=O.kerning[U]||0;yt+=At,B+=At}if(B+=O.xAdvance+W,z=O,U=Y,!(V===0||X===0||Y===32)){if(tt=n.fontSize/n.fontData.size,ht=0,bt){Dt.color=0,Dt.tint.topLeft=R,Dt.tint.topRight=G,Dt.tint.bottomLeft=b,Dt.tint.bottomRight=L,Dt.index=ct,Dt.charCode=Y,Dt.x=yt,Dt.y=Et,Dt.scale=tt,Dt.rotation=ht,Dt.data=O.data;var It=bt(Dt);yt=It.x,Et=It.y,tt=It.scale,ht=It.rotation,It.color?(R=It.color,G=It.color,b=It.color,L=It.color):(R=It.tint.topLeft,G=It.tint.topRight,b=It.tint.bottomLeft,L=It.tint.bottomRight),R=o.getTintAppendFloatAlpha(R,u.alpha*n._alphaTL),G=o.getTintAppendFloatAlpha(G,u.alpha*n._alphaTR),b=o.getTintAppendFloatAlpha(b,u.alpha*n._alphaBL),L=o.getTintAppendFloatAlpha(L,u.alpha*n._alphaBR)}yt*=tt,Et*=tt,yt-=n.displayOriginX,Et-=n.displayOriginY,yt+=ft,S.applyITRS(yt,Et,ht,tt,tt),y.multiply(S,m);var Ft=O.u0,wt=O.v0,Bt=O.u1,le=O.v1,pe=V,Ut=X,he=m.e,Pt=m.f,Ot=Ut*m.c+m.e,se=Ut*m.d+m.f,fe=pe*m.a+Ut*m.c+m.e,Kt=pe*m.b+Ut*m.d+m.f,ye=pe*m.a+m.e,Le=pe*m.b+m.f;Tt&&(he=Math.round(he),Pt=Math.round(Pt),Ot=Math.round(Ot),se=Math.round(se),fe=Math.round(fe),Kt=Math.round(Kt),ye=Math.round(ye),Le=Math.round(Le)),d.shouldFlush(6)&&(d.flush(),w=d.setGameObject(n)),d.batchQuad(n,he,Pt,Ot,se,fe,Kt,ye,Le,Ft,wt,Bt,le,R,G,b,L,A,P,w)}}}C&&(d.flush(),e.popScissor()),e.pipelines.postBatch(n)}};p.exports=r}),22186:((p,M,t)=>{var h=t(83419),g=t(45319),o=t(31401),a=t(95643),r=t(53048),e=t(61327),n=t(21859),u=t(87841),s=t(18658),l=new h({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Texture,o.Tint,o.Transform,o.Visible,s],initialize:function(d,f,m,y,S,C,E){S===void 0&&(S=""),E===void 0&&(E=0),a.call(this,d,"BitmapText"),this.font=y;var P=this.scene.sys.cache.bitmapFont.get(y);if(!P)throw new Error("Invalid BitmapText key: "+y);this.fontData=P.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=E,this._bounds=r(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=P.fromAtlas,this.setTexture(P.texture,P.frame),this.setPosition(f,m),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(S)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return c===void 0&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setLineSpacing:function(c){return c===void 0&&(c=0),this.lineSpacing=c,this},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,d,f,m){return c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=.5),this.dropShadowX=c,this.dropShadowY=d,this.dropShadowColor=f,this.dropShadowAlpha=m,this},setCharacterTint:function(c,d,f,m,y,S,C){c===void 0&&(c=0),d===void 0&&(d=1),f===void 0&&(f=!1),m===void 0&&(m=-1),y===void 0&&(y=m,S=m,C=m);var E=this.text.length;d===-1&&(d=E),c<0&&(c=E+c),c=g(c,0,E-1);for(var P=g(c+d,c,E),A=this.charColors,R=c;R<P;R++){var G=A[R];if(m===-1)A[R]=null;else{var b=f?1:0;G?(G.tintEffect=b,G.tintTL=m,G.tintTR=y,G.tintBL=S,G.tintBR=C):A[R]={tintEffect:b,tintTL:m,tintTR:y,tintBL:S,tintBR:C}}}return this},setWordTint:function(c,d,f,m,y,S,C){d===void 0&&(d=1);for(var E=this.getTextBounds(),P=E.words,A=typeof c=="number",R=0,G=0;G<P.length;G++){var b=P[G];if((A&&G===c||!A&&b.word===c)&&(this.setCharacterTint(b.i,b.word.length,f,m,y,S,C),R++,R===d))return this}return this},getTextBounds:function(c){var d=this._bounds;return(this._dirty||c||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(r(this,c,!0,d),this._dirty=!1),d},getCharacterAt:function(c,d,f){for(var m=this.getLocalPoint(c,d,null,f),y=this.getTextBounds(),S=y.characters,C=new u,E=0;E<S.length;E++){var P=S[E];if(C.setTo(P.x,P.t,P.r-P.x,P.b),C.contains(m.x,m.y))return P}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,d,f){d===void 0&&(d=this._fontSize),f===void 0&&(f=this._align);var m=this.scene.sys.cache.bitmapFont.get(c);return m&&(this.font=c,this.fontData=m.data,this._fontSize=d,this._align=f,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),r(this,!1,!0,this._bounds)),this},setMaxWidth:function(c,d){return this._maxWidth=c,this._dirty=!0,d!==void 0&&(this.wordWrapCharCode=d),this},setDisplaySize:function(c,d){this.setScale(1,1),this.getTextBounds(!1);var f=c/this.width,m=d/this.height;return this.setScale(f,m),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(c){this._lineSpacing=c,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(c){this.setScaleX(1),this.getTextBounds(!1);var d=c/this.width;this.setScaleX(d)},get:function(){return this.width}},displayHeight:{set:function(c){this.setScaleY(1),this.getTextBounds(!1);var d=c/this.height;this.setScaleY(d)},get:function(){return this.height}},toJSON:function(){var c=o.ToJSON(this),d={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return c.data=d,c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=e,l.ParseXMLBitmapFont=n,p.exports=l}),37289:((p,M,t)=>{var h=t(20926),g=function(o,a,r,e){var n=a._text,u=n.length,s=o.currentContext;if(!(u===0||!h(o,s,a,r,e))){r.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,c=a.fontData.chars,d=a.fontData.lineHeight,f=a._letterSpacing,m=a._lineSpacing,y=0,S=0,C=0,E=null,P=0,A=0,R=0,G=0,b=0,L=0,w=null,B=0,N=l.source.image,Y=l.cutX,U=l.cutY,W=a._fontSize/a.fontData.size,O=a._align,V=0,X=0,z=a.getTextBounds(!1);a.maxWidth>0&&(n=z.wrappedText,u=n.length);var I=a._bounds.lines;O===1?X=(I.longest-I.lengths[0])/2:O===2&&(X=I.longest-I.lengths[0]),s.translate(-a.displayOriginX,-a.displayOriginY);for(var Z=r.roundPixels,J=0;J<u;J++){if(C=n.charCodeAt(J),C===10){V++,O===1?X=(I.longest-I.lengths[V])/2:O===2&&(X=I.longest-I.lengths[V]),y=0,S+=d+m,w=null;continue}if(E=c[C],!!E){if(P=Y+E.x,A=U+E.y,R=E.width,G=E.height,b=E.xOffset+y,L=E.yOffset+S,w!==null){var k=E.kerning[B];b+=k!==void 0?k:0}b*=W,L*=W,b+=X,y+=E.xAdvance+f+(k!==void 0?k:0),w=E,B=C,!(R===0||G===0||C===32)&&(Z&&(b=Math.round(b),L=Math.round(L)),s.save(),s.translate(b,L),s.scale(W,W),s.drawImage(N,P,A,R,G,0,0,R,G),s.restore())}}s.restore()}};p.exports=g}),57336:((p,M,t)=>{var h=t(22186),g=t(25305),o=t(44603),a=t(23568),r=t(35154);o.register("bitmapText",function(e,n){e===void 0&&(e={});var u=r(e,"font",""),s=a(e,"text",""),l=a(e,"size",!1),c=r(e,"align",0),d=new h(this.scene,0,0,u,s,l,c);return n!==void 0&&(e.add=n),g(this.scene,d,e),d})}),34914:((p,M,t)=>{var h=t(22186),g=t(39429);g.register("bitmapText",function(o,a,r,e,n,u){return this.displayList.add(new h(this.scene,o,a,r,e,n,u))})}),18658:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(33590),o=t(37289),p.exports={renderWebGL:g,renderCanvas:o}}),33590:((p,M,t)=>{var h=t(3217),g=t(91296),o=t(70554),a=function(r,e,n,u){var s=e._text,l=s.length;if(l!==0){n.addToRenderList(e);var c=r.pipelines.set(e.pipeline,e),d=g(e,n,u).calc;r.pipelines.preBatch(e);var f=n.roundPixels,m=n.alpha,y=e.charColors,S=e.tintFill,C=o.getTintAppendFloatAlpha,E=C(e.tintTopLeft,m*e._alphaTL),P=C(e.tintTopRight,m*e._alphaTR),A=C(e.tintBottomLeft,m*e._alphaBL),R=C(e.tintBottomRight,m*e._alphaBR),G=e.frame.glTexture,b=c.setGameObject(e),L=e.getTextBounds(!1),w,B,N,Y=L.characters,U=e.dropShadowX,W=e.dropShadowY,O=U!==0||W!==0;if(O){var V=e.dropShadowColor,X=e.dropShadowAlpha,z=C(V,m*X*e._alphaTL),I=C(V,m*X*e._alphaTR),Z=C(V,m*X*e._alphaBL),J=C(V,m*X*e._alphaBR);for(w=0;w<Y.length;w++)B=Y[w],N=B.glyph,!(B.code===32||N.width===0||N.height===0)&&h(c,e,B,N,U,W,d,f,z,I,Z,J,1,G,b)}for(w=0;w<Y.length;w++)if(B=Y[w],N=B.glyph,!(B.code===32||N.width===0||N.height===0))if(c.shouldFlush(6)&&(c.flush(),b=c.setGameObject(e)),y[B.i]){var k=y[B.i],j=k.tintEffect,tt=C(k.tintTL,m*e._alphaTL),ht=C(k.tintTR,m*e._alphaTR),ot=C(k.tintBL,m*e._alphaBL),st=C(k.tintBR,m*e._alphaBR);h(c,e,B,N,0,0,d,f,tt,ht,ot,st,j,G,b)}else h(c,e,B,N,0,0,d,f,E,P,A,R,S,G,b);r.pipelines.postBatch(e)}};p.exports=a}),6107:((p,M,t)=>{var h=t(48011),g=t(46590),o=t(83419),a=t(31401),r=t(4327),e=t(95643),n=t(73162),u=new o({Extends:e,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,h],initialize:function(l,c,d,f,m){e.call(this,l,"Blitter"),this.setTexture(f,m),this.setPosition(c,d),this.initPipeline(),this.initPostPipeline(),this.children=new n,this.renderList=[],this.dirty=!1},create:function(s,l,c,d,f){d===void 0&&(d=!0),f===void 0&&(f=this.children.length),c===void 0?c=this.frame:c instanceof r||(c=this.texture.get(c));var m=new g(this,s,l,c,d);return this.children.addAt(m,f,!1),this.dirty=!0,m},createFromCallback:function(s,l,c,d){for(var f=this.createMultiple(l,c,d),m=0;m<f.length;m++){var y=f[m];s.call(this,y,m)}return f},createMultiple:function(s,l,c){l===void 0&&(l=this.frame.name),c===void 0&&(c=!0),Array.isArray(l)||(l=[l]);var d=[],f=this;return l.forEach(function(m){for(var y=0;y<s;y++)d.push(f.create(0,0,m,c))}),d},childCanRender:function(s){return s.visible&&s.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});p.exports=u}),72396:(p=>{var M=function(t,h,g,o){var a=h.getRenderList();if(a.length!==0){var r=t.currentContext,e=g.alpha*h.alpha;if(e!==0){g.addToRenderList(h),r.globalCompositeOperation=t.blendModes[h.blendMode],r.imageSmoothingEnabled=!h.frame.source.scaleMode;var n=h.x-g.scrollX*h.scrollFactorX,u=h.y-g.scrollY*h.scrollFactorY;r.save(),o&&o.copyToContext(r);for(var s=g.roundPixels,l=0;l<a.length;l++){var c=a[l],d=c.flipX||c.flipY,f=c.frame,m=f.canvasData,y=f.x,S=f.y,C=1,E=1,P=c.alpha*e;P!==0&&(r.globalAlpha=P,d?(c.flipX&&(C=-1,y-=m.width),c.flipY&&(E=-1,S-=m.height),m.width>0&&m.height>0&&(r.save(),r.translate(c.x+n,c.y+u),r.scale(C,E),r.drawImage(f.source.image,m.x,m.y,m.width,m.height,y,S,m.width,m.height),r.restore())):(s&&(y=Math.round(y),S=Math.round(S)),m.width>0&&m.height>0&&r.drawImage(f.source.image,m.x,m.y,m.width,m.height,y+c.x+n,S+c.y+u,m.width,m.height)))}r.restore()}}};p.exports=M}),9403:((p,M,t)=>{var h=t(6107),g=t(25305),o=t(44603),a=t(23568);o.register("blitter",function(r,e){r===void 0&&(r={});var n=a(r,"key",null),u=a(r,"frame",null),s=new h(this.scene,0,0,n,u);return e!==void 0&&(r.add=e),g(this.scene,s,r),s})}),12709:((p,M,t)=>{var h=t(6107),g=t(39429);g.register("blitter",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),48011:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(99485),o=t(72396),p.exports={renderWebGL:g,renderCanvas:o}}),99485:((p,M,t)=>{var h=t(61340),g=t(70554),o=new h,a=function(r,e,n,u){var s=e.getRenderList(),l=n.alpha*e.alpha;if(!(s.length===0||l===0)){n.addToRenderList(e);var c=r.pipelines.set(this.pipeline,e),d=n.scrollX*e.scrollFactorX,f=n.scrollY*e.scrollFactorY,m=o.copyFrom(n.matrix);u&&(m.multiplyWithOffset(u,-d,-f),d=0,f=0);var y=e.x-d,S=e.y-f,C=-1,E=!1,P=n.roundPixels;r.pipelines.preBatch(e);for(var A=0;A<s.length;A++){var R=s[A],G=R.frame,b=R.alpha*l;if(b!==0){var L=G.width,w=G.height,B=y+R.x+G.x,N=S+R.y+G.y;R.flipX&&(L*=-1,B+=G.width),R.flipY&&(w*=-1,N+=G.height);var Y=m.setQuad(B,N,B+L,N+w,P),U=g.getTintAppendFloatAlpha(R.tint,b);if(G.sourceIndex!==C){var W=c.setGameObject(e,G);C=G.sourceIndex}c.batchQuad(e,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],G.u0,G.v0,G.u1,G.v1,U,U,U,U,E,G.glTexture,W)&&(C=-1)}}r.pipelines.postBatch(e)}};p.exports=a}),46590:((p,M,t)=>{var h=t(83419),g=t(4327),o=new h({initialize:function(r,e,n,u,s){this.parent=r,this.x=e,this.y=n,this.frame=u,this.data={},this.tint=16777215,this._visible=s,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof g&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,r,e){return this.x=a,this.y=r,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,e&&this.setFrame(e),this},setPosition:function(a,r){return this.x=a,this.y=r,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,r){return this.flipX=a,this.flipY=r,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});p.exports=o}),16005:((p,M,t)=>{var h=t(45319),g=2,o={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,r,e,n){return a===void 0&&(a=1),r===void 0?this.alpha=a:(this._alphaTL=h(a,0,1),this._alphaTR=h(r,0,1),this._alphaBL=h(e,0,1),this._alphaBR=h(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var r=h(a,0,1);this._alpha=r,this._alphaTL=r,this._alphaTR=r,this._alphaBL=r,this._alphaBR=r,r===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var r=h(a,0,1);this._alphaTL=r,r!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var r=h(a,0,1);this._alphaTR=r,r!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var r=h(a,0,1);this._alphaBL=r,r!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var r=h(a,0,1);this._alphaBR=r,r!==0&&(this.renderFlags|=g)}}};p.exports=o}),88509:((p,M,t)=>{var h=t(45319),g=2,o={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var r=h(a,0,1);this._alpha=r,r===0?this.renderFlags&=~g:this.renderFlags|=g}}};p.exports=o}),90065:((p,M,t)=>{var h=t(10312),g={_blendMode:h.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(o){typeof o=="string"&&(o=h[o]),o|=0,o>=-1&&(this._blendMode=o)}},setBlendMode:function(o){return this.blendMode=o,this}};p.exports=g}),94215:(p=>{var M={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}};p.exports=M}),61683:(p=>{var M={texture:null,frame:null,isCropped:!1,setCrop:function(t,h,g,o){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,h,g,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};p.exports=M}),89272:((p,M,t)=>{var h=t(37105),g={_depth:0,depth:{get:function(){return this._depth},set:function(o){this.displayList&&this.displayList.queueDepthSort(),this._depth=o}},setDepth:function(o){return o===void 0&&(o=0),this.depth=o,this},setToTop:function(){var o=this.getDisplayList();return o&&h.BringToTop(o,this),this},setToBack:function(){var o=this.getDisplayList();return o&&h.SendToBack(o,this),this},setAbove:function(o){var a=this.getDisplayList();return a&&o&&h.MoveAbove(a,this,o),this},setBelow:function(o){var a=this.getDisplayList();return a&&o&&h.MoveBelow(a,this,o),this}};p.exports=g}),47059:((p,M,t)=>{var h=t(83419),g=t(66064),o=t(19133),a=new h({initialize:function(e,n){this.gameObject=e,this.isPost=n,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(r){return r===void 0&&(r=0),this.padding=r,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(r){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,r!==void 0&&(this.padding=r),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var r=this.list,e=0;e<r.length;e++)r[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(r){var e;if(this.isPost){var n=this.gameObject.getPostPipeline(String(r.type));for(Array.isArray(n)||(n=[n]),e=0;e<n.length;e++){var u=n[e];if(u.controller===r){this.gameObject.removePostPipeline(u),r.destroy();break}}}else{var s=this.list;for(e=0;e<s.length;e++)s[e]===r&&(o(s,e),r.destroy())}return this.gameObject},disable:function(r){return r===void 0&&(r=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,r&&this.clear(),this.gameObject},add:function(r,e){if(this.isPost){var n=String(r.type);this.gameObject.setPostPipeline(n,e);var u=this.gameObject.getPostPipeline(n);if(u)return Array.isArray(u)&&(u=u.pop()),u&&(u.controller=r),r}else return this.enabled||this.enable(),this.list.push(r),r},addGlow:function(r,e,n,u,s,l){return this.add(new g.Glow(this.gameObject,r,e,n,u),{quality:s,distance:l})},addShadow:function(r,e,n,u,s,l,c){return this.add(new g.Shadow(this.gameObject,r,e,n,u,s,l,c))},addPixelate:function(r){return this.add(new g.Pixelate(this.gameObject,r))},addVignette:function(r,e,n,u){return this.add(new g.Vignette(this.gameObject,r,e,n,u))},addShine:function(r,e,n,u){return this.add(new g.Shine(this.gameObject,r,e,n,u))},addBlur:function(r,e,n,u,s,l){return this.add(new g.Blur(this.gameObject,r,e,n,u,s,l))},addGradient:function(r,e,n,u,s,l,c,d){return this.add(new g.Gradient(this.gameObject,r,e,n,u,s,l,c,d))},addBloom:function(r,e,n,u,s,l){return this.add(new g.Bloom(this.gameObject,r,e,n,u,s,l))},addColorMatrix:function(){return this.add(new g.ColorMatrix(this.gameObject))},addCircle:function(r,e,n,u,s){return this.add(new g.Circle(this.gameObject,r,e,n,u,s))},addBarrel:function(r){return this.add(new g.Barrel(this.gameObject,r))},addDisplacement:function(r,e,n){return this.add(new g.Displacement(this.gameObject,r,e,n))},addWipe:function(r,e,n){return this.add(new g.Wipe(this.gameObject,r,e,n))},addReveal:function(r,e,n){return this.add(new g.Wipe(this.gameObject,r,e,n,!0))},addBokeh:function(r,e,n){return this.add(new g.Bokeh(this.gameObject,r,e,n))},addTiltShift:function(r,e,n,u,s,l){return this.add(new g.Bokeh(this.gameObject,r,e,n,!0,u,s,l))},destroy:function(){this.clear(),this.gameObject=null}});p.exports=a}),54434:(p=>{var M={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,h){return this.flipX=t,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};p.exports=M}),8004:((p,M,t)=>{var h=t(87841),g=t(11520),o=t(26099),a={prepareBoundsOutput:function(r,e){if(e===void 0&&(e=!1),this.rotation!==0&&g(r,this.x,this.y,this.rotation),e&&this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix();n.transformPoint(r.x,r.y,r)}return r},getCenter:function(r,e){return r===void 0&&(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getTopLeft:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getTopCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getTopRight:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getLeftCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getRightCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getBottomLeft:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBottomCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBottomRight:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBounds:function(r){r===void 0&&(r=new h);var e,n,u,s,l,c,d,f;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(r),m.transformPoint(r.x,r.y,r),e=r.x,n=r.y,this.getTopRight(r),m.transformPoint(r.x,r.y,r),u=r.x,s=r.y,this.getBottomLeft(r),m.transformPoint(r.x,r.y,r),l=r.x,c=r.y,this.getBottomRight(r),m.transformPoint(r.x,r.y,r),d=r.x,f=r.y}else this.getTopLeft(r),e=r.x,n=r.y,this.getTopRight(r),u=r.x,s=r.y,this.getBottomLeft(r),l=r.x,c=r.y,this.getBottomRight(r),d=r.x,f=r.y;return r.x=Math.min(e,u,l,d),r.y=Math.min(n,s,c,f),r.width=Math.max(e,u,l,d)-r.x,r.height=Math.max(n,s,c,f)-r.y,r}};p.exports=a}),8573:((p,M,t)=>{var h=t(6858),g=t(80661),o={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a,r,e,n,u){return a===void 0&&(this.texture||this.shader||this.geom)&&(a=this),new h(this.scene,a,r,e,n,u)},createGeometryMask:function(a){return a===void 0&&(this.type==="Graphics"||this.geom)&&(a=this),new g(this.scene,a)}};p.exports=o}),27387:(p=>{var M={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,h){return t===void 0&&(t=.5),h===void 0&&(h=t),this.originX=t,this.originY=h,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,h){return t===void 0&&(t=0),h===void 0&&(h=t),this.displayOriginX=t,this.displayOriginY=h,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};p.exports=M}),37640:((p,M,t)=>{var h=t(39506),g=t(57355),o=t(35154),a=t(86353),r=t(26099),e={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(n,u){u===void 0&&(u=this.pathConfig);var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=n,u&&this.startFollow(u),this},setRotateToPath:function(n,u){return u===void 0&&(u=0),this.rotateToPath=n,this.pathRotationOffset=u,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,u){n===void 0&&(n={}),u===void 0&&(u=0);var s=this.pathTween;s&&s.isPlaying()&&s.stop(),typeof n=="number"&&(n={duration:n}),n.from=o(n,"from",0),n.to=o(n,"to",1);var l=g(n,"positionOnPath",!1);this.rotateToPath=g(n,"rotateToPath",!1),this.pathRotationOffset=o(n,"rotationOffset",0);var c=o(n,"startAt",u);if(c&&(n.onStart=function(f){var m=f.data[0];m.progress=c,m.elapsed=m.duration*c;var y=m.ease(m.progress);m.current=m.start+(m.end-m.start)*y,m.setTargetValue()}),this.pathOffset||(this.pathOffset=new r(this.x,this.y)),this.pathVector||(this.pathVector=new r),this.pathDelta||(this.pathDelta=new r),this.pathDelta.reset(),n.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var d=this.path.getPoint(.1);this.rotation=Math.atan2(d.y-this.y,d.x-this.x)+h(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n&&n.data){var u=n.data[0],s=this.pathDelta,l=this.pathVector;if(s.copy(l).negate(),u.state===a.COMPLETE){this.path.getPoint(u.end,l),s.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(u.state!==a.PLAYING_FORWARD&&u.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),l),s.add(l),l.add(this.pathOffset);var c=this.x,d=this.y;this.setPosition(l.x,l.y);var f=this.x-c,m=this.y-d;if(f===0&&m===0)return;if(u.state!==this._prevDirection){this._prevDirection=u.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,f)+h(this.pathRotationOffset))}}};p.exports=e}),72699:((p,M,t)=>{var h=t(62644),g={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(o){this.pipelineData={};var a=this.scene.sys.renderer;if(!a)return!1;var r=a.pipelines;if(r){o===void 0&&(o=r.default);var e=r.get(o);if(e)return this.defaultPipeline=e,this.pipeline=e,!0}return!1},setPipeline:function(o,a,r){var e=this.scene.sys.renderer;if(!e)return this;var n=e.pipelines;if(n){var u=n.get(o);u&&(this.pipeline=u),a&&(this.pipelineData=r?h(a):a)}return this},setPipelineData:function(o,a){var r=this.pipelineData;return a===void 0?delete r[o]:r[o]=a,this},resetPipeline:function(o){return o===void 0&&(o=!1),this.pipeline=this.defaultPipeline,o&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};p.exports=g}),17581:((p,M,t)=>{var h=t(62644),g=t(47059),o=t(19133),a={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(r){this.postPipelines=[],this.postPipelineData={},this.postFX=new g(this,!0),r&&(this.preFX=new g(this,!1))},setPostPipeline:function(r,e,n){var u=this.scene.sys.renderer;if(!u)return this;var s=u.pipelines;if(s){Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var c=s.getPostPipeline(r[l],this,e);c&&this.postPipelines.push(c)}e&&(this.postPipelineData=n?h(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(r,e){var n=this.postPipelineData;return e===void 0?delete n[r]:n[r]=e,this},getPostPipeline:function(r){for(var e=typeof r=="string",n=this.postPipelines,u=[],s=0;s<n.length;s++){var l=n[s];(e&&l.name===r||!e&&l instanceof r)&&u.push(l)}return u.length===1?u[0]:u},resetPostPipeline:function(r){r===void 0&&(r=!1);for(var e=this.postPipelines,n=0;n<e.length;n++)e[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,r&&(this.postPipelineData={})},removePostPipeline:function(r){for(var e=typeof r=="string",n=this.postPipelines,u=n.length-1;u>=0;u--){var s=n[u];(e&&s.name===r||!e&&s===r)&&(s.destroy(),o(n,u))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};p.exports=a}),80227:(p=>{var M={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,h){return h===void 0&&(h=t),this.scrollFactorX=t,this.scrollFactorY=h,this}};p.exports=M}),16736:(p=>{var M={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}};p.exports=M}),37726:((p,M,t)=>{var h=t(4327),g=8,o={texture:null,frame:null,isCropped:!1,setTexture:function(a,r,e,n){return this.texture=this.scene.sys.textures.get(a),this.setFrame(r,e,n)},setFrame:function(a,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!0),a instanceof h?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};p.exports=o}),79812:((p,M,t)=>{var h=t(4327),g=8,o={texture:null,frame:null,isCropped:!1,setCrop:function(a,r,e,n){if(a===void 0)this.isCropped=!1;else if(this.frame){if(typeof a=="number")this.frame.setCropUVs(this._crop,a,r,e,n,this.flipX,this.flipY);else{var u=a;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(a,r){return this.texture=this.scene.sys.textures.get(a),this.setFrame(r)},setFrame:function(a,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!0),a instanceof h?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};p.exports=o}),27472:(p=>{var M={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,h,g,o){return t===void 0&&(t=16777215),h===void 0&&(h=t,g=t,o=t),this.tintTopLeft=t,this.tintTopRight=h,this.tintBottomLeft=g,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(t,h,g,o){return this.setTint(t,h,g,o),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};p.exports=M}),53774:(p=>{var M=function(t){var h={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(h.textureKey=t.texture.key,h.frameKey=t.frame.name),h};p.exports=M}),16901:((p,M,t)=>{var h=t(36383),g=t(61340),o=t(85955),a=t(86554),r=t(30954),e=t(26099),n=4,u={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(s){this._scaleX=s,this._scaleY=s,s===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleX:{get:function(){return this._scaleX},set:function(s){this._scaleX=s,s===0?this.renderFlags&=~n:this._scaleY!==0&&(this.renderFlags|=n)}},scaleY:{get:function(){return this._scaleY},set:function(s){this._scaleY=s,s===0?this.renderFlags&=~n:this._scaleX!==0&&(this.renderFlags|=n)}},angle:{get:function(){return r(this._rotation*h.RAD_TO_DEG)},set:function(s){this.rotation=r(s)*h.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(s){this._rotation=a(s)}},setPosition:function(s,l,c,d){return s===void 0&&(s=0),l===void 0&&(l=s),c===void 0&&(c=0),d===void 0&&(d=0),this.x=s,this.y=l,this.z=c,this.w=d,this},copyPosition:function(s){return s.x!==void 0&&(this.x=s.x),s.y!==void 0&&(this.y=s.y),s.z!==void 0&&(this.z=s.z),s.w!==void 0&&(this.w=s.w),this},setRandomPosition:function(s,l,c,d){return s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),this.x=s+Math.random()*c,this.y=l+Math.random()*d,this},setRotation:function(s){return s===void 0&&(s=0),this.rotation=s,this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,this},setScale:function(s,l){return s===void 0&&(s=1),l===void 0&&(l=s),this.scaleX=s,this.scaleY=l,this},setX:function(s){return s===void 0&&(s=0),this.x=s,this},setY:function(s){return s===void 0&&(s=0),this.y=s,this},setZ:function(s){return s===void 0&&(s=0),this.z=s,this},setW:function(s){return s===void 0&&(s=0),this.w=s,this},getLocalTransformMatrix:function(s){return s===void 0&&(s=new g),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(s,l){s===void 0&&(s=new g);var c=this.parentContainer;if(!c)return this.getLocalTransformMatrix(s);var d=!1;for(l||(l=new g,d=!0),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);c;)l.applyITRS(c.x,c.y,c._rotation,c._scaleX,c._scaleY),l.multiply(s,s),c=c.parentContainer;return d&&l.destroy(),s},getLocalPoint:function(s,l,c,d){c||(c=new e),d||(d=this.scene.sys.cameras.main);var f=d.scrollX,m=d.scrollY,y=s+f*this.scrollFactorX-f,S=l+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,S,c):o(y,S,this.x,this.y,this.rotation,this.scaleX,this.scaleY,c),this._originComponent&&(c.x+=this._displayOriginX,c.y+=this._displayOriginY),c},getWorldPoint:function(s,l,c){s===void 0&&(s=new e);var d=this.parentContainer;if(!d)return s.x=this.x,s.y=this.y,s;var f=this.getWorldTransformMatrix(l,c);return s.x=f.tx,s.y=f.ty,s},getParentRotation:function(){for(var s=0,l=this.parentContainer;l;)s+=l.rotation,l=l.parentContainer;return s}};p.exports=u}),61340:((p,M,t)=>{var h=t(83419),g=t(36383),o=t(26099),a=new h({initialize:function(e,n,u,s,l,c){e===void 0&&(e=1),n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=1),l===void 0&&(l=0),c===void 0&&(c=0),this.matrix=new Float32Array([e,n,u,s,l,c,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(r){this.matrix[0]=r}},b:{get:function(){return this.matrix[1]},set:function(r){this.matrix[1]=r}},c:{get:function(){return this.matrix[2]},set:function(r){this.matrix[2]=r}},d:{get:function(){return this.matrix[3]},set:function(r){this.matrix[3]=r}},e:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},f:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},tx:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},ty:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var r=this.matrix,e=r[0],n=r[1],u=r[2],s=r[3];return e||n?n>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):u||s?g.TAU-(s>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var r=this.matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,this},translate:function(r,e){var n=this.matrix;return n[4]=n[0]*r+n[2]*e+n[4],n[5]=n[1]*r+n[3]*e+n[5],this},scale:function(r,e){var n=this.matrix;return n[0]*=r,n[1]*=r,n[2]*=e,n[3]*=e,this},rotate:function(r){var e=Math.sin(r),n=Math.cos(r),u=this.matrix,s=u[0],l=u[1],c=u[2],d=u[3];return u[0]=s*n+c*e,u[1]=l*n+d*e,u[2]=s*-e+c*n,u[3]=l*-e+d*n,this},multiply:function(r,e){var n=this.matrix,u=r.matrix,s=n[0],l=n[1],c=n[2],d=n[3],f=n[4],m=n[5],y=u[0],S=u[1],C=u[2],E=u[3],P=u[4],A=u[5],R=e===void 0?n:e.matrix;return R[0]=y*s+S*c,R[1]=y*l+S*d,R[2]=C*s+E*c,R[3]=C*l+E*d,R[4]=P*s+A*c+f,R[5]=P*l+A*d+m,R},multiplyWithOffset:function(r,e,n){var u=this.matrix,s=r.matrix,l=u[0],c=u[1],d=u[2],f=u[3],m=u[4],y=u[5],S=e*l+n*d+m,C=e*c+n*f+y,E=s[0],P=s[1],A=s[2],R=s[3],G=s[4],b=s[5];return u[0]=E*l+P*d,u[1]=E*c+P*f,u[2]=A*l+R*d,u[3]=A*c+R*f,u[4]=G*l+b*d+S,u[5]=G*c+b*f+C,this},transform:function(r,e,n,u,s,l){var c=this.matrix,d=c[0],f=c[1],m=c[2],y=c[3],S=c[4],C=c[5];return c[0]=r*d+e*m,c[1]=r*f+e*y,c[2]=n*d+u*m,c[3]=n*f+u*y,c[4]=s*d+l*m+S,c[5]=s*f+l*y+C,this},transformPoint:function(r,e,n){n===void 0&&(n={x:0,y:0});var u=this.matrix,s=u[0],l=u[1],c=u[2],d=u[3],f=u[4],m=u[5];return n.x=r*s+e*c+f,n.y=r*l+e*d+m,n},invert:function(){var r=this.matrix,e=r[0],n=r[1],u=r[2],s=r[3],l=r[4],c=r[5],d=e*s-n*u;return r[0]=s/d,r[1]=-n/d,r[2]=-u/d,r[3]=e/d,r[4]=(u*c-s*l)/d,r[5]=-(e*c-n*l)/d,this},copyFrom:function(r){var e=this.matrix;return e[0]=r.a,e[1]=r.b,e[2]=r.c,e[3]=r.d,e[4]=r.e,e[5]=r.f,this},copyFromArray:function(r){var e=this.matrix;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],this},copyToContext:function(r){var e=this.matrix;return r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),r},setToContext:function(r){return r.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),r},copyToArray:function(r){var e=this.matrix;return r===void 0?r=[e[0],e[1],e[2],e[3],e[4],e[5]]:(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},setTransform:function(r,e,n,u,s,l){var c=this.matrix;return c[0]=r,c[1]=e,c[2]=n,c[3]=u,c[4]=s,c[5]=l,this},decomposeMatrix:function(){var r=this.decomposedMatrix,e=this.matrix,n=e[0],u=e[1],s=e[2],l=e[3],c=n*l-u*s;if(r.translateX=e[4],r.translateY=e[5],n||u){var d=Math.sqrt(n*n+u*u);r.rotation=u>0?Math.acos(n/d):-Math.acos(n/d),r.scaleX=d,r.scaleY=c/d}else if(s||l){var f=Math.sqrt(s*s+l*l);r.rotation=Math.PI*.5-(l>0?Math.acos(-s/f):-Math.acos(s/f)),r.scaleX=c/f,r.scaleY=f}else r.rotation=0,r.scaleX=0,r.scaleY=0;return r},applyITRS:function(r,e,n,u,s){var l=this.matrix,c=Math.sin(n),d=Math.cos(n);return l[4]=r,l[5]=e,l[0]=d*u,l[1]=c*u,l[2]=-c*s,l[3]=d*s,this},applyInverse:function(r,e,n){n===void 0&&(n=new o);var u=this.matrix,s=u[0],l=u[1],c=u[2],d=u[3],f=u[4],m=u[5],y=1/(s*d+c*-l);return n.x=d*y*r+-c*y*e+(m*c-f*d)*y,n.y=s*y*e+-l*y*r+(-m*s+f*l)*y,n},setQuad:function(r,e,n,u,s,l){s===void 0&&(s=!1),l===void 0&&(l=this.quad);var c=this.matrix,d=c[0],f=c[1],m=c[2],y=c[3],S=c[4],C=c[5],E=r*d+e*m+S,P=r*f+e*y+C,A=r*d+u*m+S,R=r*f+u*y+C,G=n*d+u*m+S,b=n*f+u*y+C,L=n*d+e*m+S,w=n*f+e*y+C;if(s){var B=Math.floor(E+.5),N=Math.floor(P+.5),Y=B-E,U=N-P;l[0]=B,l[1]=N,l[2]=A+Y,l[3]=R+U,l[4]=G+Y,l[5]=b+U,l[6]=L+Y,l[7]=w+U}else l[0]=E,l[1]=P,l[2]=A,l[3]=R,l[4]=G,l[5]=b,l[6]=L,l[7]=w;return l},getX:function(r,e){return r*this.a+e*this.c+this.e},getY:function(r,e){return r*this.b+e*this.d+this.f},getXRound:function(r,e,n){var u=this.getX(r,e);return n&&(u=Math.floor(u+.5)),u},getYRound:function(r,e,n){var u=this.getY(r,e);return n&&(u=Math.floor(u+.5)),u},getCSSMatrix:function(){var r=this.matrix;return"matrix("+r[0]+","+r[1]+","+r[2]+","+r[3]+","+r[4]+","+r[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});p.exports=a}),59715:(p=>{var M=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=M):(this._visible=!1,this.renderFlags&=~M)}},setVisible:function(h){return this.visible=h,this}};p.exports=t}),31401:((p,M,t)=>{p.exports={Alpha:t(16005),AlphaSingle:t(88509),BlendMode:t(90065),ComputedSize:t(94215),Crop:t(61683),Depth:t(89272),Flip:t(54434),FX:t(47059),GetBounds:t(8004),Mask:t(8573),Origin:t(27387),PathFollower:t(37640),Pipeline:t(72699),PostPipeline:t(17581),ScrollFactor:t(80227),Size:t(16736),Texture:t(37726),TextureCrop:t(79812),Tint:t(27472),ToJSON:t(53774),Transform:t(16901),TransformMatrix:t(61340),Visible:t(59715)}}),31559:((p,M,t)=>{var h=t(37105),g=t(10312),o=t(83419),a=t(31401),r=t(51708),e=t(95643),n=t(87841),u=t(29959),s=t(36899),l=t(26099),c=new a.TransformMatrix,d=new o({Extends:e,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.PostPipeline,a.Transform,a.Visible,u],initialize:function(m,y,S,C){e.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(y,S),this.setBlendMode(g.SKIP_CHECK),C&&this.add(C)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(f){return f===void 0&&(f=!0),this.exclusive=f,this},getBounds:function(f){if(f===void 0&&(f=new n),f.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),y=m.transformPoint(this.x,this.y);f.setTo(y.x,y.y,0,0)}if(this.list.length>0){var S=this.list,C=new n,E=!1;f.setEmpty();for(var P=0;P<S.length;P++){var A=S[P];A.getBounds&&(A.getBounds(C),E?s(C,f,f):(f.setTo(C.x,C.y,C.width,C.height),E=!0))}}return f},addHandler:function(f){f.once(r.DESTROY,this.onChildDestroyed,this),this.exclusive&&(f.parentContainer&&f.parentContainer.remove(f),f.parentContainer=this,f.removeFromDisplayList(),f.addedToScene())},removeHandler:function(f){f.off(r.DESTROY,this.remove,this),this.exclusive&&(f.parentContainer=null,f.removedFromScene(),f.addToDisplayList())},pointToContainer:function(f,m){m===void 0&&(m=new l),this.parentContainer?this.parentContainer.pointToContainer(f,m):(m.x=f.x,m.y=f.y);var y=c;return y.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),y.invert(),y.transformPoint(f.x,f.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(c,this.localTransform)},add:function(f){return h.Add(this.list,f,this.maxSize,this.addHandler,this),this},addAt:function(f,m){return h.AddAt(this.list,f,m,this.maxSize,this.addHandler,this),this},getAt:function(f){return this.list[f]},getIndex:function(f){return this.list.indexOf(f)},sort:function(f,m){return f?(m===void 0&&(m=function(y,S){return y[f]-S[f]}),h.StableSort(this.list,m),this):this},getByName:function(f){return h.GetFirst(this.list,"name",f)},getRandom:function(f,m){return h.GetRandom(this.list,f,m)},getFirst:function(f,m,y,S){return h.GetFirst(this.list,f,m,y,S)},getAll:function(f,m,y,S){return h.GetAll(this.list,f,m,y,S)},count:function(f,m,y,S){return h.CountAllMatching(this.list,f,m,y,S)},swap:function(f,m){return h.Swap(this.list,f,m),this},moveTo:function(f,m){return h.MoveTo(this.list,f,m),this},moveAbove:function(f,m){return h.MoveAbove(this.list,f,m),this},moveBelow:function(f,m){return h.MoveBelow(this.list,f,m),this},remove:function(f,m){var y=h.Remove(this.list,f,this.removeHandler,this);if(m&&y){Array.isArray(y)||(y=[y]);for(var S=0;S<y.length;S++)y[S].destroy()}return this},removeAt:function(f,m){var y=h.RemoveAt(this.list,f,this.removeHandler,this);return m&&y&&y.destroy(),this},removeBetween:function(f,m,y){var S=h.RemoveBetween(this.list,f,m,this.removeHandler,this);if(y)for(var C=0;C<S.length;C++)S[C].destroy();return this},removeAll:function(f){var m=this.list;if(f){for(var y=0;y<m.length;y++)m[y]&&m[y].scene&&(m[y].off(r.DESTROY,this.onChildDestroyed,this),m[y].destroy());this.list=[]}else h.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(f){return h.BringToTop(this.list,f),this},sendToBack:function(f){return h.SendToBack(this.list,f),this},moveUp:function(f){return h.MoveUp(this.list,f),this},moveDown:function(f){return h.MoveDown(this.list,f),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(f,m,y){var S=h.Replace(this.list,f,m);return S&&(this.addHandler(m),this.removeHandler(f),y&&f.destroy()),this},exists:function(f){return this.list.indexOf(f)>-1},setAll:function(f,m,y,S){return h.SetAll(this.list,f,m,y,S),this},each:function(f,m){var y=[null],S,C=this.list.slice(),E=C.length;for(S=2;S<arguments.length;S++)y.push(arguments[S]);for(S=0;S<E;S++)y[0]=C[S],f.apply(m,y);return this},iterate:function(f,m){var y=[null],S;for(S=2;S<arguments.length;S++)y.push(arguments[S]);for(S=0;S<this.list.length;S++)y[0]=this.list[S],f.apply(m,y);return this},setScrollFactor:function(f,m,y){return m===void 0&&(m=f),y===void 0&&(y=!1),this.scrollFactorX=f,this.scrollFactorY=m,y&&(h.SetAll(this.list,"scrollFactorX",f),h.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(f){h.Remove(this.list,f),this.exclusive&&(f.parentContainer=null,f.removedFromScene())}});p.exports=d}),53584:(p=>{var M=function(t,h,g,o){g.addToRenderList(h);var a=h.list;if(a.length!==0){var r=h.localTransform;o?(r.loadIdentity(),r.multiply(o),r.translate(h.x,h.y),r.rotate(h.rotation),r.scale(h.scaleX,h.scaleY)):r.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var e=h.blendMode!==-1;e||t.setBlendMode(0);var n=h._alpha,u=h.scrollFactorX,s=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(t,null,g);for(var l=0;l<a.length;l++){var c=a[l];if(c.willRender(g)){var d=c.alpha,f=c.scrollFactorX,m=c.scrollFactorY;!e&&c.blendMode!==t.currentBlendMode&&t.setBlendMode(c.blendMode),c.setScrollFactor(f*u,m*s),c.setAlpha(d*n),c.renderCanvas(t,c,g,r),c.setAlpha(d),c.setScrollFactor(f,m)}}h.mask&&h.mask.postRenderCanvas(t)}};p.exports=M}),77143:((p,M,t)=>{var h=t(25305),g=t(31559),o=t(44603),a=t(23568),r=t(95540);o.register("container",function(e,n){e===void 0&&(e={});var u=a(e,"x",0),s=a(e,"y",0),l=r(e,"children",null),c=new g(this.scene,u,s,l);return n!==void 0&&(e.add=n),h(this.scene,c,e),c})}),24961:((p,M,t)=>{var h=t(31559),g=t(39429);g.register("container",function(o,a,r){return this.displayList.add(new h(this.scene,o,a,r))})}),29959:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(72249),o=t(53584),p.exports={renderWebGL:g,renderCanvas:o}}),72249:(p=>{var M=function(t,h,g,o){g.addToRenderList(h);var a=h.list,r=a.length;if(r!==0){var e=h.localTransform;o?(e.loadIdentity(),e.multiply(o),e.translate(h.x,h.y),e.rotate(h.rotation),e.scale(h.scaleX,h.scaleY)):e.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),t.pipelines.preBatch(h);var n=h.blendMode!==-1;n||t.setBlendMode(0);for(var u=h.alpha,s=h.scrollFactorX,l=h.scrollFactorY,c=0;c<r;c++){var d=a[c];if(d.willRender(g)){var f,m,y,S;if(d.alphaTopLeft!==void 0)f=d.alphaTopLeft,m=d.alphaTopRight,y=d.alphaBottomLeft,S=d.alphaBottomRight;else{var C=d.alpha;f=C,m=C,y=C,S=C}var E=d.scrollFactorX,P=d.scrollFactorY;!n&&d.blendMode!==t.currentBlendMode&&t.setBlendMode(d.blendMode);var A=d.mask;A&&A.preRenderWebGL(t,d,g);var R=d.type;R!==t.currentType&&(t.newType=!0,t.currentType=R),t.nextTypeMatch=c<r-1?a[c+1].type===t.currentType:!1,d.setScrollFactor(E*s,P*l),d.setAlpha(f*u,m*u,y*u,S*u),d.renderWebGL(t,d,g,e,h),d.setAlpha(f,m,y,S),d.setScrollFactor(E,P),A&&A.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(h)}};p.exports=M}),47407:(p=>{p.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(441),a=t(95643),r=t(41212),e=t(35846),n=t(44594),u=t(61369),s=new h({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,o],initialize:function(c,d,f,m,y,S){if(a.call(this,c,"DOMElement"),this.parent=c.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=c.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(d,f),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),y,S):this.createElement(m,y,S):m&&this.setElement(m,y,S),c.sys.events.on(n.SLEEP,this.handleSceneEvent,this),c.sys.events.on(n.WAKE,this.handleSceneEvent,this),c.sys.events.on(n.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(l){var c=this.node,d=c.style;c&&(d.display=l.settings.visible?"block":"none")},setSkew:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this.skewX=l,this.skewY=c,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var c=0;c<l.length;c++)this.node.addEventListener(l[c],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var c=0;c<l.length;c++)this.node.removeEventListener(l[c],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,c,d){return this.setElement(document.createElement(l),c,d)},setElement:function(l,c,d){this.removeElement();var f;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),f=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(f=l),!f)return this;if(this.node=f,c&&r(c))for(var m in c)f.style[m]=c[m];else typeof c=="string"&&(f.style=c);return f.style.zIndex="0",f.style.display="inline",f.style.position="absolute",f.phaser=this,this.parent.appendChild(f),d&&(f.innerText=d),this.updateSize()},createFromCache:function(l,c){var d=this.cache.get(l);return d&&this.createFromHTML(d,c),this},createFromHTML:function(l,c){c===void 0&&(c="div"),this.removeElement();var d=document.createElement(c);return this.node=d,d.style.zIndex="0",d.style.display="inline",d.style.position="absolute",d.phaser=this,this.parent.appendChild(d),d.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(e(this.node),this.node=null),this},updateSize:function(){var l=this.node;return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(l,c){if(this.node){for(var d=this.node.querySelectorAll("*"),f=0;f<d.length;f++)if(d[f][l]===c)return d[f]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preRender:function(){var l=this.parentContainer,c=this.node;c&&l&&!l.willRender()&&(c.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(n.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(n.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(n.PRE_RENDER,this.preRender,this)}});p.exports=s}),49381:((p,M,t)=>{var h=t(47407),g=t(95643),o=t(61340),a=new o,r=new o,e=new o,n=function(u,s,l,c){if(s.node){var d=s.node.style,f=s.scene.sys.settings;if(!d||!f.visible||g.RENDER_MASK!==s.renderFlags||s.cameraFilter!==0&&s.cameraFilter&l.id||s.parentContainer&&!s.parentContainer.willRender()){d.display="none";return}var m=s.parentContainer,y=l.alpha*s.alpha;m&&(y*=m.alpha);var S=a,C=r,E=e,P=0,A=0,R="0%",G="0%";c?(P=s.width*s.scaleX*s.originX,A=s.height*s.scaleY*s.originY,C.applyITRS(s.x-P,s.y-A,s.rotation,s.scaleX,s.scaleY),S.copyFrom(l.matrix),S.multiplyWithOffset(c,-l.scrollX*s.scrollFactorX,-l.scrollY*s.scrollFactorY),C.e=s.x-P,C.f=s.y-A,S.multiply(C,E)):(P=s.width*s.originX,A=s.height*s.originY,C.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),S.copyFrom(l.matrix),R=100*s.originX+"%",G=100*s.originY+"%",C.e-=l.scrollX*s.scrollFactorX,C.f-=l.scrollY*s.scrollFactorY,S.multiply(C,E),E.e-=P,E.f-=A),s.transformOnly||(d.display="block",d.opacity=y,d.zIndex=s._depth,d.pointerEvents=s.pointerEvents,d.mixBlendMode=h[s._blendMode]),d.transform=E.getCSSMatrix()+" skew("+s.skewX+"rad, "+s.skewY+"rad) rotate3d("+s.rotate3d.x+","+s.rotate3d.y+","+s.rotate3d.z+","+s.rotate3d.w+s.rotate3dAngle+")",d.transformOrigin=R+" "+G}};p.exports=n}),2611:((p,M,t)=>{var h=t(3069),g=t(39429);g.register("dom",function(o,a,r,e,n){var u=new h(this.scene,o,a,r,e,n);return this.displayList.add(u),u})}),441:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(49381),o=t(49381),p.exports={renderWebGL:g,renderCanvas:o}}),62980:(p=>{p.exports="addedtoscene"}),41337:(p=>{p.exports="destroy"}),44947:(p=>{p.exports="removedfromscene"}),49358:(p=>{p.exports="complete"}),35163:(p=>{p.exports="created"}),97249:(p=>{p.exports="error"}),19483:(p=>{p.exports="locked"}),56059:(p=>{p.exports="loop"}),26772:(p=>{p.exports="metadata"}),64437:(p=>{p.exports="playing"}),83411:(p=>{p.exports="play"}),75780:(p=>{p.exports="seeked"}),67799:(p=>{p.exports="seeking"}),63500:(p=>{p.exports="stalled"}),55541:(p=>{p.exports="stop"}),53208:(p=>{p.exports="textureready"}),4992:(p=>{p.exports="unlocked"}),12:(p=>{p.exports="unsupported"}),51708:((p,M,t)=>{p.exports={ADDED_TO_SCENE:t(62980),DESTROY:t(41337),REMOVED_FROM_SCENE:t(44947),VIDEO_COMPLETE:t(49358),VIDEO_CREATED:t(35163),VIDEO_ERROR:t(97249),VIDEO_LOCKED:t(19483),VIDEO_LOOP:t(56059),VIDEO_METADATA:t(26772),VIDEO_PLAY:t(83411),VIDEO_PLAYING:t(64437),VIDEO_SEEKED:t(75780),VIDEO_SEEKING:t(67799),VIDEO_STALLED:t(63500),VIDEO_STOP:t(55541),VIDEO_TEXTURE:t(53208),VIDEO_UNLOCKED:t(4992),VIDEO_UNSUPPORTED:t(12)}}),42421:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(64993),r=new h({Extends:o,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,a],initialize:function(n){o.call(this,n,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});p.exports=r}),70217:(()=>{}),56315:((p,M,t)=>{var h=t(42421),g=t(39429);g.register("extern",function(){var o=new h(this.scene);return this.displayList.add(o),o})}),64993:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(80287),o=t(70217),p.exports={renderWebGL:g,renderCanvas:o}}),80287:((p,M,t)=>{var h=t(91296),g=function(o,a,r,e){o.pipelines.clear();var n=h(a,r,e).calc;a.render.call(a,o,r,n),o.pipelines.rebind()};p.exports=g}),85592:(p=>{p.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((p,M,t)=>{var h=t(71911),g=t(83419),o=t(85592),a=t(31401),r=t(8497),e=t(95643),n=t(95540),u=t(35154),s=t(36383),l=t(84503),c=new g({Extends:e,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,l],initialize:function(f,m){var y=u(m,"x",0),S=u(m,"y",0);e.call(this,f,"Graphics"),this.setPosition(y,S),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(m)},setDefaultStyles:function(d){return u(d,"lineStyle",null)&&(this.defaultStrokeWidth=u(d,"lineStyle.width",1),this.defaultStrokeColor=u(d,"lineStyle.color",16777215),this.defaultStrokeAlpha=u(d,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),u(d,"fillStyle",null)&&(this.defaultFillColor=u(d,"fillStyle.color",16777215),this.defaultFillAlpha=u(d,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(d,f,m){return m===void 0&&(m=1),this.commandBuffer.push(o.LINE_STYLE,d,f,m),this._lineWidth=d,this},fillStyle:function(d,f){return f===void 0&&(f=1),this.commandBuffer.push(o.FILL_STYLE,d,f),this},fillGradientStyle:function(d,f,m,y,S,C,E,P){return S===void 0&&(S=1),C===void 0&&(C=S),E===void 0&&(E=S),P===void 0&&(P=S),this.commandBuffer.push(o.GRADIENT_FILL_STYLE,S,C,E,P,d,f,m,y),this},lineGradientStyle:function(d,f,m,y,S,C){return C===void 0&&(C=1),this.commandBuffer.push(o.GRADIENT_LINE_STYLE,d,C,f,m,y,S),this},beginPath:function(){return this.commandBuffer.push(o.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(o.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(o.FILL_PATH),this},fill:function(){return this.commandBuffer.push(o.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(o.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(o.STROKE_PATH),this},fillCircleShape:function(d){return this.fillCircle(d.x,d.y,d.radius)},strokeCircleShape:function(d){return this.strokeCircle(d.x,d.y,d.radius)},fillCircle:function(d,f,m){return this.beginPath(),this.arc(d,f,m,0,s.PI2),this.fillPath(),this},strokeCircle:function(d,f,m){return this.beginPath(),this.arc(d,f,m,0,s.PI2),this.strokePath(),this},fillRectShape:function(d){return this.fillRect(d.x,d.y,d.width,d.height)},strokeRectShape:function(d){return this.strokeRect(d.x,d.y,d.width,d.height)},fillRect:function(d,f,m,y){return this.commandBuffer.push(o.FILL_RECT,d,f,m,y),this},strokeRect:function(d,f,m,y){var S=this._lineWidth/2,C=d-S,E=d+S;return this.beginPath(),this.moveTo(d,f),this.lineTo(d,f+y),this.strokePath(),this.beginPath(),this.moveTo(d+m,f),this.lineTo(d+m,f+y),this.strokePath(),this.beginPath(),this.moveTo(C,f),this.lineTo(E+m,f),this.strokePath(),this.beginPath(),this.moveTo(C,f+y),this.lineTo(E+m,f+y),this.strokePath(),this},fillRoundedRect:function(d,f,m,y,S){S===void 0&&(S=20);var C=S,E=S,P=S,A=S;typeof S!="number"&&(C=n(S,"tl",20),E=n(S,"tr",20),P=n(S,"bl",20),A=n(S,"br",20));var R=C>=0,G=E>=0,b=P>=0,L=A>=0;return C=Math.abs(C),E=Math.abs(E),P=Math.abs(P),A=Math.abs(A),this.beginPath(),this.moveTo(d+C,f),this.lineTo(d+m-E,f),G?this.arc(d+m-E,f+E,E,-s.TAU,0):this.arc(d+m,f,E,Math.PI,s.TAU,!0),this.lineTo(d+m,f+y-A),L?this.arc(d+m-A,f+y-A,A,0,s.TAU):this.arc(d+m,f+y,A,-s.TAU,Math.PI,!0),this.lineTo(d+P,f+y),b?this.arc(d+P,f+y-P,P,s.TAU,Math.PI):this.arc(d,f+y,P,0,-s.TAU,!0),this.lineTo(d,f+C),R?this.arc(d+C,f+C,C,-Math.PI,-s.TAU):this.arc(d,f,C,s.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(d,f,m,y,S){S===void 0&&(S=20);var C=S,E=S,P=S,A=S,R=Math.min(m,y)/2;typeof S!="number"&&(C=n(S,"tl",20),E=n(S,"tr",20),P=n(S,"bl",20),A=n(S,"br",20));var G=C>=0,b=E>=0,L=P>=0,w=A>=0;return C=Math.min(Math.abs(C),R),E=Math.min(Math.abs(E),R),P=Math.min(Math.abs(P),R),A=Math.min(Math.abs(A),R),this.beginPath(),this.moveTo(d+C,f),this.lineTo(d+m-E,f),this.moveTo(d+m-E,f),b?this.arc(d+m-E,f+E,E,-s.TAU,0):this.arc(d+m,f,E,Math.PI,s.TAU,!0),this.lineTo(d+m,f+y-A),this.moveTo(d+m,f+y-A),w?this.arc(d+m-A,f+y-A,A,0,s.TAU):this.arc(d+m,f+y,A,-s.TAU,Math.PI,!0),this.lineTo(d+P,f+y),this.moveTo(d+P,f+y),L?this.arc(d+P,f+y-P,P,s.TAU,Math.PI):this.arc(d,f+y,P,0,-s.TAU,!0),this.lineTo(d,f+C),this.moveTo(d,f+C),G?this.arc(d+C,f+C,C,-Math.PI,-s.TAU):this.arc(d,f,C,s.TAU,0,!0),this.strokePath(),this},fillPointShape:function(d,f){return this.fillPoint(d.x,d.y,f)},fillPoint:function(d,f,m){return!m||m<1?m=1:(d-=m/2,f-=m/2),this.commandBuffer.push(o.FILL_RECT,d,f,m,m),this},fillTriangleShape:function(d){return this.fillTriangle(d.x1,d.y1,d.x2,d.y2,d.x3,d.y3)},strokeTriangleShape:function(d){return this.strokeTriangle(d.x1,d.y1,d.x2,d.y2,d.x3,d.y3)},fillTriangle:function(d,f,m,y,S,C){return this.commandBuffer.push(o.FILL_TRIANGLE,d,f,m,y,S,C),this},strokeTriangle:function(d,f,m,y,S,C){return this.commandBuffer.push(o.STROKE_TRIANGLE,d,f,m,y,S,C),this},strokeLineShape:function(d){return this.lineBetween(d.x1,d.y1,d.x2,d.y2)},lineBetween:function(d,f,m,y){return this.beginPath(),this.moveTo(d,f),this.lineTo(m,y),this.strokePath(),this},lineTo:function(d,f){return this.commandBuffer.push(o.LINE_TO,d,f),this},moveTo:function(d,f){return this.commandBuffer.push(o.MOVE_TO,d,f),this},strokePoints:function(d,f,m,y){f===void 0&&(f=!1),m===void 0&&(m=!1),y===void 0&&(y=d.length),this.beginPath(),this.moveTo(d[0].x,d[0].y);for(var S=1;S<y;S++)this.lineTo(d[S].x,d[S].y);return f&&this.lineTo(d[0].x,d[0].y),m&&this.closePath(),this.strokePath(),this},fillPoints:function(d,f,m,y){f===void 0&&(f=!1),m===void 0&&(m=!1),y===void 0&&(y=d.length),this.beginPath(),this.moveTo(d[0].x,d[0].y);for(var S=1;S<y;S++)this.lineTo(d[S].x,d[S].y);return f&&this.lineTo(d[0].x,d[0].y),m&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(d,f){f===void 0&&(f=32);var m=d.getPoints(f);return this.strokePoints(m,!0)},strokeEllipse:function(d,f,m,y,S){S===void 0&&(S=32);var C=new r(d,f,m,y),E=C.getPoints(S);return this.strokePoints(E,!0)},fillEllipseShape:function(d,f){f===void 0&&(f=32);var m=d.getPoints(f);return this.fillPoints(m,!0)},fillEllipse:function(d,f,m,y,S){S===void 0&&(S=32);var C=new r(d,f,m,y),E=C.getPoints(S);return this.fillPoints(E,!0)},arc:function(d,f,m,y,S,C,E){return C===void 0&&(C=!1),E===void 0&&(E=0),this.commandBuffer.push(o.ARC,d,f,m,y,S,C,E),this},slice:function(d,f,m,y,S,C,E){return C===void 0&&(C=!1),E===void 0&&(E=0),this.commandBuffer.push(o.BEGIN_PATH),this.commandBuffer.push(o.MOVE_TO,d,f),this.commandBuffer.push(o.ARC,d,f,m,y,S,C,E),this.commandBuffer.push(o.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(o.SAVE),this},restore:function(){return this.commandBuffer.push(o.RESTORE),this},translateCanvas:function(d,f){return this.commandBuffer.push(o.TRANSLATE,d,f),this},scaleCanvas:function(d,f){return this.commandBuffer.push(o.SCALE,d,f),this},rotateCanvas:function(d){return this.commandBuffer.push(o.ROTATE,d),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(d,f,m){var y=this.scene.sys,S=y.game.renderer;f===void 0&&(f=y.scale.width),m===void 0&&(m=y.scale.height),c.TargetCamera.setScene(this.scene),c.TargetCamera.setViewport(0,0,f,m),c.TargetCamera.scrollX=this.x,c.TargetCamera.scrollY=this.y;var C,E,P={willReadFrequently:!0};if(typeof d=="string")if(y.textures.exists(d)){C=y.textures.get(d);var A=C.getSourceImage();A instanceof HTMLCanvasElement&&(E=A.getContext("2d",P))}else C=y.textures.createCanvas(d,f,m),E=C.getSourceImage().getContext("2d",P);else d instanceof HTMLCanvasElement&&(E=d.getContext("2d",P));return E&&(this.renderCanvas(S,this,c.TargetCamera,null,E,!1),C&&C.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});c.TargetCamera=new h,p.exports=c}),32768:((p,M,t)=>{var h=t(85592),g=t(20926),o=function(a,r,e,n,u,s){var l=r.commandBuffer,c=l.length,d=u||a.currentContext;if(!(c===0||!g(a,d,r,e,n))){e.addToRenderList(r);var f=1,m=1,y=0,S=0,C=1,E=0,P=0,A=0;d.beginPath();for(var R=0;R<c;++R){var G=l[R];switch(G){case h.ARC:d.arc(l[R+1],l[R+2],l[R+3],l[R+4],l[R+5],l[R+6]),R+=7;break;case h.LINE_STYLE:C=l[R+1],y=l[R+2],f=l[R+3],E=(y&16711680)>>>16,P=(y&65280)>>>8,A=y&255,d.strokeStyle="rgba("+E+","+P+","+A+","+f+")",d.lineWidth=C,R+=3;break;case h.FILL_STYLE:S=l[R+1],m=l[R+2],E=(S&16711680)>>>16,P=(S&65280)>>>8,A=S&255,d.fillStyle="rgba("+E+","+P+","+A+","+m+")",R+=2;break;case h.BEGIN_PATH:d.beginPath();break;case h.CLOSE_PATH:d.closePath();break;case h.FILL_PATH:s||d.fill();break;case h.STROKE_PATH:s||d.stroke();break;case h.FILL_RECT:s?d.rect(l[R+1],l[R+2],l[R+3],l[R+4]):d.fillRect(l[R+1],l[R+2],l[R+3],l[R+4]),R+=4;break;case h.FILL_TRIANGLE:d.beginPath(),d.moveTo(l[R+1],l[R+2]),d.lineTo(l[R+3],l[R+4]),d.lineTo(l[R+5],l[R+6]),d.closePath(),s||d.fill(),R+=6;break;case h.STROKE_TRIANGLE:d.beginPath(),d.moveTo(l[R+1],l[R+2]),d.lineTo(l[R+3],l[R+4]),d.lineTo(l[R+5],l[R+6]),d.closePath(),s||d.stroke(),R+=6;break;case h.LINE_TO:d.lineTo(l[R+1],l[R+2]),R+=2;break;case h.MOVE_TO:d.moveTo(l[R+1],l[R+2]),R+=2;break;case h.LINE_FX_TO:d.lineTo(l[R+1],l[R+2]),R+=5;break;case h.MOVE_FX_TO:d.moveTo(l[R+1],l[R+2]),R+=5;break;case h.SAVE:d.save();break;case h.RESTORE:d.restore();break;case h.TRANSLATE:d.translate(l[R+1],l[R+2]),R+=2;break;case h.SCALE:d.scale(l[R+1],l[R+2]),R+=2;break;case h.ROTATE:d.rotate(l[R+1]),R+=1;break;case h.GRADIENT_FILL_STYLE:R+=5;break;case h.GRADIENT_LINE_STYLE:R+=6;break}}d.restore()}};p.exports=o}),87079:((p,M,t)=>{var h=t(44603),g=t(43831);h.register("graphics",function(o,a){o===void 0&&(o={}),a!==void 0&&(o.add=a);var r=new g(this.scene,o);return o.add&&this.scene.sys.displayList.add(r),r})}),1201:((p,M,t)=>{var h=t(43831),g=t(39429);g.register("graphics",function(o){return this.displayList.add(new h(this.scene,o))})}),84503:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(77545),o=t(32768),o=t(32768),p.exports={renderWebGL:g,renderCanvas:o}}),77545:((p,M,t)=>{var h=t(85592),g=t(91296),o=t(61340),a=t(70554),r=function(l,c,d){this.x=l,this.y=c,this.width=d},e=function(l,c,d){this.points=[],this.pointsLength=1,this.points[0]=new r(l,c,d)},n=[],u=new o,s=function(l,c,d,f){if(c.commandBuffer.length!==0){d.addToRenderList(c);var m=l.pipelines.set(c.pipeline,c);l.pipelines.preBatch(c);for(var y=g(c,d,f).calc,S=u.loadIdentity(),C=c.commandBuffer,E=d.alpha*c.alpha,P=1,A=m.fillTint,R=m.strokeTint,G=0,b=0,L=0,w=.01,B=Math.PI*2,N,Y=[],U=0,W=!0,O=null,V=a.getTintAppendFloatAlpha,X=0;X<C.length;X++)switch(N=C[X],N){case h.BEGIN_PATH:{Y.length=0,O=null,W=!0;break}case h.CLOSE_PATH:{W=!1,O&&O.points.length&&O.points.push(O.points[0]);break}case h.FILL_PATH:{for(U=0;U<Y.length;U++)m.batchFillPath(Y[U].points,S,y);break}case h.STROKE_PATH:{for(U=0;U<Y.length;U++)m.batchStrokePath(Y[U].points,P,W,S,y);break}case h.LINE_STYLE:{P=C[++X];var z=C[++X],I=C[++X]*E,Z=V(z,I);R.TL=Z,R.TR=Z,R.BL=Z,R.BR=Z;break}case h.FILL_STYLE:{var J=C[++X],k=C[++X]*E,j=V(J,k);A.TL=j,A.TR=j,A.BL=j,A.BR=j;break}case h.GRADIENT_FILL_STYLE:{var tt=C[++X]*E,ht=C[++X]*E,ot=C[++X]*E,st=C[++X]*E;A.TL=V(C[++X],tt),A.TR=V(C[++X],ht),A.BL=V(C[++X],ot),A.BR=V(C[++X],st);break}case h.GRADIENT_LINE_STYLE:{P=C[++X];var ft=C[++X]*E;R.TL=V(C[++X],ft),R.TR=V(C[++X],ft),R.BL=V(C[++X],ft),R.BR=V(C[++X],ft);break}case h.ARC:{var ut=0,lt=C[++X],Tt=C[++X],bt=C[++X],Dt=C[++X],ct=C[++X],yt=C[++X],Et=C[++X];for(ct-=Dt,yt?ct<-B?ct=-B:ct>0&&(ct=-B+ct%B):ct>B?ct=B:ct<0&&(ct=B+ct%B),O===null&&(O=new e(lt+Math.cos(Dt)*bt,Tt+Math.sin(Dt)*bt,P),Y.push(O),ut+=w);ut<1+Et;)L=ct*ut+Dt,G=lt+Math.cos(L)*bt,b=Tt+Math.sin(L)*bt,O.points.push(new r(G,b,P)),ut+=w;L=ct+Dt,G=lt+Math.cos(L)*bt,b=Tt+Math.sin(L)*bt,O.points.push(new r(G,b,P));break}case h.FILL_RECT:{m.batchFillRect(C[++X],C[++X],C[++X],C[++X],S,y);break}case h.FILL_TRIANGLE:{m.batchFillTriangle(C[++X],C[++X],C[++X],C[++X],C[++X],C[++X],S,y);break}case h.STROKE_TRIANGLE:{m.batchStrokeTriangle(C[++X],C[++X],C[++X],C[++X],C[++X],C[++X],P,S,y);break}case h.LINE_TO:{O!==null?O.points.push(new r(C[++X],C[++X],P)):(O=new e(C[++X],C[++X],P),Y.push(O));break}case h.MOVE_TO:{O=new e(C[++X],C[++X],P),Y.push(O);break}case h.SAVE:{n.push(S.copyToArray());break}case h.RESTORE:{S.copyFromArray(n.pop());break}case h.TRANSLATE:{lt=C[++X],Tt=C[++X],S.translate(lt,Tt);break}case h.SCALE:{lt=C[++X],Tt=C[++X],S.scale(lt,Tt);break}case h.ROTATE:{S.rotate(C[++X]);break}}l.pipelines.postBatch(c)}};p.exports=s}),26479:((p,M,t)=>{var h=t(61061),g=t(83419),o=t(51708),a=t(50792),r=t(46710),e=t(95540),n=t(35154),u=t(97022),s=t(41212),l=t(88492),c=t(35072),d=t(68287),f=new g({Extends:a,initialize:function(y,S,C){a.call(this),C?S&&!Array.isArray(S)&&(S=[S]):Array.isArray(S)?s(S[0])&&(C=S,S=null):s(S)&&(C=S,S=null),this.scene=y,this.children=new c,this.isParent=!0,this.type="Group",this.classType=e(C,"classType",d),this.name=e(C,"name",""),this.active=e(C,"active",!0),this.maxSize=e(C,"maxSize",-1),this.defaultKey=e(C,"defaultKey",null),this.defaultFrame=e(C,"defaultFrame",null),this.runChildUpdate=e(C,"runChildUpdate",!1),this.createCallback=e(C,"createCallback",null),this.removeCallback=e(C,"removeCallback",null),this.createMultipleCallback=e(C,"createMultipleCallback",null),this.internalCreateCallback=e(C,"internalCreateCallback",null),this.internalRemoveCallback=e(C,"internalRemoveCallback",null),S&&this.addMultiple(S),C&&this.createMultiple(C),this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,y,S,C,E,P){if(m===void 0&&(m=0),y===void 0&&(y=0),S===void 0&&(S=this.defaultKey),C===void 0&&(C=this.defaultFrame),E===void 0&&(E=!0),P===void 0&&(P=!0),this.isFull())return null;var A=new this.classType(this.scene,m,y,S,C);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=E,A.setActive(P),this.add(A),A},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var y=[];if(m[0].key)for(var S=0;S<m.length;S++){var C=this.createFromConfig(m[S]);y=y.concat(C)}return y},createFromConfig:function(m){if(this.isFull())return[];this.classType=e(m,"classType",this.classType);var y=e(m,"key",void 0),S=e(m,"frame",null),C=e(m,"visible",!0),E=e(m,"active",!0),P=[];if(y===void 0)return P;Array.isArray(y)||(y=[y]),Array.isArray(S)||(S=[S]);var A=e(m,"repeat",0),R=e(m,"randomKey",!1),G=e(m,"randomFrame",!1),b=e(m,"yoyo",!1),L=e(m,"quantity",!1),w=e(m,"frameQuantity",1),B=e(m,"max",0),N=l(y,S,{max:B,qty:L||w,random:R,randomB:G,repeat:A,yoyo:b});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback),m.internalCreateCallback&&(this.internalCreateCallback=m.internalCreateCallback),m.internalRemoveCallback&&(this.internalRemoveCallback=m.internalRemoveCallback);for(var Y=0;Y<N.length;Y++){var U=this.create(0,0,N[Y].a,N[Y].b,C,E);if(!U)break;P.push(U)}if(u(m,"setXY")){var W=n(m,"setXY.x",0),O=n(m,"setXY.y",0),V=n(m,"setXY.stepX",0),X=n(m,"setXY.stepY",0);h.SetXY(P,W,O,V,X)}if(u(m,"setRotation")){var z=n(m,"setRotation.value",0),I=n(m,"setRotation.step",0);h.SetRotation(P,z,I)}if(u(m,"setScale")){var Z=n(m,"setScale.x",1),J=n(m,"setScale.y",Z),k=n(m,"setScale.stepX",0),j=n(m,"setScale.stepY",0);h.SetScale(P,Z,J,k,j)}if(u(m,"setOrigin")){var tt=n(m,"setOrigin.x",.5),ht=n(m,"setOrigin.y",tt),ot=n(m,"setOrigin.stepX",0),st=n(m,"setOrigin.stepY",0);h.SetOrigin(P,tt,ht,ot,st)}if(u(m,"setAlpha")){var ft=n(m,"setAlpha.value",1),ut=n(m,"setAlpha.step",0);h.SetAlpha(P,ft,ut)}if(u(m,"setDepth")){var lt=n(m,"setDepth.value",0),Tt=n(m,"setDepth.step",0);h.SetDepth(P,lt,Tt)}if(u(m,"setScrollFactor")){var bt=n(m,"setScrollFactor.x",1),Dt=n(m,"setScrollFactor.y",bt),ct=n(m,"setScrollFactor.stepX",0),yt=n(m,"setScrollFactor.stepY",0);h.SetScrollFactor(P,bt,Dt,ct,yt)}var Et=e(m,"hitArea",null),At=e(m,"hitAreaCallback",null);Et&&h.SetHitArea(P,Et,At);var It=e(m,"gridAlign",!1);return It&&h.GridAlign(P,It),this.createMultipleCallback&&this.createMultipleCallback.call(this,P),P},preUpdate:function(m,y){if(!(!this.runChildUpdate||this.children.size===0))for(var S=this.children.entries.slice(),C=0;C<S.length;C++){var E=S[C];E.active&&E.update(m,y)}},add:function(m,y){return y===void 0&&(y=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),y&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(o.DESTROY,this.remove,this),this)},addMultiple:function(m,y){if(y===void 0&&(y=!1),Array.isArray(m))for(var S=0;S<m.length;S++)this.add(m[S],y);return this},remove:function(m,y,S){return y===void 0&&(y=!1),S===void 0&&(S=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(o.DESTROY,this.remove,this),S?m.destroy():y&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,y){m===void 0&&(m=!1),y===void 0&&(y=!1);for(var S=this.children,C=0;C<S.size;C++){var E=S.entries[C];E.off(o.DESTROY,this.remove,this),y?E.destroy():m&&(E.removeFromDisplayList(),E.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,y,S,C){return r(this.children.entries,m,y,S,C)},getFirst:function(m,y,S,C,E,P,A){return this.getHandler(!0,1,m,y,S,C,E,P,A)},getFirstNth:function(m,y,S,C,E,P,A,R){return this.getHandler(!0,m,y,S,C,E,P,A,R)},getLast:function(m,y,S,C,E,P,A){return this.getHandler(!1,1,m,y,S,C,E,P,A)},getLastNth:function(m,y,S,C,E,P,A,R){return this.getHandler(!1,m,y,S,C,E,P,A,R)},getHandler:function(m,y,S,C,E,P,A,R,G){S===void 0&&(S=!1),C===void 0&&(C=!1);var b,L,w=0,B=this.children.entries;if(m)for(L=0;L<B.length;L++)if(b=B[L],b.active===S){if(w++,w===y)break}else b=null;else for(L=B.length-1;L>=0;L--)if(b=B[L],b.active===S){if(w++,w===y)break}else b=null;return b?(typeof E=="number"&&(b.x=E),typeof P=="number"&&(b.y=P),b):C?this.create(E,P,A,R,G):null},get:function(m,y,S,C,E){return this.getFirst(!1,!0,m,y,S,C,E)},getFirstAlive:function(m,y,S,C,E,P){return this.getFirst(!0,m,y,S,C,E,P)},getFirstDead:function(m,y,S,C,E,P){return this.getFirst(!1,m,y,S,C,E,P)},playAnimation:function(m,y){return h.PlayAnimation(this.children.entries,m,y),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var y=0,S=0;S<this.children.size;S++)this.children.entries[S].active===m&&y++;return y},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),y=this.maxSize===-1?999999999999:this.maxSize;return y-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,y,S,C,E){return h.PropertyValueSet(this.children.entries,m,y,S,C,E),this},propertyValueInc:function(m,y,S,C,E){return h.PropertyValueInc(this.children.entries,m,y,S,C,E),this},setX:function(m,y){return h.SetX(this.children.entries,m,y),this},setY:function(m,y){return h.SetY(this.children.entries,m,y),this},setXY:function(m,y,S,C){return h.SetXY(this.children.entries,m,y,S,C),this},incX:function(m,y){return h.IncX(this.children.entries,m,y),this},incY:function(m,y){return h.IncY(this.children.entries,m,y),this},incXY:function(m,y,S,C){return h.IncXY(this.children.entries,m,y,S,C),this},shiftPosition:function(m,y,S){return h.ShiftPosition(this.children.entries,m,y,S),this},angle:function(m,y){return h.Angle(this.children.entries,m,y),this},rotate:function(m,y){return h.Rotate(this.children.entries,m,y),this},rotateAround:function(m,y){return h.RotateAround(this.children.entries,m,y),this},rotateAroundDistance:function(m,y,S){return h.RotateAroundDistance(this.children.entries,m,y,S),this},setAlpha:function(m,y){return h.SetAlpha(this.children.entries,m,y),this},setTint:function(m,y,S,C){return h.SetTint(this.children.entries,m,y,S,C),this},setOrigin:function(m,y,S,C){return h.SetOrigin(this.children.entries,m,y,S,C),this},scaleX:function(m,y){return h.ScaleX(this.children.entries,m,y),this},scaleY:function(m,y){return h.ScaleY(this.children.entries,m,y),this},scaleXY:function(m,y,S,C){return h.ScaleXY(this.children.entries,m,y,S,C),this},setDepth:function(m,y){return h.SetDepth(this.children.entries,m,y),this},setBlendMode:function(m){return h.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,y){return h.SetHitArea(this.children.entries,m,y),this},shuffle:function(){return h.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,y,S){return h.SetVisible(this.children.entries,m,y,S),this},toggleVisible:function(){return h.ToggleVisible(this.children.entries),this},destroy:function(m,y){m===void 0&&(m=!1),y===void 0&&(y=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(o.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(y,m),this.scene=void 0,this.children=void 0)}});p.exports=f}),94975:((p,M,t)=>{var h=t(44603),g=t(26479);h.register("group",function(o){return new g(this.scene,null,o)})}),3385:((p,M,t)=>{var h=t(26479),g=t(39429);g.register("group",function(o,a){return this.updateList.add(new h(this.scene,o,a))})}),88571:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(59819),r=new h({Extends:o,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,a],initialize:function(n,u,s,l,c){o.call(this,n,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,c),this.setPosition(u,s),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});p.exports=r}),40652:(p=>{var M=function(t,h,g,o){g.addToRenderList(h),t.batchSprite(h,h.frame,g,o)};p.exports=M}),82459:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(88571);g.register("image",function(r,e){r===void 0&&(r={});var n=o(r,"key",null),u=o(r,"frame",null),s=new a(this.scene,0,0,n,u);return e!==void 0&&(r.add=e),h(this.scene,s,r),s})}),2117:((p,M,t)=>{var h=t(88571),g=t(39429);g.register("image",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),59819:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(99517),o=t(40652),p.exports={renderWebGL:g,renderCanvas:o}}),99517:(p=>{var M=function(t,h,g,o){g.addToRenderList(h),this.pipeline.batchSprite(h,g,o)};p.exports=M}),77856:((p,M,t)=>{var h={Events:t(51708),DisplayList:t(8050),GameObjectCreator:t(44603),GameObjectFactory:t(39429),UpdateList:t(45027),Components:t(31401),GetCalcMatrix:t(91296),BuildGameObject:t(25305),BuildGameObjectAnimation:t(13059),GameObject:t(95643),BitmapText:t(22186),Blitter:t(6107),Bob:t(46590),Container:t(31559),DOMElement:t(3069),DynamicBitmapText:t(2638),Extern:t(42421),Graphics:t(43831),Group:t(26479),Image:t(88571),Layer:t(93595),Particles:t(18404),PathFollower:t(1159),RenderTexture:t(591),RetroFont:t(196),Rope:t(77757),Sprite:t(68287),Text:t(50171),GetTextSize:t(14220),MeasureText:t(79557),TextStyle:t(35762),TileSprite:t(20839),Zone:t(41481),Video:t(18471),Shape:t(17803),Arc:t(23629),Curve:t(89),Ellipse:t(19921),Grid:t(30479),IsoBox:t(61475),IsoTriangle:t(16933),Line:t(57847),Polygon:t(24949),Rectangle:t(74561),Star:t(55911),Triangle:t(36931),Factories:{Blitter:t(12709),Container:t(24961),DOMElement:t(2611),DynamicBitmapText:t(72566),Extern:t(56315),Graphics:t(1201),Group:t(3385),Image:t(2117),Layer:t(20005),Particles:t(676),PathFollower:t(90145),RenderTexture:t(60505),Rope:t(96819),Sprite:t(46409),StaticBitmapText:t(34914),Text:t(68005),TileSprite:t(91681),Zone:t(84175),Video:t(89025),Arc:t(42563),Curve:t(40511),Ellipse:t(1543),Grid:t(34137),IsoBox:t(3933),IsoTriangle:t(49803),Line:t(2481),Polygon:t(64827),Rectangle:t(87959),Star:t(93697),Triangle:t(45245)},Creators:{Blitter:t(9403),Container:t(77143),DynamicBitmapText:t(11164),Graphics:t(87079),Group:t(94975),Image:t(82459),Layer:t(25179),Particles:t(92730),RenderTexture:t(34495),Rope:t(26209),Sprite:t(15567),StaticBitmapText:t(57336),Text:t(71259),TileSprite:t(14167),Zone:t(95261),Video:t(11511)}};h.Shader=t(20071),h.Mesh=t(4703),h.NineSlice=t(28103),h.PointLight=t(80321),h.Plane=t(33663),h.Factories.Shader=t(74177),h.Factories.Mesh=t(9225),h.Factories.NineSlice=t(47521),h.Factories.PointLight=t(71255),h.Factories.Plane=t(30985),h.Creators.Shader=t(54935),h.Creators.Mesh=t(20527),h.Creators.NineSlice=t(28279),h.Creators.PointLight=t(39829),h.Creators.Plane=t(56015),h.Light=t(41432),h.LightsManager=t(61356),h.LightsPlugin=t(88992),p.exports=h}),93595:((p,M,t)=>{var h=t(10312),g=t(83419),o=t(31401),a=t(53774),r=t(45893),e=t(50792),n=t(51708),u=t(73162),s=t(33963),l=t(44594),c=t(19186),d=new g({Extends:u,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.PostPipeline,o.Visible,e,s],initialize:function(m,y){u.call(this,m),e.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),y&&this.add(y),m.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(f,m){return this.data||(this.data=new r(this)),this.data.set(f,m),this},incData:function(f,m){return this.data||(this.data=new r(this)),this.data.inc(f,m),this},toggleData:function(f){return this.data||(this.data=new r(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new r(this)),this.data.get(f)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(f){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,m=this.parentContainer,y=[];m&&(y.unshift(m.getIndex(f)),f=m,m.parentContainer);)m=m.parentContainer;return y.unshift(this.displayList.getIndex(f)),y},addChildCallback:function(f){var m=f.displayList;m&&m!==this&&f.removeFromDisplayList(),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(n.ADDED_TO_SCENE,f,this.scene),this.events.emit(l.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(n.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,f,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,m){return f._depth-m._depth},getChildren:function(){return this.list},addToDisplayList:function(f){return f===void 0&&(f=this.scene.sys.displayList),this.displayList&&this.displayList!==f&&this.removeFromDisplayList(),f.exists(this)||(this.displayList=f,f.add(this,!0),f.queueDepthSort(),this.emit(n.ADDED_TO_SCENE,this,this.scene),f.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var f=this.displayList||this.scene.sys.displayList;return f.exists(this)&&(f.remove(this,!0),f.queueDepthSort(),this.displayList=null,this.emit(n.REMOVED_FROM_SCENE,this,this.scene),f.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var f=null;return this.parentContainer?f=this.parentContainer.list:this.displayList&&(f=this.displayList.list),f},destroy:function(f){if(!(!this.scene||this.ignoreDestroy)){this.emit(n.DESTROY,this);for(var m=this.list;m.length;)m[0].destroy(f);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});p.exports=d}),2956:(p=>{var M=function(t,h,g){var o=h.list;if(o.length!==0){h.depthSort();var a=h.blendMode!==-1;a||t.setBlendMode(0);var r=h._alpha;h.mask&&h.mask.preRenderCanvas(t,null,g);for(var e=0;e<o.length;e++){var n=o[e];if(n.willRender(g)){var u=n.alpha;!a&&n.blendMode!==t.currentBlendMode&&t.setBlendMode(n.blendMode),n.setAlpha(u*r),n.renderCanvas(t,n,g),n.setAlpha(u)}}h.mask&&h.mask.postRenderCanvas(t)}};p.exports=M}),25179:((p,M,t)=>{var h=t(25305),g=t(93595),o=t(44603),a=t(23568);o.register("layer",function(r,e){r===void 0&&(r={});var n=a(r,"children",null),u=new g(this.scene,n);return e!==void 0&&(r.add=e),h(this.scene,u,r),u})}),20005:((p,M,t)=>{var h=t(93595),g=t(39429);g.register("layer",function(o){return this.displayList.add(new h(this.scene,o))})}),33963:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(15869),o=t(2956),p.exports={renderWebGL:g,renderCanvas:o}}),15869:(p=>{var M=function(t,h,g){var o=h.list,a=o.length;if(a!==0){h.depthSort(),t.pipelines.preBatch(h);var r=h.blendMode!==-1;r||t.setBlendMode(0);for(var e=h.alpha,n=0;n<a;n++){var u=o[n];if(u.willRender(g)){var s,l,c,d;if(u.alphaTopLeft!==void 0)s=u.alphaTopLeft,l=u.alphaTopRight,c=u.alphaBottomLeft,d=u.alphaBottomRight;else{var f=u.alpha;s=f,l=f,c=f,d=f}!r&&u.blendMode!==t.currentBlendMode&&t.setBlendMode(u.blendMode);var m=u.mask;m&&m.preRenderWebGL(t,u,g);var y=u.type;y!==t.currentType&&(t.newType=!0,t.currentType=y),t.nextTypeMatch=n<a-1?o[n+1].type===t.currentType:!1,u.setAlpha(s*e,l*e,c*e,d*e),u.renderWebGL(t,u,g),u.setAlpha(s,l,c,d),m&&m.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(h)}};p.exports=M}),41432:((p,M,t)=>{var h=t(96503),g=t(83419),o=t(31401),a=t(51767),r=t(70554),e=new g({Extends:h,Mixins:[o.Origin,o.ScrollFactor,o.Visible],initialize:function(u,s,l,c,d,f,m){h.call(this,u,s,l),this.color=new a(c,d,f),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(l)},displayWidth:{get:function(){return this.diameter},set:function(n){this.diameter=n}},displayHeight:{get:function(){return this.diameter},set:function(n){this.diameter=n}},width:{get:function(){return this.diameter},set:function(n){this.diameter=n}},height:{get:function(){return this.diameter},set:function(n){this.diameter=n}},willRender:function(n){return!(e.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&n.id)},setColor:function(n){var u=r.getFloatsFromUintRGB(n);return this.color.set(u[0],u[1],u[2]),this},setIntensity:function(n){return this.intensity=n,this},setRadius:function(n){return this.radius=n,this}});e.RENDER_MASK=15,p.exports=e}),61356:((p,M,t)=>{var h=t(81491),g=t(83419),o=t(20339),a=t(41432),r=t(80321),e=t(51767),n=t(19133),u=t(19186),s=t(70554),l=new g({initialize:function(){this.lights=[],this.ambientColor=new e(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(c,d,f,m,y,S){return this.systems.displayList.add(new r(this.scene,c,d,f,m,y,S))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(c){for(var d=this.lights,f=c.worldView,m=[],y=0;y<d.length;y++){var S=d[y];S.willRender(c)&&h(S,f)&&m.push({light:S,distance:o(S.x,S.y,f.centerX,f.centerY)})}return m.length>this.maxLights&&(u(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(c,d){return c.distance>=d.distance},setAmbientColor:function(c){var d=s.getFloatsFromUintRGB(c);return this.ambientColor.set(d[0],d[1],d[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(c,d,f,m,y){c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=128),m===void 0&&(m=16777215),y===void 0&&(y=1);var S=s.getFloatsFromUintRGB(m),C=new a(c,d,f,S[0],S[1],S[2],y);return this.lights.push(C),C},removeLight:function(c){var d=this.lights.indexOf(c);return d>=0&&n(this.lights,d),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});p.exports=l}),88992:((p,M,t)=>{var h=t(83419),g=t(61356),o=t(37277),a=t(44594),r=new h({Extends:g,initialize:function(n){this.scene=n,this.systems=n.sys,n.sys.settings.isBooted||n.sys.events.once(a.BOOT,this.boot,this),g.call(this)},boot:function(){var e=this.systems.events;e.on(a.SHUTDOWN,this.shutdown,this),e.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});o.register("LightsPlugin",r,"lights"),p.exports=r}),4703:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(39506),a=t(83997),r=t(95643),e=t(34684),n=t(92515),u=t(91296),s=t(37867),l=t(29807),c=t(43396),d=t(19186),f=t(25836),m=t(39318),y=new h({Extends:r,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.Texture,g.Transform,g.Visible,l],initialize:function(C,E,P,A,R,G,b,L,w,B,N,Y){E===void 0&&(E=0),P===void 0&&(P=0),A===void 0&&(A="__WHITE"),r.call(this,C,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new f,this.modelScale=new f(1,1,1),this.modelRotation=new f,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new s,this.viewPosition=new f,this.viewMatrix=new s,this.projectionMatrix=new s,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var U=C.sys.renderer;this.setPosition(E,P),this.setTexture(A,R),this.setSize(U.width,U.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(U.width,U.height),G&&this.addVertices(G,b,L,w,B,N,Y)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(S){return this.viewPosition.addScale(f.LEFT,S),this.dirtyCache[10]=1,this},panY:function(S){return this.viewPosition.y+=f.DOWN.y*S,this.dirtyCache[10]=1,this},panZ:function(S){return this.viewPosition.z+=S,this.dirtyCache[10]=1,this},setPerspective:function(S,C,E,P,A){return E===void 0&&(E=45),P===void 0&&(P=.01),A===void 0&&(A=1e3),this.fov=E,this.projectionMatrix.perspective(o(E),S/C,P,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(S,C,E,P){return S===void 0&&(S=this.scene.sys.renderer.getAspectRatio()),C===void 0&&(C=1),E===void 0&&(E=-1e3),P===void 0&&(P=1e3),this.fov=0,this.projectionMatrix.ortho(-S,S,-C,C,E,P),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(S){S.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(S,C,E,P,A,R,G,b,L){var w=this.scene.sys.cache.obj.get(S),B;return w&&(B=e(w,this,C,E,P,A,R,G,b,L)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",S),this},sortByDepth:function(S,C){return S.depth-C.depth},depthSort:function(){return d(this.faces,this.sortByDepth),this},addVertex:function(S,C,E,P,A,R,G){var b=new m(S,C,E,P,A,R,G);return this.vertices.push(b),b},addFace:function(S,C,E){var P=new a(S,C,E);return this.faces.push(P),this.dirtyCache[9]=-1,P},addVertices:function(S,C,E,P,A,R,G){var b=n(S,C,E,P,A,R,G);return b?(this.faces=this.faces.concat(b.faces),this.vertices=this.vertices.concat(b.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(S){return this.faces[S]},hasFaceAt:function(S,C,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var P=u(this,E).calc,A=this.faces,R=0;R<A.length;R++){var G=A[R];if(G.contains(S,C,P))return!0}return!1},getFaceAt:function(S,C,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var P=u(this,E).calc,A=this.faces,R=[],G=0;G<A.length;G++){var b=A[G];b.contains(S,C,P)&&R.push(b)}return d(R,this.sortByDepth)},setDebug:function(S,C){return this.debugGraphic=S,!S&&!C?this.debugCallback=null:C?this.debugCallback=C:this.debugCallback=this.renderDebug,this},isDirty:function(){var S=this.modelPosition,C=this.modelRotation,E=this.modelScale,P=this.dirtyCache,A=S.x,R=S.y,G=S.z,b=C.x,L=C.y,w=C.z,B=E.x,N=E.y,Y=E.z,U=this.getFaceCount(),W=P[0],O=P[1],V=P[2],X=P[3],z=P[4],I=P[5],Z=P[6],J=P[7],k=P[8],j=P[9];return P[0]=A,P[1]=R,P[2]=G,P[3]=b,P[4]=L,P[5]=w,P[6]=B,P[7]=N,P[8]=Y,P[9]=U,W!==A||O!==R||V!==G||X!==b||z!==L||I!==w||Z!==B||J!==N||k!==Y||j!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var S=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!S[10]&&!this.isDirty())){var C=this.width,E=this.height,P=this.viewMatrix,A=this.viewPosition;S[10]&&(P.identity(),P.translate(A),P.invert(),S[10]=0);var R=this.transformMatrix;R.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var G=A.z,b=this.faces,L=0;L<b.length;L++)b[L].transformCoordinatesLocal(R,C,E,G);this.depthSort()}},renderDebug:function(S,C){for(var E=S.debugGraphic,P=0;P<C.length;P++){var A=C[P],R=A.vertex1.tx,G=A.vertex1.ty,b=A.vertex2.tx,L=A.vertex2.ty,w=A.vertex3.tx,B=A.vertex3.ty;E.strokeTriangle(R,G,b,L,w,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(S){S===void 0&&(S={});var C=function(E,P,A){for(var R=this.faces,G=0;G<R.length;G++){var b=R[G];if(b.contains(P,A))return!0}return!1}.bind(this);return this.scene.sys.input.enable(this,S,C),this},setTint:function(S){S===void 0&&(S=16777215);for(var C=this.vertices,E=0;E<C.length;E++)C[E].color=S;return this},uvScroll:function(S,C){for(var E=this.faces,P=0;P<E.length;P++)E[P].scrollUV(S,C);return this},uvScale:function(S,C){for(var E=this.faces,P=0;P<E.length;P++)E[P].scaleUV(S,C);return this},tint:{set:function(S){this.setTint(S)}},rotateX:{get:function(){return c(this.modelRotation.x)},set:function(S){this.modelRotation.x=o(S)}},rotateY:{get:function(){return c(this.modelRotation.y)},set:function(S){this.modelRotation.y=o(S)}},rotateZ:{get:function(){return c(this.modelRotation.z)},set:function(S){this.modelRotation.z=o(S)}}});p.exports=y}),36488:(p=>{var M=function(){};p.exports=M}),20527:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(35154),r=t(4703);g.register("mesh",function(e,n){e===void 0&&(e={});var u=o(e,"key",null),s=o(e,"frame",null),l=a(e,"vertices",[]),c=a(e,"uvs",[]),d=a(e,"indicies",[]),f=a(e,"containsZ",!1),m=a(e,"normals",[]),y=a(e,"colors",16777215),S=a(e,"alphas",1),C=new r(this.scene,0,0,u,s,l,c,d,f,m,y,S);return n!==void 0&&(e.add=n),h(this.scene,C,e),C})}),9225:((p,M,t)=>{var h=t(4703),g=t(39429);g.register("mesh",function(o,a,r,e,n,u,s,l,c,d,f){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s,l,c,d,f))})}),29807:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(48833),o=t(36488),p.exports={renderWebGL:g,renderCanvas:o}}),48833:((p,M,t)=>{var h=t(91296),g=function(o,a,r,e){var n=a.faces,u=n.length;if(u!==0){r.addToRenderList(a);var s=o.pipelines.set(a.pipeline,a),l=h(a,r,e).calc;o.pipelines.preBatch(a);for(var c=s.setGameObject(a),d=s.vertexViewF32,f=s.vertexViewU32,m=s.vertexCount*s.currentShader.vertexComponentCount-1,y=a.tintFill,S=[],C=a.debugCallback,E=l.a,P=l.b,A=l.c,R=l.d,G=l.e,b=l.f,L=a.viewPosition.z,w=a.hideCCW,B=r.roundPixels,N=r.alpha*a.alpha,Y=0,U=0;U<u;U++){var W=n[U];W.isInView(r,w,L,N,E,P,A,R,G,b,B)&&(s.shouldFlush(3)&&(s.flush(),c=s.setGameObject(a),m=s.vertexCount*s.currentShader.vertexComponentCount-1),m=W.load(d,f,m,c,y),Y++,s.vertexCount+=3,s.currentBatch.count=s.vertexCount-s.currentBatch.start,C&&S.push(W))}a.totalFrame+=Y,C&&C.call(a,a,S),o.pipelines.postBatch(a)}};p.exports=g}),28103:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(78023),r=t(39318),e=new h({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,a],initialize:function(u,s,l,c,d,f,m,y,S,C,E){o.call(this,u,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var P=u.textures.getFrame(c,d);this.is3Slice=!C&&!E,P&&P.scale9&&(this.is3Slice=P.is3Slice);for(var A=this.is3Slice?18:54,R=0;R<A;R++)this.vertices.push(new r);this.setPosition(s,l),this.setTexture(c,d),this.setSlices(f,m,y,S,C,E,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(n,u,s,l,c,d,f){s===void 0&&(s=10),l===void 0&&(l=10),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=!1);var m=this.frame,y=!1;if(this.is3Slice&&f&&c!==0&&d!==0&&(y=!0),y)console.warn("Cannot change 9 slice to 3 slice");else{if(m&&m.scale9&&!f){var S=m.data.scale9Borders,C=S.x,E=S.y;s=C,l=m.width-S.w-C,c=E,d=m.height-S.h-E,n===void 0&&(n=m.width),u===void 0&&(u=m.height)}else n===void 0&&(n=256),u===void 0&&(u=256);this._width=n,this._height=u,this.leftWidth=s,this.rightWidth=l,this.topHeight=c,this.bottomHeight=d,this.is3Slice&&(u=m.height,this._height=u,this.topHeight=u,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var n=this.leftWidth,u=this.rightWidth,s=this.topHeight,l=this.bottomHeight,c=this.frame.width,d=this.frame.height;this.updateQuadUVs(0,0,0,n/c,s/d),this.updateQuadUVs(6,n/c,0,1-u/c,s/d),this.updateQuadUVs(12,1-u/c,0,1,s/d),this.is3Slice||(this.updateQuadUVs(18,0,s/d,n/c,1-l/d),this.updateQuadUVs(24,n/c,s/d,1-u/c,1-l/d),this.updateQuadUVs(30,1-u/c,s/d,1,1-l/d),this.updateQuadUVs(36,0,1-l/d,n/c,1),this.updateQuadUVs(42,n/c,1-l/d,1-u/c,1),this.updateQuadUVs(48,1-u/c,1-l/d,1,1))},updateVertices:function(){var n=this.leftWidth,u=this.rightWidth,s=this.topHeight,l=this.bottomHeight,c=this.width,d=this.height;this.updateQuad(0,-.5,.5,-.5+n/c,.5-s/d),this.updateQuad(6,-.5+n/c,.5,.5-u/c,.5-s/d),this.updateQuad(12,.5-u/c,.5,.5,.5-s/d),this.is3Slice||(this.updateQuad(18,-.5,.5-s/d,-.5+n/c,-.5+l/d),this.updateQuad(24,-.5+n/c,.5-s/d,.5-u/c,-.5+l/d),this.updateQuad(30,.5-u/c,.5-s/d,.5,-.5+l/d),this.updateQuad(36,-.5,-.5+l/d,-.5+n/c,-.5),this.updateQuad(42,-.5+n/c,-.5+l/d,.5-u/c,-.5),this.updateQuad(48,.5-u/c,-.5+l/d,.5,-.5))},updateQuad:function(n,u,s,l,c){var d=this.width,f=this.height,m=this.originX,y=this.originY,S=this.vertices;S[n+0].resize(u,s,d,f,m,y),S[n+1].resize(u,c,d,f,m,y),S[n+2].resize(l,s,d,f,m,y),S[n+3].resize(u,c,d,f,m,y),S[n+4].resize(l,c,d,f,m,y),S[n+5].resize(l,s,d,f,m,y)},updateQuadUVs:function(n,u,s,l,c){var d=this.vertices,f=this.frame,m=f.u0,y=f.v0,S=f.u1,C=f.v1;if(m!==0||S!==1){var E=S-m;u=m+u*E,l=m+l*E}if(y!==0||C!==1){var P=C-y;s=y+s*P,c=y+c*P}d[n+0].setUVs(u,s),d[n+1].setUVs(u,c),d[n+2].setUVs(l,s),d[n+3].setUVs(u,c),d[n+4].setUVs(l,c),d[n+5].setUVs(l,s)},clearTint:function(){return this.setTint(16777215),this},setTint:function(n){return n===void 0&&(n=16777215),this.tint=n,this.tintFill=!1,this},setTintFill:function(n){return this.setTint(n),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(n){this._width=Math.max(n,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(n){this.is3Slice||(this._height=Math.max(n,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,u){this.width=n,this.height=u,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},setDisplaySize:function(n,u){return this.displayWidth=n,this.displayHeight=u,this},originX:{get:function(){return this._originX},set:function(n){this._originX=n,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(n){this._originY=n,this.updateVertices()}},setOrigin:function(n,u){return n===void 0&&(n=.5),u===void 0&&(u=n),this._originX=n,this._originY=u,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var n=this.frame.height;this._height=n,this.topHeight=n,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});p.exports=e}),28279:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(35154),r=t(28103);g.register("nineslice",function(e,n){e===void 0&&(e={});var u=o(e,"key",null),s=o(e,"frame",null),l=a(e,"width",256),c=a(e,"height",256),d=a(e,"leftWidth",10),f=a(e,"rightWidth",10),m=a(e,"topHeight",0),y=a(e,"bottomHeight",0),S=new r(this.scene,0,0,u,s,l,c,d,f,m,y);return n!==void 0&&(e.add=n),h(this.scene,S,e),S})}),47521:((p,M,t)=>{var h=t(28103),g=t(39429);g.register("nineslice",function(o,a,r,e,n,u,s,l,c,d){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s,l,c,d))})}),78023:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(52230),p.exports={renderWebGL:g,renderCanvas:o}}),52230:((p,M,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,n){var u=r.vertices,s=u.length;if(s!==0){e.addToRenderList(r);var l=a.pipelines.set(r.pipeline,r),c=h(r,e,n,!1).calc;a.pipelines.preBatch(r);var d=l.setGameObject(r),f=l.vertexViewF32,m=l.vertexViewU32,y=l.vertexCount*l.currentShader.vertexComponentCount-1,S=e.roundPixels,C=r.tintFill,E=e.alpha*r.alpha,P=g.getTintAppendFloatAlpha(r.tint,E),A=l.vertexAvailable(),R=-1;A<s&&(R=A);for(var G=0;G<s;G++){var b=u[G];G===R&&(l.flush(),d=l.setGameObject(r),y=0),f[++y]=c.getXRound(b.vx,b.vy,S),f[++y]=c.getYRound(b.vx,b.vy,S),f[++y]=b.u,f[++y]=b.v,f[++y]=d,f[++y]=C,m[++y]=P,l.vertexCount++,l.currentBatch.count=l.vertexCount-l.currentBatch.start}a.pipelines.postBatch(r)}};p.exports=o}),76472:((p,M,t)=>{var h=t(83419),g=t(44777),o=t(37589),a=t(6113),r=t(91389),e=t(90664),n=new h({Extends:g,initialize:function(s){g.call(this,s,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var u=this.propertyValue,s=u,l=this.defaultEmit,c=this.defaultUpdate;if(this.method===9){this.start=u[0],this.ease=a("Linear"),this.interpolation=r("linear"),l=this.easedValueEmit,c=this.easeValueUpdate,s=u[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var d=0;d<u.length;d++){var f=e(u[d]);this.r.push(f.r),this.g.push(f.g),this.b.push(f.b)}}return this.onEmit=l,this.onUpdate=c,this.current=s,this},setEase:function(u){this.easeName=u,this.ease=a(u)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(u,s,l){var c=this.ease(l),d=this.interpolation(this.r,c),f=this.interpolation(this.g,c),m=this.interpolation(this.b,c),y=o(d,f,m);return this.current=y,y}});p.exports=n}),44777:((p,M,t)=>{var h=t(30976),g=t(45319),o=t(83419),a=t(99472),r=t(6113),e=t(95540),n=t(91389),u=t(77720),s=t(15994),l=new o({initialize:function(d,f,m){m===void 0&&(m=!1),this.propertyKey=d,this.propertyValue=f,this.defaultValue=f,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=m,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(c,d){c===void 0&&(c={}),d&&(this.propertyKey=d),this.propertyValue=e(c,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(c){var d;switch(this.method){case 1:case 3:case 8:d=c;break;case 2:this.propertyValue.indexOf(c)>=0&&(d=c);break;case 4:var f=(this.end-this.start)/this.steps;d=u(c,f),this.counter=d;break;case 5:case 6:case 7:d=g(c,this.start,this.end);break;case 9:d=this.start[0];break}return this.current=d,this},getMethod:function(){var c=this.propertyValue;if(c===null)return 0;var d=typeof c;if(d==="number")return 1;if(Array.isArray(c))return 2;if(d==="function")return 3;if(d==="object"){if(this.hasBoth(c,"start","end"))return this.has(c,"steps")?4:5;if(this.hasBoth(c,"min","max"))return 6;if(this.has(c,"random"))return 7;if(this.hasEither(c,"onEmit","onUpdate"))return 8;if(this.hasEither(c,"values","interpolation"))return 9}return 0},setMethods:function(){var c=this.propertyValue,d=c,f=this.defaultEmit,m=this.defaultUpdate;switch(this.method){case 1:f=this.staticValueEmit;break;case 2:f=this.randomStaticValueEmit,d=c[0];break;case 3:this._onEmit=c,f=this.proxyEmit,d=this.defaultValue;break;case 4:this.start=c.start,this.end=c.end,this.steps=c.steps,this.counter=this.start,this.yoyo=this.has(c,"yoyo")?c.yoyo:!1,this.direction=0,f=this.steppedEmit,d=this.start;break;case 5:this.start=c.start,this.end=c.end;var y=this.has(c,"ease")?c.ease:"Linear";this.ease=r(y,c.easeParams),f=this.has(c,"random")&&c.random?this.randomRangedValueEmit:this.easedValueEmit,m=this.easeValueUpdate,d=this.start;break;case 6:this.start=c.min,this.end=c.max,f=this.has(c,"int")&&c.int?this.randomRangedIntEmit:this.randomRangedValueEmit,d=this.start;break;case 7:var S=c.random;Array.isArray(S)&&(this.start=S[0],this.end=S[1]),f=this.randomRangedIntEmit,d=this.start;break;case 8:this._onEmit=this.has(c,"onEmit")?c.onEmit:this.defaultEmit,this._onUpdate=this.has(c,"onUpdate")?c.onUpdate:this.defaultUpdate,f=this.proxyEmit,m=this.proxyUpdate,d=this.defaultValue;break;case 9:this.start=c.values;var C=this.has(c,"ease")?c.ease:"Linear";this.ease=r(C,c.easeParams),this.interpolation=n(c.interpolation),f=this.easedValueEmit,m=this.easeValueUpdate,d=this.start[0];break}return this.onEmit=f,this.onUpdate=m,this.current=d,this},has:function(c,d){return c.hasOwnProperty(d)},hasBoth:function(c,d,f){return c.hasOwnProperty(d)&&c.hasOwnProperty(f)},hasEither:function(c,d,f){return c.hasOwnProperty(d)||c.hasOwnProperty(f)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(c,d,f,m){return m},proxyEmit:function(c,d,f){var m=this._onEmit(c,d,f);return this.current=m,m},proxyUpdate:function(c,d,f,m){var y=this._onUpdate(c,d,f,m);return this.current=y,y},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var c=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[c],this.current},randomRangedValueEmit:function(c,d){var f=a(this.start,this.end);return c&&c.data[d]&&(c.data[d].min=f,c.data[d].max=this.end),this.current=f,f},randomRangedIntEmit:function(c,d){var f=h(this.start,this.end);return c&&c.data[d]&&(c.data[d].min=f,c.data[d].max=this.end),this.current=f,f},steppedEmit:function(){var c=this.counter,d=c,f=(this.end-this.start)/this.steps;if(this.yoyo){var m;this.direction===0?(d+=f,d>=this.end&&(m=d-this.end,d=this.end-m,this.direction=1)):(d-=f,d<=this.start&&(m=this.start-d,d=this.start+m,this.direction=0)),this.counter=d}else this.counter=s(d+f,this.start,this.end);return this.current=c,c},easedValueEmit:function(c,d){if(c&&c.data[d]){var f=c.data[d];f.min=this.start,f.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(c,d,f){var m=c.data[d],y,S=this.ease(f);return this.interpolation?y=this.interpolation(this.start,S):y=(m.max-m.min)*S+m.min,this.current=y,y},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});p.exports=l}),24502:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(20286),a=new h({Extends:o,initialize:function(e,n,u,s,l){if(typeof e=="object"){var c=e;e=g(c,"x",0),n=g(c,"y",0),u=g(c,"power",0),s=g(c,"epsilon",100),l=g(c,"gravity",50)}else e===void 0&&(e=0),n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=100),l===void 0&&(l=50);o.call(this,e,n,!0),this._gravity=l,this._power=u*l,this._epsilon=s*s},update:function(r,e){var n=this.x-r.x,u=this.y-r.y,s=n*n+u*u;if(s!==0){var l=Math.sqrt(s);s<this._epsilon&&(s=this._epsilon);var c=this._power*e/(s*l)*100;r.velocityX+=n*c,r.velocityY+=u*c}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(r){this._epsilon=r*r}},power:{get:function(){return this._power/this._gravity},set:function(r){this._power=r*this._gravity}},gravity:{get:function(){return this._gravity},set:function(r){var e=this.power;this._gravity=r,this.power=e}}});p.exports=a}),56480:((p,M,t)=>{var h=t(9674),g=t(45319),o=t(83419),a=t(39506),r=t(87841),e=t(11520),n=t(26099),u=new o({initialize:function(l){this.emitter=l,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new n,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=l.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new h(this)),this.bounds=new r},emit:function(s,l,c,d,f,m){return this.emitter.emit(s,l,c,d,f,m)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.x=s,this.y=l},fire:function(s,l){var c=this.emitter,d=c.ops,f=c.getAnim();if(f?this.anims.play(f):(this.frame=c.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(c.getEmitZone(this),s===void 0?this.x+=d.x.onEmit(this,"x"):d.x.steps>0?this.x+=s+d.x.onEmit(this,"x"):this.x+=s,l===void 0?this.y+=d.y.onEmit(this,"y"):d.y.steps>0?this.y+=l+d.y.onEmit(this,"y"):this.y+=l,this.life=d.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=d.delay.onEmit(this,"delay"),this.holdCurrent=d.hold.onEmit(this,"hold"),this.scaleX=d.scaleX.onEmit(this,"scaleX"),this.scaleY=d.scaleY.active?d.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=d.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),c.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&c.getDeathZone(this))return this.lifeCurrent=0,!1;var m=d.speedX.onEmit(this,"speedX"),y=d.speedY.active?d.speedY.onEmit(this,"speedY"):m;if(c.radial){var S=a(d.angle.onEmit(this,"angle"));this.velocityX=Math.cos(S)*Math.abs(m),this.velocityY=Math.sin(S)*Math.abs(y)}else if(c.moveTo){var C=d.moveToX.onEmit(this,"moveToX"),E=d.moveToY.onEmit(this,"moveToY"),P=this.life/1e3;this.velocityX=(C-this.x)/P,this.velocityY=(E-this.y)/P}else this.velocityX=m,this.velocityY=y;return c.acceleration&&(this.accelerationX=d.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=d.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=d.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=d.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=d.bounce.onEmit(this,"bounce"),this.alpha=d.alpha.onEmit(this,"alpha"),d.color.active?this.tint=d.color.onEmit(this,"tint"):this.tint=d.tint.onEmit(this,"tint"),!0},update:function(s,l,c){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=s,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=s,!1;this.anims&&this.anims.update(0,s);var d=this.emitter,f=d.ops,m=1-this.lifeCurrent/this.life;if(this.lifeT=m,this.x=f.x.onUpdate(this,"x",m,this.x),this.y=f.y.onUpdate(this,"y",m,this.y),d.moveTo){var y=f.moveToX.onUpdate(this,"moveToX",m,d.moveToX),S=f.moveToY.onUpdate(this,"moveToY",m,d.moveToY),C=this.lifeCurrent/1e3;this.velocityX=(y-this.x)/C,this.velocityY=(S-this.y)/C}return this.computeVelocity(d,s,l,c,m),this.scaleX=f.scaleX.onUpdate(this,"scaleX",m,this.scaleX),f.scaleY.active?this.scaleY=f.scaleY.onUpdate(this,"scaleY",m,this.scaleY):this.scaleY=this.scaleX,this.angle=f.rotate.onUpdate(this,"rotate",m,this.angle),this.rotation=a(this.angle),d.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g(f.alpha.onUpdate(this,"alpha",m,this.alpha),0,1),f.color.active?this.tint=f.color.onUpdate(this,"color",m,this.tint):this.tint=f.tint.onUpdate(this,"tint",m,this.tint),this.lifeCurrent-=s,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(s,l,c,d,f){var m=s.ops,y=this.velocityX,S=this.velocityY,C=m.accelerationX.onUpdate(this,"accelerationX",f,this.accelerationX),E=m.accelerationY.onUpdate(this,"accelerationY",f,this.accelerationY),P=m.maxVelocityX.onUpdate(this,"maxVelocityX",f,this.maxVelocityX),A=m.maxVelocityY.onUpdate(this,"maxVelocityY",f,this.maxVelocityY);this.bounce=m.bounce.onUpdate(this,"bounce",f,this.bounce),y+=s.gravityX*c+C*c,S+=s.gravityY*c+E*c,y=g(y,-P,P),S=g(S,-A,A),this.velocityX=y,this.velocityY=S,this.x+=y*c,this.y+=S*c,s.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var R=0;R<d.length;R++){var G=d[R];G.active&&G.update(this,l,c,f)}},setSizeToFrame:function(){},getBounds:function(s){s===void 0&&(s=this.emitter.getWorldTransformMatrix());var l=Math.abs(s.scaleX)*this.scaleX,c=Math.abs(s.scaleY)*this.scaleY,d=this.x,f=this.y,m=this.rotation,y=this.frame.width*l/2,S=this.frame.height*c/2,C=this.bounds,E=new n(d-y,f-S),P=new n(d+y,f-S),A=new n(d-y,f+S),R=new n(d+y,f+S);return m!==0&&(e(E,d,f,m),e(P,d,f,m),e(A,d,f,m),e(R,d,f,m)),s.transformPoint(E.x,E.y,E),s.transformPoint(P.x,P.y,P),s.transformPoint(A.x,A.y,A),s.transformPoint(R.x,R.y,R),C.x=Math.min(E.x,P.x,A.x,R.x),C.y=Math.min(E.y,P.y,A.y,R.y),C.width=Math.max(E.x,P.x,A.x,R.x)-C.x,C.height=Math.max(E.y,P.y,A.y,R.y)-C.y,C},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});p.exports=u}),69601:((p,M,t)=>{var h=t(83419),g=t(20286),o=t(87841),a=new h({Extends:g,initialize:function(e,n,u,s,l,c,d,f){l===void 0&&(l=!0),c===void 0&&(c=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),g.call(this,e,n,!0),this.bounds=new o(e,n,u,s),this.collideLeft=l,this.collideRight=c,this.collideTop=d,this.collideBottom=f},update:function(r){var e=this.bounds,n=-r.bounce,u=r.worldPosition;u.x<e.x&&this.collideLeft?(r.x+=e.x-u.x,r.velocityX*=n):u.x>e.right&&this.collideRight&&(r.x-=u.x-e.right,r.velocityX*=n),u.y<e.y&&this.collideTop?(r.y+=e.y-u.y,r.velocityY*=n):u.y>e.bottom&&this.collideBottom&&(r.y-=u.y-e.bottom,r.velocityY*=n)}});p.exports=a}),31600:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(53774),a=t(43459),r=t(26388),e=t(19909),n=t(76472),u=t(44777),s=t(20696),l=t(95643),c=t(95540),d=t(26546),f=t(24502),m=t(69036),y=t(1985),S=t(97022),C=t(86091),E=t(73162),P=t(20074),A=t(269),R=t(56480),G=t(69601),b=t(68875),L=t(87841),w=t(59996),B=t(72905),N=t(90668),Y=t(19186),U=t(61340),W=t(26099),O=t(15994),V=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],X=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],z=new h({Extends:l,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,N],initialize:function(Z,J,k,j,tt){l.call(this,Z,"ParticleEmitter"),this.particleClass=R,this.config=null,this.ops={accelerationX:new u("accelerationX",0),accelerationY:new u("accelerationY",0),alpha:new u("alpha",1),angle:new u("angle",{min:0,max:360},!0),bounce:new u("bounce",0),color:new n("color"),delay:new u("delay",0,!0),hold:new u("hold",0,!0),lifespan:new u("lifespan",1e3,!0),maxVelocityX:new u("maxVelocityX",1e4),maxVelocityY:new u("maxVelocityY",1e4),moveToX:new u("moveToX",0),moveToY:new u("moveToY",0),quantity:new u("quantity",1,!0),rotate:new u("rotate",0),scaleX:new u("scaleX",1),scaleY:new u("scaleY",1),speedX:new u("speedX",0,!0),speedY:new u("speedY",0,!0),tint:new u("tint",16777215),x:new u("x",0),y:new u("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new W,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new U,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(J,k),this.setTexture(j),tt&&this.setConfig(tt)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(I){if(!I)return this;this.config=I;var Z=0,J="",k=this.ops;for(Z=0;Z<X.length;Z++)J=X[Z],k[J].loadConfig(I);for(Z=0;Z<V.length;Z++)J=V[Z],S(I,J)&&(this[J]=c(I,J));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=m(I,["moveToX","moveToY"]),S(I,"speed")&&(k.speedX.loadConfig(I,"speed"),k.speedY.active=!1),(y(I,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),S(I,"scale")&&(k.scaleX.loadConfig(I,"scale"),k.scaleY.active=!1),S(I,"callbackScope")){var j=c(I,"callbackScope",null);this.emitCallbackScope=j,this.deathCallbackScope=j}if(S(I,"emitZone")&&this.addEmitZone(I.emitZone),S(I,"deathZone")&&this.addDeathZone(I.deathZone),S(I,"bounds")){var tt=this.addParticleBounds(I.bounds);tt.collideLeft=c(I,"collideLeft",!0),tt.collideRight=c(I,"collideRight",!0),tt.collideTop=c(I,"collideTop",!0),tt.collideBottom=c(I,"collideBottom",!0)}return S(I,"followOffset")&&this.followOffset.setFromObject(c(I,"followOffset",0)),S(I,"texture")&&this.setTexture(I.texture),S(I,"frame")?this.setEmitterFrame(I.frame):S(I,"anim")&&this.setAnim(I.anim),S(I,"reserve")&&this.reserve(I.reserve),S(I,"advance")&&this.fastForward(I.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(s.START,this),this},updateConfig:function(I){return I&&(this.config?this.setConfig(A(this.config,I)):this.setConfig(I)),this},toJSON:function(){var I=o(this),Z=0,J="";for(Z=0;Z<V.length;Z++)J=V[Z],I[J]=this[J];var k=this.ops;for(Z=0;Z<X.length;Z++)J=X[Z],k[J]&&(I[J]=k[J].toJSON());return k.speedY.active||(delete I.speedX,I.speed=k.speedX.toJSON()),this.scaleX===this.scaleY&&(delete I.scaleX,delete I.scaleY,I.scale=k.scaleX.toJSON()),I},resetCounters:function(I,Z){var J=this.counters;J.fill(0),J[0]=I,Z&&(J[5]=1)},startFollow:function(I,Z,J,k){return Z===void 0&&(Z=0),J===void 0&&(J=0),k===void 0&&(k=!1),this.follow=I,this.followOffset.set(Z,J),this.trackVisible=k,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var I=this.frames,Z=I.length,J;return Z===1?J=I[0]:this.randomFrame?J=d(I):(J=I[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===Z&&(this.currentFrame=0))),this.texture.get(J)},setEmitterFrame:function(I,Z,J){Z===void 0&&(Z=!0),J===void 0&&(J=1),this.randomFrame=Z,this.frameQuantity=J,this.currentFrame=0;var k=typeof I;if(this.frames.length=0,Array.isArray(I))this.frames=this.frames.concat(I);else if(k==="string"||k==="number")this.frames.push(I);else if(k==="object"){var j=I;I=c(j,"frames",null),I&&(this.frames=this.frames.concat(I));var tt=c(j,"cycle",!1);this.randomFrame=!tt,this.frameQuantity=c(j,"quantity",J)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var I=this.anims,Z=I.length;if(Z===0)return null;if(Z===1)return I[0];if(this.randomAnim)return d(I);var J=I[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=O(this.currentAnim+1,0,Z)),J},setAnim:function(I,Z,J){Z===void 0&&(Z=!0),J===void 0&&(J=1),this.randomAnim=Z,this.animQuantity=J,this.currentAnim=0;var k=typeof I;if(this.anims.length=0,Array.isArray(I))this.anims=this.anims.concat(I);else if(k==="string")this.anims.push(I);else if(k==="object"){var j=I;I=c(j,"anims",null),I&&(this.anims=this.anims.concat(I));var tt=c(j,"cycle",!1);this.randomAnim=!tt,this.animQuantity=c(j,"quantity",J)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(I){return I===void 0&&(I=!0),this.radial=I,this},addParticleBounds:function(I,Z,J,k,j,tt,ht,ot){if(typeof I=="object"){var st=I;I=st.x,Z=st.y,J=S(st,"w")?st.w:st.width,k=S(st,"h")?st.h:st.height}return this.addParticleProcessor(new G(I,Z,J,k,j,tt,ht,ot))},setParticleSpeed:function(I,Z){return Z===void 0&&(Z=I),this.ops.speedX.onChange(I),I===Z?this.ops.speedY.active=!1:this.ops.speedY.onChange(Z),this.radial=!0,this},setParticleScale:function(I,Z){return I===void 0&&(I=1),Z===void 0&&(Z=I),this.ops.scaleX.onChange(I),this.ops.scaleY.onChange(Z),this},setParticleGravity:function(I,Z){return this.gravityX=I,this.gravityY=Z,this},setParticleAlpha:function(I){return this.ops.alpha.onChange(I),this},setParticleTint:function(I){return this.ops.tint.onChange(I),this},setEmitterAngle:function(I){return this.ops.angle.onChange(I),this},setParticleLifespan:function(I){return this.ops.lifespan.onChange(I),this},setQuantity:function(I){return this.quantity=I,this},setFrequency:function(I,Z){return this.frequency=I,this.flowCounter=I>0?I:0,Z&&(this.quantity=Z),this},addDeathZone:function(I){Array.isArray(I)||(I=[I]);for(var Z,J=[],k=0;k<I.length;k++)if(Z=I[k],Z instanceof r)J.push(Z);else if(typeof Z.contains=="function")Z=new r(Z,!0),J.push(Z);else{var j=c(Z,"type","onEnter"),tt=c(Z,"source",null);if(tt&&typeof tt.contains=="function"){var ht=j==="onEnter";Z=new r(tt,ht),J.push(Z)}}return this.deathZones=this.deathZones.concat(J),J},removeDeathZone:function(I){return B(this.deathZones,I),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(I){Array.isArray(I)||(I=[I]);for(var Z,J=[],k=0;k<I.length;k++)if(Z=I[k],Z instanceof b||Z instanceof e)J.push(Z);else{var j=c(Z,"source",null);if(j){var tt=c(Z,"type","random");if(tt==="random"&&typeof j.getRandomPoint=="function")Z=new b(j),J.push(Z);else if(tt==="edge"&&typeof j.getPoints=="function"){var ht=c(Z,"quantity",1),ot=c(Z,"stepRate",0),st=c(Z,"yoyo",!1),ft=c(Z,"seamless",!0),ut=c(Z,"total",-1);Z=new e(j,ht,ot,st,ft,ut),J.push(Z)}}}return this.emitZones=this.emitZones.concat(J),J},removeEmitZone:function(I){return B(this.emitZones,I),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(I){var Z=this.emitZones,J=Z.length;if(J!==0){var k=Z[this.zoneIndex];k.getPoint(I),k.total>-1&&(this.zoneTotal++,this.zoneTotal===k.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===J&&(this.zoneIndex=0)))}},getDeathZone:function(I){for(var Z=this.deathZones,J=0;J<Z.length;J++){var k=Z[J];if(k.willKill(I))return this.emit(s.DEATH_ZONE,this,I,k),!0}return!1},setEmitZone:function(I){var Z;return isFinite(I)?Z=I:Z=this.emitZones.indexOf(I),Z>=0&&(this.zoneIndex=Z),this},addParticleProcessor:function(I){return this.processors.exists(I)||(I.emitter&&I.emitter.removeParticleProcessor(I),this.processors.add(I),I.emitter=this),I},removeParticleProcessor:function(I){return this.processors.exists(I)&&(this.processors.remove(I,!0),I.emitter=null),I},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(I){return this.addParticleProcessor(new f(I))},reserve:function(I){var Z=this.dead;if(this.maxParticles>0){var J=this.getParticleCount();J+I>this.maxParticles&&(I=this.maxParticles-(J+I))}for(var k=0;k<I;k++)Z.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(I,Z){return I===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof I=="function"&&(this.emitCallback=I,Z&&(this.emitCallbackScope=Z)),this},onParticleDeath:function(I,Z){return I===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof I=="function"&&(this.deathCallback=I,Z&&(this.deathCallbackScope=Z)),this},killAll:function(){for(var I=this.dead,Z=this.alive;Z.length>0;)I.push(Z.pop());return this},forEachAlive:function(I,Z){for(var J=this.alive,k=J.length,j=0;j<k;j++)I.call(Z,J[j],this);return this},forEachDead:function(I,Z){for(var J=this.dead,k=J.length,j=0;j<k;j++)I.call(Z,J[j],this);return this},start:function(I,Z){return I===void 0&&(I=0),this.emitting||(I>0&&this.fastForward(I),this.emitting=!0,this.resetCounters(this.frequency,!0),Z!==void 0&&(this.duration=Math.abs(Z)),this.emit(s.START,this)),this},stop:function(I){return I===void 0&&(I=!1),this.emitting&&(this.emitting=!1,I&&this.killAll(),this.emit(s.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(I,Z){return I===void 0&&(I=""),Z===void 0&&(Z=this.true),this.sortProperty=I,this.sortOrderAsc=Z,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(I){return this.sortProperty!==""?I=this.depthSortCallback:I=null,this.sortCallback=I,this},depthSort:function(){return Y(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(I,Z){var J=this.sortProperty;return this.sortOrderAsc?I[J]-Z[J]:Z[J]-I[J]},flow:function(I,Z,J){return Z===void 0&&(Z=1),this.emitting=!1,this.frequency=I,this.quantity=Z,J!==void 0&&(this.stopAfter=J),this.start()},explode:function(I,Z,J){this.frequency=-1,this.resetCounters(-1,!0);var k=this.emitParticle(I,Z,J);return this.emit(s.EXPLODE,this,k),k},emitParticleAt:function(I,Z,J){return this.emitParticle(J,I,Z)},emitParticle:function(I,Z,J){if(!this.atLimit()){I===void 0&&(I=this.ops.quantity.onEmit());for(var k=this.dead,j=this.stopAfter,tt=this.follow?this.follow.x+this.followOffset.x:Z,ht=this.follow?this.follow.y+this.followOffset.y:J,ot=0;ot<I;ot++){var st=k.pop();if(st||(st=new this.particleClass(this)),st.fire(tt,ht)?(this.particleBringToTop?this.alive.push(st):this.alive.unshift(st),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,st,this)):this.dead.push(st),j>0&&(this.stopCounter++,this.stopCounter>=j)||this.atLimit())break}return st}},fastForward:function(I,Z){Z===void 0&&(Z=1e3/60);var J=0;for(this.skipping=!0;J<Math.abs(I);)this.preUpdate(0,Z),J+=Z;return this.skipping=!1,this},preUpdate:function(I,Z){Z*=this.timeScale;var J=Z/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var k=this.getProcessors(),j=this.alive,tt=this.dead,ht=0,ot=[],st=j.length;for(ht=0;ht<st;ht++){var ft=j[ht];ft.update(Z,J,k)&&ot.push({index:ht,particle:ft})}if(st=ot.length,st>0){var ut=this.deathCallback,lt=this.deathCallbackScope;for(ht=st-1;ht>=0;ht--){var Tt=ot[ht];j.splice(Tt.index,1),tt.push(Tt.particle),ut&&ut.call(lt,Tt.particle),Tt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&j.length===0&&(this.completeFlag=0,this.emit(s.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=Z;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=Z,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(I){for(var Z=this.getWorldTransformMatrix(),J=this.alive,k=J.length,j=[],tt=0;tt<k;tt++){var ht=J[tt];w(I,ht.getBounds(Z))&&j.push(ht)}return j},getBounds:function(I,Z,J,k){I===void 0&&(I=0),Z===void 0&&(Z=0),J===void 0&&(J=1e3/60),k===void 0&&(k=new L);var j=this.getWorldTransformMatrix(),tt,ht,ot=this.alive,st=!1;if(k.setTo(0,0,0,0),Z>0){var ft=0;for(this.skipping=!0;ft<Math.abs(Z);){for(this.preUpdate(0,J),tt=0;tt<ot.length;tt++)ht=ot[tt].getBounds(j),st?P(k,ht):(st=!0,a(ht,k));ft+=J}this.skipping=!1}else for(tt=0;tt<ot.length;tt++)ht=ot[tt].getBounds(j),st?P(k,ht):(st=!0,a(ht,k));return I>0&&C(k,I,I),k},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(I){this.ops.x.onChange(I)}},particleY:{get:function(){return this.ops.y.current},set:function(I){this.ops.y.onChange(I)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(I){this.ops.accelerationX.onChange(I)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(I){this.ops.accelerationY.onChange(I)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(I){this.ops.maxVelocityX.onChange(I)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(I){this.ops.maxVelocityY.onChange(I)}},speed:{get:function(){return this.ops.speedX.current},set:function(I){this.ops.speedX.onChange(I),this.ops.speedY.onChange(I)}},speedX:{get:function(){return this.ops.speedX.current},set:function(I){this.ops.speedX.onChange(I)}},speedY:{get:function(){return this.ops.speedY.current},set:function(I){this.ops.speedY.onChange(I)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(I){this.ops.moveToX.onChange(I)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(I){this.ops.moveToY.onChange(I)}},bounce:{get:function(){return this.ops.bounce.current},set:function(I){this.ops.bounce.onChange(I)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(I){this.ops.scaleX.onChange(I)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(I){this.ops.scaleY.onChange(I)}},particleColor:{get:function(){return this.ops.color.current},set:function(I){this.ops.color.onChange(I)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(I){this.ops.color.setEase(I)}},particleTint:{get:function(){return this.ops.tint.current},set:function(I){this.ops.tint.onChange(I)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(I){this.ops.alpha.onChange(I)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(I){this.ops.lifespan.onChange(I)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(I){this.ops.angle.onChange(I)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(I){this.ops.rotate.onChange(I)}},quantity:{get:function(){return this.ops.quantity.current},set:function(I){this.ops.quantity.onChange(I)}},delay:{get:function(){return this.ops.delay.current},set:function(I){this.ops.delay.onChange(I)}},hold:{get:function(){return this.ops.hold.current},set:function(I){this.ops.hold.onChange(I)}},flowCounter:{get:function(){return this.counters[0]},set:function(I){this.counters[0]=I}},frameCounter:{get:function(){return this.counters[1]},set:function(I){this.counters[1]=I}},animCounter:{get:function(){return this.counters[2]},set:function(I){this.counters[2]=I}},elapsed:{get:function(){return this.counters[3]},set:function(I){this.counters[3]=I}},stopCounter:{get:function(){return this.counters[4]},set:function(I){this.counters[4]=I}},completeFlag:{get:function(){return this.counters[5]},set:function(I){this.counters[5]=I}},zoneIndex:{get:function(){return this.counters[6]},set:function(I){this.counters[6]=I}},zoneTotal:{get:function(){return this.counters[7]},set:function(I){this.counters[7]=I}},currentFrame:{get:function(){return this.counters[8]},set:function(I){this.counters[8]=I}},currentAnim:{get:function(){return this.counters[9]},set:function(I){this.counters[9]=I}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var I,Z=this.ops;for(I=0;I<X.length;I++){var J=X[I];Z[J].destroy()}for(I=0;I<this.alive.length;I++)this.alive[I].destroy();for(I=0;I<this.dead.length;I++)this.dead[I].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});p.exports=z}),9871:((p,M,t)=>{var h=t(59996),g=t(61340),o=new g,a=new g,r=new g,e=new g,n=function(u,s,l,c){var d=o,f=a,m=r,y=e;c?(y.loadIdentity(),y.multiply(c),y.translate(s.x,s.y),y.rotate(s.rotation),y.scale(s.scaleX,s.scaleY)):y.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY);var S=u.currentContext,C=l.roundPixels,E=l.alpha,P=s.alpha,A=s.alive,R=A.length,G=s.viewBounds;if(!(!s.visible||R===0||G&&!h(G,l.worldView))){s.sortCallback&&s.depthSort(),l.addToRenderList(s);var b=s.scrollFactorX,L=s.scrollFactorY;S.save(),S.globalCompositeOperation=u.blendModes[s.blendMode];for(var w=0;w<R;w++){var B=A[w],N=B.alpha*P*E;if(!(N<=0||B.scaleX===0||B.scaleY===0)){m.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),d.copyFrom(l.matrix),d.multiplyWithOffset(y,-l.scrollX*b,-l.scrollY*L),m.e=B.x,m.f=B.y,d.multiply(m,f);var Y=B.frame,U=Y.canvasData;if(U.width>0&&U.height>0){var W=-Y.halfWidth,O=-Y.halfHeight;S.globalAlpha=N,S.save(),f.setToContext(S),C&&(W=Math.round(W),O=Math.round(O)),S.imageSmoothingEnabled=!Y.source.scaleMode,S.drawImage(Y.source.image,U.x,U.y,U.width,U.height,W,O,U.width,U.height),S.restore()}}}S.restore()}};p.exports=n}),92730:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(95540),r=t(31600);g.register("particles",function(e,n){e===void 0&&(e={});var u=o(e,"key",null),s=a(e,"config",null),l=new r(this.scene,0,0,u);return n!==void 0&&(e.add=n),h(this.scene,l,e),s&&l.setConfig(s),l})}),676:((p,M,t)=>{var h=t(39429),g=t(31600);h.register("particles",function(o,a,r,e){return o!==void 0&&typeof o=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new g(this.scene,o,a,r,e))})}),90668:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(21188),o=t(9871),p.exports={renderWebGL:g,renderCanvas:o}}),21188:((p,M,t)=>{var h=t(59996),g=t(61340),o=t(70554),a=new g,r=new g,e=new g,n=new g,u=function(s,l,c,d){var f=s.pipelines.set(l.pipeline),m=a,y=r,S=e,C=n;d?(C.loadIdentity(),C.multiply(d),C.translate(l.x,l.y),C.rotate(l.rotation),C.scale(l.scaleX,l.scaleY)):C.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var E=o.getTintAppendFloatAlpha,P=c.alpha,A=l.alpha;s.pipelines.preBatch(l);var R=l.alive,G=R.length,b=l.viewBounds;if(!(G===0||b&&!h(b,c.worldView))){l.sortCallback&&l.depthSort(),c.addToRenderList(l),m.copyFrom(c.matrix),m.multiplyWithOffset(C,-c.scrollX*l.scrollFactorX,-c.scrollY*l.scrollFactorY),s.setBlendMode(l.blendMode),l.mask&&(l.mask.preRenderWebGL(s,l,c),s.pipelines.set(l.pipeline));for(var L=l.tintFill,w,B,N=0;N<G;N++){var Y=R[N],U=Y.alpha*A*P;if(!(U<=0||Y.scaleX===0||Y.scaleY===0)){S.applyITRS(Y.x,Y.y,Y.rotation,Y.scaleX,Y.scaleY),S.e=Y.x,S.f=Y.y,m.multiply(S,y);var W=Y.frame;W.glTexture!==B&&(B=W.glTexture,w=f.setGameObject(l,W));var O=-W.halfWidth,V=-W.halfHeight,X=y.setQuad(O,V,O+W.width,V+W.height),z=E(Y.tint,U);f.shouldFlush(6)&&(f.flush(),w=f.setGameObject(l,W)),f.batchQuad(l,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],W.u0,W.v0,W.u1,W.v1,z,z,z,z,L,B,w)}}l.mask&&l.mask.postRenderWebGL(s,c),s.pipelines.postBatch(l)}};p.exports=u}),20286:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){a===void 0&&(a=0),r===void 0&&(r=0),e===void 0&&(e=!0),this.emitter,this.x=a,this.y=r,this.active=e},update:function(){},destroy:function(){this.emitter=null}});p.exports=g}),9774:(p=>{p.exports="complete"}),812:(p=>{p.exports="deathzone"}),30522:(p=>{p.exports="explode"}),96695:(p=>{p.exports="start"}),18677:(p=>{p.exports="stop"}),20696:((p,M,t)=>{p.exports={COMPLETE:t(9774),DEATH_ZONE:t(812),EXPLODE:t(30522),START:t(96695),STOP:t(18677)}}),18404:((p,M,t)=>{p.exports={EmitterColorOp:t(76472),EmitterOp:t(44777),Events:t(20696),GravityWell:t(24502),Particle:t(56480),ParticleBounds:t(69601),ParticleEmitter:t(31600),ParticleProcessor:t(20286),Zones:t(21024)}}),26388:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.source=a,this.killOnEnter=r},willKill:function(o){var a=o.worldPosition,r=this.source.contains(a.x,a.y);return r&&this.killOnEnter||!r&&!this.killOnEnter}});p.exports=g}),19909:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n,u,s){n===void 0&&(n=!1),u===void 0&&(u=!0),s===void 0&&(s=-1),this.source=a,this.points=[],this.quantity=r,this.stepRate=e,this.yoyo=n,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.total=s,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var o=this.points[0],a=this.points[this.points.length-1];o.x===a.x&&o.y===a.y&&this.points.pop()}var r=this._length;return this._length=this.points.length,this._length<r&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(o){return this.source=o,this.updateSource()},getPoint:function(o){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(o.x=a.x,o.y=a.y)}});p.exports=g}),68875:((p,M,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(r){this.source=r,this._tempVec=new g,this.total=-1},getPoint:function(a){var r=this._tempVec;this.source.getRandomPoint(r),a.x=r.x,a.y=r.y}});p.exports=o}),21024:((p,M,t)=>{p.exports={DeathZone:t(26388),EdgeZone:t(19909),RandomZone:t(68875)}}),1159:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(68287),a=new h({Extends:o,Mixins:[g.PathFollower],initialize:function(e,n,u,s,l,c){o.call(this,e,u,s,l,c),this.path=n},preUpdate:function(r,e){this.anims.update(r,e),this.pathUpdate(r)}});p.exports=a}),90145:((p,M,t)=>{var h=t(39429),g=t(1159);h.register("follower",function(o,a,r,e,n){var u=new g(this.scene,o,a,r,e,n);return this.displayList.add(u),this.updateList.add(u),u})}),33663:((p,M,t)=>{var h=t(9674),g=t(83419),o=t(48803),a=t(90664),r=t(4703),e=t(45650),n=new g({Extends:r,initialize:function(s,l,c,d,f,m,y,S){d||(d="__DEFAULT"),r.call(this,s,l,c,d,f),this.type="Plane",this.anims=new h(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(m,y,S),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(u,s,l){u===void 0&&(u=8),s===void 0&&(s=8),l===void 0&&(l=!1);var c=!1;return l&&(c=!0),this.gridWidth=u,this.gridHeight=s,this.isTiled=l,this.clear(),o({mesh:this,widthSegments:u,heightSegments:s,isOrtho:!1,tile:l,flipY:c}),this},setSizeToFrame:function(u){u===void 0&&(u=!0);var s=this.frame;if(this.setPerspective(this.width/s.width,this.height/s.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!u)return this;var l=this.gridWidth,c=this.gridHeight,d=this.vertices,f=s.u0,m=s.u1,y=s.v0,S=s.v1,C,E,P=0;if(this.isTiled)for(y=s.v1,S=s.v0,E=0;E<c;E++)for(C=0;C<l;C++)d[P++].setUVs(f,S),d[P++].setUVs(f,y),d[P++].setUVs(m,S),d[P++].setUVs(f,y),d[P++].setUVs(m,y),d[P++].setUVs(m,S);else{var A=l+1,R=c+1,G=m-f,b=S-y,L=[];for(E=0;E<R;E++)for(C=0;C<A;C++){var w=f+G*(C/l),B=y+b*(E/c);L.push(w,B)}for(E=0;E<c;E++)for(C=0;C<l;C++){var N=(C+A*E)*2,Y=(C+A*(E+1))*2,U=(C+1+A*(E+1))*2,W=(C+1+A*E)*2;d[P++].setUVs(L[N],L[N+1]),d[P++].setUVs(L[Y],L[Y+1]),d[P++].setUVs(L[W],L[W+1]),d[P++].setUVs(L[Y],L[Y+1]),d[P++].setUVs(L[U],L[U+1]),d[P++].setUVs(L[W],L[W+1])}}return this},setViewHeight:function(u){u===void 0&&(u=this.frame.height);var s=this.fov*(Math.PI/180);this.viewPosition.z=this.height/u/Math.tan(s/2),this.dirtyCache[10]=1},createCheckerboard:function(u,s,l,c,d){u===void 0&&(u=16777215),s===void 0&&(s=255),l===void 0&&(l=255),c===void 0&&(c=255),d===void 0&&(d=128);for(var f=a(u),m=a(s),y=[],S=0;S<16;S++)for(var C=0;C<16;C++)S<8&&C<8||S>7&&C>7?y.push(f.r,f.g,f.b,l):y.push(m.r,m.g,m.b,c);var E=this.scene.sys.textures.addUint8Array(e(),new Uint8Array(y),16,16);return this.removeCheckerboard(),this.setTexture(E),this.setSizeToFrame(),this.setViewHeight(d),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(u,s){return this.anims.play(u,s)},playReverse:function(u,s){return this.anims.playReverse(u,s)},playAfterDelay:function(u,s){return this.anims.playAfterDelay(u,s)},playAfterRepeat:function(u,s){return this.anims.playAfterRepeat(u,s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},preUpdate:function(u,s){r.prototype.preUpdate.call(this,u,s),this.anims.update(u,s)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});p.exports=n}),56015:((p,M,t)=>{var h=t(25305),g=t(13059),o=t(44603),a=t(23568),r=t(35154),e=t(33663);o.register("plane",function(n,u){n===void 0&&(n={});var s=a(n,"key",null),l=a(n,"frame",null),c=r(n,"width",8),d=r(n,"height",8),f=r(n,"tile",!1),m=new e(this.scene,0,0,s,l,c,d,f);u!==void 0&&(n.add=u);var y=r(n,"checkerboard",null);if(y){var S=r(y,"color1",16777215),C=r(y,"color2",255),E=r(y,"alpha1",255),P=r(y,"alpha2",255),A=r(y,"height",128);m.createCheckerboard(S,C,E,P,A)}return h(this.scene,m,n),g(m,n),m})}),30985:((p,M,t)=>{var h=t(33663),g=t(39429);g.register("plane",function(o,a,r,e,n,u,s){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s))})}),80321:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(30100),r=t(36060),e=t(67277),n=new h({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible,e],initialize:function(s,l,c,d,f,m,y){d===void 0&&(d=16777215),f===void 0&&(f=128),m===void 0&&(m=1),y===void 0&&(y=.1),o.call(this,s,"PointLight"),this.initPipeline(r.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(l,c),this.color=a(d),this.intensity=m,this.attenuation=y,this.width=f*2,this.height=f*2,this._radius=f},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this.width=u*2,this.height=u*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});p.exports=n}),39829:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(80321);g.register("pointlight",function(r,e){r===void 0&&(r={});var n=o(r,"color",16777215),u=o(r,"radius",128),s=o(r,"intensity",1),l=o(r,"attenuation",.1),c=new a(this.scene,0,0,n,u,s,l);return e!==void 0&&(r.add=e),h(this.scene,c,r),c})}),71255:((p,M,t)=>{var h=t(39429),g=t(80321);h.register("pointlight",function(o,a,r,e,n,u){return this.displayList.add(new g(this.scene,o,a,r,e,n,u))})}),67277:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(57787),p.exports={renderWebGL:g,renderCanvas:o}}),57787:((p,M,t)=>{var h=t(91296),g=function(o,a,r,e){r.addToRenderList(a);var n=o.pipelines.set(a.pipeline),u=h(a,r,e).calc,s=a.width,l=a.height,c=-a._radius,d=-a._radius,f=c+s,m=d+l,y=u.getX(0,0),S=u.getY(0,0),C=u.getX(c,d),E=u.getY(c,d),P=u.getX(c,m),A=u.getY(c,m),R=u.getX(f,m),G=u.getY(f,m),b=u.getX(f,d),L=u.getY(f,d);o.pipelines.preBatch(a),n.batchPointLight(a,r,C,E,P,A,R,G,b,L,y,S),o.pipelines.postBatch(a)};p.exports=g}),591:((p,M,t)=>{var h=t(83419),g=t(81320),o=t(88571),a=new h({Extends:o,initialize:function(e,n,u,s,l,c){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=32),l===void 0&&(l=32),c===void 0&&(c=!0);var d=new g(e.sys.textures,"",s,l,c);o.call(this,e,n,u,d),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(r,e){this.width=r,this.height=e,this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=r,n.hitArea.height=e),this},resize:function(r,e,n){return this.texture.setSize(r,e,n),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(r){var e=this.texture;return e.key=r,e.manager.addDynamicTexture(e)&&(this._saved=!0),e},fill:function(r,e,n,u,s,l){return this.texture.fill(r,e,n,u,s,l),this},clear:function(){return this.texture.clear(),this},stamp:function(r,e,n,u,s){return this.texture.stamp(r,e,n,u,s),this},erase:function(r,e,n){return this.texture.erase(r,e,n),this},draw:function(r,e,n,u,s){return this.texture.draw(r,e,n,u,s),this},drawFrame:function(r,e,n,u,s,l){return this.texture.drawFrame(r,e,n,u,s,l),this},repeat:function(r,e,n,u,s,l,c,d,f){return this.texture.repeat(r,e,n,u,s,l,c,d,f),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(r,e,n,u,s){return this.texture.batchDraw(r,e,n,u,s),this},batchDrawFrame:function(r,e,n,u,s,l){return this.texture.batchDrawFrame(r,e,n,u,s,l),this},endDraw:function(r){return this.texture.endDraw(r),this},snapshotArea:function(r,e,n,u,s,l,c){return this.texture.snapshotArea(r,e,n,u,s,l,c),this},snapshot:function(r,e,n){return this.snapshotArea(0,0,this.width,this.height,r,e,n)},snapshotPixel:function(r,e,n){return this.snapshotArea(r,e,1,1,n,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});p.exports=a}),34495:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(591);g.register("renderTexture",function(r,e){r===void 0&&(r={});var n=o(r,"x",0),u=o(r,"y",0),s=o(r,"width",32),l=o(r,"height",32),c=new a(this.scene,n,u,s,l);return e!==void 0&&(r.add=e),h(this.scene,c,r),c})}),60505:((p,M,t)=>{var h=t(39429),g=t(591);h.register("renderTexture",function(o,a,r,e){return this.displayList.add(new g(this.scene,o,a,r,e))})}),77757:((p,M,t)=>{var h=t(9674),g=t(83419),o=t(31401),a=t(95643),r=t(36060),e=t(38745),n=t(26099),u=new g({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Flip,o.Mask,o.Pipeline,o.PostPipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,e],initialize:function(l,c,d,f,m,y,S,C,E){f===void 0&&(f="__DEFAULT"),y===void 0&&(y=2),S===void 0&&(S=!0),a.call(this,l,"Rope"),this.anims=new h(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=f==="__DEFAULT",this.dirty=!1,this.horizontal=S,this._flipX=!1,this._flipY=!1,this._perp=new n,this.debugCallback=null,this.debugGraphic=null,this.setTexture(f,m),this.setPosition(c,d),this.setSizeToFrame(),this.initPipeline(r.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,E),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,l){var c=this.anims.currentFrame;this.anims.update(s,l),this.anims.currentFrame!==c&&(this.updateUVs(),this.updateVertices())},play:function(s,l,c){return this.anims.play(s,l,c),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(s,l,c){return s===void 0&&(s=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(s,l,c))},setVertical:function(s,l,c){return s===void 0&&(s=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(s,l,c)):this},setTintFill:function(s){return s===void 0&&(s=!1),this.tintFill=s,this},setAlphas:function(s,l){var c=this.points.length;if(c<1)return this;var d=this.alphas;s===void 0?s=[1]:!Array.isArray(s)&&l===void 0&&(s=[s]);var f,m=0;if(l!==void 0)for(f=0;f<c;f++)m=f*2,d[m]=s,d[m+1]=l;else if(s.length===c)for(f=0;f<c;f++)m=f*2,d[m]=s[f],d[m+1]=s[f];else{var y=s[0];for(f=0;f<c;f++)m=f*2,s.length>m&&(y=s[m]),d[m]=y,s.length>m+1&&(y=s[m+1]),d[m+1]=y}return this},setColors:function(s){var l=this.points.length;if(l<1)return this;var c=this.colors;s===void 0?s=[16777215]:Array.isArray(s)||(s=[s]);var d,f=0;if(s.length===l)for(d=0;d<l;d++)f=d*2,c[f]=s[d],c[f+1]=s[d];else{var m=s[0];for(d=0;d<l;d++)f=d*2,s.length>f&&(m=s[f]),c[f]=m,s.length>f+1&&(m=s[f+1]),c[f+1]=m}return this},setPoints:function(s,l,c){if(s===void 0&&(s=2),typeof s=="number"){var d=s;d<2&&(d=2),s=[];var f,m,y;if(this.horizontal)for(y=-this.frame.halfWidth,m=this.frame.width/(d-1),f=0;f<d;f++)s.push({x:y+f*m,y:0});else for(y=-this.frame.halfHeight,m=this.frame.height/(d-1),f=0;f<d;f++)s.push({x:0,y:y+f*m})}var S=s.length,C=this.points.length;return S<1?(console.warn("Rope: Not enough points given"),this):(S===1&&(s.unshift({x:0,y:0}),S++),C!==S&&this.resizeArrays(S),this.dirty=!0,this.points=s,this.updateUVs(),l!=null&&this.setColors(l),c!=null&&this.setAlphas(c),this)},updateUVs:function(){for(var s=this.uv,l=this.points.length,c=this.frame.u0,d=this.frame.v0,f=this.frame.u1,m=this.frame.v1,y=(f-c)/(l-1),S=(m-d)/(l-1),C=0;C<l;C++){var E=C*4,P,A,R,G;this.horizontal?(this._flipX?(P=f-C*y,R=f-C*y):(P=c+C*y,R=c+C*y),this._flipY?(A=m,G=d):(A=d,G=m)):(this._flipX?(P=c,R=f):(P=f,R=c),this._flipY?(A=m-C*S,G=m-C*S):(A=d+C*S,G=d+C*S)),s[E+0]=P,s[E+1]=A,s[E+2]=R,s[E+3]=G}return this},resizeArrays:function(s){var l=this.colors,c=this.alphas;this.vertices=new Float32Array(s*4),this.uv=new Float32Array(s*4),l=new Uint32Array(s*2),c=new Float32Array(s*2);for(var d=0;d<s*2;d++)l[d]=16777215,c[d]=1;return this.colors=l,this.alphas=c,this.dirty=!0,this},updateVertices:function(){var s=this._perp,l=this.points,c=this.vertices,d=l.length;if(this.dirty=!1,!(d<1)){for(var f,m=l[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,S=0;S<d;S++){var C=l[S],E=S*4;S<d-1?f=l[S+1]:f=C,s.x=f.y-m.y,s.y=-(f.x-m.x);var P=s.length();s.x/=P,s.y/=P,s.x*=y,s.y*=y,c[E]=C.x+s.x,c[E+1]=C.y+s.y,c[E+2]=C.x-s.x,c[E+3]=C.y-s.y,m=C}return this}},setDebug:function(s,l){return this.debugGraphic=s,!s&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(s,l,c){var d=s.debugGraphic,f=c[0],m=c[1],y=c[2],S=c[3];d.lineBetween(f,m,y,S);for(var C=4;C<l;C+=4){var E=c[C+0],P=c[C+1],A=c[C+2],R=c[C+3];d.lineBetween(f,m,E,P),d.lineBetween(y,S,A,R),d.lineBetween(y,S,E,P),d.lineBetween(E,P,A,R),f=E,m=P,y=A,S=R}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(s){return this._flipX=s,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(s){return this._flipY=s,this.updateUVs()}}});p.exports=u}),95262:(p=>{var M=function(){};p.exports=M}),26209:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(35154),r=t(77757);g.register("rope",function(e,n){e===void 0&&(e={});var u=o(e,"key",null),s=o(e,"frame",null),l=o(e,"horizontal",!0),c=a(e,"points",void 0),d=a(e,"colors",void 0),f=a(e,"alphas",void 0),m=new r(this.scene,0,0,u,s,c,l,d,f);return n!==void 0&&(e.add=n),h(this.scene,m,e),m})}),96819:((p,M,t)=>{var h=t(77757),g=t(39429);g.register("rope",function(o,a,r,e,n,u,s,l){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s,l))})}),38745:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(20439),o=t(95262),p.exports={renderWebGL:g,renderCanvas:o}}),20439:((p,M,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,n){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline,r),s=h(r,e,n).calc,l=r.vertices,c=r.uv,d=r.colors,f=r.alphas,m=r.alpha,y=g.getTintAppendFloatAlpha,S=e.roundPixels,C=l.length,E=Math.floor(C*.5);u.flush(),a.pipelines.preBatch(r);var P=u.setGameObject(r),A=u.vertexViewF32,R=u.vertexViewU32,G=u.vertexCount*u.currentShader.vertexComponentCount-1,b=0,L=r.tintFill;r.dirty&&r.updateVertices();for(var w=r.debugCallback,B=[],N=0;N<C;N+=2){var Y=l[N+0],U=l[N+1],W=Y*s.a+U*s.c+s.e,O=Y*s.b+U*s.d+s.f;S&&(W=Math.round(W),O=Math.round(O)),A[++G]=W,A[++G]=O,A[++G]=c[N+0],A[++G]=c[N+1],A[++G]=P,A[++G]=L,R[++G]=y(d[b],e.alpha*(f[b]*m)),b++,w&&(B[N+0]=W,B[N+1]=O)}w&&w.call(r,r,C,B),u.vertexCount+=E,u.currentBatch.count=u.vertexCount-u.currentBatch.start,a.pipelines.postBatch(r)};p.exports=o}),20071:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(95540),r=t(79291),e=t(61622),n=t(25479),u=t(61340),s=t(95428),l=t(92503),c=new h({Extends:o,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,n],initialize:function(f,m,y,S,C,E,P,A){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=128),E===void 0&&(E=128),o.call(this,f,"Shader"),this.blendMode=-1,this.shader;var R=f.sys.renderer;this.renderer=R,this.gl=R.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=R.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=R.width,this._rendererHeight=R.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(y,S),this.setSize(C,E),this.setOrigin(.5,.5),this.setShader(m,P,A),this.renderer.on(l.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(d){return this.renderToTexture?!0:!(o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},setRenderToTexture:function(d,f){if(!this.renderToTexture){var m=this.width,y=this.height,S=this.renderer;this.glTexture=S.createTextureFromSource(null,m,y,0),this.framebuffer=S.createFramebuffer(m,y,this.glTexture,!1),this._rendererWidth=m,this._rendererHeight=y,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),d&&(this.texture=this.scene.sys.textures.addGLTexture(d,this.glTexture))}return this.shader&&(S.pipelines.clear(),this.load(),this.flush(),S.pipelines.rebind()),this},setShader:function(d,f,m){if(this.renderer.contextLost)return this._deferSetShader={key:d,textures:f,textureData:m},this;if(f===void 0&&(f=[]),typeof d=="string"){var y=this.scene.sys.cache.shader;if(!y.has(d))return console.warn("Shader missing: "+d),this;this.shader=y.get(d)}else this.shader=d;var S=this.gl,C=this.renderer;this.program&&C.deleteProgram(this.program);var E=C.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);S.uniformMatrix4fv(S.getUniformLocation(E.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),S.uniformMatrix4fv(S.getUniformLocation(E.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),S.uniform2f(S.getUniformLocation(E.webGLProgram,"uResolution"),this.width,this.height),this.program=E;var P=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[P.getFullYear(),P.getMonth(),P.getDate(),P.getHours()*60*60+P.getMinutes()*60+P.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=r(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var R=0;R<4;R++)f[R]&&this.setSampler2D("iChannel"+R,f[R],R,m);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(d){return this.pointer=d,this},projOrtho:function(d,f,m,y){if(this.renderer.contextLost){this._deferProjOrtho={left:d,right:f,bottom:m,top:y};return}var S=-1e3,C=1e3,E=1/(d-f),P=1/(m-y),A=1/(S-C),R=this.projectionMatrix;R[0]=-2*E,R[5]=-2*P,R[10]=2*A,R[12]=(d+f)*E,R[13]=(y+m)*P,R[14]=(C+S)*A;var G=this.program,b=this.gl,L=this.renderer;L.setProgram(G),b.uniformMatrix4fv(b.getUniformLocation(G.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=f,this._rendererHeight=m},initUniforms:function(){var d=this.renderer.glFuncMap,f=this.program;this._textureCount=0;for(var m in this.uniforms){var y=this.uniforms[m],S=y.type,C=d[S];y.uniformLocation=this.renderer.createUniformLocation(f,m),S!=="sampler2D"&&(y.glMatrix=C.matrix,y.glValueLength=C.length,y.glFunc=C.func)}},setSampler2DBuffer:function(d,f,m,y,S,C){S===void 0&&(S=0),C===void 0&&(C={});var E=this.uniforms[d];return E.value=f,C.width=m,C.height=y,E.textureData=C,this._textureCount=S,this.initSampler2D(E),this},setSampler2D:function(d,f,m,y){m===void 0&&(m=0);var S=this.scene.sys.textures;if(S.exists(f)){var C=S.getFrame(f);if(C.glTexture&&C.glTexture.isRenderTexture)return this.setSampler2DBuffer(d,C.glTexture,C.width,C.height,m,y);var E=this.uniforms[d],P=C.source;E.textureKey=f,E.source=P.image,E.value=C.glTexture,P.isGLTexture&&(y||(y={}),y.width=P.width,y.height=P.height),y&&(E.textureData=y),this._textureCount=m,this.initSampler2D(E)}return this},setUniform:function(d,f){return e(this.uniforms,d,f),this},getUniform:function(d){return a(this.uniforms,d,null)},setChannel0:function(d,f){return this.setSampler2D("iChannel0",d,0,f)},setChannel1:function(d,f){return this.setSampler2D("iChannel1",d,1,f)},setChannel2:function(d,f){return this.setSampler2D("iChannel2",d,2,f)},setChannel3:function(d,f){return this.setSampler2D("iChannel3",d,3,f)},initSampler2D:function(d){if(d.value){var f=d.textureData;if(f&&!d.value.isRenderTexture){var m=this.gl,y=d.value,S=m[a(f,"magFilter","linear").toUpperCase()],C=m[a(f,"minFilter","linear").toUpperCase()],E=m[a(f,"wrapS","repeat").toUpperCase()],P=m[a(f,"wrapT","repeat").toUpperCase()],A=m[a(f,"format","rgba").toUpperCase()],R=a(f,"flipY",!1),G=a(f,"width",y.width),b=a(f,"height",y.height),L=a(f,"source",y.pixels);f.repeat&&(E=m.REPEAT,P=m.REPEAT),f.width&&(L=null),y.update(L,G,b,R,E,P,C,S,A)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var d=this.gl,f=this.uniforms,m,y,S,C,E,P=0;for(var A in f)m=f[A],S=m.glFunc,y=m.glValueLength,C=m.uniformLocation,E=m.value,E!==null&&(y===1?m.glMatrix?S.call(d,C.webGLUniformLocation,m.transpose,E):S.call(d,C.webGLUniformLocation,E):y===2?S.call(d,C.webGLUniformLocation,E.x,E.y):y===3?S.call(d,C.webGLUniformLocation,E.x,E.y,E.z):y===4?S.call(d,C.webGLUniformLocation,E.x,E.y,E.z,E.w):m.type==="sampler2D"&&(d.activeTexture(d.TEXTURE0+P),d.bindTexture(d.TEXTURE_2D,E.webGLTexture),d.uniform1i(C.webGLUniformLocation,P),P++))},load:function(d){var f=this.gl,m=this.width,y=this.height,S=this.renderer,C=this.program,E=this.viewMatrix;if(!this.renderToTexture){var P=-this._displayOriginX,A=-this._displayOriginY;E[0]=d[0],E[1]=d[1],E[4]=d[2],E[5]=d[3],E[8]=d[4],E[9]=d[5],E[12]=E[0]*P+E[4]*A,E[13]=E[1]*P+E[5]*A}f.useProgram(C.webGLProgram),f.uniformMatrix4fv(f.getUniformLocation(C.webGLProgram,"uViewMatrix"),!1,E),f.uniformMatrix4fv(f.getUniformLocation(C.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),f.uniform2f(f.getUniformLocation(C.webGLProgram,"uResolution"),this.width,this.height);var R=this.uniforms,G=R.resolution;G.value.x=m,G.value.y=y,R.time.value=S.game.loop.getDuration();var b=this.pointer;if(b){var L=R.mouse,w=b.x/m,B=1-b.y/y;L.value.x=w.toFixed(2),L.value.y=B.toFixed(2)}this.syncUniforms()},flush:function(){var d=this.width,f=this.height,m=this.program,y=this.gl,S=this.vertexBuffer,C=this.renderer,E=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(C.setFramebuffer(this.framebuffer),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT)),y.bindBuffer(y.ARRAY_BUFFER,S.webGLBuffer);var P=y.getAttribLocation(m.webGLProgram,"inPosition");P!==-1&&(y.enableVertexAttribArray(P),y.vertexAttribPointer(P,2,y.FLOAT,!1,E,0));var A=this.vertexViewF32;A[3]=f,A[4]=d,A[5]=f,A[8]=d,A[9]=f,A[10]=d;var R=6;y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,R*E)),y.drawArrays(y.TRIANGLES,0,R),this.renderToTexture&&C.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var d=this._deferSetShader.key,f=this._deferSetShader.textures,m=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(d,f,m)}if(this._deferProjOrtho!==null){var y=this._deferProjOrtho.left,S=this._deferProjOrtho.right,C=this._deferProjOrtho.bottom,E=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(y,S,C,E)}},preDestroy:function(){var d=this.renderer;d.off(l.RESTORE_WEBGL,this.onContextRestored,this),d.deleteProgram(this.program),d.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(d.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),s(this.uniforms,function(f){d.deleteUniformLocation(f.uniformLocation),f.uniformLocation=null})}});p.exports=c}),80464:(p=>{var M=function(){};p.exports=M}),54935:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(20071);g.register("shader",function(r,e){r===void 0&&(r={});var n=o(r,"key",null),u=o(r,"x",0),s=o(r,"y",0),l=o(r,"width",128),c=o(r,"height",128),d=new a(this.scene,n,u,s,l,c);return e!==void 0&&(r.add=e),h(this.scene,d,r),d})}),74177:((p,M,t)=>{var h=t(20071),g=t(39429);g.register("shader",function(o,a,r,e,n,u,s){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s))})}),25479:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(19257),o=t(80464),p.exports={renderWebGL:g,renderCanvas:o}}),19257:((p,M,t)=>{var h=t(91296),g=function(o,a,r,e){if(a.shader){if(r.addToRenderList(a),o.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var n=h(a,r,e).calc;(o.width!==a._rendererWidth||o.height!==a._rendererHeight)&&a.projOrtho(0,o.width,o.height,0),a.load(n.matrix),a.flush()}o.pipelines.rebind()}};p.exports=g}),10441:((p,M,t)=>{var h=t(70554),g=function(o,a,r,e,n,u){for(var s=h.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*e),l=r.pathData,c=r.pathIndexes,d=0;d<c.length;d+=3){var f=c[d]*2,m=c[d+1]*2,y=c[d+2]*2,S=l[f+0]-n,C=l[f+1]-u,E=l[m+0]-n,P=l[m+1]-u,A=l[y+0]-n,R=l[y+1]-u,G=a.getX(S,C),b=a.getY(S,C),L=a.getX(E,P),w=a.getY(E,P),B=a.getX(A,R),N=a.getY(A,R);o.batchTri(r,G,b,L,w,B,N,0,0,1,1,s,s,s,2)}};p.exports=g}),65960:(p=>{var M=function(t,h,g,o){var a=g||h.fillColor,r=o||h.fillAlpha,e=(a&16711680)>>>16,n=(a&65280)>>>8,u=a&255;t.fillStyle="rgba("+e+","+n+","+u+","+r+")"};p.exports=M}),75177:(p=>{var M=function(t,h,g,o){var a=g||h.strokeColor,r=o||h.strokeAlpha,e=(a&16711680)>>>16,n=(a&65280)>>>8,u=a&255;t.strokeStyle="rgba("+e+","+n+","+u+","+r+")",t.lineWidth=h.lineWidth};p.exports=M}),17803:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(23031),r=new h({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(n,u,s){u===void 0&&(u="Shape"),o.call(this,n,u),this.geom=s,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(e,n){return n===void 0&&(n=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(e,n,u){return u===void 0&&(u=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=n,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,n){return this.width=e,this.height=n,this},setDisplaySize:function(e,n){return this.displayWidth=e,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});p.exports=r}),34682:((p,M,t)=>{var h=t(70554),g=function(o,a,r,e,n){var u=o.strokeTint,s=h.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*r);u.TL=s,u.TR=s,u.BL=s,u.BR=s;var l=a.pathData,c=l.length-1,d=a.lineWidth,f=d/2,m=l[0]-e,y=l[1]-n;a.closePath||(c-=2);for(var S=2;S<c;S+=2){var C=l[S]-e,E=l[S+1]-n;o.batchLine(m,y,C,E,f,f,d,S-2,a.closePath?S===c-1:!1),m=C,y=E}};p.exports=g}),23629:((p,M,t)=>{var h=t(13609),g=t(83419),o=t(39506),a=t(94811),r=t(96503),e=t(36383),n=t(17803),u=new g({Extends:n,Mixins:[h],initialize:function(l,c,d,f,m,y,S,C,E){c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=128),m===void 0&&(m=0),y===void 0&&(y=360),S===void 0&&(S=!1),n.call(this,l,"Arc",new r(0,0,f)),this._startAngle=m,this._endAngle=y,this._anticlockwise=S,this._iterations=.01,this.setPosition(c,d);var P=this.geom.radius*2;this.setSize(P,P),C!==void 0&&this.setFillStyle(C,E),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(s){this._iterations=s,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(s){this.geom.radius=s;var l=s*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(s){this._startAngle=s,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(s){this._endAngle=s,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(s){this._anticlockwise=s,this.updateData()}},setRadius:function(s){return this.radius=s,this},setIterations:function(s){return s===void 0&&(s=.01),this.iterations=s,this},setStartAngle:function(s,l){return this._startAngle=s,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(s,l){return this._endAngle=s,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var s=this._iterations,l=s,c=this.geom.radius,d=o(this._startAngle),f=o(this._endAngle),m=this._anticlockwise,y=c,S=c;f-=d,m?f<-e.PI2?f=-e.PI2:f>0&&(f=-e.PI2+f%e.PI2):f>e.PI2?f=e.PI2:f<0&&(f=e.PI2+f%e.PI2);for(var C=[y+Math.cos(d)*c,S+Math.sin(d)*c],E;l<1;)E=f*l+d,C.push(y+Math.cos(E)*c,S+Math.sin(E)*c),l+=s;return E=f+d,C.push(y+Math.cos(E)*c,S+Math.sin(E)*c),C.push(y+Math.cos(d)*c,S+Math.sin(d)*c),this.pathIndexes=a(C),this.pathData=C,this}});p.exports=u}),42542:((p,M,t)=>{var h=t(39506),g=t(65960),o=t(75177),a=t(20926),r=function(e,n,u,s){u.addToRenderList(n);var l=e.currentContext;if(a(e,l,n,u,s)){var c=n.radius;l.beginPath(),l.arc(c-n.originX*(c*2),c-n.originY*(c*2),c,h(n._startAngle),h(n._endAngle),n.anticlockwise),n.closePath&&l.closePath(),n.isFilled&&(g(l,n),l.fill()),n.isStroked&&(o(l,n),l.stroke()),l.restore()}};p.exports=r}),42563:((p,M,t)=>{var h=t(23629),g=t(39429);g.register("arc",function(o,a,r,e,n,u,s,l){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s,l))}),g.register("circle",function(o,a,r,e,n){return this.displayList.add(new h(this.scene,o,a,r,0,360,!1,e,n))})}),13609:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(41447),o=t(42542),p.exports={renderWebGL:g,renderCanvas:o}}),41447:((p,M,t)=>{var h=t(91296),g=t(10441),o=t(34682),a=function(r,e,n,u){n.addToRenderList(e);var s=r.pipelines.set(e.pipeline),l=h(e,n,u),c=s.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=n.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&g(s,c,e,m,d,f),e.isStroked&&o(s,e,m,d,f),r.pipelines.postBatch(e)};p.exports=a}),89:((p,M,t)=>{var h=t(83419),g=t(33141),o=t(94811),a=t(87841),r=t(17803),e=new h({Extends:r,Mixins:[g],initialize:function(u,s,l,c,d,f){s===void 0&&(s=0),l===void 0&&(l=0),r.call(this,u,"Curve",c),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(s,l),d!==void 0&&this.setFillStyle(d,f),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,u=this._smoothness;this.geom.getBounds(n,u),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var s=[],l=this.geom.getPoints(u),c=0;c<l.length;c++)s.push(l[c].x,l[c].y);return s.push(l[0].x,l[0].y),this.pathIndexes=o(s),this.pathData=s,this}});p.exports=e}),3170:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,n,u){n.addToRenderList(e);var s=r.currentContext;if(o(r,s,e,n,u)){var l=e._displayOriginX+e._curveBounds.x,c=e._displayOriginY+e._curveBounds.y,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;s.beginPath(),s.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;s.lineTo(C,E)}e.closePath&&s.closePath(),e.isFilled&&(h(s,e),s.fill()),e.isStroked&&(g(s,e),s.stroke()),s.restore()}};p.exports=a}),40511:((p,M,t)=>{var h=t(39429),g=t(89);h.register("curve",function(o,a,r,e,n){return this.displayList.add(new g(this.scene,o,a,r,e,n))})}),33141:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(53987),o=t(3170),p.exports={renderWebGL:g,renderCanvas:o}}),53987:((p,M,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,n,u){n.addToRenderList(e);var s=r.pipelines.set(e.pipeline),l=g(e,n,u),c=s.calcMatrix.copyFrom(l.calc),d=e._displayOriginX+e._curveBounds.x,f=e._displayOriginY+e._curveBounds.y,m=n.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(s,c,e,m,d,f),e.isStroked&&o(s,e,m,d,f),r.pipelines.postBatch(e)};p.exports=a}),19921:((p,M,t)=>{var h=t(83419),g=t(94811),o=t(54205),a=t(8497),r=t(17803),e=new h({Extends:r,Mixins:[o],initialize:function(u,s,l,c,d,f,m){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=128),d===void 0&&(d=128),r.call(this,u,"Ellipse",new a(c/2,d/2,c,d)),this._smoothness=64,this.setPosition(s,l),this.width=c,this.height=d,f!==void 0&&this.setFillStyle(f,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSize:function(n,u){return this.width=n,this.height=u,this.geom.setPosition(n/2,u/2),this.geom.setSize(n,u),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){for(var n=[],u=this.geom.getPoints(this._smoothness),s=0;s<u.length;s++)n.push(u[s].x,u[s].y);return n.push(u[0].x,u[0].y),this.pathIndexes=g(n),this.pathData=n,this}});p.exports=e}),7930:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,n,u){n.addToRenderList(e);var s=r.currentContext;if(o(r,s,e,n,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;s.beginPath(),s.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;s.lineTo(C,E)}s.closePath(),e.isFilled&&(h(s,e),s.fill()),e.isStroked&&(g(s,e),s.stroke()),s.restore()}};p.exports=a}),1543:((p,M,t)=>{var h=t(19921),g=t(39429);g.register("ellipse",function(o,a,r,e,n,u){return this.displayList.add(new h(this.scene,o,a,r,e,n,u))})}),54205:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(19467),o=t(7930),p.exports={renderWebGL:g,renderCanvas:o}}),19467:((p,M,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,n,u){n.addToRenderList(e);var s=r.pipelines.set(e.pipeline),l=g(e,n,u),c=s.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=n.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(s,c,e,m,d,f),e.isStroked&&o(s,e,m,d,f),r.pipelines.postBatch(e)};p.exports=a}),30479:((p,M,t)=>{var h=t(83419),g=t(17803),o=t(26015),a=new h({Extends:g,Mixins:[o],initialize:function(e,n,u,s,l,c,d,f,m,y,S){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=128),l===void 0&&(l=128),c===void 0&&(c=32),d===void 0&&(d=32),g.call(this,e,"Grid",null),this.cellWidth=c,this.cellHeight=d,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(n,u),this.setSize(s,l),this.setFillStyle(f,m),y!==void 0&&this.setOutlineStyle(y,S),this.updateDisplayOrigin()},setFillStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showCells=!1:(this.fillColor=r,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showAltCells=!1:(this.altFillColor=r,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showOutline=!1:(this.outlineFillColor=r,this.outlineFillAlpha=e,this.showOutline=!0),this}});p.exports=a}),49912:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,n,u){n.addToRenderList(e);var s=r.currentContext;if(o(r,s,e,n,u)){var l=-e._displayOriginX,c=-e._displayOriginY,d=n.alpha*e.alpha,f=e.width,m=e.height,y=e.cellWidth,S=e.cellHeight,C=Math.ceil(f/y),E=Math.ceil(m/S),P=y,A=S,R=y-(C*y-f),G=S-(E*S-m),b=e.showCells,L=e.showAltCells,w=e.showOutline,B=0,N=0,Y=0,U=0,W=0;if(w&&(P--,A--,R===y&&R--,G===S&&G--),b&&e.fillAlpha>0)for(h(s,e),N=0;N<E;N++)for(L&&(Y=N%2),B=0;B<C;B++){if(L&&Y){Y=0;continue}Y++,U=B<C-1?P:R,W=N<E-1?A:G,s.fillRect(l+B*y,c+N*S,U,W)}if(L&&e.altFillAlpha>0)for(h(s,e,e.altFillColor,e.altFillAlpha*d),N=0;N<E;N++)for(L&&(Y=N%2),B=0;B<C;B++){if(L&&!Y){Y=1;continue}Y=0,U=B<C-1?P:R,W=N<E-1?A:G,s.fillRect(l+B*y,c+N*S,U,W)}if(w&&e.outlineFillAlpha>0){for(g(s,e,e.outlineFillColor,e.outlineFillAlpha*d),B=1;B<C;B++){var O=B*y;s.beginPath(),s.moveTo(O+l,c),s.lineTo(O+l,m+c),s.stroke()}for(N=1;N<E;N++){var V=N*S;s.beginPath(),s.moveTo(l,V+c),s.lineTo(l+f,V+c),s.stroke()}}s.restore()}};p.exports=a}),34137:((p,M,t)=>{var h=t(39429),g=t(30479);h.register("grid",function(o,a,r,e,n,u,s,l,c,d){return this.displayList.add(new g(this.scene,o,a,r,e,n,u,s,l,c,d))})}),26015:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(46161),o=t(49912),p.exports={renderWebGL:g,renderCanvas:o}}),46161:((p,M,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,n){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,e,n),l=u.calcMatrix.copyFrom(s.calc);l.translate(-r._displayOriginX,-r._displayOriginY);var c=e.alpha*r.alpha,d=r.width,f=r.height,m=r.cellWidth,y=r.cellHeight,S=Math.ceil(d/m),C=Math.ceil(f/y),E=m,P=y,A=m-(S*m-d),R=y-(C*y-f),G,b,L=r.showCells,w=r.showAltCells,B=r.showOutline,N=0,Y=0,U=0,W=0,O=0;if(B&&(E--,P--,A===m&&A--,R===y&&R--),a.pipelines.preBatch(r),L&&r.fillAlpha>0)for(G=u.fillTint,b=g.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*c),G.TL=b,G.TR=b,G.BL=b,G.BR=b,Y=0;Y<C;Y++)for(w&&(U=Y%2),N=0;N<S;N++){if(w&&U){U=0;continue}U++,W=N<S-1?E:A,O=Y<C-1?P:R,u.batchFillRect(N*m,Y*y,W,O)}if(w&&r.altFillAlpha>0)for(G=u.fillTint,b=g.getTintAppendFloatAlpha(r.altFillColor,r.altFillAlpha*c),G.TL=b,G.TR=b,G.BL=b,G.BR=b,Y=0;Y<C;Y++)for(w&&(U=Y%2),N=0;N<S;N++){if(w&&!U){U=1;continue}U=0,W=N<S-1?E:A,O=Y<C-1?P:R,u.batchFillRect(N*m,Y*y,W,O)}if(B&&r.outlineFillAlpha>0){var V=u.strokeTint,X=g.getTintAppendFloatAlpha(r.outlineFillColor,r.outlineFillAlpha*c);for(V.TL=X,V.TR=X,V.BL=X,V.BR=X,N=1;N<S;N++){var z=N*m;u.batchLine(z,0,z,f,r.lineWidth,r.lineWidth,1,0,!1)}for(Y=1;Y<C;Y++){var I=Y*y;u.batchLine(0,I,d,I,r.lineWidth,r.lineWidth,1,0,!1)}}a.pipelines.postBatch(r)};p.exports=o}),61475:((p,M,t)=>{var h=t(99651),g=t(83419),o=t(17803),a=new g({Extends:o,Mixins:[h],initialize:function(e,n,u,s,l,c,d,f){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=48),l===void 0&&(l=32),c===void 0&&(c=15658734),d===void 0&&(d=10066329),f===void 0&&(f=13421772),o.call(this,e,"IsoBox",null),this.projection=4,this.fillTop=c,this.fillLeft=d,this.fillRight=f,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(n,u),this.setSize(s,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setFaces:function(r,e,n){return r===void 0&&(r=!0),e===void 0&&(e=!0),n===void 0&&(n=!0),this.showTop=r,this.showLeft=e,this.showRight=n,this},setFillStyle:function(r,e,n){return this.fillTop=r,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});p.exports=a}),11508:((p,M,t)=>{var h=t(65960),g=t(20926),o=function(a,r,e,n){e.addToRenderList(r);var u=a.currentContext;if(g(a,u,r,e,n)&&r.isFilled){var s=r.width,l=r.height,c=s/2,d=s/r.projection;r.showTop&&(h(u,r,r.fillTop),u.beginPath(),u.moveTo(-c,-l),u.lineTo(0,-d-l),u.lineTo(c,-l),u.lineTo(c,-1),u.lineTo(0,d-1),u.lineTo(-c,-1),u.lineTo(-c,-l),u.fill()),r.showLeft&&(h(u,r,r.fillLeft),u.beginPath(),u.moveTo(-c,0),u.lineTo(0,d),u.lineTo(0,d-l),u.lineTo(-c,-l),u.lineTo(-c,0),u.fill()),r.showRight&&(h(u,r,r.fillRight),u.beginPath(),u.moveTo(c,0),u.lineTo(0,d),u.lineTo(0,d-l),u.lineTo(c,-l),u.lineTo(c,0),u.fill()),u.restore()}};p.exports=o}),3933:((p,M,t)=>{var h=t(39429),g=t(61475);h.register("isobox",function(o,a,r,e,n,u,s){return this.displayList.add(new g(this.scene,o,a,r,e,n,u,s))})}),99651:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(68149),o=t(11508),p.exports={renderWebGL:g,renderCanvas:o}}),68149:((p,M,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,n){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,e,n),l=u.calcMatrix.copyFrom(s.calc),c=r.width,d=r.height,f=c/2,m=c/r.projection,y=e.alpha*r.alpha;if(r.isFilled){var S,C,E,P,A,R,G,b,L;a.pipelines.preBatch(r),r.showTop&&(S=g.getTintAppendFloatAlpha(r.fillTop,y),C=l.getX(-f,-d),E=l.getY(-f,-d),P=l.getX(0,-m-d),A=l.getY(0,-m-d),R=l.getX(f,-d),G=l.getY(f,-d),b=l.getX(0,m-d),L=l.getY(0,m-d),u.batchQuad(r,C,E,P,A,R,G,b,L,0,0,1,1,S,S,S,S,2)),r.showLeft&&(S=g.getTintAppendFloatAlpha(r.fillLeft,y),C=l.getX(-f,0),E=l.getY(-f,0),P=l.getX(0,m),A=l.getY(0,m),R=l.getX(0,m-d),G=l.getY(0,m-d),b=l.getX(-f,-d),L=l.getY(-f,-d),u.batchQuad(r,C,E,P,A,R,G,b,L,0,0,1,1,S,S,S,S,2)),r.showRight&&(S=g.getTintAppendFloatAlpha(r.fillRight,y),C=l.getX(f,0),E=l.getY(f,0),P=l.getX(0,m),A=l.getY(0,m),R=l.getX(0,m-d),G=l.getY(0,m-d),b=l.getX(f,-d),L=l.getY(f,-d),u.batchQuad(r,C,E,P,A,R,G,b,L,0,0,1,1,S,S,S,S,2)),a.pipelines.postBatch(r)}};p.exports=o}),16933:((p,M,t)=>{var h=t(83419),g=t(60561),o=t(17803),a=new h({Extends:o,Mixins:[g],initialize:function(e,n,u,s,l,c,d,f,m){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=48),l===void 0&&(l=32),c===void 0&&(c=!1),d===void 0&&(d=15658734),f===void 0&&(f=10066329),m===void 0&&(m=13421772),o.call(this,e,"IsoTriangle",null),this.projection=4,this.fillTop=d,this.fillLeft=f,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=c,this.isFilled=!0,this.setPosition(n,u),this.setSize(s,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setReversed:function(r){return this.isReversed=r,this},setFaces:function(r,e,n){return r===void 0&&(r=!0),e===void 0&&(e=!0),n===void 0&&(n=!0),this.showTop=r,this.showLeft=e,this.showRight=n,this},setFillStyle:function(r,e,n){return this.fillTop=r,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});p.exports=a}),79590:((p,M,t)=>{var h=t(65960),g=t(20926),o=function(a,r,e,n){e.addToRenderList(r);var u=a.currentContext;if(g(a,u,r,e,n)&&r.isFilled){var s=r.width,l=r.height,c=s/2,d=s/r.projection,f=r.isReversed;r.showTop&&f&&(h(u,r,r.fillTop),u.beginPath(),u.moveTo(-c,-l),u.lineTo(0,-d-l),u.lineTo(c,-l),u.lineTo(0,d-l),u.fill()),r.showLeft&&(h(u,r,r.fillLeft),u.beginPath(),f?(u.moveTo(-c,-l),u.lineTo(0,d),u.lineTo(0,d-l)):(u.moveTo(-c,0),u.lineTo(0,d),u.lineTo(0,d-l)),u.fill()),r.showRight&&(h(u,r,r.fillRight),u.beginPath(),f?(u.moveTo(c,-l),u.lineTo(0,d),u.lineTo(0,d-l)):(u.moveTo(c,0),u.lineTo(0,d),u.lineTo(0,d-l)),u.fill()),u.restore()}};p.exports=o}),49803:((p,M,t)=>{var h=t(39429),g=t(16933);h.register("isotriangle",function(o,a,r,e,n,u,s,l){return this.displayList.add(new g(this.scene,o,a,r,e,n,u,s,l))})}),60561:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(51503),o=t(79590),p.exports={renderWebGL:g,renderCanvas:o}}),51503:((p,M,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,n){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,e,n),l=u.calcMatrix.copyFrom(s.calc),c=r.width,d=r.height,f=c/2,m=c/r.projection,y=r.isReversed,S=e.alpha*r.alpha;if(r.isFilled){a.pipelines.preBatch(r);var C,E,P,A,R,G,b;if(r.showTop&&y){C=g.getTintAppendFloatAlpha(r.fillTop,S),E=l.getX(-f,-d),P=l.getY(-f,-d),A=l.getX(0,-m-d),R=l.getY(0,-m-d),G=l.getX(f,-d),b=l.getY(f,-d);var L=l.getX(0,m-d),w=l.getY(0,m-d);u.batchQuad(r,E,P,A,R,G,b,L,w,0,0,1,1,C,C,C,C,2)}r.showLeft&&(C=g.getTintAppendFloatAlpha(r.fillLeft,S),y?(E=l.getX(-f,-d),P=l.getY(-f,-d),A=l.getX(0,m),R=l.getY(0,m),G=l.getX(0,m-d),b=l.getY(0,m-d)):(E=l.getX(-f,0),P=l.getY(-f,0),A=l.getX(0,m),R=l.getY(0,m),G=l.getX(0,m-d),b=l.getY(0,m-d)),u.batchTri(r,E,P,A,R,G,b,0,0,1,1,C,C,C,2)),r.showRight&&(C=g.getTintAppendFloatAlpha(r.fillRight,S),y?(E=l.getX(f,-d),P=l.getY(f,-d),A=l.getX(0,m),R=l.getY(0,m),G=l.getX(0,m-d),b=l.getY(0,m-d)):(E=l.getX(f,0),P=l.getY(f,0),A=l.getX(0,m),R=l.getY(0,m),G=l.getX(0,m-d),b=l.getY(0,m-d)),u.batchTri(r,E,P,A,R,G,b,0,0,1,1,C,C,C,2)),a.pipelines.postBatch(r)}};p.exports=o}),57847:((p,M,t)=>{var h=t(83419),g=t(17803),o=t(23031),a=t(36823),r=new h({Extends:g,Mixins:[a],initialize:function(n,u,s,l,c,d,f,m,y){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=128),f===void 0&&(f=0),g.call(this,n,"Line",new o(l,c,d,f));var S=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(u,s),this.setSize(S,C),m!==void 0&&this.setStrokeStyle(1,m,y),this.updateDisplayOrigin()},setLineWidth:function(e,n){return n===void 0&&(n=e),this._startWidth=e,this._endWidth=n,this.lineWidth=e,this},setTo:function(e,n,u,s){return this.geom.setTo(e,n,u,s),this}});p.exports=r}),17440:((p,M,t)=>{var h=t(75177),g=t(20926),o=function(a,r,e,n){e.addToRenderList(r);var u=a.currentContext;if(g(a,u,r,e,n)){var s=r._displayOriginX,l=r._displayOriginY;r.isStroked&&(h(u,r),u.beginPath(),u.moveTo(r.geom.x1-s,r.geom.y1-l),u.lineTo(r.geom.x2-s,r.geom.y2-l),u.stroke()),u.restore()}};p.exports=o}),2481:((p,M,t)=>{var h=t(39429),g=t(57847);h.register("line",function(o,a,r,e,n,u,s,l){return this.displayList.add(new g(this.scene,o,a,r,e,n,u,s,l))})}),36823:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(77385),o=t(17440),p.exports={renderWebGL:g,renderCanvas:o}}),77385:((p,M,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,n){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,e,n);u.calcMatrix.copyFrom(s.calc);var l=r._displayOriginX,c=r._displayOriginY,d=e.alpha*r.alpha;if(a.pipelines.preBatch(r),r.isStroked){var f=u.strokeTint,m=g.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*d);f.TL=m,f.TR=m,f.BL=m,f.BR=m,u.batchLine(r.geom.x1-l,r.geom.y1-c,r.geom.x2-l,r.geom.y2-c,r._startWidth/2,r._endWidth/2,1,0,!1,s.sprite,s.camera)}a.pipelines.postBatch(r)};p.exports=o}),24949:((p,M,t)=>{var h=t(90273),g=t(83419),o=t(94811),a=t(13829),r=t(25717),e=t(17803),n=t(5469),u=new g({Extends:e,Mixins:[h],initialize:function(l,c,d,f,m,y){c===void 0&&(c=0),d===void 0&&(d=0),e.call(this,l,"Polygon",new r(f));var S=a(this.geom);this.setPosition(c,d),this.setSize(S.width,S.height),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(s){s===void 0&&(s=1);for(var l=0;l<s;l++)n(this.geom);return this.updateData()},setTo:function(s){this.geom.setTo(s);var l=a(this.geom);return this.setSize(l.width,l.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var s=[],l=this.geom.points,c=0;c<l.length;c++)s.push(l[c].x,l[c].y);return s.push(l[0].x,l[0].y),this.pathIndexes=o(s),this.pathData=s,this}});p.exports=u}),38710:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,n,u){n.addToRenderList(e);var s=r.currentContext;if(o(r,s,e,n,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;s.beginPath(),s.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;s.lineTo(C,E)}e.closePath&&s.closePath(),e.isFilled&&(h(s,e),s.fill()),e.isStroked&&(g(s,e),s.stroke()),s.restore()}};p.exports=a}),64827:((p,M,t)=>{var h=t(39429),g=t(24949);h.register("polygon",function(o,a,r,e,n){return this.displayList.add(new g(this.scene,o,a,r,e,n))})}),90273:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(73695),o=t(38710),p.exports={renderWebGL:g,renderCanvas:o}}),73695:((p,M,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,n,u){n.addToRenderList(e);var s=r.pipelines.set(e.pipeline),l=g(e,n,u),c=s.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=n.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(s,c,e,m,d,f),e.isStroked&&o(s,e,m,d,f),r.pipelines.postBatch(e)};p.exports=a}),74561:((p,M,t)=>{var h=t(83419),g=t(94811),o=t(87841),a=t(17803),r=t(95597),e=new h({Extends:a,Mixins:[r],initialize:function(u,s,l,c,d,f,m){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=128),d===void 0&&(d=128),a.call(this,u,"Rectangle",new o(0,0,c,d)),this.radius=20,this.isRounded=!1,this.setPosition(s,l),this.setSize(c,d),f!==void 0&&this.setFillStyle(f,m),this.updateDisplayOrigin(),this.updateData()},setRounded:function(n){return n===void 0&&(n=16),this.radius=n,this.isRounded=n>0,this.updateRoundedData()},setSize:function(n,u){this.width=n,this.height=u,this.geom.setSize(n,u),this.updateData(),this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=n,s.hitArea.height=u),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var n=[],u=this.geom,s=this._tempLine;return u.getLineA(s),n.push(s.x1,s.y1,s.x2,s.y2),u.getLineB(s),n.push(s.x2,s.y2),u.getLineC(s),n.push(s.x2,s.y2),u.getLineD(s),n.push(s.x2,s.y2),this.pathData=n,this},updateRoundedData:function(){var n=[],u=this.width/2,s=this.height/2,l=Math.min(u,s),c=Math.min(this.radius,l),d=u,f=s,m=Math.max(1,Math.floor(c/5));return this.arcTo(n,d-u+c,f-s+c,c,Math.PI,Math.PI*1.5,m),n.push(d+u-c,f-s),this.arcTo(n,d+u-c,f-s+c,c,Math.PI*1.5,Math.PI*2,m),n.push(d+u,f+s-c),this.arcTo(n,d+u-c,f+s-c,c,0,Math.PI*.5,m),n.push(d-u+c,f+s),this.arcTo(n,d-u+c,f+s-c,c,Math.PI*.5,Math.PI,m),n.push(d-u,f-s+c),this.pathIndexes=g(n),this.pathData=n,this},arcTo:function(n,u,s,l,c,d,f){for(var m=(d-c)/f,y=0;y<=f;y++){var S=c+m*y;n.push(u+Math.cos(S)*l,s+Math.sin(S)*l)}}});p.exports=e}),48682:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(e,n,u,s,l,c){var d=Math.min(s/2,l/2),f=Math.min(c,d);if(f===0){e.rect(n,u,s,l);return}e.moveTo(n+f,u),e.lineTo(n+s-f,u),e.arcTo(n+s,u,n+s,u+f,f),e.lineTo(n+s,u+l-f),e.arcTo(n+s,u+l,n+s-f,u+l,f),e.lineTo(n+f,u+l),e.arcTo(n,u+l,n,u+l-f,f),e.lineTo(n,u+f),e.arcTo(n,u,n+f,u,f),e.closePath()},r=function(e,n,u,s){u.addToRenderList(n);var l=e.currentContext;if(o(e,l,n,u,s)){var c=n._displayOriginX,d=n._displayOriginY;n.isFilled&&(h(l,n),n.isRounded?(l.beginPath(),a(l,-c,-d,n.width,n.height,n.radius),l.fill()):l.fillRect(-c,-d,n.width,n.height)),n.isStroked&&(g(l,n),l.beginPath(),n.isRounded?a(l,-c,-d,n.width,n.height,n.radius):l.rect(-c,-d,n.width,n.height),l.stroke()),l.restore()}};p.exports=r}),87959:((p,M,t)=>{var h=t(39429),g=t(74561);h.register("rectangle",function(o,a,r,e,n,u){return this.displayList.add(new g(this.scene,o,a,r,e,n,u))})}),95597:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(52059),o=t(48682),p.exports={renderWebGL:g,renderCanvas:o}}),52059:((p,M,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=t(70554),r=function(e,n,u,s){u.addToRenderList(n);var l=e.pipelines.set(n.pipeline),c=g(n,u,s);l.calcMatrix.copyFrom(c.calc);var d=n._displayOriginX,f=n._displayOriginY,m=u.alpha*n.alpha;if(e.pipelines.preBatch(n),n.isRounded&&n.isFilled)h(l,c.calc,n,m,d,f);else if(n.isFilled){var y=l.fillTint,S=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);y.TL=S,y.TR=S,y.BL=S,y.BR=S,l.batchFillRect(-d,-f,n.width,n.height)}n.isStroked&&o(l,n,m,d,f),e.pipelines.postBatch(n)};p.exports=r}),55911:((p,M,t)=>{var h=t(81991),g=t(83419),o=t(94811),a=t(17803),r=new g({Extends:a,Mixins:[h],initialize:function(n,u,s,l,c,d,f,m){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=5),c===void 0&&(c=32),d===void 0&&(d=64),a.call(this,n,"Star",null),this._points=l,this._innerRadius=c,this._outerRadius=d,this.setPosition(u,s),this.setSize(d*2,d*2),f!==void 0&&this.setFillStyle(f,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],n=this._points,u=this._innerRadius,s=this._outerRadius,l=Math.PI/2*3,c=Math.PI/n,d=s,f=s;e.push(d,f+-s);for(var m=0;m<n;m++)e.push(d+Math.cos(l)*s,f+Math.sin(l)*s),l+=c,e.push(d+Math.cos(l)*u,f+Math.sin(l)*u),l+=c;return e.push(d,f+-s),this.pathIndexes=o(e),this.pathData=e,this}});p.exports=r}),64272:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,n,u){n.addToRenderList(e);var s=r.currentContext;if(o(r,s,e,n,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;s.beginPath(),s.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;s.lineTo(C,E)}s.closePath(),e.isFilled&&(h(s,e),s.fill()),e.isStroked&&(g(s,e),s.stroke()),s.restore()}};p.exports=a}),93697:((p,M,t)=>{var h=t(55911),g=t(39429);g.register("star",function(o,a,r,e,n,u,s){return this.displayList.add(new h(this.scene,o,a,r,e,n,u,s))})}),81991:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(57017),o=t(64272),p.exports={renderWebGL:g,renderCanvas:o}}),57017:((p,M,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,n,u){n.addToRenderList(e);var s=r.pipelines.set(e.pipeline),l=g(e,n,u),c=s.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=n.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(s,c,e,m,d,f),e.isStroked&&o(s,e,m,d,f),r.pipelines.postBatch(e)};p.exports=a}),36931:((p,M,t)=>{var h=t(83419),g=t(17803),o=t(16483),a=t(96195),r=new h({Extends:g,Mixins:[a],initialize:function(n,u,s,l,c,d,f,m,y,S,C){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=128),d===void 0&&(d=64),f===void 0&&(f=0),m===void 0&&(m=128),y===void 0&&(y=128),g.call(this,n,"Triangle",new o(l,c,d,f,m,y));var E=this.geom.right-this.geom.left,P=this.geom.bottom-this.geom.top;this.setPosition(u,s),this.setSize(E,P),S!==void 0&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,n,u,s,l,c){return this.geom.setTo(e,n,u,s,l,c),this.updateData()},updateData:function(){var e=[],n=this.geom,u=this._tempLine;return n.getLineA(u),e.push(u.x1,u.y1,u.x2,u.y2),n.getLineB(u),e.push(u.x2,u.y2),n.getLineC(u),e.push(u.x2,u.y2),this.pathData=e,this}});p.exports=r}),85172:((p,M,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,n,u){n.addToRenderList(e);var s=r.currentContext;if(o(r,s,e,n,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.geom.x1-l,f=e.geom.y1-c,m=e.geom.x2-l,y=e.geom.y2-c,S=e.geom.x3-l,C=e.geom.y3-c;s.beginPath(),s.moveTo(d,f),s.lineTo(m,y),s.lineTo(S,C),s.closePath(),e.isFilled&&(h(s,e),s.fill()),e.isStroked&&(g(s,e),s.stroke()),s.restore()}};p.exports=a}),45245:((p,M,t)=>{var h=t(39429),g=t(36931);h.register("triangle",function(o,a,r,e,n,u,s,l,c,d){return this.displayList.add(new g(this.scene,o,a,r,e,n,u,s,l,c,d))})}),96195:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(83253),o=t(85172),p.exports={renderWebGL:g,renderCanvas:o}}),83253:((p,M,t)=>{var h=t(91296),g=t(34682),o=t(70554),a=function(r,e,n,u){n.addToRenderList(e);var s=r.pipelines.set(e.pipeline),l=h(e,n,u);s.calcMatrix.copyFrom(l.calc);var c=e._displayOriginX,d=e._displayOriginY,f=n.alpha*e.alpha;if(r.pipelines.preBatch(e),e.isFilled){var m=s.fillTint,y=o.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*f);m.TL=y,m.TR=y,m.BL=y,m.BR=y;var S=e.geom.x1-c,C=e.geom.y1-d,E=e.geom.x2-c,P=e.geom.y2-d,A=e.geom.x3-c,R=e.geom.y3-d;s.batchFillTriangle(S,C,E,P,A,R,l.sprite,l.camera)}e.isStroked&&g(s,e,f,c,d),r.pipelines.postBatch(e)};p.exports=a}),68287:((p,M,t)=>{var h=t(9674),g=t(83419),o=t(31401),a=t(95643),r=t(92751),e=new g({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,r],initialize:function(u,s,l,c,d){a.call(this,u,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(c,d),this.setPosition(s,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,u){this.anims.update(n,u)},play:function(n,u){return this.anims.play(n,u)},playReverse:function(n,u){return this.anims.playReverse(n,u)},playAfterDelay:function(n,u){return this.anims.playAfterDelay(n,u)},playAfterRepeat:function(n,u){return this.anims.playAfterRepeat(n,u)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return o.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});p.exports=e}),76552:(p=>{var M=function(t,h,g,o){g.addToRenderList(h),t.batchSprite(h,h.frame,g,o)};p.exports=M}),15567:((p,M,t)=>{var h=t(25305),g=t(13059),o=t(44603),a=t(23568),r=t(68287);o.register("sprite",function(e,n){e===void 0&&(e={});var u=a(e,"key",null),s=a(e,"frame",null),l=new r(this.scene,0,0,u,s);return n!==void 0&&(e.add=n),h(this.scene,l,e),g(l,e),l})}),46409:((p,M,t)=>{var h=t(39429),g=t(68287);h.register("sprite",function(o,a,r,e){return this.displayList.add(new g(this.scene,o,a,r,e))})}),92751:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(9409),o=t(76552),p.exports={renderWebGL:g,renderCanvas:o}}),9409:(p=>{var M=function(t,h,g,o){g.addToRenderList(h),h.pipeline.batchSprite(h,g,o)};p.exports=M}),14220:(p=>{var M=function(t,h,g){var o=t.canvas,a=t.context,r=t.style,e=[],n=0,u=g.length;r.maxLines>0&&r.maxLines<g.length&&(u=r.maxLines),r.syncFont(o,a);for(var s=t.letterSpacing,l=0;l<u;l++){var c=r.strokeThickness;if(s===0)c+=a.measureText(g[l]).width;else{for(var d=g[l],f=0;f<d.length;f++)c+=a.measureText(d[f]).width;d.length>1&&(c+=s*(d.length-1))}r.wordWrap&&(c-=a.measureText(" ").width),e[l]=Math.ceil(c),n=Math.max(n,e[l])}var m=h.fontSize+r.strokeThickness,y=m*u,S=t.lineSpacing;return u>1&&(y+=S*(u-1)),{width:n,height:y,lines:u,lineWidths:e,lineSpacing:S,lineHeight:m}};p.exports=M}),79557:((p,M,t)=>{var h=t(27919),g=function(o){var a=h.create(this),r=a.getContext("2d",{willReadFrequently:!0});o.syncFont(a,r);var e=r.measureText(o.testString);if("actualBoundingBoxAscent"in e){var n=e.actualBoundingBoxAscent,u=e.actualBoundingBoxDescent;return h.remove(a),{ascent:n,descent:u,fontSize:n+u}}var s=Math.ceil(e.width*o.baselineX),l=s,c=2*l;l=l*o.baselineY|0,a.width=s,a.height=c,r.fillStyle="#f00",r.fillRect(0,0,s,c),r.font=o._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o.testString,0,l);var d={ascent:0,descent:0,fontSize:0},f=r.getImageData(0,0,s,c);if(!f)return d.ascent=l,d.descent=l+6,d.fontSize=d.ascent+d.descent,h.remove(a),d;var m=f.data,y=m.length,S=s*4,C,E,P=0,A=!1;for(C=0;C<l;C++){for(E=0;E<S;E+=4)if(m[P+E]!==255){A=!0;break}if(!A)P+=S;else break}for(d.ascent=l-C,P=y-S,A=!1,C=c;C>l;C--){for(E=0;E<S;E+=4)if(m[P+E]!==255){A=!0;break}if(!A)P-=S;else break}return d.descent=C-l,d.fontSize=d.ascent+d.descent,h.remove(a),d};p.exports=g}),50171:((p,M,t)=>{var h=t(40366),g=t(27919),o=t(83419),a=t(31401),r=t(95643),e=t(14220),n=t(35154),u=t(35846),s=t(61771),l=t(35762),c=t(45650),d=new o({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,s],initialize:function(m,y,S,C,E){y===void 0&&(y=0),S===void 0&&(S=0),r.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(y,S),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g.create(this),this.context,this.style=new l(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=c(),this.texture=m.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing),E&&E.letterSpacing&&this.setLetterSpacing(E.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(f){var m=this.style;if(m.wordWrapCallback){var y=m.wordWrapCallback.call(m.wordWrapCallbackScope,f,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(f,this.context,this.style.wordWrapWidth):this.basicWordWrap(f,this.context,this.style.wordWrapWidth):f},advancedWordWrap:function(f,m,y){for(var S="",C=f.replace(/ +/gi," ").split(this.splitRegExp),E=C.length,P=0;P<E;P++){var A=C[P],R="";A=A.replace(/^ *|\s*$/gi,"");var G=A.length*this.letterSpacing,b=m.measureText(A).width+G;if(b<y){S+=A+`
`;continue}for(var L=y,w=A.split(" "),B=0;B<w.length;B++){var N=w[B],Y=N+" ",U=Y.length*this.letterSpacing,W=m.measureText(Y).width+U;if(W>L){if(B===0){for(var O=Y;O.length;){O=O.slice(0,-1);var V=O.length*this.letterSpacing;if(W=m.measureText(O).width+V,W<=L)break}if(!O.length)throw new Error("wordWrapWidth < a single character");var X=N.substr(O.length);w[B]=X,R+=O}var z=w[B].length?B:B+1,I=w.slice(z).join(" ").replace(/[ \n]*$/gi,"");C.splice(P+1,0,I),E=C.length;break}else R+=Y,L-=W}S+=R.replace(/[ \n]*$/gi,"")+`
`}return S=S.replace(/[\s|\n]*$/gi,""),S},basicWordWrap:function(f,m,y){for(var S="",C=f.split(this.splitRegExp),E=C.length-1,P=m.measureText(" ").width,A=0;A<=E;A++){for(var R=y,G=C[A].split(" "),b=G.length-1,L=0;L<=b;L++){var w=G[L],B=w.length*this.letterSpacing,N=m.measureText(w).width+B,Y=N;L<b&&(Y+=P),Y>R&&L>0&&(S+=`
`,R=y),S+=w,L<b?(S+=" ",R-=Y):R-=N}A<E&&(S+=`
`)}return S},getWrappedText:function(f){f===void 0&&(f=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(f);return m.split(this.splitRegExp)},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this._text&&(this._text=f.toString(),this.updateText()),this},appendText:function(f,m){m===void 0&&(m=!0),!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f=f.toString();var y=this._text.concat(m?`
`+f:f);return y!==this._text&&(this._text=y,this.updateText()),this},setStyle:function(f){return this.style.setStyle(f)},setFont:function(f){return this.style.setFont(f)},setFontFamily:function(f){return this.style.setFontFamily(f)},setFontSize:function(f){return this.style.setFontSize(f)},setFontStyle:function(f){return this.style.setFontStyle(f)},setFixedSize:function(f,m){return this.style.setFixedSize(f,m)},setBackgroundColor:function(f){return this.style.setBackgroundColor(f)},setFill:function(f){return this.style.setFill(f)},setColor:function(f){return this.style.setColor(f)},setStroke:function(f,m){return this.style.setStroke(f,m)},setShadow:function(f,m,y,S,C,E){return this.style.setShadow(f,m,y,S,C,E)},setShadowOffset:function(f,m){return this.style.setShadowOffset(f,m)},setShadowColor:function(f){return this.style.setShadowColor(f)},setShadowBlur:function(f){return this.style.setShadowBlur(f)},setShadowStroke:function(f){return this.style.setShadowStroke(f)},setShadowFill:function(f){return this.style.setShadowFill(f)},setWordWrapWidth:function(f,m){return this.style.setWordWrapWidth(f,m)},setWordWrapCallback:function(f,m){return this.style.setWordWrapCallback(f,m)},setAlign:function(f){return this.style.setAlign(f)},setResolution:function(f){return this.style.setResolution(f)},setLineSpacing:function(f){return this.lineSpacing=f,this.updateText()},setLetterSpacing:function(f){return this.letterSpacing=f,this.updateText()},setPadding:function(f,m,y,S){if(typeof f=="object"){var C=f,E=n(C,"x",null);E!==null?(f=E,y=E):(f=n(C,"left",0),y=n(C,"right",f));var P=n(C,"y",null);P!==null?(m=P,S=P):(m=n(C,"top",0),S=n(C,"bottom",m))}else f===void 0&&(f=0),m===void 0&&(m=f),y===void 0&&(y=f),S===void 0&&(S=m);return this.padding.left=f,this.padding.top=m,this.padding.right=y,this.padding.bottom=S,this.updateText()},setMaxLines:function(f){return this.style.setMaxLines(f)},setRTL:function(f){f===void 0&&(f=!0);var m=this.style;return m.rtl===f?this:(m.rtl=f,f?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),m.align==="left"?m.align="right":m.align==="right"&&(m.align="left"),this)},updateText:function(){var f=this.canvas,m=this.context,y=this.style,S=y.resolution,C=y.metrics;y.syncFont(f,m);var E=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(E=this.runWordWrap(this._text));var P=E.split(this.splitRegExp),A=e(this,C,P),R=this.padding,G;y.fixedWidth===0?(this.width=A.width+R.left+R.right,G=A.width):(this.width=y.fixedWidth,G=this.width-R.left-R.right,G<A.width&&(G=A.width)),y.fixedHeight===0?this.height=A.height+R.top+R.bottom:this.height=y.fixedHeight;var b=this.width,L=this.height;this.updateDisplayOrigin(),b*=S,L*=S,b=Math.max(b,1),L=Math.max(L,1),f.width!==b||f.height!==L?(f.width=b,f.height=L,this.frame.setSize(b,L),y.syncFont(f,m),y.rtl&&(m.direction="rtl")):m.clearRect(0,0,b,L),m.save(),m.scale(S,S),y.backgroundColor&&(m.fillStyle=y.backgroundColor,m.fillRect(0,0,b,L)),y.syncStyle(f,m),m.translate(R.left,R.top);for(var w,B,N=0;N<A.lines;N++){if(w=y.strokeThickness/2,B=y.strokeThickness/2+N*A.lineHeight+C.ascent,N>0&&(B+=A.lineSpacing*N),y.rtl)w=b-w-R.left-R.right;else if(y.align==="right")w+=G-A.lineWidths[N];else if(y.align==="center")w+=(G-A.lineWidths[N])/2;else if(y.align==="justify"){var Y=.85;if(A.lineWidths[N]/A.width>=Y){var U=A.width-A.lineWidths[N],W=m.measureText(" ").width,O=P[N].trim(),V=O.split(" ");U+=(P[N].length-O.length)*W;for(var X=Math.floor(U/W),z=0;X>0;)V[z]+=" ",z=(z+1)%(V.length-1||1),--X;P[N]=V.join(" ")}}this.autoRound&&(w=Math.round(w),B=Math.round(B));var I=this.letterSpacing;if(y.strokeThickness&&I===0&&(y.syncShadow(m,y.shadowStroke),m.strokeText(P[N],w,B)),y.color)if(y.syncShadow(m,y.shadowFill),I!==0)for(var Z=0,J=P[N].split(""),k=0;k<J.length;k++)y.strokeThickness&&(y.syncShadow(m,y.shadowStroke),m.strokeText(J[k],w+Z,B),y.syncShadow(m,y.shadowFill)),m.fillText(J[k],w+Z,B),Z+=m.measureText(J[k]).width+I;else m.fillText(P[N],w,B)}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0));var j=this.input;return j&&!j.customHitArea&&(j.hitArea.width=this.width,j.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(f){this.setText(f)}},toJSON:function(){var f=a.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return f.data=m,f},preDestroy:function(){u(this.canvas),g.remove(this.canvas);var f=this.texture;f&&f.destroy()}});p.exports=d}),79724:(p=>{var M=function(t,h,g,o){h.width===0||h.height===0||(g.addToRenderList(h),t.batchSprite(h,h.frame,g,o))};p.exports=M}),71259:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(50171);g.register("text",function(r,e){r===void 0&&(r={});var n=o(r,"text",""),u=o(r,"style",null),s=o(r,"padding",null);s!==null&&(u.padding=s);var l=new a(this.scene,0,0,n,u);return e!==void 0&&(r.add=e),h(this.scene,l,r),l.autoRound=o(r,"autoRound",!0),l.resolution=o(r,"resolution",1),l})}),68005:((p,M,t)=>{var h=t(50171),g=t(39429);g.register("text",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),61771:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(34397),o=t(79724),p.exports={renderWebGL:g,renderCanvas:o}}),35762:((p,M,t)=>{var h=t(83419),g=t(23568),o=t(35154),a=t(79557),r={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},e=new h({initialize:function(u,s){this.parent=u,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(s,!1,!0)},setStyle:function(n,u,s){u===void 0&&(u=!0),s===void 0&&(s=!1);for(var l in r){var c=s?r[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=o(n,r[l][0],c):n&&l==="fontSize"&&typeof n.fontSize=="number"?this[l]=n.fontSize.toString()+"px":this[l]=g(n,r[l][0],c)}var d=o(n,"font",null);d!==null&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var f=o(n,"fill",null);f!==null&&(this.color=f);var m=o(n,"metrics",!1);return m?this.metrics={ascent:o(m,"ascent",0),descent:o(m,"descent",0),fontSize:o(m,"fontSize",0)}:(u||!this.metrics)&&(this.metrics=a(this)),u?this.parent.updateText():this.parent},syncFont:function(n,u){u.font=this._font},syncStyle:function(n,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(n,u){u?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(n,u){u===void 0&&(u=!0);var s=n,l="",c="";if(typeof n!="string")s=o(n,"fontFamily","Courier"),l=o(n,"fontSize","16px"),c=o(n,"fontStyle","");else{var d=n.split(" "),f=0;c=d.length>2?d[f++]:"",l=d[f++]||"16px",s=d[f++]||"Courier"}return(s!==this.fontFamily||l!==this.fontSize||c!==this.fontStyle)&&(this.fontFamily=s,this.fontSize=l,this.fontStyle=c,u&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,u){return this.fixedWidth=n,this.fixedHeight=u,n&&(this.parent.width=n),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,u){return u===void 0&&(u=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==n||this.strokeThickness!==u)&&(this.stroke=n,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(n,u,s,l,c,d){return n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s="#000"),l===void 0&&(l=0),c===void 0&&(c=!1),d===void 0&&(d=!0),this.shadowOffsetX=n,this.shadowOffsetY=u,this.shadowColor=s,this.shadowBlur=l,this.shadowStroke=c,this.shadowFill=d,this.update(!1)},setShadowOffset:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this.shadowOffsetX=n,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,u){return u===void 0&&(u=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(n,u){return u===void 0&&(u=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var u in r)n[u]=this[u];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});p.exports=e}),34397:((p,M,t)=>{var h=t(70554),g=function(o,a,r,e){if(!(a.width===0||a.height===0)){r.addToRenderList(a);var n=a.frame,u=n.width,s=n.height,l=h.getTintAppendFloatAlpha,c=o.pipelines.set(a.pipeline,a),d=c.setTexture2D(n.glTexture,a);c.batchTexture(a,n.glTexture,u,s,a.x,a.y,u/a.style.resolution,s/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,u,s,l(a.tintTopLeft,r.alpha*a._alphaTL),l(a.tintTopRight,r.alpha*a._alphaTR),l(a.tintBottomLeft,r.alpha*a._alphaBL),l(a.tintBottomRight,r.alpha*a._alphaBR),a.tintFill,0,0,r,e,!1,d)}};p.exports=g}),20839:((p,M,t)=>{var h=t(27919),g=t(83419),o=t(31401),a=t(95643),r=t(98439),e=t(68703),n=t(56295),u=t(45650),s=t(26099),l=8,c=new g({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,n],initialize:function(f,m,y,S,C,E,P){var A=f.sys.renderer;a.call(this,f,"TileSprite");var R=f.sys.textures.get(E),G=R.get(P);G.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),R=f.sys.textures.get("__MISSING"),G=R.get()),R.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),R=f.sys.textures.get("__MISSING"),G=R.get()),!S||!C?(S=S||G.width,C=C||G.height):(S=Math.floor(S),C=Math.floor(C)),this._tilePosition=new s,this._tileScale=new s(1,1),this.dirty=!1,this.renderer=A,this.canvas=h.create(this,S,C),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=R,this.displayFrame=G,this._crop=this.resetCropObject(),this._textureKey=u(),this.texture=f.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=r(G.width),this.potHeight=r(G.height),this.fillCanvas=h.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(m,y),this.setSize(S,C),this.setFrame(P),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(d,f){return this.displayTexture=this.scene.sys.textures.get(d),this.setFrame(f)},setFrame:function(d){var f=this.displayTexture.get(d);return this.potWidth=r(f.width),this.potHeight=r(f.height),this.canvas.width=0,!f.cutWidth||!f.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=f,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(d,f){return d!==void 0&&(this.tilePositionX=d),f!==void 0&&(this.tilePositionY=f),this},setTileScale:function(d,f){return d===void 0&&(d=this.tileScaleX),f===void 0&&(f=d),this.tileScaleX=d,this.tileScaleY=f,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var d=this.displayFrame;if(d.source.isRenderTexture||d.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var f=this.fillContext,m=this.fillCanvas,y=this.potWidth,S=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=d.cutWidth,S=d.cutHeight),f.clearRect(0,0,y,S),m.width=y,m.height=S,f.drawImage(d.source.image,d.cutX,d.cutY,d.cutWidth,d.cutHeight,0,0,y,S),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=f.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var d=this.canvas;if((d.width!==this.width||d.height!==this.height)&&(d.width=this.width,d.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var f=this.context;this.scene.sys.game.config.antialias||e.disable(f);var m=this._tileScale.x,y=this._tileScale.y,S=this._tilePosition.x,C=this._tilePosition.y;f.clearRect(0,0,this.width,this.height),f.save(),f.scale(m,y),f.translate(-S,-C),f.fillStyle=this.fillPattern,f.fillRect(S,C,this.width/m,this.height/y),f.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),h.remove(this.canvas),h.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var d=this.texture;d&&d.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(d){this._tilePosition.x=d,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(d){this._tilePosition.y=d,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(d){this._tileScale.x=d,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(d){this._tileScale.y=d,this.dirty=!0}}});p.exports=c}),46992:(p=>{var M=function(t,h,g,o){h.updateCanvas(),g.addToRenderList(h),t.batchSprite(h,h.frame,g,o)};p.exports=M}),14167:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(20839);g.register("tileSprite",function(r,e){r===void 0&&(r={});var n=o(r,"x",0),u=o(r,"y",0),s=o(r,"width",512),l=o(r,"height",512),c=o(r,"key",""),d=o(r,"frame",""),f=new a(this.scene,n,u,s,l,c,d);return e!==void 0&&(r.add=e),h(this.scene,f,r),f})}),91681:((p,M,t)=>{var h=t(20839),g=t(39429);g.register("tileSprite",function(o,a,r,e,n,u){return this.displayList.add(new h(this.scene,o,a,r,e,n,u))})}),56295:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(18553),o=t(46992),p.exports={renderWebGL:g,renderCanvas:o}}),18553:((p,M,t)=>{var h=t(70554),g=function(o,a,r,e){a.updateCanvas();var n=a.width,u=a.height;if(!(n===0||u===0)){r.addToRenderList(a);var s=h.getTintAppendFloatAlpha,l=o.pipelines.set(a.pipeline,a),c=l.setTexture2D(a.fillPattern,a);l.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,n,u,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*n,a.originY*u,0,0,n,u,s(a.tintTopLeft,r.alpha*a._alphaTL),s(a.tintTopRight,r.alpha*a._alphaTR),s(a.tintBottomLeft,r.alpha*a._alphaBL),s(a.tintBottomRight,r.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,r,e,!1,c)}};p.exports=g}),18471:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(31401),a=t(51708),r=t(8443),e=t(95643),n=t(36383),u=t(14463),s=t(45650),l=t(10247),c=new g({Extends:e,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.TextureCrop,o.Tint,o.Transform,o.Visible,l],initialize:function(f,m,y,S){e.call(this,f,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=s(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var C=f.sys.game;this._device=C.device.video,this.setPosition(m,y),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),C.events.on(r.PAUSE,this.globalPause,this),C.events.on(r.RESUME,this.globalResume,this);var E=f.sys.sound;E&&E.on(u.GLOBAL_MUTE,this.globalMute,this),S&&this.load(S)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(d){var f=this.scene.sys.cache.video.get(d);return f?(this.cacheKey=d,this.loadHandler(f.url,f.noAudio,f.crossOrigin)):console.warn("No video in cache for key: "+d),this},changeSource:function(d,f,m,y,S){f===void 0&&(f=!0),m===void 0&&(m=!1),this.cacheKey!==d&&(this.load(d),f&&this.play(m,y,S))},getVideoKey:function(){return this.cacheKey},loadURL:function(d,f,m){f===void 0&&(f=!1);var y=this._device.getVideoURL(d);return y?(this.cacheKey="",this.loadHandler(y.url,f,m)):console.warn("No supported video format found for "+d),this},loadMediaStream:function(d,f,m){return this.loadHandler(null,f,m,d)},loadHandler:function(d,f,m,y){f||(f=!1);var S=this.video;if(S?(this.removeLoadEventHandlers(),this.stop()):(S=document.createElement("video"),S.controls=!1,S.setAttribute("playsinline","playsinline"),S.setAttribute("preload","auto"),S.setAttribute("disablePictureInPicture","true")),f?(S.muted=!0,S.defaultMuted=!0,S.setAttribute("autoplay","autoplay")):(S.muted=!1,S.defaultMuted=!1,S.removeAttribute("autoplay")),m?S.setAttribute("crossorigin",m):S.removeAttribute("crossorigin"),y)if("srcObject"in S)try{S.srcObject=y}catch(E){if(E.name!=="TypeError")throw E;S.src=URL.createObjectURL(y)}else S.src=URL.createObjectURL(y);else S.src=d;this.retry=0,this.video=S,this._playCalled=!1,S.load(),this.addLoadEventHandlers();var C=this.scene.sys.textures.get(this._key);return this.setTexture(C),this},requestVideoFrame:function(d,f){var m=this.video;if(m){var y=f.width,S=f.height,C=this.videoTexture,E=this.videoTextureSource,P=!C||E.source!==m;P?(this._codePaused=m.paused,this._codeMuted=m.muted,C?(E.source=m,E.width=y,E.height=S,C.get().setSize(y,S)):(C=this.scene.sys.textures.create(this._key,m,y,S),C.add("__BASE",0,0,0,y,S),this.setTexture(C),this.videoTexture=C,this.videoTextureSource=C.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(a.VIDEO_TEXTURE,this,C)),this.setSizeToFrame(),this.updateDisplayOrigin()):E.update(),this.isStalled=!1,this.metadata=f;var A=f.mediaTime;P&&(this._lastUpdate=A,this.emit(a.VIDEO_CREATED,this,y,S),this.frameReady||(this.frameReady=!0,this.emit(a.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.emit(a.VIDEO_LOOP,this)):(this.stop(!1),this.emit(a.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(a.VIDEO_LOOP,this),this._lastUpdate=A,this._getFrame?(this.removeEventHandlers(),m.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(d,f,m){f===void 0&&(f=-1),m===void 0&&(m=n.MAX_SAFE_INTEGER);var y=this.video;return!y||this.isPlaying()?(y||console.warn("Video not loaded"),this):(d===void 0&&(d=y.loop),y.loop=d,this._markerIn=f,this._markerOut=m,this._playingMarker=f>-1&&m>f&&m<n.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=y.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var d=this.video;return!d||this.isPlaying()?(d||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=d.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var d=this.video;d&&(d.addEventListener("error",this._loadCallbackHandler),d.addEventListener("abort",this._loadCallbackHandler),d.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var d=this.video;d&&(d.removeEventListener("error",this._loadCallbackHandler),d.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var d=this.video;if(d){var f=this._callbacks;for(var m in f)d.addEventListener(m,f[m])}},removeEventHandlers:function(){var d=this.video;if(d){var f=this._callbacks;for(var m in f)d.removeEventListener(m,f[m])}},createPlayPromise:function(d){d===void 0&&(d=!0);var f=this.video,m=f.play();if(m!==void 0){var y=this.playSuccess.bind(this),S=this.playError.bind(this);if(!d){var C=this;S=function(){C.failedPlayAttempts++}}m.then(y).catch(S)}else f.addEventListener("playing",this._callbacks.legacy),d||this.failedPlayAttempts++},addMarker:function(d,f,m){return!isNaN(f)&&f>=0&&!isNaN(m)&&m>f&&(this.markers[d]=[f,m]),this},playMarker:function(d,f){var m=this.markers[d];return m&&this.play(f,m[0],m[1]),this},removeMarker:function(d){return delete this.markers[d],this},snapshot:function(d,f){return d===void 0&&(d=this.width),f===void 0&&(f=this.height),this.snapshotArea(0,0,this.width,this.height,d,f)},snapshotArea:function(d,f,m,y,S,C){d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=this.width),y===void 0&&(y=this.height),S===void 0&&(S=m),C===void 0&&(C=y);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(S,C),E&&P.context.drawImage(E,d,f,m,y,0,0,S,C)):(P=this.scene.sys.textures.createCanvas(s(),S,C),this.snapshotTexture=P,E&&P.context.drawImage(E,d,f,m,y,0,0,S,C)),P.update()},saveSnapshotTexture:function(d){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,d):this.snapshotTexture=this.scene.sys.textures.createCanvas(d,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(a.VIDEO_UNLOCKED,this));var d=this.scene.sys.sound;d&&d.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(d){var f=d.name;f==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(a.VIDEO_LOCKED,this)):f==="NotSupportedError"?(this.stop(!1),this.emit(a.VIDEO_UNSUPPORTED,this,d)):(this.stop(!1),this.emit(a.VIDEO_ERROR,this,d))},legacyPlayHandler:function(){var d=this.video;d&&(this.playSuccess(),d.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(a.VIDEO_PLAYING,this)},loadErrorHandler:function(d){this.stop(!1),this.emit(a.VIDEO_ERROR,this,d)},metadataHandler:function(d){this.emit(a.VIDEO_METADATA,this,d)},setSizeToFrame:function(d){d||(d=this.frame),this.width=d.realWidth,this.height=d.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},stalledHandler:function(d){this.isStalled=!0,this.emit(a.VIDEO_STALLED,this,d)},completeHandler:function(){this._playCalled=!1,this.emit(a.VIDEO_COMPLETE,this)},preUpdate:function(d,f){var m=this.video;!m||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=f,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(d){var f=this.video;if(f){var m=f.duration;if(m!==1/0&&!isNaN(m)){var y=m*d;this.setCurrentTime(y)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(d){var f=this.video;if(f){if(typeof d=="string"){var m=d[0],y=parseFloat(d.substr(1));m==="+"?d=f.currentTime+y:m==="-"&&(d=f.currentTime-y)}f.currentTime=d}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(a.VIDEO_SEEKED,this)},getProgress:function(){var d=this.video;if(d){var f=d.duration;if(f!==1/0&&!isNaN(f))return d.currentTime/f}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(d){d===void 0&&(d=!0),this._codeMuted=d;var f=this.video;return f&&(f.muted=this._systemMuted?!0:d),this},isMuted:function(){return this._codeMuted},globalMute:function(d,f){this._systemMuted=f;var m=this.video;m&&(m.muted=this._codeMuted?!0:f)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(d){d===void 0&&(d=!0);var f=this.video;return this._codePaused=d,f&&!f.ended&&(d?f.paused||(this.removeEventHandlers(),f.pause()):d||(this._playCalled?f.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(d){return d===void 0&&(d=1),this.video&&(this.video.volume=h(d,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(d){return this.video&&(this.video.playbackRate=d),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(d){return d===void 0&&(d=!0),this.video&&(this.video.loop=d),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(d,f){return f===void 0&&(f=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,d),this.videoTextureSource.setFlipY(f)),this._key=d,this.flipY=f,!!this.videoTexture},stop:function(d){d===void 0&&(d=!0);var f=this.video;return f&&(this.removeEventHandlers(),f.cancelVideoFrameCallback(this._rfvCallbackId),f.pause()),this.retry=0,this._playCalled=!1,d&&this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var d=this.video;if(d){for(d.parentNode&&d.parentNode.removeChild(d);d.hasChildNodes();)d.removeChild(d.firstChild);d.removeAttribute("autoplay"),d.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var d=this.scene.sys.game.events;d.off(r.PAUSE,this.globalPause,this),d.off(r.RESUME,this.globalResume,this);var f=this.scene.sys.sound;f&&f.off(u.GLOBAL_MUTE,this.globalMute,this)}});p.exports=c}),58352:(p=>{var M=function(t,h,g,o){h.videoTexture&&(g.addToRenderList(h),t.batchSprite(h,h.frame,g,o))};p.exports=M}),11511:((p,M,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(18471);g.register("video",function(r,e){r===void 0&&(r={});var n=o(r,"key",null),u=new a(this.scene,0,0,n);return e!==void 0&&(r.add=e),h(this.scene,u,r),u})}),89025:((p,M,t)=>{var h=t(18471),g=t(39429);g.register("video",function(o,a,r){return this.displayList.add(new h(this.scene,o,a,r))})}),10247:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(29849),o=t(58352),p.exports={renderWebGL:g,renderCanvas:o}}),29849:(p=>{var M=function(t,h,g,o){h.videoTexture&&(g.addToRenderList(h),h.pipeline.batchSprite(h,g,o))};p.exports=M}),41481:((p,M,t)=>{var h=t(10312),g=t(96503),o=t(87902),a=t(83419),r=t(31401),e=t(95643),n=t(87841),u=t(37303),s=new a({Extends:e,Mixins:[r.Depth,r.GetBounds,r.Origin,r.Transform,r.ScrollFactor,r.Visible],initialize:function(c,d,f,m,y){m===void 0&&(m=1),y===void 0&&(y=m),e.call(this,c,"Zone"),this.setPosition(d,f),this.width=m,this.height=y,this.blendMode=h.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,c,d){d===void 0&&(d=!0),this.width=l,this.height=c,this.updateDisplayOrigin();var f=this.input;return d&&f&&!f.customHitArea&&(f.hitArea.width=l,f.hitArea.height=c),this},setDisplaySize:function(l,c){return this.displayWidth=l,this.displayHeight=c,this},setCircleDropZone:function(l){return this.setDropZone(new g(0,0,l),o)},setRectangleDropZone:function(l,c){return this.setDropZone(new n(0,0,l,c),u)},setDropZone:function(l,c){return this.input||this.setInteractive(l,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,c,d){d.addToRenderList(c)},renderWebGL:function(l,c,d){d.addToRenderList(c)}});p.exports=s}),95261:((p,M,t)=>{var h=t(44603),g=t(23568),o=t(41481);h.register("zone",function(a){var r=g(a,"x",0),e=g(a,"y",0),n=g(a,"width",1),u=g(a,"height",n);return new o(this.scene,r,e,n,u)})}),84175:((p,M,t)=>{var h=t(41481),g=t(39429);g.register("zone",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),95166:(p=>{var M=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};p.exports=M}),96503:((p,M,t)=>{var h=t(83419),g=t(87902),o=t(26241),a=t(79124),r=t(23777),e=t(28176),n=new h({initialize:function(s,l,c){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),this.type=r.CIRCLE,this.x=s,this.y=l,this._radius=c,this._diameter=c*2},contains:function(u,s){return g(this,u,s)},getPoint:function(u,s){return o(this,u,s)},getPoints:function(u,s,l){return a(this,u,s,l)},getRandomPoint:function(u){return e(this,u)},setTo:function(u,s,l){return this.x=u,this.y=s,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,s){return s===void 0&&(s=u),this.x=u,this.y=s,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=u*2}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=u*.5}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});p.exports=n}),71562:(p=>{var M=function(t){return 2*(Math.PI*t.radius)};p.exports=M}),92110:((p,M,t)=>{var h=t(2141),g=function(o,a,r){return r===void 0&&(r=new h),r.x=o.x+o.radius*Math.cos(a),r.y=o.y+o.radius*Math.sin(a),r};p.exports=g}),42250:((p,M,t)=>{var h=t(96503),g=function(o){return new h(o.x,o.y,o.radius)};p.exports=g}),87902:(p=>{var M=function(t,h,g){if(t.radius>0&&h>=t.left&&h<=t.right&&g>=t.top&&g<=t.bottom){var o=(t.x-h)*(t.x-h),a=(t.y-g)*(t.y-g);return o+a<=t.radius*t.radius}else return!1};p.exports=M}),5698:((p,M,t)=>{var h=t(87902),g=function(o,a){return h(o,a.x,a.y)};p.exports=g}),70588:((p,M,t)=>{var h=t(87902),g=function(o,a){return h(o,a.x,a.y)&&h(o,a.right,a.y)&&h(o,a.x,a.bottom)&&h(o,a.right,a.bottom)};p.exports=g}),26394:(p=>{var M=function(t,h){return h.setTo(t.x,t.y,t.radius)};p.exports=M}),76278:(p=>{var M=function(t,h){return t.x===h.x&&t.y===h.y&&t.radius===h.radius};p.exports=M}),2074:((p,M,t)=>{var h=t(87841),g=function(o,a){return a===void 0&&(a=new h),a.x=o.left,a.y=o.top,a.width=o.diameter,a.height=o.diameter,a};p.exports=g}),26241:((p,M,t)=>{var h=t(92110),g=t(62945),o=t(36383),a=t(2141),r=function(e,n,u){u===void 0&&(u=new a);var s=g(n,0,o.PI2);return h(e,s,u)};p.exports=r}),79124:((p,M,t)=>{var h=t(71562),g=t(92110),o=t(62945),a=t(36383),r=function(e,n,u,s){s===void 0&&(s=[]),!n&&u>0&&(n=h(e)/u);for(var l=0;l<n;l++){var c=o(l/n,0,a.PI2);s.push(g(e,c))}return s};p.exports=r}),50884:(p=>{var M=function(t,h,g){return t.x+=h,t.y+=g,t};p.exports=M}),39212:(p=>{var M=function(t,h){return t.x+=h.x,t.y+=h.y,t};p.exports=M}),28176:((p,M,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=2*Math.PI*Math.random(),e=Math.random()+Math.random(),n=e>1?2-e:e,u=n*Math.cos(r),s=n*Math.sin(r);return a.x=o.x+u*o.radius,a.y=o.y+s*o.radius,a};p.exports=g}),88911:((p,M,t)=>{var h=t(96503);h.Area=t(95166),h.Circumference=t(71562),h.CircumferencePoint=t(92110),h.Clone=t(42250),h.Contains=t(87902),h.ContainsPoint=t(5698),h.ContainsRect=t(70588),h.CopyFrom=t(26394),h.Equals=t(76278),h.GetBounds=t(2074),h.GetPoint=t(26241),h.GetPoints=t(79124),h.Offset=t(50884),h.OffsetPoint=t(39212),h.Random=t(28176),p.exports=h}),23777:(p=>{var M={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};p.exports=M}),78874:(p=>{var M=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};p.exports=M}),92990:(p=>{var M=function(t){var h=t.width/2,g=t.height/2,o=Math.pow(h-g,2)/Math.pow(h+g,2);return Math.PI*(h+g)*(1+3*o/(10+Math.sqrt(4-3*o)))};p.exports=M}),79522:((p,M,t)=>{var h=t(2141),g=function(o,a,r){r===void 0&&(r=new h);var e=o.width/2,n=o.height/2;return r.x=o.x+e*Math.cos(a),r.y=o.y+n*Math.sin(a),r};p.exports=g}),58102:((p,M,t)=>{var h=t(8497),g=function(o){return new h(o.x,o.y,o.width,o.height)};p.exports=g}),81154:(p=>{var M=function(t,h,g){if(t.width<=0||t.height<=0)return!1;var o=(h-t.x)/t.width,a=(g-t.y)/t.height;return o*=o,a*=a,o+a<.25};p.exports=M}),46662:((p,M,t)=>{var h=t(81154),g=function(o,a){return h(o,a.x,a.y)};p.exports=g}),1632:((p,M,t)=>{var h=t(81154),g=function(o,a){return h(o,a.x,a.y)&&h(o,a.right,a.y)&&h(o,a.x,a.bottom)&&h(o,a.right,a.bottom)};p.exports=g}),65534:(p=>{var M=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)};p.exports=M}),8497:((p,M,t)=>{var h=t(83419),g=t(81154),o=t(90549),a=t(48320),r=t(23777),e=t(24820),n=new h({initialize:function(s,l,c,d){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),this.type=r.ELLIPSE,this.x=s,this.y=l,this.width=c,this.height=d},contains:function(u,s){return g(this,u,s)},getPoint:function(u,s){return o(this,u,s)},getPoints:function(u,s,l){return a(this,u,s,l)},getRandomPoint:function(u){return e(this,u)},setTo:function(u,s,l,c){return this.x=u,this.y=s,this.width=l,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,s){return s===void 0&&(s=u),this.x=u,this.y=s,this},setSize:function(u,s){return s===void 0&&(s=u),this.width=u,this.height=s,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});p.exports=n}),36146:(p=>{var M=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};p.exports=M}),23694:((p,M,t)=>{var h=t(87841),g=function(o,a){return a===void 0&&(a=new h),a.x=o.left,a.y=o.top,a.width=o.width,a.height=o.height,a};p.exports=g}),90549:((p,M,t)=>{var h=t(79522),g=t(62945),o=t(36383),a=t(2141),r=function(e,n,u){u===void 0&&(u=new a);var s=g(n,0,o.PI2);return h(e,s,u)};p.exports=r}),48320:((p,M,t)=>{var h=t(92990),g=t(79522),o=t(62945),a=t(36383),r=function(e,n,u,s){s===void 0&&(s=[]),!n&&u>0&&(n=h(e)/u);for(var l=0;l<n;l++){var c=o(l/n,0,a.PI2);s.push(g(e,c))}return s};p.exports=r}),73424:(p=>{var M=function(t,h,g){return t.x+=h,t.y+=g,t};p.exports=M}),44808:(p=>{var M=function(t,h){return t.x+=h.x,t.y+=h.y,t};p.exports=M}),24820:((p,M,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=Math.random()*Math.PI*2,e=Math.sqrt(Math.random());return a.x=o.x+e*Math.cos(r)*o.width/2,a.y=o.y+e*Math.sin(r)*o.height/2,a};p.exports=g}),49203:((p,M,t)=>{var h=t(8497);h.Area=t(78874),h.Circumference=t(92990),h.CircumferencePoint=t(79522),h.Clone=t(58102),h.Contains=t(81154),h.ContainsPoint=t(46662),h.ContainsRect=t(1632),h.CopyFrom=t(65534),h.Equals=t(36146),h.GetBounds=t(23694),h.GetPoint=t(90549),h.GetPoints=t(48320),h.Offset=t(73424),h.OffsetPoint=t(44808),h.Random=t(24820),p.exports=h}),55738:((p,M,t)=>{var h=t(23777),g=t(79291),o={Circle:t(88911),Ellipse:t(49203),Intersects:t(91865),Line:t(2529),Mesh:t(73090),Point:t(43711),Polygon:t(58423),Rectangle:t(93232),Triangle:t(84435)};o=g(!1,o,h),p.exports=o}),2044:((p,M,t)=>{var h=t(20339),g=function(o,a){return h(o.x,o.y,a.x,a.y)<=o.radius+a.radius};p.exports=g}),81491:(p=>{var M=function(t,h){var g=h.width/2,o=h.height/2,a=Math.abs(t.x-h.x-g),r=Math.abs(t.y-h.y-o),e=g+t.radius,n=o+t.radius;if(a>e||r>n)return!1;if(a<=g||r<=o)return!0;var u=a-g,s=r-o,l=u*u,c=s*s,d=t.radius*t.radius;return l+c<=d};p.exports=M}),63376:((p,M,t)=>{var h=t(2141),g=t(2044),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var n=a.x,u=a.y,s=a.radius,l=r.x,c=r.y,d=r.radius,f,m,y,S,C;if(u===c)C=(d*d-s*s-l*l+n*n)/(2*(n-l)),f=1,m=-2*c,y=l*l+C*C-2*l*C+c*c-d*d,S=m*m-4*f*y,S===0?e.push(new h(C,-m/(2*f))):S>0&&(e.push(new h(C,(-m+Math.sqrt(S))/(2*f))),e.push(new h(C,(-m-Math.sqrt(S))/(2*f))));else{var E=(n-l)/(u-c),P=(d*d-s*s-l*l+n*n-c*c+u*u)/(2*(u-c));f=E*E+1,m=2*u*E-2*P*E-2*n,y=n*n+u*u+P*P-s*s-2*u*P,S=m*m-4*f*y,S===0?(C=-m/(2*f),e.push(new h(C,P-C*E))):S>0&&(C=(-m+Math.sqrt(S))/(2*f),e.push(new h(C,P-C*E)),C=(-m-Math.sqrt(S))/(2*f),e.push(new h(C,P-C*E)))}}return e};p.exports=o}),97439:((p,M,t)=>{var h=t(4042),g=t(81491),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var n=r.getLineA(),u=r.getLineB(),s=r.getLineC(),l=r.getLineD();h(n,a,e),h(u,a,e),h(s,a,e),h(l,a,e)}return e};p.exports=o}),4042:((p,M,t)=>{var h=t(2141),g=t(80462),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var n=a.x1,u=a.y1,s=a.x2,l=a.y2,c=r.x,d=r.y,f=r.radius,m=s-n,y=l-u,S=n-c,C=u-d,E=m*m+y*y,P=2*(m*S+y*C),A=S*S+C*C-f*f,R=P*P-4*E*A,G,b;if(R===0){var L=-P/(2*E);G=n+L*m,b=u+L*y,L>=0&&L<=1&&e.push(new h(G,b))}else if(R>0){var w=(-P-Math.sqrt(R))/(2*E);G=n+w*m,b=u+w*y,w>=0&&w<=1&&e.push(new h(G,b));var B=(-P+Math.sqrt(R))/(2*E);G=n+B*m,b=u+B*y,B>=0&&B<=1&&e.push(new h(G,b))}}return e};p.exports=o}),36100:((p,M,t)=>{var h=t(25836),g=function(o,a,r,e){r===void 0&&(r=!1);var n=o.x1,u=o.y1,s=o.x2,l=o.y2,c=a.x1,d=a.y1,f=a.x2,m=a.y2,y=s-n,S=l-u,C=f-c,E=m-d,P=y*E-S*C;if(P===0)return null;var A,R,G;if(r){if(A=(y*(d-u)+S*(n-c))/(C*S-E*y),y!==0)R=(c+C*A-n)/y;else if(S!==0)R=(d+E*A-u)/S;else return null;if(R<0||A<0||A>1)return null;G=R}else{if(A=((c-n)*E-(d-u)*C)/P,R=((u-d)*y-(n-c)*S)/P,A<0||A>1||R<0||R>1)return null;G=A}return e===void 0&&(e=new h),e.set(n+y*G,u+S*G,G)};p.exports=g}),3073:((p,M,t)=>{var h=t(36100),g=t(23031),o=t(25836),a=new g,r=new o,e=function(n,u,s,l){s===void 0&&(s=!1),l===void 0&&(l=new o);var c=!1;l.set(),r.set();for(var d=u[u.length-1],f=0;f<u.length;f++){var m=u[f];a.setTo(d.x,d.y,m.x,m.y),d=m,h(n,a,s,r)&&(!c||r.z<l.z)&&(l.copy(r),c=!0)}return c?l:null};p.exports=e}),56362:((p,M,t)=>{var h=t(25836),g=t(61369),o=t(3073),a=new h,r=function(e,n,u,s){s===void 0&&(s=new g),Array.isArray(n)||(n=[n]);var l=!1;s.set(),a.set();for(var c=0;c<n.length;c++)o(e,n[c].points,u,a)&&(!l||a.z<s.z)&&(s.set(a.x,a.y,a.z,c),l=!0);return l?s:null};p.exports=r}),60646:((p,M,t)=>{var h=t(2141),g=t(76112),o=t(92773),a=function(r,e,n){if(n===void 0&&(n=[]),o(r,e))for(var u=e.getLineA(),s=e.getLineB(),l=e.getLineC(),c=e.getLineD(),d=[new h,new h,new h,new h],f=[g(u,r,d[0]),g(s,r,d[1]),g(l,r,d[2]),g(c,r,d[3])],m=0;m<4;m++)f[m]&&n.push(d[m]);return n};p.exports=a}),71147:((p,M,t)=>{var h=t(61369),g=t(56362),o=t(23031),a=new o;function r(u,s,l,c,d){var f=Math.cos(u),m=Math.sin(u);a.setTo(s,l,s+f,l+m);var y=g(a,c,!0);y&&d.push(new h(y.x,y.y,u,y.w))}function e(u,s){return u.z-s.z}var n=function(u,s,l){Array.isArray(l)||(l=[l]);for(var c=[],d=[],f=0;f<l.length;f++)for(var m=l[f].points,y=0;y<m.length;y++){var S=Math.atan2(m[y].y-s,m[y].x-u);d.indexOf(S)===-1&&(r(S,u,s,l,c),r(S-1e-5,u,s,l,c),r(S+1e-5,u,s,l,c),d.push(S))}return c.sort(e)};p.exports=n}),68389:((p,M,t)=>{var h=t(87841),g=t(59996),o=function(a,r,e){return e===void 0&&(e=new h),g(a,r)&&(e.x=Math.max(a.x,r.x),e.y=Math.max(a.y,r.y),e.width=Math.min(a.right,r.right)-e.x,e.height=Math.min(a.bottom,r.bottom)-e.y),e};p.exports=o}),52784:((p,M,t)=>{var h=t(60646),g=t(59996),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var n=a.getLineA(),u=a.getLineB(),s=a.getLineC(),l=a.getLineD();h(n,r,e),h(u,r,e),h(s,r,e),h(l,r,e)}return e};p.exports=o}),26341:((p,M,t)=>{var h=t(89265),g=t(60646),o=function(a,r,e){if(e===void 0&&(e=[]),h(a,r)){var n=r.getLineA(),u=r.getLineB(),s=r.getLineC();g(n,a,e),g(u,a,e),g(s,a,e)}return e};p.exports=o}),38720:((p,M,t)=>{var h=t(4042),g=t(67636),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var n=a.getLineA(),u=a.getLineB(),s=a.getLineC();h(n,r,e),h(u,r,e),h(s,r,e)}return e};p.exports=o}),13882:((p,M,t)=>{var h=t(2141),g=t(2822),o=t(76112),a=function(r,e,n){if(n===void 0&&(n=[]),g(r,e))for(var u=r.getLineA(),s=r.getLineB(),l=r.getLineC(),c=[new h,new h,new h],d=[o(u,e,c[0]),o(s,e,c[1]),o(l,e,c[2])],f=0;f<3;f++)d[f]&&n.push(c[f]);return n};p.exports=a}),75636:((p,M,t)=>{var h=t(82944),g=t(13882),o=function(a,r,e){if(e===void 0&&(e=[]),h(a,r)){var n=r.getLineA(),u=r.getLineB(),s=r.getLineC();g(a,n,e),g(a,u,e),g(a,s,e)}return e};p.exports=o}),80462:((p,M,t)=>{var h=t(87902),g=t(2141),o=new g,a=function(r,e,n){if(n===void 0&&(n=o),h(e,r.x1,r.y1))return n.x=r.x1,n.y=r.y1,!0;if(h(e,r.x2,r.y2))return n.x=r.x2,n.y=r.y2,!0;var u=r.x2-r.x1,s=r.y2-r.y1,l=e.x-r.x1,c=e.y-r.y1,d=u*u+s*s,f=u,m=s;if(d>0){var y=(l*u+c*s)/d;f*=y,m*=y}n.x=r.x1+f,n.y=r.y1+m;var S=f*f+m*m;return S<=d&&f*u+m*s>=0&&h(e,n.x,n.y)};p.exports=a}),76112:(p=>{var M=function(t,h,g){var o=t.x1,a=t.y1,r=t.x2,e=t.y2,n=h.x1,u=h.y1,s=h.x2,l=h.y2;if(o===r&&a===e||n===s&&u===l)return!1;var c=(l-u)*(r-o)-(s-n)*(e-a);if(c===0)return!1;var d=((s-n)*(a-u)-(l-u)*(o-n))/c,f=((r-o)*(a-u)-(e-a)*(o-n))/c;return d<0||d>1||f<0||f>1?!1:(g&&(g.x=o+d*(r-o),g.y=a+d*(e-a)),!0)};p.exports=M}),92773:(p=>{var M=function(t,h){var g=t.x1,o=t.y1,a=t.x2,r=t.y2,e=h.x,n=h.y,u=h.right,s=h.bottom,l=0;if(g>=e&&g<=u&&o>=n&&o<=s||a>=e&&a<=u&&r>=n&&r<=s)return!0;if(g<e&&a>=e){if(l=o+(r-o)*(e-g)/(a-g),l>n&&l<=s)return!0}else if(g>u&&a<=u&&(l=o+(r-o)*(u-g)/(a-g),l>=n&&l<=s))return!0;if(o<n&&r>=n){if(l=g+(a-g)*(n-o)/(r-o),l>=e&&l<=u)return!0}else if(o>s&&r<=s&&(l=g+(a-g)*(s-o)/(r-o),l>=e&&l<=u))return!0;return!1};p.exports=M}),16204:(p=>{var M=function(t,h,g){g===void 0&&(g=1);var o=h.x1,a=h.y1,r=h.x2,e=h.y2,n=t.x,u=t.y,s=(r-o)*(r-o)+(e-a)*(e-a);if(s===0)return!1;var l=((n-o)*(r-o)+(u-a)*(e-a))/s;if(l<0)return Math.sqrt((o-n)*(o-n)+(a-u)*(a-u))<=g;if(l>=0&&l<=1){var c=((a-u)*(r-o)-(o-n)*(e-a))/s;return Math.abs(c)*Math.sqrt(s)<=g}else return Math.sqrt((r-n)*(r-n)+(e-u)*(e-u))<=g};p.exports=M}),14199:((p,M,t)=>{var h=t(16204),g=function(o,a){if(!h(o,a))return!1;var r=Math.min(a.x1,a.x2),e=Math.max(a.x1,a.x2),n=Math.min(a.y1,a.y2),u=Math.max(a.y1,a.y2);return o.x>=r&&o.x<=e&&o.y>=n&&o.y<=u};p.exports=g}),59996:(p=>{var M=function(t,h){return t.width<=0||t.height<=0||h.width<=0||h.height<=0?!1:!(t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)};p.exports=M}),89265:((p,M,t)=>{var h=t(76112),g=t(37303),o=t(48653),a=t(77493),r=function(e,n){if(n.left>e.right||n.right<e.left||n.top>e.bottom||n.bottom<e.top)return!1;var u=n.getLineA(),s=n.getLineB(),l=n.getLineC();if(g(e,u.x1,u.y1)||g(e,u.x2,u.y2)||g(e,s.x1,s.y1)||g(e,s.x2,s.y2)||g(e,l.x1,l.y1)||g(e,l.x2,l.y2))return!0;var c=e.getLineA(),d=e.getLineB(),f=e.getLineC(),m=e.getLineD();if(h(u,c)||h(u,d)||h(u,f)||h(u,m)||h(s,c)||h(s,d)||h(s,f)||h(s,m)||h(l,c)||h(l,d)||h(l,f)||h(l,m))return!0;var y=a(e),S=o(n,y,!0);return S.length>0};p.exports=r}),84411:(p=>{var M=function(t,h,g,o,a,r){return r===void 0&&(r=0),!(h>t.right+r||g<t.left-r||o>t.bottom+r||a<t.top-r)};p.exports=M}),67636:((p,M,t)=>{var h=t(80462),g=t(10690),o=function(a,r){return a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top?!1:!!(g(a,r.x,r.y)||h(a.getLineA(),r)||h(a.getLineB(),r)||h(a.getLineC(),r))};p.exports=o}),2822:((p,M,t)=>{var h=t(76112),g=function(o,a){return!!(o.contains(a.x1,a.y1)||o.contains(a.x2,a.y2)||h(o.getLineA(),a)||h(o.getLineB(),a)||h(o.getLineC(),a))};p.exports=g}),82944:((p,M,t)=>{var h=t(48653),g=t(71694),o=t(76112),a=function(r,e){if(r.left>e.right||r.right<e.left||r.top>e.bottom||r.bottom<e.top)return!1;var n=r.getLineA(),u=r.getLineB(),s=r.getLineC(),l=e.getLineA(),c=e.getLineB(),d=e.getLineC();if(o(n,l)||o(n,c)||o(n,d)||o(u,l)||o(u,c)||o(u,d)||o(s,l)||o(s,c)||o(s,d))return!0;var f=g(r),m=h(e,f,!0);return m.length>0||(f=g(e),m=h(r,f,!0),m.length>0)};p.exports=a}),91865:((p,M,t)=>{p.exports={CircleToCircle:t(2044),CircleToRectangle:t(81491),GetCircleToCircle:t(63376),GetCircleToRectangle:t(97439),GetLineToCircle:t(4042),GetLineToLine:t(36100),GetLineToPoints:t(3073),GetLineToPolygon:t(56362),GetLineToRectangle:t(60646),GetRaysFromPointToPolygon:t(71147),GetRectangleIntersection:t(68389),GetRectangleToRectangle:t(52784),GetRectangleToTriangle:t(26341),GetTriangleToCircle:t(38720),GetTriangleToLine:t(13882),GetTriangleToTriangle:t(75636),LineToCircle:t(80462),LineToLine:t(76112),LineToRectangle:t(92773),PointToLine:t(16204),PointToLineSegment:t(14199),RectangleToRectangle:t(59996),RectangleToTriangle:t(89265),RectangleToValues:t(84411),TriangleToCircle:t(67636),TriangleToLine:t(2822),TriangleToTriangle:t(82944)}}),91938:(p=>{var M=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};p.exports=M}),84993:(p=>{var M=function(t,h,g){h===void 0&&(h=1),g===void 0&&(g=[]);var o=Math.round(t.x1),a=Math.round(t.y1),r=Math.round(t.x2),e=Math.round(t.y2),n=Math.abs(r-o),u=Math.abs(e-a),s=o<r?1:-1,l=a<e?1:-1,c=n-u;g.push({x:o,y:a});for(var d=1;!(o===r&&a===e);){var f=c<<1;f>-u&&(c-=u,o+=s),f<n&&(c+=n,a+=l),d%h===0&&g.push({x:o,y:a}),d++}return g};p.exports=M}),36469:(p=>{var M=function(t,h,g){var o=h-(t.x1+t.x2)/2,a=g-(t.y1+t.y2)/2;return t.x1+=o,t.y1+=a,t.x2+=o,t.y2+=a,t};p.exports=M}),31116:((p,M,t)=>{var h=t(23031),g=function(o){return new h(o.x1,o.y1,o.x2,o.y2)};p.exports=g}),59944:(p=>{var M=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2)};p.exports=M}),59220:(p=>{var M=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2};p.exports=M}),78177:((p,M,t)=>{var h=t(35001),g=function(o,a,r){r===void 0&&(r=a);var e=h(o),n=o.x2-o.x1,u=o.y2-o.y1;return a&&(o.x1=o.x1-n/e*a,o.y1=o.y1-u/e*a),r&&(o.x2=o.x2+n/e*r,o.y2=o.y2+u/e*r),o};p.exports=g}),26708:((p,M,t)=>{var h=t(52816),g=t(6113),o=t(2141),a=function(r,e,n,u,s){u===void 0&&(u=0),s===void 0&&(s=[]);var l=[],c=r.x1,d=r.y1,f=r.x2-c,m=r.y2-d,y=g(e,s),S,C,E=n-1;for(S=0;S<E;S++)C=y(S/E),l.push(new o(c+f*C,d+m*C));if(C=y(1),l.push(new o(c+f*C,d+m*C)),u>0){var P=l[0],A=[P];for(S=1;S<l.length-1;S++){var R=l[S];h(P,R)>=u&&(A.push(R),P=R)}var G=l[l.length-1];return h(P,G)<u&&A.pop(),A.push(G),A}else return l};p.exports=a}),32125:((p,M,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=(o.x1+o.x2)/2,a.y=(o.y1+o.y2)/2,a};p.exports=g}),99569:((p,M,t)=>{var h=t(2141),g=function(o,a,r){r===void 0&&(r=new h);var e=o.x1,n=o.y1,u=o.x2,s=o.y2,l=(u-e)*(u-e)+(s-n)*(s-n);if(l===0)return r;var c=((a.x-e)*(u-e)+(a.y-n)*(s-n))/l;return r.x=e+c*(u-e),r.y=n+c*(s-n),r};p.exports=g}),34638:((p,M,t)=>{var h=t(36383),g=t(91938),o=t(2141),a=function(r,e){e===void 0&&(e=new o);var n=g(r)-h.TAU;return e.x=Math.cos(n),e.y=Math.sin(n),e};p.exports=a}),13151:((p,M,t)=>{var h=t(2141),g=function(o,a,r){return r===void 0&&(r=new h),r.x=o.x1+(o.x2-o.x1)*a,r.y=o.y1+(o.y2-o.y1)*a,r};p.exports=g}),15258:((p,M,t)=>{var h=t(35001),g=t(2141),o=function(a,r,e,n){n===void 0&&(n=[]),!r&&e>0&&(r=h(a)/e);for(var u=a.x1,s=a.y1,l=a.x2,c=a.y2,d=0;d<r;d++){var f=d/r,m=u+(l-u)*f,y=s+(c-s)*f;n.push(new g(m,y))}return n};p.exports=o}),26408:(p=>{var M=function(t,h){var g=t.x1,o=t.y1,a=t.x2,r=t.y2,e=(a-g)*(a-g)+(r-o)*(r-o);if(e===0)return!1;var n=((o-h.y)*(a-g)-(g-h.x)*(r-o))/e;return Math.abs(n)*Math.sqrt(e)};p.exports=M}),98770:(p=>{var M=function(t){return Math.abs(t.y1-t.y2)};p.exports=M}),35001:(p=>{var M=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};p.exports=M}),23031:((p,M,t)=>{var h=t(83419),g=t(13151),o=t(15258),a=t(23777),r=t(65822),e=t(26099),n=new h({initialize:function(s,l,c,d){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),this.type=a.LINE,this.x1=s,this.y1=l,this.x2=c,this.y2=d},getPoint:function(u,s){return g(this,u,s)},getPoints:function(u,s,l){return o(this,u,s,l)},getRandomPoint:function(u){return r(this,u)},setTo:function(u,s,l,c){return u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),this.x1=u,this.y1=s,this.x2=l,this.y2=c,this},setFromObjects:function(u,s){return this.x1=u.x,this.y1=u.y,this.x2=s.x,this.y2=s.y,this},getPointA:function(u){return u===void 0&&(u=new e),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new e),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});p.exports=n}),64795:((p,M,t)=>{var h=t(36383),g=t(15994),o=t(91938),a=function(r){var e=o(r)-h.TAU;return g(e,-Math.PI,Math.PI)};p.exports=a}),52616:((p,M,t)=>{var h=t(36383),g=t(91938),o=function(a){return Math.cos(g(a)-h.TAU)};p.exports=o}),87231:((p,M,t)=>{var h=t(36383),g=t(91938),o=function(a){return Math.sin(g(a)-h.TAU)};p.exports=o}),89662:(p=>{var M=function(t,h,g){return t.x1+=h,t.y1+=g,t.x2+=h,t.y2+=g,t};p.exports=M}),71165:(p=>{var M=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};p.exports=M}),65822:((p,M,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=Math.random();return a.x=o.x1+r*(o.x2-o.x1),a.y=o.y1+r*(o.y2-o.y1),a};p.exports=g}),69777:((p,M,t)=>{var h=t(91938),g=t(64795),o=function(a,r){return 2*g(r)-Math.PI-h(a)};p.exports=o}),39706:((p,M,t)=>{var h=t(64400),g=function(o,a){var r=(o.x1+o.x2)/2,e=(o.y1+o.y2)/2;return h(o,r,e,a)};p.exports=g}),82585:((p,M,t)=>{var h=t(64400),g=function(o,a,r){return h(o,a.x,a.y,r)};p.exports=g}),64400:(p=>{var M=function(t,h,g,o){var a=Math.cos(o),r=Math.sin(o),e=t.x1-h,n=t.y1-g;return t.x1=e*a-n*r+h,t.y1=e*r+n*a+g,e=t.x2-h,n=t.y2-g,t.x2=e*a-n*r+h,t.y2=e*r+n*a+g,t};p.exports=M}),62377:(p=>{var M=function(t,h,g,o,a){return t.x1=h,t.y1=g,t.x2=h+Math.cos(o)*a,t.y2=g+Math.sin(o)*a,t};p.exports=M}),71366:(p=>{var M=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};p.exports=M}),10809:(p=>{var M=function(t){return Math.abs(t.x1-t.x2)};p.exports=M}),2529:((p,M,t)=>{var h=t(23031);h.Angle=t(91938),h.BresenhamPoints=t(84993),h.CenterOn=t(36469),h.Clone=t(31116),h.CopyFrom=t(59944),h.Equals=t(59220),h.Extend=t(78177),h.GetEasedPoints=t(26708),h.GetMidPoint=t(32125),h.GetNearestPoint=t(99569),h.GetNormal=t(34638),h.GetPoint=t(13151),h.GetPoints=t(15258),h.GetShortestDistance=t(26408),h.Height=t(98770),h.Length=t(35001),h.NormalAngle=t(64795),h.NormalX=t(52616),h.NormalY=t(87231),h.Offset=t(89662),h.PerpSlope=t(71165),h.Random=t(65822),h.ReflectAngle=t(69777),h.Rotate=t(39706),h.RotateAroundPoint=t(82585),h.RotateAroundXY=t(64400),h.SetToAngle=t(62377),h.Slope=t(71366),h.Width=t(10809),p.exports=h}),83997:((p,M,t)=>{var h=t(83419),g=t(87841),o=t(26099);function a(e,n,u,s){var l=e-u,c=n-s,d=l*l+c*c;return Math.sqrt(d)}var r=new h({initialize:function(n,u,s){this.vertex1=n,this.vertex2=u,this.vertex3=s,this.bounds=new g,this._inCenter=new o},getInCenter:function(e){e===void 0&&(e=!0);var n=this.vertex1,u=this.vertex2,s=this.vertex3,l,c,d,f,m,y;e?(l=n.x,c=n.y,d=u.x,f=u.y,m=s.x,y=s.y):(l=n.vx,c=n.vy,d=u.vx,f=u.vy,m=s.vx,y=s.vy);var S=a(m,y,d,f),C=a(l,c,m,y),E=a(d,f,l,c),P=S+C+E;return this._inCenter.set((l*S+d*C+m*E)/P,(c*S+f*C+y*E)/P)},contains:function(e,n,u){var s=this.vertex1,l=this.vertex2,c=this.vertex3,d=s.vx,f=s.vy,m=l.vx,y=l.vy,S=c.vx,C=c.vy;if(u){var E=u.a,P=u.b,A=u.c,R=u.d,G=u.e,b=u.f;d=s.vx*E+s.vy*A+G,f=s.vx*P+s.vy*R+b,m=l.vx*E+l.vy*A+G,y=l.vx*P+l.vy*R+b,S=c.vx*E+c.vy*A+G,C=c.vx*P+c.vy*R+b}var L=S-d,w=C-f,B=m-d,N=y-f,Y=e-d,U=n-f,W=L*L+w*w,O=L*B+w*N,V=L*Y+w*U,X=B*B+N*N,z=B*Y+N*U,I=W*X-O*O,Z=I===0?0:1/I,J=(X*V-O*z)*Z,k=(W*z-O*V)*Z;return J>=0&&k>=0&&J+k<1},isCounterClockwise:function(e){var n=this.vertex1,u=this.vertex2,s=this.vertex3,l=(u.vx-n.vx)*(s.vy-n.vy)-(u.vy-n.vy)*(s.vx-n.vx);return e<=0?l>=0:l<0},load:function(e,n,u,s,l){return u=this.vertex1.load(e,n,u,s,l),u=this.vertex2.load(e,n,u,s,l),u=this.vertex3.load(e,n,u,s,l),u},transformCoordinatesLocal:function(e,n,u,s){return this.vertex1.transformCoordinatesLocal(e,n,u,s),this.vertex2.transformCoordinatesLocal(e,n,u,s),this.vertex3.transformCoordinatesLocal(e,n,u,s),this},updateBounds:function(){var e=this.vertex1,n=this.vertex2,u=this.vertex3,s=this.bounds;return s.x=Math.min(e.vx,n.vx,u.vx),s.y=Math.min(e.vy,n.vy,u.vy),s.width=Math.max(e.vx,n.vx,u.vx)-s.x,s.height=Math.max(e.vy,n.vy,u.vy)-s.y,this},isInView:function(e,n,u,s,l,c,d,f,m,y,S){this.update(s,l,c,d,f,m,y,S);var C=this.vertex1,E=this.vertex2,P=this.vertex3;if(C.ta<=0&&E.ta<=0&&P.ta<=0||n&&!this.isCounterClockwise(u))return!1;var A=this.bounds;A.x=Math.min(C.tx,E.tx,P.tx),A.y=Math.min(C.ty,E.ty,P.ty),A.width=Math.max(C.tx,E.tx,P.tx)-A.x,A.height=Math.max(C.ty,E.ty,P.ty)-A.y;var R=e.x+e.width,G=e.y+e.height;return A.width<=0||A.height<=0||e.width<=0||e.height<=0?!1:!(A.right<e.x||A.bottom<e.y||A.x>R||A.y>G)},scrollUV:function(e,n){return this.vertex1.scrollUV(e,n),this.vertex2.scrollUV(e,n),this.vertex3.scrollUV(e,n),this},scaleUV:function(e,n){return this.vertex1.scaleUV(e,n),this.vertex2.scaleUV(e,n),this.vertex3.scaleUV(e,n),this},setColor:function(e){return this.vertex1.color=e,this.vertex2.color=e,this.vertex3.color=e,this},update:function(e,n,u,s,l,c,d,f){return this.vertex1.update(n,u,s,l,c,d,f,e),this.vertex2.update(n,u,s,l,c,d,f,e),this.vertex3.update(n,u,s,l,c,d,f,e),this},translate:function(e,n){n===void 0&&(n=0);var u=this.vertex1,s=this.vertex2,l=this.vertex3;return u.x+=e,u.y+=n,s.x+=e,s.y+=n,l.x+=e,l.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(e){var n=this.getInCenter();this.translate(e-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var n=this.getInCenter();this.translate(0,e-n.y)}},alpha:{get:function(){var e=this.vertex1,n=this.vertex2,u=this.vertex3;return(e.alpha+n.alpha+u.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,n=this.vertex2,u=this.vertex3;return(e.vz+n.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});p.exports=r}),48803:((p,M,t)=>{var h=t(83997),g=t(95540),o=t(37867),a=t(25836),r=t(39318),e=new a,n=new a,u=new o,s=function(l){var c=g(l,"mesh"),d=g(l,"texture",null),f=g(l,"frame"),m=g(l,"width",1),y=g(l,"height",m),S=g(l,"widthSegments",1),C=g(l,"heightSegments",S),E=g(l,"x",0),P=g(l,"y",0),A=g(l,"z",0),R=g(l,"rotateX",0),G=g(l,"rotateY",0),b=g(l,"rotateZ",0),L=g(l,"zIsUp",!0),w=g(l,"isOrtho",c?c.dirtyCache[11]:!1),B=g(l,"colors",[16777215]),N=g(l,"alphas",[1]),Y=g(l,"tile",!1),U=g(l,"flipY",!1),W=g(l,"width",null),O={faces:[],verts:[]};e.set(E,P,A),n.set(R,G,b),u.fromRotationXYTranslation(n,e,L);var V;if(!d&&c)d=c.texture,f||(V=c.frame);else if(c&&typeof d=="string")d=c.scene.sys.textures.get(d);else if(!d)return O;V||(V=d.get(f)),!W&&w&&d&&c&&(m=V.width/c.height,y=V.height/c.height);var X=m/2,z=y/2,I=Math.floor(S),Z=Math.floor(C),J=I+1,k=Z+1,j=m/I,tt=y/Z,ht=[],ot=[],st,ft,ut=0,lt=1,Tt=0,bt=1;V&&(ut=V.u0,lt=V.u1,U?(Tt=V.v1,bt=V.v0):(Tt=V.v0,bt=V.v1));var Dt=lt-ut,ct=bt-Tt;for(ft=0;ft<k;ft++){var yt=ft*tt-z;for(st=0;st<J;st++){var Et=st*j-X;ot.push(Et,-yt);var At=ut+Dt*(st/I),It=Tt+ct*(ft/Z);ht.push(At,It)}}Array.isArray(B)||(B=[B]),Array.isArray(N)||(N=[N]);var Ft=0,wt=0;for(ft=0;ft<Z;ft++)for(st=0;st<I;st++){var Bt=(st+J*ft)*2,le=(st+J*(ft+1))*2,pe=(st+1+J*(ft+1))*2,Ut=(st+1+J*ft)*2,he=B[wt],Pt=N[Ft],Ot=new r(ot[Bt],ot[Bt+1],0,ht[Bt],ht[Bt+1],he,Pt).transformMat4(u),se=new r(ot[le],ot[le+1],0,ht[le],ht[le+1],he,Pt).transformMat4(u),fe=new r(ot[Ut],ot[Ut+1],0,ht[Ut],ht[Ut+1],he,Pt).transformMat4(u),Kt=new r(ot[le],ot[le+1],0,ht[le],ht[le+1],he,Pt).transformMat4(u),ye=new r(ot[pe],ot[pe+1],0,ht[pe],ht[pe+1],he,Pt).transformMat4(u),Le=new r(ot[Ut],ot[Ut+1],0,ht[Ut],ht[Ut+1],he,Pt).transformMat4(u);Y&&(Ot.setUVs(ut,bt),se.setUVs(ut,Tt),fe.setUVs(lt,bt),Kt.setUVs(ut,Tt),ye.setUVs(lt,Tt),Le.setUVs(lt,bt)),wt++,wt===B.length&&(wt=0),Ft++,Ft===N.length&&(Ft=0),O.verts.push(Ot,se,fe,Kt,ye,Le),O.faces.push(new h(Ot,se,fe),new h(Kt,ye,Le))}return c&&(c.faces=c.faces.concat(O.faces),c.vertices=c.vertices.concat(O.verts)),O};p.exports=s}),34684:((p,M,t)=>{var h=t(83997),g=t(37867),o=t(25836),a=t(39318),r=new o,e=new o,n=new g,u=function(s,l,c,d,f,m,y,S,C,E){c===void 0&&(c=1),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=!0);var P={faces:[],verts:[]},A=s.materials;r.set(d,f,m),e.set(y,S,C),n.fromRotationXYTranslation(e,r,E);for(var R=0;R<s.models.length;R++)for(var G=s.models[R],b=G.vertices,L=G.textureCoords,w=G.faces,B=0;B<w.length;B++){var N=w[B],Y=N.vertices[0],U=N.vertices[1],W=N.vertices[2],O=b[Y.vertexIndex],V=b[U.vertexIndex],X=b[W.vertexIndex],z=Y.textureCoordsIndex,I=U.textureCoordsIndex,Z=W.textureCoordsIndex,J=z===-1?{u:0,v:1}:L[z],k=I===-1?{u:0,v:0}:L[I],j=Z===-1?{u:1,v:1}:L[Z],tt=16777215;N.material!==""&&A[N.material]&&(tt=A[N.material]);var ht=new a(O.x*c,O.y*c,O.z*c,J.u,J.v,tt).transformMat4(n),ot=new a(V.x*c,V.y*c,V.z*c,k.u,k.v,tt).transformMat4(n),st=new a(X.x*c,X.y*c,X.z*c,j.u,j.v,tt).transformMat4(n);P.verts.push(ht,ot,st),P.faces.push(new h(ht,ot,st))}return l&&(l.faces=l.faces.concat(P.faces),l.vertices=l.vertices.concat(P.verts)),P};p.exports=u}),92515:((p,M,t)=>{var h=t(83997),g=t(39318),o=function(a,r,e,n,u,s,l,c){if(n===void 0&&(n=!1),s===void 0&&(s=16777215),l===void 0&&(l=1),c===void 0&&(c=!1),a.length!==r.length&&!n){console.warn("GenerateVerts: vertices and uvs count not equal");return}var d={faces:[],vertices:[]},f,m,y,S,C,E,P,A,R,G,b,L=n?3:2,w=Array.isArray(s),B=Array.isArray(l);if(Array.isArray(e)&&e.length>0)for(f=0;f<e.length;f++){var N=e[f],Y=e[f]*2,U=e[f]*L;m=a[U],y=a[U+1],S=n?a[U+2]:0,C=r[Y],E=r[Y+1],c&&(E=1-E),P=w?s[N]:s,A=B?l[N]:l,R=0,G=0,b=0,u&&(R=u[U],G=u[U+1],b=n?u[U+2]:0),d.vertices.push(new g(m,y,S,C,E,P,A,R,G,b))}else{var W=0,O=0;for(f=0;f<a.length;f+=L)m=a[f],y=a[f+1],S=n?a[f+2]:0,C=r[W],E=r[W+1],P=w?s[O]:s,A=B?l[O]:l,R=0,G=0,b=0,u&&(R=u[f],G=u[f+1],b=n?u[f+2]:0),d.vertices.push(new g(m,y,S,C,E,P,A,R,G,b)),W+=2,O++}for(f=0;f<d.vertices.length;f+=3){var V=d.vertices[f],X=d.vertices[f+1],z=d.vertices[f+2];d.faces.push(new h(V,X,z))}return d};p.exports=o}),85048:(p=>{var M=!0,t="untitled",h="",g="";function o(m){var y=m.indexOf("#");return y>-1?m.substring(0,y):m}function a(m){return m.models.length===0&&m.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),h="",m.models[m.models.length-1]}function r(m,y){var S=m.length>=2?m[1]:t;y.models.push({faces:[],name:S,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function e(m){m.length===2&&(h=m[1])}function n(m,y){var S=m.length,C=S>=2?parseFloat(m[1]):0,E=S>=3?parseFloat(m[2]):0,P=S>=4?parseFloat(m[3]):0;a(y).vertices.push({x:C,y:E,z:P})}function u(m,y){var S=m.length,C=S>=2?parseFloat(m[1]):0,E=S>=3?parseFloat(m[2]):0,P=S>=4?parseFloat(m[3]):0;isNaN(C)&&(C=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),M&&(E=1-E),a(y).textureCoords.push({u:C,v:E,w:P})}function s(m,y){var S=m.length,C=S>=2?parseFloat(m[1]):0,E=S>=3?parseFloat(m[2]):0,P=S>=4?parseFloat(m[3]):0;a(y).vertexNormals.push({x:C,y:E,z:P})}function l(m,y){var S=m.length-1;if(!(S<3)){for(var C={group:h,material:g,vertices:[]},E=0;E<S;E++){var P=m[E+1],A=P.split("/"),R=A.length;if(!(R<1||R>3)){var G=0,b=0,L=0;G=parseInt(A[0],10),R>1&&A[1]!==""&&(b=parseInt(A[1],10)),R>2&&(L=parseInt(A[2],10)),G!==0&&(G<0&&(G=a(y).vertices.length+1+G),b-=1,G-=1,L-=1,C.vertices.push({textureCoordsIndex:b,vertexIndex:G,vertexNormalIndex:L}))}}a(y).faces.push(C)}}function c(m,y){m.length>=2&&y.materialLibraries.push(m[1])}function d(m){m.length>=2&&(g=m[1])}var f=function(m,y){y===void 0&&(y=!0),M=y;var S={materials:{},materialLibraries:[],models:[]};h="",g="";for(var C=m.split(`
`),E=0;E<C.length;E++){var P=o(C[E]),A=P.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":r(A,S);break;case"g":e(A);break;case"v":n(A,S);break;case"vt":u(A,S);break;case"vn":s(A,S);break;case"f":l(A,S);break;case"mtllib":c(A,S);break;case"usemtl":d(A);break}}return S};p.exports=f}),61485:((p,M,t)=>{var h=t(37589),g=function(o){for(var a={},r=o.split(`
`),e="",n=0;n<r.length;n++){var u=r[n].trim();if(!(u.indexOf("#")===0||u==="")){var s=u.replace(/\s\s+/g," ").trim().split(" ");switch(s[0].toLowerCase()){case"newmtl":{e=s[1];break}case"kd":{var l=Math.floor(s[1]*255),c=s.length>=2?Math.floor(s[2]*255):l,d=s.length>=3?Math.floor(s[3]*255):l;a[e]=h(l,c,d);break}}}}return a};p.exports=g}),92570:(p=>{var M=function(t,h,g,o){var a,r;if(g===void 0&&o===void 0){var e=t.getInCenter();a=e.x,r=e.y}var n=Math.cos(h),u=Math.sin(h),s=t.vertex1,l=t.vertex2,c=t.vertex3,d=s.x-a,f=s.y-r;s.set(d*n-f*u+a,d*u+f*n+r),d=l.x-a,f=l.y-r,l.set(d*n-f*u+a,d*u+f*n+r),d=c.x-a,f=c.y-r,c.set(d*n-f*u+a,d*u+f*n+r)};p.exports=M}),39318:((p,M,t)=>{var h=t(83419),g=t(70554),o=t(25836),a=new h({Extends:o,initialize:function(e,n,u,s,l,c,d,f,m,y){c===void 0&&(c=16777215),d===void 0&&(d=1),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),o.call(this,e,n,u),this.vx=0,this.vy=0,this.vz=0,this.nx=f,this.ny=m,this.nz=y,this.u=s,this.v=l,this.color=c,this.alpha=d,this.tx=0,this.ty=0,this.ta=0,this.tu=s,this.tv=l},setUVs:function(r,e){return this.u=r,this.v=e,this.tu=r,this.tv=e,this},scrollUV:function(r,e){return this.tu+=r,this.tv+=e,this},scaleUV:function(r,e){return this.tu=this.u*r,this.tv=this.v*e,this},transformCoordinatesLocal:function(r,e,n,u){var s=this.x,l=this.y,c=this.z,d=r.val,f=s*d[0]+l*d[4]+c*d[8]+d[12],m=s*d[1]+l*d[5]+c*d[9]+d[13],y=s*d[2]+l*d[6]+c*d[10]+d[14],S=s*d[3]+l*d[7]+c*d[11]+d[15];this.vx=f/S*e,this.vy=-(m/S)*n,u<=0?this.vz=y/S:this.vz=-(y/S)},resize:function(r,e,n,u,s,l){return this.x=r,this.y=e,this.vx=this.x*n,this.vy=-this.y*u,this.vz=0,s<.5?this.vx+=n*(.5-s):s>.5&&(this.vx-=n*(s-.5)),l<.5?this.vy+=u*(.5-l):l>.5&&(this.vy-=u*(l-.5)),this},update:function(r,e,n,u,s,l,c,d){var f=this.vx*r+this.vy*n+s,m=this.vx*e+this.vy*u+l;return c&&(f=Math.round(f),m=Math.round(m)),this.tx=f,this.ty=m,this.ta=this.alpha*d,this},load:function(r,e,n,u,s){return r[++n]=this.tx,r[++n]=this.ty,r[++n]=this.tu,r[++n]=this.tv,r[++n]=u,r[++n]=s,e[++n]=g.getTintAppendFloatAlpha(this.color,this.ta),n}});p.exports=a}),73090:((p,M,t)=>{var h={Face:t(83997),GenerateGridVerts:t(48803),GenerateObjVerts:t(34684),GenerateVerts:t(92515),ParseObj:t(85048),ParseObjMaterial:t(61485),RotateFace:t(92570),Vertex:t(39318)};p.exports=h}),96550:(p=>{var M=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};p.exports=M}),99706:((p,M,t)=>{var h=t(2141),g=function(o){return new h(o.x,o.y)};p.exports=g}),68010:(p=>{var M=function(t,h){return h.setTo(t.x,t.y)};p.exports=M}),27814:(p=>{var M=function(t,h){return t.x===h.x&&t.y===h.y};p.exports=M}),73565:(p=>{var M=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};p.exports=M}),87555:((p,M,t)=>{var h=t(2141),g=function(o,a){if(a===void 0&&(a=new h),!Array.isArray(o))throw new Error("GetCentroid points argument must be an array");var r=o.length;if(r<1)throw new Error("GetCentroid points array must not be empty");if(r===1)a.x=o[0].x,a.y=o[0].y;else{for(var e=0;e<r;e++)a.x+=o[e].x,a.y+=o[e].y;a.x/=r,a.y/=r}return a};p.exports=g}),28793:(p=>{var M=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};p.exports=M}),44405:(p=>{var M=function(t){return t.x*t.x+t.y*t.y};p.exports=M}),20873:((p,M,t)=>{var h=t(87841),g=function(o,a){a===void 0&&(a=new h);for(var r=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,s=0;s<o.length;s++){var l=o[s];l.x>r&&(r=l.x),l.x<e&&(e=l.x),l.y>n&&(n=l.y),l.y<u&&(u=l.y)}return a.x=e,a.y=u,a.width=r-e,a.height=n-u,a};p.exports=g}),26152:((p,M,t)=>{var h=t(2141),g=function(o,a,r,e){return r===void 0&&(r=0),e===void 0&&(e=new h),e.x=o.x+(a.x-o.x)*r,e.y=o.y+(a.y-o.y)*r,e};p.exports=g}),55767:(p=>{var M=function(t){return t.setTo(t.y,t.x)};p.exports=M}),79432:((p,M,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.setTo(-o.x,-o.y)};p.exports=g}),2141:((p,M,t)=>{var h=t(83419),g=t(23777),o=new h({initialize:function(r,e){r===void 0&&(r=0),e===void 0&&(e=r),this.type=g.POINT,this.x=r,this.y=e},setTo:function(a,r){return a===void 0&&(a=0),r===void 0&&(r=a),this.x=a,this.y=r,this}});p.exports=o}),72930:((p,M,t)=>{var h=t(2141),g=t(44405),o=function(a,r,e){e===void 0&&(e=new h);var n=a.x*r.x+a.y*r.y,u=n/g(r);return u!==0&&(e.x=u*r.x,e.y=u*r.y),e};p.exports=o}),62880:((p,M,t)=>{var h=t(2141),g=function(o,a,r){r===void 0&&(r=new h);var e=o.x*a.x+o.y*a.y;return e!==0&&(r.x=e*a.x,r.y=e*a.y),r};p.exports=g}),15093:((p,M,t)=>{var h=t(28793),g=function(o,a){if(o.x!==0||o.y!==0){var r=h(o);o.x/=r,o.y/=r}return o.x*=a,o.y*=a,o};p.exports=g}),43711:((p,M,t)=>{var h=t(2141);h.Ceil=t(96550),h.Clone=t(99706),h.CopyFrom=t(68010),h.Equals=t(27814),h.Floor=t(73565),h.GetCentroid=t(87555),h.GetMagnitude=t(28793),h.GetMagnitudeSq=t(44405),h.GetRectangleFromPoints=t(20873),h.Interpolate=t(26152),h.Invert=t(55767),h.Negative=t(79432),h.Project=t(72930),h.ProjectUnit=t(62880),h.SetMagnitude=t(15093),p.exports=h}),12306:((p,M,t)=>{var h=t(25717),g=function(o){return new h(o.points)};p.exports=g}),63814:(p=>{var M=function(t,h,g){for(var o=!1,a=-1,r=t.points.length-1;++a<t.points.length;r=a){var e=t.points[a].x,n=t.points[a].y,u=t.points[r].x,s=t.points[r].y;(n<=g&&g<s||s<=g&&g<n)&&h<(u-e)*(g-n)/(s-n)+e&&(o=!o)}return o};p.exports=M}),99338:((p,M,t)=>{var h=t(63814),g=function(o,a){return h(o,a.x,a.y)};p.exports=g}),94811:(p=>{function M(O,V,X){X=X||2;var z=V&&V.length,I=z?V[0]*X:O.length,Z=t(O,0,I,X,!0),J=[];if(!Z||Z.next===Z.prev)return J;var k,j,tt,ht,ot,st,ft;if(z&&(Z=n(O,V,Z,X)),O.length>80*X){k=tt=O[0],j=ht=O[1];for(var ut=X;ut<I;ut+=X)ot=O[ut],st=O[ut+1],ot<k&&(k=ot),st<j&&(j=st),ot>tt&&(tt=ot),st>ht&&(ht=st);ft=Math.max(tt-k,ht-j),ft=ft!==0?32767/ft:0}return g(Z,J,X,k,j,ft,0),J}function t(O,V,X,z,I){var Z,J;if(I===W(O,V,X,z)>0)for(Z=V;Z<X;Z+=z)J=N(Z,O[Z],O[Z+1],J);else for(Z=X-z;Z>=V;Z-=z)J=N(Z,O[Z],O[Z+1],J);return J&&P(J,J.next)&&(Y(J),J=J.next),J}function h(O,V){if(!O)return O;V||(V=O);var X=O,z;do if(z=!1,!X.steiner&&(P(X,X.next)||E(X.prev,X,X.next)===0)){if(Y(X),X=V=X.prev,X===X.next)break;z=!0}else X=X.next;while(z||X!==V);return V}function g(O,V,X,z,I,Z,J){if(O){!J&&Z&&d(O,z,I,Z);for(var k=O,j,tt;O.prev!==O.next;){if(j=O.prev,tt=O.next,Z?a(O,z,I,Z):o(O)){V.push(j.i/X|0),V.push(O.i/X|0),V.push(tt.i/X|0),Y(O),O=tt.next,k=tt.next;continue}if(O=tt,O===k){J?J===1?(O=r(h(O),V,X),g(O,V,X,z,I,Z,2)):J===2&&e(O,V,X,z,I,Z):g(h(O),V,X,z,I,Z,1);break}}}}function o(O){var V=O.prev,X=O,z=O.next;if(E(V,X,z)>=0)return!1;for(var I=V.x,Z=X.x,J=z.x,k=V.y,j=X.y,tt=z.y,ht=I<Z?I<J?I:J:Z<J?Z:J,ot=k<j?k<tt?k:tt:j<tt?j:tt,st=I>Z?I>J?I:J:Z>J?Z:J,ft=k>j?k>tt?k:tt:j>tt?j:tt,ut=z.next;ut!==V;){if(ut.x>=ht&&ut.x<=st&&ut.y>=ot&&ut.y<=ft&&S(I,k,Z,j,J,tt,ut.x,ut.y)&&E(ut.prev,ut,ut.next)>=0)return!1;ut=ut.next}return!0}function a(O,V,X,z){var I=O.prev,Z=O,J=O.next;if(E(I,Z,J)>=0)return!1;for(var k=I.x,j=Z.x,tt=J.x,ht=I.y,ot=Z.y,st=J.y,ft=k<j?k<tt?k:tt:j<tt?j:tt,ut=ht<ot?ht<st?ht:st:ot<st?ot:st,lt=k>j?k>tt?k:tt:j>tt?j:tt,Tt=ht>ot?ht>st?ht:st:ot>st?ot:st,bt=m(ft,ut,V,X,z),Dt=m(lt,Tt,V,X,z),ct=O.prevZ,yt=O.nextZ;ct&&ct.z>=bt&&yt&&yt.z<=Dt;){if(ct.x>=ft&&ct.x<=lt&&ct.y>=ut&&ct.y<=Tt&&ct!==I&&ct!==J&&S(k,ht,j,ot,tt,st,ct.x,ct.y)&&E(ct.prev,ct,ct.next)>=0||(ct=ct.prevZ,yt.x>=ft&&yt.x<=lt&&yt.y>=ut&&yt.y<=Tt&&yt!==I&&yt!==J&&S(k,ht,j,ot,tt,st,yt.x,yt.y)&&E(yt.prev,yt,yt.next)>=0))return!1;yt=yt.nextZ}for(;ct&&ct.z>=bt;){if(ct.x>=ft&&ct.x<=lt&&ct.y>=ut&&ct.y<=Tt&&ct!==I&&ct!==J&&S(k,ht,j,ot,tt,st,ct.x,ct.y)&&E(ct.prev,ct,ct.next)>=0)return!1;ct=ct.prevZ}for(;yt&&yt.z<=Dt;){if(yt.x>=ft&&yt.x<=lt&&yt.y>=ut&&yt.y<=Tt&&yt!==I&&yt!==J&&S(k,ht,j,ot,tt,st,yt.x,yt.y)&&E(yt.prev,yt,yt.next)>=0)return!1;yt=yt.nextZ}return!0}function r(O,V,X){var z=O;do{var I=z.prev,Z=z.next.next;!P(I,Z)&&A(I,z,z.next,Z)&&L(I,Z)&&L(Z,I)&&(V.push(I.i/X|0),V.push(z.i/X|0),V.push(Z.i/X|0),Y(z),Y(z.next),z=O=Z),z=z.next}while(z!==O);return h(z)}function e(O,V,X,z,I,Z){var J=O;do{for(var k=J.next.next;k!==J.prev;){if(J.i!==k.i&&C(J,k)){var j=B(J,k);J=h(J,J.next),j=h(j,j.next),g(J,V,X,z,I,Z,0),g(j,V,X,z,I,Z,0);return}k=k.next}J=J.next}while(J!==O)}function n(O,V,X,z){var I=[],Z,J,k,j,tt;for(Z=0,J=V.length;Z<J;Z++)k=V[Z]*z,j=Z<J-1?V[Z+1]*z:O.length,tt=t(O,k,j,z,!1),tt===tt.next&&(tt.steiner=!0),I.push(y(tt));for(I.sort(u),Z=0;Z<I.length;Z++)X=s(I[Z],X);return X}function u(O,V){return O.x-V.x}function s(O,V){var X=l(O,V);if(!X)return V;var z=B(X,O);return h(z,z.next),h(X,X.next)}function l(O,V){var X=V,z=O.x,I=O.y,Z=-1/0,J;do{if(I<=X.y&&I>=X.next.y&&X.next.y!==X.y){var k=X.x+(I-X.y)*(X.next.x-X.x)/(X.next.y-X.y);if(k<=z&&k>Z&&(Z=k,J=X.x<X.next.x?X:X.next,k===z))return J}X=X.next}while(X!==V);if(!J)return null;var j=J,tt=J.x,ht=J.y,ot=1/0,st;X=J;do z>=X.x&&X.x>=tt&&z!==X.x&&S(I<ht?z:Z,I,tt,ht,I<ht?Z:z,I,X.x,X.y)&&(st=Math.abs(I-X.y)/(z-X.x),L(X,O)&&(st<ot||st===ot&&(X.x>J.x||X.x===J.x&&c(J,X)))&&(J=X,ot=st)),X=X.next;while(X!==j);return J}function c(O,V){return E(O.prev,O,V.prev)<0&&E(V.next,O,O.next)<0}function d(O,V,X,z){var I=O;do I.z===0&&(I.z=m(I.x,I.y,V,X,z)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==O);I.prevZ.nextZ=null,I.prevZ=null,f(I)}function f(O){var V,X,z,I,Z,J,k,j,tt=1;do{for(X=O,O=null,Z=null,J=0;X;){for(J++,z=X,k=0,V=0;V<tt&&(k++,z=z.nextZ,!!z);V++);for(j=tt;k>0||j>0&&z;)k!==0&&(j===0||!z||X.z<=z.z)?(I=X,X=X.nextZ,k--):(I=z,z=z.nextZ,j--),Z?Z.nextZ=I:O=I,I.prevZ=Z,Z=I;X=z}Z.nextZ=null,tt*=2}while(J>1);return O}function m(O,V,X,z,I){return O=(O-X)*I|0,V=(V-z)*I|0,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,O|V<<1}function y(O){var V=O,X=O;do(V.x<X.x||V.x===X.x&&V.y<X.y)&&(X=V),V=V.next;while(V!==O);return X}function S(O,V,X,z,I,Z,J,k){return(I-J)*(V-k)>=(O-J)*(Z-k)&&(O-J)*(z-k)>=(X-J)*(V-k)&&(X-J)*(Z-k)>=(I-J)*(z-k)}function C(O,V){return O.next.i!==V.i&&O.prev.i!==V.i&&!b(O,V)&&(L(O,V)&&L(V,O)&&w(O,V)&&(E(O.prev,O,V.prev)||E(O,V.prev,V))||P(O,V)&&E(O.prev,O,O.next)>0&&E(V.prev,V,V.next)>0)}function E(O,V,X){return(V.y-O.y)*(X.x-V.x)-(V.x-O.x)*(X.y-V.y)}function P(O,V){return O.x===V.x&&O.y===V.y}function A(O,V,X,z){var I=G(E(O,V,X)),Z=G(E(O,V,z)),J=G(E(X,z,O)),k=G(E(X,z,V));return!!(I!==Z&&J!==k||I===0&&R(O,X,V)||Z===0&&R(O,z,V)||J===0&&R(X,O,z)||k===0&&R(X,V,z))}function R(O,V,X){return V.x<=Math.max(O.x,X.x)&&V.x>=Math.min(O.x,X.x)&&V.y<=Math.max(O.y,X.y)&&V.y>=Math.min(O.y,X.y)}function G(O){return O>0?1:O<0?-1:0}function b(O,V){var X=O;do{if(X.i!==O.i&&X.next.i!==O.i&&X.i!==V.i&&X.next.i!==V.i&&A(X,X.next,O,V))return!0;X=X.next}while(X!==O);return!1}function L(O,V){return E(O.prev,O,O.next)<0?E(O,V,O.next)>=0&&E(O,O.prev,V)>=0:E(O,V,O.prev)<0||E(O,O.next,V)<0}function w(O,V){var X=O,z=!1,I=(O.x+V.x)/2,Z=(O.y+V.y)/2;do X.y>Z!=X.next.y>Z&&X.next.y!==X.y&&I<(X.next.x-X.x)*(Z-X.y)/(X.next.y-X.y)+X.x&&(z=!z),X=X.next;while(X!==O);return z}function B(O,V){var X=new U(O.i,O.x,O.y),z=new U(V.i,V.x,V.y),I=O.next,Z=V.prev;return O.next=V,V.prev=O,X.next=I,I.prev=X,z.next=X,X.prev=z,Z.next=z,z.prev=Z,z}function N(O,V,X,z){var I=new U(O,V,X);return z?(I.next=z.next,I.prev=z,z.next.prev=I,z.next=I):(I.prev=I,I.next=I),I}function Y(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function U(O,V,X){this.i=O,this.x=V,this.y=X,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}M.deviation=function(O,V,X,z){var I=V&&V.length,Z=I?V[0]*X:O.length,J=Math.abs(W(O,0,Z,X));if(I)for(var k=0,j=V.length;k<j;k++){var tt=V[k]*X,ht=k<j-1?V[k+1]*X:O.length;J-=Math.abs(W(O,tt,ht,X))}var ot=0;for(k=0;k<z.length;k+=3){var st=z[k]*X,ft=z[k+1]*X,ut=z[k+2]*X;ot+=Math.abs((O[st]-O[ut])*(O[ft+1]-O[st+1])-(O[st]-O[ft])*(O[ut+1]-O[st+1]))}return J===0&&ot===0?0:Math.abs((ot-J)/J)};function W(O,V,X,z){for(var I=0,Z=V,J=X-z;Z<X;Z+=z)I+=(O[J]-O[Z])*(O[Z+1]+O[J+1]),J=Z;return I}M.flatten=function(O){for(var V=O[0][0].length,X={vertices:[],holes:[],dimensions:V},z=0,I=0;I<O.length;I++){for(var Z=0;Z<O[I].length;Z++)for(var J=0;J<V;J++)X.vertices.push(O[I][Z][J]);I>0&&(z+=O[I-1].length,X.holes.push(z))}return X},p.exports=M}),13829:((p,M,t)=>{var h=t(87841),g=function(o,a){a===void 0&&(a=new h);for(var r=1/0,e=1/0,n=-r,u=-e,s,l=0;l<o.points.length;l++)s=o.points[l],r=Math.min(r,s.x),e=Math.min(e,s.y),n=Math.max(n,s.x),u=Math.max(u,s.y);return a.x=r,a.y=e,a.width=n-r,a.height=u-e,a};p.exports=g}),26173:(p=>{var M=function(t,h){h===void 0&&(h=[]);for(var g=0;g<t.points.length;g++)h.push(t.points[g].x),h.push(t.points[g].y);return h};p.exports=M}),9564:((p,M,t)=>{var h=t(35001),g=t(23031),o=t(30052),a=function(r,e,n,u){u===void 0&&(u=[]);var s=r.points,l=o(r);!e&&n>0&&(e=l/n);for(var c=0;c<e;c++)for(var d=l*(c/e),f=0,m=0;m<s.length;m++){var y=s[m],S=s[(m+1)%s.length],C=new g(y.x,y.y,S.x,S.y),E=h(C);if(d<f||d>f+E){f+=E;continue}var P=C.getPoint((d-f)/E);u.push(P);break}return u};p.exports=a}),30052:((p,M,t)=>{var h=t(35001),g=t(23031),o=function(a){for(var r=a.points,e=0,n=0;n<r.length;n++){var u=r[n],s=r[(n+1)%r.length],l=new g(u.x,u.y,s.x,s.y);e+=h(l)}return e};p.exports=o}),25717:((p,M,t)=>{var h=t(83419),g=t(63814),o=t(9564),a=t(23777),r=new h({initialize:function(n){this.type=a.POLYGON,this.area=0,this.points=[],n&&this.setTo(n)},contains:function(e,n){return g(this,e,n)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var n,u=0;u<e.length;u++)n={x:0,y:0},typeof e[u]=="number"||typeof e[u]=="string"?(n.x=parseFloat(e[u]),n.y=parseFloat(e[u+1]),u++):Array.isArray(e[u])?(n.x=e[u][0],n.y=e[u][1]):(n.x=e[u].x,n.y=e[u].y),this.points.push(n);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,n,u,s=0;s<this.points.length-1;s++)n=this.points[s],u=this.points[s+1],e+=(u.x-n.x)*(n.y+u.y);return n=this.points[0],u=this.points[this.points.length-1],e+=(n.x-u.x)*(u.y+n.y),this.area=-e*.5,this.area},getPoints:function(e,n,u){return o(this,e,n,u)}});p.exports=r}),8133:(p=>{var M=function(t){return t.points.reverse(),t};p.exports=M}),29524:(p=>{function M(r,e){var n=r.x-e.x,u=r.y-e.y;return n*n+u*u}function t(r,e,n){var u=e.x,s=e.y,l=n.x-u,c=n.y-s;if(l!==0||c!==0){var d=((r.x-u)*l+(r.y-s)*c)/(l*l+c*c);d>1?(u=n.x,s=n.y):d>0&&(u+=l*d,s+=c*d)}return l=r.x-u,c=r.y-s,l*l+c*c}function h(r,e){for(var n=r[0],u=[n],s,l=1,c=r.length;l<c;l++)s=r[l],M(s,n)>e&&(u.push(s),n=s);return n!==s&&u.push(s),u}function g(r,e,n,u,s){for(var l=u,c,d=e+1;d<n;d++){var f=t(r[d],r[e],r[n]);f>l&&(c=d,l=f)}l>u&&(c-e>1&&g(r,e,c,u,s),s.push(r[c]),n-c>1&&g(r,c,n,u,s))}function o(r,e){var n=r.length-1,u=[r[0]];return g(r,0,n,e,u),u.push(r[n]),u}var a=function(r,e,n){e===void 0&&(e=1),n===void 0&&(n=!1);var u=r.points;if(u.length>2){var s=e*e;n||(u=h(u,s)),r.setTo(o(u,s))}return r};p.exports=a}),5469:(p=>{var M=function(h,g){return h[0]=g[0],h[1]=g[1],h},t=function(h){var g,o=[],a=h.points;for(g=0;g<a.length;g++)o.push([a[g].x,a[g].y]);var r=[];for(o.length>0&&r.push(M([0,0],o[0])),g=0;g<o.length-1;g++){var e=o[g],n=o[g+1],u=e[0],s=e[1],l=n[0],c=n[1];r.push([.85*u+.15*l,.85*s+.15*c]),r.push([.15*u+.85*l,.15*s+.85*c])}return o.length>1&&r.push(M([0,0],o[o.length-1])),h.setTo(r)};p.exports=t}),24709:(p=>{var M=function(t,h,g){for(var o=t.points,a=0;a<o.length;a++)o[a].x+=h,o[a].y+=g;return t};p.exports=M}),58423:((p,M,t)=>{var h=t(25717);h.Clone=t(12306),h.Contains=t(63814),h.ContainsPoint=t(99338),h.Earcut=t(94811),h.GetAABB=t(13829),h.GetNumberArray=t(26173),h.GetPoints=t(9564),h.Perimeter=t(30052),h.Reverse=t(8133),h.Simplify=t(29524),h.Smooth=t(5469),h.Translate=t(24709),p.exports=h}),62224:(p=>{var M=function(t){return t.width*t.height};p.exports=M}),98615:(p=>{var M=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};p.exports=M}),31688:(p=>{var M=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};p.exports=M}),67502:(p=>{var M=function(t,h,g){return t.x=h-t.width/2,t.y=g-t.height/2,t};p.exports=M}),65085:((p,M,t)=>{var h=t(87841),g=function(o){return new h(o.x,o.y,o.width,o.height)};p.exports=g}),37303:(p=>{var M=function(t,h,g){return t.width<=0||t.height<=0?!1:t.x<=h&&t.x+t.width>=h&&t.y<=g&&t.y+t.height>=g};p.exports=M}),96553:((p,M,t)=>{var h=t(37303),g=function(o,a){return h(o,a.x,a.y)};p.exports=g}),70273:(p=>{var M=function(t,h){return h.width*h.height>t.width*t.height?!1:h.x>t.x&&h.x<t.right&&h.right>t.x&&h.right<t.right&&h.y>t.y&&h.y<t.bottom&&h.bottom>t.y&&h.bottom<t.bottom};p.exports=M}),43459:(p=>{var M=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)};p.exports=M}),77493:(p=>{var M=function(t,h){return h===void 0&&(h=[]),h.push({x:t.x,y:t.y}),h.push({x:t.right,y:t.y}),h.push({x:t.right,y:t.bottom}),h.push({x:t.x,y:t.bottom}),h};p.exports=M}),9219:(p=>{var M=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};p.exports=M}),53751:((p,M,t)=>{var h=t(8249),g=function(o,a){var r=h(o);return r<h(a)?o.setSize(a.height*r,a.height):o.setSize(a.width,a.width/r),o.setPosition(a.centerX-o.width/2,a.centerY-o.height/2)};p.exports=g}),16088:((p,M,t)=>{var h=t(8249),g=function(o,a){var r=h(o);return r>h(a)?o.setSize(a.height*r,a.height):o.setSize(a.width,a.width/r),o.setPosition(a.centerX-o.width/2,a.centerY-o.height/2)};p.exports=g}),80774:(p=>{var M=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};p.exports=M}),83859:(p=>{var M=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};p.exports=M}),19217:((p,M,t)=>{var h=t(87841),g=t(36383),o=function(a,r){if(r===void 0&&(r=new h),a.length===0)return r;for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,u=g.MIN_SAFE_INTEGER,s=g.MIN_SAFE_INTEGER,l,c,d,f=0;f<a.length;f++)l=a[f],Array.isArray(l)?(c=l[0],d=l[1]):(c=l.x,d=l.y),e=Math.min(e,c),n=Math.min(n,d),u=Math.max(u,c),s=Math.max(s,d);return r.x=e,r.y=n,r.width=u-e,r.height=s-n,r};p.exports=o}),9477:((p,M,t)=>{var h=t(87841),g=function(o,a,r,e,n){return n===void 0&&(n=new h),n.setTo(Math.min(o,r),Math.min(a,e),Math.abs(o-r),Math.abs(a-e))};p.exports=g}),8249:(p=>{var M=function(t){return t.height===0?NaN:t.width/t.height};p.exports=M}),27165:((p,M,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=o.centerX,a.y=o.centerY,a};p.exports=g}),20812:((p,M,t)=>{var h=t(13019),g=t(2141),o=function(a,r,e){if(e===void 0&&(e=new g),r<=0||r>=1)return e.x=a.x,e.y=a.y,e;var n=h(a)*r;return r>.5?(n-=a.width+a.height,n<=a.width?(e.x=a.right-n,e.y=a.bottom):(e.x=a.x,e.y=a.bottom-(n-a.width))):n<=a.width?(e.x=a.x+n,e.y=a.y):(e.x=a.right,e.y=a.y+(n-a.width)),e};p.exports=o}),34819:((p,M,t)=>{var h=t(20812),g=t(13019),o=function(a,r,e,n){n===void 0&&(n=[]),!r&&e>0&&(r=g(a)/e);for(var u=0;u<r;u++){var s=u/r;n.push(h(a,s))}return n};p.exports=o}),51313:((p,M,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=o.width,a.y=o.height,a};p.exports=g}),86091:((p,M,t)=>{var h=t(67502),g=function(o,a,r){var e=o.centerX,n=o.centerY;return o.setSize(o.width+a*2,o.height+r*2),h(o,e,n)};p.exports=g}),53951:((p,M,t)=>{var h=t(87841),g=t(59996),o=function(a,r,e){return e===void 0&&(e=new h),g(a,r)?(e.x=Math.max(a.x,r.x),e.y=Math.max(a.y,r.y),e.width=Math.min(a.right,r.right)-e.x,e.height=Math.min(a.bottom,r.bottom)-e.y):e.setEmpty(),e};p.exports=o}),14649:((p,M,t)=>{var h=t(13019),g=t(2141),o=function(a,r,e,n){if(n===void 0&&(n=[]),!r&&!e)return n;r?e=Math.round(h(a)/r):r=h(a)/e;for(var u=a.x,s=a.y,l=0,c=0;c<e;c++)switch(n.push(new g(u,s)),l){case 0:u+=r,u>=a.right&&(l=1,s+=u-a.right,u=a.right);break;case 1:s+=r,s>=a.bottom&&(l=2,u-=s-a.bottom,s=a.bottom);break;case 2:u-=r,u<=a.left&&(l=3,s-=a.left-u,u=a.left);break;case 3:s-=r,s<=a.top&&(l=0,s=a.top);break}return n};p.exports=o}),33595:(p=>{var M=function(t,h){for(var g=t.x,o=t.right,a=t.y,r=t.bottom,e=0;e<h.length;e++)g=Math.min(g,h[e].x),o=Math.max(o,h[e].x),a=Math.min(a,h[e].y),r=Math.max(r,h[e].y);return t.x=g,t.y=a,t.width=o-g,t.height=r-a,t};p.exports=M}),20074:(p=>{var M=function(t,h){var g=Math.min(t.x,h.x),o=Math.max(t.right,h.right);t.x=g,t.width=o-g;var a=Math.min(t.y,h.y),r=Math.max(t.bottom,h.bottom);return t.y=a,t.height=r-a,t};p.exports=M}),92171:(p=>{var M=function(t,h,g){var o=Math.min(t.x,h),a=Math.max(t.right,h);t.x=o,t.width=a-o;var r=Math.min(t.y,g),e=Math.max(t.bottom,g);return t.y=r,t.height=e-r,t};p.exports=M}),42981:(p=>{var M=function(t,h,g){return t.x+=h,t.y+=g,t};p.exports=M}),46907:(p=>{var M=function(t,h){return t.x+=h.x,t.y+=h.y,t};p.exports=M}),60170:(p=>{var M=function(t,h){return t.x<h.right&&t.right>h.x&&t.y<h.bottom&&t.bottom>h.y};p.exports=M}),13019:(p=>{var M=function(t){return 2*(t.width+t.height)};p.exports=M}),85133:((p,M,t)=>{var h=t(2141),g=t(39506),o=function(a,r,e){e===void 0&&(e=new h),r=g(r);var n=Math.sin(r),u=Math.cos(r),s=u>0?a.width/2:a.width/-2,l=n>0?a.height/2:a.height/-2;return Math.abs(s*n)<Math.abs(l*u)?l=s*n/u:s=l*u/n,e.x=s+a.centerX,e.y=l+a.centerY,e};p.exports=o}),26597:((p,M,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=o.x+Math.random()*o.width,a.y=o.y+Math.random()*o.height,a};p.exports=g}),86470:((p,M,t)=>{var h=t(30976),g=t(70273),o=t(2141),a=function(r,e,n){if(n===void 0&&(n=new o),g(r,e))switch(h(0,3)){case 0:n.x=r.x+Math.random()*(e.right-r.x),n.y=r.y+Math.random()*(e.top-r.y);break;case 1:n.x=e.x+Math.random()*(r.right-e.x),n.y=e.bottom+Math.random()*(r.bottom-e.bottom);break;case 2:n.x=r.x+Math.random()*(e.x-r.x),n.y=e.y+Math.random()*(r.bottom-e.y);break;case 3:n.x=e.right+Math.random()*(r.right-e.right),n.y=r.y+Math.random()*(e.bottom-r.y);break}return n};p.exports=a}),87841:((p,M,t)=>{var h=t(83419),g=t(37303),o=t(20812),a=t(34819),r=t(23777),e=t(23031),n=t(26597),u=new h({initialize:function(l,c,d,f){l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),this.type=r.RECTANGLE,this.x=l,this.y=c,this.width=d,this.height=f},contains:function(s,l){return g(this,s,l)},getPoint:function(s,l){return o(this,s,l)},getPoints:function(s,l,c){return a(this,s,l,c)},getRandomPoint:function(s){return n(this,s)},setTo:function(s,l,c,d){return this.x=s,this.y=l,this.width=c,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(s,l){return l===void 0&&(l=s),this.x=s,this.y=l,this},setSize:function(s,l){return l===void 0&&(l=s),this.width=s,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(s){return s===void 0&&(s=new e),s.setTo(this.x,this.y,this.right,this.y),s},getLineB:function(s){return s===void 0&&(s=new e),s.setTo(this.right,this.y,this.right,this.bottom),s},getLineC:function(s){return s===void 0&&(s=new e),s.setTo(this.right,this.bottom,this.x,this.bottom),s},getLineD:function(s){return s===void 0&&(s=new e),s.setTo(this.x,this.bottom,this.x,this.y),s},left:{get:function(){return this.x},set:function(s){s>=this.right?this.width=0:this.width=this.right-s,this.x=s}},right:{get:function(){return this.x+this.width},set:function(s){s<=this.x?this.width=0:this.width=s-this.x}},top:{get:function(){return this.y},set:function(s){s>=this.bottom?this.height=0:this.height=this.bottom-s,this.y=s}},bottom:{get:function(){return this.y+this.height},set:function(s){s<=this.y?this.height=0:this.height=s-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(s){this.x=s-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(s){this.y=s-this.height/2}}});p.exports=u}),94845:(p=>{var M=function(t,h){return t.width===h.width&&t.height===h.height};p.exports=M}),31730:(p=>{var M=function(t,h,g){return g===void 0&&(g=h),t.width*=h,t.height*=g,t};p.exports=M}),36899:((p,M,t)=>{var h=t(87841),g=function(o,a,r){r===void 0&&(r=new h);var e=Math.min(o.x,a.x),n=Math.min(o.y,a.y),u=Math.max(o.right,a.right)-e,s=Math.max(o.bottom,a.bottom)-n;return r.setTo(e,n,u,s)};p.exports=g}),93232:((p,M,t)=>{var h=t(87841);h.Area=t(62224),h.Ceil=t(98615),h.CeilAll=t(31688),h.CenterOn=t(67502),h.Clone=t(65085),h.Contains=t(37303),h.ContainsPoint=t(96553),h.ContainsRect=t(70273),h.CopyFrom=t(43459),h.Decompose=t(77493),h.Equals=t(9219),h.FitInside=t(53751),h.FitOutside=t(16088),h.Floor=t(80774),h.FloorAll=t(83859),h.FromPoints=t(19217),h.FromXY=t(9477),h.GetAspectRatio=t(8249),h.GetCenter=t(27165),h.GetPoint=t(20812),h.GetPoints=t(34819),h.GetSize=t(51313),h.Inflate=t(86091),h.Intersection=t(53951),h.MarchingAnts=t(14649),h.MergePoints=t(33595),h.MergeRect=t(20074),h.MergeXY=t(92171),h.Offset=t(42981),h.OffsetPoint=t(46907),h.Overlaps=t(60170),h.Perimeter=t(13019),h.PerimeterPoint=t(85133),h.Random=t(26597),h.RandomOutside=t(86470),h.SameDimensions=t(94845),h.Scale=t(31730),h.Union=t(36899),p.exports=h}),41658:(p=>{var M=function(t){var h=t.x1,g=t.y1,o=t.x2,a=t.y2,r=t.x3,e=t.y3;return Math.abs(((r-h)*(a-g)-(o-h)*(e-g))/2)};p.exports=M}),39208:((p,M,t)=>{var h=t(16483),g=function(o,a,r){var e=r*(Math.sqrt(3)/2),n=o,u=a,s=o+r/2,l=a+e,c=o-r/2,d=a+e;return new h(n,u,s,l,c,d)};p.exports=g}),39545:((p,M,t)=>{var h=t(94811),g=t(16483),o=function(a,r,e,n,u){r===void 0&&(r=null),e===void 0&&(e=1),n===void 0&&(n=1),u===void 0&&(u=[]);for(var s=h(a,r),l,c,d,f,m,y,S,C,E,P=0;P<s.length;P+=3)l=s[P],c=s[P+1],d=s[P+2],f=a[l*2]*e,m=a[l*2+1]*n,y=a[c*2]*e,S=a[c*2+1]*n,C=a[d*2]*e,E=a[d*2+1]*n,u.push(new g(f,m,y,S,C,E));return u};p.exports=o}),90301:((p,M,t)=>{var h=t(16483),g=function(o,a,r,e){e===void 0&&(e=r);var n=o,u=a,s=o,l=a-e,c=o+r,d=a;return new h(n,u,s,l,c,d)};p.exports=g}),23707:((p,M,t)=>{var h=t(97523),g=t(13584),o=function(a,r,e,n){n===void 0&&(n=h);var u=n(a),s=r-u.x,l=e-u.y;return g(a,s,l)};p.exports=o}),97523:((p,M,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=(o.x1+o.x2+o.x3)/3,a.y=(o.y1+o.y2+o.y3)/3,a};p.exports=g}),24951:((p,M,t)=>{var h=t(26099);function g(a,r,e,n){return a*n-r*e}var o=function(a,r){r===void 0&&(r=new h);var e=a.x3,n=a.y3,u=a.x1-e,s=a.y1-n,l=a.x2-e,c=a.y2-n,d=2*g(u,s,l,c),f=g(s,u*u+s*s,c,l*l+c*c),m=g(u,u*u+s*s,l,l*l+c*c);return r.x=e-f/d,r.y=n+m/d,r};p.exports=o}),85614:((p,M,t)=>{var h=t(96503),g=function(o,a){a===void 0&&(a=new h);var r=o.x1,e=o.y1,n=o.x2,u=o.y2,s=o.x3,l=o.y3,c=n-r,d=u-e,f=s-r,m=l-e,y=c*(r+n)+d*(e+u),S=f*(r+s)+m*(e+l),C=2*(c*(l-u)-d*(s-n)),E,P;if(Math.abs(C)<1e-6){var A=Math.min(r,n,s),R=Math.min(e,u,l);E=(Math.max(r,n,s)-A)*.5,P=(Math.max(e,u,l)-R)*.5,a.x=A+E,a.y=R+P,a.radius=Math.sqrt(E*E+P*P)}else a.x=(m*y-d*S)/C,a.y=(c*S-f*y)/C,E=a.x-r,P=a.y-e,a.radius=Math.sqrt(E*E+P*P);return a};p.exports=g}),74422:((p,M,t)=>{var h=t(16483),g=function(o){return new h(o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)};p.exports=g}),10690:(p=>{var M=function(t,h,g){var o=t.x3-t.x1,a=t.y3-t.y1,r=t.x2-t.x1,e=t.y2-t.y1,n=h-t.x1,u=g-t.y1,s=o*o+a*a,l=o*r+a*e,c=o*n+a*u,d=r*r+e*e,f=r*n+e*u,m=s*d-l*l,y=m===0?0:1/m,S=(d*c-l*f)*y,C=(s*f-l*c)*y;return S>=0&&C>=0&&S+C<1};p.exports=M}),48653:(p=>{var M=function(t,h,g,o){g===void 0&&(g=!1),o===void 0&&(o=[]);for(var a=t.x3-t.x1,r=t.y3-t.y1,e=t.x2-t.x1,n=t.y2-t.y1,u=a*a+r*r,s=a*e+r*n,l=e*e+n*n,c=u*l-s*s,d=c===0?0:1/c,f,m,y,S,C,E,P=t.x1,A=t.y1,R=0;R<h.length&&(y=h[R].x-P,S=h[R].y-A,C=a*y+r*S,E=e*y+n*S,f=(l*C-s*E)*d,m=(u*E-s*C)*d,!(f>=0&&m>=0&&f+m<1&&(o.push({x:h[R].x,y:h[R].y}),g)));R++);return o};p.exports=M}),96006:((p,M,t)=>{var h=t(10690),g=function(o,a){return h(o,a.x,a.y)};p.exports=g}),71326:(p=>{var M=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};p.exports=M}),71694:(p=>{var M=function(t,h){return h===void 0&&(h=[]),h.push({x:t.x1,y:t.y1}),h.push({x:t.x2,y:t.y2}),h.push({x:t.x3,y:t.y3}),h};p.exports=M}),33522:(p=>{var M=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2&&t.x3===h.x3&&t.y3===h.y3};p.exports=M}),20437:((p,M,t)=>{var h=t(2141),g=t(35001),o=function(a,r,e){e===void 0&&(e=new h);var n=a.getLineA(),u=a.getLineB(),s=a.getLineC();if(r<=0||r>=1)return e.x=n.x1,e.y=n.y1,e;var l=g(n),c=g(u),d=g(s),f=l+c+d,m=f*r,y=0;return m<l?(y=m/l,e.x=n.x1+(n.x2-n.x1)*y,e.y=n.y1+(n.y2-n.y1)*y):m>l+c?(m-=l+c,y=m/d,e.x=s.x1+(s.x2-s.x1)*y,e.y=s.y1+(s.y2-s.y1)*y):(m-=l,y=m/c,e.x=u.x1+(u.x2-u.x1)*y,e.y=u.y1+(u.y2-u.y1)*y),e};p.exports=o}),80672:((p,M,t)=>{var h=t(35001),g=t(2141),o=function(a,r,e,n){n===void 0&&(n=[]);var u=a.getLineA(),s=a.getLineB(),l=a.getLineC(),c=h(u),d=h(s),f=h(l),m=c+d+f;!r&&e>0&&(r=m/e);for(var y=0;y<r;y++){var S=m*(y/r),C=0,E=new g;S<c?(C=S/c,E.x=u.x1+(u.x2-u.x1)*C,E.y=u.y1+(u.y2-u.y1)*C):S>c+d?(S-=c+d,C=S/f,E.x=l.x1+(l.x2-l.x1)*C,E.y=l.y1+(l.y2-l.y1)*C):(S-=c,C=S/d,E.x=s.x1+(s.x2-s.x1)*C,E.y=s.y1+(s.y2-s.y1)*C),n.push(E)}return n};p.exports=o}),39757:((p,M,t)=>{var h=t(2141);function g(a,r,e,n){var u=a-e,s=r-n,l=u*u+s*s;return Math.sqrt(l)}var o=function(a,r){r===void 0&&(r=new h);var e=a.x1,n=a.y1,u=a.x2,s=a.y2,l=a.x3,c=a.y3,d=g(l,c,u,s),f=g(e,n,l,c),m=g(u,s,e,n),y=d+f+m;return r.x=(e*d+u*f+l*m)/y,r.y=(n*d+s*f+c*m)/y,r};p.exports=o}),13584:(p=>{var M=function(t,h,g){return t.x1+=h,t.y1+=g,t.x2+=h,t.y2+=g,t.x3+=h,t.y3+=g,t};p.exports=M}),1376:((p,M,t)=>{var h=t(35001),g=function(o){var a=o.getLineA(),r=o.getLineB(),e=o.getLineC();return h(a)+h(r)+h(e)};p.exports=g}),90260:((p,M,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=o.x2-o.x1,e=o.y2-o.y1,n=o.x3-o.x1,u=o.y3-o.y1,s=Math.random(),l=Math.random();return s+l>=1&&(s=1-s,l=1-l),a.x=o.x1+(r*s+n*l),a.y=o.y1+(e*s+u*l),a};p.exports=g}),52172:((p,M,t)=>{var h=t(99614),g=t(39757),o=function(a,r){var e=g(a);return h(a,e.x,e.y,r)};p.exports=o}),49907:((p,M,t)=>{var h=t(99614),g=function(o,a,r){return h(o,a.x,a.y,r)};p.exports=g}),99614:(p=>{var M=function(t,h,g,o){var a=Math.cos(o),r=Math.sin(o),e=t.x1-h,n=t.y1-g;return t.x1=e*a-n*r+h,t.y1=e*r+n*a+g,e=t.x2-h,n=t.y2-g,t.x2=e*a-n*r+h,t.y2=e*r+n*a+g,e=t.x3-h,n=t.y3-g,t.x3=e*a-n*r+h,t.y3=e*r+n*a+g,t};p.exports=M}),16483:((p,M,t)=>{var h=t(83419),g=t(10690),o=t(20437),a=t(80672),r=t(23777),e=t(23031),n=t(90260),u=new h({initialize:function(l,c,d,f,m,y){l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),this.type=r.TRIANGLE,this.x1=l,this.y1=c,this.x2=d,this.y2=f,this.x3=m,this.y3=y},contains:function(s,l){return g(this,s,l)},getPoint:function(s,l){return o(this,s,l)},getPoints:function(s,l,c){return a(this,s,l,c)},getRandomPoint:function(s){return n(this,s)},setTo:function(s,l,c,d,f,m){return s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),this.x1=s,this.y1=l,this.x2=c,this.y2=d,this.x3=f,this.y3=m,this},getLineA:function(s){return s===void 0&&(s=new e),s.setTo(this.x1,this.y1,this.x2,this.y2),s},getLineB:function(s){return s===void 0&&(s=new e),s.setTo(this.x2,this.y2,this.x3,this.y3),s},getLineC:function(s){return s===void 0&&(s=new e),s.setTo(this.x3,this.y3,this.x1,this.y1),s},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(s){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-s:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-s:l=this.x3-s,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(s){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-s:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-s:l=this.x3-s,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(s){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-s:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-s:l=this.y3-s,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(s){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-s:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-s:l=this.y3-s,this.y1-=l,this.y2-=l,this.y3-=l}}});p.exports=u}),84435:((p,M,t)=>{var h=t(16483);h.Area=t(41658),h.BuildEquilateral=t(39208),h.BuildFromPolygon=t(39545),h.BuildRight=t(90301),h.CenterOn=t(23707),h.Centroid=t(97523),h.CircumCenter=t(24951),h.CircumCircle=t(85614),h.Clone=t(74422),h.Contains=t(10690),h.ContainsArray=t(48653),h.ContainsPoint=t(96006),h.CopyFrom=t(71326),h.Decompose=t(71694),h.Equals=t(33522),h.GetPoint=t(20437),h.GetPoints=t(80672),h.InCenter=t(39757),h.Perimeter=t(1376),h.Offset=t(13584),h.Random=t(90260),h.Rotate=t(52172),h.RotateAroundPoint=t(49907),h.RotateAroundXY=t(99614),p.exports=h}),74457:(p=>{var M=function(t,h,g){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:g,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};p.exports=M}),84409:(p=>{var M=function(t,h){return function(g,o,a,r){var e=t.getPixelAlpha(o,a,r.texture.key,r.frame.name);return e&&e>=h}};p.exports=M}),7003:((p,M,t)=>{var h=t(83419),g=t(93301),o=t(50792),a=t(8214),r=t(8443),e=t(78970),n=t(85098),u=t(42515),s=t(36210),l=t(61340),c=t(85955),d=new h({initialize:function(m,y){this.game=m,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new o,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new e(this):null,this.mouse=y.inputMouse?new n(this):null,this.touch=y.inputTouch?new s(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers;for(var S=0;S<=this.pointersTotal;S++){var C=new u(this,S);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(r.BOOT,this.boot,this)},boot:function(){var f=this.game,m=f.events;this.canvas=f.canvas,this.scaleManager=f.scale,this.events.emit(a.MANAGER_BOOT),m.on(r.PRE_RENDER,this.preRender,this),m.once(r.DESTROY,this.destroy,this)},setCanvasOver:function(f){this.isOver=!0,this.events.emit(a.GAME_OVER,f)},setCanvasOut:function(f){this.isOver=!1,this.events.emit(a.GAME_OUT,f)},preRender:function(){var f=this.game.loop.now,m=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=f,this.events.emit(a.MANAGER_UPDATE);for(var S=0;S<y.length;S++){var C=y[S];if(C.sys.input&&C.sys.input.updatePoll(f,m)&&this.globalTopOnly)return}},setDefaultCursor:function(f){this.defaultCursor=f,this.canvas.style.cursor!==f&&(this.canvas.style.cursor=f)},setCursor:function(f){f.cursor&&(this.canvas.style.cursor=f.cursor)},resetCursor:function(f,m){(m||f&&f.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(f){f===void 0&&(f=1);var m=[];this.pointersTotal+f>10&&(f=10-this.pointersTotal);for(var y=0;y<f;y++){var S=this.pointers.length,C=new u(this,S);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,m.push(C)}return m},updateInputPlugins:function(f,m){var y=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var S=0;S<y.length;S++){var C=y[S];if(C.sys.input){var E=C.sys.input.update(f,m);if(E&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(!P.active){P.touchstart(C,f),this.activePointer=P,y.push(P);break}}this.updateInputPlugins(g.TOUCH_START,y)},onTouchMove:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(P.active&&P.identifier===C.identifier){var A=document.elementFromPoint(C.clientX,C.clientY),R=A===this.canvas;!this.isOver&&R?this.setCanvasOver(f):this.isOver&&!R&&this.setCanvasOut(f),this.isOver&&(P.touchmove(C,f),this.activePointer=P,y.push(P));break}}this.updateInputPlugins(g.TOUCH_MOVE,y)},onTouchEnd:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(P.active&&P.identifier===C.identifier){P.touchend(C,f),y.push(P);break}}this.updateInputPlugins(g.TOUCH_END,y)},onTouchCancel:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(P.active&&P.identifier===C.identifier){P.touchcancel(C,f),y.push(P);break}}this.updateInputPlugins(g.TOUCH_CANCEL,y)},onMouseDown:function(f){var m=this.mousePointer;m.down(f),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(f){var m=this.mousePointer;m.move(f),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(f){var m=this.mousePointer;m.up(f),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(f){var m=this.mousePointer;m.wheel(f),this.activePointer=m,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(f){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(a.POINTERLOCK_CHANGE,f,m)},inputCandidate:function(f,m){var y=f.input;if(!y||!y.enabled||!f.willRender(m))return!1;var S=!0,C=f.parentContainer;if(C)do{if(!C.willRender(m)){S=!1;break}C=C.parentContainer}while(C);return S},hitTest:function(f,m,y,S){S===void 0&&(S=this._tempHitTest);var C=this._tempPoint,E=y.scrollX,P=y.scrollY;S.length=0;var A=f.x,R=f.y;y.getWorldPoint(A,R,C),f.worldX=C.x,f.worldY=C.y;for(var G={x:0,y:0},b=this._tempMatrix,L=this._tempMatrix2,w=0;w<m.length;w++){var B=m[w];if(this.inputCandidate(B,y)){var N=C.x+E*B.scrollFactorX-E,Y=C.y+P*B.scrollFactorY-P;B.parentContainer?(B.getWorldTransformMatrix(b,L),b.applyInverse(N,Y,G)):c(N,Y,B.x,B.y,B.rotation,B.scaleX,B.scaleY,G),this.pointWithinHitArea(B,G.x,G.y)&&S.push(B)}}return S},pointWithinHitArea:function(f,m,y){m+=f.displayOriginX,y+=f.displayOriginY;var S=f.input;return S&&S.hitAreaCallback(S.hitArea,m,y,f)?(S.localX=m,S.localY=y,!0):!1},pointWithinInteractiveObject:function(f,m,y){return f.hitArea?(m+=f.gameObject.displayOriginX,y+=f.gameObject.displayOriginY,f.localX=m,f.localY=y,f.hitAreaCallback(f.hitArea,m,y,f)):!1},transformPointer:function(f,m,y,S){var C=f.position,E=f.prevPosition;E.x=C.x,E.y=C.y;var P=this.scaleManager.transformX(m),A=this.scaleManager.transformY(y),R=f.smoothFactor;!S||R===0?(C.x=P,C.y=A):(C.x=P*R+E.x*(1-R),C.y=A*R+E.y*(1-R))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(r.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var f=0;f<this.pointers.length;f++)this.pointers[f].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});p.exports=d}),48205:((p,M,t)=>{var h=t(96503),g=t(87902),o=t(83419),a=t(93301),r=t(74457),e=t(84409),n=t(20339),u=t(8497),s=t(81154),l=t(8214),c=t(50792),d=t(95540),f=t(23777),m=t(89639),y=t(41212),S=t(37277),C=t(87841),E=t(37303),P=t(44594),A=t(16483),R=t(10690),G=new o({Extends:c,initialize:function(L){c.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new c,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var w={cancelled:!1};this._eventContainer={stopPropagation:function(){w.cancelled=!0}},this._eventData=w,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(P.BOOT,this.boot,this),L.sys.events.on(P.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(P.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var b=this.systems.events;b.on(P.TRANSITION_START,this.transitionIn,this),b.on(P.TRANSITION_OUT,this.transitionOut,this),b.on(P.TRANSITION_COMPLETE,this.transitionComplete,this),b.on(P.PRE_UPDATE,this.preUpdate,this),b.once(P.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(b){this.isActive()&&this.emit(l.GAME_OVER,b.timeStamp,b)},onGameOut:function(b){this.isActive()&&this.emit(l.GAME_OUT,b.timeStamp,b)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var b=this._pendingRemoval,L=this._pendingInsertion,w=b.length,B=L.length;if(!(w===0&&B===0)){for(var N=this._list,Y=0;Y<w;Y++){var U=b[Y],W=N.indexOf(U);W>-1&&(N.splice(W,1),this.clear(U,!0))}this._pendingRemoval.length=0,this._list=N.concat(L.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(b){this.manager&&this.manager.setCursor(b)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(b,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,b,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var w,B=this.manager,N=B.pointers;for(w=0;w<N.length;w++)N[w].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var U=!1;for(w=0;w<N.length;w++){var W=0,O=N[w];this._tempZones=[],this._temp=this.hitTestPointer(O),this.sortGameObjects(this._temp,O),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(O),this.getDragState(O)===2&&this.processDragThresholdEvent(O,b),W>0&&(U=!0)}return U},update:function(b,L){if(!this.isActive())return!1;for(var w=!1,B=0;B<L.length;B++){var N=0,Y=L[B];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),b){case a.MOUSE_DOWN:N+=this.processDragDownEvent(Y),N+=this.processDownEvents(Y),N+=this.processOverOutEvents(Y);break;case a.MOUSE_UP:N+=this.processDragUpEvent(Y),N+=this.processUpEvents(Y),N+=this.processOverOutEvents(Y);break;case a.TOUCH_START:N+=this.processDragDownEvent(Y),N+=this.processDownEvents(Y),N+=this.processOverEvents(Y);break;case a.TOUCH_END:case a.TOUCH_CANCEL:N+=this.processDragUpEvent(Y),N+=this.processUpEvents(Y),N+=this.processOutEvents(Y);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:N+=this.processDragMoveEvent(Y),N+=this.processMoveEvents(Y),N+=this.processOverOutEvents(Y);break;case a.MOUSE_WHEEL:N+=this.processWheelEvent(Y);break}N>0&&(w=!0)}return this._updatedThisFrame=!0,w},clear:function(b,L){L===void 0&&(L=!1),this.disable(b);var w=b.input;w&&(this.removeDebug(b),this.manager.resetCursor(w),w.gameObject=void 0,w.target=void 0,w.hitArea=void 0,w.hitAreaCallback=void 0,w.callbackContext=void 0,b.input=null),L||this.queueForRemoval(b);var B=this._draggable.indexOf(b);return B>-1&&this._draggable.splice(B,1),b},disable:function(b,L){L===void 0&&(L=!1);var w=b.input;w&&(w.enabled=!1,w.dragState=0);for(var B=this._drag,N=this._over,Y=this.manager,U=0,W;U<Y.pointers.length;U++)W=B[U].indexOf(b),W>-1&&B[U].splice(W,1),W=N[U].indexOf(b),W>-1&&N[U].splice(W,1);return L&&this.resetCursor(),this},enable:function(b,L,w,B){return B===void 0&&(B=!1),b.input?b.input.enabled=!0:this.setHitArea(b,L,w),b.input&&B&&!b.input.dropZone&&(b.input.dropZone=B),this},hitTestPointer:function(b){for(var L=this.cameras.getCamerasBelowPointer(b),w=0;w<L.length;w++){for(var B=L[w],N=this.manager.hitTest(b,this._list,B),Y=0;Y<N.length;Y++){var U=N[Y];U.input.dropZone&&this._tempZones.push(U)}if(N.length>0)return b.camera=B,N}return b.camera=L[0],[]},processDownEvents:function(b){var L=0,w=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var Y=0;Y<w.length;Y++){var U=w[Y];if(!(!U.input||!U.input.enabled)&&(L++,U.emit(l.GAMEOBJECT_POINTER_DOWN,b,U.input.localX,U.input.localY,N),B.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(l.GAMEOBJECT_DOWN,b,U,N),B.cancelled||!this.isActive())))break}return!B.cancelled&&this.isActive()&&(b.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,b,w):this.emit(l.POINTER_DOWN_OUTSIDE,b)),L},getDragState:function(b){return this._dragState[b.id]},setDragState:function(b,L){this._dragState[b.id]=L},processDragThresholdEvent:function(b,L){var w=!1,B=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&n(b.x,b.y,b.downX,b.downY)>=N||B>0&&L>=b.downTime+B)&&(w=!0),w)return this.setDragState(b,3),this.processDragStartList(b)},processDragStartList:function(b){if(this.getDragState(b)!==3)return 0;var L=this._drag[b.id];L.length>1&&(L=L.slice(0));for(var w=0;w<L.length;w++){var B=L[w],N=B.input;N.dragState=2,N.dragStartX=B.x,N.dragStartY=B.y,N.dragStartXGlobal=b.worldX,N.dragStartYGlobal=b.worldY,N.dragStartCamera=b.camera,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,B.emit(l.GAMEOBJECT_DRAG_START,b,N.dragX,N.dragY),this.emit(l.DRAG_START,b,B)}return this.setDragState(b,4),L.length},processDragDownEvent:function(b){var L=this._temp;if(this._draggable.length===0||L.length===0||!b.primaryDown||this.getDragState(b)!==0)return 0;this.setDragState(b,1);for(var w=[],B=0;B<L.length;B++){var N=L[B];N.input.draggable&&N.input.dragState===0&&w.push(N)}return w.length===0?(this.setDragState(b,0),0):(w.length>1&&(this.sortGameObjects(w,b),this.topOnly&&w.splice(1)),this._drag[b.id]=w,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(b,3),this.processDragStartList(b)):(this.setDragState(b,2),0))},processDragMoveEvent:function(b){if(this.getDragState(b)===2&&this.processDragThresholdEvent(b,this.manager.game.loop.now),this.getDragState(b)!==4)return 0;var L=this._tempZones,w=this._drag[b.id];w.length>1&&(w=w.slice(0));for(var B=0;B<w.length;B++){var N=w[B],Y=N.input,U=Y.target;if(U){var W=L.indexOf(U);W===0?(N.emit(l.GAMEOBJECT_DRAG_OVER,b,U),this.emit(l.DRAG_OVER,b,N,U)):W>0?(N.emit(l.GAMEOBJECT_DRAG_LEAVE,b,U),this.emit(l.DRAG_LEAVE,b,N,U),Y.target=L[0],U=Y.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,b,U),this.emit(l.DRAG_ENTER,b,N,U)):(N.emit(l.GAMEOBJECT_DRAG_LEAVE,b,U),this.emit(l.DRAG_LEAVE,b,N,U),L[0]?(Y.target=L[0],U=Y.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,b,U),this.emit(l.DRAG_ENTER,b,N,U)):Y.target=null)}else!U&&L[0]&&(Y.target=L[0],U=Y.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,b,U),this.emit(l.DRAG_ENTER,b,N,U));var O,V,X=b.positionToCamera(Y.dragStartCamera);if(!N.parentContainer)O=X.x-Y.dragX,V=X.y-Y.dragY;else{var z=X.x-Y.dragStartXGlobal,I=X.y-Y.dragStartYGlobal,Z=N.getParentRotation(),J=z*Math.cos(Z)+I*Math.sin(Z),k=I*Math.cos(Z)-z*Math.sin(Z);J*=1/N.parentContainer.scaleX,k*=1/N.parentContainer.scaleY,O=J+Y.dragStartX,V=k+Y.dragStartY}N.emit(l.GAMEOBJECT_DRAG,b,O,V),this.emit(l.DRAG,b,N,O,V)}return w.length},processDragUpEvent:function(b){var L=this._drag[b.id];L.length>1&&(L=L.slice(0));for(var w=0;w<L.length;w++){var B=L[w],N=B.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-B.displayOriginX,N.dragY=N.localY-B.displayOriginY,N.dragStartCamera=null;var Y=!1,U=N.target;U&&(B.emit(l.GAMEOBJECT_DROP,b,U),this.emit(l.DROP,b,B,U),N.target=null,Y=!0),B.input&&B.input.enabled&&(B.emit(l.GAMEOBJECT_DRAG_END,b,N.dragX,N.dragY,Y),this.emit(l.DRAG_END,b,B,Y))}}return this.setDragState(b,0),L.splice(0),0},processMoveEvents:function(b){var L=0,w=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var Y=0;Y<w.length;Y++){var U=w[Y];if(!(!U.input||!U.input.enabled)&&(L++,U.emit(l.GAMEOBJECT_POINTER_MOVE,b,U.input.localX,U.input.localY,N),B.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(l.GAMEOBJECT_MOVE,b,U,N),B.cancelled||!this.isActive()||this.topOnly)))break}return!B.cancelled&&this.isActive()&&this.emit(l.POINTER_MOVE,b,w),L},processWheelEvent:function(b){var L=0,w=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var Y=b.deltaX,U=b.deltaY,W=b.deltaZ,O=0;O<w.length;O++){var V=w[O];if(!(!V.input||!V.input.enabled)&&(L++,V.emit(l.GAMEOBJECT_POINTER_WHEEL,b,Y,U,W,N),B.cancelled||!this.isActive()||V.input&&V.input.enabled&&(this.emit(l.GAMEOBJECT_WHEEL,b,V,Y,U,W,N),B.cancelled||!this.isActive())))break}return!B.cancelled&&this.isActive()&&this.emit(l.POINTER_WHEEL,b,w,Y,U,W),L},processOverEvents:function(b){var L=this._temp,w=0,B=L.length,N=[];if(B>0){var Y=this.manager,U=this._eventData,W=this._eventContainer;U.cancelled=!1;for(var O=0;O<B;O++){var V=L[O];if(!(!V.input||!V.input.enabled)&&(N.push(V),Y.setCursor(V.input),V.emit(l.GAMEOBJECT_POINTER_OVER,b,V.input.localX,V.input.localY,W),w++,U.cancelled||!this.isActive()||V.input&&V.input.enabled&&(this.emit(l.GAMEOBJECT_OVER,b,V,W),U.cancelled||!this.isActive())))break}!U.cancelled&&this.isActive()&&this.emit(l.POINTER_OVER,b,N)}return this._over[b.id]=N,w},processOutEvents:function(b){var L=this._over[b.id],w=0,B=L.length;if(B>0){var N=this.manager,Y=this._eventData,U=this._eventContainer;Y.cancelled=!1,this.sortGameObjects(L,b);for(var W=0;W<B;W++){var O=L[W];if(O=L[W],!(!O.input||!O.input.enabled)&&(N.resetCursor(O.input),O.emit(l.GAMEOBJECT_POINTER_OUT,b,U),w++,Y.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(l.GAMEOBJECT_OUT,b,O,U),Y.cancelled||!this.isActive())))break}!Y.cancelled&&this.isActive()&&this.emit(l.POINTER_OUT,b,L),this._over[b.id]=[]}return w},processOverOutEvents:function(b){var L=this._temp,w,B,N=[],Y=[],U=[],W=this._over[b.id],O=this._drag[b.id],V=this.manager;for(w=0;w<W.length;w++)B=W[w],L.indexOf(B)===-1&&O.indexOf(B)===-1?N.push(B):U.push(B);for(w=0;w<L.length;w++)B=L[w],W.indexOf(B)===-1&&Y.push(B);var X=N.length,z=0,I=this._eventData,Z=this._eventContainer;if(I.cancelled=!1,X>0){for(this.sortGameObjects(N,b),w=0;w<X&&(B=N[w],!(!(!B.input||!B.input.enabled)&&(V.resetCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OUT,b,Z),z++,I.cancelled||!this.isActive()||B.input&&B.input.enabled&&(this.emit(l.GAMEOBJECT_OUT,b,B,Z),I.cancelled||!this.isActive()))));w++);(!I.cancelled||this.isActive())&&this.emit(l.POINTER_OUT,b,N)}if(X=Y.length,I.cancelled=!1,X>0){for(this.sortGameObjects(Y,b),w=0;w<X&&(B=Y[w],!(!(!B.input||!B.input.enabled)&&(V.setCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OVER,b,B.input.localX,B.input.localY,Z),z++,I.cancelled||!this.isActive()||B.input&&B.input.enabled&&(this.emit(l.GAMEOBJECT_OVER,b,B,Z),I.cancelled||!this.isActive()))));w++);!I.cancelled&&this.isActive()&&this.emit(l.POINTER_OVER,b,Y)}return W=U.concat(Y),this._over[b.id]=this.sortGameObjects(W,b),z},processUpEvents:function(b){var L=this._temp,w=this._eventData,B=this._eventContainer;w.cancelled=!1;for(var N=0;N<L.length;N++){var Y=L[N];if(!(!Y.input||!Y.input.enabled)&&(Y.emit(l.GAMEOBJECT_POINTER_UP,b,Y.input.localX,Y.input.localY,B),w.cancelled||!this.isActive()||Y.input&&Y.input.enabled&&(this.emit(l.GAMEOBJECT_UP,b,Y,B),w.cancelled||!this.isActive())))break}return!w.cancelled&&this.isActive()&&(b.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,b,L):this.emit(l.POINTER_UP_OUTSIDE,b)),L.length},forceDownState:function(b,L){this.forceState(b,L,l.GAMEOBJECT_POINTER_DOWN,l.GAMEOBJECT_DOWN,!1)},forceUpState:function(b,L){this.forceState(b,L,l.GAMEOBJECT_POINTER_UP,l.GAMEOBJECT_UP,!1)},forceOverState:function(b,L){this.forceState(b,L,l.GAMEOBJECT_POINTER_OVER,l.GAMEOBJECT_OVER,!0)},forceOutState:function(b,L){this.forceState(b,L,l.GAMEOBJECT_POINTER_OUT,l.GAMEOBJECT_OUT,!1)},forceState:function(b,L,w,B,N){var Y=this._eventData,U=this._eventContainer;Y.cancelled=!1,L.input&&L.input.enabled&&(L.emit(w,b,L.input.localX,L.input.localY,U),N&&this.setCursor(L.input),!Y.cancelled&&this.isActive()&&L.input&&L.input.enabled&&this.emit(B,b,L,U))},queueForInsertion:function(b){return this._pendingInsertion.indexOf(b)===-1&&this._list.indexOf(b)===-1&&this._pendingInsertion.push(b),this},queueForRemoval:function(b){return this._pendingRemoval.push(b),this},setDraggable:function(b,L){L===void 0&&(L=!0),Array.isArray(b)||(b=[b]);for(var w=0;w<b.length;w++){var B=b[w];B.input.draggable=L;var N=this._draggable.indexOf(B);L&&N===-1?this._draggable.push(B):!L&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(b){b===void 0&&(b=1);var L=this.systems.textures;return e(L,b)},setHitArea:function(b,L,w){if(L===void 0)return this.setHitAreaFromTexture(b);Array.isArray(b)||(b=[b]);var B=!1,N=!1,Y=!1,U=!1,W=!1,O=!0;if(y(L)&&Object.keys(L).length){var V=L,X=b.some(function(k){return k.hasOwnProperty("faces")});if(!X){L=d(V,"hitArea",null),w=d(V,"hitAreaCallback",null),W=d(V,"pixelPerfect",!1);var z=d(V,"alphaTolerance",1);W&&(L={},w=this.makePixelPerfect(z))}B=d(V,"draggable",!1),N=d(V,"dropZone",!1),Y=d(V,"cursor",!1),U=d(V,"useHandCursor",!1),(!L||!w)&&(this.setHitAreaFromTexture(b),O=!1)}else typeof L=="function"&&!w&&(w=L,L={});for(var I=0;I<b.length;I++){var Z=b[I];if(W&&Z.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var J=Z.input?Z.input:r(Z,L,w);J.customHitArea=O,J.dropZone=N,J.cursor=U?"pointer":Y,Z.input=J,B&&this.setDraggable(Z),this.queueForInsertion(Z)}return this},setHitAreaCircle:function(b,L,w,B,N){N===void 0&&(N=g);var Y=new h(L,w,B);return this.setHitArea(b,Y,N)},setHitAreaEllipse:function(b,L,w,B,N,Y){Y===void 0&&(Y=s);var U=new u(L,w,B,N);return this.setHitArea(b,U,Y)},setHitAreaFromTexture:function(b,L){L===void 0&&(L=E),Array.isArray(b)||(b=[b]);for(var w=0;w<b.length;w++){var B=b[w],N=B.frame,Y=0,U=0;if(B.width?(Y=B.width,U=B.height):N&&(Y=N.realWidth,U=N.realHeight),B.type==="Container"&&(Y===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Y!==0&&U!==0&&(B.input=r(B,new C(0,0,Y,U),L),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(b,L,w,B,N,Y){Y===void 0&&(Y=E);var U=new C(L,w,B,N);return this.setHitArea(b,U,Y)},setHitAreaTriangle:function(b,L,w,B,N,Y,U,W){W===void 0&&(W=R);var O=new A(L,w,B,N,Y,U);return this.setHitArea(b,O,W)},enableDebug:function(b,L){L===void 0&&(L=65280);var w=b.input;if(!w||!w.hitArea)return this;var B=w.hitArea,N=B.type,Y=w.hitAreaDebug,U=this.systems.add,W=this.systems.updateList;Y&&(W.remove(Y),Y.destroy(),Y=null);var O=0,V=0;switch(N){case f.CIRCLE:Y=U.arc(0,0,B.radius),O=B.x-B.radius,V=B.y-B.radius;break;case f.ELLIPSE:Y=U.ellipse(0,0,B.width,B.height),O=B.x-B.width/2,V=B.y-B.height/2;break;case f.LINE:Y=U.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case f.POLYGON:Y=U.polygon(0,0,B.points);break;case f.RECTANGLE:Y=U.rectangle(0,0,B.width,B.height),O=B.x,V=B.y;break;case f.TRIANGLE:Y=U.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return Y&&(Y.isFilled=!1,Y.strokeColor=L,Y.preUpdate=function(){Y.setVisible(b.visible),Y.setStrokeStyle(1/b.scale,Y.strokeColor),Y.setDisplayOrigin(b.displayOriginX,b.displayOriginY);var X=b.x,z=b.y,I=b.rotation,Z=b.scaleX,J=b.scaleY;if(b.parentContainer){var k=b.getWorldTransformMatrix();X=k.tx,z=k.ty,I=k.rotation,Z=k.scaleX,J=k.scaleY}Y.setRotation(I),Y.setScale(Z,J),Y.setPosition(X+O*Z,z+V*J),Y.setScrollFactor(b.scrollFactorX,b.scrollFactorY),Y.setDepth(b.depth)},W.add(Y),w.hitAreaDebug=Y),this},removeDebug:function(b){var L=b.input;if(L&&L.hitAreaDebug){var w=L.hitAreaDebug;w.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(b){return this.pollRate=b,this._pollTimer=0,this},setGlobalTopOnly:function(b){return this.manager.globalTopOnly=b,this},setTopOnly:function(b){return this.topOnly=b,this},sortGameObjects:function(b,L){if(b.length<2||!L.camera)return b;var w=L.camera.renderList;return b.sort(function(B,N){var Y=Math.max(w.indexOf(B),0),U=Math.max(w.indexOf(N),0);return U-Y})},sortDropZones:function(b){return b.length<2?b:(this.scene.sys.depthSort(),b.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(b,L){if(!b.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(b);if(b.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-b.parentContainer.getIndex(b);if(b.parentContainer===L)return-1;if(L.parentContainer===b)return 1;for(var w=b.getIndexList(),B=L.getIndexList(),N=Math.min(w.length,B.length),Y=0;Y<N;Y++){var U=w[Y],W=B[Y];if(U!==W)return W-U}return B.length-w.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(b){return this.manager.addPointer(b)},setDefaultCursor:function(b){return this.manager.setDefaultCursor(b),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var b=0;b<10;b++)this._drag[b]=[],this._over[b]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var w=this.systems.events;w.off(P.TRANSITION_START,this.transitionIn,this),w.off(P.TRANSITION_OUT,this.transitionOut,this),w.off(P.TRANSITION_COMPLETE,this.transitionComplete,this),w.off(P.PRE_UPDATE,this.preUpdate,this),L.events.off(l.GAME_OUT,this.onGameOut,this),L.events.off(l.GAME_OVER,this.onGameOver,this),w.off(P.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var b=this.manager.pointers,L=0;L<b.length;L++)b[L].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(P.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});S.register("InputPlugin",G,"input"),p.exports=G}),89639:((p,M,t)=>{var h=t(35154),g={},o={};o.register=function(a,r,e,n,u){g[a]={plugin:r,mapping:e,settingsKey:n,configKey:u}},o.getPlugin=function(a){return g[a]},o.install=function(a){var r=a.scene.sys,e=r.settings.input,n=r.game.config;for(var u in g){var s=g[u].plugin,l=g[u].mapping,c=g[u].settingsKey,d=g[u].configKey;h(e,c,n[d])&&(a[l]=new s(a))}},o.remove=function(a){g.hasOwnProperty(a)&&delete g[a]},p.exports=o}),42515:((p,M,t)=>{var h=t(31040),g=t(83419),o=t(20339),a=t(43855),r=t(47235),e=t(26099),n=t(25892),u=new g({initialize:function(l,c){this.manager=l,this.id=c,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new e,this.prevPosition=new e,this.midPoint=new e(-1,-1),this.velocity=new e,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=c===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(s){var l=s.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(s,l){return s.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var s=this.position.x,l=this.position.y,c=this.midPoint.x,d=this.midPoint.y;if(!(s===c&&l===d)){var f=r(this.motionFactor,c,s),m=r(this.motionFactor,d,l);a(f,s,.1)&&(f=s),a(m,l,.1)&&(m=l),this.midPoint.set(f,m);var y=s-f,S=l-m;this.velocity.set(y,S),this.angle=h(f,m,s,l),this.distance=Math.sqrt(y*y+S*S)}},up:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=s.timeStamp,this.wasTouch=!1)},down:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&s.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=s.timeStamp),this.wasTouch=!1},move:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.locked&&(this.movementX=s.movementX||s.mozMovementX||s.webkitMovementX||0,this.movementY=s.movementY||s.mozMovementY||s.webkitMovementY||0),this.moveTime=s.timeStamp,this.wasTouch=!1},wheel:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.deltaX=s.deltaX,this.deltaY=s.deltaY,this.deltaZ=s.deltaZ,this.wasTouch=!1},touchstart:function(s,l){s.pointerId&&(this.pointerId=s.pointerId),this.identifier=s.identifier,this.target=s.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(s,l){this.event=l,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(s,l){this.buttons=0,this.event=l,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(s,l){this.buttons=0,this.event=l,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(s,l){s===void 0&&(s=10),l===void 0&&(l=[]);for(var c=this.prevPosition.x,d=this.prevPosition.y,f=this.position.x,m=this.position.y,y=0;y<s;y++){var S=1/s*y;l[y]={x:r(S,c,f),y:r(S,d,m)}}return l},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(s){this.position.x=s}},y:{get:function(){return this.position.y},set:function(s){this.position.y=s}},time:{get:function(){return this.event?this.event.timeStamp:0}}});p.exports=u}),93301:(p=>{var M={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};p.exports=M}),7179:(p=>{p.exports="boot"}),85375:(p=>{p.exports="destroy"}),39843:(p=>{p.exports="dragend"}),23388:(p=>{p.exports="dragenter"}),16133:(p=>{p.exports="drag"}),27829:(p=>{p.exports="dragleave"}),53904:(p=>{p.exports="dragover"}),56058:(p=>{p.exports="dragstart"}),2642:(p=>{p.exports="drop"}),88171:(p=>{p.exports="gameobjectdown"}),36147:(p=>{p.exports="dragend"}),71692:(p=>{p.exports="dragenter"}),96149:(p=>{p.exports="drag"}),81285:(p=>{p.exports="dragleave"}),74048:(p=>{p.exports="dragover"}),21322:(p=>{p.exports="dragstart"}),49378:(p=>{p.exports="drop"}),86754:(p=>{p.exports="gameobjectmove"}),86433:(p=>{p.exports="gameobjectout"}),60709:(p=>{p.exports="gameobjectover"}),24081:(p=>{p.exports="pointerdown"}),11172:(p=>{p.exports="pointermove"}),18907:(p=>{p.exports="pointerout"}),95579:(p=>{p.exports="pointerover"}),35368:(p=>{p.exports="pointerup"}),26972:(p=>{p.exports="wheel"}),47078:(p=>{p.exports="gameobjectup"}),73802:(p=>{p.exports="gameobjectwheel"}),56718:(p=>{p.exports="gameout"}),25936:(p=>{p.exports="gameover"}),27503:(p=>{p.exports="boot"}),50852:(p=>{p.exports="process"}),96438:(p=>{p.exports="update"}),59152:(p=>{p.exports="pointerlockchange"}),47777:(p=>{p.exports="pointerdown"}),27957:(p=>{p.exports="pointerdownoutside"}),19444:(p=>{p.exports="pointermove"}),54251:(p=>{p.exports="pointerout"}),18667:(p=>{p.exports="pointerover"}),27192:(p=>{p.exports="pointerup"}),24652:(p=>{p.exports="pointerupoutside"}),45132:(p=>{p.exports="wheel"}),44512:(p=>{p.exports="preupdate"}),15757:(p=>{p.exports="shutdown"}),41637:(p=>{p.exports="start"}),93802:(p=>{p.exports="update"}),8214:((p,M,t)=>{p.exports={BOOT:t(7179),DESTROY:t(85375),DRAG_END:t(39843),DRAG_ENTER:t(23388),DRAG:t(16133),DRAG_LEAVE:t(27829),DRAG_OVER:t(53904),DRAG_START:t(56058),DROP:t(2642),GAME_OUT:t(56718),GAME_OVER:t(25936),GAMEOBJECT_DOWN:t(88171),GAMEOBJECT_DRAG_END:t(36147),GAMEOBJECT_DRAG_ENTER:t(71692),GAMEOBJECT_DRAG:t(96149),GAMEOBJECT_DRAG_LEAVE:t(81285),GAMEOBJECT_DRAG_OVER:t(74048),GAMEOBJECT_DRAG_START:t(21322),GAMEOBJECT_DROP:t(49378),GAMEOBJECT_MOVE:t(86754),GAMEOBJECT_OUT:t(86433),GAMEOBJECT_OVER:t(60709),GAMEOBJECT_POINTER_DOWN:t(24081),GAMEOBJECT_POINTER_MOVE:t(11172),GAMEOBJECT_POINTER_OUT:t(18907),GAMEOBJECT_POINTER_OVER:t(95579),GAMEOBJECT_POINTER_UP:t(35368),GAMEOBJECT_POINTER_WHEEL:t(26972),GAMEOBJECT_UP:t(47078),GAMEOBJECT_WHEEL:t(73802),MANAGER_BOOT:t(27503),MANAGER_PROCESS:t(50852),MANAGER_UPDATE:t(96438),POINTER_DOWN:t(47777),POINTER_DOWN_OUTSIDE:t(27957),POINTER_MOVE:t(19444),POINTER_OUT:t(54251),POINTER_OVER:t(18667),POINTER_UP:t(27192),POINTER_UP_OUTSIDE:t(24652),POINTER_WHEEL:t(45132),POINTERLOCK_CHANGE:t(59152),PRE_UPDATE:t(44512),SHUTDOWN:t(15757),START:t(41637),UPDATE:t(93802)}}),97421:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.pad=a,this.events=a.events,this.index=r,this.value=0,this.threshold=.1},update:function(o){this.value=o},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});p.exports=g}),28884:((p,M,t)=>{var h=t(83419),g=t(92734),o=new h({initialize:function(r,e){this.pad=r,this.events=r.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var r=this.pad,e=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,r,this,a),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,e,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,r,this,a),this.pad.emit(g.GAMEPAD_BUTTON_UP,e,a,this))},destroy:function(){this.pad=null,this.events=null}});p.exports=o}),99125:((p,M,t)=>{var h=t(97421),g=t(28884),o=t(83419),a=t(50792),r=t(26099),e=new o({Extends:a,initialize:function(u,s){a.call(this),this.manager=u,this.pad=s,this.id=s.id,this.index=s.index;for(var l=[],c=0;c<s.buttons.length;c++)l.push(new g(this,c));this.buttons=l;var d=[];for(c=0;c<s.axes.length;c++)d.push(new h(this,c));this.axes=d,this.vibration=s.vibrationActuator;var f={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:f,this._LCRight=l[15]?l[15]:f,this._LCTop=l[12]?l[12]:f,this._LCBottom=l[13]?l[13]:f,this._RCLeft=l[2]?l[2]:f,this._RCRight=l[1]?l[1]:f,this._RCTop=l[3]?l[3]:f,this._RCBottom=l[0]?l[0]:f,this._FBLeftTop=l[4]?l[4]:f,this._FBLeftBottom=l[6]?l[6]:f,this._FBRightTop=l[5]?l[5]:f,this._FBRightBottom=l[7]?l[7]:f;var m={value:0};this._HAxisLeft=d[0]?d[0]:m,this._VAxisLeft=d[1]?d[1]:m,this._HAxisRight=d[2]?d[2]:m,this._VAxisRight=d[3]?d[3]:m,this.leftStick=new r,this.rightStick=new r,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var u,s=this.buttons,l=n.buttons,c=s.length;for(u=0;u<c;u++)s[u].update(l[u].value);var d=this.axes,f=n.axes;for(c=d.length,u=0;u<c;u++)d[u].update(f[u]);c>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),c>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var n;for(n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});p.exports=e}),56654:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(92734),a=t(99125),r=t(35154),e=t(89639),n=t(8214),u=new h({Extends:g,initialize:function(l){g.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(n.BOOT,this.boot,this),l.pluginEvents.on(n.START,this.start,this)},boot:function(){var s=this.scene.sys.game,l=this.settings.input,c=s.config;this.enabled=r(l,"gamepad",c.inputGamepad)&&s.device.input.gamepads,this.target=r(l,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var s=this,l=this.target,c=function(d){d.defaultPrevented||!s.isActive()||(s.refreshPads(),s.queue.push(d))};this.onGamepadHandler=c,l.addEventListener("gamepadconnected",c,!1),l.addEventListener("gamepaddisconnected",c,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].removeAllListeners()},disconnectAll:function(){for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].pad.connected=!1},refreshPads:function(){var s=navigator.getGamepads();if(!s)this.disconnectAll();else for(var l=this.gamepads,c=0;c<s.length;c++){var d=s[c];if(d){var f=d.id,m=d.index,y=l[m];if(y)y.id!==f?(y.destroy(),l[m]=new a(this,d)):y.update(d);else{var S=new a(this,d);l[m]=S,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=S):this._pad3=S:this._pad2=S:this._pad1=S}}}},getAll:function(){for(var s=[],l=this.gamepads,c=0;c<l.length;c++)l[c]&&s.push(l[c]);return s},getPad:function(s){for(var l=this.gamepads,c=0;c<l.length;c++)if(l[c]&&l[c].index===s)return l[c]},update:function(){if(this.enabled){this.refreshPads();var s=this.queue.length;if(s!==0)for(var l=this.queue.splice(0,s),c=0;c<s;c++){var d=l[c],f=this.getPad(d.gamepad.index);d.type==="gamepadconnected"?this.emit(o.CONNECTED,f,d):d.type==="gamepaddisconnected"&&this.emit(o.DISCONNECTED,f,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var s=0;s<this.gamepads.length;s++)this.gamepads[s]&&this.gamepads[s].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});e.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),p.exports=u}),89651:(p=>{p.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(p=>{p.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(p=>{p.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((p,M,t)=>{p.exports={DUALSHOCK_4:t(65294),SNES_USB:t(89651),XBOX_360:t(90089)}}),46008:(p=>{p.exports="down"}),7629:(p=>{p.exports="up"}),42206:(p=>{p.exports="connected"}),86544:(p=>{p.exports="disconnected"}),94784:(p=>{p.exports="down"}),14325:(p=>{p.exports="up"}),92734:((p,M,t)=>{p.exports={BUTTON_DOWN:t(46008),BUTTON_UP:t(7629),CONNECTED:t(42206),DISCONNECTED:t(86544),GAMEPAD_BUTTON_DOWN:t(94784),GAMEPAD_BUTTON_UP:t(14325)}}),48646:((p,M,t)=>{p.exports={Axis:t(97421),Button:t(28884),Events:t(92734),Gamepad:t(99125),GamepadPlugin:t(56654),Configs:t(64894)}}),14350:((p,M,t)=>{var h=t(93301),g=t(79291),o={CreatePixelPerfectHandler:t(84409),CreateInteractiveObject:t(74457),Events:t(8214),Gamepad:t(48646),InputManager:t(7003),InputPlugin:t(48205),InputPluginCache:t(89639),Keyboard:t(51442),Mouse:t(87078),Pointer:t(42515),Touch:t(95618)};o=g(!1,o,h),p.exports=o}),78970:((p,M,t)=>{var h=t(72905),g=t(83419),o=t(8443),a=t(8214),r=t(46032),e=t(29747),n=new g({initialize:function(s){this.manager=s,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=e,this.onKeyUp=e,s.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(o.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var c=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!c&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var c=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!c&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var s=this.target;s&&(s.addEventListener("keydown",this.onKeyDown,!1),s.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var s=this.captures,l=0;l<u.length;l++){var c=u[l];typeof c=="string"&&(c=r[c.trim().toUpperCase()]),s.indexOf(c)===-1&&s.push(c)}this.preventDefault=s.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var s=this.captures,l=0;l<u.length;l++){var c=u[l];typeof c=="string"&&(c=r[c.toUpperCase()]),h(s,c)}this.preventDefault=s.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(o.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});p.exports=n}),28846:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(95922),a=t(8443),r=t(35154),e=t(8214),n=t(89639),u=t(30472),s=t(46032),l=t(87960),c=t(74600),d=t(44594),f=t(56583),m=new h({Extends:g,initialize:function(S){g.call(this),this.game=S.systems.game,this.scene=S.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=S,this.manager=S.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,S.pluginEvents.once(e.BOOT,this.boot,this),S.pluginEvents.on(e.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=r(y,"keyboard",!0);var S=r(y,"keyboard.capture",null);S&&this.addCaptures(S),this.sceneInputPlugin.pluginEvents.once(e.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(e.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(e.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:s.UP,down:s.DOWN,left:s.LEFT,right:s.RIGHT,space:s.SPACE,shift:s.SHIFT})},addKeys:function(y,S,C){S===void 0&&(S=!0),C===void 0&&(C=!1);var E={};if(typeof y=="string"){y=y.split(",");for(var P=0;P<y.length;P++){var A=y[P].trim();A&&(E[A]=this.addKey(A,S,C))}}else for(var R in y)E[R]=this.addKey(y[R],S,C);return E},addKey:function(y,S,C){S===void 0&&(S=!0),C===void 0&&(C=!1);var E=this.keys;if(y instanceof u){var P=E.indexOf(y);return P>-1?E[P]=y:E[y.keyCode]=y,S&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=s[y.toUpperCase()]),E[y]||(E[y]=new u(this,y),S&&this.addCapture(y),E[y].setEmitOnRepeat(C)),E[y]},removeKey:function(y,S,C){S===void 0&&(S=!1),C===void 0&&(C=!1);var E=this.keys,P;if(y instanceof u){var A=E.indexOf(y);A>-1&&(P=this.keys[A],this.keys[A]=void 0)}else typeof y=="string"&&(y=s[y.toUpperCase()]);return E[y]&&(P=E[y],E[y]=void 0),P&&(P.plugin=null,C&&this.removeCapture(P.keyCode),S&&P.destroy()),this},removeAllKeys:function(y,S){y===void 0&&(y=!1),S===void 0&&(S=!1);for(var C=this.keys,E=0;E<C.length;E++){var P=C[E];P&&(C[E]=void 0,S&&this.removeCapture(P.keyCode),y&&P.destroy())}return this},createCombo:function(y,S){return new l(this,y,S)},checkDown:function(y,S){if(S===void 0&&(S=0),this.enabled&&y.isDown){var C=f(this.time-y.timeDown,S);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,S=y.length;if(!(!this.isActive()||S===0))for(var C=this.keys,E=0;E<S;E++){var P=y[E],A=P.keyCode,R=C[A],G=!1;P.cancelled===void 0&&(P.cancelled=0,P.stopImmediatePropagation=function(){P.cancelled=1},P.stopPropagation=function(){P.cancelled=-1}),P.cancelled!==-1&&(A===this.prevCode&&P.timeStamp===this.prevTime&&P.type===this.prevType||(this.prevCode=A,this.prevTime=P.timeStamp,this.prevType=P.type,P.type==="keydown"?(R&&(G=R.isDown,R.onDown(P)),!P.cancelled&&(!R||!G)&&(c[A]&&this.emit(o.KEY_DOWN+c[A],P),P.cancelled||this.emit(o.ANY_KEY_DOWN,P))):(R&&R.onUp(P),P.cancelled||(c[A]&&this.emit(o.KEY_UP+c[A],P),P.cancelled||this.emit(o.ANY_KEY_UP,P))),P.cancelled===1&&(P.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,S=0;S<y.length;S++)y[S]&&y[S].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(e.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,S=0;S<y.length;S++)y[S]&&y[S].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),p.exports=m}),66970:(p=>{var M=function(t,h){return h.timeLastMatched=t.timeStamp,h.index++,h.index===h.size?!0:(h.current=h.keyCodes[h.index],!1)};p.exports=M}),87960:((p,M,t)=>{var h=t(83419),g=t(95922),o=t(95540),a=t(68769),r=t(92803),e=new h({initialize:function(u,s,l){if(l===void 0&&(l={}),s.length<2)return!1;this.manager=u,this.enabled=!0,this.keyCodes=[];for(var c=0;c<s.length;c++){var d=s[c];typeof d=="string"?this.keyCodes.push(d.toUpperCase().charCodeAt(0)):typeof d=="number"?this.keyCodes.push(d):d.hasOwnProperty("keyCode")&&this.keyCodes.push(d.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=o(l,"resetOnWrongKey",!0),this.maxKeyDelay=o(l,"maxKeyDelay",0),this.resetOnMatch=o(l,"resetOnMatch",!1),this.deleteOnMatch=o(l,"deleteOnMatch",!1);var f=this,m=function(y){if(!(f.matched||!f.enabled)){var S=a(y,f);S&&(f.manager.emit(g.COMBO_MATCH,f,y),f.resetOnMatch?r(f):f.deleteOnMatch&&f.destroy())}};this.onKeyDown=m,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});p.exports=e}),68769:((p,M,t)=>{var h=t(66970),g=function(o,a){if(a.matched)return!0;var r=!1,e=!1;if(o.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var n=a.timeLastMatched+a.maxKeyDelay;o.timeStamp<=n&&(e=!0,r=h(o,a))}else e=!0,r=h(o,a);return!e&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),r&&(a.timeLastMatched=o.timeStamp,a.matched=!0,a.timeMatched=o.timeStamp),r};p.exports=g}),92803:(p=>{var M=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};p.exports=M}),92612:(p=>{p.exports="keydown"}),23345:(p=>{p.exports="keyup"}),21957:(p=>{p.exports="keycombomatch"}),44743:(p=>{p.exports="down"}),3771:(p=>{p.exports="keydown-"}),46358:(p=>{p.exports="keyup-"}),75674:(p=>{p.exports="up"}),95922:((p,M,t)=>{p.exports={ANY_KEY_DOWN:t(92612),ANY_KEY_UP:t(23345),COMBO_MATCH:t(21957),DOWN:t(44743),KEY_DOWN:t(3771),KEY_UP:t(46358),UP:t(75674)}}),51442:((p,M,t)=>{p.exports={Events:t(95922),KeyboardManager:t(78970),KeyboardPlugin:t(28846),Key:t(30472),KeyCodes:t(46032),KeyCombo:t(87960),AdvanceKeyCombo:t(66970),ProcessKeyCombo:t(68769),ResetKeyCombo:t(92803),JustDown:t(90229),JustUp:t(38796),DownDuration:t(37015),UpDuration:t(41170)}}),37015:(p=>{var M=function(t,h){h===void 0&&(h=50);var g=t.plugin.game.loop.time-t.timeDown;return t.isDown&&g<h};p.exports=M}),90229:(p=>{var M=function(t){return t._justDown?(t._justDown=!1,!0):!1};p.exports=M}),38796:(p=>{var M=function(t){return t._justUp?(t._justUp=!1,!0):!1};p.exports=M}),30472:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(95922),a=new h({Extends:g,initialize:function(e,n){g.call(this),this.plugin=e,this.keyCode=n,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(r){return this.emitOnRepeat=r,this},onDown:function(r){this.originalEvent=r,this.enabled&&(this.altKey=r.altKey,this.ctrlKey=r.ctrlKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.location=r.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(o.DOWN,this,r):(this.isDown=!0,this.isUp=!1,this.timeDown=r.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(o.DOWN,this,r)))},onUp:function(r){this.originalEvent=r,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=r.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(o.UP,this,r))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});p.exports=a}),46032:(p=>{var M={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};p.exports=M}),74600:((p,M,t)=>{var h=t(46032),g={};for(var o in h)g[h[o]]=o;p.exports=g}),41170:(p=>{var M=function(t,h){h===void 0&&(h=50);var g=t.plugin.game.loop.time-t.timeUp;return t.isUp&&g<h};p.exports=M}),85098:((p,M,t)=>{var h=t(83419),g=t(89357),o=t(8214),a=t(29747),r=new h({initialize:function(n){this.manager=n,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,n.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(e){var n=this,u=this.manager,s=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onMouseMove(d),n.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){l&&window.focus(),!d.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onMouseDown(d),n.preventDefaultDown&&d.target===s&&d.preventDefault())},this.onMouseDownWindow=function(d){d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents||!d.defaultPrevented&&n.enabled&&u&&u.enabled&&d.target!==s&&u.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onMouseUp(d),n.preventDefaultUp&&d.target===s&&d.preventDefault())},this.onMouseUpWindow=function(d){d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents||!d.defaultPrevented&&n.enabled&&u&&u.enabled&&d.target!==s&&u.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&n.enabled&&u&&u.enabled&&u.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&n.enabled&&u&&u.enabled&&u.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&n.enabled&&u&&u.enabled&&u.onMouseWheel(d),n.preventDefaultWheel&&d.target===s&&d.preventDefault()};var c={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,c),e.addEventListener("mouseout",this.onMouseOut,c),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,c),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(d){var f=n.target;n.locked=document.pointerLockElement===f||document.mozPointerLockElement===f||document.webkitPointerLockElement===f,u.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});p.exports=r}),87078:((p,M,t)=>{p.exports={MouseManager:t(85098)}}),36210:((p,M,t)=>{var h=t(83419),g=t(8214),o=t(29747),a=new h({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=o,this.onTouchStartWindow=o,this.onTouchMove=o,this.onTouchEnd=o,this.onTouchEndWindow=o,this.onTouchCancel=o,this.onTouchCancelWindow=o,this.isTop=!0,e.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputTouch,this.target=r.inputTouchEventTarget,this.capture=r.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},startListeners:function(){var r=this.target;if(r){var e=this,n=this.manager,u=n.canvas,s=window&&window.focus&&n.game.config.autoFocus;this.onTouchMove=function(f){!f.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchMove(f),e.capture&&f.cancelable&&f.preventDefault())},this.onTouchStart=function(f){s&&window.focus(),!f.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchStart(f),e.capture&&f.cancelable&&f.target===u&&f.preventDefault())},this.onTouchStartWindow=function(f){!f.defaultPrevented&&e.enabled&&n&&n.enabled&&f.target!==u&&n.onTouchStart(f)},this.onTouchEnd=function(f){!f.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchEnd(f),e.capture&&f.cancelable&&f.target===u&&f.preventDefault())},this.onTouchEndWindow=function(f){!f.defaultPrevented&&e.enabled&&n&&n.enabled&&f.target!==u&&n.onTouchEnd(f)},this.onTouchCancel=function(f){!f.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchCancel(f),e.capture&&f.preventDefault())},this.onTouchCancelWindow=function(f){!f.defaultPrevented&&e.enabled&&n&&n.enabled&&n.onTouchCancel(f)};var l=this.capture,c={passive:!0},d={passive:!1};if(r.addEventListener("touchstart",this.onTouchStart,l?d:c),r.addEventListener("touchmove",this.onTouchMove,l?d:c),r.addEventListener("touchend",this.onTouchEnd,l?d:c),r.addEventListener("touchcancel",this.onTouchCancel,l?d:c),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,d),window.top.addEventListener("touchend",this.onTouchEndWindow,d),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,d)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,d),window.addEventListener("touchend",this.onTouchEndWindow,d),window.addEventListener("touchcancel",this.onTouchCancelWindow,d),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("touchstart",this.onTouchStart),r.removeEventListener("touchmove",this.onTouchMove),r.removeEventListener("touchend",this.onTouchEnd),r.removeEventListener("touchcancel",this.onTouchCancel),window&&(r=this.isTop?window.top:window,r.removeEventListener("touchstart",this.onTouchStartWindow),r.removeEventListener("touchend",this.onTouchEndWindow),r.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});p.exports=a}),95618:((p,M,t)=>{p.exports={TouchManager:t(36210)}}),41299:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(54899),a=t(95540),r=t(98356),e=t(3374),n=t(84376),u=t(92638),s=new h({initialize:function(c,d){if(this.loader=c,this.cache=a(d,"cache",!1),this.type=a(d,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=a(d,"key",!1);var f=this.key;if(c.prefix&&c.prefix!==""&&(this.key=c.prefix+f),!this.key)throw new Error("Invalid File key: "+this.key);var m=a(d,"url");m===void 0?m=c.path+f+"."+a(d,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(m=c.path+m),this.url=m,this.src="",this.xhrSettings=u(a(d,"responseType",void 0)),a(d,"xhrSettings",!1)&&(this.xhrSettings=e(this.xhrSettings,a(d,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(d,"config",{}),this.multiFile,this.linkFile,this.base64=typeof m=="string"&&m.indexOf("data:")===0,this.retryAttempts=a(d,"maxRetries",c.maxRetries)},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===g.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=g.FILE_LOADING,this.src=r(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=n(this,this.loader.xhr)}},onLoad:function(l,c){var d=l.responseURL&&this.loader.localSchemes.some(function(y){return l.responseURL.indexOf(y)===0}),f=d&&c.target.status===0,m=!(c.target&&c.target.status!==200)||f;l.readyState===4&&l.status>=400&&l.status<=599&&(m=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onBase64Load:function(l){this.xhrLoader=l,this.state=g.FILE_LOADED,this.percentComplete=1,this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(l){if(this.state!==g.FILE_PENDING_DESTROY){l===void 0&&(l=this.data);var c=this.key,d=this.type;this.loader.emit(o.FILE_COMPLETE,c,d,l),this.loader.emit(o.FILE_KEY_COMPLETE+d+"-"+c,c,d,l),this.loader.flagForRemoval(this),this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});s.createObjectURL=function(l,c,d){if(typeof URL=="function")l.src=URL.createObjectURL(c);else{var f=new FileReader;f.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(c.type||d)+";base64,"+f.result.split(",")[1]},f.onerror=l.onerror,f.readAsDataURL(c)}},s.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},p.exports=s}),74099:(p=>{var M={},t={install:function(h){for(var g in M)h[g]=M[g]},register:function(h,g){M[h]=g},destroy:function(){M={}}};p.exports=t}),98356:(p=>{var M=function(t,h){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:h+t.url:!1};p.exports=M}),74261:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(35072),a=t(50792),r=t(54899),e=t(74099),n=t(95540),u=t(35154),s=t(41212),l=t(37277),c=t(44594),d=t(92638),f=new h({Extends:a,initialize:function(y){a.call(this);var S=y.sys.game.config,C=y.sys.settings.loader;this.scene=y,this.systems=y.sys,this.cacheManager=y.sys.cache,this.textureManager=y.sys.textures,this.sceneManager=y.sys.game.scene,e.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(C,"baseURL",S.loaderBaseURL)),this.setPath(n(C,"path",S.loaderPath)),this.setPrefix(n(C,"prefix",S.loaderPrefix)),this.maxParallelDownloads=n(C,"maxParallelDownloads",S.loaderMaxParallelDownloads),this.xhr=d(n(C,"responseType",S.loaderResponseType),n(C,"async",S.loaderAsync),n(C,"user",S.loaderUser),n(C,"password",S.loaderPassword),n(C,"timeout",S.loaderTimeout),n(C,"withCredentials",S.loaderWithCredentials)),this.crossOrigin=n(C,"crossOrigin",S.loaderCrossOrigin),this.imageLoadType=n(C,"imageLoadType",S.loaderImageLoadType),this.localSchemes=n(C,"localScheme",S.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new o,this.inflight=new o,this.queue=new o,this._deleteQueue=new o,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=n(C,"maxRetries",S.loaderMaxRetries),y.sys.events.once(c.BOOT,this.boot,this),y.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++){var S=m[y];this.keyExists(S)||(this.list.set(S),this.emit(r.ADD,S.key,S.type,this,S),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var y=m.hasCacheConflict();return y||this.list.iterate(function(S){if(S.type===m.type&&S.key===m.key)return y=!0,!1}),!y&&this.isLoading()&&(this.inflight.iterate(function(S){if(S.type===m.type&&S.key===m.key)return y=!0,!1}),this.queue.iterate(function(S){if(S.type===m.type&&S.key===m.key)return y=!0,!1})),y},addPack:function(m,y){if(typeof y=="string"){var S=u(m,y);S&&(m={packKey:S})}var C=0,E=this.baseURL,P=this.path,A=this.prefix;for(var R in m)if(Object.prototype.hasOwnProperty.call(m,R)){var G=m[R],b=n(G,"baseURL",E),L=n(G,"path",P),w=n(G,"prefix",A),B=n(G,"files",null),N=n(G,"defaultType","void");if(Array.isArray(B)){this.setBaseURL(b),this.setPath(L),this.setPrefix(w);for(var Y=0;Y<B.length;Y++){var U=B[Y],W=U.hasOwnProperty("type")?U.type:N;this[W]&&(this[W](U),C++)}}}return this.setBaseURL(E),this.setPath(P),this.setPrefix(A),C>0},removePack:function(m,y){var S=this.systems.anims,C=this.cacheManager,E=this.textureManager,P={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},A;if(s(m))A=m;else if(A=C.json.get(m),!A){console.warn("Asset Pack not found in JSON cache:",m);return}y&&(A={_:A[y]});for(var R in A){var G=A[R],b=n(G,"prefix",""),L=n(G,"files"),w=n(G,"defaultType");if(Array.isArray(L))for(var B=0;B<L.length;B++){var N=L[B],Y=N.hasOwnProperty("type")?N.type:w;if(!Y){console.warn("No type:",N);continue}var U=b+N.key;if(Y==="animation"&&S.remove(U),!((Y==="aseprite"||Y==="atlas"||Y==="atlasXML"||Y==="htmlTexture"||Y==="image"||Y==="multiatlas"||Y==="spritesheet"||Y==="svg"||Y==="texture"||Y==="unityAtlas")&&(E.remove(U),!P[Y]))){if(Y==="pack"){this.removePack(U,N.dataKey);continue}if(Y==="spine"){var W=C.custom.spine.get(U);if(!W)continue;var O=W.prefix===void 0?"":W.prefix;C.custom.spine.remove(U);var V=C.custom.spineTextures.get(U);if(!V)continue;C.custom.spineTextures.remove(U);for(var X=0;X<V.pages.length;X++){var z=V.pages[X],I=O+z.name,Z=U+":"+I;E.exists(Z)?E.remove(Z):E.remove(I)}}var J=P[Y];if(J!==null){if(!J){console.warn("Unknown type:",Y);continue}var k=C[J];k.remove(U)}}}}},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(r.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(r.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===g.FILE_POPULATED||m.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,y){this.inflight&&(this.inflight.delete(m),this.updateProgress(),y?(this.totalComplete++,this.queue.set(m),this.emit(r.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(r.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===g.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===g.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(r.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(r.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,y){return this.save(JSON.stringify(m),y)},save:function(m,y,S){y===void 0&&(y="file.json"),S===void 0&&(S="application/json");var C=new Blob([m],{type:S}),E=URL.createObjectURL(C),P=document.createElement("a");return P.download=y,P.textContent="Download "+y,P.href=E,P.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,y=this.systems.settings.loader;this.setBaseURL(n(y,"baseURL",m.loaderBaseURL)),this.setPath(n(y,"path",m.loaderPath)),this.setPrefix(n(y,"prefix",m.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",f,"load"),p.exports=f}),3374:((p,M,t)=>{var h=t(79291),g=t(92638),o=function(a,r){var e=a===void 0?g():h({},a);if(r)for(var n in r)r[n]!==void 0&&(e[n]=r[n]);return e};p.exports=o}),26430:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(54899),a=new h({initialize:function(e,n,u,s){var l=[];s.forEach(function(f){f&&l.push(f)}),this.loader=e,this.type=n,this.key=u;var c=this.key;e.prefix&&e.prefix!==""&&(this.key=e.prefix+c),this.multiKeyIndex=e.multiKeyIndex++,this.files=l,this.state=g.FILE_PENDING,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var d=0;d<l.length;d++)l[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var e=this.files.indexOf(r);e!==-1&&this.pending--},onFileFailed:function(r){var e=this.files.indexOf(r);e!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,r.type,r.key))},pendingDestroy:function(){if(this.state!==g.FILE_PENDING_DESTROY){var r=this.key,e=this.type;this.loader.emit(o.FILE_COMPLETE,r,e),this.loader.emit(o.FILE_KEY_COMPLETE+e+"-"+r,r,e),this.loader.flagForRemoval(this);for(var n=0;n<this.files.length;n++)this.files[n].pendingDestroy();this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});p.exports=a}),84376:((p,M,t)=>{var h=t(3374),g=function(o,a){var r=h(a,o.xhrSettings);if(o.base64){var e=o.url.split(";base64,").pop()||o.url.split(",").pop(),n;o.xhrSettings.responseType==="arraybuffer"?n={response:Uint8Array.from(atob(e),function(l){return l.charCodeAt(0)}).buffer}:n={responseText:atob(e)},o.onBase64Load(n);return}var u=new XMLHttpRequest;if(u.open("GET",o.src,r.async,r.user,r.password),u.responseType=o.xhrSettings.responseType,u.timeout=r.timeout,r.headers)for(var s in r.headers)u.setRequestHeader(s,r.headers[s]);return r.header&&r.headerValue&&u.setRequestHeader(r.header,r.headerValue),r.requestedWith&&u.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&u.overrideMimeType(r.overrideMimeType),r.withCredentials&&(u.withCredentials=!0),u.onload=o.onLoad.bind(o,u),u.onerror=o.onError.bind(o,u),u.onprogress=o.onProgress.bind(o),u.ontimeout=o.onError.bind(o,u),u.send(),u};p.exports=g}),92638:(p=>{var M=function(t,h,g,o,a,r){return t===void 0&&(t=""),h===void 0&&(h=!0),g===void 0&&(g=""),o===void 0&&(o=""),a===void 0&&(a=0),r===void 0&&(r=!1),{responseType:t,async:h,user:g,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};p.exports=M}),23906:(p=>{var M={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};p.exports=M}),42155:(p=>{p.exports="addfile"}),38991:(p=>{p.exports="complete"}),27540:(p=>{p.exports="filecomplete"}),87464:(p=>{p.exports="filecomplete-"}),94486:(p=>{p.exports="loaderror"}),13035:(p=>{p.exports="load"}),38144:(p=>{p.exports="fileprogress"}),97520:(p=>{p.exports="postprocess"}),85595:(p=>{p.exports="progress"}),55680:(p=>{p.exports="start"}),54899:((p,M,t)=>{p.exports={ADD:t(42155),COMPLETE:t(38991),FILE_COMPLETE:t(27540),FILE_KEY_COMPLETE:t(87464),FILE_LOAD_ERROR:t(94486),FILE_LOAD:t(13035),FILE_PROGRESS:t(38144),POST_PROCESS:t(97520),PROGRESS:t(85595),START:t(55680)}}),14135:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(518),a=t(54899),r=new h({Extends:o,initialize:function(n,u,s,l,c){o.call(this,n,u,s,l,c),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),o.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(e,n,u,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,n,s,u));return this}),p.exports=r}),76272:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(518),n=t(26430),u=new h({Extends:n,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new e(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","json"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new e(l,c,f,y);S.linkFile?n.call(this,l,"atlasjson",c,[S,C,S.linkFile]):n.call(this,l,"atlasjson",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,l.data,c),l.addToCache(),this.complete=!0}}});g.register("aseprite",function(s,l,c,d,f){var m;if(Array.isArray(s))for(var y=0;y<s.length;y++)m=new u(this,s[y]),this.addFile(m.files);else m=new u(this,s,l,c,d,f),this.addFile(m.files);return this}),p.exports=u}),38734:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(518),n=t(26430),u=new h({Extends:n,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new e(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","json"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new e(l,c,f,y);S.linkFile?n.call(this,l,"atlasjson",c,[S,C,S.linkFile]):n.call(this,l,"atlasjson",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,l.data,c),this.complete=!0}}});g.register("atlas",function(s,l,c,d,f){var m;if(Array.isArray(s))for(var y=0;y<s.length;y++)m=new u(this,s[y]),this.addFile(m.files);else m=new u(this,s,l,c,d,f),this.addFile(m.files);return this}),p.exports=u}),74599:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(26430),n=t(57318),u=new h({Extends:e,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new n(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","xml"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new n(l,c,f,y);S.linkFile?e.call(this,l,"atlasxml",c,[S,C,S.linkFile]):e.call(this,l,"atlasxml",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(s.key,s.data,l.data,c),this.complete=!0}}});g.register("atlasXML",function(s,l,c,d,f){var m;if(Array.isArray(s))for(var y=0;y<s.length;y++)m=new u(this,s[y]),this.addFile(m.files);else m=new u(this,s,l,c,d,f),this.addFile(m.files);return this}),p.exports=u}),21097:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(89749),n=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f,m){if(n(c)){var y=c;c=r(y,"key"),f=r(y,"xhrSettings"),m=r(y,"context",m)}var S={type:"audio",cache:l.cacheManager.audio,extension:d.type,responseType:"arraybuffer",key:c,url:d.url,xhrSettings:f,config:{context:m}};o.call(this,l,S)},onProcess:function(){this.state=g.FILE_PROCESSING;var s=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){s.data=l,s.onProcessComplete()},function(l){console.error("Error decoding audio: "+s.key+" - ",l?l.message:null),s.onProcessError()}),this.config.context=null}});u.create=function(s,l,c,d,f){var m=s.systems.game,y=m.config.audio,S=m.device.audio;n(l)&&(c=r(l,"url",[]),d=r(l,"config",{}));var C=u.getAudioURL(m,c);return C?S.webAudio&&!y.disableWebAudio?new u(s,l,C,f,m.sound.context):new e(s,l,C,d):(console.warn('No audio URLs for "%s" can play on this device',l),null)},u.getAudioURL=function(s,l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var d=r(l[c],"url",l[c]);if(d.indexOf("blob:")===0||d.indexOf("data:")===0)return{url:d,type:""};var f=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(f=r(l[c],"type",f?f[1]:"").toLowerCase(),s.device.audio[f])return{url:d,type:f}}return null},a.register("audio",function(s,l,c,d){var f=this.systems.game,m=f.config.audio,y=f.device.audio;if(m.noAudio||!y.webAudio&&!y.audioData)return this;var S;if(Array.isArray(s))for(var C=0;C<s.length;C++)S=u.create(this,s[C]),S&&this.addFile(S);else S=u.create(this,s,l,c,d),S&&this.addFile(S);return this}),p.exports=u}),89524:((p,M,t)=>{var h=t(21097),g=t(83419),o=t(74099),a=t(95540),r=t(41212),e=t(518),n=t(26430),u=new g({Extends:n,initialize:function(l,c,d,f,m,y,S){if(r(c)){var C=c;c=a(C,"key"),d=a(C,"jsonURL"),f=a(C,"audioURL"),m=a(C,"audioConfig"),y=a(C,"audioXhrSettings"),S=a(C,"jsonXhrSettings")}var E;if(!f)E=new e(l,c,d,S),n.call(this,l,"audiosprite",c,[E]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=y;else{var P=h.create(l,c,f,m,y);P&&(E=new e(l,c,d,S),n.call(this,l,"audiosprite",c,[P,E]),this.config.resourceLoad=!1)}},onFileComplete:function(s){var l=this.files.indexOf(s);if(l!==-1&&(this.pending--,this.config.resourceLoad&&s.type==="json"&&s.data.hasOwnProperty("resources"))){var c=s.data.resources,d=a(this.config,"audioConfig"),f=a(this.config,"audioXhrSettings"),m=h.create(this.loader,s.key,c,d,f);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1];s.addToCache(),l.addToCache(),this.complete=!0}}});o.register("audioSprite",function(s,l,c,d,f,m){var y=this.systems.game,S=y.config.audio,C=y.device.audio;if(S&&S.noAudio||!C.webAudio&&!C.audioData)return this;var E;if(Array.isArray(s))for(var P=0;P<s.length;P++)E=new u(this,s[P]),E.files&&this.addFile(E.files);else E=new u(this,s,l,c,d,f,m),E.files&&this.addFile(E.files);return this})}),85722:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d,f){var m="bin";if(e(l)){var y=l;l=r(y,"key"),c=r(y,"url"),d=r(y,"xhrSettings"),m=r(y,"extension",m),f=r(y,"dataType",f)}var S={type:"binary",cache:s.cacheManager.binary,extension:m,responseType:"arraybuffer",key:l,url:c,xhrSettings:d,config:{dataType:f}};o.call(this,s,S)},onProcess:function(){this.state=g.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(u,s,l,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new n(this,u[d]));else this.addFile(new n(this,u,s,c,l));return this}),p.exports=n}),97025:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(26430),n=t(21859),u=t(57318),s=new h({Extends:e,initialize:function(c,d,f,m,y,S){var C,E;if(r(d)){var P=d;d=o(P,"key"),C=new a(c,{key:d,url:o(P,"textureURL"),extension:o(P,"textureExtension","png"),normalMap:o(P,"normalMap"),xhrSettings:o(P,"textureXhrSettings")}),E=new u(c,{key:d,url:o(P,"fontDataURL"),extension:o(P,"fontDataExtension","xml"),xhrSettings:o(P,"fontDataXhrSettings")})}else C=new a(c,d,f,y),E=new u(c,d,m,S);C.linkFile?e.call(this,c,"bitmapfont",d,[C,E,C.linkFile]):e.call(this,c,"bitmapfont",d,[C,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],c=this.files[1];l.addToCache();var d=l.cache.get(l.key),f=n(c.data,l.cache.getFrame(l.key),0,0,d);this.loader.cacheManager.bitmapFont.add(l.key,{data:f,texture:l.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(l,c,d,f,m){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new s(this,l[S]),this.addFile(y.files);else y=new s(this,l,c,d,f,m),this.addFile(y.files);return this}),p.exports=s}),16024:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d){var f="css";if(e(l)){var m=l;l=r(m,"key"),c=r(m,"url"),d=r(m,"xhrSettings"),f=r(m,"extension",f)}var y={type:"script",cache:!1,extension:f,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,s,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(u,s,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,l));return this}),p.exports=n}),69559:((p,M,t)=>{var h=t(38734),g=t(85722),o=t(83419),a=t(74099),r=t(95540),e=t(19550),n=t(41212),u=t(518),s=t(31403),l=t(46975),c=t(59327),d=t(26430),f=t(82038),m=t(55222),y=new o({Extends:d,initialize:function(C,E,P,A){if(P.multiAtlasURL){var R=new u(C,{key:E,url:P.multiAtlasURL,xhrSettings:A,config:P});d.call(this,C,"texture",E,[R])}else{var G=P.textureURL.substr(P.textureURL.length-3);P.type||(P.type=G.toLowerCase()==="ktx"?"KTX":"PVR");var b=new g(C,{key:E,url:P.textureURL,extension:G,xhrSettings:A,config:P});if(P.atlasURL){var L=new u(C,{key:E,url:P.atlasURL,xhrSettings:A,config:P});d.call(this,C,"texture",E,[b,L])}else d.call(this,C,"texture",E,[b])}this.config=P},onFileComplete:function(S){var C=this.files.indexOf(S);if(C!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(S.type==="json"&&S.data.hasOwnProperty("textures")){var E=S.data.textures,P=this.config,A=this.loader,R=A.baseURL,G=A.path,b=A.prefix,L=r(P,"multiBaseURL",this.baseURL),w=r(P,"multiPath",this.path),B=r(P,"prefix",this.prefix),N=r(P,"textureXhrSettings");L&&A.setBaseURL(L),w&&A.setPath(w),B&&A.setPrefix(B);for(var Y=0;Y<E.length;Y++){var U=E[Y].image,W="CMA"+this.multiKeyIndex+"_"+U,O=new g(A,W,U,N);if(this.addToMultiFile(O),A.addFile(O),E[Y].normalMap){var V=new g(A,W,E[Y].normalMap,N);V.type="normalMap",O.setLink(V),this.addToMultiFile(V),A.addFile(V)}}A.setBaseURL(R),A.setPath(G),A.setPrefix(b)}}},addToCache:function(){function S(L){console.warn('Compressed Texture Invalid: "'+R.key+'". '+L)}if(this.isReadyToProcess()){var C=this.config;if(C.multiAtlasURL)this.addMultiToCache();else{var E=this.loader.systems.renderer,P=this.loader.textureManager,A,R=this.files[0],G=this.files[1];if(C.type==="PVR"?A=f(R.data):C.type==="KTX"&&(A=s(R.data),A||S("KTX file contains unsupported format.")),A&&!m(A)&&(S("Texture dimensions failed verification. Check the texture format specifications for "+C.format+" 0x"+A.internalFormat.toString(16)+"."),A=null),A&&!E.supportsCompressedTexture(C.format,A.internalFormat)&&(S("Texture format "+C.format+" with internal format "+A.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),A=null),A){A.format=E.getCompressedTextureName(C.format,A.internalFormat);var b=G&&G.data?G.data:null;P.addCompressedTexture(R.key,A,b)}}this.complete=!0}},addMultiToCache:function(){for(var S=this.config,C=this.files[0],E=[],P=[],A=[],R=this.loader.systems.renderer,G=this.loader.textureManager,b,L=1;L<this.files.length;L++){var w=this.files[L];if(w.type!=="normalMap")for(var B=w.key.indexOf("_"),N=w.key.substr(B+1),Y=w.data,U=0;U<C.data.textures.length;U++){var W=C.data.textures[U];if(W.image===N){S.type==="PVR"?b=f(Y):S.type==="KTX"&&(b=s(Y)),b&&R.supportsCompressedTexture(S.format,b.internalFormat)&&(b.format=R.getCompressedTextureName(S.format,b.internalFormat),P.push(b),E.push(W),w.linkFile&&A.push(w.linkFile.data));break}}}A.length===0&&(A=void 0),G.addAtlasJSONArray(this.key,P,E,A),this.complete=!0}});a.register("texture",function(S,C,E){var P=this.systems.renderer,A=function(G,b,L,w){var B={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(n(b)){var N=b;b=r(N,"key"),L=r(N,"url"),w=r(N,"xhrSettings")}var Y=!1;for(var U in L)if(P.supportsCompressedTexture(U)){var W=L[U];typeof W=="string"?B.textureURL=W:B=l(W,B),B.format=U.toUpperCase(),Y=!0;break}if(!Y)console.warn("No supported compressed texture format or IMG fallback",b);else if(B.format==="IMG"){var O,V;B.multiAtlasURL?(V=new c(G,b,B.multiAtlasURL,B.multiPath,B.multiBaseURL,w),O=V.files):B.atlasURL?(V=new h(G,b,B.textureURL,B.atlasURL,w),O=V.files):O=new e(G,b,B.textureURL,w),G.addFile(O)}else{var X=new y(G,b,B,w);G.addFile(X.files)}};if(Array.isArray(S))for(var R=0;R<S.length;R++)A(this,S[R]);else A(this,S,C,E);return this}),p.exports=y}),87674:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(98356),n=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f,m,y){var S="ttf";if(n(c)){var C=c;c=r(C,"key"),d=r(C,"url"),f=r(C,"format","truetype"),m=r(C,"descriptors",null),y=r(C,"xhrSettings"),S=r(C,"extension",S)}else f===void 0&&(f="truetype");var E={type:"font",cache:!1,extension:S,responseType:"text",key:c,url:d,xhrSettings:y};o.call(this,l,E),this.data={format:f,descriptors:m},this.state=g.FILE_POPULATED},onProcess:function(){this.state=g.FILE_PROCESSING,this.src=e(this,this.loader.baseURL);var s,l=this.key,c="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?s=new FontFace(l,c,this.data.descriptors):s=new FontFace(l,c);var d=this;s.load().then(function(){document.fonts.add(s),document.body.classList.add("fonts-loaded"),d.onProcessComplete()}).catch(function(){console.warn("Font failed to load",c),d.onProcessComplete()})}});a.register("font",function(s,l,c,d,f){if(Array.isArray(s))for(var m=0;m<s.length;m++)this.addFile(new u(this,s[m]));else this.addFile(new u(this,s,l,c,d,f));return this}),p.exports=u}),47931:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=t(73894),u=new h({Extends:o,initialize:function(l,c,d,f,m){var y="glsl";if(e(c)){var S=c;c=r(S,"key"),d=r(S,"url"),f=r(S,"shaderType","fragment"),m=r(S,"xhrSettings"),y=r(S,"extension",y)}else f===void 0&&(f="fragment");var C={type:"glsl",cache:l.cacheManager.shader,extension:y,responseType:"text",key:c,url:d,config:{shaderType:f},xhrSettings:m};o.call(this,l,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s=this.data.split(`
`),l=this.extractBlock(s,0);if(l)for(;l;){var c=this.getShaderName(l.header),d=this.getShaderType(l.header),f=this.getShaderUniforms(l.header),m=l.shader;if(this.cache.has(c)){var y=this.cache.get(c);d==="fragment"?y.fragmentSrc=m:y.vertexSrc=m,y.uniforms||(y.uniforms=f)}else d==="fragment"?this.cache.add(c,new n(c,m,"",f)):this.cache.add(c,new n(c,"",m,f));l=this.extractBlock(s,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data))},getShaderName:function(s){for(var l=0;l<s.length;l++){var c=s[l].trim();if(c.substring(0,5)==="name:")return c.substring(5).trim()}return this.key},getShaderType:function(s){for(var l=0;l<s.length;l++){var c=s[l].trim();if(c.substring(0,5)==="type:")return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(s){for(var l={},c=0;c<s.length;c++){var d=s[c].trim();if(d.substring(0,8)==="uniform."){var f=d.indexOf(":");if(f){var m=d.substring(8,f);try{l[m]=JSON.parse(d.substring(f+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return l},extractBlock:function(s,l){for(var c=-1,d=-1,f=-1,m=!1,y=!1,S=[],C=[],E=l;E<s.length;E++){var P=s[E].trim();if(P==="---")if(c===-1)c=E,m=!0;else if(m)d=E,m=!1,y=!0;else{y=!1;break}else m?S.push(P):y&&(C.push(P),f=E)}return!m&&d!==-1?{header:S,shader:C.join(`
`),offset:f}:null}});a.register("glsl",function(s,l,c,d){if(Array.isArray(s))for(var f=0;f<s.length;f++)this.addFile(new u(this,s[f]));else this.addFile(new u(this,s,l,c,d));return this}),p.exports=u}),89749:((p,M,t)=>{var h=t(83419),g=t(54899),o=t(41299),a=t(95540),r=t(98356),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d){if(e(l)){var f=l;l=a(f,"key"),d=a(f,"config",d)}var m={type:"audio",cache:s.cacheManager.audio,extension:c.type,key:l,url:c.url,config:d};o.call(this,s,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var s=this.data[u];s.oncanplaythrough=null,s.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var s=u.target;s.oncanplaythrough=null,s.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var s=0;s<u;s++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+s).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(s=0;s<this.data.length;s++)l=this.data[s],l.src=r(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});p.exports=n}),88470:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d){var f="html";if(e(l)){var m=l;l=r(m,"key"),c=r(m,"url"),d=r(m,"xhrSettings"),f=r(m,"extension",f)}var y={type:"text",cache:s.cacheManager.html,extension:f,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,s,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(u,s,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,l));return this}),p.exports=n}),14643:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d,f,m){d===void 0&&(d=512),f===void 0&&(f=512);var y="html";if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),m=r(S,"xhrSettings"),y=r(S,"extension",y),d=r(S,"width",d),f=r(S,"height",f)}var C={type:"html",cache:s.textureManager,extension:y,responseType:"text",key:l,url:c,xhrSettings:m,config:{width:d,height:f}};o.call(this,s,C)},onProcess:function(){this.state=g.FILE_PROCESSING;var u=this.config.width,s=this.config.height,l=[];l.push('<svg width="'+u+'px" height="'+s+'px" viewBox="0 0 '+u+" "+s+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var c=[l.join(`
`)],d=this;try{var f=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{d.state=g.FILE_ERRORED,d.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){o.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(d.data),d.onProcessError()},o.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("htmlTexture",function(u,s,l,c,d){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new n(this,u[f]));else this.addFile(new n(this,u,s,l,c,d));return this}),p.exports=n}),19550:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=t(98356),u=new h({Extends:o,initialize:function s(l,c,d,f,m){var y="png",S;if(e(c)){var C=c;c=r(C,"key"),d=r(C,"url"),S=r(C,"normalMap"),f=r(C,"xhrSettings"),y=r(C,"extension",y),m=r(C,"frameConfig")}Array.isArray(d)&&(S=d[1],d=d[0]);var E={type:"image",cache:l.textureManager,extension:y,responseType:"blob",key:c,url:d,xhrSettings:f,config:m};if(o.call(this,l,E),S){var P=new s(l,this.key,S,f,m);P.type="normalMap",this.setLink(P),l.addFile(P)}this.useImageElementLoad=l.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var s=this;this.data.onload=function(){o.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(s.data),s.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var s=this.state;this.state=g.FILE_PROCESSING,s===g.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=g.FILE_LOADING,this.src=n(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var s=this;this.data.onload=function(){s.state=g.FILE_LOADED,s.loader.nextFile(s,!0)},this.data.onerror=function(){s.loader.nextFile(s,!1)},this.data.src=this.src},addToCache:function(){var s=this.linkFile;s?s.state>=g.FILE_COMPLETE&&(s.type==="spritesheet"?s.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,s.data,this.data):this.cache.addImage(this.key,this.data,s.data)):this.cache.addImage(this.key,this.data)}});a.register("image",function(s,l,c){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new u(this,s[d]));else this.addFile(new u(this,s,l,c));return this}),p.exports=u}),518:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(35154),n=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f,m){var y="json";if(n(c)){var S=c;c=r(S,"key"),d=r(S,"url"),f=r(S,"xhrSettings"),y=r(S,"extension",y),m=r(S,"dataKey",m)}var C={type:"json",cache:l.cacheManager.json,extension:y,responseType:"text",key:c,url:d,xhrSettings:f,config:m};o.call(this,l,C),n(d)&&(m?this.data=e(d,m):this.data=d,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var s=JSON.parse(this.xhrLoader.responseText)}catch(c){throw this.onProcessError(),c}var l=this.config;typeof l=="string"?this.data=e(s,l,s):this.data=s}this.onProcessComplete()}});a.register("json",function(s,l,c,d){if(Array.isArray(s))for(var f=0;f<s.length;f++)this.addFile(new u(this,s[f]));else this.addFile(new u(this,s,l,d,c));return this}),p.exports=u}),59327:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(518),n=t(26430),u=new h({Extends:n,initialize:function(l,c,d,f,m,y,S){if(r(c)){var C=c;c=o(C,"key"),o(C,"url",!1)?d=o(C,"url"):d=o(C,"atlasURL"),y=o(C,"xhrSettings"),f=o(C,"path"),m=o(C,"baseURL"),S=o(C,"textureXhrSettings")}var E=new e(l,c,d,y);n.call(this,l,"multiatlas",c,[E]),this.config.path=f,this.config.baseURL=m,this.config.textureXhrSettings=S},onFileComplete:function(s){var l=this.files.indexOf(s);if(l!==-1&&(this.pending--,s.type==="json"&&s.data.hasOwnProperty("textures"))){var c=s.data.textures,d=this.config,f=this.loader,m=f.baseURL,y=f.path,S=f.prefix,C=o(d,"baseURL",this.baseURL),E=o(d,"path",this.path),P=o(d,"prefix",this.prefix),A=o(d,"textureXhrSettings");f.setBaseURL(C),f.setPath(E),f.setPrefix(P);for(var R=0;R<c.length;R++){var G=c[R].image,b="MA"+this.multiKeyIndex+"_"+G,L=new a(f,b,G,A);if(this.addToMultiFile(L),f.addFile(L),c[R].normalMap){var w=new a(f,b,c[R].normalMap,A);w.type="normalMap",L.setLink(w),this.addToMultiFile(w),f.addFile(w)}}f.setBaseURL(m),f.setPath(y),f.setPrefix(S)}},addToCache:function(){if(this.isReadyToProcess()){for(var s=this.files[0],l=[],c=[],d=[],f=1;f<this.files.length;f++){var m=this.files[f];if(m.type!=="normalMap")for(var y=m.key.indexOf("_"),S=m.key.substr(y+1),C=m.data,E=0;E<s.data.textures.length;E++){var P=s.data.textures[E];if(P.image===S){c.push(C),l.push(P),m.linkFile&&d.push(m.linkFile.data);break}}}d.length===0&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,l,d),this.complete=!0}}});g.register("multiatlas",function(s,l,c,d,f){var m;if(Array.isArray(s))for(var y=0;y<s.length;y++)m=new u(this,s[y]),this.addFile(m.files);else m=new u(this,s,l,c,d,f),this.addFile(m.files);return this}),p.exports=u}),99297:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(41212),r=t(26430),e=t(34328),n=new h({Extends:r,initialize:function(s,l,c,d){var f="js",m=[];if(a(l)){var y=l;l=o(y,"key"),c=o(y,"url"),d=o(y,"xhrSettings"),f=o(y,"extension",f)}Array.isArray(c)||(c=[c]);for(var S=0;S<c.length;S++){var C=new e(s,{key:l+"_"+S.toString(),url:c[S],extension:f,xhrSettings:d});C.onProcess=function(){this.onProcessComplete()},m.push(C)}r.call(this,s,"scripts",l,m)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var s=this.files[u];s.data=document.createElement("script"),s.data.language="javascript",s.data.type="text/javascript",s.data.defer=!1,s.data.text=s.xhrLoader.responseText,document.head.appendChild(s.data)}this.complete=!0}}});g.register("scripts",function(u,s,l){var c;if(Array.isArray(u))for(var d=0;d<u.length;d++)c=new n(this,u[d]),this.addFile(c.files);else c=new n(this,u,s,l),this.addFile(c.files);return this}),p.exports=n}),41846:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(41212),r=t(26430),e=t(85048),n=t(61485),u=t(78776),s=new h({Extends:r,initialize:function(c,d,f,m,y,S){var C,E,P=c.cacheManager.obj;if(a(d)){var A=d;d=o(A,"key"),C=new u(c,{key:d,type:"obj",cache:P,url:o(A,"url"),extension:o(A,"extension","obj"),xhrSettings:o(A,"xhrSettings"),config:{flipUV:o(A,"flipUV",y)}}),m=o(A,"matURL"),m&&(E=new u(c,{key:d,type:"mat",cache:P,url:m,extension:o(A,"matExtension","mat"),xhrSettings:o(A,"xhrSettings")}))}else C=new u(c,{key:d,url:f,type:"obj",cache:P,extension:"obj",xhrSettings:S,config:{flipUV:y}}),m&&(E=new u(c,{key:d,url:m,type:"mat",cache:P,extension:"mat",xhrSettings:S}));r.call(this,c,"obj",d,[C,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],c=this.files[1],d=e(l.data,l.config.flipUV);c&&(d.materials=n(c.data)),l.cache.add(l.key,d),this.complete=!0}}});g.register("obj",function(l,c,d,f,m){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new s(this,l[S]),this.addFile(y.files);else y=new s(this,l,c,d,f,m),this.addFile(y.files);return this}),p.exports=s}),58610:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(74099),a=t(518),r=new h({Extends:a,initialize:function(n,u,s,l,c){a.call(this,n,u,s,l,c),this.type="packfile"},onProcess:function(){if(this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var e={};e[this.config]=this.data,this.data=e}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});o.register("pack",function(e,n,u,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,n,s,u));return this}),p.exports=r}),48988:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d,f,m){var y="js";if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),m=r(S,"xhrSettings"),y=r(S,"extension",y),d=r(S,"start"),f=r(S,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:l,url:c,xhrSettings:m,config:{start:d,mapping:f}};o.call(this,s,C),typeof c=="function"&&(this.data=c,this.state=g.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,s=this.config,l=r(s,"start",!1),c=r(s,"mapping",null);if(this.state===g.FILE_POPULATED)u.install(this.key,this.data,l,c);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=u.install(this.key,window[this.key],l,c);(l||c)&&(this.loader.systems[c]=d,this.loader.scene[c]=d)}this.onProcessComplete()}});a.register("plugin",function(u,s,l,c,d){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new n(this,u[f]));else this.addFile(new n(this,u,s,l,c,d));return this}),p.exports=n}),67397:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d,f){var m="svg";if(e(l)){var y=l;l=r(y,"key"),c=r(y,"url"),d=r(y,"svgConfig",{}),f=r(y,"xhrSettings"),m=r(y,"extension",m)}var S={type:"svg",cache:s.textureManager,extension:m,responseType:"text",key:l,url:c,xhrSettings:f,config:{width:r(d,"width"),height:r(d,"height"),scale:r(d,"scale")}};o.call(this,s,S)},onProcess:function(){this.state=g.FILE_PROCESSING;var u=this.xhrLoader.responseText,s=[u],l=this.config.width,c=this.config.height,d=this.config.scale;t:if(l&&c||d){var f=null,m=new DOMParser;f=m.parseFromString(u,"text/xml");var y=f.getElementsByTagName("svg")[0],S=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),E=parseFloat(y.getAttribute("height"));if(!S&&C&&E)y.setAttribute("viewBox","0  0 "+C+" "+E);else if(S&&!C&&!E){var P=y.getAttribute("viewBox").split(/\s+|,/);C=P[2],E=P[3]}if(d)if(C&&E)l=C*d,c=E*d;else break t;y.setAttribute("width",l.toString()+"px"),y.setAttribute("height",c.toString()+"px"),s=[new XMLSerializer().serializeToString(y)]}try{var A=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var R=this,G=!1;this.data.onload=function(){G||o.revokeObjectURL(R.data),R.onProcessComplete()},this.data.onerror=function(){G?R.onProcessError():(G=!0,o.revokeObjectURL(R.data),R.data.src="data:image/svg+xml,"+encodeURIComponent(s.join("")))},o.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("svg",function(u,s,l,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new n(this,u[d]));else this.addFile(new n(this,u,s,l,c));return this}),p.exports=n}),88423:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d){var f="js";if(e(l)){var m=l;l=r(m,"key"),c=r(m,"url"),d=r(m,"xhrSettings"),f=r(m,"extension",f)}var y={type:"text",extension:f,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,s,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),s=eval;this.loader.sceneManager.add(this.key,s(u)),this.complete=!0}});a.register("sceneFile",function(u,s,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,l));return this}),p.exports=n}),56812:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d,f,m){var y="js";if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),m=r(S,"xhrSettings"),y=r(S,"extension",y),d=r(S,"systemKey"),f=r(S,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:l,url:c,xhrSettings:m,config:{systemKey:d,sceneKey:f}};o.call(this,s,C),typeof c=="function"&&(this.data=c,this.state=g.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,s=this.config,l=this.key,c=r(s,"systemKey",l),d=r(s,"sceneKey",l);this.state===g.FILE_POPULATED?u.installScenePlugin(c,this.data,d,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(c,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(u,s,l,c,d){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new n(this,u[f]));else this.addFile(new n(this,u,s,l,c,d));return this}),p.exports=n}),34328:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d,f){var m="js";if(e(l)){var y=l;l=r(y,"key"),c=r(y,"url"),d=r(y,"type","script"),f=r(y,"xhrSettings"),m=r(y,"extension",m)}else d===void 0&&(d="script");var S={type:d,cache:!1,extension:m,responseType:"text",key:l,url:c,xhrSettings:f};o.call(this,s,S)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(u,s,l,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new n(this,u[d]));else this.addFile(new n(this,u,s,l,c));return this}),p.exports=n}),85035:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(74099),a=t(19550),r=new h({Extends:a,initialize:function(n,u,s,l,c){a.call(this,n,u,s,c,l),this.type="spritesheet"},addToCache:function(){var e=this.linkFile;e?e.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,e.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,e.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});o.register("spritesheet",function(e,n,u,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,n,u,s));return this}),p.exports=r}),78776:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=new h({Extends:o,initialize:function(s,l,c,d){var f="text",m="txt",y=s.cacheManager.text;if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),d=r(S,"xhrSettings"),m=r(S,"extension",m),f=r(S,"type",f),y=r(S,"cache",y)}var C={type:f,cache:y,extension:m,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,s,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(u,s,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,l));return this}),p.exports=n}),49477:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=t(80341),u=new h({Extends:o,initialize:function(l,c,d,f){var m="csv";if(e(c)){var y=c;c=r(y,"key"),d=r(y,"url"),f=r(y,"xhrSettings"),m=r(y,"extension",m)}var S={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:m,responseType:"text",key:c,url:d,xhrSettings:f};o.call(this,l,S),this.tilemapFormat=n.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,s)}});a.register("tilemapCSV",function(s,l,c){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new u(this,s[d]));else this.addFile(new u(this,s,l,c));return this}),p.exports=u}),40807:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(518),a=t(80341),r=new h({Extends:o,initialize:function(n,u,s,l){o.call(this,n,u,s,l),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var e={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapImpact",function(e,n,u){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new r(this,e[s]));else this.addFile(new r(this,e,n,u));return this}),p.exports=r}),56775:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(518),a=t(80341),r=new h({Extends:o,initialize:function(n,u,s,l){o.call(this,n,u,s,l),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var e={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapTiledJSON",function(e,n,u){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new r(this,e[s]));else this.addFile(new r(this,e,n,u));return this}),p.exports=r}),25771:((p,M,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(26430),n=t(78776),u=new h({Extends:e,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new n(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","txt"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new n(l,c,f,y);S.linkFile?e.call(this,l,"unityatlas",c,[S,C,S.linkFile]):e.call(this,l,"unityatlas",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(s.key,s.data,l.data,c),this.complete=!0}}});g.register("unityAtlas",function(s,l,c,d,f){var m;if(Array.isArray(s))for(var y=0;y<s.length;y++)m=new u(this,s[y]),this.addFile(m.files);else m=new u(this,s,l,c,d,f),this.addFile(m.files);return this}),p.exports=u}),33720:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(98356),e=t(95540),n=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f){if(f===void 0&&(f=!1),n(c)){var m=c;c=e(m,"key"),d=e(m,"url",[]),f=e(m,"noAudio",!1)}var y=l.systems.game.device.video.getVideoURL(d);y||console.warn("VideoFile: No supported format for "+c);var S={type:"video",cache:l.cacheManager.video,extension:y.type,key:c,url:y.url,config:{noAudio:f}};o.call(this,l,S)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=r(this,this.loader.baseURL),this.state=g.FILE_LOADED,this.loader.nextFile(this,!0)}});a.register("video",function(s,l,c){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new u(this,s[d]));else this.addFile(new u(this,s,l,c));return this}),p.exports=u}),57318:((p,M,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),n=t(56836),u=new h({Extends:o,initialize:function(l,c,d,f){var m="xml";if(e(c)){var y=c;c=r(y,"key"),d=r(y,"url"),f=r(y,"xhrSettings"),m=r(y,"extension",m)}var S={type:"xml",cache:l.cacheManager.xml,extension:m,responseType:"text",key:c,url:d,xhrSettings:f};o.call(this,l,S)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});a.register("xml",function(s,l,c){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new u(this,s[d]));else this.addFile(new u(this,s,l,c));return this}),p.exports=u}),64589:((p,M,t)=>{p.exports={AnimationJSONFile:t(14135),AsepriteFile:t(76272),AtlasJSONFile:t(38734),AtlasXMLFile:t(74599),AudioFile:t(21097),AudioSpriteFile:t(89524),BinaryFile:t(85722),BitmapFontFile:t(97025),CompressedTextureFile:t(69559),CSSFile:t(16024),FontFile:t(87674),GLSLFile:t(47931),HTML5AudioFile:t(89749),HTMLFile:t(88470),HTMLTextureFile:t(14643),ImageFile:t(19550),JSONFile:t(518),MultiAtlasFile:t(59327),MultiScriptFile:t(99297),OBJFile:t(41846),PackFile:t(58610),PluginFile:t(48988),SceneFile:t(88423),ScenePluginFile:t(56812),ScriptFile:t(34328),SpriteSheetFile:t(85035),SVGFile:t(67397),TextFile:t(78776),TilemapCSVFile:t(49477),TilemapImpactFile:t(40807),TilemapJSONFile:t(56775),UnityAtlasFile:t(25771),VideoFile:t(33720),XMLFile:t(57318)}}),57777:((p,M,t)=>{var h=t(23906),g=t(79291),o={Events:t(54899),FileTypes:t(64589),File:t(41299),FileTypesManager:t(74099),GetURL:t(98356),LoaderPlugin:t(74261),MergeXHRSettings:t(3374),MultiFile:t(26430),XHRLoader:t(84376),XHRSettings:t(92638)};o=g(!1,o,h),p.exports=o}),53307:(p=>{var M=function(t){for(var h=0,g=0;g<t.length;g++)h+=+t[g];return h/t.length};p.exports=M}),85710:((p,M,t)=>{var h=t(6411),g=function(o,a){return h(o)/h(a)/h(o-a)};p.exports=g}),30976:(p=>{var M=function(t,h){return Math.floor(Math.random()*(h-t+1)+t)};p.exports=M}),87842:(p=>{var M=function(t,h,g,o,a){var r=(o-h)*.5,e=(a-g)*.5,n=t*t,u=t*n;return(2*g-2*o+r+e)*u+(-3*g+3*o-2*r-e)*n+r*t+g};p.exports=M}),26302:(p=>{var M=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=10);var o=Math.pow(g,-h);return Math.ceil(t*o)/o};p.exports=M}),45319:(p=>{var M=function(t,h,g){return Math.max(h,Math.min(g,t))};p.exports=M}),39506:((p,M,t)=>{var h=t(36383),g=function(o){return o*h.DEG_TO_RAD};p.exports=g}),61241:(p=>{var M=function(t,h){return Math.abs(t-h)};p.exports=M}),38857:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(37867),a=t(29747),r=new o,e=new g({initialize:function n(u,s,l,c){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=n.DefaultOrder),this._x=u,this._y=s,this._z=l,this._order=c,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,u,s,l){return l===void 0&&(l=this._order),this._x=n,this._y=u,this._z=s,this._order=l,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,u,s){return u===void 0&&(u=this._order),s===void 0&&(s=!1),r.fromQuat(n),this.setFromRotationMatrix(r,u,s)},setFromRotationMatrix:function(n,u,s){u===void 0&&(u=this._order),s===void 0&&(s=!1);var l=n.val,c=l[0],d=l[4],f=l[8],m=l[1],y=l[5],S=l[9],C=l[2],E=l[6],P=l[10],A=0,R=0,G=0,b=.99999;switch(u){case"XYZ":{R=Math.asin(h(f,-1,1)),Math.abs(f)<b?(A=Math.atan2(-S,P),G=Math.atan2(-d,c)):A=Math.atan2(E,y);break}case"YXZ":{A=Math.asin(-h(S,-1,1)),Math.abs(S)<b?(R=Math.atan2(f,P),G=Math.atan2(m,y)):R=Math.atan2(-C,c);break}case"ZXY":{A=Math.asin(h(E,-1,1)),Math.abs(E)<b?(R=Math.atan2(-C,P),G=Math.atan2(-d,y)):G=Math.atan2(m,c);break}case"ZYX":{R=Math.asin(-h(C,-1,1)),Math.abs(C)<b?(A=Math.atan2(E,P),G=Math.atan2(m,c)):G=Math.atan2(-d,y);break}case"YZX":{G=Math.asin(h(m,-1,1)),Math.abs(m)<b?(A=Math.atan2(-S,y),R=Math.atan2(-C,c)):R=Math.atan2(f,P);break}case"XZY":{G=Math.asin(-h(d,-1,1)),Math.abs(d)<b?(A=Math.atan2(E,y),R=Math.atan2(f,c)):A=Math.atan2(-S,P);break}}return this._x=A,this._y=R,this._z=G,this._order=u,s&&this.onChangeCallback(this),this}});e.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],e.DefaultOrder="XYZ",p.exports=e}),6411:(p=>{var M=function(t){if(t===0)return 1;for(var h=t;--t;)h*=t;return h};p.exports=M}),99472:(p=>{var M=function(t,h){return Math.random()*(h-t)+t};p.exports=M}),77623:(p=>{var M=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=10);var o=Math.pow(g,-h);return Math.floor(t*o)/o};p.exports=M}),62945:((p,M,t)=>{var h=t(45319),g=function(o,a,r){return o=h(o,0,1),(r-a)*o+a};p.exports=g}),38265:(p=>{var M=function(t,h){return t/h/1e3};p.exports=M}),78702:(p=>{var M=function(t){return t==parseFloat(t)?!(t%2):void 0};p.exports=M}),94883:(p=>{var M=function(t){return t===parseFloat(t)?!(t%2):void 0};p.exports=M}),28915:(p=>{var M=function(t,h,g){return(h-t)*g+t};p.exports=M}),94908:(p=>{var M=function(t,h,g){return g===void 0&&(g=0),t.clone().lerp(h,g)};p.exports=M}),94434:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new g(this)},set:function(o){return this.copy(o)},copy:function(o){var a=this.val,r=o.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],this},fromMat4:function(o){var a=o.val,r=this.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[4],r[4]=a[5],r[5]=a[6],r[6]=a[8],r[7]=a[9],r[8]=a[10],this},fromArray:function(o){var a=this.val;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],this},identity:function(){var o=this.val;return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=1,o[5]=0,o[6]=0,o[7]=0,o[8]=1,this},transpose:function(){var o=this.val,a=o[1],r=o[2],e=o[5];return o[1]=o[3],o[2]=o[6],o[3]=a,o[5]=o[7],o[6]=r,o[7]=e,this},invert:function(){var o=this.val,a=o[0],r=o[1],e=o[2],n=o[3],u=o[4],s=o[5],l=o[6],c=o[7],d=o[8],f=d*u-s*c,m=-d*n+s*l,y=c*n-u*l,S=a*f+r*m+e*y;return S?(S=1/S,o[0]=f*S,o[1]=(-d*r+e*c)*S,o[2]=(s*r-e*u)*S,o[3]=m*S,o[4]=(d*a-e*l)*S,o[5]=(-s*a+e*n)*S,o[6]=y*S,o[7]=(-c*a+r*l)*S,o[8]=(u*a-r*n)*S,this):null},adjoint:function(){var o=this.val,a=o[0],r=o[1],e=o[2],n=o[3],u=o[4],s=o[5],l=o[6],c=o[7],d=o[8];return o[0]=u*d-s*c,o[1]=e*c-r*d,o[2]=r*s-e*u,o[3]=s*l-n*d,o[4]=a*d-e*l,o[5]=e*n-a*s,o[6]=n*c-u*l,o[7]=r*l-a*c,o[8]=a*u-r*n,this},determinant:function(){var o=this.val,a=o[0],r=o[1],e=o[2],n=o[3],u=o[4],s=o[5],l=o[6],c=o[7],d=o[8];return a*(d*u-s*c)+r*(-d*n+s*l)+e*(c*n-u*l)},multiply:function(o){var a=this.val,r=a[0],e=a[1],n=a[2],u=a[3],s=a[4],l=a[5],c=a[6],d=a[7],f=a[8],m=o.val,y=m[0],S=m[1],C=m[2],E=m[3],P=m[4],A=m[5],R=m[6],G=m[7],b=m[8];return a[0]=y*r+S*u+C*c,a[1]=y*e+S*s+C*d,a[2]=y*n+S*l+C*f,a[3]=E*r+P*u+A*c,a[4]=E*e+P*s+A*d,a[5]=E*n+P*l+A*f,a[6]=R*r+G*u+b*c,a[7]=R*e+G*s+b*d,a[8]=R*n+G*l+b*f,this},translate:function(o){var a=this.val,r=o.x,e=o.y;return a[6]=r*a[0]+e*a[3]+a[6],a[7]=r*a[1]+e*a[4]+a[7],a[8]=r*a[2]+e*a[5]+a[8],this},rotate:function(o){var a=this.val,r=a[0],e=a[1],n=a[2],u=a[3],s=a[4],l=a[5],c=Math.sin(o),d=Math.cos(o);return a[0]=d*r+c*u,a[1]=d*e+c*s,a[2]=d*n+c*l,a[3]=d*u-c*r,a[4]=d*s-c*e,a[5]=d*l-c*n,this},scale:function(o){var a=this.val,r=o.x,e=o.y;return a[0]=r*a[0],a[1]=r*a[1],a[2]=r*a[2],a[3]=e*a[3],a[4]=e*a[4],a[5]=e*a[5],this},fromQuat:function(o){var a=o.x,r=o.y,e=o.z,n=o.w,u=a+a,s=r+r,l=e+e,c=a*u,d=a*s,f=a*l,m=r*s,y=r*l,S=e*l,C=n*u,E=n*s,P=n*l,A=this.val;return A[0]=1-(m+S),A[3]=d+P,A[6]=f-E,A[1]=d-P,A[4]=1-(c+S),A[7]=y+C,A[2]=f+E,A[5]=y-C,A[8]=1-(c+m),this},normalFromMat4:function(o){var a=o.val,r=this.val,e=a[0],n=a[1],u=a[2],s=a[3],l=a[4],c=a[5],d=a[6],f=a[7],m=a[8],y=a[9],S=a[10],C=a[11],E=a[12],P=a[13],A=a[14],R=a[15],G=e*c-n*l,b=e*d-u*l,L=e*f-s*l,w=n*d-u*c,B=n*f-s*c,N=u*f-s*d,Y=m*P-y*E,U=m*A-S*E,W=m*R-C*E,O=y*A-S*P,V=y*R-C*P,X=S*R-C*A,z=G*X-b*V+L*O+w*W-B*U+N*Y;return z?(z=1/z,r[0]=(c*X-d*V+f*O)*z,r[1]=(d*W-l*X-f*U)*z,r[2]=(l*V-c*W+f*Y)*z,r[3]=(u*V-n*X-s*O)*z,r[4]=(e*X-u*W+s*U)*z,r[5]=(n*W-e*V-s*Y)*z,r[6]=(P*N-A*B+R*w)*z,r[7]=(A*L-E*N-R*b)*z,r[8]=(E*B-P*L+R*G)*z,this):null}});p.exports=g}),37867:((p,M,t)=>{var h=t(83419),g=t(25836),o=1e-6,a=new h({initialize:function(c){this.val=new Float32Array(16),c?this.copy(c):this.identity()},clone:function(){return new a(this)},set:function(l){return this.copy(l)},setValues:function(l,c,d,f,m,y,S,C,E,P,A,R,G,b,L,w){var B=this.val;return B[0]=l,B[1]=c,B[2]=d,B[3]=f,B[4]=m,B[5]=y,B[6]=S,B[7]=C,B[8]=E,B[9]=P,B[10]=A,B[11]=R,B[12]=G,B[13]=b,B[14]=L,B[15]=w,this},copy:function(l){var c=l.val;return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,c,d){var f=r.fromQuat(d),m=f.val,y=c.x,S=c.y,C=c.z;return this.setValues(m[0]*y,m[1]*y,m[2]*y,0,m[4]*S,m[5]*S,m[6]*S,0,m[8]*C,m[9]*C,m[10]*C,0,l.x,l.y,l.z,1)},xyz:function(l,c,d){this.identity();var f=this.val;return f[12]=l,f[13]=c,f[14]=d,this},scaling:function(l,c,d){this.zero();var f=this.val;return f[0]=l,f[5]=c,f[10]=d,f[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,c=l[1],d=l[2],f=l[3],m=l[6],y=l[7],S=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=c,l[6]=l[9],l[7]=l[13],l[8]=d,l[9]=m,l[11]=l[14],l[12]=f,l[13]=y,l[14]=S,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,c=l[0],d=l[1],f=l[2],m=l[3],y=l[4],S=l[5],C=l[6],E=l[7],P=l[8],A=l[9],R=l[10],G=l[11],b=l[12],L=l[13],w=l[14],B=l[15],N=c*S-d*y,Y=c*C-f*y,U=c*E-m*y,W=d*C-f*S,O=d*E-m*S,V=f*E-m*C,X=P*L-A*b,z=P*w-R*b,I=P*B-G*b,Z=A*w-R*L,J=A*B-G*L,k=R*B-G*w,j=N*k-Y*J+U*Z+W*I-O*z+V*X;return j?(j=1/j,this.setValues((S*k-C*J+E*Z)*j,(f*J-d*k-m*Z)*j,(L*V-w*O+B*W)*j,(R*O-A*V-G*W)*j,(C*I-y*k-E*z)*j,(c*k-f*I+m*z)*j,(w*U-b*V-B*Y)*j,(P*V-R*U+G*Y)*j,(y*J-S*I+E*X)*j,(d*I-c*J-m*X)*j,(b*O-L*U+B*N)*j,(A*U-P*O-G*N)*j,(S*z-y*Z-C*X)*j,(c*Z-d*z+f*X)*j,(L*Y-b*W-w*N)*j,(P*W-A*Y+R*N)*j)):this},adjoint:function(){var l=this.val,c=l[0],d=l[1],f=l[2],m=l[3],y=l[4],S=l[5],C=l[6],E=l[7],P=l[8],A=l[9],R=l[10],G=l[11],b=l[12],L=l[13],w=l[14],B=l[15];return this.setValues(S*(R*B-G*w)-A*(C*B-E*w)+L*(C*G-E*R),-(d*(R*B-G*w)-A*(f*B-m*w)+L*(f*G-m*R)),d*(C*B-E*w)-S*(f*B-m*w)+L*(f*E-m*C),-(d*(C*G-E*R)-S*(f*G-m*R)+A*(f*E-m*C)),-(y*(R*B-G*w)-P*(C*B-E*w)+b*(C*G-E*R)),c*(R*B-G*w)-P*(f*B-m*w)+b*(f*G-m*R),-(c*(C*B-E*w)-y*(f*B-m*w)+b*(f*E-m*C)),c*(C*G-E*R)-y*(f*G-m*R)+P*(f*E-m*C),y*(A*B-G*L)-P*(S*B-E*L)+b*(S*G-E*A),-(c*(A*B-G*L)-P*(d*B-m*L)+b*(d*G-m*A)),c*(S*B-E*L)-y*(d*B-m*L)+b*(d*E-m*S),-(c*(S*G-E*A)-y*(d*G-m*A)+P*(d*E-m*S)),-(y*(A*w-R*L)-P*(S*w-C*L)+b*(S*R-C*A)),c*(A*w-R*L)-P*(d*w-f*L)+b*(d*R-f*A),-(c*(S*w-C*L)-y*(d*w-f*L)+b*(d*C-f*S)),c*(S*R-C*A)-y*(d*R-f*A)+P*(d*C-f*S))},determinant:function(){var l=this.val,c=l[0],d=l[1],f=l[2],m=l[3],y=l[4],S=l[5],C=l[6],E=l[7],P=l[8],A=l[9],R=l[10],G=l[11],b=l[12],L=l[13],w=l[14],B=l[15],N=c*S-d*y,Y=c*C-f*y,U=c*E-m*y,W=d*C-f*S,O=d*E-m*S,V=f*E-m*C,X=P*L-A*b,z=P*w-R*b,I=P*B-G*b,Z=A*w-R*L,J=A*B-G*L,k=R*B-G*w;return N*k-Y*J+U*Z+W*I-O*z+V*X},multiply:function(l){var c=this.val,d=c[0],f=c[1],m=c[2],y=c[3],S=c[4],C=c[5],E=c[6],P=c[7],A=c[8],R=c[9],G=c[10],b=c[11],L=c[12],w=c[13],B=c[14],N=c[15],Y=l.val,U=Y[0],W=Y[1],O=Y[2],V=Y[3];return c[0]=U*d+W*S+O*A+V*L,c[1]=U*f+W*C+O*R+V*w,c[2]=U*m+W*E+O*G+V*B,c[3]=U*y+W*P+O*b+V*N,U=Y[4],W=Y[5],O=Y[6],V=Y[7],c[4]=U*d+W*S+O*A+V*L,c[5]=U*f+W*C+O*R+V*w,c[6]=U*m+W*E+O*G+V*B,c[7]=U*y+W*P+O*b+V*N,U=Y[8],W=Y[9],O=Y[10],V=Y[11],c[8]=U*d+W*S+O*A+V*L,c[9]=U*f+W*C+O*R+V*w,c[10]=U*m+W*E+O*G+V*B,c[11]=U*y+W*P+O*b+V*N,U=Y[12],W=Y[13],O=Y[14],V=Y[15],c[12]=U*d+W*S+O*A+V*L,c[13]=U*f+W*C+O*R+V*w,c[14]=U*m+W*E+O*G+V*B,c[15]=U*y+W*P+O*b+V*N,this},multiplyLocal:function(l){var c=this.val,d=l.val;return this.setValues(c[0]*d[0]+c[1]*d[4]+c[2]*d[8]+c[3]*d[12],c[0]*d[1]+c[1]*d[5]+c[2]*d[9]+c[3]*d[13],c[0]*d[2]+c[1]*d[6]+c[2]*d[10]+c[3]*d[14],c[0]*d[3]+c[1]*d[7]+c[2]*d[11]+c[3]*d[15],c[4]*d[0]+c[5]*d[4]+c[6]*d[8]+c[7]*d[12],c[4]*d[1]+c[5]*d[5]+c[6]*d[9]+c[7]*d[13],c[4]*d[2]+c[5]*d[6]+c[6]*d[10]+c[7]*d[14],c[4]*d[3]+c[5]*d[7]+c[6]*d[11]+c[7]*d[15],c[8]*d[0]+c[9]*d[4]+c[10]*d[8]+c[11]*d[12],c[8]*d[1]+c[9]*d[5]+c[10]*d[9]+c[11]*d[13],c[8]*d[2]+c[9]*d[6]+c[10]*d[10]+c[11]*d[14],c[8]*d[3]+c[9]*d[7]+c[10]*d[11]+c[11]*d[15],c[12]*d[0]+c[13]*d[4]+c[14]*d[8]+c[15]*d[12],c[12]*d[1]+c[13]*d[5]+c[14]*d[9]+c[15]*d[13],c[12]*d[2]+c[13]*d[6]+c[14]*d[10]+c[15]*d[14],c[12]*d[3]+c[13]*d[7]+c[14]*d[11]+c[15]*d[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,c){var d=l.val,f=c.val,m=d[0],y=d[4],S=d[8],C=d[12],E=d[1],P=d[5],A=d[9],R=d[13],G=d[2],b=d[6],L=d[10],w=d[14],B=d[3],N=d[7],Y=d[11],U=d[15],W=f[0],O=f[4],V=f[8],X=f[12],z=f[1],I=f[5],Z=f[9],J=f[13],k=f[2],j=f[6],tt=f[10],ht=f[14],ot=f[3],st=f[7],ft=f[11],ut=f[15];return this.setValues(m*W+y*z+S*k+C*ot,E*W+P*z+A*k+R*ot,G*W+b*z+L*k+w*ot,B*W+N*z+Y*k+U*ot,m*O+y*I+S*j+C*st,E*O+P*I+A*j+R*st,G*O+b*I+L*j+w*st,B*O+N*I+Y*j+U*st,m*V+y*Z+S*tt+C*ft,E*V+P*Z+A*tt+R*ft,G*V+b*Z+L*tt+w*ft,B*V+N*Z+Y*tt+U*ft,m*X+y*J+S*ht+C*ut,E*X+P*J+A*ht+R*ut,G*X+b*J+L*ht+w*ut,B*X+N*J+Y*ht+U*ut)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,c,d){var f=this.val;return f[12]=f[0]*l+f[4]*c+f[8]*d+f[12],f[13]=f[1]*l+f[5]*c+f[9]*d+f[13],f[14]=f[2]*l+f[6]*c+f[10]*d+f[14],f[15]=f[3]*l+f[7]*c+f[11]*d+f[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,c,d){var f=this.val;return f[0]=f[0]*l,f[1]=f[1]*l,f[2]=f[2]*l,f[3]=f[3]*l,f[4]=f[4]*c,f[5]=f[5]*c,f[6]=f[6]*c,f[7]=f[7]*c,f[8]=f[8]*d,f[9]=f[9]*d,f[10]=f[10]*d,f[11]=f[11]*d,this},makeRotationAxis:function(l,c){var d=Math.cos(c),f=Math.sin(c),m=1-d,y=l.x,S=l.y,C=l.z,E=m*y,P=m*S;return this.setValues(E*y+d,E*S-f*C,E*C+f*S,0,E*S+f*C,P*S+d,P*C-f*y,0,E*C-f*S,P*C+f*y,m*C*C+d,0,0,0,0,1)},rotate:function(l,c){var d=this.val,f=c.x,m=c.y,y=c.z,S=Math.sqrt(f*f+m*m+y*y);if(Math.abs(S)<o)return this;S=1/S,f*=S,m*=S,y*=S;var C=Math.sin(l),E=Math.cos(l),P=1-E,A=d[0],R=d[1],G=d[2],b=d[3],L=d[4],w=d[5],B=d[6],N=d[7],Y=d[8],U=d[9],W=d[10],O=d[11],V=d[12],X=d[13],z=d[14],I=d[15],Z=f*f*P+E,J=m*f*P+y*C,k=y*f*P-m*C,j=f*m*P-y*C,tt=m*m*P+E,ht=y*m*P+f*C,ot=f*y*P+m*C,st=m*y*P-f*C,ft=y*y*P+E;return this.setValues(A*Z+L*J+Y*k,R*Z+w*J+U*k,G*Z+B*J+W*k,b*Z+N*J+O*k,A*j+L*tt+Y*ht,R*j+w*tt+U*ht,G*j+B*tt+W*ht,b*j+N*tt+O*ht,A*ot+L*st+Y*ft,R*ot+w*st+U*ft,G*ot+B*st+W*ft,b*ot+N*st+O*ft,V,X,z,I)},rotateX:function(l){var c=this.val,d=Math.sin(l),f=Math.cos(l),m=c[4],y=c[5],S=c[6],C=c[7],E=c[8],P=c[9],A=c[10],R=c[11];return c[4]=m*f+E*d,c[5]=y*f+P*d,c[6]=S*f+A*d,c[7]=C*f+R*d,c[8]=E*f-m*d,c[9]=P*f-y*d,c[10]=A*f-S*d,c[11]=R*f-C*d,this},rotateY:function(l){var c=this.val,d=Math.sin(l),f=Math.cos(l),m=c[0],y=c[1],S=c[2],C=c[3],E=c[8],P=c[9],A=c[10],R=c[11];return c[0]=m*f-E*d,c[1]=y*f-P*d,c[2]=S*f-A*d,c[3]=C*f-R*d,c[8]=m*d+E*f,c[9]=y*d+P*f,c[10]=S*d+A*f,c[11]=C*d+R*f,this},rotateZ:function(l){var c=this.val,d=Math.sin(l),f=Math.cos(l),m=c[0],y=c[1],S=c[2],C=c[3],E=c[4],P=c[5],A=c[6],R=c[7];return c[0]=m*f+E*d,c[1]=y*f+P*d,c[2]=S*f+A*d,c[3]=C*f+R*d,c[4]=E*f-m*d,c[5]=P*f-y*d,c[6]=A*f-S*d,c[7]=R*f-C*d,this},fromRotationTranslation:function(l,c){var d=l.x,f=l.y,m=l.z,y=l.w,S=d+d,C=f+f,E=m+m,P=d*S,A=d*C,R=d*E,G=f*C,b=f*E,L=m*E,w=y*S,B=y*C,N=y*E;return this.setValues(1-(G+L),A+N,R-B,0,A-N,1-(P+L),b+w,0,R+B,b-w,1-(P+G),0,c.x,c.y,c.z,1)},fromQuat:function(l){var c=l.x,d=l.y,f=l.z,m=l.w,y=c+c,S=d+d,C=f+f,E=c*y,P=c*S,A=c*C,R=d*S,G=d*C,b=f*C,L=m*y,w=m*S,B=m*C;return this.setValues(1-(R+b),P+B,A-w,0,P-B,1-(E+b),G+L,0,A+w,G-L,1-(E+R),0,0,0,0,1)},frustum:function(l,c,d,f,m,y){var S=1/(c-l),C=1/(f-d),E=1/(m-y);return this.setValues(m*2*S,0,0,0,0,m*2*C,0,0,(c+l)*S,(f+d)*C,(y+m)*E,-1,0,0,y*m*2*E,0)},perspective:function(l,c,d,f){var m=1/Math.tan(l/2),y=1/(d-f);return this.setValues(m/c,0,0,0,0,m,0,0,0,0,(f+d)*y,-1,0,0,2*f*d*y,0)},perspectiveLH:function(l,c,d,f){return this.setValues(2*d/l,0,0,0,0,2*d/c,0,0,0,0,-f/(d-f),1,0,0,d*f/(d-f),0)},ortho:function(l,c,d,f,m,y){var S=l-c,C=d-f,E=m-y;return S=S===0?S:1/S,C=C===0?C:1/C,E=E===0?E:1/E,this.setValues(-2*S,0,0,0,0,-2*C,0,0,0,0,2*E,0,(l+c)*S,(f+d)*C,(y+m)*E,1)},lookAtRH:function(l,c,d){var f=this.val;return s.subVectors(l,c),s.lengthSq()===0&&(s.z=1),s.normalize(),n.crossVectors(d,s),n.lengthSq()===0&&(Math.abs(d.z)===1?s.x+=1e-4:s.z+=1e-4,s.normalize(),n.crossVectors(d,s)),n.normalize(),u.crossVectors(s,n),f[0]=n.x,f[1]=n.y,f[2]=n.z,f[4]=u.x,f[5]=u.y,f[6]=u.z,f[8]=s.x,f[9]=s.y,f[10]=s.z,this},lookAt:function(l,c,d){var f=l.x,m=l.y,y=l.z,S=d.x,C=d.y,E=d.z,P=c.x,A=c.y,R=c.z;if(Math.abs(f-P)<o&&Math.abs(m-A)<o&&Math.abs(y-R)<o)return this.identity();var G=f-P,b=m-A,L=y-R,w=1/Math.sqrt(G*G+b*b+L*L);G*=w,b*=w,L*=w;var B=C*L-E*b,N=E*G-S*L,Y=S*b-C*G;w=Math.sqrt(B*B+N*N+Y*Y),w?(w=1/w,B*=w,N*=w,Y*=w):(B=0,N=0,Y=0);var U=b*Y-L*N,W=L*B-G*Y,O=G*N-b*B;return w=Math.sqrt(U*U+W*W+O*O),w?(w=1/w,U*=w,W*=w,O*=w):(U=0,W=0,O=0),this.setValues(B,U,G,0,N,W,b,0,Y,O,L,0,-(B*f+N*m+Y*y),-(U*f+W*m+O*y),-(G*f+b*m+L*y),1)},yawPitchRoll:function(l,c,d){this.zero(),r.zero(),e.zero();var f=this.val,m=r.val,y=e.val,S=Math.sin(d),C=Math.cos(d);return f[10]=1,f[15]=1,f[0]=C,f[1]=S,f[4]=-S,f[5]=C,S=Math.sin(c),C=Math.cos(c),m[0]=1,m[15]=1,m[5]=C,m[10]=C,m[9]=-S,m[6]=S,S=Math.sin(l),C=Math.cos(l),y[5]=1,y[15]=1,y[0]=C,y[2]=-S,y[8]=S,y[10]=C,this.multiplyLocal(r),this.multiplyLocal(e),this},setWorldMatrix:function(l,c,d,f,m){return this.yawPitchRoll(l.y,l.x,l.z),r.scaling(d.x,d.y,d.z),e.xyz(c.x,c.y,c.z),this.multiplyLocal(r),this.multiplyLocal(e),f&&this.multiplyLocal(f),m&&this.multiplyLocal(m),this},multiplyToMat4:function(l,c){var d=this.val,f=l.val,m=d[0],y=d[1],S=d[2],C=d[3],E=d[4],P=d[5],A=d[6],R=d[7],G=d[8],b=d[9],L=d[10],w=d[11],B=d[12],N=d[13],Y=d[14],U=d[15],W=f[0],O=f[1],V=f[2],X=f[3],z=f[4],I=f[5],Z=f[6],J=f[7],k=f[8],j=f[9],tt=f[10],ht=f[11],ot=f[12],st=f[13],ft=f[14],ut=f[15];return c.setValues(W*m+O*E+V*G+X*B,O*y+O*P+V*b+X*N,V*S+O*A+V*L+X*Y,X*C+O*R+V*w+X*U,z*m+I*E+Z*G+J*B,z*y+I*P+Z*b+J*N,z*S+I*A+Z*L+J*Y,z*C+I*R+Z*w+J*U,k*m+j*E+tt*G+ht*B,k*y+j*P+tt*b+ht*N,k*S+j*A+tt*L+ht*Y,k*C+j*R+tt*w+ht*U,ot*m+st*E+ft*G+ut*B,ot*y+st*P+ft*b+ut*N,ot*S+st*A+ft*L+ut*Y,ot*C+st*R+ft*w+ut*U)},fromRotationXYTranslation:function(l,c,d){var f=c.x,m=c.y,y=c.z,S=Math.sin(l.x),C=Math.cos(l.x),E=Math.sin(l.y),P=Math.cos(l.y),A=f,R=m,G=y,b=-S,L=0-b*E,w=0-C*E,B=b*P,N=C*P;return d||(A=P*f+E*y,R=L*f+C*m+B*y,G=w*f+S*m+N*y),this.setValues(P,L,w,0,0,C,S,0,E,B,N,0,A,R,G,1)},getMaxScaleOnAxis:function(){var l=this.val,c=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],d=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],f=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(c,d,f))}}),r=new a,e=new a,n=new g,u=new g,s=new g;p.exports=a}),86883:(p=>{var M=function(t,h,g){return Math.min(t+h,g)};p.exports=M}),50040:(p=>{var M=function(t){var h=t.length;if(h===0)return 0;t.sort(function(o,a){return o-a});var g=Math.floor(h/2);return h%2===0?(t[g]+t[g-1])/2:t[g]};p.exports=M}),37204:(p=>{var M=function(t,h,g){return Math.max(t-h,g)};p.exports=M}),65201:(p=>{var M=function(t,h,g,o){g===void 0&&(g=h+1);var a=(t-h)/(g-h);return a>1?o!==void 0?(a=(o-t)/(o-g),a<0&&(a=0)):a=1:a<0&&(a=0),a};p.exports=M}),15746:((p,M,t)=>{var h=t(83419),g=t(94434),o=t(29747),a=t(25836),r=1e-6,e=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),u=new a(1,0,0),s=new a(0,1,0),l=new a,c=new g,d=new h({initialize:function(m,y,S,C){this.onChangeCallback=o,this.set(m,y,S,C)},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(f){this._w=f,this.onChangeCallback(this)}},copy:function(f){return this.set(f)},set:function(f,m,y,S,C){return C===void 0&&(C=!0),typeof f=="object"?(this._x=f.x||0,this._y=f.y||0,this._z=f.z||0,this._w=f.w||0):(this._x=f||0,this._y=m||0,this._z=y||0,this._w=S||0),C&&this.onChangeCallback(this),this},add:function(f){return this._x+=f.x,this._y+=f.y,this._z+=f.z,this._w+=f.w,this.onChangeCallback(this),this},subtract:function(f){return this._x-=f.x,this._y-=f.y,this._z-=f.z,this._w-=f.w,this.onChangeCallback(this),this},scale:function(f){return this._x*=f,this._y*=f,this._z*=f,this._w*=f,this.onChangeCallback(this),this},length:function(){var f=this.x,m=this.y,y=this.z,S=this.w;return Math.sqrt(f*f+m*m+y*y+S*S)},lengthSq:function(){var f=this.x,m=this.y,y=this.z,S=this.w;return f*f+m*m+y*y+S*S},normalize:function(){var f=this.x,m=this.y,y=this.z,S=this.w,C=f*f+m*m+y*y+S*S;return C>0&&(C=1/Math.sqrt(C),this._x=f*C,this._y=m*C,this._z=y*C,this._w=S*C),this.onChangeCallback(this),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,m){m===void 0&&(m=0);var y=this.x,S=this.y,C=this.z,E=this.w;return this.set(y+m*(f.x-y),S+m*(f.y-S),C+m*(f.z-C),E+m*(f.w-E))},rotationTo:function(f,m){var y=f.x*m.x+f.y*m.y+f.z*m.z;return y<-.999999?(l.copy(u).cross(f).length()<r&&l.copy(s).cross(f),l.normalize(),this.setAxisAngle(l,Math.PI)):y>.999999?this.set(0,0,0,1):(l.copy(f).cross(m),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+y,this.normalize())},setAxes:function(f,m,y){var S=c.val;return S[0]=m.x,S[3]=m.y,S[6]=m.z,S[1]=y.x,S[4]=y.y,S[7]=y.z,S[2]=-f.x,S[5]=-f.y,S[8]=-f.z,this.fromMat3(c).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(f,m){m=m*.5;var y=Math.sin(m);return this.set(y*f.x,y*f.y,y*f.z,Math.cos(m))},multiply:function(f){var m=this.x,y=this.y,S=this.z,C=this.w,E=f.x,P=f.y,A=f.z,R=f.w;return this.set(m*R+C*E+y*A-S*P,y*R+C*P+S*E-m*A,S*R+C*A+m*P-y*E,C*R-m*E-y*P-S*A)},slerp:function(f,m){var y=this.x,S=this.y,C=this.z,E=this.w,P=f.x,A=f.y,R=f.z,G=f.w,b=y*P+S*A+C*R+E*G;b<0&&(b=-b,P=-P,A=-A,R=-R,G=-G);var L=1-m,w=m;if(1-b>r){var B=Math.acos(b),N=Math.sin(B);L=Math.sin((1-m)*B)/N,w=Math.sin(m*B)/N}return this.set(L*y+w*P,L*S+w*A,L*C+w*R,L*E+w*G)},invert:function(){var f=this.x,m=this.y,y=this.z,S=this.w,C=f*f+m*m+y*y+S*S,E=C?1/C:0;return this.set(-f*E,-m*E,-y*E,S*E)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(f){f*=.5;var m=this.x,y=this.y,S=this.z,C=this.w,E=Math.sin(f),P=Math.cos(f);return this.set(m*P+C*E,y*P+S*E,S*P-y*E,C*P-m*E)},rotateY:function(f){f*=.5;var m=this.x,y=this.y,S=this.z,C=this.w,E=Math.sin(f),P=Math.cos(f);return this.set(m*P-S*E,y*P+C*E,S*P+m*E,C*P-y*E)},rotateZ:function(f){f*=.5;var m=this.x,y=this.y,S=this.z,C=this.w,E=Math.sin(f),P=Math.cos(f);return this.set(m*P+y*E,y*P-m*E,S*P+C*E,C*P-S*E)},calculateW:function(){var f=this.x,m=this.y,y=this.z;return this.w=-Math.sqrt(1-f*f-m*m-y*y),this},setFromEuler:function(f,m){var y=f.x/2,S=f.y/2,C=f.z/2,E=Math.cos(y),P=Math.cos(S),A=Math.cos(C),R=Math.sin(y),G=Math.sin(S),b=Math.sin(C);switch(f.order){case"XYZ":{this.set(R*P*A+E*G*b,E*G*A-R*P*b,E*P*b+R*G*A,E*P*A-R*G*b,m);break}case"YXZ":{this.set(R*P*A+E*G*b,E*G*A-R*P*b,E*P*b-R*G*A,E*P*A+R*G*b,m);break}case"ZXY":{this.set(R*P*A-E*G*b,E*G*A+R*P*b,E*P*b+R*G*A,E*P*A-R*G*b,m);break}case"ZYX":{this.set(R*P*A-E*G*b,E*G*A+R*P*b,E*P*b-R*G*A,E*P*A+R*G*b,m);break}case"YZX":{this.set(R*P*A+E*G*b,E*G*A+R*P*b,E*P*b-R*G*A,E*P*A-R*G*b,m);break}case"XZY":{this.set(R*P*A-E*G*b,E*G*A-R*P*b,E*P*b+R*G*A,E*P*A+R*G*b,m);break}}return this},setFromRotationMatrix:function(f){var m=f.val,y=m[0],S=m[4],C=m[8],E=m[1],P=m[5],A=m[9],R=m[2],G=m[6],b=m[10],L=y+P+b,w;return L>0?(w=.5/Math.sqrt(L+1),this.set((G-A)*w,(C-R)*w,(E-S)*w,.25/w)):y>P&&y>b?(w=2*Math.sqrt(1+y-P-b),this.set(.25*w,(S+E)/w,(C+R)/w,(G-A)/w)):P>b?(w=2*Math.sqrt(1+P-y-b),this.set((S+E)/w,.25*w,(A+G)/w,(C-R)/w)):(w=2*Math.sqrt(1+b-y-P),this.set((C+R)/w,(A+G)/w,.25*w,(E-S)/w)),this},fromMat3:function(f){var m=f.val,y=m[0]+m[4]+m[8],S;if(y>0)S=Math.sqrt(y+1),this.w=.5*S,S=.5/S,this._x=(m[7]-m[5])*S,this._y=(m[2]-m[6])*S,this._z=(m[3]-m[1])*S;else{var C=0;m[4]>m[0]&&(C=1),m[8]>m[C*3+C]&&(C=2);var E=e[C],P=e[E];S=Math.sqrt(m[C*3+C]-m[E*3+E]-m[P*3+P]+1),n[C]=.5*S,S=.5/S,n[E]=(m[E*3+C]+m[C*3+E])*S,n[P]=(m[P*3+C]+m[C*3+P])*S,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(m[P*3+E]-m[E*3+P])*S}return this.onChangeCallback(this),this}});p.exports=d}),43396:((p,M,t)=>{var h=t(36383),g=function(o){return o*h.RAD_TO_DEG};p.exports=g}),74362:(p=>{var M=function(t,h){h===void 0&&(h=1);var g=Math.random()*2*Math.PI;return t.x=Math.cos(g)*h,t.y=Math.sin(g)*h,t};p.exports=M}),60706:(p=>{var M=function(t,h){h===void 0&&(h=1);var g=Math.random()*2*Math.PI,o=Math.random()*2-1,a=Math.sqrt(1-o*o)*h;return t.x=Math.cos(g)*a,t.y=Math.sin(g)*a,t.z=o*h,t};p.exports=M}),67421:(p=>{var M=function(t,h){return h===void 0&&(h=1),t.x=(Math.random()*2-1)*h,t.y=(Math.random()*2-1)*h,t.z=(Math.random()*2-1)*h,t.w=(Math.random()*2-1)*h,t};p.exports=M}),36305:(p=>{var M=function(t,h){var g=t.x,o=t.y;return t.x=g*Math.cos(h)-o*Math.sin(h),t.y=g*Math.sin(h)+o*Math.cos(h),t};p.exports=M}),11520:(p=>{var M=function(t,h,g,o){var a=Math.cos(o),r=Math.sin(o),e=t.x-h,n=t.y-g;return t.x=e*a-n*r+h,t.y=e*r+n*a+g,t};p.exports=M}),1163:(p=>{var M=function(t,h,g,o,a){var r=o+Math.atan2(t.y-g,t.x-h);return t.x=h+a*Math.cos(r),t.y=g+a*Math.sin(r),t};p.exports=M}),70336:(p=>{var M=function(t,h,g,o,a){return t.x=h+a*Math.cos(o),t.y=g+a*Math.sin(o),t};p.exports=M}),72678:((p,M,t)=>{var h=t(25836),g=t(37867),o=t(15746),a=new g,r=new o,e=new h,n=function(u,s,l){return r.setAxisAngle(s,l),a.fromRotationTranslation(r,e.set(0,0,0)),u.transformMat4(a)};p.exports=n}),2284:(p=>{var M=function(t){return t>0?Math.ceil(t):Math.floor(t)};p.exports=M}),41013:(p=>{var M=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=10);var o=Math.pow(g,-h);return Math.round(t*o)/o};p.exports=M}),16922:(p=>{var M=function(t,h,g,o){h===void 0&&(h=1),g===void 0&&(g=1),o===void 0&&(o=1),o*=Math.PI/t;for(var a=[],r=[],e=0;e<t;e++)g-=h*o,h+=g*o,a[e]=g,r[e]=h;return{sin:r,cos:a,length:t}};p.exports=M}),7602:(p=>{var M=function(t,h,g){return t<=h?0:t>=g?1:(t=(t-h)/(g-h),t*t*(3-2*t))};p.exports=M}),54261:(p=>{var M=function(t,h,g){return t=Math.max(0,Math.min(1,(t-h)/(g-h))),t*t*t*(t*(t*6-15)+10)};p.exports=M}),44408:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e){e===void 0&&(e=new h);var n=0,u=0,s=a*r;return o>0&&o<=s&&(o>a-1?(u=Math.floor(o/a),n=o-u*a):n=o),e.set(n,u)};p.exports=g}),85955:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n,u,s,l){l===void 0&&(l=new h);var c=Math.sin(n),d=Math.cos(n),f=d*u,m=c*u,y=-c*s,S=d*s,C=1/(f*S+y*-m);return l.x=S*C*o+-y*C*a+(e*y-r*S)*C,l.y=f*C*a+-m*C*o+(-e*f+r*m)*C,l};p.exports=g}),26099:((p,M,t)=>{var h=t(83419),g=t(43855),o=new h({initialize:function(r,e){this.x=0,this.y=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0):(e===void 0&&(e=r),this.x=r||0,this.y=e||0)},clone:function(){return new o(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,r){return r===void 0&&(r=a),this.x=a,this.y=r,this},setTo:function(a,r){return this.set(a,r)},setToPolar:function(a,r){return r==null&&(r=1),this.x=Math.cos(a)*r,this.y=Math.sin(a)*r,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,r){return g(this.x,a.x,r)&&g(this.y,a.y,r)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var r=a.x-this.x,e=a.y-this.y;return Math.sqrt(r*r+e*e)},distanceSq:function(a){var r=a.x-this.x,e=a.y-this.y;return r*r+e*e},length:function(){var a=this.x,r=this.y;return Math.sqrt(a*a+r*r)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,r=this.y;return a*a+r*r},normalize:function(){var a=this.x,r=this.y,e=a*a+r*r;return e>0&&(e=1/Math.sqrt(e),this.x=a*e,this.y=r*e),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,r){r===void 0&&(r=0);var e=this.x,n=this.y;return this.x=e+r*(a.x-e),this.y=n+r*(a.y-n),this},transformMat3:function(a){var r=this.x,e=this.y,n=a.val;return this.x=n[0]*r+n[3]*e+n[6],this.y=n[1]*r+n[4]*e+n[7],this},transformMat4:function(a){var r=this.x,e=this.y,n=a.val;return this.x=n[0]*r+n[4]*e+n[12],this.y=n[1]*r+n[5]*e+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var r=this.length();return r&&r>a&&this.scale(a/r),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var r=Math.cos(a),e=Math.sin(a);return this.set(r*this.x-e*this.y,e*this.x+r*this.y)},project:function(a){var r=this.dot(a)/a.dot(a);return this.copy(a).scale(r)}});o.ZERO=new o,o.RIGHT=new o(1,0),o.LEFT=new o(-1,0),o.UP=new o(0,-1),o.DOWN=new o(0,1),o.ONE=new o(1,1),p.exports=o}),25836:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=r||0,this.z=e||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this},max:function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this.z=o.z+a.z,this},subVectors:function(o,a){return this.x=o.x-a.x,this.y=o.y-a.y,this.z=o.z-a.z,this},crossVectors:function(o,a){var r=o.x,e=o.y,n=o.z,u=a.x,s=a.y,l=a.z;return this.x=e*l-n*s,this.y=n*u-r*l,this.z=r*s-e*u,this},equals:function(o){return this.x===o.x&&this.y===o.y&&this.z===o.z},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z||0,this},set:function(o,a,r){return typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=a||0,this.z=r||0),this},setFromMatrixPosition:function(o){return this.fromArray(o.val,12)},setFromMatrixColumn:function(o,a){return this.fromArray(o.val,a*4)},fromArray:function(o,a){return a===void 0&&(a=0),this.x=o[a],this.y=o[a+1],this.z=o[a+2],this},add:function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z||0,this},addScalar:function(o){return this.x+=o,this.y+=o,this.z+=o,this},addScale:function(o,a){return this.x+=o.x*a,this.y+=o.y*a,this.z+=o.z*a||0,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z||0,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z||1,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o,this.z*=o):(this.x=0,this.y=0,this.z=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0;return Math.sqrt(a*a+r*r+e*e)},distanceSq:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0;return a*a+r*r+e*e},length:function(){var o=this.x,a=this.y,r=this.z;return Math.sqrt(o*o+a*a+r*r)},lengthSq:function(){var o=this.x,a=this.y,r=this.z;return o*o+a*a+r*r},normalize:function(){var o=this.x,a=this.y,r=this.z,e=o*o+a*a+r*r;return e>0&&(e=1/Math.sqrt(e),this.x=o*e,this.y=a*e,this.z=r*e),this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z},cross:function(o){var a=this.x,r=this.y,e=this.z,n=o.x,u=o.y,s=o.z;return this.x=r*s-e*u,this.y=e*n-a*s,this.z=a*u-r*n,this},lerp:function(o,a){a===void 0&&(a=0);var r=this.x,e=this.y,n=this.z;return this.x=r+a*(o.x-r),this.y=e+a*(o.y-e),this.z=n+a*(o.z-n),this},applyMatrix3:function(o){var a=this.x,r=this.y,e=this.z,n=o.val;return this.x=n[0]*a+n[3]*r+n[6]*e,this.y=n[1]*a+n[4]*r+n[7]*e,this.z=n[2]*a+n[5]*r+n[8]*e,this},applyMatrix4:function(o){var a=this.x,r=this.y,e=this.z,n=o.val,u=1/(n[3]*a+n[7]*r+n[11]*e+n[15]);return this.x=(n[0]*a+n[4]*r+n[8]*e+n[12])*u,this.y=(n[1]*a+n[5]*r+n[9]*e+n[13])*u,this.z=(n[2]*a+n[6]*r+n[10]*e+n[14])*u,this},transformMat3:function(o){var a=this.x,r=this.y,e=this.z,n=o.val;return this.x=a*n[0]+r*n[3]+e*n[6],this.y=a*n[1]+r*n[4]+e*n[7],this.z=a*n[2]+r*n[5]+e*n[8],this},transformMat4:function(o){var a=this.x,r=this.y,e=this.z,n=o.val;return this.x=n[0]*a+n[4]*r+n[8]*e+n[12],this.y=n[1]*a+n[5]*r+n[9]*e+n[13],this.z=n[2]*a+n[6]*r+n[10]*e+n[14],this},transformCoordinates:function(o){var a=this.x,r=this.y,e=this.z,n=o.val,u=a*n[0]+r*n[4]+e*n[8]+n[12],s=a*n[1]+r*n[5]+e*n[9]+n[13],l=a*n[2]+r*n[6]+e*n[10]+n[14],c=a*n[3]+r*n[7]+e*n[11]+n[15];return this.x=u/c,this.y=s/c,this.z=l/c,this},transformQuat:function(o){var a=this.x,r=this.y,e=this.z,n=o.x,u=o.y,s=o.z,l=o.w,c=l*a+u*e-s*r,d=l*r+s*a-n*e,f=l*e+n*r-u*a,m=-n*a-u*r-s*e;return this.x=c*l+m*-n+d*-s-f*-u,this.y=d*l+m*-u+f*-n-c*-s,this.z=f*l+m*-s+c*-u-d*-n,this},project:function(o){var a=this.x,r=this.y,e=this.z,n=o.val,u=n[0],s=n[1],l=n[2],c=n[3],d=n[4],f=n[5],m=n[6],y=n[7],S=n[8],C=n[9],E=n[10],P=n[11],A=n[12],R=n[13],G=n[14],b=n[15],L=1/(a*c+r*y+e*P+b);return this.x=(a*u+r*d+e*S+A)*L,this.y=(a*s+r*f+e*C+R)*L,this.z=(a*l+r*m+e*E+G)*L,this},projectViewMatrix:function(o,a){return this.applyMatrix4(o).applyMatrix4(a)},unprojectViewMatrix:function(o,a){return this.applyMatrix4(o).applyMatrix4(a)},unproject:function(o,a){var r=o.x,e=o.y,n=o.z,u=o.w,s=this.x-r,l=u-this.y-1-e,c=this.z;return this.x=2*s/n-1,this.y=2*l/u-1,this.z=2*c-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),p.exports=g}),61369:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=r||0,this.z=e||0,this.w=n||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z||0,this.w=o.w||0,this},equals:function(o){return this.x===o.x&&this.y===o.y&&this.z===o.z&&this.w===o.w},set:function(o,a,r,e){return typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=a||0,this.z=r||0,this.w=e||0),this},add:function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z||0,this.w+=o.w||0,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z||0,this.w-=o.w||0,this},scale:function(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this},length:function(){var o=this.x,a=this.y,r=this.z,e=this.w;return Math.sqrt(o*o+a*a+r*r+e*e)},lengthSq:function(){var o=this.x,a=this.y,r=this.z,e=this.w;return o*o+a*a+r*r+e*e},normalize:function(){var o=this.x,a=this.y,r=this.z,e=this.w,n=o*o+a*a+r*r+e*e;return n>0&&(n=1/Math.sqrt(n),this.x=o*n,this.y=a*n,this.z=r*n,this.w=e*n),this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w},lerp:function(o,a){a===void 0&&(a=0);var r=this.x,e=this.y,n=this.z,u=this.w;return this.x=r+a*(o.x-r),this.y=e+a*(o.y-e),this.z=n+a*(o.z-n),this.w=u+a*(o.w-u),this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z||1,this.w*=o.w||1,this},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z||1,this.w/=o.w||1,this},distance:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0,n=o.w-this.w||0;return Math.sqrt(a*a+r*r+e*e+n*n)},distanceSq:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0,n=o.w-this.w||0;return a*a+r*r+e*e+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(o){var a=this.x,r=this.y,e=this.z,n=this.w,u=o.val;return this.x=u[0]*a+u[4]*r+u[8]*e+u[12]*n,this.y=u[1]*a+u[5]*r+u[9]*e+u[13]*n,this.z=u[2]*a+u[6]*r+u[10]*e+u[14]*n,this.w=u[3]*a+u[7]*r+u[11]*e+u[15]*n,this},transformQuat:function(o){var a=this.x,r=this.y,e=this.z,n=o.x,u=o.y,s=o.z,l=o.w,c=l*a+u*e-s*r,d=l*r+s*a-n*e,f=l*e+n*r-u*a,m=-n*a-u*r-s*e;return this.x=c*l+m*-n+d*-s-f*-u,this.y=d*l+m*-u+f*-n-c*-s,this.z=f*l+m*-s+c*-u-d*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,p.exports=g}),60417:(p=>{var M=function(t,h,g){return Math.abs(t-h)<=g};p.exports=M}),15994:(p=>{var M=function(t,h,g){var o=g-h;return h+((t-h)%o+o)%o};p.exports=M}),31040:(p=>{var M=function(t,h,g,o){return Math.atan2(o-h,g-t)};p.exports=M}),55495:(p=>{var M=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)};p.exports=M}),128:(p=>{var M=function(t,h){return Math.atan2(h.x-t.x,h.y-t.y)};p.exports=M}),41273:(p=>{var M=function(t,h,g,o){return Math.atan2(g-t,o-h)};p.exports=M}),1432:((p,M,t)=>{var h=t(36383),g=function(o){return o>Math.PI&&(o-=h.PI2),Math.abs(((o+h.TAU)%h.PI2-h.PI2)%h.PI2)};p.exports=g}),49127:((p,M,t)=>{var h=t(12407),g=function(o,a){return h(a-o)};p.exports=g}),52285:((p,M,t)=>{var h=t(12407),g=2*Math.PI,o=function(a,r){var e=h(r-a);return e>0&&(e-=g),e};p.exports=o}),67317:((p,M,t)=>{var h=t(86554),g=function(o,a){return h(a-o)};p.exports=g}),12407:(p=>{var M=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};p.exports=M}),53993:((p,M,t)=>{var h=t(99472),g=function(){return h(-Math.PI,Math.PI)};p.exports=g}),86564:((p,M,t)=>{var h=t(99472),g=function(){return h(-180,180)};p.exports=g}),90154:((p,M,t)=>{var h=t(12407),g=function(o){return h(o+Math.PI)};p.exports=g}),48736:((p,M,t)=>{var h=t(36383),g=function(o,a,r){return r===void 0&&(r=.05),o===a||(Math.abs(a-o)<=r||Math.abs(a-o)>=h.PI2-r?o=a:(Math.abs(a-o)>Math.PI&&(a<o?a+=h.PI2:a-=h.PI2),a>o?o+=r:a<o&&(o-=r))),o};p.exports=g}),61430:(p=>{var M=function(t,h){var g=h-t;if(g===0)return 0;var o=Math.floor((g- -180)/360);return g-o*360};p.exports=M}),86554:((p,M,t)=>{var h=t(15994),g=function(o){return h(o,-Math.PI,Math.PI)};p.exports=g}),30954:((p,M,t)=>{var h=t(15994),g=function(o){return h(o,-180,180)};p.exports=g}),25588:((p,M,t)=>{p.exports={Between:t(31040),BetweenPoints:t(55495),BetweenPointsY:t(128),BetweenY:t(41273),CounterClockwise:t(1432),GetClockwiseDistance:t(49127),GetCounterClockwiseDistance:t(52285),GetShortestDistance:t(67317),Normalize:t(12407),Random:t(53993),RandomDegrees:t(86564),Reverse:t(90154),RotateTo:t(48736),ShortestBetween:t(61430),Wrap:t(86554),WrapDegrees:t(30954)}}),36383:(p=>{var M={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};p.exports=M}),20339:(p=>{var M=function(t,h,g,o){var a=t-g,r=h-o;return Math.sqrt(a*a+r*r)};p.exports=M}),52816:(p=>{var M=function(t,h){var g=t.x-h.x,o=t.y-h.y;return Math.sqrt(g*g+o*o)};p.exports=M}),64559:(p=>{var M=function(t,h){var g=t.x-h.x,o=t.y-h.y;return g*g+o*o};p.exports=M}),82340:(p=>{var M=function(t,h,g,o){return Math.max(Math.abs(t-g),Math.abs(h-o))};p.exports=M}),14390:(p=>{var M=function(t,h,g,o,a){return a===void 0&&(a=2),Math.sqrt(Math.pow(g-t,a)+Math.pow(o-h,a))};p.exports=M}),2243:(p=>{var M=function(t,h,g,o){return Math.abs(t-g)+Math.abs(h-o)};p.exports=M}),89774:(p=>{var M=function(t,h,g,o){var a=t-g,r=h-o;return a*a+r*r};p.exports=M}),50994:((p,M,t)=>{p.exports={Between:t(20339),BetweenPoints:t(52816),BetweenPointsSquared:t(64559),Chebyshev:t(82340),Power:t(14390),Snake:t(2243),Squared:t(89774)}}),62640:((p,M,t)=>{var h=t(54178),g=t(41521),o=t(79980),a=t(85433),r=t(99140),e=t(48857),n=t(81596),u=t(59133),s=t(98516),l=t(35248),c=t(82500),d=t(49752);p.exports={Power0:n,Power1:u.Out,Power2:a.Out,Power3:s.Out,Power4:l.Out,Linear:n,Quad:u.Out,Cubic:a.Out,Quart:s.Out,Quint:l.Out,Sine:c.Out,Expo:e.Out,Circ:o.Out,Elastic:r.Out,Back:h.Out,Bounce:g.Out,Stepped:d,"Quad.easeIn":u.In,"Cubic.easeIn":a.In,"Quart.easeIn":s.In,"Quint.easeIn":l.In,"Sine.easeIn":c.In,"Expo.easeIn":e.In,"Circ.easeIn":o.In,"Elastic.easeIn":r.In,"Back.easeIn":h.In,"Bounce.easeIn":g.In,"Quad.easeOut":u.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":s.Out,"Quint.easeOut":l.Out,"Sine.easeOut":c.Out,"Expo.easeOut":e.Out,"Circ.easeOut":o.Out,"Elastic.easeOut":r.Out,"Back.easeOut":h.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":s.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":e.InOut,"Circ.easeInOut":o.InOut,"Elastic.easeInOut":r.InOut,"Back.easeInOut":h.InOut,"Bounce.easeInOut":g.InOut}}),1639:(p=>{var M=function(t,h){return h===void 0&&(h=1.70158),t*t*((h+1)*t-h)};p.exports=M}),50099:(p=>{var M=function(t,h){h===void 0&&(h=1.70158);var g=h*1.525;return(t*=2)<1?.5*(t*t*((g+1)*t-g)):.5*((t-=2)*t*((g+1)*t+g)+2)};p.exports=M}),41286:(p=>{var M=function(t,h){return h===void 0&&(h=1.70158),--t*t*((h+1)*t+h)+1};p.exports=M}),54178:((p,M,t)=>{p.exports={In:t(1639),Out:t(41286),InOut:t(50099)}}),59590:(p=>{var M=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};p.exports=M}),41788:(p=>{var M=function(t){var h=!1;return t<.5?(t=1-t*2,h=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,h?(1-t)*.5:t*.5+.5};p.exports=M}),69905:(p=>{var M=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};p.exports=M}),41521:((p,M,t)=>{p.exports={In:t(59590),Out:t(69905),InOut:t(41788)}}),91861:(p=>{var M=function(t){return 1-Math.sqrt(1-t*t)};p.exports=M}),4177:(p=>{var M=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};p.exports=M}),57512:(p=>{var M=function(t){return Math.sqrt(1- --t*t)};p.exports=M}),79980:((p,M,t)=>{p.exports={In:t(91861),Out:t(57512),InOut:t(4177)}}),51150:(p=>{var M=function(t){return t*t*t};p.exports=M}),82820:(p=>{var M=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};p.exports=M}),35033:(p=>{var M=function(t){return--t*t*t+1};p.exports=M}),85433:((p,M,t)=>{p.exports={In:t(51150),Out:t(35033),InOut:t(82820)}}),69965:(p=>{var M=function(t,h,g){if(h===void 0&&(h=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var o=g/4;return h<1?h=1:o=g*Math.asin(1/h)/(2*Math.PI),-(h*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/g))};p.exports=M}),50665:(p=>{var M=function(t,h,g){if(h===void 0&&(h=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var o=g/4;return h<1?h=1:o=g*Math.asin(1/h)/(2*Math.PI),(t*=2)<1?-.5*(h*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/g)):h*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/g)*.5+1};p.exports=M}),7744:(p=>{var M=function(t,h,g){if(h===void 0&&(h=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var o=g/4;return h<1?h=1:o=g*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/g)+1};p.exports=M}),99140:((p,M,t)=>{p.exports={In:t(69965),Out:t(7744),InOut:t(50665)}}),24590:(p=>{var M=function(t){return Math.pow(2,10*(t-1))-.001};p.exports=M}),87844:(p=>{var M=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};p.exports=M}),89433:(p=>{var M=function(t){return 1-Math.pow(2,-10*t)};p.exports=M}),48857:((p,M,t)=>{p.exports={In:t(24590),Out:t(89433),InOut:t(87844)}}),48820:((p,M,t)=>{p.exports={Back:t(54178),Bounce:t(41521),Circular:t(79980),Cubic:t(85433),Elastic:t(99140),Expo:t(48857),Linear:t(81596),Quadratic:t(59133),Quartic:t(98516),Quintic:t(35248),Sine:t(82500),Stepped:t(49752)}}),7147:(p=>{var M=function(t){return t};p.exports=M}),81596:((p,M,t)=>{p.exports=t(7147)}),34826:(p=>{var M=function(t){return t*t};p.exports=M}),20544:(p=>{var M=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};p.exports=M}),92029:(p=>{var M=function(t){return t*(2-t)};p.exports=M}),59133:((p,M,t)=>{p.exports={In:t(34826),Out:t(92029),InOut:t(20544)}}),64413:(p=>{var M=function(t){return t*t*t*t};p.exports=M}),78137:(p=>{var M=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};p.exports=M}),45840:(p=>{var M=function(t){return 1- --t*t*t*t};p.exports=M}),98516:((p,M,t)=>{p.exports={In:t(64413),Out:t(45840),InOut:t(78137)}}),87745:(p=>{var M=function(t){return t*t*t*t*t};p.exports=M}),16509:(p=>{var M=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};p.exports=M}),17868:(p=>{var M=function(t){return--t*t*t*t*t+1};p.exports=M}),35248:((p,M,t)=>{p.exports={In:t(87745),Out:t(17868),InOut:t(16509)}}),80461:(p=>{var M=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};p.exports=M}),34025:(p=>{var M=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};p.exports=M}),52768:(p=>{var M=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};p.exports=M}),82500:((p,M,t)=>{p.exports={In:t(80461),Out:t(52768),InOut:t(34025)}}),72251:(p=>{var M=function(t,h){return h===void 0&&(h=1),t<=0?0:t>=1?1:((h*t|0)+1)*(1/h)};p.exports=M}),49752:((p,M,t)=>{p.exports=t(72251)}),75698:(p=>{var M=function(t,h){return h===void 0&&(h=1e-4),Math.ceil(t-h)};p.exports=M}),43855:(p=>{var M=function(t,h,g){return g===void 0&&(g=1e-4),Math.abs(t-h)<g};p.exports=M}),25777:(p=>{var M=function(t,h){return h===void 0&&(h=1e-4),Math.floor(t+h)};p.exports=M}),5470:(p=>{var M=function(t,h,g){return g===void 0&&(g=1e-4),t>h-g};p.exports=M}),94977:(p=>{var M=function(t,h,g){return g===void 0&&(g=1e-4),t<h+g};p.exports=M}),48379:((p,M,t)=>{p.exports={Ceil:t(75698),Equal:t(43855),Floor:t(25777),GreaterThan:t(5470),LessThan:t(94977)}}),75508:((p,M,t)=>{var h=t(36383),g=t(79291),o={Angle:t(25588),Distance:t(50994),Easing:t(48820),Fuzzy:t(48379),Interpolation:t(38289),Pow2:t(49001),Snap:t(73697),RandomDataGenerator:t(28453),Average:t(53307),Bernstein:t(85710),Between:t(30976),CatmullRom:t(87842),CeilTo:t(26302),Clamp:t(45319),DegToRad:t(39506),Difference:t(61241),Euler:t(38857),Factorial:t(6411),FloatBetween:t(99472),FloorTo:t(77623),FromPercent:t(62945),GetSpeed:t(38265),IsEven:t(78702),IsEvenStrict:t(94883),Linear:t(28915),LinearXY:t(94908),MaxAdd:t(86883),Median:t(50040),MinSub:t(37204),Percent:t(65201),RadToDeg:t(43396),RandomXY:t(74362),RandomXYZ:t(60706),RandomXYZW:t(67421),Rotate:t(36305),RotateAround:t(11520),RotateAroundDistance:t(1163),RotateTo:t(70336),RoundAwayFromZero:t(2284),RoundTo:t(41013),SinCosTableGenerator:t(16922),SmootherStep:t(54261),SmoothStep:t(7602),ToXY:t(44408),TransformXY:t(85955),Within:t(60417),Wrap:t(15994),Vector2:t(26099),Vector3:t(25836),Vector4:t(61369),Matrix3:t(94434),Matrix4:t(37867),Quaternion:t(15746),RotateVec3:t(72678)};o=g(!1,o,h),p.exports=o}),89318:((p,M,t)=>{var h=t(85710),g=function(o,a){for(var r=0,e=o.length-1,n=0;n<=e;n++)r+=Math.pow(1-a,e-n)*Math.pow(a,n)*o[n]*h(e,n);return r};p.exports=g}),77259:((p,M,t)=>{var h=t(87842),g=function(o,a){var r=o.length-1,e=r*a,n=Math.floor(e);return o[0]===o[r]?(a<0&&(n=Math.floor(e=r*(1+a))),h(e-n,o[(n-1+r)%r],o[n],o[(n+1)%r],o[(n+2)%r])):a<0?o[0]-(h(-e,o[0],o[0],o[1],o[1])-o[0]):a>1?o[r]-(h(e-r,o[r],o[r],o[r-1],o[r-1])-o[r]):h(e-n,o[n?n-1:0],o[n],o[r<n+1?r:n+1],o[r<n+2?r:n+2])};p.exports=g}),36316:(p=>{function M(a,r){var e=1-a;return e*e*e*r}function t(a,r){var e=1-a;return 3*e*e*a*r}function h(a,r){return 3*(1-a)*a*a*r}function g(a,r){return a*a*a*r}var o=function(a,r,e,n,u){return M(a,r)+t(a,e)+h(a,n)+g(a,u)};p.exports=o}),28392:((p,M,t)=>{var h=t(28915),g=function(o,a){var r=o.length-1,e=r*a,n=Math.floor(e);return a<0?h(o[0],o[1],e):a>1?h(o[r],o[r-1],r-e):h(o[n],o[n+1>r?r:n+1],e-n)};p.exports=g}),32112:(p=>{function M(o,a){var r=1-o;return r*r*a}function t(o,a){return 2*(1-o)*o*a}function h(o,a){return o*o*a}var g=function(o,a,r,e){return M(o,a)+t(o,r)+h(o,e)};p.exports=g}),47235:((p,M,t)=>{var h=t(7602),g=function(o,a,r){return a+(r-a)*h(o,0,1)};p.exports=g}),50178:((p,M,t)=>{var h=t(54261),g=function(o,a,r){return a+(r-a)*h(o,0,1)};p.exports=g}),38289:((p,M,t)=>{p.exports={Bezier:t(89318),CatmullRom:t(77259),CubicBezier:t(36316),Linear:t(28392),QuadraticBezier:t(32112),SmoothStep:t(47235),SmootherStep:t(50178)}}),98439:(p=>{var M=function(t){var h=Math.log(t)/.6931471805599453;return 1<<Math.ceil(h)};p.exports=M}),50030:(p=>{var M=function(t,h){return t>0&&(t&t-1)===0&&h>0&&(h&h-1)===0};p.exports=M}),81230:(p=>{var M=function(t){return t>0&&(t&t-1)===0};p.exports=M}),49001:((p,M,t)=>{p.exports={GetNext:t(98439),IsSize:t(50030),IsValue:t(81230)}}),28453:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var o=2091639*this.s0+this.c*23283064365386963e-26;return this.c=o|0,this.s0=this.s1,this.s1=this.s2,this.s2=o-this.c,this.s2},hash:function(o){var a,r=this.n;o=o.toString();for(var e=0;e<o.length;e++)r+=o.charCodeAt(e),a=.02519603282416938*r,r=a>>>0,a-=r,a*=r,r=a>>>0,a-=r,r+=a*4294967296;return this.n=r,(r>>>0)*23283064365386963e-26},init:function(o){typeof o=="string"?this.state(o):this.sow(o)},sow:function(o){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!o)for(var a=0;a<o.length&&o[a]!=null;a++){var r=o[a];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(o,a){return Math.floor(this.realInRange(0,a-o+1)+o)},between:function(o,a){return Math.floor(this.realInRange(0,a-o+1)+o)},realInRange:function(o,a){return this.frac()*(a-o)+o},normal:function(){return 1-2*this.frac()},uuid:function(){var o="",a="";for(a=o="";o++<36;a+=~o%5|o*3&4?(o^15?8^this.frac()*(o^20?16:4):4).toString(16):"-");return a},pick:function(o){return o[this.integerInRange(0,o.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(o){return o[~~(Math.pow(this.frac(),2)*(o.length-.5)+.5)]},timestamp:function(o,a){return this.realInRange(o||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(o){return typeof o=="string"&&o.match(/^!rnd/)&&(o=o.split(","),this.c=parseFloat(o[1]),this.s0=parseFloat(o[2]),this.s1=parseFloat(o[3]),this.s2=parseFloat(o[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(o){for(var a=o.length-1,r=a;r>0;r--){var e=Math.floor(this.frac()*(r+1)),n=o[e];o[e]=o[r],o[r]=n}return o}});p.exports=g}),63448:(p=>{var M=function(t,h,g,o){return g===void 0&&(g=0),h===0?t:(t-=g,t=h*Math.ceil(t/h),o?(g+t)/h:g+t)};p.exports=M}),56583:(p=>{var M=function(t,h,g,o){return g===void 0&&(g=0),h===0?t:(t-=g,t=h*Math.floor(t/h),o?(g+t)/h:g+t)};p.exports=M}),77720:(p=>{var M=function(t,h,g,o){return g===void 0&&(g=0),h===0?t:(t-=g,t=h*Math.round(t/h),o?(g+t)/h:g+t)};p.exports=M}),73697:((p,M,t)=>{p.exports={Ceil:t(63448),Floor:t(56583),To:t(77720)}}),85454:((p,M,t)=>{t(63595);var h=t(8054),g=t(79291),o={Actions:t(61061),Animations:t(60421),BlendModes:t(10312),Cache:t(83388),Cameras:t(26638),Core:t(42857),Class:t(83419),Create:t(15822),Curves:t(25410),Data:t(44965),Display:t(27460),DOM:t(84902),Events:t(93055),FX:t(66064),Game:t(50127),GameObjects:t(77856),Geom:t(55738),Input:t(14350),Loader:t(57777),Math:t(75508),Physics:t(44563),Plugins:t(18922),Renderer:t(36909),Scale:t(93364),ScaleModes:t(29795),Scene:t(97482),Scenes:t(62194),Structs:t(41392),Textures:t(27458),Tilemaps:t(62501),Time:t(90291),Tweens:t(43066),Utils:t(91799)};o.Sound=t(23717),o=g(!1,o,h),p.exports=o,t.g.Phaser=o}),71289:((p,M,t)=>{var h=t(83419),g=t(92209),o=t(88571),a=new h({Extends:o,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,n,u,s,l){o.call(this,e,n,u,s,l),this.body=null}});p.exports=a}),86689:((p,M,t)=>{var h=t(83419),g=t(39506),o=t(20339),a=t(89774),r=t(66022),e=t(95540),n=t(46975),u=t(72441),s=t(47956),l=t(37277),c=t(44594),d=t(26099),f=t(82248),m=new h({initialize:function(S){this.scene=S,this.systems=S.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,S.sys.events.once(c.BOOT,this.boot,this),S.sys.events.on(c.START,this.start,this)},boot:function(){this.world=new f(this.scene,this.config),this.add=new r(this.world),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new f(this.scene,this.config),this.add=new r(this.world));var y=this.systems.events;e(this.config,"customUpdate",!1)||y.on(c.UPDATE,this.world.update,this.world),y.on(c.POST_UPDATE,this.world.postUpdate,this.world),y.once(c.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(c.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(c.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,S=this.systems.settings.physics,C=n(e(S,"arcade",{}),e(y,"arcade",{}));return C},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(y,S,C,E,P){return C===void 0&&(C=null),E===void 0&&(E=null),P===void 0&&(P=C),this.world.collideObjects(y,S,C,E,P,!0)},collide:function(y,S,C,E,P){return C===void 0&&(C=null),E===void 0&&(E=null),P===void 0&&(P=C),this.world.collideObjects(y,S,C,E,P,!1)},collideTiles:function(y,S,C,E,P){return this.world.collideTiles(y,S,C,E,P)},overlapTiles:function(y,S,C,E,P){return this.world.overlapTiles(y,S,C,E,P)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,S,C,E,P,A){E===void 0&&(E=60);var R=Math.atan2(C-y.y,S-y.x);return y.body.acceleration.setToPolar(R,E),P!==void 0&&A!==void 0&&y.body.maxVelocity.set(P,A),R},accelerateToObject:function(y,S,C,E,P){return this.accelerateTo(y,S.x,S.y,C,E,P)},closest:function(y,S){S||(S=this.world.bodies.entries);for(var C=Number.MAX_VALUE,E=null,P=y.x,A=y.y,R=S.length,G=0;G<R;G++){var b=S[G],L=b.body||b;if(!(y===b||y===L||y===L.gameObject||y===L.center)){var w=a(P,A,L.center.x,L.center.y);w<C&&(E=b,C=w)}}return E},furthest:function(y,S){S||(S=this.world.bodies.entries);for(var C=-1,E=null,P=y.x,A=y.y,R=S.length,G=0;G<R;G++){var b=S[G],L=b.body||b;if(!(y===b||y===L||y===L.gameObject||y===L.center)){var w=a(P,A,L.center.x,L.center.y);w>C&&(E=b,C=w)}}return E},moveTo:function(y,S,C,E,P){E===void 0&&(E=60),P===void 0&&(P=0);var A=Math.atan2(C-y.y,S-y.x);return P>0&&(E=o(y.x,y.y,S,C)/(P/1e3)),y.body.velocity.setToPolar(A,E),A},moveToObject:function(y,S,C,E){return this.moveTo(y,S.x,S.y,C,E)},velocityFromAngle:function(y,S,C){return S===void 0&&(S=60),C===void 0&&(C=new d),C.setToPolar(g(y),S)},velocityFromRotation:function(y,S,C){return S===void 0&&(S=60),C===void 0&&(C=new d),C.setToPolar(y,S)},overlapRect:function(y,S,C,E,P,A){return s(this.world,y,S,C,E,P,A)},overlapCirc:function(y,S,C,E,P){return u(this.world,y,S,C,E,P)},shutdown:function(){if(this.world){var y=this.systems.events;y.off(c.UPDATE,this.world.update,this.world),y.off(c.POST_UPDATE,this.world.postUpdate,this.world),y.off(c.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",m,"arcadePhysics"),p.exports=m}),13759:((p,M,t)=>{var h=t(83419),g=t(92209),o=t(68287),a=new h({Extends:o,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,n,u,s,l){o.call(this,e,n,u,s,l),this.body=null}});p.exports=a}),37742:((p,M,t)=>{var h=t(83419),g=t(78389),o=t(37747),a=t(63012),r=t(43396),e=t(87841),n=t(37303),u=t(95829),s=t(26099),l=new h({Mixins:[g],initialize:function(d,f){var m=64,y=64,S={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},C=f!==void 0;C&&f.displayWidth&&(m=f.displayWidth,y=f.displayHeight),C||(f=S),this.world=d,this.gameObject=C?f:void 0,this.isBody=!0,this.transform={x:f.x,y:f.y,rotation:f.angle,scaleX:f.scaleX,scaleY:f.scaleY,displayOriginX:f.displayOriginX,displayOriginY:f.displayOriginY},this.debugShowBody=d.defaults.debugShowBody,this.debugShowVelocity=d.defaults.debugShowVelocity,this.debugBodyColor=d.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(f.x-f.scaleX*f.displayOriginX,f.y-f.scaleY*f.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=f.angle,this.preRotation=f.angle,this.width=m,this.height=y,this.sourceWidth=m,this.sourceHeight=y,f.frame&&(this.sourceWidth=f.frame.realWidth,this.sourceHeight=f.frame.realHeight),this.halfWidth=Math.abs(m/2),this.halfHeight=Math.abs(y/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new s,this.newVelocity=new s,this.deltaMax=new s,this.acceleration=new s,this.allowDrag=!0,this.drag=new s,this.allowGravity=!0,this.gravity=new s,this.bounce=new s,this.worldBounce=null,this.customBoundsRectangle=d.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new s(1e4,1e4),this.maxSpeed=-1,this.friction=new s(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new s(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=u(!1),this.touching=u(!0),this.wasTouching=u(!0),this.blocked=u(!0),this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=f.scaleX,this._sy=f.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new e,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var c=this.gameObject,d=this.transform;if(c.parentContainer){var f=c.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);d.x=f.tx,d.y=f.ty,d.rotation=r(f.rotation),d.scaleX=f.scaleX,d.scaleY=f.scaleY,d.displayOriginX=c.displayOriginX,d.displayOriginY=c.displayOriginY}else d.x=c.x,d.y=c.y,d.rotation=c.angle,d.scaleX=c.scaleX,d.scaleY=c.scaleY,d.displayOriginX=c.displayOriginX,d.displayOriginY=c.displayOriginY;var m=!1;if(this.syncBounds){var y=c.getBounds(this._bounds);this.width=y.width,this.height=y.height,m=!0}else{var S=Math.abs(d.scaleX),C=Math.abs(d.scaleY);(this._sx!==S||this._sy!==C)&&(this.width=this.sourceWidth*S,this.height=this.sourceHeight*C,this._sx=S,this._sy=C,m=!0)}m&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var c=this.transform;this.position.x=c.x+c.scaleX*(this.offset.x-c.displayOriginX),this.position.y=c.y+c.scaleY*(this.offset.y-c.displayOriginY),this.updateCenter()},resetFlags:function(c){c===void 0&&(c=!1);var d=this.wasTouching,f=this.touching,m=this.blocked;c?u(!0,d):(d.none=f.none,d.up=f.up,d.down=f.down,d.left=f.left,d.right=f.right),u(!0,f),u(!0,m),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(c,d){if(c&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var f=this.position;this.prev.x=f.x,this.prev.y=f.y,this.prevFrame.x=f.x,this.prevFrame.y=f.y}c&&this.update(d)},update:function(c){var d=this.prev,f=this.position,m=this.velocity;if(d.set(f.x,f.y),!this.moves){this._dx=f.x-d.x,this._dy=f.y-d.y;return}if(this.directControl){var y=this.autoFrame;m.set((f.x-y.x)/c,(f.y-y.y)/c),this.world.updateMotion(this,c),this._dx=f.x-y.x,this._dy=f.y-y.y}else this.world.updateMotion(this,c),this.newVelocity.set(m.x*c,m.y*c),f.add(this.newVelocity),this._dx=f.x-d.x,this._dy=f.y-d.y;var S=m.x,C=m.y;if(this.updateCenter(),this.angle=Math.atan2(C,S),this.speed=Math.sqrt(S*S+C*C),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var E=this.blocked;this.world.emit(a.WORLD_BOUNDS,this,E.up,E.down,E.left,E.right)}},postUpdate:function(){var c=this.position,d=c.x-this.prevFrame.x,f=c.y-this.prevFrame.y,m=this.gameObject;if(this.moves){var y=this.deltaMax.x,S=this.deltaMax.y;y!==0&&d!==0&&(d<0&&d<-y?d=-y:d>0&&d>y&&(d=y)),S!==0&&f!==0&&(f<0&&f<-S?f=-S:f>0&&f>S&&(f=S)),m&&(m.x+=d,m.y+=f)}d<0?this.facing=o.FACING_LEFT:d>0&&(this.facing=o.FACING_RIGHT),f<0?this.facing=o.FACING_UP:f>0&&(this.facing=o.FACING_DOWN),this.allowRotation&&m&&(m.angle+=this.deltaZ()),this._tx=d,this._ty=f,this.autoFrame.set(c.x,c.y)},setBoundsRectangle:function(c){return this.customBoundsRectangle=c||this.world.bounds,this},checkWorldBounds:function(){var c=this.position,d=this.velocity,f=this.blocked,m=this.customBoundsRectangle,y=this.world.checkCollision,S=this.worldBounce?-this.worldBounce.x:-this.bounce.x,C=this.worldBounce?-this.worldBounce.y:-this.bounce.y,E=!1;return c.x<m.x&&y.left?(c.x=m.x,d.x*=S,f.left=!0,E=!0):this.right>m.right&&y.right&&(c.x=m.right-this.width,d.x*=S,f.right=!0,E=!0),c.y<m.y&&y.up?(c.y=m.y,d.y*=C,f.up=!0,E=!0):this.bottom>m.bottom&&y.down&&(c.y=m.bottom-this.height,d.y*=C,f.down=!0,E=!0),E&&(this.blocked.none=!1,this.updateCenter()),E},setOffset:function(c,d){return d===void 0&&(d=c),this.offset.set(c,d),this},setGameObject:function(c,d){if(d===void 0&&(d=!0),!c||!c.hasTransformComponent)return this;var f=this.world;return this.gameObject&&this.gameObject.body&&(f.disable(this.gameObject),this.gameObject.body=null),c.body&&f.disable(c),this.gameObject=c,c.body=this,this.setSize(),this.enable=d,this},setSize:function(c,d,f){f===void 0&&(f=!0);var m=this.gameObject;if(m&&(!c&&m.frame&&(c=m.frame.realWidth),!d&&m.frame&&(d=m.frame.realHeight)),this.sourceWidth=c,this.sourceHeight=d,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),f&&m&&m.getCenter){var y=(m.width-c)/2,S=(m.height-d)/2;this.offset.set(y,S)}return this.isCircle=!1,this.radius=0,this},setCircle:function(c,d,f){return d===void 0&&(d=this.offset.x),f===void 0&&(f=this.offset.y),c>0?(this.isCircle=!0,this.radius=c,this.sourceWidth=c*2,this.sourceHeight=c*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,f),this.updateCenter()):this.isCircle=!1,this},reset:function(c,d){this.stop();var f=this.gameObject;f&&(f.setPosition(c,d),this.rotation=f.angle,this.preRotation=f.angle);var m=this.position;f&&f.getTopLeft?f.getTopLeft(m):m.set(c,d),this.prev.copy(m),this.prevFrame.copy(m),this.autoFrame.copy(m),f&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(c){return c.x=this.x,c.y=this.y,c.right=this.right,c.bottom=this.bottom,c},hitTest:function(c,d){if(!this.isCircle)return n(this,c,d);if(this.radius>0&&c>=this.left&&c<=this.right&&d>=this.top&&d<=this.bottom){var f=(this.center.x-c)*(this.center.x-c),m=(this.center.y-d)*(this.center.y-d);return f+m<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(c){var d=this.position,f=d.x+this.halfWidth,m=d.y+this.halfHeight;this.debugShowBody&&(c.lineStyle(c.defaultStrokeWidth,this.debugBodyColor),this.isCircle?c.strokeCircle(f,m,this.width/2):(this.checkCollision.up&&c.lineBetween(d.x,d.y,d.x+this.width,d.y),this.checkCollision.right&&c.lineBetween(d.x+this.width,d.y,d.x+this.width,d.y+this.height),this.checkCollision.down&&c.lineBetween(d.x,d.y+this.height,d.x+this.width,d.y+this.height),this.checkCollision.left&&c.lineBetween(d.x,d.y,d.x,d.y+this.height))),this.debugShowVelocity&&(c.lineStyle(c.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),c.lineBetween(f,m,f+this.velocity.x/2,m+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(c){return c===void 0&&(c=!0),this.directControl=c,this},setCollideWorldBounds:function(c,d,f,m){c===void 0&&(c=!0),this.collideWorldBounds=c;var y=d!==void 0,S=f!==void 0;return(y||S)&&(this.worldBounce||(this.worldBounce=new s),y&&(this.worldBounce.x=d),S&&(this.worldBounce.y=f)),m!==void 0&&(this.onWorldBounds=m),this},setVelocity:function(c,d){return this.velocity.set(c,d),c=this.velocity.x,d=this.velocity.y,this.speed=Math.sqrt(c*c+d*d),this},setVelocityX:function(c){return this.setVelocity(c,this.velocity.y)},setVelocityY:function(c){return this.setVelocity(this.velocity.x,c)},setMaxVelocity:function(c,d){return this.maxVelocity.set(c,d),this},setMaxVelocityX:function(c){return this.maxVelocity.x=c,this},setMaxVelocityY:function(c){return this.maxVelocity.y=c,this},setMaxSpeed:function(c){return this.maxSpeed=c,this},setSlideFactor:function(c,d){return this.slideFactor.set(c,d),this},setBounce:function(c,d){return this.bounce.set(c,d),this},setBounceX:function(c){return this.bounce.x=c,this},setBounceY:function(c){return this.bounce.y=c,this},setAcceleration:function(c,d){return this.acceleration.set(c,d),this},setAccelerationX:function(c){return this.acceleration.x=c,this},setAccelerationY:function(c){return this.acceleration.y=c,this},setAllowDrag:function(c){return c===void 0&&(c=!0),this.allowDrag=c,this},setAllowGravity:function(c){return c===void 0&&(c=!0),this.allowGravity=c,this},setAllowRotation:function(c){return c===void 0&&(c=!0),this.allowRotation=c,this},setDrag:function(c,d){return this.drag.set(c,d),this},setDamping:function(c){return this.useDamping=c,this},setDragX:function(c){return this.drag.x=c,this},setDragY:function(c){return this.drag.y=c,this},setGravity:function(c,d){return this.gravity.set(c,d),this},setGravityX:function(c){return this.gravity.x=c,this},setGravityY:function(c){return this.gravity.y=c,this},setFriction:function(c,d){return this.friction.set(c,d),this},setFrictionX:function(c){return this.friction.x=c,this},setFrictionY:function(c){return this.friction.y=c,this},setAngularVelocity:function(c){return this.angularVelocity=c,this},setAngularAcceleration:function(c){return this.angularAcceleration=c,this},setAngularDrag:function(c){return this.angularDrag=c,this},setMass:function(c){return this.mass=c,this},setImmovable:function(c){return c===void 0&&(c=!0),this.immovable=c,this},setEnable:function(c){return c===void 0&&(c=!0),this.enable=c,this},processX:function(c,d,f,m){this.x+=c,this.updateCenter(),d!==null&&(this.velocity.x=d*this.slideFactor.x);var y=this.blocked;f&&(y.left=!0,y.none=!1),m&&(y.right=!0,y.none=!1)},processY:function(c,d,f,m){this.y+=c,this.updateCenter(),d!==null&&(this.velocity.y=d*this.slideFactor.y);var y=this.blocked;f&&(y.up=!0,y.none=!1),m&&(y.down=!0,y.none=!1)},x:{get:function(){return this.position.x},set:function(c){this.position.x=c}},y:{get:function(){return this.position.y},set:function(c){this.position.y=c}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});p.exports=l}),79342:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n,u,s,l){this.world=a,this.name="",this.active=!0,this.overlapOnly=r,this.object1=e,this.object2=n,this.collideCallback=u,this.processCallback=s,this.callbackContext=l},setName:function(o){return this.name=o,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});p.exports=g}),66022:((p,M,t)=>{var h=t(71289),g=t(13759),o=t(37742),a=t(83419),r=t(37747),e=t(60758),n=t(72624),u=t(71464),s=new a({initialize:function(c){this.world=c,this.scene=c.scene,this.sys=c.scene.sys},collider:function(l,c,d,f,m){return this.world.addCollider(l,c,d,f,m)},overlap:function(l,c,d,f,m){return this.world.addOverlap(l,c,d,f,m)},existing:function(l,c){var d=c?r.STATIC_BODY:r.DYNAMIC_BODY;return this.world.enableBody(l,d),l},staticImage:function(l,c,d,f){var m=new h(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.world.enableBody(m,r.STATIC_BODY),m},image:function(l,c,d,f){var m=new h(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.world.enableBody(m,r.DYNAMIC_BODY),m},staticSprite:function(l,c,d,f){var m=new g(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,r.STATIC_BODY),m},sprite:function(l,c,d,f){var m=new g(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,r.DYNAMIC_BODY),m},staticGroup:function(l,c){return this.sys.updateList.add(new u(this.world,this.world.scene,l,c))},group:function(l,c){return this.sys.updateList.add(new e(this.world,this.world.scene,l,c))},body:function(l,c,d,f){var m=new o(this.world);return m.position.set(l,c),d&&f&&m.setSize(d,f),this.world.add(m,r.DYNAMIC_BODY),m},staticBody:function(l,c,d,f){var m=new n(this.world);return m.position.set(l,c),d&&f&&m.setSize(d,f),this.world.add(m,r.STATIC_BODY),m},destroy:function(){this.world=null,this.scene=null,this.sys=null}});p.exports=s}),79599:(p=>{var M=function(t){var h=0;if(!Array.isArray(t))h=t;else for(var g=0;g<t.length;g++)h|=t[g];return h};p.exports=M}),64897:((p,M,t)=>{var h=t(37747),g=function(o,a,r,e){var n=0,u=o.deltaAbsX()+a.deltaAbsX()+e;return o._dx===0&&a._dx===0?(o.embedded=!0,a.embedded=!0):o._dx>a._dx?(n=o.right-a.x,n>u&&!r||o.checkCollision.right===!1||a.checkCollision.left===!1?n=0:(o.touching.none=!1,o.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.right=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.left=!0))):o._dx<a._dx&&(n=o.x-a.width-a.x,-n>u&&!r||o.checkCollision.left===!1||a.checkCollision.right===!1?n=0:(o.touching.none=!1,o.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.left=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.right=!0))),o.overlapX=n,a.overlapX=n,n};p.exports=g}),45170:((p,M,t)=>{var h=t(37747),g=function(o,a,r,e){var n=0,u=o.deltaAbsY()+a.deltaAbsY()+e;return o._dy===0&&a._dy===0?(o.embedded=!0,a.embedded=!0):o._dy>a._dy?(n=o.bottom-a.y,n>u&&!r||o.checkCollision.down===!1||a.checkCollision.up===!1?n=0:(o.touching.none=!1,o.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.down=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.up=!0))):o._dy<a._dy&&(n=o.y-a.bottom,-n>u&&!r||o.checkCollision.up===!1||a.checkCollision.down===!1?n=0:(o.touching.none=!1,o.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.up=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.down=!0))),o.overlapY=n,a.overlapY=n,n};p.exports=g}),60758:((p,M,t)=>{var h=t(13759),g=t(83419),o=t(78389),a=t(37747),r=t(95540),e=t(26479),n=t(41212),u=new g({Extends:e,Mixins:[o],initialize:function(l,c,d,f){if(!d&&!f)f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(n(d))f=d,d=null,f.internalCreateCallback=this.createCallbackHandler,f.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(d)&&n(d[0])){var m=this;d.forEach(function(y){y.internalCreateCallback=m.createCallbackHandler,y.internalRemoveCallback=m.removeCallbackHandler,y.classType=r(y,"classType",h)}),f=null}else f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,f&&(f.classType=r(f,"classType",h)),this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:r(f,"collideWorldBounds",!1),setBoundsRectangle:r(f,"customBoundsRectangle",null),setAccelerationX:r(f,"accelerationX",0),setAccelerationY:r(f,"accelerationY",0),setAllowDrag:r(f,"allowDrag",!0),setAllowGravity:r(f,"allowGravity",!0),setAllowRotation:r(f,"allowRotation",!0),setDamping:r(f,"useDamping",!1),setBounceX:r(f,"bounceX",0),setBounceY:r(f,"bounceY",0),setDragX:r(f,"dragX",0),setDragY:r(f,"dragY",0),setEnable:r(f,"enable",!0),setGravityX:r(f,"gravityX",0),setGravityY:r(f,"gravityY",0),setFrictionX:r(f,"frictionX",0),setFrictionY:r(f,"frictionY",0),setMaxSpeed:r(f,"maxSpeed",-1),setMaxVelocityX:r(f,"maxVelocityX",1e4),setMaxVelocityY:r(f,"maxVelocityY",1e4),setVelocityX:r(f,"velocityX",0),setVelocityY:r(f,"velocityY",0),setAngularVelocity:r(f,"angularVelocity",0),setAngularAcceleration:r(f,"angularAcceleration",0),setAngularDrag:r(f,"angularDrag",0),setMass:r(f,"mass",1),setImmovable:r(f,"immovable",!1)},e.call(this,c,d,f),this.type="PhysicsGroup"},createCallbackHandler:function(s){s.body||this.world.enableBody(s,a.DYNAMIC_BODY);var l=s.body;for(var c in this.defaults)l[c](this.defaults[c])},removeCallbackHandler:function(s){s.body&&this.world.disableBody(s)},setVelocity:function(s,l,c){c===void 0&&(c=0);for(var d=this.getChildren(),f=0;f<d.length;f++)d[f].body.velocity.set(s+f*c,l+f*c);return this},setVelocityX:function(s,l){l===void 0&&(l=0);for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].body.velocity.x=s+d*l;return this},setVelocityY:function(s,l){l===void 0&&(l=0);for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].body.velocity.y=s+d*l;return this}});p.exports=u}),3017:(p=>{var M,t,h,g,o,a,r,e,n,u,s,l,c,d,f,m,y,S=function(G,b,L){M=G,t=b;var w=M.velocity.x,B=t.velocity.x;return h=M.pushable,n=M._dx<0,u=M._dx>0,s=M._dx===0,f=Math.abs(M.right-t.x)<=Math.abs(t.right-M.x),r=B-w*M.bounce.x,g=t.pushable,l=t._dx<0,c=t._dx>0,d=t._dx===0,m=!f,e=w-B*t.bounce.x,y=Math.abs(L),C()},C=function(){return u&&f&&t.blocked.right?(M.processX(-y,r,!1,!0),1):n&&m&&t.blocked.left?(M.processX(y,r,!0),1):c&&m&&M.blocked.right?(t.processX(-y,e,!1,!0),2):l&&f&&M.blocked.left?(t.processX(y,e,!0),2):0},E=function(){var G=M.velocity.x,b=t.velocity.x,L=Math.sqrt(b*b*t.mass/M.mass)*(b>0?1:-1),w=Math.sqrt(G*G*M.mass/t.mass)*(G>0?1:-1),B=(L+w)*.5;return L-=B,w-=B,o=B+L*M.bounce.x,a=B+w*t.bounce.x,n&&m?P(0):l&&f?P(1):u&&f?P(2):c&&m?P(3):!1},P=function(G){if(h&&g)y*=.5,G===0||G===3?(M.processX(y,o),t.processX(-y,a)):(M.processX(-y,o),t.processX(y,a));else if(h&&!g)G===0||G===3?M.processX(y,r,!0):M.processX(-y,r,!1,!0);else if(!h&&g)G===0||G===3?t.processX(-y,e,!1,!0):t.processX(y,e,!0);else{var b=y*.5;G===0?d?(M.processX(y,0,!0),t.processX(0,null,!1,!0)):c?(M.processX(b,0,!0),t.processX(-b,0,!1,!0)):(M.processX(b,t.velocity.x,!0),t.processX(-b,null,!1,!0)):G===1?s?(M.processX(0,null,!1,!0),t.processX(y,0,!0)):u?(M.processX(-b,0,!1,!0),t.processX(b,0,!0)):(M.processX(-b,null,!1,!0),t.processX(b,M.velocity.x,!0)):G===2?d?(M.processX(-y,0,!1,!0),t.processX(0,null,!0)):l?(M.processX(-b,0,!1,!0),t.processX(b,0,!0)):(M.processX(-b,t.velocity.x,!1,!0),t.processX(b,null,!0)):G===3&&(s?(M.processX(0,null,!0),t.processX(-y,0,!1,!0)):n?(M.processX(b,0,!0),t.processX(-b,0,!1,!0)):(M.processX(b,t.velocity.y,!0),t.processX(-b,null,!1,!0)))}return!0},A=function(G){if(G===1?t.velocity.x=0:f?t.processX(y,e,!0):t.processX(-y,e,!1,!0),M.moves){var b=M.directControl?M.y-M.autoFrame.y:M.y-M.prev.y;t.y+=b*M.friction.y,t._dy=t.y-t.prev.y}},R=function(G){if(G===2?M.velocity.x=0:m?M.processX(y,r,!0):M.processX(-y,r,!1,!0),t.moves){var b=t.directControl?t.y-t.autoFrame.y:t.y-t.prev.y;M.y+=b*t.friction.y,M._dy=M.y-M.prev.y}};p.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:A,RunImmovableBody2:R}}),47962:(p=>{var M,t,h,g,o,a,r,e,n,u,s,l,c,d,f,m,y,S=function(G,b,L){M=G,t=b;var w=M.velocity.y,B=t.velocity.y;return h=M.pushable,n=M._dy<0,u=M._dy>0,s=M._dy===0,f=Math.abs(M.bottom-t.y)<=Math.abs(t.bottom-M.y),r=B-w*M.bounce.y,g=t.pushable,l=t._dy<0,c=t._dy>0,d=t._dy===0,m=!f,e=w-B*t.bounce.y,y=Math.abs(L),C()},C=function(){return u&&f&&t.blocked.down?(M.processY(-y,r,!1,!0),1):n&&m&&t.blocked.up?(M.processY(y,r,!0),1):c&&m&&M.blocked.down?(t.processY(-y,e,!1,!0),2):l&&f&&M.blocked.up?(t.processY(y,e,!0),2):0},E=function(){var G=M.velocity.y,b=t.velocity.y,L=Math.sqrt(b*b*t.mass/M.mass)*(b>0?1:-1),w=Math.sqrt(G*G*M.mass/t.mass)*(G>0?1:-1),B=(L+w)*.5;return L-=B,w-=B,o=B+L*M.bounce.y,a=B+w*t.bounce.y,n&&m?P(0):l&&f?P(1):u&&f?P(2):c&&m?P(3):!1},P=function(G){if(h&&g)y*=.5,G===0||G===3?(M.processY(y,o),t.processY(-y,a)):(M.processY(-y,o),t.processY(y,a));else if(h&&!g)G===0||G===3?M.processY(y,r,!0):M.processY(-y,r,!1,!0);else if(!h&&g)G===0||G===3?t.processY(-y,e,!1,!0):t.processY(y,e,!0);else{var b=y*.5;G===0?d?(M.processY(y,0,!0),t.processY(0,null,!1,!0)):c?(M.processY(b,0,!0),t.processY(-b,0,!1,!0)):(M.processY(b,t.velocity.y,!0),t.processY(-b,null,!1,!0)):G===1?s?(M.processY(0,null,!1,!0),t.processY(y,0,!0)):u?(M.processY(-b,0,!1,!0),t.processY(b,0,!0)):(M.processY(-b,null,!1,!0),t.processY(b,M.velocity.y,!0)):G===2?d?(M.processY(-y,0,!1,!0),t.processY(0,null,!0)):l?(M.processY(-b,0,!1,!0),t.processY(b,0,!0)):(M.processY(-b,t.velocity.y,!1,!0),t.processY(b,null,!0)):G===3&&(s?(M.processY(0,null,!0),t.processY(-y,0,!1,!0)):n?(M.processY(b,0,!0),t.processY(-b,0,!1,!0)):(M.processY(b,t.velocity.y,!0),t.processY(-b,null,!1,!0)))}return!0},A=function(G){if(G===1?t.velocity.y=0:f?t.processY(y,e,!0):t.processY(-y,e,!1,!0),M.moves){var b=M.directControl?M.x-M.autoFrame.x:M.x-M.prev.x;t.x+=b*M.friction.x,t._dx=t.x-t.prev.x}},R=function(G){if(G===2?M.velocity.y=0:m?M.processY(y,r,!0):M.processY(-y,r,!1,!0),t.moves){var b=t.directControl?t.x-t.autoFrame.x:t.x-t.prev.x;M.x+=b*t.friction.x,M._dx=M.x-M.prev.x}};p.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:A,RunImmovableBody2:R}}),14087:((p,M,t)=>{var h=t(64897),g=t(3017),o=function(a,r,e,n,u){u===void 0&&(u=h(a,r,e,n));var s=a.immovable,l=r.immovable;if(e||u===0||s&&l||a.customSeparateX||r.customSeparateX)return u!==0||a.embedded&&r.embedded;var c=g.Set(a,r,u);return!s&&!l?c>0?!0:g.Check():(s?g.RunImmovableBody1(c):l&&g.RunImmovableBody2(c),!0)};p.exports=o}),89936:((p,M,t)=>{var h=t(45170),g=t(47962),o=function(a,r,e,n,u){u===void 0&&(u=h(a,r,e,n));var s=a.immovable,l=r.immovable;if(e||u===0||s&&l||a.customSeparateY||r.customSeparateY)return u!==0||a.embedded&&r.embedded;var c=g.Set(a,r,u);return!s&&!l?c>0?!0:g.Check():(s?g.RunImmovableBody1(c):l&&g.RunImmovableBody2(c),!0)};p.exports=o}),95829:(p=>{var M=function(t,h){return h===void 0&&(h={}),h.none=t,h.up=!1,h.down=!1,h.left=!1,h.right=!1,t||(h.up=!0,h.down=!0,h.left=!0,h.right=!0),h};p.exports=M}),72624:((p,M,t)=>{var h=t(87902),g=t(83419),o=t(78389),a=t(37747),r=t(37303),e=t(95829),n=t(26099),u=new g({Mixins:[o],initialize:function(l,c){var d=64,f=64,m={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},y=c!==void 0;y&&c.displayWidth&&(d=c.displayWidth,f=c.displayHeight),y||(c=m),this.world=l,this.gameObject=y?c:void 0,this.isBody=!0,this.debugShowBody=l.defaults.debugShowStaticBody,this.debugBodyColor=l.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(c.x-d*c.originX,c.y-f*c.originY),this.width=d,this.height=f,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=n.ZERO,this.allowGravity=!1,this.gravity=n.ZERO,this.bounce=n.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=e(!1),this.touching=e(!0),this.wasTouching=e(!0),this.blocked=e(!0),this.physicsType=a.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(s,l,c){if(l===void 0&&(l=!0),c===void 0&&(c=!0),!s||!s.hasTransformComponent)return this;var d=this.world;return this.gameObject&&this.gameObject.body&&(d.disable(this.gameObject),this.gameObject.body=null),s.body&&d.disable(s),this.gameObject=s,s.body=this,this.setSize(),l&&this.updateFromGameObject(),this.enable=c,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var s=this.gameObject;return s.getTopLeft(this.position),this.width=s.displayWidth,this.height=s.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(s,l){return l===void 0&&(l=s),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(s,l),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(s,l,c){c===void 0&&(c=!0);var d=this.gameObject;if(d&&d.frame&&(s||(s=d.frame.realWidth),l||(l=d.frame.realHeight)),this.world.staticTree.remove(this),this.width=s,this.height=l,this.halfWidth=Math.floor(s/2),this.halfHeight=Math.floor(l/2),c&&d&&d.getCenter){var f=d.displayWidth/2,m=d.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f-this.halfWidth,m-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(s,l,c){return l===void 0&&(l=this.offset.x),c===void 0&&(c=this.offset.y),s>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=s,this.width=s*2,this.height=s*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,c),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(s,l){var c=this.gameObject;s===void 0&&(s=c.x),l===void 0&&(l=c.y),this.world.staticTree.remove(this),c.setPosition(s,l),c.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(s){return s.x=this.x,s.y=this.y,s.right=this.right,s.bottom=this.bottom,s},hitTest:function(s,l){return this.isCircle?h(this,s,l):r(this,s,l)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(s){var l=this.position,c=l.x+this.halfWidth,d=l.y+this.halfHeight;this.debugShowBody&&(s.lineStyle(s.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?s.strokeCircle(c,d,this.width/2):s.strokeRect(l.x,l.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(s){return s<=0&&(s=.1),this.mass=s,this},x:{get:function(){return this.position.x},set:function(s){this.world.staticTree.remove(this),this.position.x=s,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(s){this.world.staticTree.remove(this),this.position.y=s,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});p.exports=u}),71464:((p,M,t)=>{var h=t(13759),g=t(83419),o=t(78389),a=t(37747),r=t(95540),e=t(26479),n=t(41212),u=new g({Extends:e,Mixins:[o],initialize:function(l,c,d,f){!d&&!f?f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:h}:n(d)?(f=d,d=null,f.internalCreateCallback=this.createCallbackHandler,f.internalRemoveCallback=this.removeCallbackHandler,f.createMultipleCallback=this.createMultipleCallbackHandler,f.classType=r(f,"classType",h)):Array.isArray(d)&&n(d[0])?(f=d,d=null,f.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=r(m,"classType",h)})):f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=a.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,e.call(this,c,d,f),this.type="StaticPhysicsGroup"},createCallbackHandler:function(s){s.body||this.world.enableBody(s,a.STATIC_BODY)},removeCallbackHandler:function(s){s.body&&this.world.disableBody(s)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var s=this.children.entries,l=0;l<s.length;l++)s[l].body.reset();return this}});p.exports=u}),82248:((p,M,t)=>{var h=t(55495),g=t(37742),o=t(45319),a=t(83419),r=t(79342),e=t(37747),n=t(20339),u=t(52816),s=t(50792),l=t(63012),c=t(43855),d=t(5470),f=t(94977),m=t(64897),y=t(45170),S=t(96523),C=t(35154),E=t(36383),P=t(25774),A=t(96602),R=t(87841),G=t(59542),b=t(40012),L=t(14087),w=t(89936),B=t(35072),N=t(72624),Y=t(2483),U=t(61340),W=t(26099),O=t(15994),V=new a({Extends:s,initialize:function(z,I){s.call(this),this.scene=z,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new P,this.gravity=new W(C(I,"gravity.x",0),C(I,"gravity.y",0)),this.bounds=new R(C(I,"x",0),C(I,"y",0),C(I,"width",z.sys.scale.width),C(I,"height",z.sys.scale.height)),this.checkCollision={up:C(I,"checkCollision.up",!0),down:C(I,"checkCollision.down",!0),left:C(I,"checkCollision.left",!0),right:C(I,"checkCollision.right",!0)},this.fps=C(I,"fps",60),this.fixedStep=C(I,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=C(I,"timeScale",1),this.OVERLAP_BIAS=C(I,"overlapBias",4),this.TILE_BIAS=C(I,"tileBias",16),this.forceX=C(I,"forceX",!1),this.isPaused=C(I,"isPaused",!1),this._total=0,this.drawDebug=C(I,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:C(I,"debugShowBody",!0),debugShowStaticBody:C(I,"debugShowStaticBody",!0),debugShowVelocity:C(I,"debugShowVelocity",!0),bodyDebugColor:C(I,"debugBodyColor",16711935),staticBodyDebugColor:C(I,"debugStaticBodyColor",255),velocityDebugColor:C(I,"debugVelocityColor",65280)},this.maxEntries=C(I,"maxEntries",16),this.useTree=C(I,"useTree",!0),this.tree=new G(this.maxEntries),this.staticTree=new G(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(X,z){z===void 0&&(z=e.DYNAMIC_BODY),Array.isArray(X)||(X=[X]);for(var I=0;I<X.length;I++){var Z=X[I];if(Z.isParent)for(var J=Z.getChildren(),k=0;k<J.length;k++){var j=J[k];j.isParent?this.enable(j,z):this.enableBody(j,z)}else this.enableBody(Z,z)}},enableBody:function(X,z){return z===void 0&&(z=e.DYNAMIC_BODY),X.hasTransformComponent&&(X.body||(z===e.DYNAMIC_BODY?X.body=new g(this,X):z===e.STATIC_BODY&&(X.body=new N(this,X))),this.add(X.body)),X},add:function(X){return X.physicsType===e.DYNAMIC_BODY?this.bodies.set(X):X.physicsType===e.STATIC_BODY&&(this.staticBodies.set(X),this.staticTree.insert(X)),X.enable=!0,X},disable:function(X){Array.isArray(X)||(X=[X]);for(var z=0;z<X.length;z++){var I=X[z];if(I.isParent)for(var Z=I.getChildren(),J=0;J<Z.length;J++){var k=Z[J];k.isParent?this.disable(k):this.disableBody(k.body)}else this.disableBody(I.body)}},disableBody:function(X){this.remove(X),X.enable=!1},remove:function(X){X.physicsType===e.DYNAMIC_BODY?(this.tree.remove(X),this.bodies.delete(X)):X.physicsType===e.STATIC_BODY&&(this.staticBodies.delete(X),this.staticTree.remove(X))},createDebugGraphic:function(){var X=this.scene.sys.add.graphics({x:0,y:0});return X.setDepth(Number.MAX_VALUE),this.debugGraphic=X,this.drawDebug=!0,X},setBounds:function(X,z,I,Z,J,k,j,tt){return this.bounds.setTo(X,z,I,Z),J!==void 0&&this.setBoundsCollision(J,k,j,tt),this},setBoundsCollision:function(X,z,I,Z){return X===void 0&&(X=!0),z===void 0&&(z=!0),I===void 0&&(I=!0),Z===void 0&&(Z=!0),this.checkCollision.left=X,this.checkCollision.right=z,this.checkCollision.up=I,this.checkCollision.down=Z,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(X,z,I,Z,J){I===void 0&&(I=null),Z===void 0&&(Z=null),J===void 0&&(J=I);var k=new r(this,!1,X,z,I,Z,J);return this.colliders.add(k),k},addOverlap:function(X,z,I,Z,J){I===void 0&&(I=null),Z===void 0&&(Z=null),J===void 0&&(J=I);var k=new r(this,!0,X,z,I,Z,J);return this.colliders.add(k),k},removeCollider:function(X){return this.colliders.remove(X),this},setFPS:function(X){return this.fps=X,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(X,z){if(!(this.isPaused||this.bodies.size===0)){var I,Z=this._frameTime,J=this._frameTimeMS*this.timeScale;this._elapsed+=z;var k,j=this.bodies.entries,tt=this._elapsed>=J;for(this.fixedStep||(Z=z*.001,tt=!0,this._elapsed=0),I=0;I<j.length;I++)k=j[I],k.enable&&k.preUpdate(tt,Z);if(tt){this._elapsed-=J,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(j));var ht=this.colliders.update();for(I=0;I<ht.length;I++){var ot=ht[I];ot.active&&ot.update()}this.emit(l.WORLD_STEP,Z)}for(;this._elapsed>=J;)this._elapsed-=J,this.step(Z)}},step:function(X){var z,I,Z=this.bodies.entries,J=Z.length;for(z=0;z<J;z++)I=Z[z],I.enable&&I.update(X);this.useTree&&(this.tree.clear(),this.tree.load(Z));var k=this.colliders.update();for(z=0;z<k.length;z++){var j=k[z];j.active&&j.update()}this.emit(l.WORLD_STEP,X),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var X,z,I=this.bodies.entries,Z=I.length,J=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,X=0;X<Z;X++)z=I[X],z.enable&&z.postUpdate();if(this.drawDebug){var j=this.debugGraphic;for(j.clear(),X=0;X<Z;X++)z=I[X],z.willDrawDebug()&&z.drawDebug(j);for(I=k.entries,Z=I.length,X=0;X<Z;X++)z=I[X],z.willDrawDebug()&&z.drawDebug(j)}var tt=this.pendingDestroy;if(tt.size>0){var ht=this.tree,ot=this.staticTree;for(I=tt.entries,Z=I.length,X=0;X<Z;X++)z=I[X],z.physicsType===e.DYNAMIC_BODY?(ht.remove(z),J.delete(z)):z.physicsType===e.STATIC_BODY&&(ot.remove(z),k.delete(z)),z.world=void 0,z.gameObject=void 0;tt.clear()}},updateMotion:function(X,z){X.allowRotation&&this.computeAngularVelocity(X,z),this.computeVelocity(X,z)},computeAngularVelocity:function(X,z){var I=X.angularVelocity,Z=X.angularAcceleration,J=X.angularDrag,k=X.maxAngular;Z?I+=Z*z:X.allowDrag&&J&&(J*=z,d(I-J,0,.1)?I-=J:f(I+J,0,.1)?I+=J:I=0),I=o(I,-k,k);var j=I-X.angularVelocity;X.angularVelocity+=j,X.rotation+=X.angularVelocity*z},computeVelocity:function(X,z){var I=X.velocity.x,Z=X.acceleration.x,J=X.drag.x,k=X.maxVelocity.x,j=X.velocity.y,tt=X.acceleration.y,ht=X.drag.y,ot=X.maxVelocity.y,st=X.speed,ft=X.maxSpeed,ut=X.allowDrag,lt=X.useDamping;X.allowGravity&&(I+=(this.gravity.x+X.gravity.x)*z,j+=(this.gravity.y+X.gravity.y)*z),Z?I+=Z*z:ut&&J&&(lt?(J=Math.pow(J,z),I*=J,st=Math.sqrt(I*I+j*j),c(st,0,.001)&&(I=0)):(J*=z,d(I-J,0,.01)?I-=J:f(I+J,0,.01)?I+=J:I=0)),tt?j+=tt*z:ut&&ht&&(lt?(ht=Math.pow(ht,z),j*=ht,st=Math.sqrt(I*I+j*j),c(st,0,.001)&&(j=0)):(ht*=z,d(j-ht,0,.01)?j-=ht:f(j+ht,0,.01)?j+=ht:j=0)),I=o(I,-k,k),j=o(j,-ot,ot),X.velocity.set(I,j),ft>-1&&X.velocity.length()>ft&&(X.velocity.normalize().scale(ft),st=ft),X.speed=st},separate:function(X,z,I,Z,J){var k,j,tt=!1,ht=!0;if(!X.enable||!z.enable||X.checkCollision.none||z.checkCollision.none||!this.intersects(X,z)||(X.collisionMask&z.collisionCategory)===0||(z.collisionMask&X.collisionCategory)===0||I&&I.call(Z,X.gameObject||X,z.gameObject||z)===!1)return tt;if(X.isCircle||z.isCircle){var ot=this.separateCircle(X,z,J);ot.result?(tt=!0,ht=!1):(k=ot.x,j=ot.y,ht=!0)}if(ht){var st=!1,ft=!1,ut=this.OVERLAP_BIAS;J?(st=L(X,z,J,ut,k),ft=w(X,z,J,ut,j)):this.forceX||Math.abs(this.gravity.y+X.gravity.y)<Math.abs(this.gravity.x+X.gravity.x)?(st=L(X,z,J,ut,k),this.intersects(X,z)&&(ft=w(X,z,J,ut,j))):(ft=w(X,z,J,ut,j),this.intersects(X,z)&&(st=L(X,z,J,ut,k))),tt=st||ft}return tt&&(J?(X.onOverlap||z.onOverlap)&&this.emit(l.OVERLAP,X.gameObject,z.gameObject,X,z):(X.onCollide||z.onCollide)&&this.emit(l.COLLIDE,X.gameObject,z.gameObject,X,z)),tt},separateCircle:function(X,z,I){m(X,z,!1,0),y(X,z,!1,0);var Z=X.isCircle,J=z.isCircle,k=X.center,j=z.center,tt=X.immovable,ht=z.immovable,ot=X.velocity,st=z.velocity,ft=0,ut=!0;if(Z!==J){ut=!1;var lt=k.x,Tt=k.y,bt=X.halfWidth,Dt=z.position.x,ct=z.position.y,yt=z.right,Et=z.bottom;J&&(lt=j.x,Tt=j.y,bt=z.halfWidth,Dt=X.position.x,ct=X.position.y,yt=X.right,Et=X.bottom),Tt<ct?lt<Dt?ft=n(lt,Tt,Dt,ct)-bt:lt>yt&&(ft=n(lt,Tt,yt,ct)-bt):Tt>Et&&(lt<Dt?ft=n(lt,Tt,Dt,Et)-bt:lt>yt&&(ft=n(lt,Tt,yt,Et)-bt)),ft*=-1}else ft=X.halfWidth+z.halfWidth-u(k,j);X.overlapR=ft,z.overlapR=ft;var At=h(k,j),It=(ft+E.EPSILON)*Math.cos(At),Ft=(ft+E.EPSILON)*Math.sin(At),wt={overlap:ft,result:!1,x:It,y:Ft};if(I&&(!ut||ut&&ft!==0))return wt.result=!0,wt;if(!ut&&ft===0||tt&&ht||X.customSeparateX||z.customSeparateX)return wt.x=void 0,wt.y=void 0,wt;var Bt=!X.pushable&&!z.pushable;if(ut){var le=k.x-j.x,pe=k.y-j.y,Ut=Math.sqrt(Math.pow(le,2)+Math.pow(pe,2)),he=(j.x-k.x)/Ut||0,Pt=(j.y-k.y)/Ut||0,Ot=2*(ot.x*he+ot.y*Pt-st.x*he-st.y*Pt)/(X.mass+z.mass);(tt||ht||!X.pushable||!z.pushable)&&(Ot*=2),!tt&&X.pushable&&(ot.x=ot.x-Ot/X.mass*he,ot.y=ot.y-Ot/X.mass*Pt,ot.multiply(X.bounce)),!ht&&z.pushable&&(st.x=st.x+Ot/z.mass*he,st.y=st.y+Ot/z.mass*Pt,st.multiply(z.bounce)),!tt&&!ht&&(It*=.5,Ft*=.5),(!tt||X.pushable||Bt)&&(X.x-=It,X.y-=Ft,X.updateCenter()),(!ht||z.pushable||Bt)&&(z.x+=It,z.y+=Ft,z.updateCenter()),wt.result=!0}else!tt&&(X.pushable||Bt)&&(X.x-=It,X.y-=Ft,X.updateCenter()),!ht&&(z.pushable||Bt)&&(z.x+=It,z.y+=Ft,z.updateCenter()),wt.x=void 0,wt.y=void 0;return wt},intersects:function(X,z){return X===z?!1:!X.isCircle&&!z.isCircle?!(X.right<=z.left||X.bottom<=z.top||X.left>=z.right||X.top>=z.bottom):X.isCircle?z.isCircle?u(X.center,z.center)<=X.halfWidth+z.halfWidth:this.circleBodyIntersects(X,z):this.circleBodyIntersects(z,X)},circleBodyIntersects:function(X,z){var I=o(X.center.x,z.left,z.right),Z=o(X.center.y,z.top,z.bottom),J=(X.center.x-I)*(X.center.x-I),k=(X.center.y-Z)*(X.center.y-Z);return J+k<=X.halfWidth*X.halfWidth},overlap:function(X,z,I,Z,J){return I===void 0&&(I=null),Z===void 0&&(Z=null),J===void 0&&(J=I),this.collideObjects(X,z,I,Z,J,!0)},collide:function(X,z,I,Z,J){return I===void 0&&(I=null),Z===void 0&&(Z=null),J===void 0&&(J=I),this.collideObjects(X,z,I,Z,J,!1)},collideObjects:function(X,z,I,Z,J,k){var j,tt;X.isParent&&(X.physicsType===void 0||z===void 0||X===z)&&(X=X.children.entries),z&&z.isParent&&z.physicsType===void 0&&(z=z.children.entries);var ht=Array.isArray(X),ot=Array.isArray(z);if(this._total=0,!ht&&!ot)this.collideHandler(X,z,I,Z,J,k);else if(!ht&&ot)for(j=0;j<z.length;j++)this.collideHandler(X,z[j],I,Z,J,k);else if(ht&&!ot)if(z)for(j=0;j<X.length;j++)this.collideHandler(X[j],z,I,Z,J,k);else for(j=0;j<X.length;j++){var st=X[j];for(tt=j+1;tt<X.length;tt++)j!==tt&&this.collideHandler(st,X[tt],I,Z,J,k)}else for(j=0;j<X.length;j++)for(tt=0;tt<z.length;tt++)this.collideHandler(X[j],z[tt],I,Z,J,k);return this._total>0},collideHandler:function(X,z,I,Z,J,k){if(z===void 0&&X.isParent)return this.collideGroupVsGroup(X,X,I,Z,J,k);if(!X||!z)return!1;if(X.body||X.isBody){if(z.body||z.isBody)return this.collideSpriteVsSprite(X,z,I,Z,J,k);if(z.isParent)return this.collideSpriteVsGroup(X,z,I,Z,J,k);if(z.isTilemap)return this.collideSpriteVsTilemapLayer(X,z,I,Z,J,k)}else if(X.isParent){if(z.body||z.isBody)return this.collideSpriteVsGroup(z,X,I,Z,J,k);if(z.isParent)return this.collideGroupVsGroup(X,z,I,Z,J,k);if(z.isTilemap)return this.collideGroupVsTilemapLayer(X,z,I,Z,J,k)}else if(X.isTilemap){if(z.body||z.isBody)return this.collideSpriteVsTilemapLayer(z,X,I,Z,J,k);if(z.isParent)return this.collideGroupVsTilemapLayer(z,X,I,Z,J,k)}},canCollide:function(X,z){return X&&z&&(X.collisionMask&z.collisionCategory)!==0&&(z.collisionMask&X.collisionCategory)!==0},collideSpriteVsSprite:function(X,z,I,Z,J,k){var j=X.isBody?X:X.body,tt=z.isBody?z:z.body;return this.canCollide(j,tt)?(this.separate(j,tt,Z,J,k)&&(I&&I.call(J,X,z),this._total++),!0):!1},collideSpriteVsGroup:function(X,z,I,Z,J,k){var j=X.isBody?X:X.body;if(!(z.getLength()===0||!j||!j.enable||j.checkCollision.none||!this.canCollide(j,z))){var tt,ht,ot;if(this.useTree||z.physicsType===e.STATIC_BODY){var st=this.treeMinMax;st.minX=j.left,st.minY=j.top,st.maxX=j.right,st.maxY=j.bottom;var ft=z.physicsType===e.DYNAMIC_BODY?this.tree.search(st):this.staticTree.search(st);for(ht=ft.length,tt=0;tt<ht;tt++)ot=ft[tt],!(j===ot||!ot.enable||ot.checkCollision.none||!z.contains(ot.gameObject))&&this.separate(j,ot,Z,J,k)&&(I&&I.call(J,j.gameObject,ot.gameObject),this._total++)}else{var ut=z.getChildren(),lt=z.children.entries.indexOf(X);for(ht=ut.length,tt=0;tt<ht;tt++)ot=ut[tt].body,!(!ot||tt===lt||!ot.enable)&&this.separate(j,ot,Z,J,k)&&(I&&I.call(J,j.gameObject,ot.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(X,z,I,Z,J,k){if(!this.canCollide(X,z))return!1;var j=X.getChildren();if(j.length===0)return!1;for(var tt=!1,ht=0;ht<j.length;ht++)(j[ht].body||j[ht].isBody)&&this.collideSpriteVsTilemapLayer(j[ht],z,I,Z,J,k)&&(tt=!0);return tt},collideTiles:function(X,z,I,Z,J){return z.length===0||X.body&&!X.body.enable||X.isBody&&!X.enable?!1:this.collideSpriteVsTilesHandler(X,z,I,Z,J,!1,!1)},overlapTiles:function(X,z,I,Z,J){return z.length===0||X.body&&!X.body.enable||X.isBody&&!X.enable?!1:this.collideSpriteVsTilesHandler(X,z,I,Z,J,!0,!1)},collideSpriteVsTilemapLayer:function(X,z,I,Z,J,k){var j=X.isBody?X:X.body;if(!j.enable||j.checkCollision.none||!this.canCollide(j,z))return!1;var tt=z.layer,ht=j.x-tt.tileWidth*z.scaleX,ot=j.y-tt.tileHeight*z.scaleY,st=j.width+tt.tileWidth*z.scaleX,ft=j.height+tt.tileHeight*z.scaleY,ut=k?null:this.tileFilterOptions,lt=S(ht,ot,st,ft,ut,z.scene.cameras.main,z.layer);return lt.length===0?!1:this.collideSpriteVsTilesHandler(X,lt,I,Z,J,k,!0)},collideSpriteVsTilesHandler:function(X,z,I,Z,J,k,j){for(var tt=X.isBody?X:X.body,ht,ot={left:0,right:0,top:0,bottom:0},st,ft=!1,ut=0;ut<z.length;ut++){ht=z[ut],st=ht.tilemapLayer;var lt=st.tileToWorldXY(ht.x,ht.y);ot.left=lt.x,ot.top=lt.y,ot.right=ot.left+ht.width*st.scaleX,ot.bottom=ot.top+ht.height*st.scaleY,Y(ot,tt)&&(!Z||Z.call(J,X,ht))&&A(ht,X)&&(k||b(ut,tt,ht,ot,st,this.TILE_BIAS,j))&&(this._total++,ft=!0,I&&I.call(J,X,ht),k&&tt.onOverlap?this.emit(l.TILE_OVERLAP,X,ht,tt):tt.onCollide&&this.emit(l.TILE_COLLIDE,X,ht,tt))}return ft},collideGroupVsGroup:function(X,z,I,Z,J,k){if(!(X.getLength()===0||z.getLength()===0||!this.canCollide(X,z)))for(var j=X.getChildren(),tt=0;tt<j.length;tt++)this.collideSpriteVsGroup(j[tt],z,I,Z,J,k)},wrap:function(X,z){X.body?this.wrapObject(X,z):X.getChildren?this.wrapArray(X.getChildren(),z):Array.isArray(X)?this.wrapArray(X,z):this.wrapObject(X,z)},wrapArray:function(X,z){for(var I=0;I<X.length;I++)this.wrapObject(X[I],z)},wrapObject:function(X,z){z===void 0&&(z=0),X.x=O(X.x,this.bounds.left-z,this.bounds.right+z),X.y=O(X.y,this.bounds.top-z,this.bounds.bottom+z)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});p.exports=V}),1093:(p=>{var M={setAcceleration:function(t,h){return this.body.acceleration.set(t,h),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};p.exports=M}),59023:(p=>{var M={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};p.exports=M}),62069:(p=>{var M={setBounce:function(t,h){return this.body.bounce.set(t,h),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,h,g,o){return this.body.setCollideWorldBounds(t,h,g,o),this}};p.exports=M}),78389:((p,M,t)=>{var h=t(79599),g={setCollisionCategory:function(o){var a=this.body?this.body:this;return a.collisionCategory=o,this},willCollideWith:function(o){var a=this.body?this.body:this;return(a.collisionMask&o)!==0},addCollidesWith:function(o){var a=this.body?this.body:this;return a.collisionMask=a.collisionMask|o,this},removeCollidesWith:function(o){var a=this.body?this.body:this;return a.collisionMask=a.collisionMask&~o,this},setCollidesWith:function(o){var a=this.body?this.body:this;return a.collisionMask=h(o),this},resetCollisionCategory:function(){var o=this.body?this.body:this;return o.collisionCategory=1,o.collisionMask=2147483647,this}};p.exports=g}),87118:(p=>{var M={setDebug:function(t,h,g){return this.debugShowBody=t,this.debugShowVelocity=h,this.debugBodyColor=g,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};p.exports=M}),52819:(p=>{var M={setDrag:function(t,h){return this.body.drag.set(t,h),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};p.exports=M}),4074:(p=>{var M={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,h,g,o,a){return t&&this.body.reset(h,g),o&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,h){return t===void 0&&(t=!1),h===void 0&&(h=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),h&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};p.exports=M}),40831:(p=>{var M={setFriction:function(t,h){return this.body.friction.set(t,h),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};p.exports=M}),26775:(p=>{var M={setGravity:function(t,h){return this.body.gravity.set(t,h),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};p.exports=M}),9437:(p=>{var M={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};p.exports=M}),30621:(p=>{var M={setMass:function(t){return this.body.mass=t,this}};p.exports=M}),72441:((p,M,t)=>{var h=t(47956),g=t(96503),o=t(2044),a=t(81491),r=function(e,n,u,s,l,c){var d=h(e,n-s,u-s,2*s,2*s,l,c);if(d.length===0)return d;for(var f=new g(n,u,s),m=new g,y=[],S=0;S<d.length;S++){var C=d[S];C.isCircle?(m.setTo(C.center.x,C.center.y,C.halfWidth),o(f,m)&&y.push(C)):a(f,C)&&y.push(C)}return y};p.exports=r}),47956:(p=>{var M=function(t,h,g,o,a,r,e){r===void 0&&(r=!0),e===void 0&&(e=!1);var n=[],u=[],s=t.treeMinMax;if(s.minX=h,s.minY=g,s.maxX=h+o,s.maxY=g+a,e&&(u=t.staticTree.search(s)),r&&t.useTree)n=t.tree.search(s);else if(r){var l=t.bodies,c={position:{x:h,y:g},left:h,top:g,right:h+o,bottom:g+a,isCircle:!1},d=t.intersects;l.iterate(function(f){d(f,c)&&n.push(f)})}return u.concat(n)};p.exports=M}),62121:(p=>{var M={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};p.exports=M}),29384:(p=>{var M={setOffset:function(t,h){return this.body.setOffset(t,h),this},setSize:function(t,h,g){return this.body.setSize(t,h,g),this},setBodySize:function(t,h,g){return this.body.setSize(t,h,g),this},setCircle:function(t,h,g){return this.body.setCircle(t,h,g),this}};p.exports=M}),15098:(p=>{var M={setVelocity:function(t,h){return this.body.setVelocity(t,h),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,h){return this.body.maxVelocity.set(t,h),this}};p.exports=M}),92209:((p,M,t)=>{p.exports={Acceleration:t(1093),Angular:t(59023),Bounce:t(62069),Collision:t(78389),Debug:t(87118),Drag:t(52819),Enable:t(4074),Friction:t(40831),Gravity:t(26775),Immovable:t(9437),Mass:t(30621),OverlapCirc:t(72441),OverlapRect:t(47956),Pushable:t(62121),Size:t(29384),Velocity:t(15098)}}),37747:(p=>{var M={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};p.exports=M}),20009:(p=>{p.exports="collide"}),36768:(p=>{p.exports="overlap"}),60473:(p=>{p.exports="pause"}),89954:(p=>{p.exports="resume"}),61804:(p=>{p.exports="tilecollide"}),7161:(p=>{p.exports="tileoverlap"}),34689:(p=>{p.exports="worldbounds"}),16006:(p=>{p.exports="worldstep"}),63012:((p,M,t)=>{p.exports={COLLIDE:t(20009),OVERLAP:t(36768),PAUSE:t(60473),RESUME:t(89954),TILE_COLLIDE:t(61804),TILE_OVERLAP:t(7161),WORLD_BOUNDS:t(34689),WORLD_STEP:t(16006)}}),27064:((p,M,t)=>{var h=t(37747),g=t(79291),o={ArcadePhysics:t(86689),Body:t(37742),Collider:t(79342),Components:t(92209),Events:t(63012),Factory:t(66022),GetCollidesWith:t(79599),GetOverlapX:t(64897),GetOverlapY:t(45170),SeparateX:t(14087),SeparateY:t(89936),Group:t(60758),Image:t(71289),Sprite:t(13759),StaticBody:t(72624),StaticGroup:t(71464),Tilemap:t(55173),World:t(82248)};o=g(!1,o,h),p.exports=o}),96602:(p=>{var M=function(t,h){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,h,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,h,t):!0};p.exports=M}),36294:(p=>{var M=function(t,h){h<0?(t.blocked.none=!1,t.blocked.left=!0):h>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=h,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};p.exports=M}),67013:(p=>{var M=function(t,h){h<0?(t.blocked.none=!1,t.blocked.up=!0):h>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=h,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};p.exports=M}),40012:((p,M,t)=>{var h=t(21329),g=t(53442),o=t(2483),a=function(r,e,n,u,s,l,c){var d=u.left,f=u.top,m=u.right,y=u.bottom,S=n.faceLeft||n.faceRight,C=n.faceTop||n.faceBottom;if(c||(S=!0,C=!0),!S&&!C)return!1;var E=0,P=0,A=0,R=1;if(e.deltaAbsX()>e.deltaAbsY()?A=-1:e.deltaAbsX()<e.deltaAbsY()&&(R=-1),e.deltaX()!==0&&e.deltaY()!==0&&S&&C&&(A=Math.min(Math.abs(e.position.x-m),Math.abs(e.right-d)),R=Math.min(Math.abs(e.position.y-y),Math.abs(e.bottom-f))),A<R){if(S&&(E=h(e,n,d,m,l,c),E!==0&&!o(u,e)))return!0;C&&(P=g(e,n,f,y,l,c))}else{if(C&&(P=g(e,n,f,y,l,c),P!==0&&!o(u,e)))return!0;S&&(E=h(e,n,d,m,l,c))}return E!==0||P!==0};p.exports=a}),21329:((p,M,t)=>{var h=t(36294),g=function(o,a,r,e,n,u){var s=0,l=a.faceLeft,c=a.faceRight,d=a.collideLeft,f=a.collideRight;return u||(l=!0,c=!0,d=!0,f=!0),o.deltaX()<0&&f&&o.checkCollision.left?c&&o.x<e&&(s=o.x-e,s<-n&&(s=0)):o.deltaX()>0&&d&&o.checkCollision.right&&l&&o.right>r&&(s=o.right-r,s>n&&(s=0)),s!==0&&(o.customSeparateX?o.overlapX=s:h(o,s)),s};p.exports=g}),53442:((p,M,t)=>{var h=t(67013),g=function(o,a,r,e,n,u){var s=0,l=a.faceTop,c=a.faceBottom,d=a.collideUp,f=a.collideDown;return u||(l=!0,c=!0,d=!0,f=!0),o.deltaY()<0&&f&&o.checkCollision.up?c&&o.y<e&&(s=o.y-e,s<-n&&(s=0)):o.deltaY()>0&&d&&o.checkCollision.down&&l&&o.bottom>r&&(s=o.bottom-r,s>n&&(s=0)),s!==0&&(o.customSeparateY?o.overlapY=s:h(o,s)),s};p.exports=g}),2483:(p=>{var M=function(t,h){return!(h.right<=t.left||h.bottom<=t.top||h.position.x>=t.right||h.position.y>=t.bottom)};p.exports=M}),55173:((p,M,t)=>{var h={ProcessTileCallbacks:t(96602),ProcessTileSeparationX:t(36294),ProcessTileSeparationY:t(67013),SeparateTile:t(40012),TileCheckX:t(21329),TileCheckY:t(53442),TileIntersectsBody:t(2483)};p.exports=h}),44563:((p,M,t)=>{p.exports={Arcade:t(27064),Matter:t(3875)}}),68174:((p,M,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var r=this.boundsCenter,e=this.centerDiff,n=a.bounds.max.x-a.bounds.min.x,u=a.bounds.max.y-a.bounds.min.y,s=n*a.centerOfMass.x,l=u*a.centerOfMass.y;return r.set(n/2,u/2),e.set(s-r.x,l-r.y),!0},getTopLeft:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r+n.x+u.x,e+n.y+u.y)}return!1},getTopCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r+u.x,e+n.y+u.y)}return!1},getTopRight:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r-(n.x-u.x),e+n.y+u.y)}return!1},getLeftCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r+n.x+u.x,e+u.y)}return!1},getCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.centerDiff;return new g(r+n.x,e+n.y)}return!1},getRightCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r-(n.x-u.x),e+u.y)}return!1},getBottomLeft:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r+n.x+u.x,e-(n.y-u.y))}return!1},getBottomCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r+u.x,e-(n.y-u.y))}return!1},getBottomRight:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new g(r-(n.x-u.x),e-(n.y-u.y))}return!1}});p.exports=o}),19933:((p,M,t)=>{var h=t(6790);h.Body=t(22562),h.Composite=t(69351),h.World=t(4372),h.Collision=t(52284),h.Detector=t(81388),h.Pairs=t(99561),h.Pair=t(4506),h.Query=t(73296),h.Resolver=t(66272),h.Constraint=t(48140),h.Common=t(53402),h.Engine=t(48413),h.Events=t(35810),h.Sleeping=t(53614),h.Plugin=t(73832),h.Bodies=t(66280),h.Composites=t(74116),h.Axes=t(66615),h.Bounds=t(15647),h.Svg=t(74058),h.Vector=t(31725),h.Vertices=t(41598),h.World.add=h.Composite.add,h.World.remove=h.Composite.remove,h.World.addComposite=h.Composite.addComposite,h.World.addBody=h.Composite.addBody,h.World.addConstraint=h.Composite.addConstraint,h.World.clear=h.Composite.clear,p.exports=h}),28137:((p,M,t)=>{var h=t(66280),g=t(83419),o=t(74116),a=t(48140),r=t(74058),e=t(75803),n=t(23181),u=t(34803),s=t(73834),l=t(19496),c=t(85791),d=t(98713),f=t(41598),m=new g({initialize:function(S){this.world=S,this.scene=S.scene,this.sys=S.scene.sys},rectangle:function(y,S,C,E,P){var A=h.rectangle(y,S,C,E,P);return this.world.add(A),A},trapezoid:function(y,S,C,E,P,A){var R=h.trapezoid(y,S,C,E,P,A);return this.world.add(R),R},circle:function(y,S,C,E,P){var A=h.circle(y,S,C,E,P);return this.world.add(A),A},polygon:function(y,S,C,E,P){var A=h.polygon(y,S,C,E,P);return this.world.add(A),A},fromVertices:function(y,S,C,E,P,A,R){typeof C=="string"&&(C=f.fromPath(C));var G=h.fromVertices(y,S,C,E,P,A,R);return this.world.add(G),G},fromPhysicsEditor:function(y,S,C,E,P){P===void 0&&(P=!0);var A=l.parseBody(y,S,C,E);return P&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(y,S,C,E,P,A){E===void 0&&(E=1),P===void 0&&(P={}),A===void 0&&(A=!0);for(var R=C.getElementsByTagName("path"),G=[],b=0;b<R.length;b++){var L=r.pathToVertices(R[b],30);E!==1&&f.scale(L,E,E),G.push(L)}var w=h.fromVertices(y,S,G,P);return A&&this.world.add(w),w},fromJSON:function(y,S,C,E,P){E===void 0&&(E={}),P===void 0&&(P=!0);var A=c.parseBody(y,S,C,E);return A&&P&&this.world.add(A),A},imageStack:function(y,S,C,E,P,A,R,G,b){R===void 0&&(R=0),G===void 0&&(G=0),b===void 0&&(b={});var L=this.world,w=this.sys.displayList;b.addToWorld=!1;var B=o.stack(C,E,P,A,R,G,function(N,Y){var U=new n(L,N,Y,y,S,b);return w.add(U),U.body});return L.add(B),B},stack:function(y,S,C,E,P,A,R){var G=o.stack(y,S,C,E,P,A,R);return this.world.add(G),G},pyramid:function(y,S,C,E,P,A,R){var G=o.pyramid(y,S,C,E,P,A,R);return this.world.add(G),G},chain:function(y,S,C,E,P,A){return o.chain(y,S,C,E,P,A)},mesh:function(y,S,C,E,P){return o.mesh(y,S,C,E,P)},newtonsCradle:function(y,S,C,E,P){var A=o.newtonsCradle(y,S,C,E,P);return this.world.add(A),A},car:function(y,S,C,E,P){var A=o.car(y,S,C,E,P);return this.world.add(A),A},softBody:function(y,S,C,E,P,A,R,G,b,L){var w=o.softBody(y,S,C,E,P,A,R,G,b,L);return this.world.add(w),w},joint:function(y,S,C,E,P){return this.constraint(y,S,C,E,P)},spring:function(y,S,C,E,P){return this.constraint(y,S,C,E,P)},constraint:function(y,S,C,E,P){E===void 0&&(E=1),P===void 0&&(P={}),P.bodyA=y.type==="body"?y:y.body,P.bodyB=S.type==="body"?S:S.body,isNaN(C)||(P.length=C),P.stiffness=E;var A=a.create(P);return this.world.add(A),A},worldConstraint:function(y,S,C,E){C===void 0&&(C=1),E===void 0&&(E={}),E.bodyB=y.type==="body"?y:y.body,isNaN(S)||(E.length=S),E.stiffness=C;var P=a.create(E);return this.world.add(P),P},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var S=new d(this.scene,this.world,y);return this.world.add(S.constraint),S},image:function(y,S,C,E,P){var A=new n(this.world,y,S,C,E,P);return this.sys.displayList.add(A),A},tileBody:function(y,S){return new s(this.world,y,S)},sprite:function(y,S,C,E,P){var A=new u(this.world,y,S,C,E,P);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(y,S,C){return e(this.world,y,S,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});p.exports=m}),75803:((p,M,t)=>{var h=t(31884),g=t(95540),o=t(26099);function a(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}var r=function(e,n,u,s){u===void 0&&(u={}),s===void 0&&(s=!0);var l=n.x,c=n.y;n.body={temp:!0,position:{x:l,y:c}};var d=[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity];if(d.forEach(function(m){for(var y in m)a(m[y])?Object.defineProperty(n,y,{get:m[y].get,set:m[y].set}):Object.defineProperty(n,y,{value:m[y]})}),n.world=e,n._tempVec2=new o(l,c),u.hasOwnProperty("type")&&u.type==="body")n.setExistingBody(u,s);else{var f=g(u,"shape",null);f||(f="rectangle"),u.addToWorld=s,n.setBody(f,u)}return n};p.exports=r}),23181:((p,M,t)=>{var h=t(83419),g=t(31884),o=t(95643),a=t(95540),r=t(88571),e=t(72699),n=t(26099),u=new h({Extends:r,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,e],initialize:function(l,c,d,f,m,y){o.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,m),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new n(c,d);var S=a(y,"shape",null);S?this.setBody(S,y):this.setRectangle(this.width,this.height,y),this.setPosition(c,d),this.initPipeline(),this.initPostPipeline(!0)}});p.exports=u}),42045:((p,M,t)=>{var h=t(60461),g=t(66615),o=t(66280),a=t(22562),r=t(68174),e=t(15647),n=t(83419),u=t(52284),s=t(53402),l=t(69351),c=t(74116),d=t(48140),f=t(81388),m=t(20339),y=t(28137),S=t(95540),C=t(35154),E=t(46975),P=t(4506),A=t(99561),R=t(37277),G=t(73296),b=t(66272),L=t(44594),w=t(74058),B=t(31725),N=t(41598),Y=t(68243);s.setDecomp(t(55973));var U=new n({initialize:function(O){this.scene=O,this.systems=O.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=l,this.collision=u,this.detector=f,this.pair=P,this.pairs=A,this.query=G,this.resolver=b,this.constraint=d,this.bodies=o,this.composites=c,this.axes=g,this.bounds=e,this.svg=w,this.vector=B,this.vertices=N,this.verts=N,this._tempVec2=B.create(),b._restingThresh=C(this.config,"restingThresh",4),b._restingThreshTangent=C(this.config,"restingThreshTangent",6),b._positionDampen=C(this.config,"positionDampen",.9),b._positionWarming=C(this.config,"positionWarming",.8),b._frictionNormalMultiplier=C(this.config,"frictionNormalMultiplier",5),O.sys.events.once(L.BOOT,this.boot,this),O.sys.events.on(L.START,this.start,this)},boot:function(){this.world=new Y(this.scene,this.config),this.add=new y(this.world),this.bodyBounds=new r,this.systems.events.once(L.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new Y(this.scene,this.config),this.add=new y(this.world));var W=this.systems.events;W.on(L.UPDATE,this.world.update,this.world),W.on(L.POST_UPDATE,this.world.postUpdate,this.world),W.once(L.SHUTDOWN,this.shutdown,this)},getConfig:function(){var W=this.systems.game.config.physics,O=this.systems.settings.physics,V=E(S(O,"matter",{}),S(W,"matter",{}));return V},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(W,O){this.world.step(W,O)},containsPoint:function(W,O,V){W=this.getMatterBodies(W);var X=B.create(O,V),z=G.point(W,X);return z.length>0},intersectPoint:function(W,O,V){V=this.getMatterBodies(V);var X=B.create(W,O),z=[],I=G.point(V,X);return I.forEach(function(Z){z.indexOf(Z)===-1&&z.push(Z)}),z},intersectRect:function(W,O,V,X,z,I){z===void 0&&(z=!1),I=this.getMatterBodies(I);var Z={min:{x:W,y:O},max:{x:W+V,y:O+X}},J=[],k=G.region(I,Z,z);return k.forEach(function(j){J.indexOf(j)===-1&&J.push(j)}),J},intersectRay:function(W,O,V,X,z,I){z===void 0&&(z=1),I=this.getMatterBodies(I);for(var Z=[],J=G.ray(I,B.create(W,O),B.create(V,X),z),k=0;k<J.length;k++)Z.push(J[k].body);return Z},intersectBody:function(W,O){O=this.getMatterBodies(O);for(var V=[],X=G.collides(W,O),z=0;z<X.length;z++){var I=X[z];I.bodyA===W?V.push(I.bodyB):V.push(I.bodyA)}return V},overlap:function(W,O,V,X,z){V===void 0&&(V=null),X===void 0&&(X=null),z===void 0&&(z=V),Array.isArray(W)||(W=[W]),W=this.getMatterBodies(W),O=this.getMatterBodies(O);for(var I=!1,Z=0;Z<W.length;Z++)for(var J=W[Z],k=G.collides(J,O),j=0;j<k.length;j++){var tt=k[j],ht=tt.bodyA.id===J.id?tt.bodyB:tt.bodyA;if(!X||X.call(z,J,ht,tt)){if(I=!0,V)V.call(z,J,ht,tt);else if(!X)return!0}}return I},setCollisionCategory:function(W,O){return W=this.getMatterBodies(W),W.forEach(function(V){V.collisionFilter.category=O}),this},setCollisionGroup:function(W,O){return W=this.getMatterBodies(W),W.forEach(function(V){V.collisionFilter.group=O}),this},setCollidesWith:function(W,O){W=this.getMatterBodies(W);var V=0;if(!Array.isArray(O))V=O;else for(var X=0;X<O.length;X++)V|=O[X];return W.forEach(function(z){z.collisionFilter.mask=V}),this},getMatterBodies:function(W){if(!W)return this.world.getAllBodies();Array.isArray(W)||(W=[W]);for(var O=[],V=0;V<W.length;V++){var X=W[V].hasOwnProperty("body")?W[V].body:W[V];O.push(X)}return O},setVelocity:function(W,O,V){W=this.getMatterBodies(W);var X=this._tempVec2;return X.x=O,X.y=V,W.forEach(function(z){a.setVelocity(z,X)}),this},setVelocityX:function(W,O){W=this.getMatterBodies(W);var V=this._tempVec2;return V.x=O,W.forEach(function(X){V.y=X.velocity.y,a.setVelocity(X,V)}),this},setVelocityY:function(W,O){W=this.getMatterBodies(W);var V=this._tempVec2;return V.y=O,W.forEach(function(X){V.x=X.velocity.x,a.setVelocity(X,V)}),this},setAngularVelocity:function(W,O){return W=this.getMatterBodies(W),W.forEach(function(V){a.setAngularVelocity(V,O)}),this},applyForce:function(W,O){W=this.getMatterBodies(W);var V=this._tempVec2;return W.forEach(function(X){V.x=X.position.x,V.y=X.position.y,a.applyForce(X,V,O)}),this},applyForceFromPosition:function(W,O,V,X){W=this.getMatterBodies(W);var z=this._tempVec2;return W.forEach(function(I){X===void 0&&(X=I.angle),z.x=V*Math.cos(X),z.y=V*Math.sin(X),a.applyForce(I,O,z)}),this},applyForceFromAngle:function(W,O,V){W=this.getMatterBodies(W);var X=this._tempVec2;return W.forEach(function(z){V===void 0&&(V=z.angle),X.x=O*Math.cos(V),X.y=O*Math.sin(V),a.applyForce(z,{x:z.position.x,y:z.position.y},X)}),this},getConstraintLength:function(W){var O=W.pointA.x,V=W.pointA.y,X=W.pointB.x,z=W.pointB.y;return W.bodyA&&(O+=W.bodyA.position.x,V+=W.bodyA.position.y),W.bodyB&&(X+=W.bodyB.position.x,z+=W.bodyB.position.y),m(O,V,X,z)},alignBody:function(W,O,V,X){W=W.hasOwnProperty("body")?W.body:W;var z;switch(X){case h.TOP_LEFT:case h.LEFT_TOP:z=this.bodyBounds.getTopLeft(W,O,V);break;case h.TOP_CENTER:z=this.bodyBounds.getTopCenter(W,O,V);break;case h.TOP_RIGHT:case h.RIGHT_TOP:z=this.bodyBounds.getTopRight(W,O,V);break;case h.LEFT_CENTER:z=this.bodyBounds.getLeftCenter(W,O,V);break;case h.CENTER:z=this.bodyBounds.getCenter(W,O,V);break;case h.RIGHT_CENTER:z=this.bodyBounds.getRightCenter(W,O,V);break;case h.LEFT_BOTTOM:case h.BOTTOM_LEFT:z=this.bodyBounds.getBottomLeft(W,O,V);break;case h.BOTTOM_CENTER:z=this.bodyBounds.getBottomCenter(W,O,V);break;case h.BOTTOM_RIGHT:case h.RIGHT_BOTTOM:z=this.bodyBounds.getBottomRight(W,O,V);break}return z&&a.setPosition(W,z),this},shutdown:function(){var W=this.systems.events;this.world&&(W.off(L.UPDATE,this.world.update,this.world),W.off(L.POST_UPDATE,this.world.postUpdate,this.world)),W.off(L.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(L.START,this.start,this),this.scene=null,this.systems=null}});R.register("MatterPhysics",U,"matterPhysics"),p.exports=U}),34803:((p,M,t)=>{var h=t(9674),g=t(83419),o=t(31884),a=t(95643),r=t(95540),e=t(72699),n=t(68287),u=t(26099),s=new g({Extends:n,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,e],initialize:function(c,d,f,m,y,S){a.call(this,c.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(m,y),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new u(d,f);var C=r(S,"shape",null);C?this.setBody(C,S):this.setRectangle(this.width,this.height,S),this.setPosition(d,f),this.initPipeline(),this.initPostPipeline(!0)}});p.exports=s}),73834:((p,M,t)=>{var h=t(66280),g=t(22562),o=t(83419),a=t(31884),r=t(62644),e=t(50792),n=t(95540),u=t(97022),s=t(41598),l=new o({Extends:e,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(d,f,m){e.call(this),this.tile=f,this.world=d,f.physics.matterBody&&f.physics.matterBody.destroy(),f.physics.matterBody=this;var y=n(m,"body",null),S=n(m,"addToWorld",!0);if(y)this.setBody(y,S);else{var C=f.getCollisionGroup(),E=n(C,"objects",[]);E.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}if(f.flipX||f.flipY){var P={x:f.getCenterX(),y:f.getCenterY()},A=f.flipX?-1:1,R=f.flipY?-1:1;g.scale(y,A,R,P)}},setFromTileRectangle:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);var d=this.tile.getBounds(),f=d.x+d.width/2,m=d.y+d.height/2,y=h.rectangle(f,m,d.width,d.height,c);return this.setBody(y,c.addToWorld),this},setFromTileCollision:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);for(var d=this.tile.tilemapLayer.scaleX,f=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),y=this.tile.getTop(),S=this.tile.getCollisionGroup(),C=n(S,"objects",[]),E=[],P=0;P<C.length;P++){var A=C[P],R=m+A.x*d,G=y+A.y*f,b=A.width*d,L=A.height*f,w=null;if(A.rectangle)w=h.rectangle(R+b/2,G+L/2,b,L,c);else if(A.ellipse)w=h.circle(R+b/2,G+L/2,b/2,c);else if(A.polygon||A.polyline){var B=A.polygon?A.polygon:A.polyline,N=B.map(function(O){return{x:O.x*d,y:O.y*f}}),Y=s.create(N),U=s.centre(Y);R+=U.x,G+=U.y,w=h.fromVertices(R,G,Y,c)}w&&E.push(w)}if(E.length===1)this.setBody(E[0],c.addToWorld);else if(E.length>1){var W=r(c);W.parts=E,this.setBody(g.create(W),W.addToWorld)}return this},setBody:function(c,d){return d===void 0&&(d=!0),this.body&&this.removeBody(),this.body=c,this.body.gameObject=this,d&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});p.exports=l}),19496:((p,M,t)=>{var h=t(66280),g=t(22562),o=t(53402),a=t(95540),r=t(41598),e={parseBody:function(n,u,s,l){l===void 0&&(l={});for(var c=a(s,"fixtures",[]),d=[],f=0;f<c.length;f++)for(var m=this.parseFixture(c[f]),y=0;y<m.length;y++)d.push(m[y]);var S=o.clone(s,!0);o.extend(S,l,!0),delete S.fixtures,delete S.type;var C=g.create(S);return g.setParts(C,d),g.setPosition(C,{x:n,y:u}),C},parseFixture:function(n){var u=o.extend({},!1,n);delete u.circle,delete u.vertices;var s;if(n.circle){var l=a(n.circle,"x"),c=a(n.circle,"y"),d=a(n.circle,"radius");s=[h.circle(l,c,d,u)]}else n.vertices&&(s=this.parseVertices(n.vertices,u));return s},parseVertices:function(n,u){u===void 0&&(u={});for(var s=[],l=0;l<n.length;l++)r.clockwiseSort(n[l]),s.push(g.create(o.extend({position:r.centre(n[l]),vertices:n[l]},u)));return h.flagCoincidentParts(s)}};p.exports=e}),85791:((p,M,t)=>{var h=t(66280),g=t(22562),o={parseBody:function(a,r,e,n){n===void 0&&(n={});var u,s=e.vertices;if(s.length===1)n.vertices=s[0],u=g.create(n),h.flagCoincidentParts(u.parts);else{for(var l=[],c=0;c<s.length;c++){var d=g.create({vertices:s[c]});l.push(d)}h.flagCoincidentParts(l),n.parts=l,u=g.create(n)}return u.label=e.label,g.setPosition(u,{x:a,y:r}),u}};p.exports=o}),98713:((p,M,t)=>{var h=t(15647),g=t(83419),o=t(69351),a=t(48140),r=t(81388),e=t(1121),n=t(8214),u=t(46975),s=t(53614),l=t(26099),c=t(41598),d=new g({initialize:function(m,y,S){S===void 0&&(S={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=a.create(u(S,C)),this.world.on(e.BEFORE_UPDATE,this.update,this),m.sys.input.on(n.POINTER_DOWN,this.onDown,this),m.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(f){this.pointer||(this.pointer=f,this.camera=f.camera)},onUp:function(f){f===this.pointer&&(this.pointer=null)},getBody:function(f){var m=this.position,y=this.constraint;this.camera.getWorldPoint(f.x,f.y,m);for(var S=o.allBodies(this.world.localWorld),C=0;C<S.length;C++){var E=S[C];if(!E.ignorePointer&&h.contains(E.bounds,m)&&r.canCollide(E.collisionFilter,y.collisionFilter)&&this.hitTestBody(E,m))return this.world.emit(e.DRAG_START,E,this.part,this),!0}return!1},hitTestBody:function(f,m){for(var y=this.constraint,S=f.parts.length,C=S>1?1:0,E=C;E<S;E++){var P=f.parts[E];if(c.contains(P.vertices,m))return y.pointA=m,y.pointB={x:m.x-f.position.x,y:m.y-f.position.y},y.bodyB=f,y.angleB=f.angle,s.set(f,!1),this.part=P,this.body=f,!0}return!1},update:function(){var f=this.pointer,m=this.body;if(!this.active||!f){m&&this.stopDrag();return}if(!f.isDown&&m){this.stopDrag();return}else if(f.isDown){if(!this.camera||!m&&!this.getBody(f))return;m=this.body;var y=this.position,S=this.constraint;this.camera.getWorldPoint(f.x,f.y,y),S.pointA.x=y.x,S.pointA.y=y.y,s.set(m,!1),this.world.emit(e.DRAG,m,this)}},stopDrag:function(){var f=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,f&&this.world.emit(e.DRAG_END,f,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(e.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});p.exports=d}),68243:((p,M,t)=>{var h=t(66280),g=t(22562),o=t(83419),a=t(53402),r=t(69351),e=t(48413),n=t(50792),u=t(1121),s=t(95540),l=t(35154),c=t(22562),d=t(35810),f=t(73834),m=t(4372),y=t(13037),S=t(31725),C=new o({Extends:n,initialize:function(P,A){n.call(this),this.scene=P,this.engine=e.create(A),this.localWorld=this.engine.world;var R=l(A,"gravity",null);R?this.setGravity(R.x,R.y,R.scale):R===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(A,"enabled",!0),this.getDelta=l(A,"getDelta",this.update60Hz);var G=s(A,"runner",{}),b=s(G,"fps",!1);b&&(G.delta=1e3/s(G,"fps",60)),this.runner=y.create(G),this.autoUpdate=l(A,"autoUpdate",!0);var L=l(A,"debug",!1);if(this.drawDebug=typeof L=="object"?!0:L,this.debugGraphic,this.debugConfig={showAxes:s(L,"showAxes",!1),showAngleIndicator:s(L,"showAngleIndicator",!1),angleColor:s(L,"angleColor",15208787),showBroadphase:s(L,"showBroadphase",!1),broadphaseColor:s(L,"broadphaseColor",16757760),showBounds:s(L,"showBounds",!1),boundsColor:s(L,"boundsColor",16777215),showVelocity:s(L,"showVelocity",!1),velocityColor:s(L,"velocityColor",44783),showCollisions:s(L,"showCollisions",!1),collisionColor:s(L,"collisionColor",16094476),showSeparations:s(L,"showSeparations",!1),separationColor:s(L,"separationColor",16753920),showBody:s(L,"showBody",!0),showStaticBody:s(L,"showStaticBody",!0),showInternalEdges:s(L,"showInternalEdges",!1),renderFill:s(L,"renderFill",!1),renderLine:s(L,"renderLine",!0),fillColor:s(L,"fillColor",1075465),fillOpacity:s(L,"fillOpacity",1),lineColor:s(L,"lineColor",2678297),lineOpacity:s(L,"lineOpacity",1),lineThickness:s(L,"lineThickness",1),staticFillColor:s(L,"staticFillColor",857979),staticLineColor:s(L,"staticLineColor",1255396),showSleeping:s(L,"showSleeping",!1),staticBodySleepOpacity:s(L,"staticBodySleepOpacity",.7),sleepFillColor:s(L,"sleepFillColor",4605510),sleepLineColor:s(L,"sleepLineColor",10066585),showSensors:s(L,"showSensors",!0),sensorFillColor:s(L,"sensorFillColor",857979),sensorLineColor:s(L,"sensorLineColor",1255396),showPositions:s(L,"showPositions",!0),positionSize:s(L,"positionSize",4),positionColor:s(L,"positionColor",14697178),showJoint:s(L,"showJoint",!0),jointColor:s(L,"jointColor",14737474),jointLineOpacity:s(L,"jointLineOpacity",1),jointLineThickness:s(L,"jointLineThickness",2),pinSize:s(L,"pinSize",4),pinColor:s(L,"pinColor",4382944),springColor:s(L,"springColor",14697184),anchorColor:s(L,"anchorColor",15724527),anchorSize:s(L,"anchorSize",4),showConvexHulls:s(L,"showConvexHulls",!1),hullColor:s(L,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),s(A,"setBounds",!1)){var w=A.setBounds;if(typeof w=="boolean")this.setBounds();else{var B=s(w,"x",0),N=s(w,"y",0),Y=s(w,"width",P.sys.scale.width),U=s(w,"height",P.sys.scale.height),W=s(w,"thickness",64),O=s(w,"left",!0),V=s(w,"right",!0),X=s(w,"top",!0),z=s(w,"bottom",!0);this.setBounds(B,N,Y,U,W,O,V,X,z)}}},setCompositeRenderStyle:function(E){var P=E.bodies,A=E.constraints,R=E.composites,G,b,L;for(G=0;G<P.length;G++)b=P[G],L=b.render,this.setBodyRenderStyle(b,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(G=0;G<A.length;G++)b=A[G],L=b.render,this.setConstraintRenderStyle(b,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(G=0;G<R.length;G++)b=R[G],this.setCompositeRenderStyle(b);return this},setBodyRenderStyle:function(E,P,A,R,G,b){var L=E.render,w=this.debugConfig;return L?(P==null&&(P=E.isStatic?w.staticLineColor:w.lineColor),A==null&&(A=w.lineOpacity),R==null&&(R=w.lineThickness),G==null&&(G=E.isStatic?w.staticFillColor:w.fillColor),b==null&&(b=w.fillOpacity),P!==!1&&(L.lineColor=P),A!==!1&&(L.lineOpacity=A),R!==!1&&(L.lineThickness=R),G!==!1&&(L.fillColor=G),b!==!1&&(L.fillOpacity=b),this):this},setConstraintRenderStyle:function(E,P,A,R,G,b,L){var w=E.render,B=this.debugConfig;if(!w)return this;if(P==null){var N=w.type;N==="line"?P=B.jointColor:N==="pin"?P=B.pinColor:N==="spring"&&(P=B.springColor)}return A==null&&(A=B.jointLineOpacity),R==null&&(R=B.jointLineThickness),G==null&&(G=B.pinSize),b==null&&(b=B.anchorColor),L==null&&(L=B.anchorSize),P!==!1&&(w.lineColor=P),A!==!1&&(w.lineOpacity=A),R!==!1&&(w.lineThickness=R),G!==!1&&(w.pinSize=G),b!==!1&&(w.anchorColor=b),L!==!1&&(w.anchorSize=L),this},setEventsProxy:function(){var E=this,P=this.engine,A=this.localWorld;this.drawDebug&&(d.on(A,"compositeModified",function(R){E.setCompositeRenderStyle(R)}),d.on(A,"beforeAdd",function(R){for(var G=[].concat(R.object),b=0;b<G.length;b++){var L=G[b],w=L.render;L.type==="body"?E.setBodyRenderStyle(L,w.lineColor,w.lineOpacity,w.lineThickness,w.fillColor,w.fillOpacity):L.type==="composite"?E.setCompositeRenderStyle(L):L.type==="constraint"&&E.setConstraintRenderStyle(L,w.lineColor,w.lineOpacity,w.lineThickness,w.pinSize,w.anchorColor,w.anchorSize)}})),d.on(A,"beforeAdd",function(R){E.emit(u.BEFORE_ADD,R)}),d.on(A,"afterAdd",function(R){E.emit(u.AFTER_ADD,R)}),d.on(A,"beforeRemove",function(R){E.emit(u.BEFORE_REMOVE,R)}),d.on(A,"afterRemove",function(R){E.emit(u.AFTER_REMOVE,R)}),d.on(P,"beforeUpdate",function(R){E.emit(u.BEFORE_UPDATE,R)}),d.on(P,"afterUpdate",function(R){E.emit(u.AFTER_UPDATE,R)}),d.on(P,"collisionStart",function(R){var G=R.pairs,b,L;G.length>0&&G.map(function(w){b=w.bodyA,L=w.bodyB,b.gameObject&&b.gameObject.emit("collide",b,L,w),L.gameObject&&L.gameObject.emit("collide",L,b,w),d.trigger(b,"onCollide",{pair:w}),d.trigger(L,"onCollide",{pair:w}),b.onCollideCallback&&b.onCollideCallback(w),L.onCollideCallback&&L.onCollideCallback(w),b.onCollideWith[L.id]&&b.onCollideWith[L.id](L,w),L.onCollideWith[b.id]&&L.onCollideWith[b.id](b,w)}),E.emit(u.COLLISION_START,R,b,L)}),d.on(P,"collisionActive",function(R){var G=R.pairs,b,L;G.length>0&&G.map(function(w){b=w.bodyA,L=w.bodyB,b.gameObject&&b.gameObject.emit("collideActive",b,L,w),L.gameObject&&L.gameObject.emit("collideActive",L,b,w),d.trigger(b,"onCollideActive",{pair:w}),d.trigger(L,"onCollideActive",{pair:w}),b.onCollideActiveCallback&&b.onCollideActiveCallback(w),L.onCollideActiveCallback&&L.onCollideActiveCallback(w)}),E.emit(u.COLLISION_ACTIVE,R,b,L)}),d.on(P,"collisionEnd",function(R){var G=R.pairs,b,L;G.length>0&&G.map(function(w){b=w.bodyA,L=w.bodyB,b.gameObject&&b.gameObject.emit("collideEnd",b,L,w),L.gameObject&&L.gameObject.emit("collideEnd",L,b,w),d.trigger(b,"onCollideEnd",{pair:w}),d.trigger(L,"onCollideEnd",{pair:w}),b.onCollideEndCallback&&b.onCollideEndCallback(w),L.onCollideEndCallback&&L.onCollideEndCallback(w)}),E.emit(u.COLLISION_END,R,b,L)})},setBounds:function(E,P,A,R,G,b,L,w,B){return E===void 0&&(E=0),P===void 0&&(P=0),A===void 0&&(A=this.scene.sys.scale.width),R===void 0&&(R=this.scene.sys.scale.height),G===void 0&&(G=64),b===void 0&&(b=!0),L===void 0&&(L=!0),w===void 0&&(w=!0),B===void 0&&(B=!0),this.updateWall(b,"left",E-G,P-G,G,R+G*2),this.updateWall(L,"right",E+A,P-G,G,R+G*2),this.updateWall(w,"top",E,P-G,A,G),this.updateWall(B,"bottom",E,P+R,A,G),this},updateWall:function(E,P,A,R,G,b){var L=this.walls[P];E?(L&&m.remove(this.localWorld,L),A+=G/2,R+=b/2,this.walls[P]=this.create(A,R,G,b,{isStatic:!0,friction:0,frictionStatic:0})):(L&&m.remove(this.localWorld,L),this.walls[P]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,P,A){return E===void 0&&(E=0),P===void 0&&(P=1),A===void 0&&(A=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=P,this.localWorld.gravity.scale=A,this},create:function(E,P,A,R,G){var b=h.rectangle(E,P,A,R,G);return m.add(this.localWorld,b),b},add:function(E){return m.add(this.localWorld,E),this},remove:function(E,P){Array.isArray(E)||(E=[E]);for(var A=0;A<E.length;A++){var R=E[A],G=R.body?R.body:R;r.remove(this.localWorld,G,P)}return this},removeConstraint:function(E,P){return r.remove(this.localWorld,E,P),this},convertTilemapLayer:function(E,P){var A=E.layer,R=E.getTilesWithin(0,0,A.width,A.height,{isColliding:!0});return this.convertTiles(R,P),this},convertTiles:function(E,P){if(E.length===0)return this;for(var A=0;A<E.length;A++)new f(this,E[A],P);return this},nextGroup:function(E){return c.nextGroup(E)},nextCategory:function(){return c.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=a.now(),this.emit(u.RESUME),this},update:function(E){if(!(!this.enabled||!this.autoUpdate)){var P=this.engine,A=this.runner,R=a.now(),G=A.delta,b=0,L=E-A.timeLastTick;if((!L||!A.timeLastTick||L>Math.max(y._maxFrameDelta,A.maxFrameTime))&&(L=A.frameDelta||y._frameDeltaFallback),A.frameDeltaSmoothing){A.frameDeltaHistory.push(L),A.frameDeltaHistory=A.frameDeltaHistory.slice(-A.frameDeltaHistorySize);var w=A.frameDeltaHistory.slice(0).sort(),B=A.frameDeltaHistory.slice(w.length*y._smoothingLowerBound,w.length*y._smoothingUpperBound),N=y._mean(B);L=N||L}A.frameDeltaSnapping&&(L=1e3/Math.round(1e3/L)),A.frameDelta=L,A.timeLastTick=E,A.timeBuffer+=A.frameDelta,A.timeBuffer=a.clamp(A.timeBuffer,0,A.frameDelta+G*y._timeBufferMargin),A.lastUpdatesDeferred=0;for(var Y=A.maxUpdates||Math.ceil(A.maxFrameTime/G),U=a.now();G>0&&A.timeBuffer>=G*y._timeBufferMargin;){e.update(P,G),A.timeBuffer-=G,b+=1;var W=a.now()-R,O=a.now()-U,V=W+y._elapsedNextEstimate*O/b;if(b>=Y||V>A.maxFrameTime){A.lastUpdatesDeferred=Math.round(Math.max(0,A.timeBuffer/G-y._timeBufferMargin));break}}}},step:function(E){e.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var P=E.hasOwnProperty("body")?E.body:E;return r.get(this.localWorld,P.id,P.type)!==null},getAllBodies:function(){return r.allBodies(this.localWorld)},getAllConstraints:function(){return r.allConstraints(this.localWorld)},getAllComposites:function(){return r.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var E=this.debugConfig,P=this.engine,A=this.debugGraphic,R=r.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&P.broadphase.controller&&this.renderGrid(P.broadphase,A,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(R,A,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(R),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(R,A,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(R,A,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(P.pairs.list,A,E.separationColor),E.showCollisions&&this.renderCollisions(P.pairs.list,A,E.collisionColor)}},renderGrid:function(E,P,A,R){P.lineStyle(1,A,R);for(var G=a.keys(E.buckets),b=0;b<G.length;b++){var L=G[b];if(!(E.buckets[L].length<2)){var w=L.split(/C|R/);P.strokeRect(parseInt(w[1],10)*E.bucketWidth,parseInt(w[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,P,A){P.lineStyle(1,A,1);for(var R=0;R<E.length;R++){var G=E[R];if(G.isActive){var b=G.collision,L=b.bodyA,w=b.bodyB,B=L.position,N=w.position,Y=b.penetration,U=!L.isStatic&&!w.isStatic?4:1;w.isStatic&&(U=0),P.lineBetween(N.x,N.y,N.x-Y.x*U,N.y-Y.y*U),U=!L.isStatic&&!w.isStatic?4:1,L.isStatic&&(U=0),P.lineBetween(B.x,B.y,B.x-Y.x*U,B.y-Y.y*U)}}return this},renderCollisions:function(E,P,A){P.lineStyle(1,A,.5),P.fillStyle(A,1);var R,G;for(R=0;R<E.length;R++)if(G=E[R],!!G.isActive)for(var b=0;b<G.contactCount;b++){var L=G.contacts[b],w=L.vertex;w&&P.fillRect(w.x-2,w.y-2,5,5)}for(R=0;R<E.length;R++)if(G=E[R],!!G.isActive){var B=G.collision,N=G.contacts;if(G.contactCount>0){var Y=N[0].vertex.x,U=N[0].vertex.y;G.contactCount===2&&(Y=(N[0].vertex.x+N[1].vertex.x)/2,U=(N[0].vertex.y+N[1].vertex.y)/2),B.bodyB===B.supports[0].body||B.bodyA.isStatic?P.lineBetween(Y-B.normal.x*8,U-B.normal.y*8,Y,U):P.lineBetween(Y+B.normal.x*8,U+B.normal.y*8,Y,U)}}return this},renderBodyBounds:function(E,P,A,R){P.lineStyle(1,A,R);for(var G=0;G<E.length;G++){var b=E[G];if(b.render.visible){var L=b.bounds;if(L)P.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var w=b.parts,B=w.length>1?1:0;B<w.length;B++){var N=w[B];P.strokeRect(N.bounds.min.x,N.bounds.min.y,N.bounds.max.x-N.bounds.min.x,N.bounds.max.y-N.bounds.min.y)}}}return this},renderBodyAxes:function(E,P,A,R,G){P.lineStyle(1,R,G);for(var b=0;b<E.length;b++){var L=E[b],w=L.parts;if(L.render.visible){var B,N,Y;if(A)for(N=w.length>1?1:0;N<w.length;N++)for(B=w[N],Y=0;Y<B.axes.length;Y++){var U=B.axes[Y];P.lineBetween(B.position.x,B.position.y,B.position.x+U.x*20,B.position.y+U.y*20)}else for(N=w.length>1?1:0;N<w.length;N++)for(B=w[N],Y=0;Y<B.axes.length;Y++)P.lineBetween(B.position.x,B.position.y,(B.vertices[0].x+B.vertices[B.vertices.length-1].x)/2,(B.vertices[0].y+B.vertices[B.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,P,A,R,G){P.lineStyle(G,A,R);for(var b=0;b<E.length;b++){var L=E[b];L.render.visible&&P.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(E){for(var P=this.debugGraphic,A=this.debugConfig,R=A.showBody,G=A.showStaticBody,b=A.showSleeping,L=A.showInternalEdges,w=A.showConvexHulls,B=A.renderFill,N=A.renderLine,Y=A.staticBodySleepOpacity,U=A.sleepFillColor,W=A.sleepLineColor,O=A.hullColor,V=0;V<E.length;V++){var X=E[V];if(X.render.visible&&!(!G&&X.isStatic||!R&&!X.isStatic)){var z=X.render.lineColor,I=X.render.lineOpacity,Z=X.render.lineThickness,J=X.render.fillColor,k=X.render.fillOpacity;b&&X.isSleeping&&(X.isStatic?(I*=Y,k*=Y):(z=W,J=U)),B||(J=null),N||(z=null),this.renderBody(X,P,L,z,I,Z,J,k);var j=X.parts.length;w&&j>1&&this.renderConvexHull(X,P,O,Z)}}},renderBody:function(E,P,A,R,G,b,L,w){R===void 0&&(R=null),G===void 0&&(G=null),b===void 0&&(b=1),L===void 0&&(L=null),w===void 0&&(w=null);for(var B=this.debugConfig,N=B.sensorFillColor,Y=B.sensorLineColor,U=E.parts,W=U.length,O=W>1?1:0;O<W;O++){var V=U[O],X=V.render,z=X.opacity;if(!(!X.visible||z===0||V.isSensor&&!B.showSensors)){var I=V.circleRadius;if(P.beginPath(),V.isSensor?(L!==null&&P.fillStyle(N,w*z),R!==null&&P.lineStyle(b,Y,G*z)):(L!==null&&P.fillStyle(L,w*z),R!==null&&P.lineStyle(b,R,G*z)),I)P.arc(V.position.x,V.position.y,I,0,2*Math.PI);else{var Z=V.vertices,J=Z.length;P.moveTo(Z[0].x,Z[0].y);for(var k=1;k<J;k++){var j=Z[k];if(!Z[k-1].isInternal||A?P.lineTo(j.x,j.y):P.moveTo(j.x,j.y),k<J&&j.isInternal&&!A){var tt=(k+1)%J;P.moveTo(Z[tt].x,Z[tt].y)}}P.closePath()}L!==null&&P.fillPath(),R!==null&&P.strokePath()}}if(B.showPositions&&!E.isStatic){var ht=E.position.x,ot=E.position.y,st=Math.ceil(B.positionSize/2);P.fillStyle(B.positionColor,1),P.fillRect(ht-st,ot-st,B.positionSize,B.positionSize)}return this},renderConvexHull:function(E,P,A,R){R===void 0&&(R=1);var G=E.parts,b=G.length;if(b>1){var L=E.vertices;P.lineStyle(R,A),P.beginPath(),P.moveTo(L[0].x,L[0].y);for(var w=1;w<L.length;w++)P.lineTo(L[w].x,L[w].y);P.lineTo(L[0].x,L[0].y),P.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,P=r.allConstraints(this.localWorld),A=0;A<P.length;A++){var R=P[A].render,G=R.lineColor,b=R.lineOpacity,L=R.lineThickness,w=R.pinSize,B=R.anchorColor,N=R.anchorSize;this.renderConstraint(P[A],E,G,b,L,w,B,N)}},renderConstraint:function(E,P,A,R,G,b,L,w){var B=E.render;if(!B.visible||!E.pointA||!E.pointB)return this;P.lineStyle(G,A,R);var N=E.bodyA,Y=E.bodyB,U,W;if(N?U=S.add(N.position,E.pointA):U=E.pointA,B.type==="pin")P.strokeCircle(U.x,U.y,b);else{if(Y?W=S.add(Y.position,E.pointB):W=E.pointB,P.beginPath(),P.moveTo(U.x,U.y),B.type==="spring")for(var O=S.sub(W,U),V=S.perp(S.normalise(O)),X=Math.ceil(a.clamp(E.length/5,12,20)),z,I=1;I<X;I+=1)z=I%2===0?1:-1,P.lineTo(U.x+O.x*(I/X)+V.x*z*4,U.y+O.y*(I/X)+V.y*z*4);P.lineTo(W.x,W.y)}return P.strokePath(),B.anchors&&w>0&&(P.fillStyle(L),P.fillCircle(U.x,U.y,w),P.fillCircle(W.x,W.y,w)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),e.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});p.exports=C}),70410:(p=>{var M={setBounce:function(t){return this.body.restitution=t,this}};p.exports=M}),66968:(p=>{var M={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var h=0;if(!Array.isArray(t))h=t;else for(var g=0;g<t.length;g++)h|=t[g];return this.body.collisionFilter.mask=h,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,h){Array.isArray(t)||(t=[t]);for(var g=0;g<t.length;g++){var o=t[g].hasOwnProperty("body")?t[g].body:t[g];this.body.setOnCollideWith(o,h)}return this}};p.exports=M}),51607:((p,M,t)=>{var h=t(22562),g={applyForce:function(o){return this._tempVec2.set(this.body.position.x,this.body.position.y),h.applyForce(this.body,this._tempVec2,o),this},applyForceFrom:function(o,a){return h.applyForce(this.body,o,a),this},thrust:function(o){var a=this.body.angle;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(o){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(o){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(o){var a=this.body.angle-Math.PI;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};p.exports=g}),5436:(p=>{var M={setFriction:function(t,h,g){return this.body.friction=t,h!==void 0&&(this.body.frictionAir=h),g!==void 0&&(this.body.frictionStatic=g),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};p.exports=M}),39858:(p=>{var M={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};p.exports=M}),37302:((p,M,t)=>{var h=t(22562),g=t(26099),o={setMass:function(a){return h.setMass(this.body,a),this},setDensity:function(a){return h.setDensity(this.body,a),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};p.exports=o}),39132:(p=>{var M={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};p.exports=M}),57772:((p,M,t)=>{var h=t(66280),g=t(22562),o=t(43855),a=t(95540),r=t(19496),e=t(85791),n=t(41598),u={setRectangle:function(s,l,c){return this.setBody({type:"rectangle",width:s,height:l},c)},setCircle:function(s,l){return this.setBody({type:"circle",radius:s},l)},setPolygon:function(s,l,c){return this.setBody({type:"polygon",sides:l,radius:s},c)},setTrapezoid:function(s,l,c,d){return this.setBody({type:"trapezoid",width:s,height:l,slope:c},d)},setExistingBody:function(s,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=s;for(var c=0;c<s.parts.length;c++)s.parts[c].gameObject=this;var d=this;if(s.destroy=function(){d.world.remove(d.body,!0),d.body.gameObject=null},l&&(this.world.has(s)&&this.world.remove(s,!0),this.world.add(s)),this._originComponent){var f=s.render.sprite.xOffset,m=s.render.sprite.yOffset,y=s.centerOfMass.x,S=s.centerOfMass.y;if(o(y,.5)&&o(S,.5))this.setOrigin(f+.5,m+.5);else{var C=s.centerOffset.x,E=s.centerOffset.y;this.setOrigin(f+C/this.displayWidth,m+E/this.displayHeight)}}return this},setBody:function(s,l){if(!s)return this;var c;typeof s=="string"&&(s={type:s});var d=a(s,"type","rectangle"),f=a(s,"x",this._tempVec2.x),m=a(s,"y",this._tempVec2.y),y=a(s,"width",this.width),S=a(s,"height",this.height);switch(d){case"rectangle":c=h.rectangle(f,m,y,S,l);break;case"circle":var C=a(s,"radius",Math.max(y,S)/2),E=a(s,"maxSides",25);c=h.circle(f,m,C,l,E);break;case"trapezoid":var P=a(s,"slope",.5);c=h.trapezoid(f,m,y,S,P,l);break;case"polygon":var A=a(s,"sides",5),R=a(s,"radius",Math.max(y,S)/2);c=h.polygon(f,m,A,R,l);break;case"fromVertices":case"fromVerts":var G=a(s,"verts",null);if(G)if(typeof G=="string"&&(G=n.fromPath(G)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,G),c=this.body;else{var b=a(s,"flagInternal",!1),L=a(s,"removeCollinear",.01),w=a(s,"minimumArea",10);c=h.fromVertices(f,m,G,l,b,L,w)}break;case"fromPhysicsEditor":c=r.parseBody(f,m,s,l);break;case"fromPhysicsTracer":c=e.parseBody(f,m,s,l);break}return c&&this.setExistingBody(c,s.addToWorld),this}};p.exports=u}),38083:((p,M,t)=>{var h=t(1121),g=t(53614),o=t(35810),a={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(r){return r===void 0&&(r=60),this.body.sleepThreshold=r,this},setSleepEvents:function(r,e){return this.setSleepStartEvent(r),this.setSleepEndEvent(e),this},setSleepStartEvent:function(r){if(r){var e=this.world;o.on(this.body,"sleepStart",function(n){e.emit(h.SLEEP_START,n,this)})}else o.off(this.body,"sleepStart");return this},setSleepEndEvent:function(r){if(r){var e=this.world;o.on(this.body,"sleepEnd",function(n){e.emit(h.SLEEP_END,n,this)})}else o.off(this.body,"sleepEnd");return this}};p.exports=a}),90556:((p,M,t)=>{var h=t(22562),g={setStatic:function(o){return h.setStatic(this.body,o),this},isStatic:function(){return this.body.isStatic}};p.exports=g}),85436:((p,M,t)=>{var h=t(22562),g=t(36383),o=t(86554),a=t(30954),r=4,e={x:{get:function(){return this.body.position.x},set:function(n){this._tempVec2.set(n,this.y),h.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(n){this._tempVec2.set(this.x,n),h.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(n){this.setScale(n,n)}},scaleX:{get:function(){return this._scaleX},set:function(n){var u=1/this._scaleX,s=1/this._scaleY;this._scaleX=n,this._scaleX===0?this.renderFlags&=~r:this.renderFlags|=r,h.scale(this.body,u,s),h.scale(this.body,n,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(n){var u=1/this._scaleX,s=1/this._scaleY;this._scaleY=n,this._scaleY===0?this.renderFlags&=~r:this.renderFlags|=r,h.scale(this.body,u,s),h.scale(this.body,this._scaleX,n)}},angle:{get:function(){return a(this.body.angle*g.RAD_TO_DEG)},set:function(n){this.rotation=a(n)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(n){this._rotation=o(n),h.setAngle(this.body,this._rotation)}},setPosition:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this._tempVec2.set(n,u),h.setPosition(this.body,this._tempVec2),this},setRotation:function(n){return n===void 0&&(n=0),this._rotation=o(n),h.setAngle(this.body,n),this},setFixedRotation:function(){return h.setInertia(this.body,1/0),this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,h.setAngle(this.body,this.rotation),this},setScale:function(n,u,s){n===void 0&&(n=1),u===void 0&&(u=n);var l=1/this._scaleX,c=1/this._scaleY;return this._scaleX=n,this._scaleY=u,h.scale(this.body,l,c,s),h.scale(this.body,n,u,s),this}};p.exports=e}),42081:((p,M,t)=>{var h=t(22562),g={setVelocityX:function(o){return this._tempVec2.set(o,this.body.velocity.y),h.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(o){return this._tempVec2.set(this.body.velocity.x,o),h.setVelocity(this.body,this._tempVec2),this},setVelocity:function(o,a){return this._tempVec2.set(o,a),h.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return h.getVelocity(this.body)},setAngularVelocity:function(o){return h.setAngularVelocity(this.body,o),this},getAngularVelocity:function(){return h.getAngularVelocity(this.body)},setAngularSpeed:function(o){return h.setAngularSpeed(this.body,o),this},getAngularSpeed:function(){return h.getAngularSpeed(this.body)}};p.exports=g}),31884:((p,M,t)=>{p.exports={Bounce:t(70410),Collision:t(66968),Force:t(51607),Friction:t(5436),Gravity:t(39858),Mass:t(37302),Sensor:t(39132),SetBody:t(57772),Sleep:t(38083),Static:t(90556),Transform:t(85436),Velocity:t(42081)}}),85608:(p=>{p.exports="afteradd"}),1213:(p=>{p.exports="afterremove"}),25968:(p=>{p.exports="afterupdate"}),67205:(p=>{p.exports="beforeadd"}),39438:(p=>{p.exports="beforeremove"}),44823:(p=>{p.exports="beforeupdate"}),92593:(p=>{p.exports="collisionactive"}),60128:(p=>{p.exports="collisionend"}),76861:(p=>{p.exports="collisionstart"}),92362:(p=>{p.exports="dragend"}),76408:(p=>{p.exports="drag"}),93971:(p=>{p.exports="dragstart"}),5656:(p=>{p.exports="pause"}),47861:(p=>{p.exports="resume"}),79099:(p=>{p.exports="sleepend"}),35906:(p=>{p.exports="sleepstart"}),1121:((p,M,t)=>{p.exports={AFTER_ADD:t(85608),AFTER_REMOVE:t(1213),AFTER_UPDATE:t(25968),BEFORE_ADD:t(67205),BEFORE_REMOVE:t(39438),BEFORE_UPDATE:t(44823),COLLISION_ACTIVE:t(92593),COLLISION_END:t(60128),COLLISION_START:t(76861),DRAG_END:t(92362),DRAG:t(76408),DRAG_START:t(93971),PAUSE:t(5656),RESUME:t(47861),SLEEP_END:t(79099),SLEEP_START:t(35906)}}),3875:((p,M,t)=>{p.exports={BodyBounds:t(68174),Components:t(31884),Events:t(1121),Factory:t(28137),MatterGameObject:t(75803),Image:t(23181),Matter:t(19933),MatterPhysics:t(42045),PolyDecomp:t(55973),Sprite:t(34803),TileBody:t(73834),PhysicsEditorParser:t(19496),PhysicsJSONParser:t(85791),PointerConstraint:t(98713),World:t(68243)}}),22562:((p,M,t)=>{var h={};p.exports=h;var g=t(41598),o=t(31725),a=t(53614),r=t(53402),e=t(15647),n=t(66615);(function(){h._timeCorrection=!0,h._inertiaScale=4,h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,h._baseDelta=16.666666666666668,h.create=function(s){var l={id:r.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:s.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!s.hasOwnProperty("position")&&s.hasOwnProperty("vertices")?s.position=g.centre(s.vertices):s.hasOwnProperty("vertices")||(l.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var c=r.extend(l,s);return u(c,s),c.setOnCollideWith=function(d,f){return f?this.onCollideWith[d.id]=f:delete this.onCollideWith[d.id],this},c},h.nextGroup=function(s){return s?h._nextNonCollidingGroupId--:h._nextCollidingGroupId++},h.nextCategory=function(){return h._nextCategory=h._nextCategory<<1,h._nextCategory};var u=function(s,l){if(l=l||{},h.set(s,{bounds:s.bounds||e.create(s.vertices),positionPrev:s.positionPrev||o.clone(s.position),anglePrev:s.anglePrev||s.angle,vertices:s.vertices,parts:s.parts||[s],isStatic:s.isStatic,isSleeping:s.isSleeping,parent:s.parent||s}),g.rotate(s.vertices,s.angle,s.position),n.rotate(s.axes,s.angle),e.update(s.bounds,s.vertices,s.velocity),h.set(s,{axes:l.axes||s.axes,area:l.area||s.area,mass:l.mass||s.mass,inertia:l.inertia||s.inertia}),s.parts.length===1){var c=s.bounds,d=s.centerOfMass,f=s.centerOffset,m=c.max.x-c.min.x,y=c.max.y-c.min.y;d.x=-(c.min.x-s.position.x)/m,d.y=-(c.min.y-s.position.y)/y,f.x=m*d.x,f.y=y*d.y}};h.set=function(s,l,c){var d;typeof l=="string"&&(d=l,l={},l[d]=c);for(d in l)if(Object.prototype.hasOwnProperty.call(l,d))switch(c=l[d],d){case"isStatic":h.setStatic(s,c);break;case"isSleeping":a.set(s,c);break;case"mass":h.setMass(s,c);break;case"density":h.setDensity(s,c);break;case"inertia":h.setInertia(s,c);break;case"vertices":h.setVertices(s,c);break;case"position":h.setPosition(s,c);break;case"angle":h.setAngle(s,c);break;case"velocity":h.setVelocity(s,c);break;case"angularVelocity":h.setAngularVelocity(s,c);break;case"speed":h.setSpeed(s,c);break;case"angularSpeed":h.setAngularSpeed(s,c);break;case"parts":h.setParts(s,c);break;case"centre":h.setCentre(s,c);break;default:s[d]=c}},h.setStatic=function(s,l){for(var c=0;c<s.parts.length;c++){var d=s.parts[c];l?(d.isStatic||(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia}),d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null),d.isStatic=l}},h.setMass=function(s,l){var c=s.inertia/(s.mass/6);s.inertia=c*(l/6),s.inverseInertia=1/s.inertia,s.mass=l,s.inverseMass=1/s.mass,s.density=s.mass/s.area},h.setDensity=function(s,l){h.setMass(s,l*s.area),s.density=l},h.setInertia=function(s,l){s.inertia=l,s.inverseInertia=1/s.inertia},h.setVertices=function(s,l){l[0].body===s?s.vertices=l:s.vertices=g.create(l,s),s.axes=n.fromVertices(s.vertices),s.area=g.area(s.vertices),h.setMass(s,s.density*s.area);var c=g.centre(s.vertices);g.translate(s.vertices,c,-1),h.setInertia(s,h._inertiaScale*g.inertia(s.vertices,s.mass)),g.translate(s.vertices,s.position),e.update(s.bounds,s.vertices,s.velocity)},h.setParts=function(s,l,c){var d;for(l=l.slice(0),s.parts.length=0,s.parts.push(s),s.parent=s,d=0;d<l.length;d++){var f=l[d];f!==s&&(f.parent=s,s.parts.push(f))}if(s.parts.length!==1){if(c=typeof c<"u"?c:!0,c){var m=[];for(d=0;d<l.length;d++)m=m.concat(l[d].vertices);g.clockwiseSort(m);var y=g.hull(m),S=g.centre(y);h.setVertices(s,y),g.translate(s.vertices,S)}var C=h._totalProperties(s),E=C.centre.x,P=C.centre.y,A=s.bounds,R=s.centerOfMass,G=s.centerOffset;e.update(A,s.vertices,s.velocity),R.x=-(A.min.x-E)/(A.max.x-A.min.x),R.y=-(A.min.y-P)/(A.max.y-A.min.y),G.x=E,G.y=P,s.area=C.area,s.parent=s,s.position.x=E,s.position.y=P,s.positionPrev.x=E,s.positionPrev.y=P,h.setMass(s,C.mass),h.setInertia(s,C.inertia),h.setPosition(s,C.centre)}},h.setCentre=function(s,l,c){c?(s.positionPrev.x+=l.x,s.positionPrev.y+=l.y,s.position.x+=l.x,s.position.y+=l.y):(s.positionPrev.x=l.x-(s.position.x-s.positionPrev.x),s.positionPrev.y=l.y-(s.position.y-s.positionPrev.y),s.position.x=l.x,s.position.y=l.y)},h.setPosition=function(s,l,c){var d=o.sub(l,s.position);c?(s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.velocity.x=d.x,s.velocity.y=d.y,s.speed=o.magnitude(d)):(s.positionPrev.x+=d.x,s.positionPrev.y+=d.y);for(var f=0;f<s.parts.length;f++){var m=s.parts[f];m.position.x+=d.x,m.position.y+=d.y,g.translate(m.vertices,d),e.update(m.bounds,m.vertices,s.velocity)}},h.setAngle=function(s,l,c){var d=l-s.angle;c?(s.anglePrev=s.angle,s.angularVelocity=d,s.angularSpeed=Math.abs(d)):s.anglePrev+=d;for(var f=0;f<s.parts.length;f++){var m=s.parts[f];m.angle+=d,g.rotate(m.vertices,d,s.position),n.rotate(m.axes,d),e.update(m.bounds,m.vertices,s.velocity),f>0&&o.rotateAbout(m.position,d,s.position,m.position)}},h.setVelocity=function(s,l){var c=s.deltaTime/h._baseDelta;s.positionPrev.x=s.position.x-l.x*c,s.positionPrev.y=s.position.y-l.y*c,s.velocity.x=(s.position.x-s.positionPrev.x)/c,s.velocity.y=(s.position.y-s.positionPrev.y)/c,s.speed=o.magnitude(s.velocity)},h.getVelocity=function(s){var l=h._baseDelta/s.deltaTime;return{x:(s.position.x-s.positionPrev.x)*l,y:(s.position.y-s.positionPrev.y)*l}},h.getSpeed=function(s){return o.magnitude(h.getVelocity(s))},h.setSpeed=function(s,l){h.setVelocity(s,o.mult(o.normalise(h.getVelocity(s)),l))},h.setAngularVelocity=function(s,l){var c=s.deltaTime/h._baseDelta;s.anglePrev=s.angle-l*c,s.angularVelocity=(s.angle-s.anglePrev)/c,s.angularSpeed=Math.abs(s.angularVelocity)},h.getAngularVelocity=function(s){return(s.angle-s.anglePrev)*h._baseDelta/s.deltaTime},h.getAngularSpeed=function(s){return Math.abs(h.getAngularVelocity(s))},h.setAngularSpeed=function(s,l){h.setAngularVelocity(s,r.sign(h.getAngularVelocity(s))*l)},h.translate=function(s,l,c){h.setPosition(s,o.add(s.position,l),c)},h.rotate=function(s,l,c,d){if(!c)h.setAngle(s,s.angle+l,d);else{var f=Math.cos(l),m=Math.sin(l),y=s.position.x-c.x,S=s.position.y-c.y;h.setPosition(s,{x:c.x+(y*f-S*m),y:c.y+(y*m+S*f)},d),h.setAngle(s,s.angle+l,d)}},h.scale=function(s,l,c,d){var f=0,m=0;d=d||s.position;for(var y=s.inertia===1/0,S=0;S<s.parts.length;S++){var C=s.parts[S];C.scale.x=l,C.scale.y=c,g.scale(C.vertices,l,c,d),C.axes=n.fromVertices(C.vertices),C.area=g.area(C.vertices),h.setMass(C,s.density*C.area),g.translate(C.vertices,{x:-C.position.x,y:-C.position.y}),h.setInertia(C,h._inertiaScale*g.inertia(C.vertices,C.mass)),g.translate(C.vertices,{x:C.position.x,y:C.position.y}),S>0&&(f+=C.area,m+=C.inertia),C.position.x=d.x+(C.position.x-d.x)*l,C.position.y=d.y+(C.position.y-d.y)*c,e.update(C.bounds,C.vertices,s.velocity)}s.parts.length>1&&(s.area=f,s.isStatic||(h.setMass(s,s.density*f),h.setInertia(s,m))),s.circleRadius&&(l===c?s.circleRadius*=l:s.circleRadius=null),y&&h.setInertia(s,1/0)},h.update=function(s,l){l=(typeof l<"u"?l:16.666666666666668)*s.timeScale;var c=l*l,d=h._timeCorrection?l/(s.deltaTime||l):1,f=1-s.frictionAir*(l/r._baseDelta),m=(s.position.x-s.positionPrev.x)*d,y=(s.position.y-s.positionPrev.y)*d;s.velocity.x=m*f+s.force.x/s.mass*c,s.velocity.y=y*f+s.force.y/s.mass*c,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.position.x+=s.velocity.x,s.position.y+=s.velocity.y,s.deltaTime=l,s.angularVelocity=(s.angle-s.anglePrev)*f*d+s.torque/s.inertia*c,s.anglePrev=s.angle,s.angle+=s.angularVelocity,s.speed=o.magnitude(s.velocity),s.angularSpeed=Math.abs(s.angularVelocity);for(var S=0;S<s.parts.length;S++){var C=s.parts[S];g.translate(C.vertices,s.velocity),S>0&&(C.position.x+=s.velocity.x,C.position.y+=s.velocity.y),s.angularVelocity!==0&&(g.rotate(C.vertices,s.angularVelocity,s.position),n.rotate(C.axes,s.angularVelocity),S>0&&o.rotateAbout(C.position,s.angularVelocity,s.position,C.position)),e.update(C.bounds,C.vertices,s.velocity)}},h.updateVelocities=function(s){var l=h._baseDelta/s.deltaTime,c=s.velocity;c.x=(s.position.x-s.positionPrev.x)*l,c.y=(s.position.y-s.positionPrev.y)*l,s.speed=Math.sqrt(c.x*c.x+c.y*c.y),s.angularVelocity=(s.angle-s.anglePrev)*l,s.angularSpeed=Math.abs(s.angularVelocity)},h.applyForce=function(s,l,c){var d={x:l.x-s.position.x,y:l.y-s.position.y};s.force.x+=c.x,s.force.y+=c.y,s.torque+=d.x*c.y-d.y*c.x},h._totalProperties=function(s){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=s.parts.length===1?0:1;c<s.parts.length;c++){var d=s.parts[c],f=d.mass!==1/0?d.mass:1;l.mass+=f,l.area+=d.area,l.inertia+=d.inertia,l.centre=o.add(l.centre,o.mult(d.position,f))}return l.centre=o.div(l.centre,l.mass),l},h.wrap=function(s,l){var c=e.wrap(s.bounds,l);return c&&h.translate(s,c),c}})()}),69351:((p,M,t)=>{var h={};p.exports=h;var g=t(35810),o=t(53402),a=t(15647),r=t(22562);(function(){h.create=function(e){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},h.setModified=function(e,n,u,s){if(g.trigger(e,"compositeModified",e),e.isModified=n,n&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),u&&e.parent&&h.setModified(e.parent,n,u,s),s)for(var l=0;l<e.composites.length;l++){var c=e.composites[l];h.setModified(c,n,u,s)}},h.add=function(e,n){var u=[].concat(n);g.trigger(e,"beforeAdd",{object:n});for(var s=0;s<u.length;s++){var l=u[s];switch(l.type){case"body":if(l.parent!==l){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}h.addBody(e,l);break;case"constraint":h.addConstraint(e,l);break;case"composite":h.addComposite(e,l);break;case"mouseConstraint":h.addConstraint(e,l.constraint);break}}return g.trigger(e,"afterAdd",{object:n}),e},h.remove=function(e,n,u){var s=[].concat(n);g.trigger(e,"beforeRemove",{object:n});for(var l=0;l<s.length;l++){var c=s[l];switch(c.type){case"body":h.removeBody(e,c,u);break;case"constraint":h.removeConstraint(e,c,u);break;case"composite":h.removeComposite(e,c,u);break;case"mouseConstraint":h.removeConstraint(e,c.constraint);break}}return g.trigger(e,"afterRemove",{object:n}),e},h.addComposite=function(e,n){return e.composites.push(n),n.parent=e,h.setModified(e,!0,!0,!1),e},h.removeComposite=function(e,n,u){var s=o.indexOf(e.composites,n);if(s!==-1){var l=h.allBodies(n);h.removeCompositeAt(e,s);for(var c=0;c<l.length;c++)l[c].sleepCounter=0}if(u)for(var c=0;c<e.composites.length;c++)h.removeComposite(e.composites[c],n,!0);return e},h.removeCompositeAt=function(e,n){return e.composites.splice(n,1),h.setModified(e,!0,!0,!1),e},h.addBody=function(e,n){return e.bodies.push(n),h.setModified(e,!0,!0,!1),e},h.removeBody=function(e,n,u){var s=o.indexOf(e.bodies,n);if(s!==-1&&(h.removeBodyAt(e,s),n.sleepCounter=0),u)for(var l=0;l<e.composites.length;l++)h.removeBody(e.composites[l],n,!0);return e},h.removeBodyAt=function(e,n){return e.bodies.splice(n,1),h.setModified(e,!0,!0,!1),e},h.addConstraint=function(e,n){return e.constraints.push(n),h.setModified(e,!0,!0,!1),e},h.removeConstraint=function(e,n,u){var s=o.indexOf(e.constraints,n);if(s!==-1&&h.removeConstraintAt(e,s),u)for(var l=0;l<e.composites.length;l++)h.removeConstraint(e.composites[l],n,!0);return e},h.removeConstraintAt=function(e,n){return e.constraints.splice(n,1),h.setModified(e,!0,!0,!1),e},h.clear=function(e,n,u){if(u)for(var s=0;s<e.composites.length;s++)h.clear(e.composites[s],n,!0);return n?e.bodies=e.bodies.filter(function(l){return l.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,h.setModified(e,!0,!0,!1),e},h.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var n=[].concat(e.bodies),u=0;u<e.composites.length;u++)n=n.concat(h.allBodies(e.composites[u]));return e.cache&&(e.cache.allBodies=n),n},h.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var n=[].concat(e.constraints),u=0;u<e.composites.length;u++)n=n.concat(h.allConstraints(e.composites[u]));return e.cache&&(e.cache.allConstraints=n),n},h.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var n=[].concat(e.composites),u=0;u<e.composites.length;u++)n=n.concat(h.allComposites(e.composites[u]));return e.cache&&(e.cache.allComposites=n),n},h.get=function(e,n,u){var s,l;switch(u){case"body":s=h.allBodies(e);break;case"constraint":s=h.allConstraints(e);break;case"composite":s=h.allComposites(e).concat(e);break}return s?(l=s.filter(function(c){return c.id.toString()===n.toString()}),l.length===0?null:l[0]):null},h.move=function(e,n,u){return h.remove(e,n),h.add(u,n),e},h.rebase=function(e){for(var n=h.allBodies(e).concat(h.allConstraints(e)).concat(h.allComposites(e)),u=0;u<n.length;u++)n[u].id=o.nextId();return e},h.translate=function(e,n,u){for(var s=u?h.allBodies(e):e.bodies,l=0;l<s.length;l++)r.translate(s[l],n);return e},h.rotate=function(e,n,u,s){for(var l=Math.cos(n),c=Math.sin(n),d=s?h.allBodies(e):e.bodies,f=0;f<d.length;f++){var m=d[f],y=m.position.x-u.x,S=m.position.y-u.y;r.setPosition(m,{x:u.x+(y*l-S*c),y:u.y+(y*c+S*l)}),r.rotate(m,n)}return e},h.scale=function(e,n,u,s,l){for(var c=l?h.allBodies(e):e.bodies,d=0;d<c.length;d++){var f=c[d],m=f.position.x-s.x,y=f.position.y-s.y;r.setPosition(f,{x:s.x+m*n,y:s.y+y*u}),r.scale(f,n,u)}return e},h.bounds=function(e){for(var n=h.allBodies(e),u=[],s=0;s<n.length;s+=1){var l=n[s];u.push(l.bounds.min,l.bounds.max)}return a.create(u)},h.wrap=function(e,n){var u=a.wrap(h.bounds(e),n);return u&&h.translate(e,u),u}})()}),4372:((p,M,t)=>{var h={};p.exports=h;var g=t(69351);(function(){h.create=g.create,h.add=g.add,h.remove=g.remove,h.clear=g.clear,h.addComposite=g.addComposite,h.addBody=g.addBody,h.addConstraint=g.addConstraint})()}),52284:((p,M,t)=>{var h={};p.exports=h;var g=t(41598),o=t(4506);(function(){var a=[],r={overlap:0,axis:null},e={overlap:0,axis:null};h.create=function(n,u){return{pair:null,collided:!1,bodyA:n,bodyB:u,parentA:n.parent,parentB:u.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},h.collides=function(n,u,s){if(h._overlapAxes(r,n.vertices,u.vertices,n.axes),r.overlap<=0||(h._overlapAxes(e,u.vertices,n.vertices,u.axes),e.overlap<=0))return null;var l=s&&s.table[o.id(n,u)],c;l?c=l.collision:(c=h.create(n,u),c.collided=!0,c.bodyA=n.id<u.id?n:u,c.bodyB=n.id<u.id?u:n,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent),n=c.bodyA,u=c.bodyB;var d;r.overlap<e.overlap?d=r:d=e;var f=c.normal,m=c.tangent,y=c.penetration,S=c.supports,C=d.overlap,E=d.axis,P=E.x,A=E.y,R=u.position.x-n.position.x,G=u.position.y-n.position.y;P*R+A*G>=0&&(P=-P,A=-A),f.x=P,f.y=A,m.x=-A,m.y=P,y.x=P*C,y.y=A*C,c.depth=C;var b=h._findSupports(n,u,f,1),L=0;if(g.contains(n.vertices,b[0])&&(S[L++]=b[0]),g.contains(n.vertices,b[1])&&(S[L++]=b[1]),L<2){var w=h._findSupports(u,n,f,-1);g.contains(u.vertices,w[0])&&(S[L++]=w[0]),L<2&&g.contains(u.vertices,w[1])&&(S[L++]=w[1])}return L===0&&(S[L++]=b[0]),c.supportCount=L,c},h._overlapAxes=function(n,u,s,l){var c=u.length,d=s.length,f=u[0].x,m=u[0].y,y=s[0].x,S=s[0].y,C=l.length,E=Number.MAX_VALUE,P=0,A,R,G,b,L,w;for(L=0;L<C;L++){var B=l[L],N=B.x,Y=B.y,U=f*N+m*Y,W=y*N+S*Y,O=U,V=W;for(w=1;w<c;w+=1)b=u[w].x*N+u[w].y*Y,b>O?O=b:b<U&&(U=b);for(w=1;w<d;w+=1)b=s[w].x*N+s[w].y*Y,b>V?V=b:b<W&&(W=b);if(R=O-W,G=V-U,A=R<G?R:G,A<E&&(E=A,P=L,A<=0))break}n.axis=l[P],n.overlap=E},h._findSupports=function(n,u,s,l){var c=u.vertices,d=c.length,f=n.position.x,m=n.position.y,y=s.x*l,S=s.y*l,C=c[0],E=C,P=y*(f-E.x)+S*(m-E.y),A,R,G;for(G=1;G<d;G+=1)E=c[G],R=y*(f-E.x)+S*(m-E.y),R<P&&(P=R,C=E);return A=c[(d+C.index-1)%d],P=y*(f-A.x)+S*(m-A.y),E=c[(C.index+1)%d],y*(f-E.x)+S*(m-E.y)<P?(a[0]=C,a[1]=E,a):(a[0]=C,a[1]=A,a)}})()}),43424:(p=>{var M={};p.exports=M,(function(){M.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}})()}),81388:((p,M,t)=>{var h={};p.exports=h;var g=t(53402),o=t(52284);(function(){h.create=function(a){var r={bodies:[],collisions:[],pairs:null};return g.extend(r,a)},h.setBodies=function(a,r){a.bodies=r.slice(0)},h.clear=function(a){a.bodies=[],a.collisions=[]},h.collisions=function(a){var r=a.pairs,e=a.bodies,n=e.length,u=h.canCollide,s=o.collides,l=a.collisions,c=0,d,f;for(e.sort(h._compareBoundsX),d=0;d<n;d++){var m=e[d],y=m.bounds,S=m.bounds.max.x,C=m.bounds.max.y,E=m.bounds.min.y,P=m.isStatic||m.isSleeping,A=m.parts.length,R=A===1;for(f=d+1;f<n;f++){var G=e[f],b=G.bounds;if(b.min.x>S)break;if(!(C<b.min.y||E>b.max.y)&&!(P&&(G.isStatic||G.isSleeping))&&u(m.collisionFilter,G.collisionFilter)){var L=G.parts.length;if(R&&L===1){var w=s(m,G,r);w&&(l[c++]=w)}else for(var B=A>1?1:0,N=L>1?1:0,Y=B;Y<A;Y++)for(var U=m.parts[Y],y=U.bounds,W=N;W<L;W++){var O=G.parts[W],b=O.bounds;if(!(y.min.x>b.max.x||y.max.x<b.min.x||y.max.y<b.min.y||y.min.y>b.max.y)){var w=s(U,O,r);w&&(l[c++]=w)}}}}}return l.length!==c&&(l.length=c),l},h.canCollide=function(a,r){return a.group===r.group&&a.group!==0?a.group>0:(a.mask&r.category)!==0&&(r.mask&a.category)!==0},h._compareBoundsX=function(a,r){return a.bounds.min.x-r.bounds.min.x}})()}),4506:((p,M,t)=>{var h={};p.exports=h;var g=t(43424);(function(){h.create=function(o,a){var r=o.bodyA,e=o.bodyB,n={id:h.id(r,e),bodyA:r,bodyB:e,collision:o,contacts:[g.create(),g.create()],contactCount:0,separation:0,isActive:!0,isSensor:r.isSensor||e.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return h.update(n,o,a),n},h.update=function(o,a,r){var e=a.supports,n=a.supportCount,u=o.contacts,s=a.parentA,l=a.parentB;o.isActive=!0,o.timeUpdated=r,o.collision=a,o.separation=a.depth,o.inverseMass=s.inverseMass+l.inverseMass,o.friction=s.friction<l.friction?s.friction:l.friction,o.frictionStatic=s.frictionStatic>l.frictionStatic?s.frictionStatic:l.frictionStatic,o.restitution=s.restitution>l.restitution?s.restitution:l.restitution,o.slop=s.slop>l.slop?s.slop:l.slop,o.contactCount=n,a.pair=o;var c=e[0],d=u[0],f=e[1],m=u[1];(m.vertex===c||d.vertex===f)&&(u[1]=d,u[0]=d=m,m=u[1]),d.vertex=c,m.vertex=f},h.setActive=function(o,a,r){a?(o.isActive=!0,o.timeUpdated=r):(o.isActive=!1,o.contactCount=0)},h.id=function(o,a){return o.id<a.id?o.id.toString(36)+":"+a.id.toString(36):a.id.toString(36)+":"+o.id.toString(36)}})()}),99561:((p,M,t)=>{var h={};p.exports=h;var g=t(4506),o=t(53402);(function(){h.create=function(a){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},h.update=function(a,r,e){var n=g.update,u=g.create,s=g.setActive,l=a.table,c=a.list,d=c.length,f=d,m=a.collisionStart,y=a.collisionEnd,S=a.collisionActive,C=r.length,E=0,P=0,A=0,R,G,b;for(b=0;b<C;b++)R=r[b],G=R.pair,G?(G.isActive&&(S[A++]=G),n(G,R,e)):(G=u(R,e),l[G.id]=G,m[E++]=G,c[f++]=G);for(f=0,d=c.length,b=0;b<d;b++)G=c[b],G.timeUpdated>=e?c[f++]=G:(s(G,!1,e),G.collision.bodyA.sleepCounter>0&&G.collision.bodyB.sleepCounter>0?c[f++]=G:(y[P++]=G,delete l[G.id]));c.length!==f&&(c.length=f),m.length!==E&&(m.length=E),y.length!==P&&(y.length=P),S.length!==A&&(S.length=A)},h.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()}),73296:((p,M,t)=>{var h={};p.exports=h;var g=t(31725),o=t(52284),a=t(15647),r=t(66280),e=t(41598);(function(){h.collides=function(n,u){for(var s=[],l=u.length,c=n.bounds,d=o.collides,f=a.overlaps,m=0;m<l;m++){var y=u[m],S=y.parts.length,C=S===1?0:1;if(n!==y&&f(y.bounds,c))for(var E=C;E<S;E++){var P=y.parts[E];if(f(P.bounds,c)){var A=d(P,n);if(A){s.push(A);break}}}}return s},h.ray=function(n,u,s,l){l=l||1e-100;for(var c=g.angle(u,s),d=g.magnitude(g.sub(u,s)),f=(s.x+u.x)*.5,m=(s.y+u.y)*.5,y=r.rectangle(f,m,d,l,{angle:c}),S=h.collides(y,n),C=0;C<S.length;C+=1){var E=S[C];E.body=E.bodyB=E.bodyA}return S},h.region=function(n,u,s){for(var l=[],c=0;c<n.length;c++){var d=n[c],f=a.overlaps(d.bounds,u);(f&&!s||!f&&s)&&l.push(d)}return l},h.point=function(n,u){for(var s=[],l=0;l<n.length;l++){var c=n[l];if(a.contains(c.bounds,u))for(var d=c.parts.length===1?0:1;d<c.parts.length;d++){var f=c.parts[d];if(a.contains(f.bounds,u)&&e.contains(f.vertices,u)){s.push(c);break}}}return s}})()}),66272:((p,M,t)=>{var h={};p.exports=h;var g=t(41598),o=t(53402),a=t(15647);(function(){h._restingThresh=2,h._restingThreshTangent=Math.sqrt(6),h._positionDampen=.9,h._positionWarming=.8,h._frictionNormalMultiplier=5,h._frictionMaxStatic=Number.MAX_VALUE,h.preSolvePosition=function(r){var e,n,u,s=r.length;for(e=0;e<s;e++)n=r[e],n.isActive&&(u=n.contactCount,n.collision.parentA.totalContacts+=u,n.collision.parentB.totalContacts+=u)},h.solvePosition=function(r,e,n){var u,s,l,c,d,f,m,y,S=h._positionDampen*(n||1),C=o.clamp(e/o._baseDelta,0,1),E=r.length;for(u=0;u<E;u++)s=r[u],!(!s.isActive||s.isSensor)&&(l=s.collision,c=l.parentA,d=l.parentB,f=l.normal,s.separation=l.depth+f.x*(d.positionImpulse.x-c.positionImpulse.x)+f.y*(d.positionImpulse.y-c.positionImpulse.y));for(u=0;u<E;u++)s=r[u],!(!s.isActive||s.isSensor)&&(l=s.collision,c=l.parentA,d=l.parentB,f=l.normal,y=s.separation-s.slop*C,(c.isStatic||d.isStatic)&&(y*=2),c.isStatic||c.isSleeping||(m=S/c.totalContacts,c.positionImpulse.x+=f.x*y*m,c.positionImpulse.y+=f.y*y*m),d.isStatic||d.isSleeping||(m=S/d.totalContacts,d.positionImpulse.x-=f.x*y*m,d.positionImpulse.y-=f.y*y*m))},h.postSolvePosition=function(r){for(var e=h._positionWarming,n=r.length,u=g.translate,s=a.update,l=0;l<n;l++){var c=r[l],d=c.positionImpulse,f=d.x,m=d.y,y=c.velocity;if(c.totalContacts=0,f!==0||m!==0){for(var S=0;S<c.parts.length;S++){var C=c.parts[S];u(C.vertices,d),s(C.bounds,C.vertices,y),C.position.x+=f,C.position.y+=m}c.positionPrev.x+=f,c.positionPrev.y+=m,f*y.x+m*y.y<0?(d.x=0,d.y=0):(d.x*=e,d.y*=e)}}},h.preSolveVelocity=function(r){var e=r.length,n,u;for(n=0;n<e;n++){var s=r[n];if(!(!s.isActive||s.isSensor)){var l=s.contacts,c=s.contactCount,d=s.collision,f=d.parentA,m=d.parentB,y=d.normal,S=d.tangent;for(u=0;u<c;u++){var C=l[u],E=C.vertex,P=C.normalImpulse,A=C.tangentImpulse;if(P!==0||A!==0){var R=y.x*P+S.x*A,G=y.y*P+S.y*A;f.isStatic||f.isSleeping||(f.positionPrev.x+=R*f.inverseMass,f.positionPrev.y+=G*f.inverseMass,f.anglePrev+=f.inverseInertia*((E.x-f.position.x)*G-(E.y-f.position.y)*R)),m.isStatic||m.isSleeping||(m.positionPrev.x-=R*m.inverseMass,m.positionPrev.y-=G*m.inverseMass,m.anglePrev-=m.inverseInertia*((E.x-m.position.x)*G-(E.y-m.position.y)*R))}}}}},h.solveVelocity=function(r,e){var n=e/o._baseDelta,u=n*n,s=u*n,l=-h._restingThresh*n,c=h._restingThreshTangent,d=h._frictionNormalMultiplier*n,f=h._frictionMaxStatic,m=r.length,y,S,C,E;for(C=0;C<m;C++){var P=r[C];if(!(!P.isActive||P.isSensor)){var A=P.collision,R=A.parentA,G=A.parentB,b=A.normal.x,L=A.normal.y,w=A.tangent.x,B=A.tangent.y,N=P.inverseMass,Y=P.friction*P.frictionStatic*d,U=P.contacts,W=P.contactCount,O=1/W,V=R.position.x-R.positionPrev.x,X=R.position.y-R.positionPrev.y,z=R.angle-R.anglePrev,I=G.position.x-G.positionPrev.x,Z=G.position.y-G.positionPrev.y,J=G.angle-G.anglePrev;for(E=0;E<W;E++){var k=U[E],j=k.vertex,tt=j.x-R.position.x,ht=j.y-R.position.y,ot=j.x-G.position.x,st=j.y-G.position.y,ft=V-ht*z,ut=X+tt*z,lt=I-st*J,Tt=Z+ot*J,bt=ft-lt,Dt=ut-Tt,ct=b*bt+L*Dt,yt=w*bt+B*Dt,Et=P.separation+ct,At=Math.min(Et,1);At=Et<0?0:At;var It=At*Y;yt<-It||yt>It?(S=yt>0?yt:-yt,y=P.friction*(yt>0?1:-1)*s,y<-S?y=-S:y>S&&(y=S)):(y=yt,S=f);var Ft=tt*L-ht*b,wt=ot*L-st*b,Bt=O/(N+R.inverseInertia*Ft*Ft+G.inverseInertia*wt*wt),le=(1+P.restitution)*ct*Bt;if(y*=Bt,ct<l)k.normalImpulse=0;else{var pe=k.normalImpulse;k.normalImpulse+=le,k.normalImpulse>0&&(k.normalImpulse=0),le=k.normalImpulse-pe}if(yt<-c||yt>c)k.tangentImpulse=0;else{var Ut=k.tangentImpulse;k.tangentImpulse+=y,k.tangentImpulse<-S&&(k.tangentImpulse=-S),k.tangentImpulse>S&&(k.tangentImpulse=S),y=k.tangentImpulse-Ut}var he=b*le+w*y,Pt=L*le+B*y;R.isStatic||R.isSleeping||(R.positionPrev.x+=he*R.inverseMass,R.positionPrev.y+=Pt*R.inverseMass,R.anglePrev+=(tt*Pt-ht*he)*R.inverseInertia),G.isStatic||G.isSleeping||(G.positionPrev.x-=he*G.inverseMass,G.positionPrev.y-=Pt*G.inverseMass,G.anglePrev-=(ot*Pt-st*he)*G.inverseInertia)}}}}})()}),48140:((p,M,t)=>{var h={};p.exports=h;var g=t(41598),o=t(31725),a=t(53614),r=t(15647),e=t(66615),n=t(53402);(function(){h._warming=.4,h._torqueDampen=1,h._minLength=1e-6,h.create=function(u){var s=u;s.bodyA&&!s.pointA&&(s.pointA={x:0,y:0}),s.bodyB&&!s.pointB&&(s.pointB={x:0,y:0});var l=s.bodyA?o.add(s.bodyA.position,s.pointA):s.pointA,c=s.bodyB?o.add(s.bodyB.position,s.pointB):s.pointB,d=o.magnitude(o.sub(l,c));s.length=typeof s.length<"u"?s.length:d,s.id=s.id||n.nextId(),s.label=s.label||"Constraint",s.type="constraint",s.stiffness=s.stiffness||(s.length>0?1:.7),s.damping=s.damping||0,s.angularStiffness=s.angularStiffness||0,s.angleA=s.bodyA?s.bodyA.angle:s.angleA,s.angleB=s.bodyB?s.bodyB.angle:s.angleB,s.plugin={};var f={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return s.length===0&&s.stiffness>.1?(f.type="pin",f.anchors=!1):s.stiffness<.9&&(f.type="spring"),s.render=n.extend(f,s.render),s},h.preSolveAll=function(u){for(var s=0;s<u.length;s+=1){var l=u[s],c=l.constraintImpulse;l.isStatic||c.x===0&&c.y===0&&c.angle===0||(l.position.x+=c.x,l.position.y+=c.y,l.angle+=c.angle)}},h.solveAll=function(u,s){for(var l=n.clamp(s/n._baseDelta,0,1),c=0;c<u.length;c+=1){var d=u[c],f=!d.bodyA||d.bodyA&&d.bodyA.isStatic,m=!d.bodyB||d.bodyB&&d.bodyB.isStatic;(f||m)&&h.solve(u[c],l)}for(c=0;c<u.length;c+=1)d=u[c],f=!d.bodyA||d.bodyA&&d.bodyA.isStatic,m=!d.bodyB||d.bodyB&&d.bodyB.isStatic,!f&&!m&&h.solve(u[c],l)},h.solve=function(u,s){var l=u.bodyA,c=u.bodyB,d=u.pointA,f=u.pointB;if(!(!l&&!c)){l&&!l.isStatic&&(o.rotate(d,l.angle-u.angleA,d),u.angleA=l.angle),c&&!c.isStatic&&(o.rotate(f,c.angle-u.angleB,f),u.angleB=c.angle);var m=d,y=f;if(l&&(m=o.add(l.position,d)),c&&(y=o.add(c.position,f)),!(!m||!y)){var S=o.sub(m,y),C=o.magnitude(S);C<h._minLength&&(C=h._minLength);var E=(C-u.length)/C,P=u.stiffness>=1||u.length===0,A=P?u.stiffness*s:u.stiffness*s*s,R=u.damping*s,G=o.mult(S,E*A),b=(l?l.inverseMass:0)+(c?c.inverseMass:0),L=(l?l.inverseInertia:0)+(c?c.inverseInertia:0),w=b+L,B,N,Y,U,W;if(R>0){var O=o.create();Y=o.div(S,C),W=o.sub(c&&o.sub(c.position,c.positionPrev)||O,l&&o.sub(l.position,l.positionPrev)||O),U=o.dot(Y,W)}l&&!l.isStatic&&(N=l.inverseMass/b,l.constraintImpulse.x-=G.x*N,l.constraintImpulse.y-=G.y*N,l.position.x-=G.x*N,l.position.y-=G.y*N,R>0&&(l.positionPrev.x-=R*Y.x*U*N,l.positionPrev.y-=R*Y.y*U*N),B=o.cross(d,G)/w*h._torqueDampen*l.inverseInertia*(1-u.angularStiffness),l.constraintImpulse.angle-=B,l.angle-=B),c&&!c.isStatic&&(N=c.inverseMass/b,c.constraintImpulse.x+=G.x*N,c.constraintImpulse.y+=G.y*N,c.position.x+=G.x*N,c.position.y+=G.y*N,R>0&&(c.positionPrev.x+=R*Y.x*U*N,c.positionPrev.y+=R*Y.y*U*N),B=o.cross(f,G)/w*h._torqueDampen*c.inverseInertia*(1-u.angularStiffness),c.constraintImpulse.angle+=B,c.angle+=B)}}},h.postSolveAll=function(u){for(var s=0;s<u.length;s++){var l=u[s],c=l.constraintImpulse;if(!(l.isStatic||c.x===0&&c.y===0&&c.angle===0)){a.set(l,!1);for(var d=0;d<l.parts.length;d++){var f=l.parts[d];g.translate(f.vertices,c),d>0&&(f.position.x+=c.x,f.position.y+=c.y),c.angle!==0&&(g.rotate(f.vertices,c.angle,l.position),e.rotate(f.axes,c.angle),d>0&&o.rotateAbout(f.position,c.angle,l.position,f.position)),r.update(f.bounds,f.vertices,l.velocity)}c.angle*=h._warming,c.x*=h._warming,c.y*=h._warming}}},h.pointAWorld=function(u){return{x:(u.bodyA?u.bodyA.position.x:0)+(u.pointA?u.pointA.x:0),y:(u.bodyA?u.bodyA.position.y:0)+(u.pointA?u.pointA.y:0)}},h.pointBWorld=function(u){return{x:(u.bodyB?u.bodyB.position.x:0)+(u.pointB?u.pointB.x:0),y:(u.bodyB?u.bodyB.position.y:0)+(u.pointB?u.pointB.y:0)}},h.currentLength=function(u){var s=(u.bodyA?u.bodyA.position.x:0)+(u.pointA?u.pointA.x:0),l=(u.bodyA?u.bodyA.position.y:0)+(u.pointA?u.pointA.y:0),c=(u.bodyB?u.bodyB.position.x:0)+(u.pointB?u.pointB.x:0),d=(u.bodyB?u.bodyB.position.y:0)+(u.pointB?u.pointB.y:0),f=s-c,m=l-d;return Math.sqrt(f*f+m*m)}})()}),53402:((p,M,t)=>{var h={};p.exports=h,(function(){h._baseDelta=16.666666666666668,h._nextId=0,h._seed=0,h._nowStartTime=+new Date,h._warnedOnce={},h._decomp=null,h.extend=function(o,a){var r,e;typeof a=="boolean"?(r=2,e=a):(r=1,e=!0);for(var n=r;n<arguments.length;n++){var u=arguments[n];if(u)for(var s in u)e&&u[s]&&u[s].constructor===Object&&(!o[s]||o[s].constructor===Object)?(o[s]=o[s]||{},h.extend(o[s],e,u[s])):o[s]=u[s]}return o},h.clone=function(o,a){return h.extend({},a,o)},h.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var r in o)a.push(r);return a},h.values=function(o){var a=[];if(Object.keys){for(var r=Object.keys(o),e=0;e<r.length;e++)a.push(o[r[e]]);return a}for(var n in o)a.push(o[n]);return a},h.get=function(o,a,r,e){a=a.split(".").slice(r,e);for(var n=0;n<a.length;n+=1)o=o[a[n]];return o},h.set=function(o,a,r,e,n){var u=a.split(".").slice(e,n);return h.get(o,a,0,-1)[u[u.length-1]]=r,r},h.shuffle=function(o){for(var a=o.length-1;a>0;a--){var r=Math.floor(h.random()*(a+1)),e=o[a];o[a]=o[r],o[r]=e}return o},h.choose=function(o){return o[Math.floor(h.random()*o.length)]},h.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},h.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},h.isFunction=function(o){return typeof o=="function"},h.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},h.isString=function(o){return toString.call(o)==="[object String]"},h.clamp=function(o,a,r){return o<a?a:o>r?r:o},h.sign=function(o){return o<0?-1:1},h.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-h._nowStartTime},h.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+g()*(a-o)};var g=function(){return h._seed=(h._seed*9301+49297)%233280,h._seed/233280};h.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},h.logLevel=1,h.log=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.info=function(){console&&h.logLevel>0&&h.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warn=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");h._warnedOnce[o]||(h.warn(o),h._warnedOnce[o]=!0)},h.deprecated=function(o,a,r){o[a]=h.chain(function(){h.warnOnce(" deprecated ",r)},o[a])},h.nextId=function(){return h._nextId++},h.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var r=0;r<o.length;r++)if(o[r]===a)return r;return-1},h.map=function(o,a){if(o.map)return o.map(a);for(var r=[],e=0;e<o.length;e+=1)r.push(a(o[e]));return r},h.topologicalSort=function(o){var a=[],r=[],e=[];for(var n in o)!r[n]&&!e[n]&&h._topologicalSort(n,r,e,o,a);return a},h._topologicalSort=function(o,a,r,e,n){var u=e[o]||[];r[o]=!0;for(var s=0;s<u.length;s+=1){var l=u[s];r[l]||a[l]||h._topologicalSort(l,a,r,e,n)}r[o]=!1,a[o]=!0,n.push(o)},h.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var r=arguments[a];r._chained?o.push.apply(o,r._chained):o.push(r)}var e=function(){for(var n,u=new Array(arguments.length),s=0,l=arguments.length;s<l;s++)u[s]=arguments[s];for(s=0;s<o.length;s+=1){var c=o[s].apply(n,u);typeof c<"u"&&(n=c)}return n};return e._chained=o,e},h.chainPathBefore=function(o,a,r){return h.set(o,a,h.chain(r,h.get(o,a)))},h.chainPathAfter=function(o,a,r){return h.set(o,a,h.chain(h.get(o,a),r))},h.setDecomp=function(o){h._decomp=o},h.getDecomp=function(){var o=h._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof t.g<"u"&&(o=t.g.decomp)}catch{o=null}return o}})()}),48413:((p,M,t)=>{var h={};p.exports=h;var g=t(53614),o=t(66272),a=t(81388),r=t(99561),e=t(35810),n=t(69351),u=t(48140),s=t(53402),l=t(22562);(function(){h._deltaMax=16.666666666666668,h.create=function(c){c=c||{};var d={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},f=s.extend(d,c);return f.world=c.world||n.create({label:"World"}),f.pairs=c.pairs||r.create(),f.detector=c.detector||a.create(),f.detector.pairs=f.pairs,f.grid={buckets:[]},f.world.gravity=f.gravity,f.broadphase=f.grid,f.metrics={},f},h.update=function(c,d){var f=s.now(),m=c.world,y=c.detector,S=c.pairs,C=c.timing,E=C.timestamp,P;d>h._deltaMax&&s.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",h._deltaMax.toFixed(3),"ms."),d=typeof d<"u"?d:s._baseDelta,d*=C.timeScale,C.timestamp+=d,C.lastDelta=d;var A={timestamp:C.timestamp,delta:d};e.trigger(c,"beforeUpdate",A);var R=n.allBodies(m),G=n.allConstraints(m),b=n.allComposites(m);for(m.isModified&&(a.setBodies(y,R),n.setModified(m,!1,!1,!0)),c.enableSleeping&&g.update(R,d),h._bodiesApplyGravity(R,c.gravity),h.wrap(R,b),h.attractors(R),d>0&&h._bodiesUpdate(R,d),e.trigger(c,"beforeSolve",A),u.preSolveAll(R),P=0;P<c.constraintIterations;P++)u.solveAll(G,d);u.postSolveAll(R);var L=a.collisions(y);r.update(S,L,E),c.enableSleeping&&g.afterCollisions(S.list),S.collisionStart.length>0&&e.trigger(c,"collisionStart",{pairs:S.collisionStart,timestamp:C.timestamp,delta:d});var w=s.clamp(20/c.positionIterations,0,1);for(o.preSolvePosition(S.list),P=0;P<c.positionIterations;P++)o.solvePosition(S.list,d,w);for(o.postSolvePosition(R),u.preSolveAll(R),P=0;P<c.constraintIterations;P++)u.solveAll(G,d);for(u.postSolveAll(R),o.preSolveVelocity(S.list),P=0;P<c.velocityIterations;P++)o.solveVelocity(S.list,d);return h._bodiesUpdateVelocities(R),S.collisionActive.length>0&&e.trigger(c,"collisionActive",{pairs:S.collisionActive,timestamp:C.timestamp,delta:d}),S.collisionEnd.length>0&&e.trigger(c,"collisionEnd",{pairs:S.collisionEnd,timestamp:C.timestamp,delta:d}),h._bodiesClearForces(R),e.trigger(c,"afterUpdate",A),c.timing.lastElapsed=s.now()-f,c},h.merge=function(c,d){if(s.extend(c,d),d.world){c.world=d.world,h.clear(c);for(var f=n.allBodies(c.world),m=0;m<f.length;m++){var y=f[m];g.set(y,!1),y.id=s.nextId()}}},h.clear=function(c){r.clear(c.pairs),a.clear(c.detector)},h._bodiesClearForces=function(c){for(var d=c.length,f=0;f<d;f++){var m=c[f];m.force.x=0,m.force.y=0,m.torque=0}},h._bodiesApplyGravity=function(c,d){var f=typeof d.scale<"u"?d.scale:.001,m=c.length;if(!(d.x===0&&d.y===0||f===0))for(var y=0;y<m;y++){var S=c[y];S.ignoreGravity||S.isStatic||S.isSleeping||(S.force.y+=S.mass*d.y*f,S.force.x+=S.mass*d.x*f)}},h._bodiesUpdate=function(c,d){for(var f=c.length,m=0;m<f;m++){var y=c[m];y.isStatic||y.isSleeping||l.update(y,d)}},h._bodiesUpdateVelocities=function(c){for(var d=c.length,f=0;f<d;f++)l.updateVelocities(c[f])},h.wrap=function(c,d){for(var f=0;f<c.length;f+=1){var m=c[f];m.wrapBounds!==null&&l.wrap(m,m.wrapBounds)}for(f=0;f<d.length;f+=1){var y=d[f];y.wrapBounds!==null&&n.wrap(y,y.wrapBounds)}},h.attractors=function(c){for(var d=0;d<c.length;d++){var f=c[d],m=f.attractors;if(m&&m.length>0)for(var y=0;y<c.length;y++){var S=c[y];if(d!==y)for(var C=0;C<m.length;C++){var E=m[C],P=E;s.isFunction(E)&&(P=E(f,S)),P&&l.applyForce(S,S.position,P)}}}}})()}),35810:((p,M,t)=>{var h={};p.exports=h;var g=t(53402);(function(){h.on=function(o,a,r){for(var e=a.split(" "),n,u=0;u<e.length;u++)n=e[u],o.events=o.events||{},o.events[n]=o.events[n]||[],o.events[n].push(r);return r},h.off=function(o,a,r){if(!a){o.events={};return}typeof a=="function"&&(r=a,a=g.keys(o.events).join(" "));for(var e=a.split(" "),n=0;n<e.length;n++){var u=o.events[e[n]],s=[];if(r&&u)for(var l=0;l<u.length;l++)u[l]!==r&&s.push(u[l]);o.events[e[n]]=s}},h.trigger=function(o,a,r){var e,n,u,s,l=o.events;if(l&&g.keys(l).length>0){r||(r={}),e=a.split(" ");for(var c=0;c<e.length;c++)if(n=e[c],u=l[n],u){s=g.clone(r,!1),s.name=n,s.source=o;for(var d=0;d<u.length;d++)u[d].apply(o,[s])}}}})()}),6790:((p,M,t)=>{var h={};p.exports=h;var g=t(73832),o=t(53402);(function(){h.name="matter-js",h.version="0.20.0",h.uses=[],h.used=[],h.use=function(){g.use(h,Array.prototype.slice.call(arguments))},h.before=function(a,r){return a=a.replace(/^Matter./,""),o.chainPathBefore(h,a,r)},h.after=function(a,r){return a=a.replace(/^Matter./,""),o.chainPathAfter(h,a,r)}})()}),73832:((p,M,t)=>{var h={};p.exports=h;var g=t(53402);(function(){h._registry={},h.register=function(o){if(h.isPlugin(o)||g.warn("Plugin.register:",h.toString(o),"does not implement all required fields."),o.name in h._registry){var a=h._registry[o.name],r=h.versionParse(o.version).number,e=h.versionParse(a.version).number;r>e?(g.warn("Plugin.register:",h.toString(a),"was upgraded to",h.toString(o)),h._registry[o.name]=o):r<e?g.warn("Plugin.register:",h.toString(a),"can not be downgraded to",h.toString(o)):o!==a&&g.warn("Plugin.register:",h.toString(o),"is already registered to different plugin object")}else h._registry[o.name]=o;return o},h.resolve=function(o){return h._registry[h.dependencyParse(o).name]},h.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},h.isPlugin=function(o){return o&&o.name&&o.version&&o.install},h.isUsed=function(o,a){return o.used.indexOf(a)>-1},h.isFor=function(o,a){var r=o.for&&h.dependencyParse(o.for);return!o.for||a.name===r.name&&h.versionSatisfies(a.version,r.range)},h.use=function(o,a){if(o.uses=(o.uses||[]).concat(a||[]),o.uses.length===0){g.warn("Plugin.use:",h.toString(o),"does not specify any dependencies to install.");return}for(var r=h.dependencies(o),e=g.topologicalSort(r),n=[],u=0;u<e.length;u+=1)if(e[u]!==o.name){var s=h.resolve(e[u]);if(!s){n.push(" "+e[u]);continue}h.isUsed(o,s.name)||(h.isFor(s,o)||(g.warn("Plugin.use:",h.toString(s),"is for",s.for,"but installed on",h.toString(o)+"."),s._warned=!0),s.install?s.install(o):(g.warn("Plugin.use:",h.toString(s),"does not specify an install function."),s._warned=!0),s._warned?(n.push(" "+h.toString(s)),delete s._warned):n.push(" "+h.toString(s)),o.used.push(s.name))}n.length>0&&!s.silent&&g.info(n.join("  "))},h.dependencies=function(o,a){var r=h.dependencyParse(o),e=r.name;if(a=a||{},!(e in a)){o=h.resolve(o)||o,a[e]=g.map(o.uses||[],function(u){h.isPlugin(u)&&h.register(u);var s=h.dependencyParse(u),l=h.resolve(u);return l&&!h.versionSatisfies(l.version,s.range)?(g.warn("Plugin.dependencies:",h.toString(l),"does not satisfy",h.toString(s),"used by",h.toString(r)+"."),l._warned=!0,o._warned=!0):l||(g.warn("Plugin.dependencies:",h.toString(u),"used by",h.toString(r),"could not be resolved."),o._warned=!0),s.name});for(var n=0;n<a[e].length;n+=1)h.dependencies(a[e][n],a);return a}},h.dependencyParse=function(o){if(g.isString(o)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return a.test(o)||g.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},h.versionParse=function(o){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(o)||g.warn("Plugin.versionParse:",o,"is not a valid version or range.");var r=a.exec(o),e=Number(r[4]),n=Number(r[5]),u=Number(r[6]);return{isRange:!!(r[1]||r[2]),version:r[3],range:o,operator:r[1]||r[2]||"",major:e,minor:n,patch:u,parts:[e,n,u],prerelease:r[7],number:e*1e8+n*1e4+u}},h.versionSatisfies=function(o,a){a=a||"*";var r=h.versionParse(a),e=h.versionParse(o);if(r.isRange){if(r.operator==="*"||o==="*")return!0;if(r.operator===">")return e.number>r.number;if(r.operator===">=")return e.number>=r.number;if(r.operator==="~")return e.major===r.major&&e.minor===r.minor&&e.patch>=r.patch;if(r.operator==="^")return r.major>0?e.major===r.major&&e.number>=r.number:r.minor>0?e.minor===r.minor&&e.patch>=r.patch:e.patch===r.patch}return o===a||o==="*"}})()}),13037:((p,M,t)=>{var h={};p.exports=h;var g=t(35810),o=t(48413),a=t(53402);(function(){h._maxFrameDelta=66.66666666666667,h._frameDeltaFallback=16.666666666666668,h._timeBufferMargin=1.5,h._elapsedNextEstimate=1,h._smoothingLowerBound=.1,h._smoothingUpperBound=.9,h.create=function(e){var n={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},u=a.extend(n,e);return u.fps=0,u},h.run=function(e,n){return e.timeBuffer=h._frameDeltaFallback,(function u(s){e.frameRequestId=h._onNextFrame(e,u),s&&e.enabled&&h.tick(e,n,s)})(),e},h.tick=function(e,n,u){var s=a.now(),l=e.delta,c=0,d=u-e.timeLastTick;if((!d||!e.timeLastTick||d>Math.max(h._maxFrameDelta,e.maxFrameTime))&&(d=e.frameDelta||h._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(d),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var f=e.frameDeltaHistory.slice(0).sort(),m=e.frameDeltaHistory.slice(f.length*h._smoothingLowerBound,f.length*h._smoothingUpperBound),y=r(m);d=y||d}e.frameDeltaSnapping&&(d=1e3/Math.round(1e3/d)),e.frameDelta=d,e.timeLastTick=u,e.timeBuffer+=e.frameDelta,e.timeBuffer=a.clamp(e.timeBuffer,0,e.frameDelta+l*h._timeBufferMargin),e.lastUpdatesDeferred=0;var S=e.maxUpdates||Math.ceil(e.maxFrameTime/l),C={timestamp:n.timing.timestamp};g.trigger(e,"beforeTick",C),g.trigger(e,"tick",C);for(var E=a.now();l>0&&e.timeBuffer>=l*h._timeBufferMargin;){g.trigger(e,"beforeUpdate",C),o.update(n,l),g.trigger(e,"afterUpdate",C),e.timeBuffer-=l,c+=1;var P=a.now()-s,A=a.now()-E,R=P+h._elapsedNextEstimate*A/c;if(c>=S||R>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/l-h._timeBufferMargin));break}}n.timing.lastUpdatesPerFrame=c,g.trigger(e,"afterTick",C),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/l)>S?a.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&a.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof e.isFixed<"u"&&a.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&a.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),e.fps!==0&&a.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},h.stop=function(e){h._cancelNextFrame(e)},h._onNextFrame=function(e,n){if(typeof window<"u"&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(n);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},h._cancelNextFrame=function(e){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var r=function(e){for(var n=0,u=e.length,s=0;s<u;s+=1)n+=e[s];return n/u||0};h._mean=r})()}),53614:((p,M,t)=>{var h={};p.exports=h;var g=t(22562),o=t(35810),a=t(53402);(function(){h._motionWakeThreshold=.18,h._motionSleepThreshold=.08,h._minBias=.9,h.update=function(r,e){for(var n=e/a._baseDelta,u=h._motionSleepThreshold,s=0;s<r.length;s++){var l=r[s],c=g.getSpeed(l),d=g.getAngularSpeed(l),f=c*c+d*d;if(l.force.x!==0||l.force.y!==0){h.set(l,!1);continue}var m=Math.min(l.motion,f),y=Math.max(l.motion,f);l.motion=h._minBias*m+(1-h._minBias)*y,l.sleepThreshold>0&&l.motion<u?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/n&&h.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},h.afterCollisions=function(r){for(var e=h._motionSleepThreshold,n=0;n<r.length;n++){var u=r[n];if(u.isActive){var s=u.collision,l=s.bodyA.parent,c=s.bodyB.parent;if(!(l.isSleeping&&c.isSleeping||l.isStatic||c.isStatic)&&(l.isSleeping||c.isSleeping)){var d=l.isSleeping&&!l.isStatic?l:c,f=d===l?c:l;!d.isStatic&&f.motion>e&&h.set(d,!1)}}}},h.set=function(r,e){var n=r.isSleeping;e?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,n||o.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,n&&o.trigger(r,"sleepEnd"))}})()}),66280:((p,M,t)=>{var h={};p.exports=h;var g=t(41598),o=t(53402),a=t(22562),r=t(15647),e=t(31725);(function(){h.rectangle=function(n,u,s,l,c){c=c||{};var d={label:"Rectangle Body",position:{x:n,y:u},vertices:g.fromPath("L 0 0 L "+s+" 0 L "+s+" "+l+" L 0 "+l)};if(c.chamfer){var f=c.chamfer;d.vertices=g.chamfer(d.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete c.chamfer}return a.create(o.extend({},d,c))},h.trapezoid=function(n,u,s,l,c,d){d=d||{},c>=1&&o.warn("Bodies.trapezoid: slope parameter must be < 1."),c*=.5;var f=(1-c*2)*s,m=s*c,y=m+f,S=y+m,C;c<.5?C="L 0 0 L "+m+" "+-l+" L "+y+" "+-l+" L "+S+" 0":C="L 0 0 L "+y+" "+-l+" L "+S+" 0";var E={label:"Trapezoid Body",position:{x:n,y:u},vertices:g.fromPath(C)};if(d.chamfer){var P=d.chamfer;E.vertices=g.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete d.chamfer}return a.create(o.extend({},E,d))},h.circle=function(n,u,s,l,c){l=l||{};var d={label:"Circle Body",circleRadius:s};c=c||25;var f=Math.ceil(Math.max(10,Math.min(c,s)));return f%2===1&&(f+=1),h.polygon(n,u,f,s,o.extend({},d,l))},h.polygon=function(n,u,s,l,c){if(c=c||{},s<3)return h.circle(n,u,l,c);for(var d=2*Math.PI/s,f="",m=d*.5,y=0;y<s;y+=1){var S=m+y*d,C=Math.cos(S)*l,E=Math.sin(S)*l;f+="L "+C.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:n,y:u},vertices:g.fromPath(f)};if(c.chamfer){var A=c.chamfer;P.vertices=g.chamfer(P.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete c.chamfer}return a.create(o.extend({},P,c))},h.fromVertices=function(n,u,s,l,c,d,f,m){var y=o.getDecomp(),S,C,E,P,A,R,G,b,L,w,B;for(S=!!(y&&y.quickDecomp),l=l||{},E=[],c=typeof c<"u"?c:!1,d=typeof d<"u"?d:.01,f=typeof f<"u"?f:10,m=typeof m<"u"?m:.01,o.isArray(s[0])||(s=[s]),w=0;w<s.length;w+=1)if(R=s[w],P=g.isConvex(R),A=!P,A&&!S&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),P||!S)P?R=g.clockwiseSort(R):R=g.hull(R),E.push({position:{x:n,y:u},vertices:R});else{var N=R.map(function(k){return[k.x,k.y]});y.makeCCW(N),d!==!1&&y.removeCollinearPoints(N,d),m!==!1&&y.removeDuplicatePoints&&y.removeDuplicatePoints(N,m);var Y=y.quickDecomp(N);for(G=0;G<Y.length;G++){var U=Y[G],W=U.map(function(k){return{x:k[0],y:k[1]}});f>0&&g.area(W)<f||E.push({position:g.centre(W),vertices:W})}}for(G=0;G<E.length;G++)E[G]=a.create(o.extend(E[G],l));if(c){var O=5;for(G=0;G<E.length;G++){var V=E[G];for(b=G+1;b<E.length;b++){var X=E[b];if(r.overlaps(V.bounds,X.bounds)){var z=V.vertices,I=X.vertices;for(L=0;L<V.vertices.length;L++)for(B=0;B<X.vertices.length;B++){var Z=e.magnitudeSquared(e.sub(z[(L+1)%z.length],I[B])),J=e.magnitudeSquared(e.sub(z[L],I[(B+1)%I.length]));Z<O&&J<O&&(z[L].isInternal=!0,I[B].isInternal=!0)}}}}}return E.length>1?(C=a.create(o.extend({parts:E.slice(0)},l)),a.setPosition(C,{x:n,y:u}),C):E[0]},h.flagCoincidentParts=function(n,u){u===void 0&&(u=5);for(var s=0;s<n.length;s++)for(var l=n[s],c=s+1;c<n.length;c++){var d=n[c];if(r.overlaps(l.bounds,d.bounds))for(var f=l.vertices,m=d.vertices,y=0;y<l.vertices.length;y++)for(var S=0;S<d.vertices.length;S++){var C=e.magnitudeSquared(e.sub(f[(y+1)%f.length],m[S])),E=e.magnitudeSquared(e.sub(f[y],m[(S+1)%m.length]));C<u&&E<u&&(f[y].isInternal=!0,m[S].isInternal=!0)}}return n}})()}),74116:((p,M,t)=>{var h={};p.exports=h;var g=t(69351),o=t(48140),a=t(53402),r=t(22562),e=t(66280);(function(){h.stack=function(n,u,s,l,c,d,f){for(var m=g.create({label:"Stack"}),y=n,S=u,C,E=0,P=0;P<l;P++){for(var A=0,R=0;R<s;R++){var G=f(y,S,R,P,C,E);if(G){var b=G.bounds.max.y-G.bounds.min.y,L=G.bounds.max.x-G.bounds.min.x;b>A&&(A=b),r.translate(G,{x:L*.5,y:b*.5}),y=G.bounds.max.x+c,g.addBody(m,G),C=G,E+=1}else y+=c}S+=A+d,y=n}return m},h.chain=function(n,u,s,l,c,d){for(var f=n.bodies,m=1;m<f.length;m++){var y=f[m-1],S=f[m],C=y.bounds.max.y-y.bounds.min.y,E=y.bounds.max.x-y.bounds.min.x,P=S.bounds.max.y-S.bounds.min.y,A=S.bounds.max.x-S.bounds.min.x,R={bodyA:y,pointA:{x:E*u,y:C*s},bodyB:S,pointB:{x:A*l,y:P*c}},G=a.extend(R,d);g.addConstraint(n,o.create(G))}return n.label+=" Chain",n},h.mesh=function(n,u,s,l,c){var d=n.bodies,f,m,y,S,C;for(f=0;f<s;f++){for(m=1;m<u;m++)y=d[m-1+f*u],S=d[m+f*u],g.addConstraint(n,o.create(a.extend({bodyA:y,bodyB:S},c)));if(f>0)for(m=0;m<u;m++)y=d[m+(f-1)*u],S=d[m+f*u],g.addConstraint(n,o.create(a.extend({bodyA:y,bodyB:S},c))),l&&m>0&&(C=d[m-1+(f-1)*u],g.addConstraint(n,o.create(a.extend({bodyA:C,bodyB:S},c)))),l&&m<u-1&&(C=d[m+1+(f-1)*u],g.addConstraint(n,o.create(a.extend({bodyA:C,bodyB:S},c))))}return n.label+=" Mesh",n},h.pyramid=function(n,u,s,l,c,d,f){return h.stack(n,u,s,l,c,d,function(m,y,S,C,E,P){var A=Math.min(l,Math.ceil(s/2)),R=E?E.bounds.max.x-E.bounds.min.x:0;if(!(C>A)){C=A-C;var G=C,b=s-1-C;if(!(S<G||S>b)){P===1&&r.translate(E,{x:(S+(s%2===1?1:-1))*R,y:0});var L=E?S*R:0;return f(n+L+S*c,y,S,C,E,P)}}})},h.newtonsCradle=function(n,u,s,l,c){for(var d=g.create({label:"Newtons Cradle"}),f=0;f<s;f++){var m=1.9,y=e.circle(n+f*(l*m),u+c,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=o.create({pointA:{x:n+f*(l*m),y:u},bodyB:y});g.addBody(d,y),g.addConstraint(d,S)}return d},h.car=function(n,u,s,l,c){var d=r.nextGroup(!0),f=20,m=-s*.5+f,y=s*.5-f,S=0,C=g.create({label:"Car"}),E=e.rectangle(n,u,s,l,{collisionFilter:{group:d},chamfer:{radius:l*.5},density:2e-4}),P=e.circle(n+m,u+S,c,{collisionFilter:{group:d},friction:.8}),A=e.circle(n+y,u+S,c,{collisionFilter:{group:d},friction:.8}),R=o.create({bodyB:E,pointB:{x:m,y:S},bodyA:P,stiffness:1,length:0}),G=o.create({bodyB:E,pointB:{x:y,y:S},bodyA:A,stiffness:1,length:0});return g.addBody(C,E),g.addBody(C,P),g.addBody(C,A),g.addConstraint(C,R),g.addConstraint(C,G),C},h.softBody=function(n,u,s,l,c,d,f,m,y,S){y=a.extend({inertia:1/0},y),S=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var C=h.stack(n,u,s,l,c,d,function(E,P){return e.circle(E,P,m,y)});return h.mesh(C,s,l,f,S),C.label="Soft Body",C}})()}),66615:((p,M,t)=>{var h={};p.exports=h;var g=t(31725),o=t(53402);(function(){h.fromVertices=function(a){for(var r={},e=0;e<a.length;e++){var n=(e+1)%a.length,u=g.normalise({x:a[n].y-a[e].y,y:a[e].x-a[n].x}),s=u.y===0?1/0:u.x/u.y;s=s.toFixed(3).toString(),r[s]=u}return o.values(r)},h.rotate=function(a,r){if(r!==0)for(var e=Math.cos(r),n=Math.sin(r),u=0;u<a.length;u++){var s=a[u],l;l=s.x*e-s.y*n,s.y=s.x*n+s.y*e,s.x=l}}})()}),15647:(p=>{var M={};p.exports=M,(function(){M.create=function(t){var h={min:{x:0,y:0},max:{x:0,y:0}};return t&&M.update(h,t),h},M.update=function(t,h,g){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<h.length;o++){var a=h[o];a.x>t.max.x&&(t.max.x=a.x),a.x<t.min.x&&(t.min.x=a.x),a.y>t.max.y&&(t.max.y=a.y),a.y<t.min.y&&(t.min.y=a.y)}g&&(g.x>0?t.max.x+=g.x:t.min.x+=g.x,g.y>0?t.max.y+=g.y:t.min.y+=g.y)},M.contains=function(t,h){return h.x>=t.min.x&&h.x<=t.max.x&&h.y>=t.min.y&&h.y<=t.max.y},M.overlaps=function(t,h){return t.min.x<=h.max.x&&t.max.x>=h.min.x&&t.max.y>=h.min.y&&t.min.y<=h.max.y},M.translate=function(t,h){t.min.x+=h.x,t.max.x+=h.x,t.min.y+=h.y,t.max.y+=h.y},M.shift=function(t,h){var g=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=h.x,t.max.x=h.x+g,t.min.y=h.y,t.max.y=h.y+o},M.wrap=function(t,h,g){var o=null,a=null;if(typeof h.min.x<"u"&&typeof h.max.x<"u"&&(t.min.x>h.max.x?o=h.min.x-t.max.x:t.max.x<h.min.x&&(o=h.max.x-t.min.x)),typeof h.min.y<"u"&&typeof h.max.y<"u"&&(t.min.y>h.max.y?a=h.min.y-t.max.y:t.max.y<h.min.y&&(a=h.max.y-t.min.y)),o!==null||a!==null)return{x:o||0,y:a||0}}})()}),74058:((p,M,t)=>{var h={};p.exports=h,t(15647);var g=t(53402);(function(){h.pathToVertices=function(o,a){typeof window<"u"&&!("SVGPathSeg"in window)&&g.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,e,n,u,s,l,c,d,f,m,y=[],S,C,E=0,P=0,A=0;a=a||15;var R=function(b,L,w){var B=w%2===1&&w>1;if(!f||b!=f.x||L!=f.y){f&&B?(S=f.x,C=f.y):(S=0,C=0);var N={x:S+b,y:C+L};(B||!f)&&(f=N),y.push(N),P=S+b,A=C+L}},G=function(b){var L=b.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":P=b.x,A=b.y;break;case"H":P=b.x;break;case"V":A=b.y;break}R(P,A,b.pathSegType)}};for(h._svgPathToAbsolute(o),n=o.getTotalLength(),l=[],r=0;r<o.pathSegList.numberOfItems;r+=1)l.push(o.pathSegList.getItem(r));for(c=l.concat();E<n;){if(m=o.getPathSegAtLength(E),s=l[m],s!=d){for(;c.length&&c[0]!=s;)G(c.shift());d=s}switch(s.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=o.getPointAtLength(E),R(u.x,u.y,0);break}E+=a}for(r=0,e=c.length;r<e;++r)G(c[r]);return y},h._svgPathToAbsolute=function(o){for(var a,r,e,n,u,s,l=o.pathSegList,c=0,d=0,f=l.numberOfItems,m=0;m<f;++m){var y=l.getItem(m),S=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(S))"x"in y&&(c=y.x),"y"in y&&(d=y.y);else switch("x1"in y&&(e=c+y.x1),"x2"in y&&(u=c+y.x2),"y1"in y&&(n=d+y.y1),"y2"in y&&(s=d+y.y2),"x"in y&&(c+=y.x),"y"in y&&(d+=y.y),S){case"m":l.replaceItem(o.createSVGPathSegMovetoAbs(c,d),m);break;case"l":l.replaceItem(o.createSVGPathSegLinetoAbs(c,d),m);break;case"h":l.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(c),m);break;case"v":l.replaceItem(o.createSVGPathSegLinetoVerticalAbs(d),m);break;case"c":l.replaceItem(o.createSVGPathSegCurvetoCubicAbs(c,d,e,n,u,s),m);break;case"s":l.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(c,d,u,s),m);break;case"q":l.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(c,d,e,n),m);break;case"t":l.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d),m);break;case"a":l.replaceItem(o.createSVGPathSegArcAbs(c,d,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),m);break;case"z":case"Z":c=a,d=r;break}(S=="M"||S=="m")&&(a=c,r=d)}}})()}),31725:(p=>{var M={};p.exports=M,(function(){M.create=function(t,h){return{x:t||0,y:h||0}},M.clone=function(t){return{x:t.x,y:t.y}},M.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},M.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},M.rotate=function(t,h,g){var o=Math.cos(h),a=Math.sin(h);g||(g={});var r=t.x*o-t.y*a;return g.y=t.x*a+t.y*o,g.x=r,g},M.rotateAbout=function(t,h,g,o){var a=Math.cos(h),r=Math.sin(h);o||(o={});var e=g.x+((t.x-g.x)*a-(t.y-g.y)*r);return o.y=g.y+((t.x-g.x)*r+(t.y-g.y)*a),o.x=e,o},M.normalise=function(t){var h=M.magnitude(t);return h===0?{x:0,y:0}:{x:t.x/h,y:t.y/h}},M.dot=function(t,h){return t.x*h.x+t.y*h.y},M.cross=function(t,h){return t.x*h.y-t.y*h.x},M.cross3=function(t,h,g){return(h.x-t.x)*(g.y-t.y)-(h.y-t.y)*(g.x-t.x)},M.add=function(t,h,g){return g||(g={}),g.x=t.x+h.x,g.y=t.y+h.y,g},M.sub=function(t,h,g){return g||(g={}),g.x=t.x-h.x,g.y=t.y-h.y,g},M.mult=function(t,h){return{x:t.x*h,y:t.y*h}},M.div=function(t,h){return{x:t.x/h,y:t.y/h}},M.perp=function(t,h){return h=h===!0?-1:1,{x:h*-t.y,y:h*t.x}},M.neg=function(t){return{x:-t.x,y:-t.y}},M.angle=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)},M._temp=[M.create(),M.create(),M.create(),M.create(),M.create(),M.create()]})()}),41598:((p,M,t)=>{var h={};p.exports=h;var g=t(31725),o=t(53402);(function(){h.create=function(a,r){for(var e=[],n=0;n<a.length;n++){var u=a[n],s={x:u.x,y:u.y,index:n,body:r,isInternal:!1};e.push(s)}return e},h.fromPath=function(a,r){var e=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];return a.replace(e,function(u,s,l){n.push({x:parseFloat(s),y:parseFloat(l)})}),h.create(n,r)},h.centre=function(a){for(var r=h.area(a,!0),e={x:0,y:0},n,u,s,l=0;l<a.length;l++)s=(l+1)%a.length,n=g.cross(a[l],a[s]),u=g.mult(g.add(a[l],a[s]),n),e=g.add(e,u);return g.div(e,6*r)},h.mean=function(a){for(var r={x:0,y:0},e=0;e<a.length;e++)r.x+=a[e].x,r.y+=a[e].y;return g.div(r,a.length)},h.area=function(a,r){for(var e=0,n=a.length-1,u=0;u<a.length;u++)e+=(a[n].x-a[u].x)*(a[n].y+a[u].y),n=u;return r?e/2:Math.abs(e)/2},h.inertia=function(a,r){for(var e=0,n=0,u=a,s,l,c=0;c<u.length;c++)l=(c+1)%u.length,s=Math.abs(g.cross(u[l],u[c])),e+=s*(g.dot(u[l],u[l])+g.dot(u[l],u[c])+g.dot(u[c],u[c])),n+=s;return r/6*(e/n)},h.translate=function(a,r,e){e=typeof e<"u"?e:1;var n=a.length,u=r.x*e,s=r.y*e,l;for(l=0;l<n;l++)a[l].x+=u,a[l].y+=s;return a},h.rotate=function(a,r,e){if(r!==0){var n=Math.cos(r),u=Math.sin(r),s=e.x,l=e.y,c=a.length,d,f,m,y;for(y=0;y<c;y++)d=a[y],f=d.x-s,m=d.y-l,d.x=s+(f*n-m*u),d.y=l+(f*u+m*n);return a}},h.contains=function(a,r){for(var e=r.x,n=r.y,u=a.length,s=a[u-1],l,c=0;c<u;c++){if(l=a[c],(e-s.x)*(l.y-s.y)+(n-s.y)*(s.x-l.x)>0)return!1;s=l}return!0},h.scale=function(a,r,e,n){if(r===1&&e===1)return a;n=n||h.centre(a);for(var u,s,l=0;l<a.length;l++)u=a[l],s=g.sub(u,n),a[l].x=n.x+s.x*r,a[l].y=n.y+s.y*e;return a},h.chamfer=function(a,r,e,n,u){typeof r=="number"?r=[r]:r=r||[8],e=typeof e<"u"?e:-1,n=n||2,u=u||14;for(var s=[],l=0;l<a.length;l++){var c=a[l-1>=0?l-1:a.length-1],d=a[l],f=a[(l+1)%a.length],m=r[l<r.length?l:r.length-1];if(m===0){s.push(d);continue}var y=g.normalise({x:d.y-c.y,y:c.x-d.x}),S=g.normalise({x:f.y-d.y,y:d.x-f.x}),C=Math.sqrt(2*Math.pow(m,2)),E=g.mult(o.clone(y),m),P=g.normalise(g.mult(g.add(y,S),.5)),A=g.sub(d,g.mult(P,C)),R=e;e===-1&&(R=Math.pow(m,.32)*1.75),R=o.clamp(R,n,u),R%2===1&&(R+=1);for(var G=Math.acos(g.dot(y,S)),b=G/R,L=0;L<R;L++)s.push(g.add(g.rotate(E,b*L),A))}return s},h.clockwiseSort=function(a){var r=h.mean(a);return a.sort(function(e,n){return g.angle(r,e)-g.angle(r,n)}),a},h.isConvex=function(a){var r=0,e=a.length,n,u,s,l;if(e<3)return null;for(n=0;n<e;n++)if(u=(n+1)%e,s=(n+2)%e,l=(a[u].x-a[n].x)*(a[s].y-a[u].y),l-=(a[u].y-a[n].y)*(a[s].x-a[u].x),l<0?r|=1:l>0&&(r|=2),r===3)return!1;return r!==0?!0:null},h.hull=function(a){var r=[],e=[],n,u;for(a=a.slice(0),a.sort(function(s,l){var c=s.x-l.x;return c!==0?c:s.y-l.y}),u=0;u<a.length;u+=1){for(n=a[u];e.length>=2&&g.cross3(e[e.length-2],e[e.length-1],n)<=0;)e.pop();e.push(n)}for(u=a.length-1;u>=0;u-=1){for(n=a[u];r.length>=2&&g.cross3(r[r.length-2],r[r.length-1],n)<=0;)r.pop();r.push(n)}return r.pop(),e.pop(),r.concat(e)}})()}),55973:(p=>{p.exports={decomp:G,quickDecomp:B,isSimple:L,removeCollinearPoints:N,removeDuplicatePoints:Y,makeCCW:f};function M(O,V,X){X=X||0;var z=[0,0],I,Z,J,k,j,tt,ht;return I=O[1][1]-O[0][1],Z=O[0][0]-O[1][0],J=I*O[0][0]+Z*O[0][1],k=V[1][1]-V[0][1],j=V[0][0]-V[1][0],tt=k*V[0][0]+j*V[0][1],ht=I*j-k*Z,U(ht,0,X)||(z[0]=(j*J-Z*tt)/ht,z[1]=(I*tt-k*J)/ht),z}function t(O,V,X,z){var I=V[0]-O[0],Z=V[1]-O[1],J=z[0]-X[0],k=z[1]-X[1];if(J*Z-k*I===0)return!1;var j=(I*(X[1]-O[1])+Z*(O[0]-X[0]))/(J*Z-k*I),tt=(J*(O[1]-X[1])+k*(X[0]-O[0]))/(k*I-J*Z);return j>=0&&j<=1&&tt>=0&&tt<=1}function h(O,V,X){return(V[0]-O[0])*(X[1]-O[1])-(X[0]-O[0])*(V[1]-O[1])}function g(O,V,X){return h(O,V,X)>0}function o(O,V,X){return h(O,V,X)>=0}function a(O,V,X){return h(O,V,X)<0}function r(O,V,X){return h(O,V,X)<=0}var e=[],n=[];function u(O,V,X,z){if(z){var I=e,Z=n;I[0]=V[0]-O[0],I[1]=V[1]-O[1],Z[0]=X[0]-V[0],Z[1]=X[1]-V[1];var J=I[0]*Z[0]+I[1]*Z[1],k=Math.sqrt(I[0]*I[0]+I[1]*I[1]),j=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]),tt=Math.acos(J/(k*j));return tt<z}else return h(O,V,X)===0}function s(O,V){var X=V[0]-O[0],z=V[1]-O[1];return X*X+z*z}function l(O,V){var X=O.length;return O[V<0?V%X+X:V%X]}function c(O){O.length=0}function d(O,V,X,z){for(var I=X;I<z;I++)O.push(V[I])}function f(O){for(var V=0,X=O,z=1;z<O.length;++z)(X[z][1]<X[V][1]||X[z][1]===X[V][1]&&X[z][0]>X[V][0])&&(V=z);return g(l(O,V-1),l(O,V),l(O,V+1))?!1:(m(O),!0)}function m(O){for(var V=[],X=O.length,z=0;z!==X;z++)V.push(O.pop());for(var z=0;z!==X;z++)O[z]=V[z]}function y(O,V){return a(l(O,V-1),l(O,V),l(O,V+1))}var S=[],C=[];function E(O,V,X){var z,I,Z=S,J=C;if(o(l(O,V+1),l(O,V),l(O,X))&&r(l(O,V-1),l(O,V),l(O,X)))return!1;I=s(l(O,V),l(O,X));for(var k=0;k!==O.length;++k)if(!((k+1)%O.length===V||k===V)&&o(l(O,V),l(O,X),l(O,k+1))&&r(l(O,V),l(O,X),l(O,k))&&(Z[0]=l(O,V),Z[1]=l(O,X),J[0]=l(O,k),J[1]=l(O,k+1),z=M(Z,J),s(l(O,V),z)<I))return!1;return!0}function P(O,V,X){for(var z=0;z!==O.length;++z)if(!(z===V||z===X||(z+1)%O.length===V||(z+1)%O.length===X)&&t(l(O,V),l(O,X),l(O,z),l(O,z+1)))return!1;return!0}function A(O,V,X,z){var I=z||[];if(c(I),V<X)for(var Z=V;Z<=X;Z++)I.push(O[Z]);else{for(var Z=0;Z<=X;Z++)I.push(O[Z]);for(var Z=V;Z<O.length;Z++)I.push(O[Z])}return I}function R(O){for(var V=[],X=[],z=[],I=[],Z=Number.MAX_VALUE,J=0;J<O.length;++J)if(y(O,J)){for(var k=0;k<O.length;++k)if(E(O,J,k)){X=R(A(O,J,k,I)),z=R(A(O,k,J,I));for(var j=0;j<z.length;j++)X.push(z[j]);X.length<Z&&(V=X,Z=X.length,V.push([l(O,J),l(O,k)]))}}return V}function G(O){var V=R(O);return V.length>0?b(O,V):[O]}function b(O,V){if(V.length===0)return[O];if(V instanceof Array&&V.length&&V[0]instanceof Array&&V[0].length===2&&V[0][0]instanceof Array){for(var X=[O],z=0;z<V.length;z++)for(var I=V[z],Z=0;Z<X.length;Z++){var J=X[Z],k=b(J,I);if(k){X.splice(Z,1),X.push(k[0],k[1]);break}}return X}else{var I=V,z=O.indexOf(I[0]),Z=O.indexOf(I[1]);return z!==-1&&Z!==-1?[A(O,z,Z),A(O,Z,z)]:!1}}function L(O){var V=O,X;for(X=0;X<V.length-1;X++)for(var z=0;z<X-1;z++)if(t(V[X],V[X+1],V[z],V[z+1]))return!1;for(X=1;X<V.length-2;X++)if(t(V[0],V[V.length-1],V[X],V[X+1]))return!1;return!0}function w(O,V,X,z,I){I=I||0;var Z=V[1]-O[1],J=O[0]-V[0],k=Z*O[0]+J*O[1],j=z[1]-X[1],tt=X[0]-z[0],ht=j*X[0]+tt*X[1],ot=Z*tt-j*J;return U(ot,0,I)?[0,0]:[(tt*k-J*ht)/ot,(Z*ht-j*k)/ot]}function B(O,V,X,z,I,Z,J){Z=Z||100,J=J||0,I=I||25,V=typeof V<"u"?V:[],X=X||[],z=z||[];var k=[0,0],j=[0,0],tt=[0,0],ht=0,ot=0,st=0,ft=0,ut=0,lt=0,Tt=0,bt=[],Dt=[],ct=O,yt=O;if(yt.length<3)return V;if(J++,J>Z)return console.warn("quickDecomp: max level ("+Z+") reached."),V;for(var Et=0;Et<O.length;++Et)if(y(ct,Et)){X.push(ct[Et]),ht=ot=Number.MAX_VALUE;for(var At=0;At<O.length;++At)g(l(ct,Et-1),l(ct,Et),l(ct,At))&&r(l(ct,Et-1),l(ct,Et),l(ct,At-1))&&(tt=w(l(ct,Et-1),l(ct,Et),l(ct,At),l(ct,At-1)),a(l(ct,Et+1),l(ct,Et),tt)&&(st=s(ct[Et],tt),st<ot&&(ot=st,j=tt,lt=At))),g(l(ct,Et+1),l(ct,Et),l(ct,At+1))&&r(l(ct,Et+1),l(ct,Et),l(ct,At))&&(tt=w(l(ct,Et+1),l(ct,Et),l(ct,At),l(ct,At+1)),g(l(ct,Et-1),l(ct,Et),tt)&&(st=s(ct[Et],tt),st<ht&&(ht=st,k=tt,ut=At)));if(lt===(ut+1)%O.length)tt[0]=(j[0]+k[0])/2,tt[1]=(j[1]+k[1])/2,z.push(tt),Et<ut?(d(bt,ct,Et,ut+1),bt.push(tt),Dt.push(tt),lt!==0&&d(Dt,ct,lt,ct.length),d(Dt,ct,0,Et+1)):(Et!==0&&d(bt,ct,Et,ct.length),d(bt,ct,0,ut+1),bt.push(tt),Dt.push(tt),d(Dt,ct,lt,Et+1));else{if(lt>ut&&(ut+=O.length),ft=Number.MAX_VALUE,ut<lt)return V;for(var At=lt;At<=ut;++At)o(l(ct,Et-1),l(ct,Et),l(ct,At))&&r(l(ct,Et+1),l(ct,Et),l(ct,At))&&(st=s(l(ct,Et),l(ct,At)),st<ft&&P(ct,Et,At)&&(ft=st,Tt=At%O.length));Et<Tt?(d(bt,ct,Et,Tt+1),Tt!==0&&d(Dt,ct,Tt,yt.length),d(Dt,ct,0,Et+1)):(Et!==0&&d(bt,ct,Et,yt.length),d(bt,ct,0,Tt+1),d(Dt,ct,Tt,Et+1))}return bt.length<Dt.length?(B(bt,V,X,z,I,Z,J),B(Dt,V,X,z,I,Z,J)):(B(Dt,V,X,z,I,Z,J),B(bt,V,X,z,I,Z,J)),V}return V.push(O),V}function N(O,V){for(var X=0,z=O.length-1;O.length>3&&z>=0;--z)u(l(O,z-1),l(O,z),l(O,z+1),V)&&(O.splice(z%O.length,1),X++);return X}function Y(O,V){for(var X=O.length-1;X>=1;--X)for(var z=O[X],I=X-1;I>=0;--I)if(W(z,O[I],V)){O.splice(X,1);continue}}function U(O,V,X){return X=X||0,Math.abs(O-V)<=X}function W(O,V,X){return U(O[0],V[0],X)&&U(O[1],V[1],X)}}),52018:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});p.exports=g}),42363:(p=>{var M={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};p.exports=M}),37277:(p=>{var M={},t={},h={};h.register=function(g,o,a,r){r===void 0&&(r=!1),M[g]={plugin:o,mapping:a,custom:r}},h.registerCustom=function(g,o,a,r){t[g]={plugin:o,mapping:a,data:r}},h.hasCore=function(g){return M.hasOwnProperty(g)},h.hasCustom=function(g){return t.hasOwnProperty(g)},h.getCore=function(g){return M[g]},h.getCustom=function(g){return t[g]},h.getCustomClass=function(g){return t.hasOwnProperty(g)?t[g].plugin:null},h.remove=function(g){M.hasOwnProperty(g)&&delete M[g]},h.removeCustom=function(g){t.hasOwnProperty(g)&&delete t[g]},h.destroyCorePlugins=function(){for(var g in M)M.hasOwnProperty(g)&&delete M[g]},h.destroyCustomPlugins=function(){for(var g in t)t.hasOwnProperty(g)&&delete t[g]},p.exports=h}),77332:((p,M,t)=>{var h=t(83419),g=t(8443),o=t(50792),a=t(74099),r=t(44603),e=t(39429),n=t(95540),u=t(37277),s=t(72905),l=t(8054),c=new h({Extends:o,initialize:function(f){o.call(this),this.game=f,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],f.isBooted||f.config.renderType===l.HEADLESS?this.boot():f.events.once(g.BOOT,this.boot,this)},boot:function(){var d,f,m,y,S,C,E,P=this.game.config,A=P.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),d=0;d<A.length;d++)f=A[d],m=n(f,"key",null),y=n(f,"plugin",null),S=n(f,"start",!1),C=n(f,"mapping",null),E=n(f,"data",null),m&&(y?this.install(m,y,S,C,E):console.warn("Missing `plugin` for key: "+m));for(A=P.installScenePlugins,A=A.concat(this._pendingScene),d=0;d<A.length;d++)f=A[d],m=n(f,"key",null),y=n(f,"plugin",null),C=n(f,"mapping",null),m&&(y?this.installScenePlugin(m,y,C):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(d,f,m){var y,S,C,E=this.game,P=d.scene,A=d.settings.map,R=d.settings.isBooted;for(y=0;y<f.length;y++)S=f[y],E[S]?(d[S]=E[S],A.hasOwnProperty(S)&&(P[A[S]]=d[S])):S==="game"&&A.hasOwnProperty(S)&&(P[A[S]]=E);for(var G=0;G<m.length;G++)for(C=m[G],y=0;y<C.length;y++)if(S=C[y],!!u.hasCore(S)){var b=u.getCore(S),L=b.mapping,w=new b.plugin(P,this,L);d[L]=w,b.custom?P[L]=w:A.hasOwnProperty(L)&&(P[A[L]]=w),R&&w.boot()}for(C=this.plugins,y=0;y<C.length;y++){var B=C[y];B.mapping&&(P[B.mapping]=B.plugin)}},getDefaultScenePlugins:function(){var d=this.game.config.defaultPlugins;return d=d.concat(this.scenePlugins),d},installScenePlugin:function(d,f,m,y,S){if(S===void 0&&(S=!1),typeof f!="function"){console.warn("Invalid Scene Plugin: "+d);return}if(u.hasCore(d)||u.register(d,f,m,!0),this.scenePlugins.indexOf(d)===-1)this.scenePlugins.push(d);else if(!S&&u.hasCore(d)){console.warn("Scene Plugin key in use: "+d);return}if(y){var C=new f(y,this,d);y.sys[d]=C,m&&m!==""&&(y[m]=C),C.boot()}},install:function(d,f,m,y,S){if(m===void 0&&(m=!1),y===void 0&&(y=null),S===void 0&&(S=null),typeof f!="function")return console.warn("Invalid Plugin: "+d),null;if(u.hasCustom(d))return console.warn("Plugin key in use: "+d),null;if(y!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:d,plugin:f,start:m,mapping:y,data:S});else if(u.registerCustom(d,f,y,S),m)return this.start(d);return null},getIndex:function(d){for(var f=this.plugins,m=0;m<f.length;m++){var y=f[m];if(y.key===d)return m}return-1},getEntry:function(d){var f=this.getIndex(d);if(f!==-1)return this.plugins[f]},isActive:function(d){var f=this.getEntry(d);return f&&f.active},start:function(d,f){f===void 0&&(f=d);var m=this.getEntry(f);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(d,f)),m?m.plugin:null},createEntry:function(d,f){var m=u.getCustom(d);if(m){var y=new m.plugin(this);m={key:f,plugin:y,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),y.init(m.data),y.start()}return m},stop:function(d){var f=this.getEntry(d);return f&&f.active&&(f.active=!1,f.plugin.stop()),this},get:function(d,f){f===void 0&&(f=!0);var m=this.getEntry(d);if(m)return m.plugin;var y=this.getClass(d);return y&&f?(m=this.createEntry(d,d),m?m.plugin:null):y||null},getClass:function(d){return u.getCustomClass(d)},removeGlobalPlugin:function(d){var f=this.getEntry(d);f&&s(this.plugins,f),u.removeCustom(d)},removeScenePlugin:function(d){s(this.scenePlugins,d),u.remove(d)},registerGameObject:function(d,f,m){return f&&e.register(d,f),m&&r.register(d,m),this},removeGameObject:function(d,f,m){return f===void 0&&(f=!0),m===void 0&&(m=!0),f&&e.remove(d),m&&r.remove(d),this},registerFileType:function(d,f,m){a.register(d,f),m&&m.sys.load&&(m.sys.load[d]=f)},destroy:function(){for(var d=0;d<this.plugins.length;d++)this.plugins[d].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});p.exports=c}),45145:((p,M,t)=>{var h=t(52018),g=t(83419),o=t(44594),a=new g({Extends:h,initialize:function(e,n,u){h.call(this,n),this.scene=e,this.systems=e.sys,this.pluginKey=u,e.sys.events.once(o.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});p.exports=a}),18922:((p,M,t)=>{p.exports={BasePlugin:t(52018),DefaultPlugins:t(42363),PluginCache:t(37277),PluginManager:t(77332),ScenePlugin:t(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(p){const M=performance.now(),t=this.getVideoPlaybackQuality(),h=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,g=(o,a)=>{const r=this.getVideoPlaybackQuality(),e=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames;if(e>h){const n=this.mozFrameDelay||r.totalFrameDelay-t.totalFrameDelay||0,u=a-o;p(a,{presentationTime:a+n*1e3,expectedDisplayTime:a+u,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+u/1e3,presentedFrames:e,processingDuration:n}),delete this._rvfcpolyfillmap[M]}else this._rvfcpolyfillmap[M]=requestAnimationFrame(n=>g(a,n))};return this._rvfcpolyfillmap[M]=requestAnimationFrame(o=>g(M,o)),M},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(p){cancelAnimationFrame(this._rvfcpolyfillmap[p]),delete this._rvfcpolyfillmap[p]})}),10312:(p=>{p.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(p=>{var M={DEFAULT:0,LINEAR:0,NEAREST:1};p.exports=M}),68627:((p,M,t)=>{var h=t(19715),g=t(32880),o=t(83419),a=t(8054),r=t(50792),e=t(92503),n=t(56373),u=t(97480),s=t(69442),l=t(8443),c=t(61340),d=new o({Extends:r,initialize:function(m){r.call(this);var y=m.config;this.config={clearBeforeRender:y.clearBeforeRender,backgroundColor:y.backgroundColor,antialias:y.antialias,roundPixels:y.roundPixels,transparent:y.transparent},this.game=m,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var S={alpha:y.transparent,desynchronized:y.desynchronized,willReadFrequently:!1};this.gameContext=y.context?y.context:this.gameCanvas.getContext("2d",S),this.currentContext=this.gameContext,this.antialias=y.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){var f=this.game;f.events.once(l.BOOT,function(){var m=this.config;if(!m.transparent){var y=this.gameContext,S=this.gameCanvas;y.fillStyle=m.backgroundColor.rgba,y.fillRect(0,0,S.width,S.height)}},this),f.textures.once(s.READY,this.boot,this)},boot:function(){var f=this.game,m=f.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,f.scale.on(u.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(f,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(f,m){this.width=f,this.height=m,this.emit(e.RESIZE,f,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(f){return this.currentContext.globalCompositeOperation=f,this},setContext:function(f){return this.currentContext=f||this.gameContext,this},setAlpha:function(f){return this.currentContext.globalAlpha=f,this},preRender:function(){var f=this.gameContext,m=this.config,y=this.width,S=this.height;f.globalAlpha=1,f.globalCompositeOperation="source-over",f.setTransform(1,0,0,1,0,0),this.emit(e.PRE_RENDER_CLEAR),m.clearBeforeRender&&(f.clearRect(0,0,y,S),m.transparent||(f.fillStyle=m.backgroundColor.rgba,f.fillRect(0,0,y,S))),f.save(),this.drawCount=0,this.emit(e.PRE_RENDER)},render:function(f,m,y){var S=m.length;this.emit(e.RENDER,f,y);var C=y.x,E=y.y,P=y.width,A=y.height,R=y.renderToTexture?y.context:f.sys.context;R.save(),this.game.scene.customViewports&&(R.beginPath(),R.rect(C,E,P,A),R.clip()),y.emit(h.PRE_RENDER,y),this.currentContext=R;var G=y.mask;G&&G.preRenderCanvas(this,null,y._maskCamera),y.transparent||(R.fillStyle=y.backgroundColor.rgba,R.fillRect(C,E,P,A)),R.globalAlpha=y.alpha,R.globalCompositeOperation="source-over",this.drawCount+=S,y.renderToTexture&&y.emit(h.PRE_RENDER,y),y.matrix.copyToContext(R);for(var b=0;b<S;b++){var L=m[b];L.mask&&L.mask.preRenderCanvas(this,L,y),L.renderCanvas(this,L,y),L.mask&&L.mask.postRenderCanvas(this,L,y)}R.setTransform(1,0,0,1,0,0),R.globalCompositeOperation="source-over",R.globalAlpha=1,y.flashEffect.postRenderCanvas(R),y.fadeEffect.postRenderCanvas(R),y.dirty=!1,G&&G.postRenderCanvas(this),R.restore(),y.renderToTexture&&(y.emit(h.POST_RENDER,y),y.renderToGame&&f.sys.context.drawImage(y.canvas,C,E)),y.emit(h.POST_RENDER,y)},postRender:function(){var f=this.gameContext;f.restore(),this.emit(e.POST_RENDER);var m=this.snapshotState;m.callback&&(g(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(f,m,y,S,C,E,P,A,R){y===void 0&&(y=!1),this.snapshotArea(S,C,E,P,m,A,R);var G=this.snapshotState;return G.getPixel=y,g(f,G),G.callback=null,this},snapshot:function(f,m,y){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,f,m,y)},snapshotArea:function(f,m,y,S,C,E,P){var A=this.snapshotState;return A.callback=C,A.type=E,A.encoder=P,A.getPixel=!1,A.x=f,A.y=m,A.width=Math.min(y,this.gameCanvas.width),A.height=Math.min(S,this.gameCanvas.height),this},snapshotPixel:function(f,m,y){return this.snapshotArea(f,m,1,1,y),this.snapshotState.getPixel=!0,this},batchSprite:function(f,m,y,S){var C=y.alpha*f.alpha;if(C!==0){var E=this.currentContext,P=this._tempMatrix1,A=this._tempMatrix2,R=m.canvasData,G=R.x,b=R.y,L=m.cutWidth,w=m.cutHeight,B=m.customPivot,N=m.source.resolution,Y=f.displayOriginX,U=f.displayOriginY,W=-Y+m.x,O=-U+m.y;if(f.isCropped){var V=f._crop;(V.flipX!==f.flipX||V.flipY!==f.flipY)&&m.updateCropUVs(V,f.flipX,f.flipY),L=V.cw,w=V.ch,G=V.cx,b=V.cy,W=-Y+V.x,O=-U+V.y,f.flipX&&(W>=0?W=-(W+L):W<0&&(W=Math.abs(W)-L)),f.flipY&&(O>=0?O=-(O+w):O<0&&(O=Math.abs(O)-w))}var X=1,z=1;f.flipX&&(B||(W+=-m.realWidth+Y*2),X=-1),f.flipY&&(B||(O+=-m.realHeight+U*2),z=-1);var I=f.x,Z=f.y;if(y.roundPixels&&(I=Math.floor(I),Z=Math.floor(Z)),A.applyITRS(I,Z,f.rotation,f.scaleX*X,f.scaleY*z),P.copyFrom(y.matrix),S?(P.multiplyWithOffset(S,-y.scrollX*f.scrollFactorX,-y.scrollY*f.scrollFactorY),A.e=I,A.f=Z):(A.e-=y.scrollX*f.scrollFactorX,A.f-=y.scrollY*f.scrollFactorY),P.multiply(A),y.renderRoundPixels&&(P.e=Math.floor(P.e+.5),P.f=Math.floor(P.f+.5)),E.save(),P.setToContext(E),E.globalCompositeOperation=this.blendModes[f.blendMode],E.globalAlpha=C,E.imageSmoothingEnabled=!m.source.scaleMode,f.mask&&f.mask.preRenderCanvas(this,f,y),L>0&&w>0){var J=L/N,k=w/N;y.roundPixels&&(W=Math.floor(W+.5),O=Math.floor(O+.5),J+=.5,k+=.5),E.drawImage(m.source.image,G,b,L,w,W,O,J,k)}f.mask&&f.mask.postRenderCanvas(this,f,y),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});p.exports=d}),55830:((p,M,t)=>{p.exports={CanvasRenderer:t(68627),GetBlendModes:t(56373),SetTransform:t(20926)}}),56373:((p,M,t)=>{var h=t(10312),g=t(89289),o=function(){var a=[],r=g.supportNewBlendModes,e="source-over";return a[h.NORMAL]=e,a[h.ADD]="lighter",a[h.MULTIPLY]=r?"multiply":e,a[h.SCREEN]=r?"screen":e,a[h.OVERLAY]=r?"overlay":e,a[h.DARKEN]=r?"darken":e,a[h.LIGHTEN]=r?"lighten":e,a[h.COLOR_DODGE]=r?"color-dodge":e,a[h.COLOR_BURN]=r?"color-burn":e,a[h.HARD_LIGHT]=r?"hard-light":e,a[h.SOFT_LIGHT]=r?"soft-light":e,a[h.DIFFERENCE]=r?"difference":e,a[h.EXCLUSION]=r?"exclusion":e,a[h.HUE]=r?"hue":e,a[h.SATURATION]=r?"saturation":e,a[h.COLOR]=r?"color":e,a[h.LUMINOSITY]=r?"luminosity":e,a[h.ERASE]="destination-out",a[h.SOURCE_IN]="source-in",a[h.SOURCE_OUT]="source-out",a[h.SOURCE_ATOP]="source-atop",a[h.DESTINATION_OVER]="destination-over",a[h.DESTINATION_IN]="destination-in",a[h.DESTINATION_OUT]="destination-out",a[h.DESTINATION_ATOP]="destination-atop",a[h.LIGHTER]="lighter",a[h.COPY]="copy",a[h.XOR]="xor",a};p.exports=o}),20926:((p,M,t)=>{var h=t(91296),g=function(o,a,r,e,n){var u=e.alpha*r.alpha;if(u<=0)return!1;var s=h(r,e,n).calc;return a.globalCompositeOperation=o.blendModes[r.blendMode],a.globalAlpha=u,a.save(),s.setToContext(a),a.imageSmoothingEnabled=r.frame?!r.frame.source.scaleMode:o.antialias,!0};p.exports=g}),63899:(p=>{p.exports="losewebgl"}),6119:(p=>{p.exports="postrender"}),48070:(p=>{p.exports="prerender"}),15640:(p=>{p.exports="render"}),8912:(p=>{p.exports="resize"}),87124:(p=>{p.exports="restorewebgl"}),92503:((p,M,t)=>{p.exports={LOSE_WEBGL:t(63899),POST_RENDER:t(6119),PRE_RENDER:t(48070),RENDER:t(15640),RESIZE:t(8912),RESTORE_WEBGL:t(87124)}}),36909:((p,M,t)=>{p.exports={Events:t(92503),Snapshot:t(89966)},p.exports.Canvas=t(55830),p.exports.WebGL=t(4159)}),32880:((p,M,t)=>{var h=t(27919),g=t(40987),o=t(95540),a=function(r,e){var n=o(e,"callback"),u=o(e,"type","image/png"),s=o(e,"encoder",.92),l=Math.abs(Math.round(o(e,"x",0))),c=Math.abs(Math.round(o(e,"y",0))),d=Math.floor(o(e,"width",r.width)),f=Math.floor(o(e,"height",r.height)),m=o(e,"getPixel",!1);if(m){var y=r.getContext("2d",{willReadFrequently:!1}),S=y.getImageData(l,c,1,1),C=S.data;n.call(null,new g(C[0],C[1],C[2],C[3]))}else if(l!==0||c!==0||d!==r.width||f!==r.height){var E=h.createWebGL(this,d,f),P=E.getContext("2d",{willReadFrequently:!0});d>0&&f>0&&P.drawImage(r,l,c,d,f,0,0,d,f);var A=new Image;A.onerror=function(){n.call(null),h.remove(E)},A.onload=function(){n.call(null,A),h.remove(E)},A.src=E.toDataURL(u,s)}else{var R=new Image;R.onerror=function(){n.call(null)},R.onload=function(){n.call(null,R)},R.src=r.toDataURL(u,s)}};p.exports=a}),88815:((p,M,t)=>{var h=t(27919),g=t(40987),o=t(95540),a=function(r,e){var n=r,u=o(e,"callback"),s=o(e,"type","image/png"),l=o(e,"encoder",.92),c=Math.abs(Math.round(o(e,"x",0))),d=Math.abs(Math.round(o(e,"y",0))),f=o(e,"getPixel",!1),m=o(e,"isFramebuffer",!1),y=m?o(e,"bufferWidth",1):n.drawingBufferWidth,S=m?o(e,"bufferHeight",1):n.drawingBufferHeight;if(f){var C=new Uint8Array(4),E=m?d:S-d;n.readPixels(c,E,1,1,n.RGBA,n.UNSIGNED_BYTE,C),u.call(null,new g(C[0],C[1],C[2],C[3]))}else{var P=Math.floor(o(e,"width",y)),A=Math.floor(o(e,"height",S)),R=P*A*4,G=new Uint8Array(R);n.readPixels(c,S-d-A,P,A,n.RGBA,n.UNSIGNED_BYTE,G);for(var b=h.createWebGL(this,P,A),L=b.getContext("2d",{willReadFrequently:!0}),w=L.getImageData(0,0,P,A),B=w.data,N=0;N<A;N++)for(var Y=0;Y<P;Y++){var U=((A-N-1)*P+Y)*4,W=m?R-(N*P+(P-Y))*4:(N*P+Y)*4;B[W+0]=G[U+0],B[W+1]=G[U+1],B[W+2]=G[U+2],B[W+3]=G[U+3]}L.putImageData(w,0,0);var O=new Image;O.onerror=function(){u.call(null),h.remove(b)},O.onload=function(){u.call(null,O),h.remove(b)},O.src=b.toDataURL(s,l)}};p.exports=a}),89966:((p,M,t)=>{p.exports={Canvas:t(32880),WebGL:t(88815)}}),7530:((p,M,t)=>{var h=t(83419),g=t(36060),o=t(90330),a=t(82264),r=t(95540),e=t(32302),n=t(63448),u=t(31302),s=t(58918),l=t(14811),c=t(92651),d=t(96569),f=t(56527),m=t(57516),y=t(43439),S=t(81041),C=t(12385),E=t(7589),P=t(95428),A=t(72905),R=new h({initialize:function(b){this.game=b.game,this.renderer=b,this.classes=new o([[g.UTILITY_PIPELINE,E],[g.MULTI_PIPELINE,m],[g.BITMAPMASK_PIPELINE,u],[g.SINGLE_PIPELINE,C],[g.ROPE_PIPELINE,S],[g.LIGHT_PIPELINE,d],[g.POINTLIGHT_PIPELINE,y],[g.MOBILE_PIPELINE,f]]),this.postPipelineClasses=new o,this.pipelines=new o,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(G,b,L){var w=this.renderer,B=this.renderTargets;this.frameInc=Math.floor(r(G,"frameInc",32));var N=w.width,Y=w.height,U=this.game.config.disablePreFX,W=this.game.config.disablePostFX;if(W||this.postPipelineClasses.setAll([[String(l.BARREL),s.Barrel],[String(l.BLOOM),s.Bloom],[String(l.BLUR),s.Blur],[String(l.BOKEH),s.Bokeh],[String(l.CIRCLE),s.Circle],[String(l.COLOR_MATRIX),s.ColorMatrix],[String(l.DISPLACEMENT),s.Displacement],[String(l.GLOW),s.Glow],[String(l.GRADIENT),s.Gradient],[String(l.PIXELATE),s.Pixelate],[String(l.SHADOW),s.Shadow],[String(l.SHINE),s.Shine],[String(l.VIGNETTE),s.Vignette],[String(l.WIPE),s.Wipe]]),!U){this.classes.set(g.FX_PIPELINE,c);for(var O=Math.min(N,Y),V=Math.ceil(O/this.frameInc),X=1;X<V;X++){var z=X*this.frameInc;B.push(new e(w,z,z)),B.push(new e(w,z,z)),B.push(new e(w,z,z)),this.maxDimension=z}B.push(new e(w,N,Y,1,0,!0,!0)),B.push(new e(w,N,Y,1,0,!0,!0)),B.push(new e(w,N,Y,1,0,!0,!0))}var I,Z,J=this,k=this.game;if(this.classes.each(function(tt,ht){I=J.add(tt,new ht({game:k})),tt===g.UTILITY_PIPELINE&&(J.UTILITY_PIPELINE=I,J.fullFrame1=I.fullFrame1,J.fullFrame2=I.fullFrame2,J.halfFrame1=I.halfFrame1,J.halfFrame2=I.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(g.MOBILE_PIPELINE),U||(this.FX_PIPELINE=this.get(g.FX_PIPELINE)),G)for(Z in G){var j=G[Z];I=new j(k),I.name=Z,I.isPostFX?this.postPipelineClasses.set(Z,j):this.has(Z)||(this.classes.set(Z,j),this.add(Z,I))}this.default=this.get(b),L&&!a.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(G){var b=this.get(G);return b&&(this.default=b),b},add:function(G,b){if(b.isPostFX){console.warn(G+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,w=this.renderer;return L.has(G)?console.warn("Pipeline exists: "+G):(b.name=G,b.manager=this,L.set(G,b)),b.hasBooted||b.boot(),w.width!==0&&w.height!==0&&!b.isPreFX&&b.resize(w.width,w.height),b},addPostPipeline:function(G,b){this.postPipelineClasses.has(G)||this.postPipelineClasses.set(G,b)},flush:function(){this.current&&this.current.flush()},has:function(G){var b=this.pipelines;return typeof G=="string"?b.has(G):!!b.contains(G)},get:function(G){var b=this.pipelines;if(typeof G=="string")return b.get(G);if(b.contains(G))return G},getPostPipeline:function(G,b,L){var w=this.postPipelineClasses,B,N="",Y=typeof G;if(Y==="string"||Y==="number"?(B=w.get(G),N=G):Y==="function"?(w.contains(G)&&(B=G),N=G.name):Y==="object"&&(B=w.get(G.name),N=G.name),B){var U=new B(this.game,L);return U.name=N,b&&(U.gameObject=b),this.postPipelineInstances.push(U),U}},removePostPipeline:function(G){A(this.postPipelineInstances,G)},remove:function(G,b,L){b===void 0&&(b=!0),L===void 0&&(L=!0),this.pipelines.delete(G),b&&this.classes.delete(G),L&&this.postPipelineClasses.delete(G)},set:function(G,b,L){if(!G.isPostFX)return this.isCurrent(G,L)||(this.flush(),this.current&&this.current.unbind(),this.current=G,G.bind(L)),G.updateProjectionMatrix(),G.onBind(b),G},preBatch:function(G){if(G.hasPostPipeline){this.flush();for(var b=G.postPipelines,L=b.length-1;L>=0;L--){var w=b[L];w.active&&w.preBatch(G)}}},postBatch:function(G){if(G.hasPostPipeline){this.flush();for(var b=G.postPipelines,L=0;L<b.length;L++){var w=b[L];w.active&&w.postBatch(G)}}},preBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var b=G.postPipelines,L=b.length-1;L>=0;L--){var w=b[L];w.active&&w.preBatch(G)}}},postBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var b=G.postPipelines,L=0;L<b.length;L++){var w=b[L];w.active&&w.postBatch(G)}}},isCurrent:function(G,b){var L=this.renderer,w=this.current;return w&&!b&&(b=w.currentShader),!(w!==G||b.program!==L.currentProgram)},copyFrame:function(G,b,L,w,B){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(G,b,L,w,B),this},copyToGame:function(G){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(G),this},drawFrame:function(G,b,L,w){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(G,b,L,w),this},blendFrames:function(G,b,L,w,B){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(G,b,L,w,B),this},blendFramesAdditive:function(G,b,L,w,B){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(G,b,L,w,B),this},clearFrame:function(G,b){return this.UTILITY_PIPELINE.clearFrame(G,b),this},blitFrame:function(G,b,L,w,B,N){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(G,b,L,w,B,N),this},copyFrameRect:function(G,b,L,w,B,N,Y,U){return this.UTILITY_PIPELINE.copyFrameRect(G,b,L,w,B,N,Y,U),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(G){return this.UTILITY_PIPELINE.bind(G)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(G,b){b.restoreContext()}),P(this.postPipelineInstances,function(G){G.restoreContext()})},rebind:function(G){G===void 0&&this.previous&&(G=this.previous);var b=this.renderer,L=b.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),b.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,b.width,b.height),b.currentProgram=null,b.setBlendMode(0,!0);var w=b.vaoExtension;w&&w.bindVertexArrayOES(null);var B=this.pipelines.entries;for(var N in B)B[N].glReset=!0;G&&(this.current=G,G.rebind())},clear:function(){var G=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,G.currentProgram=null,G.setBlendMode(0,!0);var b=G.vaoExtension;b&&b.bindVertexArrayOES(null)},getRenderTarget:function(G){var b=this.renderTargets,L=3;if(G>this.maxDimension)return this.targetIndex=b.length-L,b[this.targetIndex];var w=(n(G,this.frameInc,0,!0)-1)*L;return this.targetIndex=w,b[w]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});p.exports=R}),32302:((p,M,t)=>{var h=t(83419),g=t(92503),o=new h({initialize:function(r,e,n,u,s,l,c,d,f){u===void 0&&(u=1),s===void 0&&(s=0),l===void 0&&(l=!0),c===void 0&&(c=!1),d===void 0&&(d=!0),f===void 0&&(f=!0),this.renderer=r,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=u,this.minFilter=s,this.autoClear=l,this.autoResize=!0,this.hasDepthBuffer=d,this.forceClamp=f,this.init(e,n),c?this.renderer.on(g.RESIZE,this.resize,this):this.autoResize=!1},init:function(a,r){var e=this.renderer;this.texture=e.createTextureFromSource(null,a,r,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(a,r,this.texture,this.hasDepthBuffer),this.width=a,this.height=r},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,r){if(this.autoResize&&this.willResize(a,r)){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),this.texture=e.createTextureFromSource(null,a,r,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(a,r,this.texture,this.hasDepthBuffer),this.width=a,this.height=r}return this},willResize:function(a,r){return typeof a!="number"||typeof r!="number"?!1:(a=Math.round(a*this.scale),r=Math.round(r*this.scale),a=Math.max(a,1),r=Math.max(r,1),a!==this.width||r!==this.height)},bind:function(a,r,e){a===void 0&&(a=!1);var n=this.renderer;if(a&&n.flush(),r&&e&&this.resize(r,e),n.pushFramebuffer(this.framebuffer,!1,!1),a&&this.adjustViewport(),this.autoClear){var u=this.renderer.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)}n.clearStencilMask()},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(a,r,e,n){var u=this.renderer,s=u.gl;u.pushFramebuffer(this.framebuffer),a!==void 0&&r!==void 0&&e!==void 0&&n!==void 0?(s.enable(s.SCISSOR_TEST),s.scissor(a,r,e,n)):s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var r=this.renderer;return a&&r.flush(),r.popFramebuffer()},destroy:function(){var a=this.renderer;a.off(g.RESIZE,this.resize,this),a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});p.exports=o}),70554:(p=>{p.exports={getTintFromFloats:function(M,t,h,g){var o=(M*255|0)&255,a=(t*255|0)&255,r=(h*255|0)&255,e=(g*255|0)&255;return(e<<24|o<<16|a<<8|r)>>>0},getTintAppendFloatAlpha:function(M,t){var h=(t*255|0)&255;return(h<<24|M)>>>0},getTintAppendFloatAlphaAndSwap:function(M,t){var h=(M>>16|0)&255,g=(M>>8|0)&255,o=(M|0)&255,a=(t*255|0)&255;return(a<<24|o<<16|g<<8|h)>>>0},getFloatsFromUintRGB:function(M){var t=(M>>16|0)&255,h=(M>>8|0)&255,g=(M|0)&255;return[t/255,h/255,g/255]},checkShaderMax:function(M,t){var h=Math.min(16,M.getParameter(M.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?h:Math.min(h,t)},parseFragmentShaderMaxTextures:function(M,t){if(!M)return"";for(var h="",g=0;g<t;g++)g>0&&(h+=`
	else `),g<t-1&&(h+="if (outTexId < "+g+".5)"),h+=`
	{`,h+=`
		texture = texture2D(uMainSampler[`+g+"], outTexCoord);",h+=`
	}`;return M=M.replace(/%count%/gi,t.toString()),M.replace(/%forloop%/gi,h)},setGlowQuality:function(M,t,h,g){return h===void 0&&(h=t.config.glowFXQuality),g===void 0&&(g=t.config.glowFXDistance),M=M.replace(/__SIZE__/gi,(1/h/g).toFixed(7)),M=M.replace(/__DIST__/gi,g.toFixed(0)+".0"),M}}}),29100:((p,M,t)=>{var h=t(83419),g=t(62644),o=t(50792),a=t(77085),r=t(95540),e=t(37867),n=t(92503),u=t(32302),s=t(70554),l=t(38683),c=new h({Extends:o,initialize:function(f){o.call(this);var m=f.game,y=m.renderer,S=y.gl;this.name=r(f,"name","WebGLPipeline"),this.game=m,this.renderer=y,this.manager,this.gl=S,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=r(f,"topology",S.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=r(f,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=f,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=r(f,"resizeUniform","")},boot:function(){var d,f=this.gl,m=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new e().identity());var S=this.renderTargets,C=r(m,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var E=y.width,P=y.height;if(typeof C=="number")for(d=0;d<C;d++)S.push(new u(y,E,P,1,0,!0));else if(Array.isArray(C))for(d=0;d<C.length;d++){var A=r(C[d],"scale",1),R=r(C[d],"minFilter",0),G=r(C[d],"autoClear",1),b=r(C[d],"autoResize",!1),L=r(C[d],"width",null),w=r(C[d],"height",L);L?S.push(new u(y,L,w,1,R,G,b)):S.push(new u(y,E,P,A,R,G,b))}S.length&&(this.currentRenderTarget=S[0]),this.setShadersFromConfig(m);var B=this.shaders,N=0;for(d=0;d<B.length;d++)B[d].vertexSize>N&&(N=B[d].vertexSize);var Y=r(m,"batchSize",y.config.batchSize);this.vertexCapacity=Y*6;var U=new ArrayBuffer(this.vertexCapacity*N);this.vertexData=U,this.bytes=new Uint8Array(U),this.vertexViewF32=new Float32Array(U),this.vertexViewU32=new Uint32Array(U);var W=r(m,"vertices",null);for(W?(this.vertexViewF32.set(W),this.vertexBuffer=y.createVertexBuffer(U,f.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(U.byteLength,f.DYNAMIC_DRAW),this.setVertexBuffer(),d=B.length-1;d>=0;d--)B[d].rebind();this.hasBooted=!0,y.on(n.RESIZE,this.resize,this),y.on(n.PRE_RENDER,this.onPreRender,this),y.on(n.RENDER,this.onRender,this),y.on(n.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,f,m){var y=this.renderer;if(d!==this.currentShader||y.currentProgram!==this.currentShader.program){this.flush();var S=this.setVertexBuffer(m);S&&!f&&(f=!0),d.bind(f,!1),this.currentShader=d}return this},getShaderByName:function(d){for(var f=this.shaders,m=0;m<f.length;m++)if(f[m].name===d)return f[m]},setShadersFromConfig:function(d){var f,m=this.shaders,y=this.renderer;for(f=0;f<m.length;f++)m[f].destroy();var S="vertShader",C="fragShader",E="attributes",P=r(d,S,null),A=s.parseFragmentShaderMaxTextures(r(d,C,null),y.maxTextures),R=r(d,E,null),G=r(d,"shaders",[]),b=G.length;if(b===0)P&&A&&(this.shaders=[new l(this,"default",P,A,g(R))]);else{var L=[];for(f=0;f<b;f++){var w=G[f],B,N,Y,U;if(typeof w=="string"?(B="default",N=P,Y=s.parseFragmentShaderMaxTextures(w,y.maxTextures),U=R):(B=r(w,"name","default"),N=r(w,S,P),Y=s.parseFragmentShaderMaxTextures(r(w,C,A),y.maxTextures),U=r(w,E,R)),B==="default"){var W=Y.split(`
`),O=W[0].trim();O.indexOf("#define SHADER_NAME")>-1&&(B=O.substring(20))}N&&Y&&L.push(new l(this,B,N,Y,g(U)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(d){return this.currentBatch={start:this.vertexCount,count:0,texture:[d],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=d,this.batch.push(this.currentBatch),0},addTextureToBatch:function(d){var f=this.currentBatch;f&&(f.texture.push(d),f.unit++,f.maxUnit++)},pushBatch:function(d){if(!this.currentBatch||this.forceZero&&d!==this.currentTexture)return this.createBatch(d);if(d===this.currentTexture)return this.currentUnit;var f=this.currentBatch,m=f.texture.indexOf(d);return m===-1?f.texture.length===this.renderer.maxTextures?this.createBatch(d):(f.unit++,f.maxUnit++,f.texture.push(d),this.currentUnit=f.unit,this.currentTexture=d,f.unit):(this.currentUnit=m,this.currentTexture=d,m)},setGameObject:function(d,f){return f===void 0&&(f=d.frame),this.pushBatch(f.source.glTexture)},shouldFlush:function(d){return d===void 0&&(d=0),this.vertexCount+d>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(d,f){(d!==this.width||f!==this.height)&&this.flush(),this.width=d,this.height=f;for(var m=this.renderTargets,y=0;y<m.length;y++)m[y].resize(d,f);return this.setProjectionMatrix(d,f),this.resizeUniform&&this.set2f(this.resizeUniform,d,f),this.emit(a.RESIZE,d,f,this),this.onResize(d,f),this},setProjectionMatrix:function(d,f){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=d,this.projectionHeight=f,m.ortho(0,d,f,0,-1e3,1e3);for(var y=this.shaders,S="uProjectionMatrix",C=0;C<y.length;C++){var E=y[C];E.hasUniform(S)&&(E.resetUniform(S),E.setMatrix4fv(S,!1,m.val,E))}return this},flipProjectionMatrix:function(d){d===void 0&&(d=!0);var f=this.projectionMatrix;if(!f)return this;var m=this.projectionWidth,y=this.projectionHeight;d?f.ortho(0,m,0,y,-1e3,1e3):f.ortho(0,m,y,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,f.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var d=this.renderer.projectionWidth,f=this.renderer.projectionHeight;(this.projectionWidth!==d||this.projectionHeight!==f)&&this.setProjectionMatrix(d,f)}},bind:function(d){if(d===void 0&&(d=this.currentShader),this.glReset)return this.rebind(d);var f=!1,m=this.gl;return m.getParameter(m.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,f=!0),d.bind(f),this.currentShader=d,this.activeTextures.length=0,this.emit(a.BIND,this,d),this.onActive(d),this},rebind:function(d){this.activeBuffer=null,this.setVertexBuffer();for(var f=this.shaders,m=f.length-1;m>=0;m--){var y=f[m].rebind();(!d||y===d)&&(this.currentShader=y)}return this.activeTextures.length=0,this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var d=this.shaders,f=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,f&&this.setVertexBuffer();for(var m=0;m<d.length;m++){var y=d[m];y.syncUniforms(),f&&y.rebind()}},setVertexBuffer:function(d){if(d===void 0&&(d=this.vertexBuffer),d!==this.activeBuffer){var f=this.gl;return this.gl.bindBuffer(f.ARRAY_BUFFER,d.webGLBuffer),this.activeBuffer=d,!0}return!1},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){if(d===void 0&&(d=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,d),this.onBeforeFlush(d);var f=this.gl,m=this.vertexCount,y=this.currentShader.vertexSize,S=this.topology;if(this.active){this.setVertexBuffer(),m===this.vertexCapacity?f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.DYNAMIC_DRAW):f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,m*y));var C,E,P,A=this.batch,R=this.activeTextures;if(this.forceZero)for(R[0]||f.activeTexture(f.TEXTURE0),C=0;C<A.length;C++)E=A[C],P=E.texture[0],R[0]!==P&&(f.bindTexture(f.TEXTURE_2D,P.webGLTexture),R[0]=P),f.drawArrays(S,E.start,E.count);else for(C=0;C<A.length;C++){E=A[C];for(var G=0;G<=E.maxUnit;G++)P=E.texture[G],R[G]!==P&&(f.activeTexture(f.TEXTURE0+G),f.bindTexture(f.TEXTURE_2D,P.webGLTexture),R[G]=P);f.drawArrays(S,E.start,E.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(a.AFTER_FLUSH,this,d),this.onAfterFlush(d)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,f,m,y,S,C,E){var P=this.vertexViewF32,A=this.vertexViewU32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++R]=d,P[++R]=f,P[++R]=m,P[++R]=y,P[++R]=S,P[++R]=C,A[++R]=E,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(d,f,m,y,S,C,E,P,A,R,G,b,L,w,B,N,Y,U,W,O){O===void 0&&(O=this.currentUnit);var V=!1;this.shouldFlush(6)&&(this.flush(),V=!0),this.currentBatch||(O=this.setTexture2D(W));var X=this.vertexViewF32,z=this.vertexViewU32,I=this.vertexCount*this.currentShader.vertexComponentCount-1;return X[++I]=f,X[++I]=m,X[++I]=R,X[++I]=G,X[++I]=O,X[++I]=U,z[++I]=w,X[++I]=y,X[++I]=S,X[++I]=R,X[++I]=L,X[++I]=O,X[++I]=U,z[++I]=N,X[++I]=C,X[++I]=E,X[++I]=b,X[++I]=L,X[++I]=O,X[++I]=U,z[++I]=Y,X[++I]=f,X[++I]=m,X[++I]=R,X[++I]=G,X[++I]=O,X[++I]=U,z[++I]=w,X[++I]=C,X[++I]=E,X[++I]=b,X[++I]=L,X[++I]=O,X[++I]=U,z[++I]=Y,X[++I]=P,X[++I]=A,X[++I]=b,X[++I]=G,X[++I]=O,X[++I]=U,z[++I]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(d),V},batchTri:function(d,f,m,y,S,C,E,P,A,R,G,b,L,w,B,N,Y){Y===void 0&&(Y=this.currentUnit);var U=!1;this.shouldFlush(3)&&(this.flush(),U=!0),this.currentBatch||(Y=this.setTexture2D(N));var W=this.vertexViewF32,O=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return W[++V]=f,W[++V]=m,W[++V]=P,W[++V]=A,W[++V]=Y,W[++V]=B,O[++V]=b,W[++V]=y,W[++V]=S,W[++V]=P,W[++V]=G,W[++V]=Y,W[++V]=B,O[++V]=L,W[++V]=C,W[++V]=E,W[++V]=R,W[++V]=G,W[++V]=Y,W[++V]=B,O[++V]=w,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(d),U},drawFillRect:function(d,f,m,y,S,C,E,P){E===void 0&&(E=this.renderer.whiteTexture),P===void 0&&(P=!0),d=Math.floor(d),f=Math.floor(f);var A=Math.floor(d+m),R=Math.floor(f+y),G=this.setTexture2D(E),b=s.getTintAppendFloatAlphaAndSwap(S,C),L=0,w=0,B=1,N=1;P&&(w=1,N=0),this.batchQuad(null,d,f,d,R,A,R,A,f,L,w,B,N,b,b,b,b,0,E,G)},setTexture2D:function(d){return d===void 0&&(d=this.renderer.whiteTexture),this.pushBatch(d)},bindTexture:function(d,f){f===void 0&&(f=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+f),m.bindTexture(m.TEXTURE_2D,d.webGLTexture),this},bindRenderTarget:function(d,f){return this.bindTexture(d.texture,f)},setTime:function(d,f){return this.set1f(d,this.game.loop.getDuration(),f),this},setBoolean:function(d,f,m){return m===void 0&&(m=this.currentShader),m.setBoolean(d,f),this},set1f:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1f(d,f),this},set2f:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.set2f(d,f,m),this},set3f:function(d,f,m,y,S){return S===void 0&&(S=this.currentShader),S.set3f(d,f,m,y),this},set4f:function(d,f,m,y,S,C){return C===void 0&&(C=this.currentShader),C.set4f(d,f,m,y,S),this},set1fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1fv(d,f),this},set2fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set2fv(d,f),this},set3fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set3fv(d,f),this},set4fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set4fv(d,f),this},set1iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1iv(d,f),this},set2iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set2iv(d,f),this},set3iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set3iv(d,f),this},set4iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set4iv(d,f),this},set1i:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1i(d,f),this},set2i:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.set2i(d,f,m),this},set3i:function(d,f,m,y,S){return S===void 0&&(S=this.currentShader),S.set3i(d,f,m,y),this},set4i:function(d,f,m,y,S,C){return C===void 0&&(C=this.currentShader),C.set4i(d,f,m,y,S),this},setMatrix2fv:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(d,f,m),this},setMatrix3fv:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(d,f,m),this},setMatrix4fv:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(d,f,m),this},destroy:function(){this.emit(a.DESTROY,this);var d,f=this.shaders;for(d=0;d<f.length;d++)f[d].destroy();var m=this.renderTargets;for(d=0;d<m.length;d++)m[d].destroy();var y=this.renderer;return y.deleteBuffer(this.vertexBuffer),y.off(n.RESIZE,this.resize,this),y.off(n.PRE_RENDER,this.onPreRender,this),y.off(n.RENDER,this.onRender,this),y.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});p.exports=c}),74797:((p,M,t)=>{var h=t(95428),g=t(72905),o=t(19715),a=t(83419),r=t(8054),e=t(50792),n=t(92503),u=t(50030),s=t(37867),l=t(29747),c=t(7530),d=t(32302),f=t(97480),m=t(69442),y=t(70554),S=t(88815),C=t(26128),E=t(1482),P=t(82751),A=t(84387),R=t(93567),G=t(57183),b=new a({Extends:e,initialize:function(w){e.call(this);var B=w.config,N={alpha:B.transparent,desynchronized:B.desynchronized,depth:!0,antialias:B.antialiasGL,premultipliedAlpha:B.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:B.failIfMajorPerformanceCaveat,powerPreference:B.powerPreference,preserveDrawingBuffer:B.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:B.clearBeforeRender,antialias:B.antialias,backgroundColor:B.backgroundColor,contextCreation:N,roundPixels:B.roundPixels,maxTextures:B.maxTextures,maxTextureSize:B.maxTextureSize,batchSize:B.batchSize,maxLights:B.maxLights,mipmapFilter:B.mipmapFilter},this.game=w,this.type=r.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=w.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.previousContextLostHandler=l,this.previousContextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(L){var w,B=this.game,N=this.canvas,Y=L.backgroundColor;if(B.config.context?w=B.config.context:w=N.getContext("webgl",L.contextCreation)||N.getContext("experimental-webgl",L.contextCreation),!w||w.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=w,this.setExtensions(),this.setContextHandlers(),B.context=w;for(var U=0;U<=27;U++)this.blendModes.push({func:[w.ONE,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_ADD});this.blendModes[1].func=[w.ONE,w.DST_ALPHA],this.blendModes[2].func=[w.DST_COLOR,w.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[w.ONE,w.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[w.ZERO,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_REVERSE_SUBTRACT},this.glFormats=[w.BYTE,w.SHORT,w.UNSIGNED_BYTE,w.UNSIGNED_SHORT,w.FLOAT],this.glFuncMap={mat2:{func:w.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:w.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:w.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:w.uniform1f,length:1},"1fv":{func:w.uniform1fv,length:1},"1i":{func:w.uniform1i,length:1},"1iv":{func:w.uniform1iv,length:1},"2f":{func:w.uniform2f,length:2},"2fv":{func:w.uniform2fv,length:1},"2i":{func:w.uniform2i,length:2},"2iv":{func:w.uniform2iv,length:1},"3f":{func:w.uniform3f,length:3},"3fv":{func:w.uniform3fv,length:1},"3i":{func:w.uniform3i,length:3},"3iv":{func:w.uniform3iv,length:1},"4f":{func:w.uniform4f,length:4},"4fv":{func:w.uniform4fv,length:1},"4i":{func:w.uniform4i,length:4},"4iv":{func:w.uniform4iv,length:1}},(!L.maxTextures||L.maxTextures===-1)&&(L.maxTextures=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS)),L.maxTextureSize||(L.maxTextureSize=w.getParameter(w.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.clearColor(Y.redGL,Y.greenGL,Y.blueGL,Y.alphaGL),w.clear(w.COLOR_BUFFER_BIT);var W=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return W.indexOf(L.mipmapFilter)!==-1&&(this.mipmapFilter=w[L.mipmapFilter]),this.maxTextures=y.checkShaderMax(w,L.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new c(this),this.setBlendMode(r.BlendModes.NORMAL),this.projectionMatrix=new s().identity(),B.textures.once(m.READY,this.boot,this),this},boot:function(){var L=this.game,w=this.pipelines,B=L.scale.baseSize,N=B.width,Y=B.height;this.width=N,this.height=Y,this.isBooted=!0,this.renderTarget=new d(this,N,Y,1,0,!0,!0),this.maskTarget=new d(this,N,Y,1,0,!0,!0),this.maskSource=new d(this,N,Y,1,0,!0,!0);var U=L.config;w.boot(U.pipeline,U.defaultPipeline,U.autoMobilePipeline),this.blankTexture=L.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=L.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=L.textures.getFrame("__WHITE").glTexture;var W=this.gl;W.bindFramebuffer(W.FRAMEBUFFER,null),W.enable(W.SCISSOR_TEST),L.scale.on(f.RESIZE,this.onResize,this),this.resize(N,Y)},setExtensions:function(){var L=this.gl,w=L.getSupportedExtensions();this.supportedExtensions=w;var B="ANGLE_instanced_arrays";this.instancedArraysExtension=w.indexOf(B)>-1?L.getExtension(B):null;var N="OES_vertex_array_object";this.vaoExtension=w.indexOf(N)>-1?L.getExtension(N):null},setContextHandlers:function(L,w){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof L=="function"?this.contextLostHandler=L.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof w=="function"?this.contextRestoredHandler=w.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(L){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(n.LOSE_WEBGL,this),L.preventDefault()},dispatchContextRestored:function(L){var w=this.gl;if(w.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(r.BlendModes.NORMAL),w.disable(w.BLEND),w.disable(w.DEPTH_TEST),w.enable(w.CULL_FACE),this.compression=this.getCompressedTextures();var B=function(N){N.createResource()};h(this.glTextureWrappers,B),h(this.glBufferWrappers,B),h(this.glFramebufferWrappers,B),h(this.glProgramWrappers,B),h(this.glAttribLocationWrappers,B),h(this.glUniformLocationWrappers,B),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(n.RESTORE_WEBGL,this),L.preventDefault()},createTemporaryTextures:function(){for(var L=this.gl,w=0;w<this.maxTextures;w++){var B=L.createTexture();L.activeTexture(L.TEXTURE0+w),L.bindTexture(L.TEXTURE_2D,B),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(w)}},captureFrame:function(L,w){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(L,w,B){},stopCapture:function(){},onCapture:function(L){},onResize:function(L,w){(w.width!==this.width||w.height!==this.height)&&this.resize(w.width,w.height)},beginCapture:function(L,w){L===void 0&&(L=this.width),w===void 0&&(w=this.height),this.renderTarget.bind(!0,L,w),this.setProjectionMatrix(L,w)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(L,w){var B=this.gl;return this.width=L,this.height=w,this.setProjectionMatrix(L,w),B.viewport(0,0,L,w),this.drawingBufferHeight=B.drawingBufferHeight,B.scissor(0,B.drawingBufferHeight-w,L,w),this.defaultScissor[2]=L,this.defaultScissor[3]=w,this.emit(n.RESIZE,L,w),this},getCompressedTextures:function(){var L="WEBGL_compressed_texture_",w="WEBKIT_"+L,B="EXT_texture_compression_",N=function(U,W){var O=U.getExtension(L+W)||U.getExtension(w+W)||U.getExtension(B+W);if(O){var V={};for(var X in O)V[O[X]]=X;return V}},Y=this.gl;return{ETC:N(Y,"etc"),ETC1:N(Y,"etc1"),ATC:N(Y,"atc"),ASTC:N(Y,"astc"),BPTC:N(Y,"bptc"),RGTC:N(Y,"rgtc"),PVRTC:N(Y,"pvrtc"),S3TC:N(Y,"s3tc"),S3TCSRGB:N(Y,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(L,w){var B=this.compression[L.toUpperCase()];if(w in B)return B[w]},supportsCompressedTexture:function(L,w){var B=this.compression[L.toUpperCase()];return B?w?w in B:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(L,w){return(L!==this.projectionWidth||w!==this.projectionHeight)&&(this.projectionWidth=L,this.projectionHeight=w,this.projectionMatrix.ortho(0,L,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(L){return this.supportedExtensions?this.supportedExtensions.indexOf(L):!1},getExtension:function(L){return this.hasExtension(L)?(L in this.extensions||(this.extensions[L]=this.gl.getExtension(L)),this.extensions[L]):null},flush:function(){this.pipelines.flush()},pushScissor:function(L,w,B,N,Y){Y===void 0&&(Y=this.drawingBufferHeight);var U=this.scissorStack,W=[L,w,B,N];return U.push(W),this.setScissor(L,w,B,N,Y),this.currentScissor=W,W},setScissor:function(L,w,B,N,Y){Y===void 0&&(Y=this.drawingBufferHeight);var U=this.gl,W=this.currentScissor,O=B>0&&N>0;if(W&&O){var V=W[0],X=W[1],z=W[2],I=W[3];O=V!==L||X!==w||z!==B||I!==N}O&&(this.flush(),U.scissor(L,Y-w-N,B,N))},resetScissor:function(){var L=this.gl;L.enable(L.SCISSOR_TEST);var w=this.currentScissor;if(w){var B=w[0],N=w[1],Y=w[2],U=w[3];Y>0&&U>0&&L.scissor(B,this.drawingBufferHeight-N-U,Y,U)}},popScissor:function(){var L=this.scissorStack;L.pop();var w=L[L.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var L=this.currentMask.mask,w=this.currentCameraMask.mask;return L&&L.isStencil||w&&w.isStencil},resetViewport:function(){var L=this.gl;L.viewport(0,0,this.width,this.height),this.drawingBufferHeight=L.drawingBufferHeight},setBlendMode:function(L,w){w===void 0&&(w=!1);var B=this.gl,N=this.blendModes[L];return w||L!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==L?(this.flush(),B.enable(B.BLEND),B.blendEquation(N.equation),N.func.length>2?B.blendFuncSeparate(N.func[0],N.func[1],N.func[2],N.func[3]):B.blendFunc(N.func[0],N.func[1]),this.currentBlendMode=L,!0):!1},addBlendMode:function(L,w){var B=this.blendModes.push({func:L,equation:w});return B-1},updateBlendMode:function(L,w,B){return this.blendModes[L]&&(this.blendModes[L].func=w,B&&(this.blendModes[L].equation=B)),this},removeBlendMode:function(L){return L>17&&this.blendModes[L]&&this.blendModes.splice(L,1),this},pushFramebuffer:function(L,w,B,N,Y){return L===this.currentFramebuffer?this:(this.fboStack.push(L),this.setFramebuffer(L,w,B,N,Y))},setFramebuffer:function(L,w,B,N,Y){if(w===void 0&&(w=!1),B===void 0&&(B=!0),N===void 0&&(N=null),Y===void 0&&(Y=!1),L===this.currentFramebuffer)return this;var U=this.gl,W=this.width,O=this.height;return L&&L.renderTexture&&B?(W=L.renderTexture.width,O=L.renderTexture.height):this.flush(),L?U.bindFramebuffer(U.FRAMEBUFFER,L.webGLFramebuffer):U.bindFramebuffer(U.FRAMEBUFFER,null),B&&U.viewport(0,0,W,O),N&&U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,N.webGLTexture,0),Y&&(U.clearColor(0,0,0,0),U.clear(U.COLOR_BUFFER_BIT)),w&&(L?(this.drawingBufferHeight=O,this.pushScissor(0,0,W,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=L,this},popFramebuffer:function(L,w){L===void 0&&(L=!1),w===void 0&&(w=!0);var B=this.fboStack;B.pop();var N=B[B.length-1];return N||(N=null),this.setFramebuffer(N,L,w),N},restoreFramebuffer:function(L,w){L===void 0&&(L=!1),w===void 0&&(w=!0);var B=this.fboStack,N=B[B.length-1];N||(N=null),this.currentFramebuffer=null,this.setFramebuffer(N,L,w)},setProgram:function(L){return L!==this.currentProgram?(this.flush(),this.gl.useProgram(L.webGLProgram),this.currentProgram=L,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(L,w,B,N,Y){Y===void 0&&(Y=!1);var U=this.gl,W=U.NEAREST,O=U.NEAREST,V=U.CLAMP_TO_EDGE,X=null;w=L?L.width:w,B=L?L.height:B;var z=u(w,B);if(z&&!Y&&(V=U.REPEAT),N===r.ScaleModes.LINEAR&&this.config.antialias){var I=L&&L.compressed,Z=!I&&z||I&&L.mipmaps.length>1;W=this.mipmapFilter&&Z?this.mipmapFilter:U.LINEAR,O=U.LINEAR}return!L&&typeof w=="number"&&typeof B=="number"?X=this.createTexture2D(0,W,O,V,V,U.RGBA,null,w,B):X=this.createTexture2D(0,W,O,V,V,U.RGBA,L),X},createTexture2D:function(L,w,B,N,Y,U,W,O,V,X,z,I){typeof O!="number"&&(O=W?W.width:1),typeof V!="number"&&(V=W?W.height:1);var Z=new P(this.gl,L,w,B,N,Y,U,W,O,V,X,z,I);return this.glTextureWrappers.push(Z),Z},createFramebuffer:function(L,w,B,N){this.currentFramebuffer=null;var Y=new A(this.gl,L,w,B,N);return this.glFramebufferWrappers.push(Y),Y},beginBitmapMask:function(L,w){var B=this.gl;B&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==L&&(this.currentMask.mask=L,this.currentMask.camera=w))},drawBitmapMask:function(L,w,B){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),L.renderWebGL(this,L,w),this.maskSource.unbind(!0),this.maskTarget.unbind();var N=this.gl,Y=this.getCurrentStencilMask();Y?(N.enable(N.STENCIL_TEST),Y.mask.applyStencil(this,Y.camera,!0)):this.currentMask.mask=null,this.pipelines.set(B),N.activeTexture(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,this.maskTarget.texture.webGLTexture),N.activeTexture(N.TEXTURE1),N.bindTexture(N.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(L,w){var B=new E(this.gl,L,w);return this.glProgramWrappers.push(B),B},createVertexBuffer:function(L,w){var B=this.gl,N=new C(B,L,B.ARRAY_BUFFER,w);return this.glBufferWrappers.push(N),N},createAttribLocation:function(L,w){var B=new R(this.gl,L,w);return this.glAttribLocationWrappers.push(B),B},createUniformLocation:function(L,w){var B=new G(this.gl,L,w);return this.glUniformLocationWrappers.push(B),B},createIndexBuffer:function(L,w){var B=this.gl,N=new C(B,L,B.ELEMENT_ARRAY_BUFFER,w);return this.glBufferWrappers.push(N),N},deleteTexture:function(L){if(L)return g(this.glTextureWrappers,L),L.destroy(),this},deleteFramebuffer:function(L){return L?(g(this.fboStack,L),g(this.glFramebufferWrappers,L),L.destroy(),this):this},deleteProgram:function(L){return L&&(g(this.glProgramWrappers,L),L.destroy()),this},deleteAttribLocation:function(L){return L&&(g(this.glAttribLocationWrappers,L),L.destroy()),this},deleteUniformLocation:function(L){return L&&(g(this.glUniformLocationWrappers,L),L.destroy()),this},deleteBuffer:function(L){return L?(g(this.glBufferWrappers,L),L.destroy(),this):this},preRenderCamera:function(L){var w=L.x,B=L.y,N=L.width,Y=L.height,U=L.backgroundColor;if(L.emit(o.PRE_RENDER,L),this.pipelines.preBatchCamera(L),this.pushScissor(w,B,N,Y),L.mask&&(this.currentCameraMask.mask=L.mask,this.currentCameraMask.camera=L._maskCamera,L.mask.preRenderWebGL(this,L,L._maskCamera)),U.alphaGL>0){var W=this.pipelines.setMulti();W.drawFillRect(w,B,N,Y,y.getTintFromFloats(U.blueGL,U.greenGL,U.redGL,1),U.alphaGL)}},getCurrentStencilMask:function(){var L=null,w=this.maskStack,B=this.currentCameraMask;return w.length>0?L=w[w.length-1]:B.mask&&B.mask.isStencil&&(L=B),L},postRenderCamera:function(L){var w=L.flashEffect,B=L.fadeEffect;if(w.isRunning||B.isRunning||B.isComplete){var N=this.pipelines.setMulti();w.postRenderWebGL(N,y.getTintFromFloats),B.postRenderWebGL(N,y.getTintFromFloats)}L.dirty=!1,this.popScissor(),L.mask&&(this.currentCameraMask.mask=null,L.mask.postRenderWebGL(this,L._maskCamera)),this.pipelines.postBatchCamera(L),L.emit(o.POST_RENDER,L)},preRender:function(){if(!this.contextLost){var L=this.gl;if(L.bindFramebuffer(L.FRAMEBUFFER,null),this.emit(n.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var w=this.config.backgroundColor;L.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)}L.enable(L.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&L.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(L,w,B){if(!this.contextLost){var N=w.length;if(this.emit(n.RENDER,L,B),this.preRenderCamera(B),N===0){this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(B);return}this.currentType="";for(var Y=this.currentMask,U=0;U<N;U++){this.finalType=U===N-1;var W=w[U],O=W.mask;Y=this.currentMask,Y.mask&&Y.mask!==O&&Y.mask.postRenderWebGL(this,Y.camera),O&&Y.mask!==O&&O.preRenderWebGL(this,W,B),W.blendMode!==this.currentBlendMode&&this.setBlendMode(W.blendMode);var V=W.type;V!==this.currentType&&(this.newType=!0,this.currentType=V),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=w[U+1].type===this.currentType,W.renderWebGL(this,W,B),this.newType=!1}Y=this.currentMask,Y.mask&&Y.mask.postRenderWebGL(this,Y.camera),this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(B)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var L=this.snapshotState;L.callback&&(S(this.gl,L),L.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var L=this.gl,w=this.getCurrentStencilMask();if(w){var B=w.mask;L.enable(L.STENCIL_TEST),B.invertAlpha?L.stencilFunc(L.NOTEQUAL,B.level,255):L.stencilFunc(L.EQUAL,B.level,255)}},snapshot:function(L,w,B){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,L,w,B)},snapshotArea:function(L,w,B,N,Y,U,W){var O=this.snapshotState;return O.callback=Y,O.type=U,O.encoder=W,O.getPixel=!1,O.x=L,O.y=w,O.width=B,O.height=N,this},snapshotPixel:function(L,w,B){return this.snapshotArea(L,w,1,1,B),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(L,w,B,N,Y,U,W,O,V,X,z){Y===void 0&&(Y=!1),U===void 0&&(U=0),W===void 0&&(W=0),O===void 0&&(O=w),V===void 0&&(V=B),X==="pixel"&&(Y=!0,X="image/png");var I=this.currentFramebuffer;this.snapshotArea(U,W,O,V,N,X,z);var Z=this.snapshotState;return Z.getPixel=Y,Z.isFramebuffer=!0,Z.bufferWidth=w,Z.bufferHeight=B,Z.width=Math.min(Z.width,w),Z.height=Math.min(Z.height,B),this.setFramebuffer(L),S(this.gl,Z),this.setFramebuffer(I),Z.callback=null,Z.isFramebuffer=!1,this},canvasToTexture:function(L,w,B,N){B===void 0&&(B=!1),N===void 0&&(N=!1);var Y=this.gl,U=Y.NEAREST,W=Y.NEAREST,O=L.width,V=L.height,X=Y.CLAMP_TO_EDGE,z=u(O,V);return!B&&z&&(X=Y.REPEAT),this.config.antialias&&(U=z&&this.mipmapFilter?this.mipmapFilter:Y.LINEAR,W=Y.LINEAR),w?(w.update(L,O,V,N,X,X,U,W,w.format),w):this.createTexture2D(0,U,W,X,X,Y.RGBA,L,O,V,!0,!1,N)},createCanvasTexture:function(L,w,B){return w===void 0&&(w=!1),B===void 0&&(B=!1),this.canvasToTexture(L,null,w,B)},updateCanvasTexture:function(L,w,B,N){return B===void 0&&(B=!1),N===void 0&&(N=!1),this.canvasToTexture(L,w,N,B)},videoToTexture:function(L,w,B,N){B===void 0&&(B=!1),N===void 0&&(N=!1);var Y=this.gl,U=Y.NEAREST,W=Y.NEAREST,O=L.videoWidth,V=L.videoHeight,X=Y.CLAMP_TO_EDGE,z=u(O,V);return!B&&z&&(X=Y.REPEAT),this.config.antialias&&(U=z&&this.mipmapFilter?this.mipmapFilter:Y.LINEAR,W=Y.LINEAR),w?(w.update(L,O,V,N,X,X,U,W,w.format),w):this.createTexture2D(0,U,W,X,X,Y.RGBA,L,O,V,!0,!0,N)},createVideoTexture:function(L,w,B){return w===void 0&&(w=!1),B===void 0&&(B=!1),this.videoToTexture(L,null,w,B)},updateVideoTexture:function(L,w,B,N){return B===void 0&&(B=!1),N===void 0&&(N=!1),this.videoToTexture(L,w,N,B)},createUint8ArrayTexture:function(L,w,B){var N=this.gl,Y=N.NEAREST,U=N.NEAREST,W=N.CLAMP_TO_EDGE,O=u(w,B);return O&&(W=N.REPEAT),this.createTexture2D(0,Y,U,W,W,N.RGBA,L,w,B)},setTextureFilter:function(L,w){var B=this.gl,N=w===0?B.LINEAR:B.NEAREST;B.activeTexture(B.TEXTURE0);var Y=B.getParameter(B.TEXTURE_BINDING_2D);return B.bindTexture(B.TEXTURE_2D,L.webGLTexture),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,N),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,N),L.minFilter=N,L.magFilter=N,Y&&B.bindTexture(B.TEXTURE_2D,Y),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var L=function(w){w.destroy()};h(this.glAttribLocationWrappers,L),h(this.glBufferWrappers,L),h(this.glFramebufferWrappers,L),h(this.glProgramWrappers,L),h(this.glTextureWrappers,L),h(this.glUniformLocationWrappers,L),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});p.exports=b}),38683:((p,M,t)=>{var h=t(83419),g=t(95428),o=t(95540),a=t(14500),r=new h({initialize:function(n,u,s,l,c){this.pipeline=n,this.name=u,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=l,this.vertSrc=s,this.program=this.renderer.createProgram(s,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(e){var n=0,u=0,s=[];this.vertexComponentCount=0;for(var l=0;l<e.length;l++){var c=e[l],d=c.name,f=o(c,"size",1),m=o(c,"type",a.FLOAT),y=m.enum,S=m.size,C=!!c.normalized;s.push({name:d,size:f,type:y,normalized:C,offset:u,enabled:!1,location:-1}),S===4?n+=f:n++,u+=f*S}this.vertexSize=u,this.vertexComponentCount=n,this.attributes=s},bind:function(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var n=this.gl,u=this.renderer,s=this.vertexSize,l=this.attributes,c=this.program,d=0;d<l.length;d++){var f=l[d],m=f.size,y=f.type,S=f.offset,C=f.enabled,E=f.location,P=!!f.normalized;if(e){E!==-1&&u.deleteAttribLocation(E);var A=this.renderer.createAttribLocation(c,f.name);A.webGLAttribLocation>=0?(n.enableVertexAttribArray(A.webGLAttribLocation),n.vertexAttribPointer(A.webGLAttribLocation,m,y,P,s,S),f.enabled=!0,f.location=A):A.webGLAttribLocation!==-1&&n.disableVertexAttribArray(A.webGLAttribLocation)}else C?n.vertexAttribPointer(E.webGLAttribLocation,m,y,P,s,S):!C&&E!==-1&&E.webGLAttribLocation>-1&&(n.disableVertexAttribArray(E.webGLAttribLocation),f.location=-1)}return this},createUniforms:function(){var e=this.gl,n=this.program,u=this.uniforms,s,l,c,d=e.getProgramParameter(n.webGLProgram,e.ACTIVE_UNIFORMS);for(s=0;s<d;s++){var f=e.getActiveUniform(n.webGLProgram,s);if(f){l=f.name,c=this.renderer.createUniformLocation(n,l),c!==null&&(u[l]={name:l,location:c,setter:null,value1:null,value2:null,value3:null,value4:null});var m=l.indexOf("[");m>0&&(l=l.substr(0,m),u.hasOwnProperty(l)||(c=this.renderer.createUniformLocation(n,l),c!==null&&(u[l]={name:l,location:c,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var e=this.gl;this.renderer.setProgram(this.program);for(var n in this.uniforms){var u=this.uniforms[n];u.setter&&u.setter.call(e,u.location.webGLUniformLocation,u.value1,u.value2,u.value3,u.value4)}},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var n=this.uniforms[e];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(e,n,u,s){var l=this.uniforms[n];return l?((s||l.value1!==u)&&(l.setter||(l.setter=e),l.value1=u,this.renderer.setProgram(this.program),e.call(this.gl,l.location.webGLUniformLocation,u),this.pipeline.currentShader=this),this):this},setUniform2:function(e,n,u,s,l){var c=this.uniforms[n];return c?((l||c.value1!==u||c.value2!==s)&&(c.setter||(c.setter=e),c.value1=u,c.value2=s,this.renderer.setProgram(this.program),e.call(this.gl,c.location.webGLUniformLocation,u,s),this.pipeline.currentShader=this),this):this},setUniform3:function(e,n,u,s,l,c){var d=this.uniforms[n];return d?((c||d.value1!==u||d.value2!==s||d.value3!==l)&&(d.setter||(d.setter=e),d.value1=u,d.value2=s,d.value3=l,this.renderer.setProgram(this.program),e.call(this.gl,d.location.webGLUniformLocation,u,s,l),this.pipeline.currentShader=this),this):this},setUniform4:function(e,n,u,s,l,c,d){var f=this.uniforms[n];return f?((d||f.value1!==u||f.value2!==s||f.value3!==l||f.value4!==c)&&(f.setter||(f.setter=e),f.value1=u,f.value2=s,f.value3=l,f.value4=c,this.renderer.setProgram(this.program),e.call(this.gl,f.location.webGLUniformLocation,u,s,l,c),this.pipeline.currentShader=this),this):this},setBoolean:function(e,n){return this.setUniform1(this.gl.uniform1i,e,Number(n))},set1f:function(e,n){return this.setUniform1(this.gl.uniform1f,e,n)},set2f:function(e,n,u){return this.setUniform2(this.gl.uniform2f,e,n,u)},set3f:function(e,n,u,s){return this.setUniform3(this.gl.uniform3f,e,n,u,s)},set4f:function(e,n,u,s,l){return this.setUniform4(this.gl.uniform4f,e,n,u,s,l)},set1fv:function(e,n){return this.setUniform1(this.gl.uniform1fv,e,n,!0)},set2fv:function(e,n){return this.setUniform1(this.gl.uniform2fv,e,n,!0)},set3fv:function(e,n){return this.setUniform1(this.gl.uniform3fv,e,n,!0)},set4fv:function(e,n){return this.setUniform1(this.gl.uniform4fv,e,n,!0)},set1iv:function(e,n){return this.setUniform1(this.gl.uniform1iv,e,n,!0)},set2iv:function(e,n){return this.setUniform1(this.gl.uniform2iv,e,n,!0)},set3iv:function(e,n){return this.setUniform1(this.gl.uniform3iv,e,n,!0)},set4iv:function(e,n){return this.setUniform1(this.gl.uniform4iv,e,n,!0)},set1i:function(e,n){return this.setUniform1(this.gl.uniform1i,e,n)},set2i:function(e,n,u){return this.setUniform2(this.gl.uniform2i,e,n,u)},set3i:function(e,n,u,s){return this.setUniform3(this.gl.uniform3i,e,n,u,s)},set4i:function(e,n,u,s,l){return this.setUniform4(this.gl.uniform4i,e,n,u,s,l)},setMatrix2fv:function(e,n,u){return this.setUniform2(this.gl.uniformMatrix2fv,e,n,u,!0)},setMatrix3fv:function(e,n,u){return this.setUniform2(this.gl.uniformMatrix3fv,e,n,u,!0)},setMatrix4fv:function(e,n,u){return this.setUniform2(this.gl.uniformMatrix4fv,e,n,u,!0)},createProgram:function(e,n){return e===void 0&&(e=this.vertSrc),n===void 0&&(n=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=e,this.fragSrc=n,this.program=this.renderer.createProgram(e,n),this.createUniforms(),this.rebind()},destroy:function(){var e=this.renderer;g(this.uniforms,function(n){e.deleteUniformLocation(n.location)}),this.uniforms=null,g(this.attributes,function(n){e.deleteAttribLocation(n.location)}),this.attributes=null,e.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});p.exports=r}),14500:(p=>{var M={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};p.exports=M}),4159:((p,M,t)=>{var h=t(14500),g=t(79291),o={PipelineManager:t(7530),Pipelines:t(96615),RenderTarget:t(32302),Utils:t(70554),WebGLPipeline:t(29100),WebGLRenderer:t(74797),WebGLShader:t(38683),Wrappers:t(9503)};o=g(!1,o,h),p.exports=o}),31302:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(78908),a=t(85191),r=t(14500),e=t(29100),n=new h({Extends:e,initialize:function(s){s.fragShader=g(s,"fragShader",o),s.vertShader=g(s,"vertShader",a),s.batchSize=g(s,"batchSize",1),s.vertices=g(s,"vertices",[-1,1,-1,-7,7,1]),s.attributes=g(s,"attributes",[{name:"inPosition",size:2,type:r.FLOAT}]),e.call(this,s)},boot:function(){e.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,s){e.prototype.resize.call(this,u,s),this.set2f("uResolution",u,s)},beginMask:function(u,s,l){this.renderer.beginBitmapMask(u,l)},endMask:function(u,s,l){var c=this.gl,d=this.renderer,f=u.bitmapMask;f&&c&&(d.drawBitmapMask(f,s,this),l&&this.set2f("uResolution",l.width,l.height),this.set1i("uInvertMaskAlpha",u.invertAlpha),c.drawArrays(this.topology,0,3),l&&this.set2f("uResolution",this.width,this.height),c.bindTexture(c.TEXTURE_2D,null))}});p.exports=n}),92651:((p,M,t)=>{var h=t(83419),g=t(58918),o=t(14811),a=t(95540),r=t(43558),e=t(89350),n=t(70554),u=new h({Extends:r,initialize:function(l){l.shaders=[n.setGlowQuality(e.FXGlowFrag,l.game),e.FXShadowFrag,e.FXPixelateFrag,e.FXVignetteFrag,e.FXShineFrag,e.FXBlurLowFrag,e.FXBlurMedFrag,e.FXBlurHighFrag,e.FXGradientFrag,e.FXBloomFrag,e.ColorMatrixFrag,e.FXCircleFrag,e.FXBarrelFrag,e.FXDisplacementFrag,e.FXWipeFrag,e.FXBokehFrag],r.call(this,l);var c=this.game;this.glow=new g.Glow(c),this.shadow=new g.Shadow(c),this.pixelate=new g.Pixelate(c),this.vignette=new g.Vignette(c),this.shine=new g.Shine(c),this.gradient=new g.Gradient(c),this.circle=new g.Circle(c),this.barrel=new g.Barrel(c),this.wipe=new g.Wipe(c),this.bokeh=new g.Bokeh(c);var d=[];d[o.GLOW]=this.onGlow,d[o.SHADOW]=this.onShadow,d[o.PIXELATE]=this.onPixelate,d[o.VIGNETTE]=this.onVignette,d[o.SHINE]=this.onShine,d[o.BLUR]=this.onBlur,d[o.GRADIENT]=this.onGradient,d[o.BLOOM]=this.onBloom,d[o.COLOR_MATRIX]=this.onColorMatrix,d[o.CIRCLE]=this.onCircle,d[o.BARREL]=this.onBarrel,d[o.DISPLACEMENT]=this.onDisplacement,d[o.WIPE]=this.onWipe,d[o.BOKEH]=this.onBokeh,this.fxHandlers=d,this.source,this.target,this.swap},onDraw:function(s,l,c){this.source=s,this.target=l,this.swap=c;var d=s.width,f=s.height,m=this.tempSprite,y=this.fxHandlers;if(m&&m.preFX)for(var S=m.preFX.list,C=0;C<S.length;C++){var E=S[C];E.active&&y[E.type].call(this,E,d,f)}this.drawToGame(this.source)},runDraw:function(){var s=this.source,l=this.target;this.copy(s,l),this.source=l,this.target=s},onGlow:function(s,l,c){var d=this.shaders[o.GLOW];this.setShader(d),this.glow.onPreRender(s,d,l,c),this.runDraw()},onShadow:function(s){var l=this.shaders[o.SHADOW];this.setShader(l),this.shadow.onPreRender(s,l),this.runDraw()},onPixelate:function(s,l,c){var d=this.shaders[o.PIXELATE];this.setShader(d),this.pixelate.onPreRender(s,d,l,c),this.runDraw()},onVignette:function(s){var l=this.shaders[o.VIGNETTE];this.setShader(l),this.vignette.onPreRender(s,l),this.runDraw()},onShine:function(s,l,c){var d=this.shaders[o.SHINE];this.setShader(d),this.shine.onPreRender(s,d,l,c),this.runDraw()},onBlur:function(s,l,c){var d=a(s,"quality"),f=this.shaders[o.BLUR+d];this.setShader(f),this.set1i("uMainSampler",0),this.set2f("resolution",l,c),this.set1f("strength",a(s,"strength")),this.set3fv("color",a(s,"glcolor"));for(var m=a(s,"x"),y=a(s,"y"),S=a(s,"steps"),C=0;C<S;C++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,y),this.runDraw()},onGradient:function(s){var l=this.shaders[o.GRADIENT];this.setShader(l),this.gradient.onPreRender(s,l),this.runDraw()},onBloom:function(s,l,c){var d=this.shaders[o.BLOOM];this.copySprite(this.source,this.swap),this.setShader(d),this.set1i("uMainSampler",0),this.set1f("strength",a(s,"blurStrength")),this.set3fv("color",a(s,"glcolor"));for(var f=2/l*a(s,"offsetX"),m=2/c*a(s,"offsetY"),y=a(s,"steps"),S=0;S<y;S++)this.set2f("offset",f,0),this.runDraw(),this.set2f("offset",0,m),this.runDraw();this.blendFrames(this.swap,this.source,this.target,a(s,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(s){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",s.getData()),this.set1f("uAlpha",s.alpha),this.runDraw()},onCircle:function(s,l,c){var d=this.shaders[o.CIRCLE];this.setShader(d),this.circle.onPreRender(s,d,l,c),this.runDraw()},onBarrel:function(s){var l=this.shaders[o.BARREL];this.setShader(l),this.barrel.onPreRender(s,l),this.runDraw()},onDisplacement:function(s){this.setShader(this.shaders[o.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",s.x,s.y),this.bindTexture(s.glTexture,1),this.runDraw()},onWipe:function(s){var l=this.shaders[o.WIPE];this.setShader(l),this.wipe.onPreRender(s,l),this.runDraw()},onBokeh:function(s,l,c){var d=this.shaders[o.BOKEH];this.setShader(d),this.bokeh.onPreRender(s,d,l,c),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,r.prototype.destroy.call(this),this}});p.exports=u}),96569:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(31063),a=t(57516),r=t(61340),e=t(26099),n=t(29100),u=new h({Extends:a,initialize:function(l){var c=g(l,"fragShader",o);l.fragShader=c.replace("%LIGHT_COUNT%",l.game.renderer.config.maxLights),a.call(this,l),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new e,this._tempMatrix=new r,this._tempMatrix2=new r},boot:function(){n.prototype.boot.call(this)},onRender:function(s,l){var c=s.sys.lights;if(this.lightsActive=!1,!(!c||!c.active)){var d=c.getLights(l),f=d.length;this.lightsActive=!0;var m,y=this.renderer,S=y.height,C=l.matrix,E=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",l.x,l.y,l.rotation,l.zoom),this.set3f("uAmbientLightColor",c.ambientColor.r,c.ambientColor.g,c.ambientColor.b),this.set1i("uLightCount",f),m=0;m<f;m++){var P=d[m].light,A=P.color,R="uLights["+m+"].";C.transformPoint(P.x,P.y,E),this.set2f(R+"position",E.x-l.scrollX*P.scrollFactorX*l.zoom,S-(E.y-l.scrollY*P.scrollFactorY*l.zoom)),this.set3f(R+"color",A.r,A.g,A.b),this.set1f(R+"intensity",P.intensity),this.set1f(R+"radius",P.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(s){if(s!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var l=this.inverseRotationMatrix;if(s){var c=-s,d=Math.cos(c),f=Math.sin(c);l[1]=f,l[3]=-f,l[0]=l[4]=d}else l[0]=l[4]=1,l[1]=l[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,l),this.currentNormalMapRotation=s}},setTexture2D:function(s,l){var c=this.renderer;s===void 0&&(s=c.whiteTexture);var d=this.getNormalMap(l);this.isNewNormalMap(s,d)&&(this.flush(),this.createBatch(s),this.addTextureToBatch(d),this.currentNormalMap=d);var f=0;if(l&&l.parentContainer){var m=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);f=m.rotationNormalized}else l&&(f=l.rotation);return this.currentBatch===null&&(this.createBatch(s),this.addTextureToBatch(d)),this.setNormalMapRotation(f),0},setGameObject:function(s,l){l===void 0&&(l=s.frame);var c=l.glTexture,d=this.getNormalMap(s);if(this.isNewNormalMap(c,d)&&(this.flush(),this.createBatch(c),this.addTextureToBatch(d),this.currentNormalMap=d),s.parentContainer){var f=s.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(f.rotationNormalized)}else this.setNormalMapRotation(s.rotation);return this.currentBatch===null&&(this.createBatch(c),this.addTextureToBatch(d)),0},isNewNormalMap:function(s,l){return this.currentTexture!==s||this.currentNormalMap!==l},getNormalMap:function(s){var l;if(s)s.displayTexture?l=s.displayTexture.dataSource[s.displayFrame.sourceIndex]:s.texture?l=s.texture.dataSource[s.frame.sourceIndex]:s.tileset&&(Array.isArray(s.tileset)?l=s.tileset[0].image.dataSource[0]:l=s.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return l?l.glTexture:this.renderer.normalTexture},batchSprite:function(s,l,c){this.lightsActive&&a.prototype.batchSprite.call(this,s,l,c)},batchTexture:function(s,l,c,d,f,m,y,S,C,E,P,A,R,G,b,L,w,B,N,Y,U,W,O,V,X,z,I,Z,J,k,j,tt){this.lightsActive&&a.prototype.batchTexture.call(this,s,l,c,d,f,m,y,S,C,E,P,A,R,G,b,L,w,B,N,Y,U,W,O,V,X,z,I,Z,J,k,j,tt)},batchTextureFrame:function(s,l,c,d,f,m,y){this.lightsActive&&a.prototype.batchTextureFrame.call(this,s,l,c,d,f,m,y)}});p.exports=u}),56527:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(57516),a=t(45561),r=t(60722),e=t(14500),n=t(29100),u=new h({Extends:o,initialize:function(l){l.fragShader=g(l,"fragShader",a),l.vertShader=g(l,"vertShader",r),l.attributes=g(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),l.forceZero=!0,l.resizeUniform="uResolution",o.call(this,l)},boot:function(){n.prototype.boot.call(this);var s=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",s.width,s.height)}});p.exports=u}),57516:((p,M,t)=>{var h=t(83419),g=t(94811),o=t(95540),a=t(98840),r=t(44667),e=t(61340),n=t(70554),u=t(14500),s=t(29100),l=new h({Extends:s,initialize:function(d){var f=d.game.renderer,m=o(d,"fragShader",a);d.fragShader=n.parseFragmentShaderMaxTextures(m,f.maxTextures),d.vertShader=o(d,"vertShader",r),d.attributes=o(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),d.resizeUniform="uResolution",s.call(this,d),this._tempMatrix1=new e,this._tempMatrix2=new e,this._tempMatrix3=new e,this.calcMatrix=new e,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){s.prototype.boot.call(this);var c=this.renderer;this.set1iv("uMainSampler",c.textureIndexes),this.set2f("uResolution",c.width,c.height)},batchSprite:function(c,d,f){this.manager.set(this,c);var m=this._tempMatrix1,y=this._tempMatrix2,S=this._tempMatrix3,C=c.frame,E=C.glTexture,P=C.u0,A=C.v0,R=C.u1,G=C.v1,b=C.x,L=C.y,w=C.cutWidth,B=C.cutHeight,N=C.customPivot,Y=c.displayOriginX,U=c.displayOriginY,W=-Y+b,O=-U+L;if(c.isCropped){var V=c._crop;(V.flipX!==c.flipX||V.flipY!==c.flipY)&&C.updateCropUVs(V,c.flipX,c.flipY),P=V.u0,A=V.v0,R=V.u1,G=V.v1,w=V.width,B=V.height,b=V.x,L=V.y,W=-Y+b,O=-U+L}var X=1,z=1;c.flipX&&(N||(W+=-C.realWidth+Y*2),X=-1),c.flipY&&(N||(O+=-C.realHeight+U*2),z=-1);var I=c.x,Z=c.y;d.roundPixels&&(I=Math.floor(I),Z=Math.floor(Z)),y.applyITRS(I,Z,c.rotation,c.scaleX*X,c.scaleY*z),m.copyFrom(d.matrix),f?(m.multiplyWithOffset(f,-d.scrollX*c.scrollFactorX,-d.scrollY*c.scrollFactorY),y.e=I,y.f=Z):(y.e-=d.scrollX*c.scrollFactorX,y.f-=d.scrollY*c.scrollFactorY),m.multiply(y,S);var J=S.setQuad(W,O,W+w,O+B,d.renderRoundPixels),k=n.getTintAppendFloatAlpha,j=d.alpha,tt=k(c.tintTopLeft,j*c._alphaTL),ht=k(c.tintTopRight,j*c._alphaTR),ot=k(c.tintBottomLeft,j*c._alphaBL),st=k(c.tintBottomRight,j*c._alphaBR);this.shouldFlush(6)&&this.flush();var ft=this.setGameObject(c,C);this.manager.preBatch(c),this.batchQuad(c,J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],P,A,R,G,tt,ht,ot,st,c.tintFill,E,ft),this.manager.postBatch(c)},batchTexture:function(c,d,f,m,y,S,C,E,P,A,R,G,b,L,w,B,N,Y,U,W,O,V,X,z,I,Z,J,k,j,tt,ht,ot,st){st===void 0&&(st=!1),this.manager.set(this,c);var ft=this._tempMatrix1,ut=this._tempMatrix2,lt=this._tempMatrix3,Tt=Y/f+J,bt=U/m+k,Dt=(Y+W)/f+J,ct=(U+O)/m+k,yt=C,Et=E,At=-B,It=-N;if(c.isCropped){var Ft=c._crop,wt=Ft.width,Bt=Ft.height;yt=wt,Et=Bt,C=wt,E=Bt,Y=Ft.x,U=Ft.y;var le=Y,pe=U;G&&(le=W-Ft.x-wt),b&&(pe=O-Ft.y-Bt),Tt=le/f+J,bt=pe/m+k,Dt=(le+wt)/f+J,ct=(pe+Bt)/m+k,At=-B+Y,It=-N+U}b=b^(!ht&&d.isRenderTexture?1:0),G&&(yt*=-1,At+=C),b&&(Et*=-1,It+=E),j.roundPixels&&(y=Math.floor(y),S=Math.floor(S)),ut.applyITRS(y,S,R,P,A),ft.copyFrom(j.matrix),tt?(ft.multiplyWithOffset(tt,-j.scrollX*L,-j.scrollY*w),ut.e=y,ut.f=S):(ut.e-=j.scrollX*L,ut.f-=j.scrollY*w),ft.multiply(ut,lt);var Ut=lt.setQuad(At,It,At+yt,It+Et,j.renderRoundPixels);ot==null&&(ot=this.setTexture2D(d)),c&&!st&&this.manager.preBatch(c),this.batchQuad(c,Ut[0],Ut[1],Ut[2],Ut[3],Ut[4],Ut[5],Ut[6],Ut[7],Tt,bt,Dt,ct,V,X,z,I,Z,d,ot),c&&!st&&this.manager.postBatch(c)},batchTextureFrame:function(c,d,f,m,y,S,C){this.manager.set(this);var E=this._tempMatrix1.copyFrom(S),P=this._tempMatrix2;C?E.multiply(C,P):P=E;var A=P.setQuad(d,f,d+c.width,f+c.height),R=this.setTexture2D(c.source.glTexture);m=n.getTintAppendFloatAlpha(m,y),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],c.u0,c.v0,c.u1,c.v1,m,m,m,m,0,c.glTexture,R)},batchFillRect:function(c,d,f,m,y,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(y,C);var E=C.setQuad(c,d,c+f,d+m),P=this.fillTint;this.batchQuad(null,E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],0,0,1,1,P.TL,P.TR,P.BL,P.BR,2)},batchFillTriangle:function(c,d,f,m,y,S,C,E){this.renderer.pipelines.set(this);var P=this.calcMatrix;E&&E.multiply(C,P);var A=P.getX(c,d),R=P.getY(c,d),G=P.getX(f,m),b=P.getY(f,m),L=P.getX(y,S),w=P.getY(y,S),B=this.fillTint;this.batchTri(null,A,R,G,b,L,w,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(c,d,f,m,y,S,C,E,P){var A=this.tempTriangle;A[0].x=c,A[0].y=d,A[0].width=C,A[1].x=f,A[1].y=m,A[1].width=C,A[2].x=y,A[2].y=S,A[2].width=C,A[3].x=c,A[3].y=d,A[3].width=C,this.batchStrokePath(A,C,!1,E,P)},batchFillPath:function(c,d,f){this.renderer.pipelines.set(this);var m=this.calcMatrix;f&&f.multiply(d,m);for(var y=c.length,S=this.polygonCache,C,E,P=this.fillTint.TL,A=this.fillTint.TR,R=this.fillTint.BL,G=0;G<y;++G)E=c[G],S.push(E.x,E.y);C=g(S),y=C.length;for(var b=0;b<y;b+=3){var L=C[b+0]*2,w=C[b+1]*2,B=C[b+2]*2,N=S[L+0],Y=S[L+1],U=S[w+0],W=S[w+1],O=S[B+0],V=S[B+1],X=m.getX(N,Y),z=m.getY(N,Y),I=m.getX(U,W),Z=m.getY(U,W),J=m.getX(O,V),k=m.getY(O,V);this.batchTri(null,X,z,I,Z,J,k,0,0,1,1,P,A,R,2)}S.length=0},batchStrokePath:function(c,d,f,m,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var S=c.length-1,C=0;C<S;C++){var E=c[C],P=c[C+1];this.batchLine(E.x,E.y,P.x,P.y,E.width/2,P.width/2,d,C,!f&&C===S-1,m,y)}},batchLine:function(c,d,f,m,y,S,C,E,P,A,R){this.renderer.pipelines.set(this);var G=this.calcMatrix;R&&R.multiply(A,G);var b=f-c,L=m-d,w=Math.sqrt(b*b+L*L);if(w!==0){var B=y*(m-d)/w,N=y*(c-f)/w,Y=S*(m-d)/w,U=S*(c-f)/w,W=f-Y,O=m-U,V=c-B,X=d-N,z=f+Y,I=m+U,Z=c+B,J=d+N,k=G.getX(W,O),j=G.getY(W,O),tt=G.getX(V,X),ht=G.getY(V,X),ot=G.getX(z,I),st=G.getY(z,I),ft=G.getX(Z,J),ut=G.getY(Z,J),lt=this.strokeTint,Tt=lt.TL,bt=lt.TR,Dt=lt.BL,ct=lt.BR;if(this.batchQuad(null,ft,ut,tt,ht,k,j,ot,st,0,0,1,1,Tt,bt,Dt,ct,2),!(C<=2)){var yt=this.prevQuad,Et=this.firstQuad;E>0&&yt[4]?this.batchQuad(null,ft,ut,tt,ht,yt[0],yt[1],yt[2],yt[3],0,0,1,1,Tt,bt,Dt,ct,2):(Et[0]=ft,Et[1]=ut,Et[2]=tt,Et[3]=ht,Et[4]=1),P&&Et[4]?this.batchQuad(null,k,j,ot,st,Et[0],Et[1],Et[2],Et[3],0,0,1,1,Tt,bt,Dt,ct,2):(yt[0]=k,yt[1]=j,yt[2]=ot,yt[3]=st,yt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,s.prototype.destroy.call(this),this}});p.exports=l}),43439:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(4127),a=t(89924),r=t(29100),e=new h({Extends:r,initialize:function(u){u.vertShader=g(u,"vertShader",a),u.fragShader=g(u,"fragShader",o),u.attributes=g(u,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),r.call(this,u)},onRender:function(n,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(n,u,s,l,c,d,f,m,y,S,C,E){var P=n.color,A=n.intensity,R=n.radius,G=n.attenuation,b=P.r*A,L=P.g*A,w=P.b*A,B=u.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(s,l,C,E,R,G,b,L,w,B),this.batchLightVert(c,d,C,E,R,G,b,L,w,B),this.batchLightVert(f,m,C,E,R,G,b,L,w,B),this.batchLightVert(s,l,C,E,R,G,b,L,w,B),this.batchLightVert(f,m,C,E,R,G,b,L,w,B),this.batchLightVert(y,S,C,E,R,G,b,L,w,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(n,u,s,l,c,d,f,m,y,S){var C=this.vertexViewF32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++E]=n,C[++E]=u,C[++E]=s,C[++E]=l,C[++E]=c,C[++E]=d,C[++E]=f,C[++E]=m,C[++E]=y,C[++E]=S,this.vertexCount++}});p.exports=e}),84057:((p,M,t)=>{var h=t(83419),g=t(89422),o=t(95540),a=t(27681),r=t(49627),e=t(29100),n=new h({Extends:e,initialize:function(s){s.renderTarget=o(s,"renderTarget",1),s.fragShader=o(s,"fragShader",a),s.vertShader=o(s,"vertShader",r),s.attributes=o(s,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),s.batchSize=1,s.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],e.call(this,s),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){e.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2;var s=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",s.width,s.height);for(var l=this.renderTargets,c=0;c<l.length;c++)l[c].autoResize=!0},postBatch:function(u){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(u),this},onDraw:function(u){this.bindAndDraw(u)},getController:function(u){return u!==void 0?u:this.controller?this.controller:this},copySprite:function(u,s,l){l===void 0&&(l=!1);var c=this.gl;c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.texture.webGLTexture);var d=c.getParameter(c.FRAMEBUFFER_BINDING);c.bindFramebuffer(c.FRAMEBUFFER,s.framebuffer.webGLFramebuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,s.texture.webGLTexture,0),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),l&&(c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,d))},copyFrame:function(u,s,l,c,d){this.manager.copyFrame(u,s,l,c,d)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,s,l){this.manager.drawFrame(u,s,l,this.colorMatrix)},blendFrames:function(u,s,l,c,d){this.manager.blendFrames(u,s,l,c,d)},blendFramesAdditive:function(u,s,l,c,d){this.manager.blendFramesAdditive(u,s,l,c,d)},clearFrame:function(u,s){this.manager.clearFrame(u,s)},blitFrame:function(u,s,l,c,d,f){this.manager.blitFrame(u,s,l,c,d,f)},copyFrameRect:function(u,s,l,c,d,f,m,y){this.manager.copyFrameRect(u,s,l,c,d,f,m,y)},bindAndDraw:function(u,s,l,c,d){l===void 0&&(l=!0),c===void 0&&(c=!0);var f=this.gl,m=this.renderer;this.bind(d),this.set1i("uMainSampler",0),s?(f.viewport(0,0,s.width,s.height),f.bindFramebuffer(f.FRAMEBUFFER,s.framebuffer.webGLFramebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,s.texture.webGLTexture,0),l&&(c?f.clearColor(0,0,0,0):f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1),m.currentFramebuffer||f.viewport(0,0,m.width,m.height)),m.restoreStencilMask(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,u.texture.webGLTexture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),s&&(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,m.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),e.prototype.destroy.call(this),this}});p.exports=n}),43558:((p,M,t)=>{var h=t(10312),g=t(67502),o=t(83419),a=t(96293),r=t(95540),e=t(57516),n=t(27681),u=t(87841),s=t(32302),l=t(45561),c=t(60722),d=t(29100),f=new o({Extends:e,initialize:function(y){var S=r(y,"fragShader",n),C=r(y,"vertShader",c),E=r(y,"drawShader",n),P=[{name:"DrawSprite",fragShader:l,vertShader:c},{name:"CopySprite",fragShader:S,vertShader:C},{name:"DrawGame",fragShader:E,vertShader:c},{name:"ColorMatrix",fragShader:a}],A=r(y,"shaders",[]);y.shaders=P.concat(A),y.vertShader||(y.vertShader=C),y.batchSize=1,e.call(this,y),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new u,this.targetBounds=new u,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){d.prototype.boot.call(this);var m=this.shaders,y=this.renderer;this.drawSpriteShader=m[0],this.copyShader=m[1],this.gameShader=m[2],this.colorMatrixShader=m[3],this.fsTarget=new s(y,y.width,y.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var S=new ArrayBuffer(168);this.quadVertexData=S,this.quadVertexViewF32=new Float32Array(S),this.quadVertexBuffer=y.createVertexBuffer(S,this.gl.STATIC_DRAW),this.onResize(y.width,y.height),this.currentShader=this.copyShader,this.set2f("uResolution",y.width,y.height)},onResize:function(m,y){var S=this.quadVertexViewF32;S[1]=y,S[22]=y,S[14]=m,S[28]=m,S[35]=m,S[36]=y},batchQuad:function(m,y,S,C,E,P,A,R,G,b,L,w,B,N,Y,U,W,O,V){var X=Math.min(y,C,P,R),z=Math.min(S,E,A,G),I=Math.max(y,C,P,R),Z=Math.max(S,E,A,G),J=I-X,k=Z-z,j=this.spriteBounds.setTo(X,z,J,k),tt=m?m.preFX.padding:0,ht=J+tt*2,ot=k+tt*2,st=Math.abs(Math.max(ht,ot)),ft=this.manager.getRenderTarget(st),ut=this.targetBounds.setTo(0,0,ft.width,ft.height);g(ut,Math.round(j.centerX),Math.round(j.centerY)),this.tempSprite=m;var lt=this.gl,Tt=this.renderer;Tt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Tt.width,Tt.height),this.flipProjectionMatrix(!0),m&&(this.onDrawSprite(m,ft),m.preFX.onFX(this));var bt=this.fsTarget;return this.flush(),lt.viewport(0,0,Tt.width,Tt.height),lt.bindFramebuffer(lt.FRAMEBUFFER,bt.framebuffer.webGLFramebuffer),lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,bt.texture.webGLTexture,0),lt.clearColor(0,0,0,0),lt.clear(lt.COLOR_BUFFER_BIT),this.setTexture2D(V),this.batchVert(y,S,b,L,0,O,N),this.batchVert(C,E,b,B,0,O,U),this.batchVert(P,A,w,B,0,O,W),this.batchVert(y,S,b,L,0,O,N),this.batchVert(P,A,w,B,0,O,W),this.batchVert(R,G,w,L,0,O,Y),this.flush(),this.flipProjectionMatrix(!1),lt.activeTexture(lt.TEXTURE0),lt.bindTexture(lt.TEXTURE_2D,ft.texture.webGLTexture),lt.copyTexSubImage2D(lt.TEXTURE_2D,0,0,0,ut.x,ut.y,ut.width,ut.height),lt.bindFramebuffer(lt.FRAMEBUFFER,null),lt.bindTexture(lt.TEXTURE_2D,null),this.onBatch(m),this.currentShader=this.copyShader,this.onDraw(ft,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(m,y,S,C,E,P,A){S===void 0&&(S=!0),C===void 0&&(C=!0),E===void 0&&(E=!1),A===void 0&&(A=this.copyShader);var R=this.gl,G=this.tempSprite;P&&(A=this.colorMatrixShader),this.currentShader=A;var b=this.setVertexBuffer(this.quadVertexBuffer);A.bind(b,!1);var L=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",L.width,L.height),G.preFX.onFXCopy(this),this.onCopySprite(m,y,G),P&&(this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,m.texture.webGLTexture),m.height>y.height)R.viewport(0,0,m.width,m.height),this.setTargetUVs(m,y);else{var w=y.height-m.height;R.viewport(0,w,m.width,m.height),this.resetUVs()}if(R.bindFramebuffer(R.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,y.texture.webGLTexture,0),S&&(R.clearColor(0,0,0,+!C),R.clear(R.COLOR_BUFFER_BIT)),E){var B=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}R.bufferData(R.ARRAY_BUFFER,this.quadVertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),E&&this.renderer.setBlendMode(B),R.bindFramebuffer(R.FRAMEBUFFER,null)},copy:function(m,y){var S=this.gl;this.set1i("uMainSampler",0),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,m.texture.webGLTexture),S.viewport(0,0,m.width,m.height),this.setUVs(0,0,0,1,1,1,1,0),S.bindFramebuffer(S.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,y.texture.webGLTexture,0),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.quadVertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null)},blendFrames:function(m,y,S,C,E){this.manager.blendFrames(m,y,S,C,E)},blendFramesAdditive:function(m,y,S,C,E){this.manager.blendFramesAdditive(m,y,S,C,E)},drawToGame:function(m){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(m)},copyToGame:function(m){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(m)},bindAndDraw:function(m){var y=this.gl,S=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(m.texture);var C=this._tempMatrix1.loadIdentity(),E=this.targetBounds.x,P=this.targetBounds.y,A=E+m.width,R=P+m.height,G=C.getX(E,P),b=C.getX(E,R),L=C.getX(A,R),w=C.getX(A,P),B=C.getY(E,P),N=C.getY(E,R),Y=C.getY(A,R),U=C.getY(A,P),W=16777215;this.batchVert(G,B,0,0,0,0,W),this.batchVert(b,N,0,1,0,0,W),this.batchVert(L,Y,1,1,0,0,W),this.batchVert(G,B,0,0,0,0,W),this.batchVert(L,Y,1,1,0,0,W),this.batchVert(w,U,1,0,0,0,W),S.restoreFramebuffer(!1,!0),S.currentFramebuffer||y.viewport(0,0,S.width,S.height),S.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(m){this.drawToGame(m)},setUVs:function(m,y,S,C,E,P,A,R){var G=this.quadVertexViewF32;G[2]=m,G[3]=y,G[9]=S,G[10]=C,G[16]=E,G[17]=P,G[23]=m,G[24]=y,G[30]=E,G[31]=P,G[37]=A,G[38]=R},setTargetUVs:function(m,y){var S=y.height/m.height;S>.5?S=.5-(S-.5):S=.5+(.5-S),this.setUVs(0,S,0,1+S,1,1+S,1,S)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,e.prototype.destroy.call(this),this}});p.exports=f}),81041:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(57516),a=new h({Extends:o,initialize:function(e){e.topology=5,e.batchSize=g(e,"batchSize",256),o.call(this,e)}});p.exports=a}),12385:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(57516),a=t(45561),r=t(60722),e=t(29100),n=new h({Extends:o,initialize:function(s){s.fragShader=g(s,"fragShader",a),s.vertShader=g(s,"vertShader",r),s.forceZero=!0,o.call(this,s)},boot:function(){e.prototype.boot.call(this);var u=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",u.width,u.height)}});p.exports=n}),7589:((p,M,t)=>{var h=t(35407),g=t(10312),o=t(83419),a=t(89422),r=t(96293),e=t(36682),n=t(95540),u=t(48247),s=t(49627),l=t(29100),c=new o({Extends:l,initialize:function(f){f.renderTarget=n(f,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),f.vertShader=n(f,"vertShader",s),f.shaders=n(f,"shaders",[{name:"Copy",fragShader:e},{name:"AddBlend",fragShader:h},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:r}]),f.attributes=n(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),f.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],f.batchSize=1,l.call(this,f),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var d=this.shaders,f=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=f[0],this.fullFrame2=f[1],this.halfFrame1=f[2],this.halfFrame2=f[3]},copyFrame:function(d,f,m,y,S){m===void 0&&(m=1),y===void 0&&(y=!0),S===void 0&&(S=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,d.texture.webGLTexture),f?(C.viewport(0,0,f.width,f.height),C.bindFramebuffer(C.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,f.texture.webGLTexture,0)):C.viewport(0,0,d.width,d.height),y&&(S?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(d,f,m,y,S,C,E){m===void 0&&(m=1),y===void 0&&(y=!0),S===void 0&&(S=!0),C===void 0&&(C=!1),E===void 0&&(E=!1);var P=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,d.texture.webGLTexture),d.height>f.height)P.viewport(0,0,d.width,d.height),this.setTargetUVs(d,f);else{var A=f.height-d.height;P.viewport(0,A,d.width,d.height)}if(P.bindFramebuffer(P.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,f.texture.webGLTexture,0),y&&(S?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),C){var R=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}E&&this.flipY(),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),C&&this.renderer.setBlendMode(R),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,f,m,y,S,C,E,P){E===void 0&&(E=!0),P===void 0&&(P=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,d.texture.webGLTexture,0),E&&(P?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,f.texture.webGLTexture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,m,y,S,C),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(d){var f=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.texture.webGLTexture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6)},drawFrame:function(d,f,m,y){m===void 0&&(m=!0),y===void 0&&(y=this.colorMatrix);var S=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,d.texture.webGLTexture),f?(S.viewport(0,0,f.width,f.height),S.bindFramebuffer(S.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,f.texture.webGLTexture,0)):S.viewport(0,0,d.width,d.height),m?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFrames:function(d,f,m,y,S,C){y===void 0&&(y=1),S===void 0&&(S=!0),C===void 0&&(C=this.linearShader);var E=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,d.texture.webGLTexture),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,f.texture.webGLTexture),m?(E.bindFramebuffer(E.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,m.texture.webGLTexture,0),E.viewport(0,0,m.width,m.height)):E.viewport(0,0,d.width,d.height),S?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFramesAdditive:function(d,f,m,y,S){this.blendFrames(d,f,m,y,S,this.addShader)},clearFrame:function(d,f){f===void 0&&(f=!0);var m=this.gl;m.viewport(0,0,d.width,d.height),m.bindFramebuffer(m.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),f?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,y.webGLFramebuffer)},setUVs:function(d,f,m,y,S,C,E,P){var A=this.vertexViewF32;A[2]=d,A[3]=f,A[6]=m,A[7]=y,A[10]=S,A[11]=C,A[14]=d,A[15]=f,A[18]=S,A[19]=C,A[22]=E,A[23]=P},setTargetUVs:function(d,f){var m=f.height/d.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});p.exports=c}),36060:(p=>{var M={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};p.exports=M}),84817:(p=>{p.exports="pipelineafterflush"}),36712:(p=>{p.exports="pipelinebeforeflush"}),40285:(p=>{p.exports="pipelinebind"}),65918:(p=>{p.exports="pipelineboot"}),92852:(p=>{p.exports="pipelinedestroy"}),56072:(p=>{p.exports="pipelinerebind"}),57566:(p=>{p.exports="pipelineresize"}),77085:((p,M,t)=>{p.exports={AFTER_FLUSH:t(84817),BEFORE_FLUSH:t(36712),BIND:t(40285),BOOT:t(65918),DESTROY:t(92852),REBIND:t(56072),RESIZE:t(57566)}}),54812:((p,M,t)=>{var h=t(83419),g=t(99155),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(r,e){r=this.getController(r),this.set1f("amount",r.amount,e)}});p.exports=a}),67329:((p,M,t)=>{var h=t(83419),g=t(24400),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(r){r=this.getController(r),this.set1f("strength",r.blurStrength),this.set3fv("color",r.glcolor)},onDraw:function(r){var e=this.getController(),n=this.fullFrame1,u=this.fullFrame2;this.copyFrame(r,u);for(var s=2/r.width*e.offsetX,l=2/r.height*e.offsetY,c=0;c<e.steps;c++)this.set2f("offset",s,0),this.copySprite(r,n),this.set2f("offset",0,l),this.copySprite(n,r);this.blendFrames(u,r,n,e.strength),this.copyToGame(n)}});p.exports=a}),8861:((p,M,t)=>{var h=t(83419),g=t(41514),o=t(51078),a=t(94328),r=t(84057),e=new h({Extends:r,initialize:function(u){r.call(this,{game:u,shaders:[{name:"Gaussian5",fragShader:g},{name:"Gaussian9",fragShader:o},{name:"Gaussian13",fragShader:a}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(n){var u=this.getController(),s=this.gl,l=this.fullFrame1,c=s.getParameter(s.FRAMEBUFFER_BINDING);this.bind(this.shaders[u.quality]),s.activeTexture(s.TEXTURE0),s.viewport(0,0,n.width,n.height),this.set1i("uMainSampler",0),this.set2f("resolution",n.width,n.height),this.set1f("strength",u.strength),this.set3fv("color",u.glcolor);for(var d=0;d<u.steps;d++)this.set2f("offset",u.x,0),this.copySprite(n,l),this.set2f("offset",0,u.y),this.copySprite(l,n);s.bindFramebuffer(s.FRAMEBUFFER,c),s.bindTexture(s.TEXTURE_2D,null),this.copyToGame(n)}});p.exports=e}),51051:((p,M,t)=>{var h=t(83419),g=t(90610),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(r,e,n,u){r=this.getController(r),this.set1f("radius",r.radius,e),this.set1f("amount",r.amount,e),this.set1f("contrast",r.contrast,e),this.set1f("strength",r.strength,e),this.set2f("blur",r.blurX,r.blurY,e),this.setBoolean("isTiltShift",r.isTiltShift,e),n&&u&&this.set2f("resolution",n,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});p.exports=a}),89428:((p,M,t)=>{var h=t(83419),g=t(91899),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(r,e,n,u){r=this.getController(r),this.set1f("scale",r.scale,e),this.set1f("feather",r.feather,e),this.set1f("thickness",r.thickness,e),this.set3fv("color",r.glcolor,e),this.set4fv("backgroundColor",r.glcolor2,e),n&&u&&this.set2f("resolution",n,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});p.exports=a}),88904:((p,M,t)=>{var h=t(83419),g=t(84057),o=new h({Extends:g,initialize:function(r){g.call(this,{game:r})},onDraw:function(a){var r=this.fullFrame1;this.controller?this.manager.drawFrame(a,r,!0,this.controller):this.drawFrame(a,r),this.copyToGame(r)}});p.exports=o}),63563:((p,M,t)=>{var h=t(83419),g=t(47838),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(r){var e=this.game.textures.getFrame(r);e&&(this.glTexture=e.glTexture)},onDraw:function(r){var e=this.getController(),n=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.copySprite(r,n),this.copyToGame(n)}});p.exports=a}),94045:((p,M,t)=>{var h=t(83419),g=t(95540),o=t(98656),a=t(84057),r=t(70554),e=new h({Extends:a,initialize:function(u,s){var l=g(s,"quality",.1),c=g(s,"distance",10);a.call(this,{game:u,fragShader:r.setGlowQuality(o,u,l,c)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(n,u,s,l){n=this.getController(n),this.set1f("outerStrength",n.outerStrength,u),this.set1f("innerStrength",n.innerStrength,u),this.set4fv("glowColor",n.glcolor,u),this.setBoolean("knockout",n.knockout,u),s&&l&&this.set2f("resolution",s,l,u)},onDraw:function(n){this.set2f("resolution",n.width,n.height),this.bindAndDraw(n)}});p.exports=e}),74088:((p,M,t)=>{var h=t(83419),g=t(70463),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(r,e){r=this.getController(r),this.set1f("alpha",r.alpha,e),this.set1i("size",r.size,e),this.set3fv("color1",r.glcolor1,e),this.set3fv("color2",r.glcolor2,e),this.set2f("positionFrom",r.fromX,r.fromY,e),this.set2f("positionTo",r.toX,r.toY,e)}});p.exports=a}),99636:((p,M,t)=>{var h=t(83419),g=t(50831),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(r,e,n,u){r=this.getController(r),this.set1f("amount",r.amount,e),n&&u&&this.set2f("resolution",n,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});p.exports=a}),34700:((p,M,t)=>{var h=t(83419),g=t(92595),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(r,e){r=this.getController(r);var n=r.samples;this.set1i("samples",n,e),this.set1f("intensity",r.intensity,e),this.set1f("decay",r.decay,e),this.set1f("power",r.power/n,e),this.set2f("lightPosition",r.x,r.y,e),this.set4fv("color",r.glcolor,e)}});p.exports=a}),91157:((p,M,t)=>{var h=t(83419),g=t(72464),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(r,e,n,u){r=this.getController(r),this.setTime("time",e),this.set1f("speed",r.speed,e),this.set1f("lineWidth",r.lineWidth,e),this.set1f("gradient",r.gradient,e),this.setBoolean("reveal",r.reveal,e),n&&u&&this.set2f("resolution",n,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});p.exports=a}),27797:((p,M,t)=>{var h=t(83419),g=t(39249),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(r,e){r=this.getController(r),this.set1f("radius",r.radius,e),this.set1f("strength",r.strength,e),this.set2f("position",r.x,r.y,e)}});p.exports=a}),67603:((p,M,t)=>{var h=t(83419),g=t(2878),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(r,e){r=this.getController(r);var n=r.progress,u=r.wipeWidth,s=r.direction,l=r.axis;this.set4f("config",n,u,s,l,e),this.setBoolean("reveal",r.reveal,e)}});p.exports=a}),58918:((p,M,t)=>{var h={Barrel:t(54812),Bloom:t(67329),Blur:t(8861),Bokeh:t(51051),Circle:t(89428),ColorMatrix:t(88904),Displacement:t(63563),Glow:t(94045),Gradient:t(74088),Pixelate:t(99636),Shadow:t(34700),Shine:t(91157),Vignette:t(27797),Wipe:t(67603)};p.exports=h}),96615:((p,M,t)=>{var h=t(36060),g=t(79291),o={FX:t(58918),BitmapMaskPipeline:t(31302),Events:t(77085),FXPipeline:t(92651),LightPipeline:t(96569),MobilePipeline:t(56527),MultiPipeline:t(57516),PointLightPipeline:t(43439),PostFXPipeline:t(84057),PreFXPipeline:t(43558),RopePipeline:t(81041),SinglePipeline:t(12385),UtilityPipeline:t(7589)};o=g(!1,o,h),p.exports=o}),35407:(p=>{p.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(p=>{p.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(p=>{p.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(p=>{p.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(p=>{p.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(p=>{p.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(p=>{p.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(p=>{p.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(p=>{p.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(p=>{p.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(p=>{p.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(p=>{p.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(p=>{p.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(p=>{p.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(p=>{p.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(p=>{p.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(p=>{p.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(p=>{p.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(p=>{p.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(p=>{p.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(p=>{p.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(p=>{p.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(p=>{p.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(p=>{p.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(p=>{p.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(p=>{p.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(p=>{p.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(p=>{p.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(p=>{p.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(p=>{p.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(p=>{p.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(p=>{p.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(p=>{p.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(p=>{p.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((p,M,t)=>{p.exports={AddBlendFrag:t(35407),BitmapMaskFrag:t(78908),BitmapMaskVert:t(85191),ColorMatrixFrag:t(96293),CopyFrag:t(36682),FXBarrelFrag:t(99155),FXBloomFrag:t(24400),FXBlurHighFrag:t(94328),FXBlurLowFrag:t(41514),FXBlurMedFrag:t(51078),FXBokehFrag:t(90610),FXCircleFrag:t(91899),FXDisplacementFrag:t(47838),FXGlowFrag:t(98656),FXGradientFrag:t(70463),FXPixelateFrag:t(50831),FXShadowFrag:t(92595),FXShineFrag:t(72464),FXVignetteFrag:t(39249),FXWipeFrag:t(2878),LightFrag:t(31063),LinearBlendFrag:t(48247),MeshFrag:t(41214),MeshVert:t(39653),MobileFrag:t(62143),MobileVert:t(47940),MultiFrag:t(98840),MultiVert:t(44667),PointLightFrag:t(4127),PointLightVert:t(89924),PostFXFrag:t(27681),QuadVert:t(49627),SingleFrag:t(45561),SingleVert:t(60722)}}),93567:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.webGLAttribLocation=-1,this.gl=a,this.program=r,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var o=this.gl;o.isContextLost()||(this.webGLAttribLocation=o.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});p.exports=g}),26128:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n){this.webGLBuffer=null,this.gl=a,this.initialDataOrSize=r,this.bufferType=e,this.bufferUsage=n,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var o=this.gl;if(!o.isContextLost()){var a=this.bufferType,r=o.createBuffer();this.webGLBuffer=r,o.bindBuffer(a,this.webGLBuffer),o.bufferData(a,this.initialDataOrSize,this.bufferUsage),o.bindBuffer(a,null)}}},destroy:function(){var o=this.gl;o.isContextLost()||o.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});p.exports=g}),84387:((p,M,t)=>{var h=t(83419),g={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},o=new h({initialize:function(r,e,n,u,s){this.webGLFramebuffer=null,this.gl=r,this.width=e,this.height=n,this.renderTexture=u,this.addDepthStencilBuffer=!!s,this.createResource()},createResource:function(){var a=this.gl;if(!a.isContextLost()){var r=this.renderTexture,e=0,n=a.createFramebuffer();if(this.webGLFramebuffer=n,a.bindFramebuffer(a.FRAMEBUFFER,n),r.isRenderTexture=!0,r.isAlphaPremultiplied=!1,a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r.webGLTexture,0),e=a.checkFramebufferStatus(a.FRAMEBUFFER),e!==a.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(g[e]||e));if(this.addDepthStencilBuffer){var u=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,u),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,u)}a.bindFramebuffer(a.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var a=this.gl;if(!a.isContextLost()){a.bindFramebuffer(a.FRAMEBUFFER,this.webGLFramebuffer);var r=a.getFramebufferAttachmentParameter(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&(a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),a.deleteTexture(r));var e=a.getFramebufferAttachmentParameter(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);e!==null&&a.deleteRenderbuffer(e),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});p.exports=o}),1482:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.webGLProgram=null,this.gl=a,this.vertexSource=r,this.fragmentSource=e,this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){var a=o.createProgram(),r=o.createShader(o.VERTEX_SHADER),e=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(r,this.vertexSource),o.shaderSource(e,this.fragmentSource),o.compileShader(r),o.compileShader(e);var n=`Shader failed:
`;if(!o.getShaderParameter(r,o.COMPILE_STATUS))throw new Error("Vertex "+n+o.getShaderInfoLog(r));if(!o.getShaderParameter(e,o.COMPILE_STATUS))throw new Error("Fragment "+n+o.getShaderInfoLog(e));if(o.attachShader(a,r),o.attachShader(a,e),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS))throw new Error("Link "+n+o.getProgramInfoLog(a));o.useProgram(a),this.webGLProgram=a}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});p.exports=g}),82751:((p,M,t)=>{var h=t(83419),g=t(50030),o=new h({initialize:function(r,e,n,u,s,l,c,d,f,m,y,S,C){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=r,this.mipLevel=e,this.minFilter=n,this.magFilter=u,this.wrapT=s,this.wrapS=l,this.format=c,this.pixels=d,this.width=f,this.height=m,this.pma=y??!0,this.forceSize=!!S,this.flipY=!!C,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var a=this.gl;if(!a.isContextLost()){if(this.pixels instanceof o){this.webGLTexture=this.pixels.webGLTexture;return}var r=a.createTexture();r.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=r,this._processTexture()}},update:function(a,r,e,n,u,s,l,c,d){if(!(r===0||e===0)){this.pixels=a,this.width=r,this.height=e,this.flipY=n,this.wrapS=u,this.wrapT=s,this.minFilter=l,this.magFilter=c,this.format=d;var f=this.gl;f.isContextLost()||this._processTexture()}},_processTexture:function(){var a=this.gl;a.activeTexture(a.TEXTURE0);var r=a.getParameter(a.TEXTURE_BINDING_2D);a.bindTexture(a.TEXTURE_2D,this.webGLTexture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.minFilter),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,this.magFilter),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,this.wrapS),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,this.wrapT),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,this.flipY);var e=this.pixels,n=this.mipLevel,u=this.width,s=this.height,l=this.format,c=!1;if(e==null)a.texImage2D(a.TEXTURE_2D,n,l,u,s,0,l,a.UNSIGNED_BYTE,null),c=g(u,s);else if(e.compressed){u=e.width,s=e.height,c=e.generateMipmap;for(var d=0;d<e.mipmaps.length;d++)a.compressedTexImage2D(a.TEXTURE_2D,d,e.internalFormat,e.mipmaps[d].width,e.mipmaps[d].height,0,e.mipmaps[d].data)}else e instanceof Uint8Array?(a.texImage2D(a.TEXTURE_2D,n,l,u,s,0,l,a.UNSIGNED_BYTE,e),c=g(u,s)):(this.forceSize||(u=e.width,s=e.height),a.texImage2D(a.TEXTURE_2D,n,l,l,a.UNSIGNED_BYTE,e),c=g(u,s));c&&a.generateMipmap(a.TEXTURE_2D),r?a.bindTexture(a.TEXTURE_2D,r):a.bindTexture(a.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(a){this.__SPECTOR_Metadata=a,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=a)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof o||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});p.exports=o}),57183:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.webGLUniformLocation=null,this.gl=a,this.program=r,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var o=this.gl;o.isContextLost()||(this.webGLUniformLocation=o.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});p.exports=g}),9503:((p,M,t)=>{var h={WebGLAttribLocationWrapper:t(93567),WebGLBufferWrapper:t(26128),WebGLProgramWrapper:t(1482),WebGLTextureWrapper:t(82751),WebGLFramebufferWrapper:t(84387),WebGLUniformLocationWrapper:t(57183)};p.exports=h}),76531:((p,M,t)=>{var h=t(13560),g=t(83419),o=t(45319),a=t(50792),r=t(97480),e=t(8443),n=t(57811),u=t(74403),s=t(45818),l=t(29747),c=t(87841),d=t(86555),f=t(56583),m=t(26099),y=t(38058),S=new g({Extends:a,initialize:function(E){a.call(this),this.game=E,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new d,this.gameSize=new d,this.baseSize=new d,this.displaySize=new d,this.scaleMode=h.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=h.CENTER.NO_CENTER,this.orientation=h.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(e.BOOT,this.boot,this)},boot:function(){var C=this.game;this.canvas=C.canvas,this.fullscreen=C.device.fullscreen;var E=this.scaleMode;E!==h.SCALE_MODE.RESIZE&&E!==h.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(E),E===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),C.events.on(e.PRE_STEP,this.step,this),C.events.once(e.READY,this.refresh,this),C.events.once(e.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(C){this.getParent(C),this.getParentBounds();var E=C.width,P=C.height,A=C.scaleMode,R=C.zoom,G=C.autoRound;if(typeof E=="string")if(E.substr(-1)!=="%")E=parseInt(E,10);else{var b=this.parentSize.width;b===0&&(b=window.innerWidth);var L=parseInt(E,10)/100;E=Math.floor(b*L)}if(typeof P=="string")if(P.substr(-1)!=="%")P=parseInt(P,10);else{var w=this.parentSize.height;w===0&&(w=window.innerHeight);var B=parseInt(P,10)/100;P=Math.floor(w*B)}this.scaleMode=A,this.autoRound=G,this.autoCenter=C.autoCenter,this.resizeInterval=C.resizeInterval,G&&(E=Math.floor(E),P=Math.floor(P)),this.gameSize.setSize(E,P),R===h.ZOOM.MAX_ZOOM&&(R=this.getMaxZoom()),this.zoom=R,R!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,P),G&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),C.minWidth>0&&this.displaySize.setMin(C.minWidth*R,C.minHeight*R),C.maxWidth>0&&this.displaySize.setMax(C.maxWidth*R,C.maxHeight*R),this.displaySize.setSize(E,P),(C.snapWidth>0||C.snapHeight>0)&&this.displaySize.setSnap(C.snapWidth,C.snapHeight),this.orientation=s(E,P)},getParent:function(C){var E=C.parent;if(E!==null){if(this.parent=u(E),this.parentIsWindow=this.parent===document.body,C.expandParent&&C.scaleMode!==h.SCALE_MODE.NONE){var P=this.parent.getBoundingClientRect();(this.parentIsWindow||P.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",P=this.parent.getBoundingClientRect(),!this.parentIsWindow&&P.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}C.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(C.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var C=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=n(!0));var P=E.width,A=E.height;if(C.width!==P||C.height!==A)return C.setSize(P,A),!0;if(this.canvas){var R=this.canvasBounds,G=this.canvas.getBoundingClientRect();if(G.x!==R.x||G.y!==R.y)return!0}return!1},lockOrientation:function(C){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,C):!1},setParentSize:function(C,E){return this.parentSize.setSize(C,E),this.refresh()},setGameSize:function(C,E){var P=this.autoRound;P&&(C=Math.floor(C),E=Math.floor(E));var A=this.width,R=this.height;return this.gameSize.resize(C,E),this.baseSize.resize(C,E),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(C/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,R)},resize:function(C,E){var P=this.zoom,A=this.autoRound;A&&(C=Math.floor(C),E=Math.floor(E));var R=this.width,G=this.height;this.gameSize.resize(C,E),this.baseSize.resize(C,E),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(C*P,E*P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var b=this.canvas.style,L=C*P,w=E*P;return A&&(L=Math.floor(L),w=Math.floor(w)),(L!==C||w!==E)&&(b.width=L+"px",b.height=w+"px"),this.refresh(R,G)},setZoom:function(C){return this.zoom=C,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(C,E){return C===void 0&&(C=0),E===void 0&&(E=C),this.displaySize.setSnap(C,E),this.refresh()},refresh:function(C,E){C===void 0&&(C=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var P=this.game.domContainer;if(P){this.baseSize.setCSS(P);var A=this.canvas.style,R=P.style;R.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",R.marginLeft=A.marginLeft,R.marginTop=A.marginTop}return this.emit(r.RESIZE,this.gameSize,this.baseSize,this.displaySize,C,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var C=s(this.width,this.height);C!==this.orientation&&(this.orientation=C,this.emit(r.ORIENTATION_CHANGE,C))}},updateScale:function(){var C=this.canvas.style,E=this.gameSize.width,P=this.gameSize.height,A,R,G=this.zoom,b=this.autoRound;if(this.scaleMode===h.SCALE_MODE.NONE)this.displaySize.setSize(E*G,P*G),A=this.displaySize.width,R=this.displaySize.height,b&&(A=Math.floor(A),R=Math.floor(R)),this._resetZoom&&(C.width=A+"px",C.height=R+"px",this._resetZoom=!1);else if(this.scaleMode===h.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,R=this.displaySize.height,b&&(A=Math.floor(A),R=Math.floor(R)),this.canvas.width=A,this.canvas.height=R;else if(this.scaleMode===h.SCALE_MODE.EXPAND){var L=this.game.config.width,w=this.game.config.height,B=this.parentSize.width,N=this.parentSize.height,Y=B/L,U=N/w,W,O;Y<U?(W=L,O=Y!==0?N/Y:w):(W=U!==0?B/U:L,O=w);var V=o(W,this.displaySize.minWidth,this.displaySize.maxWidth),X=o(O,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(V,X),this.gameSize.setSize(V,X),b&&(V=Math.floor(V),X=Math.floor(X)),this.canvas.width=V,this.canvas.height=X;var z=B*(V/W),I=N*(X/O);this.displaySize.setSize(z,I),A=this.displaySize.width,R=this.displaySize.height,b&&(A=Math.floor(A),R=Math.floor(R)),C.width=A+"px",C.height=R+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,R=this.displaySize.height,b&&(A=Math.floor(A),R=Math.floor(R)),C.width=A+"px",C.height=R+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var C=f(this.parentSize.width,this.gameSize.width,0,!0),E=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(C,E),1)},updateCenter:function(){var C=this.autoCenter;if(C!==h.CENTER.NO_CENTER){var E=this.canvas,P=E.style,A=E.getBoundingClientRect(),R=A.width,G=A.height,b=Math.floor((this.parentSize.width-R)/2),L=Math.floor((this.parentSize.height-G)/2);C===h.CENTER.CENTER_HORIZONTALLY?L=0:C===h.CENTER.CENTER_VERTICALLY&&(b=0),P.marginLeft=b+"px",P.marginTop=L+"px"}},updateBounds:function(){var C=this.canvasBounds,E=this.canvas.getBoundingClientRect();C.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),C.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),C.width=E.width,C.height=E.height},transformX:function(C){return(C-this.canvasBounds.left)*this.displayScale.x},transformY:function(C){return(C-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(C){C===void 0&&(C={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(r.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var P=this.getFullscreenTarget();E.keyboard?P[E.request](Element.ALLOW_KEYBOARD_INPUT):P[E.request](C)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(r.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(C){this.removeFullscreenTarget(),this.emit(r.FULLSCREEN_FAILED,C)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var C=document.createElement("div");C.style.margin="0",C.style.padding="0",C.style.width="100%",C.style.height="100%",this.fullscreenTarget=C,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var C=this.fullscreenTarget;if(C&&C.parentNode){var E=C.parentNode;E.insertBefore(this.canvas,C),E.removeChild(C)}}},stopFullscreen:function(){var C=this.fullscreen;if(!C.available)return this.emit(r.FULLSCREEN_UNSUPPORTED),!1;C.active&&document[C.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(r.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(C){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(C)},startListeners:function(){var C=this,E=this.domlisteners;if(E.orientationChange=function(){C.updateBounds(),C._checkOrientation=!0,C.dirty=!0,C.refresh()},E.windowResize=function(){C.updateBounds(),C.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",E.orientationChange,!1):window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(A){return C.onFullScreenChange(A)},E.fullScreenError=function(A){return C.onFullScreenError(A)};var P=["webkit","moz",""];P.forEach(function(A){document.addEventListener(A+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(C,E){C instanceof y||(E=C,C=void 0),E===void 0&&(E=new c);var P=this.baseSize,A=this.parentSize,R=this.canvasBounds,G=this.displayScale,b=R.x>=0?0:-(R.x*G.x),L=R.y>=0?0:-(R.y*G.y),w;A.width>=R.width?w=P.width:w=P.width-(R.width-A.width)*G.x;var B;return A.height>=R.height?B=P.height:B=P.height-(R.height-A.height)*G.y,E.setTo(b,L,w,B),C&&(E.width/=C.zoomX,E.height/=C.zoomY,E.centerX=C.centerX+C.scrollX,E.centerY=C.centerY+C.scrollY),E},step:function(C,E){this.parent&&(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var C=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",C.orientationChange,!1):window.removeEventListener("orientationchange",C.orientationChange,!1),window.removeEventListener("resize",C.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(P){document.removeEventListener(P+"fullscreenchange",C.fullScreenChange,!1),document.removeEventListener(P+"fullscreenerror",C.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",C.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",C.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});p.exports=S}),64743:(p=>{p.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(p=>{p.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(p=>{p.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(p=>{p.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((p,M,t)=>{var h={CENTER:t(64743),ORIENTATION:t(39218),SCALE_MODE:t(81050),ZOOM:t(80805)};p.exports=h}),56139:(p=>{p.exports="enterfullscreen"}),2336:(p=>{p.exports="fullscreenfailed"}),47412:(p=>{p.exports="fullscreenunsupported"}),51452:(p=>{p.exports="leavefullscreen"}),20666:(p=>{p.exports="orientationchange"}),47945:(p=>{p.exports="resize"}),97480:((p,M,t)=>{p.exports={ENTER_FULLSCREEN:t(56139),FULLSCREEN_FAILED:t(2336),FULLSCREEN_UNSUPPORTED:t(47412),LEAVE_FULLSCREEN:t(51452),ORIENTATION_CHANGE:t(20666),RESIZE:t(47945)}}),93364:((p,M,t)=>{var h=t(79291),g=t(13560),o={Center:t(64743),Events:t(97480),Orientation:t(39218),ScaleManager:t(76531),ScaleModes:t(81050),Zoom:t(80805)};o=h(!1,o,g.CENTER),o=h(!1,o,g.ORIENTATION),o=h(!1,o,g.SCALE_MODE),o=h(!1,o,g.ZOOM),p.exports=o}),27397:((p,M,t)=>{var h=t(95540),g=t(35355),o=function(a){var r=a.game.config.defaultPhysicsSystem,e=h(a.settings,"physics",!1);if(!(!r&&!e)){var n=[];if(r&&n.push(g(r+"Physics")),e)for(var u in e)u=g(u.concat("Physics")),n.indexOf(u)===-1&&n.push(u);return n}};p.exports=o}),52106:((p,M,t)=>{var h=t(95540),g=function(o){var a=o.plugins.getDefaultScenePlugins(),r=h(o.settings,"plugins",!1);return Array.isArray(r)?r:a||[]};p.exports=g}),87033:(p=>{var M={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};p.exports=M}),97482:((p,M,t)=>{var h=t(83419),g=t(2368),o=new h({initialize:function(r){this.sys=new g(this,r),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});p.exports=o}),60903:((p,M,t)=>{var h=t(83419),g=t(89993),o=t(44594),a=t(8443),r=t(35154),e=t(54899),n=t(29747),u=t(97482),s=t(2368),l=new h({initialize:function(d,f){if(this.game=d,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,f){Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++)this._pending.push({key:"default",scene:f[m],autoStart:m===0,data:{}})}d.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new u),this.game.events.emit(a.SYSTEM_READY,this.systemScene,this);var c,d,f,m;for(c=0;c<this._pending.length;c++){d=this._pending[c],f=d.key,m=d.scene;var y;m instanceof u?y=this.createSceneFromInstance(f,m):typeof m=="object"?y=this.createSceneFromObject(f,m):typeof m=="function"&&(y=this.createSceneFromFunction(f,m)),f=y.sys.settings.key,this.keys[f]=y,this.scenes.push(y),this._data[f]&&(y.sys.settings.data=this._data[f].data,this._data[f].autoStart&&(d.autoStart=!0)),(d.autoStart||y.sys.settings.active)&&this._start.push(f)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)d=this._start[c],this.start(d);this._start.length=0}},processQueue:function(){var c=this._pending.length,d=this._queue.length;if(!(c===0&&d===0)){var f,m;if(c){for(f=0;f<c;f++)m=this._pending[f],this.add(m.key,m.scene,m.autoStart,m.data);for(f=0;f<this._start.length;f++)m=this._start[f],this.start(m);this._start.length=0,this._pending.length=0}for(f=0;f<this._queue.length;f++)m=this._queue[f],this[m.op](m.keyA,m.keyB,m.data);this._queue.length=0}},add:function(c,d,f,m){if(f===void 0&&(f=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:c,scene:d,autoStart:f,data:m}),this.isBooted||(this._data[c]={data:m}),null;c=this.getKey(c,d);var y;return d instanceof u?y=this.createSceneFromInstance(c,d):typeof d=="object"?(d.key=c,y=this.createSceneFromObject(c,d)):typeof d=="function"&&(y=this.createSceneFromFunction(c,d)),y.sys.settings.data=m,c=y.sys.settings.key,this.keys[c]=y,this.scenes.push(y),(f||y.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),y},remove:function(c){if(this.isProcessing)return this.queueOp("remove",c);var d=this.getScene(c);if(!d||d.sys.isTransitioning())return this;var f=this.scenes.indexOf(d),m=d.sys.settings.key;return f>-1&&(delete this.keys[m],this.scenes.splice(f,1),this._start.indexOf(m)>-1&&(f=this._start.indexOf(m),this._start.splice(f,1)),d.sys.destroy()),this},bootScene:function(c){var d=c.sys,f=d.settings;d.sceneUpdate=n,c.init&&(c.init.call(c,f.data),f.status=g.INIT,f.isTransition&&d.events.emit(o.TRANSITION_INIT,f.transitionFrom,f.transitionDuration));var m;d.load&&(m=d.load,m.reset()),m&&c.preload?(c.preload.call(c),f.status=g.LOADING,m.once(e.COMPLETE,this.loadComplete,this),m.start()):this.create(c)},loadComplete:function(c){this.create(c.scene)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,d){this.processQueue(),this.isProcessing=!0;for(var f=this.scenes.length-1;f>=0;f--){var m=this.scenes[f].sys;m.settings.status>g.START&&m.settings.status<=g.RUNNING&&m.step(c,d),m.scenePlugin&&m.scenePlugin._target&&m.scenePlugin.step(c,d)}},render:function(c){for(var d=0;d<this.scenes.length;d++){var f=this.scenes[d].sys;f.settings.visible&&f.settings.status>=g.LOADING&&f.settings.status<g.SLEEPING&&f.render(c)}this.isProcessing=!1},create:function(c){var d=c.sys,f=d.settings;c.create&&(f.status=g.CREATING,c.create.call(c,f.data),f.status===g.DESTROYED)||(f.isTransition&&d.events.emit(o.TRANSITION_START,f.transitionFrom,f.transitionDuration),c.update&&(d.sceneUpdate=c.update),f.status=g.RUNNING,d.events.emit(o.CREATE,c))},createSceneFromFunction:function(c,d){var f=new d;if(f instanceof u){var m=f.sys.settings.key;if(m!==""&&(c=m),this.keys.hasOwnProperty(c))throw new Error("Cannot add Scene with duplicate key: "+c);return this.createSceneFromInstance(c,f)}else return f.sys=new s(f),f.sys.settings.key=c,f.sys.init(this.game),f},createSceneFromInstance:function(c,d){var f=d.sys.settings.key;return f===""&&(d.sys.settings.key=c),d.sys.init(this.game),d},createSceneFromObject:function(c,d){var f=new u(d),m=f.sys.settings.key;m!==""?c=m:f.sys.settings.key=c,f.sys.init(this.game);for(var y=["init","preload","create","update","render"],S=0;S<y.length;S++){var C=r(d,y[S],null);C&&(f[y[S]]=C)}if(d.hasOwnProperty("extend")){for(var E in d.extend)if(d.extend.hasOwnProperty(E)){var P=d.extend[E];E==="data"&&f.hasOwnProperty("data")&&typeof P=="object"?f.data.merge(P):E!=="sys"&&(f[E]=P)}}return f},getKey:function(c,d){if(c||(c="default"),typeof d=="function")return c;if(d instanceof u?c=d.sys.settings.key:typeof d=="object"&&d.hasOwnProperty("key")&&(c=d.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add Scene with duplicate key: "+c);return c},getScenes:function(c,d){c===void 0&&(c=!0),d===void 0&&(d=!1);for(var f=[],m=this.scenes,y=0;y<m.length;y++){var S=m[y];S&&(!c||c&&S.sys.isActive())&&f.push(S)}return d?f.reverse():f},getScene:function(c){if(typeof c=="string"){if(this.keys[c])return this.keys[c]}else for(var d=0;d<this.scenes.length;d++)if(c===this.scenes[d])return c;return null},isActive:function(c){var d=this.getScene(c);return d?d.sys.isActive():null},isPaused:function(c){var d=this.getScene(c);return d?d.sys.isPaused():null},isVisible:function(c){var d=this.getScene(c);return d?d.sys.isVisible():null},isSleeping:function(c){var d=this.getScene(c);return d?d.sys.isSleeping():null},pause:function(c,d){var f=this.getScene(c);return f&&f.sys.pause(d),this},resume:function(c,d){var f=this.getScene(c);return f&&f.sys.resume(d),this},sleep:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.sleep(d),this},wake:function(c,d){var f=this.getScene(c);return f&&f.sys.wake(d),this},run:function(c,d){var f=this.getScene(c);if(!f){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===c){this.queueOp("start",c,d);break}return this}f.sys.isSleeping()?f.sys.wake(d):f.sys.isPaused()?f.sys.resume(d):this.start(c,d)},start:function(c,d){if(!this.isBooted)return this._data[c]={autoStart:!0,data:d},this;var f=this.getScene(c);if(!f)return console.warn("Scene key not found: "+c),this;var m=f.sys,y=m.settings.status;if(y>=g.START&&y<=g.CREATING)return this;if(y>=g.RUNNING&&y<=g.SLEEPING)m.shutdown(),m.sceneUpdate=n,m.start(d);else{m.sceneUpdate=n,m.start(d);var S;if(m.load&&(S=m.load),S&&m.settings.hasOwnProperty("pack")&&(S.reset(),S.addPack({payload:m.settings.pack})))return m.settings.status=g.LOADING,S.once(e.COMPLETE,this.payloadComplete,this),S.start(),this}return this.bootScene(f),this},stop:function(c,d){var f=this.getScene(c);if(f&&!f.sys.isTransitioning()&&f.sys.settings.status!==g.SHUTDOWN){var m=f.sys.load;m&&(m.off(e.COMPLETE,this.loadComplete,this),m.off(e.COMPLETE,this.payloadComplete,this)),f.sys.shutdown(d)}return this},switch:function(c,d,f){var m=this.getScene(c),y=this.getScene(d);return m&&y&&m!==y&&(this.sleep(c),this.isSleeping(d)?this.wake(d,f):this.start(d,f)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var d=this.getScene(c);return this.scenes.indexOf(d)},bringToTop:function(c){if(this.isProcessing)return this.queueOp("bringToTop",c);var d=this.getIndex(c),f=this.scenes;if(d!==-1&&d<f.length){var m=this.getScene(c);f.splice(d,1),f.push(m)}return this},sendToBack:function(c){if(this.isProcessing)return this.queueOp("sendToBack",c);var d=this.getIndex(c);if(d!==-1&&d>0){var f=this.getScene(c);this.scenes.splice(d,1),this.scenes.unshift(f)}return this},moveDown:function(c){if(this.isProcessing)return this.queueOp("moveDown",c);var d=this.getIndex(c);if(d>0){var f=d-1,m=this.getScene(c),y=this.getAt(f);this.scenes[d]=y,this.scenes[f]=m}return this},moveUp:function(c){if(this.isProcessing)return this.queueOp("moveUp",c);var d=this.getIndex(c);if(d<this.scenes.length-1){var f=d+1,m=this.getScene(c),y=this.getAt(f);this.scenes[d]=y,this.scenes[f]=m}return this},moveAbove:function(c,d){if(c===d)return this;if(this.isProcessing)return this.queueOp("moveAbove",c,d);var f=this.getIndex(c),m=this.getIndex(d);if(f!==-1&&m!==-1&&m<f){var y=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(f+(m>f),0,y)}return this},moveBelow:function(c,d){if(c===d)return this;if(this.isProcessing)return this.queueOp("moveBelow",c,d);var f=this.getIndex(c),m=this.getIndex(d);if(f!==-1&&m!==-1&&m>f){var y=this.getAt(m);this.scenes.splice(m,1),f===0?this.scenes.unshift(y):this.scenes.splice(f-(m<f),0,y)}return this},queueOp:function(c,d,f,m){return this._queue.push({op:c,keyA:d,keyB:f,data:m}),this},swapPosition:function(c,d){if(c===d)return this;if(this.isProcessing)return this.queueOp("swapPosition",c,d);var f=this.getIndex(c),m=this.getIndex(d);if(f!==m&&f!==-1&&m!==-1){var y=this.getAt(f);this.scenes[f]=this.scenes[m],this.scenes[m]=y}return this},dump:function(){for(var c=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],f=0;f<this.scenes.length;f++){var m=this.scenes[f].sys,y=m.settings.visible&&(m.settings.status===g.RUNNING||m.settings.status===g.PAUSED)?"[*] ":"[-] ";y+=m.settings.key+" ("+d[m.settings.status]+")",c.push(y)}console.log(c.join(`
`))},destroy:function(){for(var c=0;c<this.scenes.length;c++){var d=this.scenes[c].sys;d.destroy()}this.systemScene.sys.destroy(),this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});p.exports=l}),52209:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(44594),a=t(95540),r=t(37277),e=new g({initialize:function(u){this.scene=u,this.systems=u.sys,this.settings=u.sys.settings,this.key=u.sys.settings.key,this.manager=u.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},start:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,u),this},restart:function(n){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,n),this},transition:function(n){n===void 0&&(n={});var u=a(n,"target",!1),s=this.manager.getScene(u);if(!u||!this.checkValidTransition(s))return!1;var l=a(n,"duration",1e3);this._elapsed=0,this._target=s,this._duration=l,this._willSleep=a(n,"sleep",!1),this._willRemove=a(n,"remove",!1);var c=a(n,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=a(n,"onUpdateScope",this.scene));var d=a(n,"allowInput",!1);this.settings.transitionAllowInput=d;var f=s.sys.settings;f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=l,f.transitionAllowInput=d,a(n,"moveAbove",!1)?this.manager.moveAbove(this.key,u):a(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),s.sys.isSleeping()?s.sys.wake(a(n,"data")):this.manager.start(u,a(n,"data"));var m=a(n,"onStart",null),y=a(n,"onStartScope",this.scene);return m&&m.call(y,this.scene,s,l),this.systems.events.emit(o.TRANSITION_OUT,s,l),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,u){this._elapsed+=u,this.transitionProgress=h(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,u=this._target.sys.settings;n.events.emit(o.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,u,s,l){return this.manager.add(n,u,s,l)},launch:function(n,u){return n&&n!==this.key&&this.manager.queueOp("start",n,u),this},run:function(n,u){return n&&n!==this.key&&this.manager.queueOp("run",n,u),this},pause:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,u),this},resume:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,u),this},sleep:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,u),this},wake:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,u),this},switch:function(n,u){return n!==this.key&&this.manager.queueOp("switch",this.key,n,u),this},stop:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,u),this},setActive:function(n,u,s){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setActive(n,s),this},setVisible:function(n,u){u===void 0&&(u=this.key);var s=this.manager.getScene(u);return s&&s.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,u){return u===void 0&&(u=this.key),n!==u&&this.manager.swapPosition(n,u),this},moveAbove:function(n,u){return u===void 0&&(u=this.key),n!==u&&this.manager.moveAbove(n,u),this},moveBelow:function(n,u){return u===void 0&&(u=this.key),n!==u&&this.manager.moveBelow(n,u),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getStatus:function(n){var u=this.manager.getScene(n);if(u)return u.sys.getStatus()},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(o.SHUTDOWN,this.shutdown,this),n.off(o.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});r.register("ScenePlugin",e,"scenePlugin"),p.exports=e}),55681:((p,M,t)=>{var h=t(89993),g=t(35154),o=t(46975),a=t(87033),r={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:h.PENDING,key:g(e,"key",""),active:g(e,"active",!1),visible:g(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(e,"pack",!1),cameras:g(e,"cameras",null),map:g(e,"map",o(a,g(e,"mapAdd",{}))),physics:g(e,"physics",{}),loader:g(e,"loader",{}),plugins:g(e,"plugins",!1),input:g(e,"input",{})}}};p.exports=r}),2368:((p,M,t)=>{var h=t(83419),g=t(89993),o=t(42363),a=t(44594),r=t(27397),e=t(52106),n=t(29747),u=t(55681),s=new h({initialize:function(c,d){this.scene=c,this.game,this.renderer,this.config=d,this.settings=u.create(d),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=n},init:function(l){this.settings.status=g.INIT,this.sceneUpdate=n,this.game=l,this.renderer=l.renderer,this.canvas=l.canvas,this.context=l.context;var c=l.plugins;this.plugins=c,c.addToScene(this,o.Global,[o.CoreScene,e(this),r(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(l,c){var d=this.events;d.emit(a.PRE_UPDATE,l,c),d.emit(a.UPDATE,l,c),this.sceneUpdate.call(this.scene,l,c),d.emit(a.POST_UPDATE,l,c)},render:function(l){var c=this.displayList;c.depthSort(),this.events.emit(a.PRE_RENDER,l),this.cameras.render(l,c),this.events.emit(a.RENDER,l)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(l){var c=this.settings,d=this.getStatus();return d!==g.CREATING&&d!==g.RUNNING?console.warn("Cannot pause non-running Scene",c.key):this.settings.active&&(c.status=g.PAUSED,c.active=!1,this.events.emit(a.PAUSE,this,l)),this},resume:function(l){var c=this.events,d=this.settings;return this.settings.active||(d.status=g.RUNNING,d.active=!0,c.emit(a.RESUME,this,l)),this},sleep:function(l){var c=this.settings,d=this.getStatus();return d!==g.CREATING&&d!==g.RUNNING?console.warn("Cannot sleep non-running Scene",c.key):(c.status=g.SLEEPING,c.active=!1,c.visible=!1,this.events.emit(a.SLEEP,this,l)),this},wake:function(l){var c=this.events,d=this.settings;return d.status=g.RUNNING,d.active=!0,d.visible=!0,c.emit(a.WAKE,this,l),d.isTransition&&c.emit(a.TRANSITION_WAKE,d.transitionFrom,d.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var l=this.settings.status;return l>g.PENDING&&l<=g.RUNNING},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(l){return this.settings.visible=l,this},setActive:function(l,c){return l?this.resume(c):this.pause(c)},start:function(l){var c=this.events,d=this.settings;l&&(d.data=l),d.status=g.START,d.active=!0,d.visible=!0,c.emit(a.START,this),c.emit(a.READY,this,l)},shutdown:function(l){var c=this.events,d=this.settings;c.off(a.TRANSITION_INIT),c.off(a.TRANSITION_START),c.off(a.TRANSITION_COMPLETE),c.off(a.TRANSITION_OUT),d.status=g.SHUTDOWN,d.active=!1,d.visible=!1,c.emit(a.SHUTDOWN,this,l)},destroy:function(){var l=this.events,c=this.settings;c.status=g.DESTROYED,c.active=!1,c.visible=!1,l.emit(a.DESTROY,this),l.removeAllListeners();for(var d=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],f=0;f<d.length;f++)this[d[f]]=null}});p.exports=s}),89993:(p=>{var M={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};p.exports=M}),69830:(p=>{p.exports="addedtoscene"}),7919:(p=>{p.exports="boot"}),46763:(p=>{p.exports="create"}),11763:(p=>{p.exports="destroy"}),71555:(p=>{p.exports="pause"}),36735:(p=>{p.exports="postupdate"}),3809:(p=>{p.exports="prerender"}),90716:(p=>{p.exports="preupdate"}),58262:(p=>{p.exports="ready"}),91633:(p=>{p.exports="removedfromscene"}),10319:(p=>{p.exports="render"}),87132:(p=>{p.exports="resume"}),81961:(p=>{p.exports="shutdown"}),90194:(p=>{p.exports="sleep"}),6265:(p=>{p.exports="start"}),33178:(p=>{p.exports="transitioncomplete"}),43063:(p=>{p.exports="transitioninit"}),11259:(p=>{p.exports="transitionout"}),61611:(p=>{p.exports="transitionstart"}),45209:(p=>{p.exports="transitionwake"}),22966:(p=>{p.exports="update"}),21747:(p=>{p.exports="wake"}),44594:((p,M,t)=>{p.exports={ADDED_TO_SCENE:t(69830),BOOT:t(7919),CREATE:t(46763),DESTROY:t(11763),PAUSE:t(71555),POST_UPDATE:t(36735),PRE_RENDER:t(3809),PRE_UPDATE:t(90716),READY:t(58262),REMOVED_FROM_SCENE:t(91633),RENDER:t(10319),RESUME:t(87132),SHUTDOWN:t(81961),SLEEP:t(90194),START:t(6265),TRANSITION_COMPLETE:t(33178),TRANSITION_INIT:t(43063),TRANSITION_OUT:t(11259),TRANSITION_START:t(61611),TRANSITION_WAKE:t(45209),UPDATE:t(22966),WAKE:t(21747)}}),62194:((p,M,t)=>{var h=t(89993),g=t(79291),o={Events:t(44594),GetPhysicsPlugins:t(27397),GetScenePlugins:t(52106),SceneManager:t(60903),ScenePlugin:t(52209),Settings:t(55681),Systems:t(2368)};o=g(!1,o,h),p.exports=o}),30341:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(14463),a=t(79291),r=t(29747),e=new h({Extends:g,initialize:function(u,s,l){g.call(this),this.manager=u,this.key=s,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),!1):(n=a(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,!0)},updateMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(this.markers[n.name]=a(!0,this.markers[n.name],n),!0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),!1)},removeMarker:function(n){var u=this.markers[n];return u?(this.markers[n]=null,u):null},play:function(n,u){if(n===void 0&&(n=""),typeof n=="object"&&(u=n,n=""),typeof n!="string")return!1;if(!n)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:r,calculateRate:function(){var n=1.0005777895065548,u=this.currentConfig.detune+this.manager.detune,s=Math.pow(n,u);this.totalRate=this.currentConfig.rate*this.manager.rate*s},destroy:function(){this.pendingRemove||(this.stop(),this.emit(o.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});p.exports=e}),85034:((p,M,t)=>{var h=t(83419),g=t(41786),o=t(50792),a=t(14463),r=t(8443),e=t(46710),n=t(58731),u=t(29747),s=t(26099),l=new h({Extends:o,initialize:function(d){o.call(this),this.game=d,this.jsonCache=d.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new s;var f=d.events;f.on(r.BLUR,this.onGameBlur,this),f.on(r.FOCUS,this.onGameFocus,this),f.on(r.PRE_STEP,this.update,this),f.once(r.DESTROY,this.destroy,this)},add:u,addAudioSprite:function(c,d){d===void 0&&(d={});var f=this.add(c,d);f.spritemap=this.jsonCache.get(c).spritemap;for(var m in f.spritemap)if(f.spritemap.hasOwnProperty(m)){var y=g(d),S=f.spritemap[m];y.loop=S.hasOwnProperty("loop")?S.loop:!1,f.addMarker({name:m,start:S.start,duration:S.end-S.start,config:y})}return f},get:function(c){return n(this.sounds,"key",c)},getAll:function(c){return c?e(this.sounds,"key",c):e(this.sounds)},getAllPlaying:function(){return e(this.sounds,"isPlaying",!0)},play:function(c,d){var f=this.add(c);return f.once(a.COMPLETE,f.destroy,f),d?d.name?(f.addMarker(d),f.play(d.name)):f.play(d):f.play()},playAudioSprite:function(c,d,f){var m=this.addAudioSprite(c);return m.once(a.COMPLETE,m.destroy,m),m.play(d,f)},remove:function(c){var d=this.sounds.indexOf(c);return d!==-1?(c.destroy(),this.sounds.splice(d,1),!0):!1},removeAll:function(){this.sounds.forEach(function(c){c.destroy()}),this.sounds.length=0},removeByKey:function(c){for(var d=0,f=this.sounds.length-1;f>=0;f--){var m=this.sounds[f];m.key===c&&(m.destroy(),this.sounds.splice(f,1),d++)}return d},pauseAll:function(){this.forEachActiveSound(function(c){c.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(c){c.resume()}),this.emit(a.RESUME_ALL,this)},setListenerPosition:u,stopAll:function(){this.forEachActiveSound(function(c){c.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(c){var d=0;return this.getAll(c).forEach(function(f){f.stop()&&d++}),d},isPlaying:function(c){var d=this.sounds,f=d.length-1,m;if(c===void 0){for(;f>=0;f--)if(m=this.sounds[f],m.isPlaying)return!0}else for(;f>=0;f--)if(m=this.sounds[f],m.key===c&&m.isPlaying)return!0;return!1},unlock:u,onBlur:u,onFocus:u,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(c,d){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var f=this.sounds.length-1;f>=0;f--)this.sounds[f].pendingRemove&&this.sounds.splice(f,1);this.sounds.forEach(function(m){m.update(c,d)})},destroy:function(){this.game.events.off(r.BLUR,this.onGameBlur,this),this.game.events.off(r.FOCUS,this.onGameFocus,this),this.game.events.off(r.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(c,d){var f=this;this.sounds.forEach(function(m,y){m&&!m.pendingRemove&&c.call(d||f,m,y,f.sounds)})},setRate:function(c){return this.rate=c,this},rate:{get:function(){return this._rate},set:function(c){this._rate=c,this.forEachActiveSound(function(d){d.calculateRate()}),this.emit(a.GLOBAL_RATE,this,c)}},setDetune:function(c){return this.detune=c,this},detune:{get:function(){return this._detune},set:function(c){this._detune=c,this.forEachActiveSound(function(d){d.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,c)}}});p.exports=l}),14747:((p,M,t)=>{var h=t(33684),g=t(25960),o=t(57490),a={create:function(r){var e=r.config.audio,n=r.device.audio;return e.noAudio||!n.webAudio&&!n.audioData?new g(r):n.webAudio&&!e.disableWebAudio?new o(r):new h(r)}};p.exports=a}),19723:(p=>{p.exports="complete"}),98882:(p=>{p.exports="decodedall"}),57506:(p=>{p.exports="decoded"}),73146:(p=>{p.exports="destroy"}),11305:(p=>{p.exports="detune"}),40577:(p=>{p.exports="detune"}),30333:(p=>{p.exports="mute"}),20394:(p=>{p.exports="rate"}),21802:(p=>{p.exports="volume"}),1299:(p=>{p.exports="looped"}),99190:(p=>{p.exports="loop"}),97125:(p=>{p.exports="mute"}),89259:(p=>{p.exports="pan"}),79986:(p=>{p.exports="pauseall"}),17586:(p=>{p.exports="pause"}),19618:(p=>{p.exports="play"}),42306:(p=>{p.exports="rate"}),10387:(p=>{p.exports="resumeall"}),48959:(p=>{p.exports="resume"}),9960:(p=>{p.exports="seek"}),19180:(p=>{p.exports="stopall"}),98328:(p=>{p.exports="stop"}),50401:(p=>{p.exports="unlocked"}),52498:(p=>{p.exports="volume"}),14463:((p,M,t)=>{p.exports={COMPLETE:t(19723),DECODED:t(57506),DECODED_ALL:t(98882),DESTROY:t(73146),DETUNE:t(11305),GLOBAL_DETUNE:t(40577),GLOBAL_MUTE:t(30333),GLOBAL_RATE:t(20394),GLOBAL_VOLUME:t(21802),LOOP:t(99190),LOOPED:t(1299),MUTE:t(97125),PAN:t(89259),PAUSE_ALL:t(79986),PAUSE:t(17586),PLAY:t(19618),RATE:t(42306),RESUME_ALL:t(10387),RESUME:t(48959),SEEK:t(9960),STOP_ALL:t(19180),STOP:t(98328),UNLOCKED:t(50401),VOLUME:t(52498)}}),64895:((p,M,t)=>{var h=t(30341),g=t(83419),o=t(14463),a=t(45319),r=new g({Extends:h,initialize:function(n,u,s){if(s===void 0&&(s={}),this.tags=n.game.cache.audio.get(u),!this.tags)throw new Error('No cached audio asset with key "'+u);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,h.call(this,n,u,s)},play:function(e,n){return this.manager.isLocked(this,"play",[e,n])||!h.prototype.play.call(this,e,n)||!this.pickAndPlayAudioTag()?!1:(this.emit(o.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!h.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(o.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!h.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(o.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!h.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(o.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,n=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+n*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var n=this.tags[e];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&u.push(l)},this),u.sort(function(l,c){return l.loop===c.loop?c.seek/c.duration-l.seek/l.duration:l.loop?1:-1});var s=u[0];return this.audio=s.audio,s.reset(),s.audio=null,s.startTime=0,s.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){h.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var n=this.currentMarker?this.currentMarker.start:0,u=n+this.duration,s=this.audio.currentTime;if(this.currentConfig.loop)s>=u-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,s-u),s=this.audio.currentTime):s<n&&(this.audio.currentTime+=n,s=this.audio.currentTime),s<this.previousTime&&this.emit(o.LOOPED,this);else if(s>=u){this.reset(),this.stopAndReleaseAudioTag(),this.emit(o.COMPLETE,this);return}this.previousTime=s}},destroy:function(){h.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){h.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(o.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(o.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,o.RATE,e)&&(this.calculateRate(),this.emit(o.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,o.DETUNE,e)&&(this.calculateRate(),this.emit(o.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(o.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(o.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(o.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});p.exports=r}),33684:((p,M,t)=>{var h=t(85034),g=t(83419),o=t(14463),a=t(64895),r=new g({Extends:h,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,h.call(this,n)},add:function(e,n){var u=new a(this,e,n);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(l,c){for(var d=0;d<c.length;d++)if(c[d].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var n=!1,u=function(){n=!0},s=function(){if(n){n=!1;return}document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",s);var l=[];if(e.game.cache.audio.entries.each(function(d,f){for(var m=0;m<f.length;m++){var y=f[m];y.dataset.locked==="true"&&l.push(y)}return!0}),l.length!==0){var c=l[l.length-1];c.oncanplaythrough=function(){c.oncanplaythrough=null,l.forEach(function(d){d.dataset.locked="false"}),e.unlocked=!0},l.forEach(function(d){d.load()})}};this.once(o.UNLOCKED,function(){for(this.forEachActiveSound(function(c){c.currentMarker===null&&c.duration===0&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",s,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){h.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,n,u){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:n,value:u}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(o.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(o.GLOBAL_VOLUME,this,e)}}});p.exports=r}),23717:((p,M,t)=>{p.exports={SoundManagerCreator:t(14747),Events:t(14463),BaseSound:t(30341),BaseSoundManager:t(85034),WebAudioSound:t(71741),WebAudioSoundManager:t(57490),HTML5AudioSound:t(64895),HTML5AudioSoundManager:t(33684),NoAudioSound:t(4603),NoAudioSoundManager:t(25960)}}),4603:((p,M,t)=>{var h=t(30341),g=t(83419),o=t(50792),a=t(79291),r=t(29747),e=function(){return!1},n=function(){return null},u=function(){return this},s=new g({Extends:o,initialize:function(c,d,f){f===void 0&&(f={}),o.call(this),this.manager=c,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},f),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:e,updateMarker:e,removeMarker:n,play:e,pause:e,resume:e,stop:e,setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u,applyConfig:n,resetConfig:n,update:r,calculateRate:n,destroy:function(){h.prototype.destroy.call(this)}});p.exports=s}),25960:((p,M,t)=>{var h=t(85034),g=t(83419),o=t(50792),a=t(4603),r=t(29747),e=new g({Extends:o,initialize:function(u){o.call(this),this.game=u,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,u){var s=new a(this,n,u);return this.sounds.push(s),s},addAudioSprite:function(n,u){var s=this.add(n,u);return s.spritemap={},s},get:function(n){return h.prototype.get.call(this,n)},getAll:function(n){return h.prototype.getAll.call(this,n)},play:function(n,u){return!1},playAudioSprite:function(n,u,s){return!1},remove:function(n){return h.prototype.remove.call(this,n)},removeAll:function(){return h.prototype.removeAll.call(this)},removeByKey:function(n){return h.prototype.removeByKey.call(this,n)},stopByKey:function(n){return h.prototype.stopByKey.call(this,n)},onBlur:r,onFocus:r,onGameBlur:r,onGameFocus:r,pauseAll:r,resumeAll:r,stopAll:r,update:r,setRate:r,setDetune:r,setMute:r,setVolume:r,unlock:r,forEachActiveSound:function(n,u){h.prototype.forEachActiveSound.call(this,n,u)},destroy:function(){h.prototype.destroy.call(this)}});p.exports=e}),71741:((p,M,t)=>{var h=t(30341),g=t(83419),o=t(14463),a=t(95540),r=new g({Extends:h,initialize:function(n,u,s){if(s===void 0&&(s={}),this.audioBuffer=n.game.cache.audio.get(u),!this.audioBuffer)throw new Error('Audio key "'+u+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=n.context.createGain(),this.volumeNode=n.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),n.context.createPanner&&(this.spatialNode=n.context.createPanner(),this.volumeNode.connect(this.spatialNode)),n.context.createStereoPanner?(this.pannerNode=n.context.createStereoPanner(),n.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(n.destination)):n.context.createPanner?this.spatialNode.connect(n.destination):this.volumeNode.connect(n.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,h.call(this,n,u,s)},play:function(e,n){return h.prototype.play.call(this,e,n)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(o.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!h.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(o.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!h.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(o.RESUME,this),!0)},stop:function(){return h.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(o.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,n=this.currentConfig.delay,u=this.manager.context.currentTime+n,s=(this.currentMarker?this.currentMarker.start:0)+e,l=this.duration-e;this.playTime=u-e,this.startTime=u,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,u),Math.max(0,s),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),n=this.currentMarker?this.currentMarker.start:0,u=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,n),Math.max(0,u))},createBufferSource:function(){var e=this,n=this.manager.context.createBufferSource();return n.buffer=this.audioBuffer,n.connect(this.muteNode),n.onended=function(u){var s=u.target;(s===e.source||s===e.loopSource)&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},n},stopAndRemoveBufferSource:function(){if(this.source){var e=this.source;this.source=null,e.stop(),e.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var e=this.currentConfig.source;if(e&&this.manager.context.createPanner){var n=this.spatialNode;n.panningModel=a(e,"panningModel","equalpower"),n.distanceModel=a(e,"distanceModel","inverse"),n.orientationX.value=a(e,"orientationX",0),n.orientationY.value=a(e,"orientationY",0),n.orientationZ.value=a(e,"orientationZ",-1),n.refDistance=a(e,"refDistance",1),n.maxDistance=a(e,"maxDistance",1e4),n.rolloffFactor=a(e,"rolloffFactor",1),n.coneInnerAngle=a(e,"coneInnerAngle",360),n.coneOuterAngle=a(e,"coneOuterAngle",0),n.coneOuterGain=a(e,"coneOuterGain",0),this.spatialSource=a(e,"follow",null),this.spatialSource||(n.positionX.value=a(e,"x",0),n.positionY.value=a(e,"y",0),n.positionZ.value=a(e,"z",0))}h.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(e){this.spatialNode&&(this.spatialNode.positionX.value=e)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(e){this.spatialNode&&(this.spatialNode.positionY.value=e)}},update:function(){if(this.isPlaying&&this.spatialSource){var e=a(this.spatialSource,"x",null),n=a(this.spatialSource,"y",null);e&&e!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=e),n&&n!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=n)}this.hasEnded?(h.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(o.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(o.LOOPED,this))},destroy:function(){this.pendingRemove||(h.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){h.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,n=0;n<this.rateUpdates.length;n++){var u=0;n<this.rateUpdates.length-1?u=this.rateUpdates[n+1].time:u=this.manager.context.currentTime-this.playTime,e+=(u-this.rateUpdates[n].time)*this.rateUpdates[n].rate}return e},getLoopTime:function(){for(var e=0,n=0;n<this.rateUpdates.length-1;n++)e+=(this.rateUpdates[n+1].time-this.rateUpdates[n].time)*this.rateUpdates[n].rate;var u=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+u.time+(this.duration-e)/u.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(o.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(o.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(o.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(o.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(o.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(o.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(o.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});p.exports=r}),57490:((p,M,t)=>{var h=t(53134),g=t(85034),o=t(83419),a=t(14463),r=t(8443),e=t(71741),n=t(95540),u=new o({Extends:g,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",g.call(this,l),this.locked&&(l.isBooted?this.unlock():l.events.once(r.BOOT,this.unlock,this)),l.events.on(r.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var s=this.context;window.setTimeout(function(){s&&(s.suspend(),s.resume())},100)},createAudioContext:function(s){var l=s.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(s){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=s,this.masterMuteNode=s.createGain(),this.masterVolumeNode=s.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(s.destination),this.destination=this.masterMuteNode,this},add:function(s,l){var c=new e(this,s,l);return this.sounds.push(c),c},decodeAudio:function(s,l){var c;Array.isArray(s)?c=s:c=[{key:s,data:l}];for(var d=this.game.cache.audio,f=c.length,m=0;m<c.length;m++){var y=c[m],S=y.key,C=y.data;typeof C=="string"&&(C=h(C));var E=function(A,R){d.add(A,R),this.emit(a.DECODED,A),f--,f===0&&this.emit(a.DECODED_ALL)}.bind(this,S),P=function(A,R){console.error("Error decoding audio: "+A+" - ",R?R.message:""),f--,f===0&&this.emit(a.DECODED_ALL)}.bind(this,S);this.context.decodeAudioData(C,E,P)}},setListenerPosition:function(s,l){return s===void 0&&(s=this.game.scale.width/2),l===void 0&&(l=this.game.scale.height/2),this.listenerPosition.set(s,l),this},unlock:function(){var s=this,l=document.body,c=function d(){if(s.context&&l){var f=l.removeEventListener.bind(l);s.context.resume().then(function(){f("touchstart",d),f("touchend",d),f("mousedown",d),f("mouseup",d),f("keydown",d),s.unlocked=!0},function(){f("touchstart",d),f("touchend",d),f("mousedown",d),f("mouseup",d),f("keydown",d)})}};l&&(l.addEventListener("touchstart",c,!1),l.addEventListener("touchend",c,!1),l.addEventListener("mousedown",c,!1),l.addEventListener("mouseup",c,!1),l.addEventListener("keydown",c,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var s=this.context;s&&!this.locked&&(s.state==="suspended"||s.state==="interrupted")&&s.resume()},update:function(s,l){var c=this.context.listener,d=n(this.listenerPosition,"x",null),f=n(this.listenerPosition,"y",null);if(c&&c.positionX!==void 0)d&&d!==this._spatialx&&(this._spatialx=c.positionX.value=d),f&&f!==this._spatialy&&(this._spatialy=c.positionY.value=f);else if(c){d&&d!==this._spatialx&&(this._spatialx=d),f&&f!==this._spatialy&&(this._spatialy=f);var m=n(c,"z",0);c.setPosition(this._spatialx||0,this._spatialy||0,m)}g.prototype.update.call(this,s,l),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var s=this;this.context.close().then(function(){s.context=null})}this.game.events.off(r.VISIBLE,this.onGameVisible,this),g.prototype.destroy.call(this)},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(s){this.masterMuteNode.gain.setValueAtTime(s?0:1,0),this.emit(a.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(s){this.masterVolumeNode.gain.setValueAtTime(s,0),this.emit(a.GLOBAL_VOLUME,this,s)}}});p.exports=u}),73162:((p,M,t)=>{var h=t(37105),g=t(83419),o=t(29747),a=t(19186),r=new g({initialize:function(n){this.parent=n,this.list=[],this.position=0,this.addCallback=o,this.removeCallback=o,this._sortKey=""},add:function(e,n){return n?h.Add(this.list,e):h.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,n,u){return u?h.AddAt(this.list,e,n):h.AddAt(this.list,e,n,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,n){return e?(n===void 0&&(n=function(u,s){return u[e]-s[e]}),a(this.list,n),this):this},getByName:function(e){return h.GetFirst(this.list,"name",e)},getRandom:function(e,n){return h.GetRandom(this.list,e,n)},getFirst:function(e,n,u,s){return h.GetFirst(this.list,e,n,u,s)},getAll:function(e,n,u,s){return h.GetAll(this.list,e,n,u,s)},count:function(e,n){return h.CountAllMatching(this.list,e,n)},swap:function(e,n){h.Swap(this.list,e,n)},moveTo:function(e,n){return h.MoveTo(this.list,e,n)},moveAbove:function(e,n){return h.MoveAbove(this.list,e,n)},moveBelow:function(e,n){return h.MoveBelow(this.list,e,n)},remove:function(e,n){return n?h.Remove(this.list,e):h.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,n){return n?h.RemoveAt(this.list,e):h.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,n,u){return u?h.RemoveBetween(this.list,e,n):h.RemoveBetween(this.list,e,n,this.removeCallback,this)},removeAll:function(e){for(var n=this.list.length;n--;)this.remove(this.list[n],e);return this},bringToTop:function(e){return h.BringToTop(this.list,e)},sendToBack:function(e){return h.SendToBack(this.list,e)},moveUp:function(e){return h.MoveUp(this.list,e),e},moveDown:function(e){return h.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(e,n){return h.Replace(this.list,e,n)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,n,u,s){return h.SetAll(this.list,e,n,u,s),this},each:function(e,n){for(var u=[null],s=2;s<arguments.length;s++)u.push(arguments[s]);for(s=0;s<this.list.length;s++)u[0]=this.list[s],e.apply(n,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});p.exports=r}),90330:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a){this.entries={},this.size=0,this.setAll(a)},setAll:function(o){if(Array.isArray(o))for(var a=0;a<o.length;a++)this.set(o[a][0],o[a][1]);return this},set:function(o,a){return this.has(o)||this.size++,this.entries[o]=a,this},get:function(o){if(this.has(o))return this.entries[o]},getArray:function(){var o=[],a=this.entries;for(var r in a)o.push(a[r]);return o},has:function(o){return this.entries.hasOwnProperty(o)},delete:function(o){return this.has(o)&&(delete this.entries[o],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(o){delete this.entries[o]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var o=[],a=this.entries;for(var r in a)o.push(a[r]);return o},dump:function(){var o=this.entries;console.group("Map");for(var a in o)console.log(a,o[a]);console.groupEnd()},each:function(o){var a=this.entries;for(var r in a)if(o(r,a[r])===!1)break;return this},contains:function(o){var a=this.entries;for(var r in a)if(a[r]===o)return!0;return!1},merge:function(o,a){a===void 0&&(a=!1);var r=this.entries,e=o.entries;for(var n in e)r.hasOwnProperty(n)&&a?r[n]=e[n]:this.set(n,e[n]);return this}});p.exports=g}),25774:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(82348),a=new h({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(r){return this._active.indexOf(r)>-1},isPending:function(r){return this._toProcess>0&&this._pending.indexOf(r)>-1},isDestroying:function(r){return this._destroy.indexOf(r)>-1},add:function(r){return this.checkQueue&&this.isActive(r)&&!this.isDestroying(r)||this.isPending(r)||(this._pending.push(r),this._toProcess++),r},remove:function(r){if(this.isPending(r)){var e=this._pending,n=e.indexOf(r);n!==-1&&e.splice(n,1)}else this.isActive(r)&&(this._destroy.push(r),this._toProcess++);return r},removeAll:function(){for(var r=this._active,e=this._destroy,n=r.length;n--;)e.push(r[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var r=this._destroy,e=this._active,n,u;for(n=0;n<r.length;n++){u=r[n];var s=e.indexOf(u);s!==-1&&(e.splice(s,1),this.emit(o.PROCESS_QUEUE_REMOVE,u))}for(r.length=0,r=this._pending,n=0;n<r.length;n++)u=r[n],(!this.checkQueue||this.checkQueue&&e.indexOf(u)===-1)&&(e.push(u),this.emit(o.PROCESS_QUEUE_ADD,u));return r.length=0,this._toProcess=0,e},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});p.exports=a}),59542:((p,M,t)=>{var h=t(43886);function g(C){if(!(this instanceof g))return new g(C);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(C){var E=this.data,P=[],A=this.toBBox;if(!m(C,E))return P;for(var R=[],G,b,L,w;E;){for(G=0,b=E.children.length;G<b;G++)L=E.children[G],w=E.leaf?A(L):L,m(C,w)&&(E.leaf?P.push(L):f(C,w)?this._all(L,P):R.push(L));E=R.pop()}return P},collides:function(C){var E=this.data,P=this.toBBox;if(!m(C,E))return!1;for(var A=[],R,G,b,L;E;){for(R=0,G=E.children.length;R<G;R++)if(b=E.children[R],L=E.leaf?P(b):b,m(C,L)){if(E.leaf||f(C,L))return!0;A.push(b)}E=A.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var E=0,P=C.length;E<P;E++)this.insert(C[E]);return this}var A=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var R=this.data;this.data=A,A=R}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,E){if(!C)return this;for(var P=this.data,A=this.toBBox(C),R=[],G=[],b,L,w,B;P||R.length;){if(P||(P=R.pop(),L=R[R.length-1],b=G.pop(),B=!0),P.leaf&&(w=o(C,P.children,E),w!==-1))return P.children.splice(w,1),R.push(P),this._condense(R),this;!B&&!P.leaf&&f(P,A)?(R.push(P),G.push(b),b=0,L=P,P=P.children[0]):L?(b++,P=L.children[b],B=!1):P=null}return this},toBBox:function(C){return C},compareMinX:n,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,E){for(var P=[];C;)C.leaf?E.push.apply(E,C.children):P.push.apply(P,C.children),C=P.pop();return E},_build:function(C,E,P,A){var R=P-E+1,G=this._maxEntries,b;if(R<=G)return b=y(C.slice(E,P+1)),a(b,this.toBBox),b;A||(A=Math.ceil(Math.log(R)/Math.log(G)),G=Math.ceil(R/Math.pow(G,A-1))),b=y([]),b.leaf=!1,b.height=A;var L=Math.ceil(R/G),w=L*Math.ceil(Math.sqrt(G)),B,N,Y,U;for(S(C,E,P,w,this.compareMinX),B=E;B<=P;B+=w)for(Y=Math.min(B+w-1,P),S(C,B,Y,L,this.compareMinY),N=B;N<=Y;N+=L)U=Math.min(N+L-1,Y),b.children.push(this._build(C,N,U,A-1));return a(b,this.toBBox),b},_chooseSubtree:function(C,E,P,A){for(var R,G,b,L,w,B,N,Y;A.push(E),!(E.leaf||A.length-1===P);){for(N=Y=1/0,R=0,G=E.children.length;R<G;R++)b=E.children[R],w=s(b),B=c(C,b)-w,B<Y?(Y=B,N=w<N?w:N,L=b):B===Y&&w<N&&(N=w,L=b);E=L||E.children[0]}return E},_insert:function(C,E,P){var A=this.toBBox,R=P?C:A(C),G=[],b=this._chooseSubtree(R,this.data,E,G);for(b.children.push(C),e(b,R);E>=0&&G[E].children.length>this._maxEntries;)this._split(G,E),E--;this._adjustParentBBoxes(R,G,E)},_split:function(C,E){var P=C[E],A=P.children.length,R=this._minEntries;this._chooseSplitAxis(P,R,A);var G=this._chooseSplitIndex(P,R,A),b=y(P.children.splice(G,P.children.length-G));b.height=P.height,b.leaf=P.leaf,a(P,this.toBBox),a(b,this.toBBox),E?C[E-1].children.push(b):this._splitRoot(P,b)},_splitRoot:function(C,E){this.data=y([C,E]),this.data.height=C.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(C,E,P){var A,R,G,b,L,w,B,N;for(w=B=1/0,A=E;A<=P-E;A++)R=r(C,0,A,this.toBBox),G=r(C,A,P,this.toBBox),b=d(R,G),L=s(R)+s(G),b<w?(w=b,N=A,B=L<B?L:B):b===w&&L<B&&(B=L,N=A);return N},_chooseSplitAxis:function(C,E,P){var A=C.leaf?this.compareMinX:n,R=C.leaf?this.compareMinY:u,G=this._allDistMargin(C,E,P,A),b=this._allDistMargin(C,E,P,R);G<b&&C.children.sort(A)},_allDistMargin:function(C,E,P,A){C.children.sort(A);var R=this.toBBox,G=r(C,0,E,R),b=r(C,P-E,P,R),L=l(G)+l(b),w,B;for(w=E;w<P-E;w++)B=C.children[w],e(G,C.leaf?R(B):B),L+=l(G);for(w=P-E-1;w>=E;w--)B=C.children[w],e(b,C.leaf?R(B):B),L+=l(b);return L},_adjustParentBBoxes:function(C,E,P){for(var A=P;A>=0;A--)e(E[A],C)},_condense:function(C){for(var E=C.length-1,P;E>=0;E--)C[E].children.length===0?E>0?(P=C[E-1].children,P.splice(P.indexOf(C[E]),1)):this.clear():a(C[E],this.toBBox)},compareMinX:function(C,E){return C.left-E.left},compareMinY:function(C,E){return C.top-E.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function o(C,E,P){if(!P)return E.indexOf(C);for(var A=0;A<E.length;A++)if(P(C,E[A]))return A;return-1}function a(C,E){r(C,0,C.children.length,E,C)}function r(C,E,P,A,R){R||(R=y(null)),R.minX=1/0,R.minY=1/0,R.maxX=-1/0,R.maxY=-1/0;for(var G=E,b;G<P;G++)b=C.children[G],e(R,C.leaf?A(b):b);return R}function e(C,E){return C.minX=Math.min(C.minX,E.minX),C.minY=Math.min(C.minY,E.minY),C.maxX=Math.max(C.maxX,E.maxX),C.maxY=Math.max(C.maxY,E.maxY),C}function n(C,E){return C.minX-E.minX}function u(C,E){return C.minY-E.minY}function s(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function l(C){return C.maxX-C.minX+(C.maxY-C.minY)}function c(C,E){return(Math.max(E.maxX,C.maxX)-Math.min(E.minX,C.minX))*(Math.max(E.maxY,C.maxY)-Math.min(E.minY,C.minY))}function d(C,E){var P=Math.max(C.minX,E.minX),A=Math.max(C.minY,E.minY),R=Math.min(C.maxX,E.maxX),G=Math.min(C.maxY,E.maxY);return Math.max(0,R-P)*Math.max(0,G-A)}function f(C,E){return C.minX<=E.minX&&C.minY<=E.minY&&E.maxX<=C.maxX&&E.maxY<=C.maxY}function m(C,E){return E.minX<=C.maxX&&E.minY<=C.maxY&&E.maxX>=C.minX&&E.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(C,E,P,A,R){for(var G=[E,P],b;G.length;)P=G.pop(),E=G.pop(),!(P-E<=A)&&(b=E+Math.ceil((P-E)/A/2)*A,h(C,b,E,P,R),G.push(E,b,b,P))}p.exports=g}),35072:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r])},set:function(o){return this.entries.indexOf(o)===-1&&this.entries.push(o),this},get:function(o,a){for(var r=0;r<this.entries.length;r++){var e=this.entries[r];if(e[o]===a)return e}},getArray:function(){return this.entries.slice(0)},delete:function(o){var a=this.entries.indexOf(o);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var o=0;o<this.entries.length;o++){var a=this.entries[o];console.log(a)}console.groupEnd()},each:function(o,a){var r,e=this.entries.slice(),n=e.length;if(a)for(r=0;r<n&&o.call(a,e[r],r)!==!1;r++);else for(r=0;r<n&&o(e[r],r)!==!1;r++);return this},iterate:function(o,a){var r,e=this.entries.length;if(a)for(r=0;r<e&&o.call(a,this.entries[r],r)!==!1;r++);else for(r=0;r<e&&o(this.entries[r],r)!==!1;r++);return this},iterateLocal:function(o){var a,r=[];for(a=1;a<arguments.length;a++)r.push(arguments[a]);var e=this.entries.length;for(a=0;a<e;a++){var n=this.entries[a];n[o].apply(n,r)}return this},clear:function(){return this.entries.length=0,this},contains:function(o){return this.entries.indexOf(o)>-1},union:function(o){var a=new g;return o.entries.forEach(function(r){a.set(r)}),this.entries.forEach(function(r){a.set(r)}),a},intersect:function(o){var a=new g;return this.entries.forEach(function(r){o.contains(r)&&a.set(r)}),a},difference:function(o){var a=new g;return this.entries.forEach(function(r){o.contains(r)||a.set(r)}),a},size:{get:function(){return this.entries.length},set:function(o){return o<this.entries.length?this.entries.length=o:this.entries.length}}});p.exports=g}),86555:((p,M,t)=>{var h=t(45319),g=t(83419),o=t(56583),a=t(26099),r=new g({initialize:function(n,u,s,l){n===void 0&&(n=0),u===void 0&&(u=n),s===void 0&&(s=0),l===void 0&&(l=null),this._width=n,this._height=u,this._parent=l,this.aspectMode=s,this.aspectRatio=u===0?1:n/u,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.snapTo.set(e,n),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.minWidth=h(e,0,this.maxWidth),this.minHeight=h(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,n){return e===void 0&&(e=Number.MAX_VALUE),n===void 0&&(n=e),this.maxWidth=h(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=h(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,n){switch(e===void 0&&(e=0),n===void 0&&(n=e),this.aspectMode){case r.NONE:this._width=this.getNewWidth(o(e,this.snapTo.x)),this._height=this.getNewHeight(o(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case r.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(o(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case r.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(o(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case r.FIT:this.constrain(e,n,!0);break;case r.ENVELOP:this.constrain(e,n,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,n){return this._width=this.getNewWidth(o(e,this.snapTo.x)),this._height=this.getNewHeight(o(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,n){return n===void 0&&(n=!0),e=h(e,this.minWidth,this.maxWidth),n&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,n){return n===void 0&&(n=!0),e=h(e,this.minHeight,this.maxHeight),n&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,n,u){e===void 0&&(e=0),n===void 0&&(n=e),u===void 0&&(u=!0),e=this.getNewWidth(e),n=this.getNewHeight(n);var s=this.snapTo,l=n===0?1:e/n;return u&&this.aspectRatio>l||!u&&this.aspectRatio<l?(e=o(e,s.x),n=e/this.aspectRatio,s.y>0&&(n=o(n,s.y),e=n*this.aspectRatio)):(u&&this.aspectRatio<l||!u&&this.aspectRatio>l)&&(n=o(n,s.y),e=n*this.aspectRatio,s.x>0&&(e=o(e,s.x),n=e*(1/this.aspectRatio))),this._width=e,this._height=n,this},fitTo:function(e,n){return this.constrain(e,n,!0)},envelop:function(e,n){return this.constrain(e,n,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});r.NONE=0,r.WIDTH_CONTROLS_HEIGHT=1,r.HEIGHT_CONTROLS_WIDTH=2,r.FIT=3,r.ENVELOP=4,p.exports=r}),15238:(p=>{p.exports="add"}),56187:(p=>{p.exports="remove"}),82348:((p,M,t)=>{p.exports={PROCESS_QUEUE_ADD:t(15238),PROCESS_QUEUE_REMOVE:t(56187)}}),41392:((p,M,t)=>{p.exports={Events:t(82348),List:t(73162),Map:t(90330),ProcessQueue:t(25774),RTree:t(59542),Set:t(35072),Size:t(86555)}}),57382:((p,M,t)=>{var h=t(83419),g=t(45319),o=t(40987),a=t(8054),r=t(50030),e=t(79237),n=new h({Extends:e,initialize:function(s,l,c,d,f){e.call(this,s,l,c,d,f),this.add("__BASE",0,0,0,d,f),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=d,this.height=f,this.imageData=this.context.getImageData(0,0,d,f),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(u,s,l,c){return c===void 0&&(c=!0),this.context.drawImage(l,u,s),c&&this.update(),this},drawFrame:function(u,s,l,c,d){l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=!0);var f=this.manager.getFrame(u,s);if(f){var m=f.canvasData,y=f.cutWidth,S=f.cutHeight,C=f.source.resolution;this.context.drawImage(f.source.image,m.x,m.y,y,S,l,c,y/C,S/C),d&&this.update()}return this},setPixel:function(u,s,l,c,d,f){f===void 0&&(f=255),u=Math.abs(Math.floor(u)),s=Math.abs(Math.floor(s));var m=this.getIndex(u,s);if(m>-1){var y=this.context.getImageData(u,s,1,1);y.data[0]=l,y.data[1]=c,y.data[2]=d,y.data[3]=f,this.context.putImageData(y,u,s)}return this},putData:function(u,s,l,c,d,f,m){return c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=u.width),m===void 0&&(m=u.height),this.context.putImageData(u,s,l,c,d,f,m),this},getData:function(u,s,l,c){u=g(Math.floor(u),0,this.width-1),s=g(Math.floor(s),0,this.height-1),l=g(l,1,this.width-u),c=g(c,1,this.height-s);var d=this.context.getImageData(u,s,l,c);return d},getPixel:function(u,s,l){l||(l=new o);var c=this.getIndex(u,s);if(c>-1){var d=this.data,f=d[c+0],m=d[c+1],y=d[c+2],S=d[c+3];l.setTo(f,m,y,S)}return l},getPixels:function(u,s,l,c){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=this.width),c===void 0&&(c=l),u=Math.abs(Math.round(u)),s=Math.abs(Math.round(s));for(var d=g(u,0,this.width),f=g(u+l,0,this.width),m=g(s,0,this.height),y=g(s+c,0,this.height),S=new o,C=[],E=m;E<y;E++){for(var P=[],A=d;A<f;A++)S=this.getPixel(A,E,S),P.push({x:A,y:E,color:S.color,alpha:S.alphaGL});C.push(P)}return C},getIndex:function(u,s){return u=Math.abs(Math.round(u)),s=Math.abs(Math.round(s)),u<this.width&&s<this.height?(u+s*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,s,l,c,d){return u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=this.width),c===void 0&&(c=this.height),d===void 0&&(d=!0),this.context.clearRect(u,s,l,c),d&&this.update(),this},setSize:function(u,s){return s===void 0&&(s=u),(u!==this.width||s!==this.height)&&(this.canvas.width=u,this.canvas.height=s,this._source.width=u,this._source.height=s,this._source.isPowerOf2=r(u,s),this.frames.__BASE.setSize(u,s,0,0),this.width=u,this.height=s,this.refresh()),this},destroy:function(){e.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});p.exports=n}),81320:((p,M,t)=>{var h=t(10312),g=t(38058),o=t(27919),a=t(83419),r=t(8054),e=t(4327),n=t(95540),u=t(36060),s=t(32302),l=t(79237),c=t(70554),d=new a({Extends:l,initialize:function(m,y,S,C,E){S===void 0&&(S=256),C===void 0&&(C=256),E===void 0&&(E=!0),this.type="DynamicTexture";var P=m.game.renderer,A=P&&P.type===r.CANVAS,R=A?o.create2D(this,S,C):[this];l.call(this,m,y,R,S,C),this.add("__BASE",0,0,0,S,C),this.renderer=P,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=A?R:null,this.context=A?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new g(0,0,S,C).setScene(m.game.scene.systemScene,!1),this.renderTarget=A?null:new s(P,S,C,1,0,!1,!1,!0,!1),this.pipeline=A?null:P.pipelines.get(u.SINGLE_PIPELINE),this.setSize(S,C,E)},setSize:function(f,m,y){m===void 0&&(m=f),y===void 0&&(y=!0),y&&(f=Math.floor(f),m=Math.floor(m),f%2!==0&&f++,m%2!==0&&m++);var S=this.get(),C=S.source;if(f!==this.width||m!==this.height){this.canvas&&(this.canvas.width=f,this.canvas.height=m);var E=this.renderTarget;E&&(E.willResize(f,m)&&E.resize(f,m),E.texture!==C.glTexture&&this.renderer.deleteTexture(C.glTexture),this.setFromRenderTarget()),this.camera.setSize(f,m),C.width=f,C.height=m,S.setSize(f,m),this.width=f,this.height=m}else{var P=this.getSourceImage();S.cutX+f>P.width&&(f=P.width-S.cutX),S.cutY+m>P.height&&(m=P.height-S.cutY),S.setSize(f,m,S.cutX,S.cutY)}return this},setFromRenderTarget:function(){var f=this.get(),m=f.source,y=this.renderTarget;return m.isRenderTexture=!0,m.isGLTexture=!0,m.glTexture=y.texture,this},setIsSpriteTexture:function(f){return this.isSpriteTexture=f,this},fill:function(f,m,y,S,C,E){var P=this.camera,A=this.renderer;m===void 0&&(m=1),y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.width),E===void 0&&(E=this.height);var R=f>>16&255,G=f>>8&255,b=f&255,L=this.renderTarget;if(P.preRender(),L){L.bind(!0);var w=this.pipeline.manager.set(this.pipeline),B=A.width/L.width,N=A.height/L.height,Y=L.height-(S+E);w.drawFillRect(y*B,Y*N,C*B,E*N,c.getTintFromFloats(b/255,G/255,R/255,1),m),L.unbind(!0)}else{var U=this.context;A.setContext(U),U.globalCompositeOperation="source-over",U.fillStyle="rgba("+R+","+G+","+b+","+m+")",U.fillRect(y,S,C,E),A.setContext()}return this.dirty=!0,this},clear:function(f,m,y,S){if(this.dirty){var C=this.context,E=this.renderTarget;E?E.clear(f,m,y,S):C&&(f!==void 0&&m!==void 0&&y!==void 0&&S!==void 0?C.clearRect(f,m,y,S):(C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,this.width,this.height),C.restore())),this.dirty=!1}return this},stamp:function(f,m,y,S,C){y===void 0&&(y=0),S===void 0&&(S=0);var E=n(C,"alpha",1),P=n(C,"tint",16777215),A=n(C,"angle",0),R=n(C,"rotation",0),G=n(C,"scale",1),b=n(C,"scaleX",G),L=n(C,"scaleY",G),w=n(C,"originX",.5),B=n(C,"originY",.5),N=n(C,"blendMode",0),Y=n(C,"erase",!1),U=n(C,"skipBatch",!1),W=this.manager.resetStamp(E,P);return W.setAngle(0),A!==0?W.setAngle(A):R!==0&&W.setRotation(R),W.setScale(b,L),W.setTexture(f,m),W.setOrigin(w,B),W.setBlendMode(N),Y&&(this._eraseMode=!0),U?this.batchGameObject(W,y,S):this.draw(W,y,S),Y&&(this._eraseMode=!1),this},erase:function(f,m,y){return this._eraseMode=!0,this.draw(f,m,y),this._eraseMode=!1,this},draw:function(f,m,y,S,C){return this.beginDraw(),this.batchDraw(f,m,y,S,C),this.endDraw(),this},drawFrame:function(f,m,y,S,C,E){return this.beginDraw(),this.batchDrawFrame(f,m,y,S,C,E),this.endDraw(),this},repeat:function(f,m,y,S,C,E,P,A,R){if(y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.width),E===void 0&&(E=this.height),P===void 0&&(P=1),A===void 0&&(A=16777215),R===void 0&&(R=!1),f instanceof e?m=f:m=this.manager.getFrame(f,m),!m)return this;var G=this.manager.resetStamp(P,A);G.setFrame(m),G.setOrigin(0);var b=m.width,L=m.height;C=Math.floor(C),E=Math.floor(E);var w=Math.ceil(C/b),B=Math.ceil(E/L),N=w*b-C,Y=B*L-E;N>0&&(N=b-N),Y>0&&(Y=L-Y),y<0&&(w+=Math.ceil(Math.abs(y)/b)),S<0&&(B+=Math.ceil(Math.abs(S)/L));var U=y,W=S,O=!1,V=this.manager.stampCrop.setTo(0,0,b,L);R||this.beginDraw();for(var X=0;X<B;X++){if(W+L<0){W+=L;continue}for(var z=0;z<w;z++){if(O=!1,U+b<0){U+=b;continue}else U<0&&(O=!0,V.width=b+U,V.x=b-V.width);W<0&&(O=!0,V.height=L+W,V.y=L-V.height),N>0&&z===w-1&&(O=!0,V.width=N),Y>0&&X===B-1&&(O=!0,V.height=Y),O&&G.setCrop(V),this.batchGameObject(G,U,W),G.isCropped=!1,V.setTo(0,0,b,L),U+=b}U=y,W+=L}return R||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var f=this.camera,m=this.renderer,y=this.renderTarget;f.preRender(),y?m.beginCapture(y.width,y.height):m.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(f,m,y,S,C){return Array.isArray(f)||(f=[f]),this.batchList(f,m,y,S,C),this},batchDrawFrame:function(f,m,y,S,C,E){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=1),E===void 0&&(E=16777215);var P=this.manager.getFrame(f,m);return P&&(this.renderTarget?this.pipeline.batchTextureFrame(P,y,S,E,C,this.camera.matrix,null):this.batchTextureFrame(P,y,S,C,E)),this},endDraw:function(f){if(f===void 0&&(f=this._eraseMode),this.isDrawing){var m=this.renderer,y=this.renderTarget;if(y){var S=m.endCapture(),C=m.pipelines.setUtility();C.blitFrame(S,y,1,!1,!1,f,this.isSpriteTexture),m.resetScissor(),m.resetViewport()}else m.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(f,m,y,S,C){var E=f.length;if(E!==0)for(var P=0;P<E;P++){var A=f[P];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,m,y):A.isParent||A.list?this.batchGroup(A.getChildren(),m,y):typeof A=="string"?this.batchTextureFrameKey(A,null,m,y,S,C):A instanceof e?this.batchTextureFrame(A,m,y,S,C):Array.isArray(A)&&this.batchList(A,m,y,S,C))}},batchGroup:function(f,m,y){m===void 0&&(m=0),y===void 0&&(y=0);for(var S=0;S<f.length;S++){var C=f[S];C.willRender(this.camera)&&this.batchGameObject(C,C.x+m,C.y+y)}},batchGameObject:function(f,m,y){m===void 0&&(m=f.x),y===void 0&&(y=f.y);var S=f.x,C=f.y,E=this.camera,P=this.renderer,A=this._eraseMode,R=f.mask;if(f.setPosition(m,y),this.canvas){if(A){var G=f.blendMode;f.blendMode=h.ERASE}R&&R.preRenderCanvas(P,f,E),f.renderCanvas(P,f,E,null),R&&R.postRenderCanvas(P,f,E),A&&(f.blendMode=G)}else P&&(R&&R.preRenderWebGL(P,f,E),A||P.setBlendMode(f.blendMode),f.renderWebGL(P,f,E),R&&R.postRenderWebGL(P,E,this.renderTarget));f.setPosition(S,C)},batchTextureFrameKey:function(f,m,y,S,C,E){var P=this.manager.getFrame(f,m);P&&this.batchTextureFrame(P,y,S,C,E)},batchTextureFrame:function(f,m,y,S,C){m===void 0&&(m=0),y===void 0&&(y=0),S===void 0&&(S=1),C===void 0&&(C=16777215);var E=this.camera.matrix,P=this.renderTarget;if(P)this.pipeline.batchTextureFrame(f,m,y,C,S,E,null);else{var A=this.context,R=f.canvasData,G=f.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=S,E.setToContext(A),R.width>0&&R.height>0&&A.drawImage(G,R.x,R.y,R.width,R.height,m,y,R.width,R.height),A.restore()}},snapshotArea:function(f,m,y,S,C,E,P){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!1,f,m,y,S,E,P):this.renderer.snapshotCanvas(this.canvas,C,!1,f,m,y,S,E,P),this},snapshot:function(f,m,y){return this.snapshotArea(0,0,this.width,this.height,f,m,y)},snapshotPixel:function(f,m,y){return this.snapshotArea(f,m,1,1,y,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(f,m,y,S){var C=this.manager.resetStamp();C.setTexture(this),C.setOrigin(0),C.renderWebGL(f,C,y,S)},renderCanvas:function(){},destroy:function(){var f=this.manager.stamp;f&&f.texture===this&&this.manager.resetStamp(),l.prototype.destroy.call(this),o.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});p.exports=d}),4327:((p,M,t)=>{var h=t(83419),g=t(45319),o=t(79291),a=new h({initialize:function(e,n,u,s,l,c,d){this.texture=e,this.name=n,this.source=e.source[u],this.sourceIndex=u,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(c,d,s,l)},setCutPosition:function(r,e){return r===void 0&&(r=0),e===void 0&&(e=0),this.cutX=r,this.cutY=e,this.updateUVs()},setCutSize:function(r,e){return this.cutWidth=r,this.cutHeight=e,this.updateUVs()},setSize:function(r,e,n,u){n===void 0&&(n=0),u===void 0&&(u=0),this.setCutPosition(n,u),this.setCutSize(r,e),this.width=r,this.height=e,this.halfWidth=Math.floor(r*.5),this.halfHeight=Math.floor(e*.5),this.centerX=Math.floor(r/2),this.centerY=Math.floor(e/2);var s=this.data,l=s.cut;l.x=n,l.y=u,l.w=r,l.h=e,l.r=n+r,l.b=u+e,s.sourceSize.w=r,s.sourceSize.h=e,s.spriteSourceSize.w=r,s.spriteSourceSize.h=e,s.radius=.5*Math.sqrt(r*r+e*e);var c=s.drawImage;return c.x=n,c.y=u,c.width=r,c.height=e,this.updateUVs()},setTrim:function(r,e,n,u,s,l){var c=this.data,d=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=r,c.sourceSize.h=e,d.x=n,d.y=u,d.w=s,d.h=l,d.r=n+s,d.b=u+l,this.x=n,this.y=u,this.width=s,this.height=l,this.halfWidth=s*.5,this.halfHeight=l*.5,this.centerX=Math.floor(s/2),this.centerY=Math.floor(l/2),this.updateUVs()},setScale9:function(r,e,n,u){var s=this.data;return s.scale9=!0,s.is3Slice=e===0&&u===this.height,s.scale9Borders.x=r,s.scale9Borders.y=e,s.scale9Borders.w=n,s.scale9Borders.h=u,this},setCropUVs:function(r,e,n,u,s,l,c){var d=this.cutX,f=this.cutY,m=this.cutWidth,y=this.cutHeight,S=this.realWidth,C=this.realHeight;e=g(e,0,S),n=g(n,0,C),u=g(u,0,S-e),s=g(s,0,C-n);var E=d+e,P=f+n,A=u,R=s,G=this.data;if(G.trim){var b=G.spriteSourceSize;u=g(u,0,b.x+m-e),s=g(s,0,b.y+y-n);var L=e+u,w=n+s,B=!(b.r<e||b.b<n||b.x>L||b.y>w);if(B){var N=Math.max(b.x,e),Y=Math.max(b.y,n),U=Math.min(b.r,L)-N,W=Math.min(b.b,w)-Y;A=U,R=W,l?E=d+(m-(N-b.x)-U):E=d+(N-b.x),c?P=f+(y-(Y-b.y)-W):P=f+(Y-b.y),e=N,n=Y,u=U,s=W}else E=0,P=0,A=0,R=0}else l&&(E=d+(m-e-u)),c&&(P=f+(y-n-s));var O=this.source.width,V=this.source.height;return r.u0=Math.max(0,E/O),r.v0=Math.max(0,P/V),r.u1=Math.min(1,(E+A)/O),r.v1=Math.min(1,(P+R)/V),r.x=e,r.y=n,r.cx=E,r.cy=P,r.cw=A,r.ch=R,r.width=u,r.height=s,r.flipX=l,r.flipY=c,r},updateCropUVs:function(r,e,n){return this.setCropUVs(r,r.x,r.y,r.width,r.height,e,n)},setUVs:function(r,e,n,u,s,l){var c=this.data.drawImage;return c.width=r,c.height=e,this.u0=n,this.v0=u,this.u1=s,this.v1=l,this},updateUVs:function(){var r=this.cutX,e=this.cutY,n=this.cutWidth,u=this.cutHeight,s=this.data.drawImage;s.width=n,s.height=u;var l=this.source.width,c=this.source.height;return this.u0=r/l,this.v0=e/c,this.u1=(r+n)/l,this.v1=(e+u)/c,this},updateUVsInverted:function(){var r=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/r,this.v0=this.cutY/e,this.u1=this.cutX/r,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var r=new a(this.texture,this.name,this.sourceIndex);return r.cutX=this.cutX,r.cutY=this.cutY,r.cutWidth=this.cutWidth,r.cutHeight=this.cutHeight,r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r.halfWidth=this.halfWidth,r.halfHeight=this.halfHeight,r.centerX=this.centerX,r.centerY=this.centerY,r.rotated=this.rotated,r.data=o(!0,r.data,this.data),r.updateUVs(),r},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});p.exports=a}),79237:((p,M,t)=>{var h=t(83419),g=t(4327),o=t(11876),a='Texture "%s" has no frame "%s"',r=new h({initialize:function(n,u,s,l,c){Array.isArray(s)||(s=[s]),this.manager=n,this.key=u,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var d=0;d<s.length;d++)this.source.push(new o(this,s[d],l,c))},add:function(e,n,u,s,l,c){if(this.has(e))return null;var d=new g(this,e,n,u,s,l,c);return this.frames[e]=d,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,d},remove:function(e){if(this.has(e)){var n=this.get(e);return n.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames.hasOwnProperty(e)},get:function(e){e||(e=this.firstFrame);var n=this.frames[e];return n||(console.warn(a,this.key,e),n=this.frames[this.firstFrame]),n},getTextureSourceIndex:function(e){for(var n=0;n<this.source.length;n++)if(this.source[n]===e)return n;return-1},getFramesFromTextureSource:function(e,n){n===void 0&&(n=!1);var u=[];for(var s in this.frames)if(!(s==="__BASE"&&!n)){var l=this.frames[s];l.sourceIndex===e&&u.push(l)}return u},getFrameBounds:function(e){e===void 0&&(e=0);for(var n=this.getFramesFromTextureSource(e,!0),u=n[0],s=u.cutX,l=u.cutY,c=u.cutX+u.cutWidth,d=u.cutY+u.cutHeight,f=1;f<n.length;f++){var m=n[f];m.cutX<s&&(s=m.cutX),m.cutY<l&&(l=m.cutY),m.cutX+m.cutWidth>c&&(c=m.cutX+m.cutWidth),m.cutY+m.cutHeight>d&&(d=m.cutY+m.cutHeight)}return{x:s,y:l,width:c-s,height:d-l}},getFrameNames:function(e){e===void 0&&(e=!1);var n=Object.keys(this.frames);if(!e){var u=n.indexOf("__BASE");u!==-1&&n.splice(u,1)}return n},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var n=this.frames[e];return n?n.source.image:(console.warn(a,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var n=this.frames[e],u;return n?u=n.sourceIndex:(console.warn(a,this.key,e),u=this.frames.__BASE.sourceIndex),this.dataSource[u].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var u=this.source[n];this.dataSource.push(new o(this,e[n],u.width,u.height))}},setFilter:function(e){var n;for(n=0;n<this.source.length;n++)this.source[n].setFilter(e);for(n=0;n<this.dataSource.length;n++)this.dataSource[n].setFilter(e)},destroy:function(){var e,n=this.source,u=this.dataSource;for(e=0;e<n.length;e++)n[e]&&n[e].destroy();for(e=0;e<u.length;e++)u[e]&&u[e].destroy();for(var s in this.frames){var l=this.frames[s];l&&l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});p.exports=r}),17130:((p,M,t)=>{var h=t(27919),g=t(57382),o=t(83419),a=t(40987),r=t(8054),e=t(81320),n=t(50792),u=t(69442),s=t(4327),l=t(8443),c=t(99584),d=t(35154),f=t(88571),m=t(41212),y=t(61309),S=t(87841),C=t(79237),E=new o({Extends:n,initialize:function(A){n.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=h.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new S,this.silentWarnings=!1,A.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(u.LOAD,this.updatePending,this),this.on(u.ERROR,this.updatePending,this);var P=this.game.config;P.defaultImage!==null&&this.addBase64("__DEFAULT",P.defaultImage),P.missingImage!==null&&this.addBase64("__MISSING",P.missingImage),P.whiteImage!==null&&this.addBase64("__WHITE",P.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(l.DESTROY,this.destroy,this),this.game.events.once(l.SYSTEM_READY,function(A){this.stamp=new f(A).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(u.LOAD),this.off(u.ERROR),this.emit(u.READY))},checkKey:function(P){return!P||typeof P!="string"||this.exists(P)?(this.silentWarnings||console.error("Texture key already in use: "+P),!1):!0},remove:function(P){if(typeof P=="string")if(this.exists(P))P=this.get(P);else return this.silentWarnings||console.warn("No texture found matching key: "+P),this;var A=P.key;return this.list.hasOwnProperty(A)&&(P.destroy(),this.emit(u.REMOVE,A),this.emit(u.REMOVE_KEY+A)),this},removeKey:function(P){return this.list.hasOwnProperty(P)&&delete this.list[P],this},addBase64:function(P,A){if(this.checkKey(P)){var R=this,G=new Image;G.onerror=function(){R.emit(u.ERROR,P)},G.onload=function(){var b=R.create(P,G);b&&(y.Image(b,0),R.emit(u.ADD,P,b),R.emit(u.ADD_KEY+P,b),R.emit(u.LOAD,P,b))},G.src=A}return this},getBase64:function(P,A,R,G){R===void 0&&(R="image/png"),G===void 0&&(G=.92);var b="",L=this.getFrame(P,A);if(L&&(L.source.isRenderTexture||L.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(L){var w=L.canvasData,B=h.create2D(this,w.width,w.height),N=B.getContext("2d",{willReadFrequently:!0});w.width>0&&w.height>0&&N.drawImage(L.source.image,w.x,w.y,w.width,w.height,0,0,w.width,w.height),b=B.toDataURL(R,G),h.remove(B)}return b},addImage:function(P,A,R){var G=null;return this.checkKey(P)&&(G=this.create(P,A),y.Image(G,0),R&&G.setDataSource(R),this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)),G},addGLTexture:function(P,A){var R=null;if(this.checkKey(P)){var G=A.width,b=A.height;R=this.create(P,A,G,b),R.add("__BASE",0,0,0,G,b),this.emit(u.ADD,P,R),this.emit(u.ADD_KEY+P,R)}return R},addCompressedTexture:function(P,A,R){var G=null;if(this.checkKey(P)){if(G=this.create(P,A),G.add("__BASE",0,0,0,A.width,A.height),R){var b=function(w,B,N){Array.isArray(N.textures)||Array.isArray(N.frames)?y.JSONArray(w,B,N):y.JSONHash(w,B,N)};if(Array.isArray(R))for(var L=0;L<R.length;L++)b(G,L,R[L]);else b(G,0,R)}this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)}return G},addRenderTexture:function(P,A){var R=null;return this.checkKey(P)&&(R=this.create(P,A),R.add("__BASE",0,0,0,A.width,A.height),this.emit(u.ADD,P,R),this.emit(u.ADD_KEY+P,R)),R},generate:function(P,A){if(this.checkKey(P)){var R=h.create(this,1,1);return A.canvas=R,c(A),this.addCanvas(P,R)}else return null},createCanvas:function(P,A,R){if(A===void 0&&(A=256),R===void 0&&(R=256),this.checkKey(P)){var G=h.create(this,A,R,r.CANVAS,!0);return this.addCanvas(P,G)}return null},addCanvas:function(P,A,R){R===void 0&&(R=!1);var G=null;return R?G=new g(this,P,A,A.width,A.height):this.checkKey(P)&&(G=new g(this,P,A,A.width,A.height),this.list[P]=G,this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)),G},addDynamicTexture:function(P,A,R){var G=null;return typeof P=="string"&&!this.exists(P)?G=new e(this,P,A,R):(G=P,P=G.key),this.checkKey(P)?(this.list[P]=G,this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)):G=null,G},addAtlas:function(P,A,R,G){return Array.isArray(R.textures)||Array.isArray(R.frames)?this.addAtlasJSONArray(P,A,R,G):this.addAtlasJSONHash(P,A,R,G)},addAtlasJSONArray:function(P,A,R,G){var b=null;if(A instanceof C?(P=A.key,b=A):this.checkKey(P)&&(b=this.create(P,A)),b){if(Array.isArray(R))for(var L=R.length===1,w=0;w<b.source.length;w++){var B=L?R[0]:R[w];y.JSONArray(b,w,B)}else y.JSONArray(b,0,R);G&&b.setDataSource(G),this.emit(u.ADD,P,b),this.emit(u.ADD_KEY+P,b)}return b},addAtlasJSONHash:function(P,A,R,G){var b=null;if(A instanceof C?(P=A.key,b=A):this.checkKey(P)&&(b=this.create(P,A)),b){if(Array.isArray(R))for(var L=0;L<R.length;L++)y.JSONHash(b,L,R[L]);else y.JSONHash(b,0,R);G&&b.setDataSource(G),this.emit(u.ADD,P,b),this.emit(u.ADD_KEY+P,b)}return b},addAtlasXML:function(P,A,R,G){var b=null;return A instanceof C?(P=A.key,b=A):this.checkKey(P)&&(b=this.create(P,A)),b&&(y.AtlasXML(b,0,R),G&&b.setDataSource(G),this.emit(u.ADD,P,b),this.emit(u.ADD_KEY+P,b)),b},addUnityAtlas:function(P,A,R,G){var b=null;return A instanceof C?(P=A.key,b=A):this.checkKey(P)&&(b=this.create(P,A)),b&&(y.UnityYAML(b,0,R),G&&b.setDataSource(G),this.emit(u.ADD,P,b),this.emit(u.ADD_KEY+P,b)),b},addSpriteSheet:function(P,A,R,G){var b=null;if(A instanceof C?(P=A.key,b=A):this.checkKey(P)&&(b=this.create(P,A)),b){var L=b.source[0].width,w=b.source[0].height;y.SpriteSheet(b,0,0,0,L,w,R),G&&b.setDataSource(G),this.emit(u.ADD,P,b),this.emit(u.ADD_KEY+P,b)}return b},addSpriteSheetFromAtlas:function(P,A){if(!this.checkKey(P))return null;var R=d(A,"atlas",null),G=d(A,"frame",null);if(!(!R||!G)){var b=this.get(R),L=b.get(G);if(L){var w=L.source.image;w||(w=L.source.glTexture);var B=this.create(P,w);return L.trimmed?y.SpriteSheetFromAtlas(B,L,A):y.SpriteSheet(B,0,L.cutX,L.cutY,L.cutWidth,L.cutHeight,A),this.emit(u.ADD,P,B),this.emit(u.ADD_KEY+P,B),B}}},addUint8Array:function(P,A,R,G){if(!this.checkKey(P)||A.length/4!==R*G)return null;var b=this.create(P,A,R,G);return b.add("__BASE",0,0,0,R,G),this.emit(u.ADD,P,b),this.emit(u.ADD_KEY+P,b),b},create:function(P,A,R,G){var b=null;return this.checkKey(P)&&(b=new C(this,P,A,R,G),this.list[P]=b),b},exists:function(P){return this.list.hasOwnProperty(P)},get:function(P){return P===void 0&&(P="__DEFAULT"),this.list[P]?this.list[P]:P instanceof C?P:P instanceof s?P.texture:this.list.__MISSING},cloneFrame:function(P,A){if(this.list[P])return this.list[P].get(A).clone()},getFrame:function(P,A){if(this.list[P])return this.list[P].get(A)},parseFrame:function(P){if(P){if(typeof P=="string")return this.getFrame(P);if(Array.isArray(P)&&P.length===2)return this.getFrame(P[0],P[1]);if(m(P))return this.getFrame(P.key,P.frame);if(P instanceof C)return P.get();if(P instanceof s)return P}else return},getTextureKeys:function(){var P=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&A!=="__NORMAL"&&P.push(A);return P},getPixel:function(P,A,R,G){var b=this.getFrame(R,G);if(b){P-=b.x,A-=b.y;var L=b.data.cut;if(P+=L.x,A+=L.y,P>=L.x&&P<L.r&&A>=L.y&&A<L.b){var w=this._tempContext;w.clearRect(0,0,1,1),w.drawImage(b.source.image,P,A,1,1,0,0,1,1);var B=w.getImageData(0,0,1,1);return new a(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(P,A,R,G){var b=this.getFrame(R,G);if(b){P-=b.x,A-=b.y;var L=b.data.cut;if(P+=L.x,A+=L.y,P>=L.x&&P<L.r&&A>=L.y&&A<L.b){var w=this._tempContext;w.clearRect(0,0,1,1),w.drawImage(b.source.image,P,A,1,1,0,0,1,1);var B=w.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(P,A,R){return this.list[A]&&(P.texture=this.list[A],P.frame=P.texture.get(R)),P},renameTexture:function(P,A){var R=this.get(P);return R&&P!==A?(R.key=A,this.list[A]=R,delete this.list[P],!0):!1},each:function(P,A){for(var R=[null],G=1;G<arguments.length;G++)R.push(arguments[G]);for(var b in this.list)R[0]=this.list[b],P.apply(A,R)},resetStamp:function(P,A){P===void 0&&(P=1),A===void 0&&(A=16777215);var R=this.stamp;return R.setCrop(),R.setPosition(0),R.setAngle(0),R.setScale(1),R.setAlpha(P),R.setTint(A),R.setTexture("__WHITE"),R},destroy:function(){for(var P in this.list)this.list[P].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,h.remove(this._tempCanvas)}});p.exports=E}),11876:((p,M,t)=>{var h=t(27919),g=t(83419),o=t(50030),a=t(29795),r=t(82751),e=new g({initialize:function(u,s,l,c,d){d===void 0&&(d=!1);var f=u.manager.game;this.renderer=f.renderer,this.texture=u,this.source=s,this.image=s.compressed?null:s,this.compressionAlgorithm=s.compressed?s.format:null,this.resolution=1,this.width=l||s.naturalWidth||s.videoWidth||s.width||0,this.height=c||s.naturalHeight||s.videoHeight||s.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=s instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&s instanceof HTMLVideoElement,this.isRenderTexture=s.type==="RenderTexture"||s.type==="DynamicTexture",this.isGLTexture=s instanceof r,this.isPowerOf2=o(this.width,this.height),this.glTexture=null,this.flipY=d,this.init(f)},init:function(n){var u=this.renderer;if(u){var s=this.source;if(u.gl){var l=this.image,c=this.flipY,d=this.width,f=this.height,m=this.scaleMode;this.isCanvas?this.glTexture=u.createCanvasTexture(l,!1,c):this.isVideo?this.glTexture=u.createVideoTexture(l,!1,c):this.isRenderTexture?this.glTexture=u.createTextureFromSource(null,d,f,m):this.isGLTexture?this.glTexture=s:this.compressionAlgorithm?this.glTexture=u.createTextureFromSource(s,void 0,void 0,m):s instanceof Uint8Array?this.glTexture=u.createUint8ArrayTexture(s,d,f,m):this.glTexture=u.createTextureFromSource(l,d,f,m)}else this.isRenderTexture&&(this.image=s.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),n===this.flipY?this:(this.flipY=n,this.update(),this)},update:function(){var n=this.renderer,u=this.image,s=this.flipY,l=n.gl;l&&this.isCanvas?n.updateCanvasTexture(u,this.glTexture,s):l&&this.isVideo&&n.updateVideoTexture(u,this.glTexture,s)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&h.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});p.exports=e}),19673:(p=>{var M={LINEAR:0,NEAREST:1};p.exports=M}),44538:(p=>{p.exports="addtexture"}),63486:(p=>{p.exports="addtexture-"}),94851:(p=>{p.exports="onerror"}),29099:(p=>{p.exports="onload"}),8678:(p=>{p.exports="ready"}),86415:(p=>{p.exports="removetexture"}),30879:(p=>{p.exports="removetexture-"}),69442:((p,M,t)=>{p.exports={ADD:t(44538),ADD_KEY:t(63486),ERROR:t(94851),LOAD:t(29099),READY:t(8678),REMOVE:t(86415),REMOVE_KEY:t(30879)}}),27458:((p,M,t)=>{var h=t(79291),g=t(19673),o={CanvasTexture:t(57382),DynamicTexture:t(81320),Events:t(69442),FilterMode:g,Frame:t(4327),Parsers:t(61309),Texture:t(79237),TextureManager:t(17130),TextureSource:t(11876)};o=h(!1,o,g),p.exports=o}),89905:(p=>{var M=function(t,h,g){if(!g.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=t.source[h];t.add("__BASE",h,0,0,o.width,o.height);for(var a=g.getElementsByTagName("SubTexture"),r,e=0;e<a.length;e++){var n=a[e].attributes,u=n.name.value,s=parseInt(n.x.value,10),l=parseInt(n.y.value,10),c=parseInt(n.width.value,10),d=parseInt(n.height.value,10);if(r=t.add(u,h,s,l,c,d),n.frameX){var f=Math.abs(parseInt(n.frameX.value,10)),m=Math.abs(parseInt(n.frameY.value,10)),y=parseInt(n.frameWidth.value,10),S=parseInt(n.frameHeight.value,10);r.setTrim(c,d,f,m,y,S)}}return t};p.exports=M}),72893:(p=>{var M=function(t,h){var g=t.source[h];return t.add("__BASE",h,0,0,g.width,g.height),t};p.exports=M}),4832:(p=>{var M=function(t,h){var g=t.source[h];return t.add("__BASE",h,0,0,g.width,g.height),t};p.exports=M}),78566:((p,M,t)=>{var h=t(41786),g=function(o,a,r){if(!r.frames&&!r.textures){console.warn("Invalid Texture Atlas JSON Array");return}var e=o.source[a];o.add("__BASE",a,0,0,e.width,e.height);for(var n=Array.isArray(r.textures)?r.textures[a].frames:r.frames,u,s=0;s<n.length;s++){var l=n[s];if(u=o.add(l.filename,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!u){console.warn("Invalid atlas json, frame already exists: "+l.filename);continue}l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var c=l.anchor||l.pivot;c&&(u.customPivot=!0,u.pivotX=c.x,u.pivotY=c.y),l.scale9Borders&&u.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),u.customData=h(l)}for(var d in r)d!=="frames"&&(Array.isArray(r[d])?o.customData[d]=r[d].slice(0):o.customData[d]=r[d]);return o};p.exports=g}),39711:((p,M,t)=>{var h=t(41786),g=function(o,a,r){if(!r.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var e=o.source[a];o.add("__BASE",a,0,0,e.width,e.height);var n=r.frames,u;for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];if(u=o.add(s,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!u){console.warn("Invalid atlas json, frame already exists: "+s);continue}l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var c=l.anchor||l.pivot;c&&(u.customPivot=!0,u.pivotX=c.x,u.pivotY=c.y),l.scale9Borders&&u.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),u.customData=h(l)}for(var d in r)d!=="frames"&&(Array.isArray(r[d])?o.customData[d]=r[d].slice(0):o.customData[d]=r[d]);return o};p.exports=g}),31403:(p=>{var M=function(t){var h=[171,75,84,88,32,49,49,187,13,10,26,10],g,o=new Uint8Array(t,0,12);for(g=0;g<o.length;g++)if(o[g]!==h[g]){console.warn("KTXParser - Invalid file format");return}var a=Uint32Array.BYTES_PER_ELEMENT,r=new DataView(t,12,13*a),e=r.getUint32(0,!0)===67305985,n=r.getUint32(1*a,e);if(n!==0){console.warn("KTXParser - Only compressed formats supported");return}var u=r.getUint32(4*a,e),s=r.getUint32(6*a,e),l=r.getUint32(7*a,e),c=Math.max(1,r.getUint32(11*a,e)),d=r.getUint32(12*a,e),f=new Array(c),m=64+d,y=s,S=l;for(g=0;g<c;g++){var C=new Int32Array(t,m,1)[0];m+=4,f[g]={data:new Uint8Array(t,m,C),width:y,height:S},y=Math.max(1,y>>1),S=Math.max(1,S>>1),m+=C}return{mipmaps:f,width:s,height:l,internalFormat:u,compressed:!0,generateMipmap:!1}};p.exports=M}),82038:(p=>{function M(A,R,G,b,L,w,B){return B===void 0&&(B=16),Math.floor((A+G)/L)*Math.floor((R+b)/w)*B}function t(A,R){return A=Math.max(A,16),R=Math.max(R,8),A*R/4}function h(A,R){return A=Math.max(A,8),R=Math.max(R,8),A*R/2}function g(A,R){return Math.ceil(A/4)*Math.ceil(R/4)*16}function o(A,R){return M(A,R,3,3,4,4,8)}function a(A,R){return M(A,R,3,3,4,4)}function r(A,R){return M(A,R,4,3,5,4)}function e(A,R){return M(A,R,4,4,5,5)}function n(A,R){return M(A,R,5,4,6,5)}function u(A,R){return M(A,R,5,5,6,6)}function s(A,R){return M(A,R,7,4,8,5)}function l(A,R){return M(A,R,7,5,8,6)}function c(A,R){return M(A,R,7,7,8,8)}function d(A,R){return M(A,R,9,4,10,5)}function f(A,R){return M(A,R,9,5,10,6)}function m(A,R){return M(A,R,9,7,10,8)}function y(A,R){return M(A,R,9,9,10,10)}function S(A,R){return M(A,R,11,9,12,10)}function C(A,R){return M(A,R,11,11,12,12)}var E={0:{sizeFunc:t,glFormat:[35841]},1:{sizeFunc:t,glFormat:[35843]},2:{sizeFunc:h,glFormat:[35840]},3:{sizeFunc:h,glFormat:[35842]},6:{sizeFunc:o,glFormat:[36196]},7:{sizeFunc:o,glFormat:[33776,35916]},8:{sizeFunc:a,glFormat:[33777,35917]},9:{sizeFunc:a,glFormat:[33778,35918]},11:{sizeFunc:a,glFormat:[33779,35919]},14:{sizeFunc:g,glFormat:[36494,36495]},15:{sizeFunc:g,glFormat:[36492,36493]},22:{sizeFunc:o,glFormat:[37492,37493]},23:{sizeFunc:a,glFormat:[37496,37497]},24:{sizeFunc:o,glFormat:[37494,37495]},25:{sizeFunc:o,glFormat:[37488]},26:{sizeFunc:a,glFormat:[37490]},27:{sizeFunc:a,glFormat:[37808,37840]},28:{sizeFunc:r,glFormat:[37809,37841]},29:{sizeFunc:e,glFormat:[37810,37842]},30:{sizeFunc:n,glFormat:[37811,37843]},31:{sizeFunc:u,glFormat:[37812,37844]},32:{sizeFunc:s,glFormat:[37813,37845]},33:{sizeFunc:l,glFormat:[37814,37846]},34:{sizeFunc:c,glFormat:[37815,37847]},35:{sizeFunc:d,glFormat:[37816,37848]},36:{sizeFunc:f,glFormat:[37817,37849]},37:{sizeFunc:m,glFormat:[37818,37850]},38:{sizeFunc:y,glFormat:[37819,37851]},39:{sizeFunc:S,glFormat:[37820,37852]},40:{sizeFunc:C,glFormat:[37821,37853]}},P=function(A){for(var R=new Uint32Array(A,0,13),G=R[0],b=G===55727696,L=b?R[2]:R[3],w=R[4],B=E[L].glFormat[w],N=E[L].sizeFunc,Y=R[11],U=R[7],W=R[6],O=52+R[12],V=new Uint8Array(A,O),X=new Array(Y),z=0,I=U,Z=W,J=0;J<Y;J++){var k=N(I,Z);X[J]={data:new Uint8Array(V.buffer,V.byteOffset+z,k),width:I,height:Z},I=Math.max(1,I>>1),Z=Math.max(1,Z>>1),z+=k}return{mipmaps:X,width:U,height:W,internalFormat:B,compressed:!0,generateMipmap:!1}};p.exports=P}),75549:((p,M,t)=>{var h=t(95540),g=function(o,a,r,e,n,u,s){var l=h(s,"frameWidth",null),c=h(s,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var d=o.source[a];o.add("__BASE",a,0,0,d.width,d.height);var f=h(s,"startFrame",0),m=h(s,"endFrame",-1),y=h(s,"margin",0),S=h(s,"spacing",0),C=Math.floor((n-y+S)/(l+S)),E=Math.floor((u-y+S)/(c+S)),P=C*E;P===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",o.key),(f>P||f<-P)&&(f=0),f<0&&(f=P+f),(m===-1||m>P||m<f)&&(m=P);for(var A=y,R=y,G=0,b=0,L=0,w=0;w<P;w++){G=0,b=0;var B=A+l,N=R+c;B>n&&(G=B-n),N>u&&(b=N-u),w>=f&&w<=m&&(o.add(L,a,r+A,e+R,l-G,c-b),L++),A+=l+S,A+l>n&&(A=y,R+=c+S)}return o};p.exports=g}),47534:((p,M,t)=>{var h=t(95540),g=function(o,a,r){var e=h(r,"frameWidth",null),n=h(r,"frameHeight",e);if(!e)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=o.source[0];o.add("__BASE",0,0,0,u.width,u.height),h(r,"startFrame",0),h(r,"endFrame",-1);for(var s=h(r,"margin",0),l=h(r,"spacing",0),c=a.cutX,d=a.cutY,f=a.cutWidth,m=a.cutHeight,y=a.realWidth,S=a.realHeight,C=Math.floor((y-s+l)/(e+l)),E=Math.floor((S-s+l)/(n+l)),P=a.x,A=e-P,R=e-(y-f-P),G=a.y,b=n-G,L=n-(S-m-G),w,B=s,N=s,Y=0,U=0,W=0;W<E;W++){for(var O=W===0,V=W===E-1,X=0;X<C;X++){var z=X===0,I=X===C-1;if(w=o.add(Y,U,c+B,d+N,e,n),z||O||I||V){var Z=z?P:0,J=O?G:0,k=0,j=0;z&&(k+=e-A),I&&(k+=e-R),O&&(j+=n-b),V&&(j+=n-L);var tt=e-k,ht=n-j;w.cutWidth=tt,w.cutHeight=ht,w.setTrim(e,n,Z,J,tt,ht)}B+=l,z?B+=A:I?B+=R:B+=e,Y++}B=s,N+=l,O?N+=b:V?N+=L:N+=n}return o};p.exports=g}),86147:(p=>{var M=0,t=function(g,o,a,r){var e=M-r.y-r.height;g.add(a,o,r.x,e,r.width,r.height)},h=function(g,o,a){var r=g.source[o];g.add("__BASE",o,0,0,r.width,r.height),M=r.height;for(var e=a.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",s="",l={x:0,y:0,width:0,height:0},c=0;c<e.length;c++){var d=e[c].match(n);if(d){var f=d[1]==="- ",m=d[2],y=d[3];if(f&&(s!==u&&(t(g,o,s,l),u=s),l={x:0,y:0,width:0,height:0}),m==="name"){s=y;continue}switch(m){case"x":case"y":case"width":case"height":l[m]=parseInt(y,10);break}}}return s!==u&&t(g,o,s,l),g};p.exports=h}),55222:((p,M,t)=>{var h=t(50030),g=function(u){for(var s=u.mipmaps,l=1;l<s.length;l++){var c=s[l].width,d=s[l].height;if(!h(c,d))return console.warn("Mip level "+l+" is not a power-of-two size: "+c+"x"+d),!1}var f=n[u.internalFormat];return f?f(u):(console.warn("No format checker found for internal format "+u.internalFormat+". Assuming valid."),!0)};function o(u){for(var s=u.mipmaps,l=0;l<s.length;l++){var c=s[l].width,d=s[l].height;if((c<<l)%4!==0||(d<<l)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+l+" is "+c+"x"+d),!1}return!0}function a(){return!0}function r(u){var s=u.mipmaps,l=s[0];return h(l.width,l.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+l.width+"x"+l.height),!1)}function e(u){var s=u.mipmaps,l=s[0];return l.width%4!==0||l.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+l.width+"x"+l.height+" pixels"),!1):!0}var n={37488:a,37489:a,37490:a,37491:a,37492:a,37493:a,37494:a,37495:a,37496:a,37497:a,36196:a,37808:a,37809:a,37810:a,37811:a,37812:a,37813:a,37814:a,37815:a,37816:a,37817:a,37818:a,37819:a,37820:a,37821:a,37840:a,37841:a,37842:a,37843:a,37844:a,37845:a,37846:a,37847:a,37848:a,37849:a,37850:a,37851:a,37852:a,37853:a,36492:o,36493:o,36494:o,36495:o,36283:o,36284:o,36285:o,36286:o,35840:r,35841:r,35842:r,35843:r,33776:o,33777:o,33778:o,33779:o,35916:e,35917:e,35918:e,35919:e};p.exports=g}),61309:((p,M,t)=>{p.exports={AtlasXML:t(89905),Canvas:t(72893),Image:t(4832),JSONArray:t(78566),JSONHash:t(39711),KTXParser:t(31403),PVRParser:t(82038),SpriteSheet:t(75549),SpriteSheetFromAtlas:t(47534),UnityYAML:t(86147)}}),80341:(p=>{p.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,n,u,s,l){(e===void 0||e<=0)&&(e=32),(n===void 0||n<=0)&&(n=32),u===void 0&&(u=0),s===void 0&&(s=0),this.name=a,this.firstgid=r|0,this.imageWidth=e|0,this.imageHeight=n|0,this.imageMargin=u|0,this.imageSpacing=s|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},addImage:function(o,a,r,e){return this.images.push({gid:o,image:a,width:r,height:e}),this.total++,this}});p.exports=g}),27462:((p,M,t)=>{var h=t(83419),g=new h({initialize:function(a){if(this.gids=[],a!==void 0)for(var r=0;r<a.length;++r)for(var e=a[r],n=0;n<e.total;++n)this.gids[e.firstgid+n]=e;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(o){this.gids=o?this._gids:void 0}},getTypeIncludingTile:function(o){if(o.type!==void 0&&o.type!=="")return o.type;if(!(!this.gids||o.gid===void 0)){var a=this.gids[o.gid];if(a){var r=a.getTileData(o.gid);if(r)return r.type}}},setTextureAndFrame:function(o,a,r,e){if(a===null&&this.gids&&e.gid!==void 0){var n=this.gids[e.gid];n&&(a===null&&n.image!==void 0&&(a=n.image.key),r===null&&(r=e.gid-n.firstgid),o.scene.textures.getFrame(a,r)||(a=null,r=null))}o.setTexture(a,r)},setPropertiesFromTiledObject:function(o,a){if(this.gids!==void 0&&a.gid!==void 0){var r=this.gids[a.gid];r!==void 0&&this.setFromJSON(o,r.getTileProperties(a.gid))}this.setFromJSON(o,a.properties)},setFromJSON:function(o,a){if(a){if(Array.isArray(a)){for(var r=0;r<a.length;r++){var e=a[r];o[e.name]!==void 0?o[e.name]=e.value:o.setData(e.name,e.value)}return}for(var n in a)o[n]!==void 0?o[n]=a[n]:o.setData(n,a[n])}}});p.exports=g}),31989:((p,M,t)=>{var h=t(80341),g=t(87010),o=t(46177),a=t(49075),r=function(e,n,u,s,l,c,d,f){u===void 0&&(u=32),s===void 0&&(s=32),l===void 0&&(l=10),c===void 0&&(c=10),f===void 0&&(f=!1);var m=null;if(Array.isArray(d)){var y=n!==void 0?n:"map";m=o(y,h.ARRAY_2D,d,u,s,f)}else if(n!==void 0){var S=e.cache.tilemap.get(n);S?m=o(n,S.format,S.data,u,s,f):console.warn("No map data found for key "+n)}return m===null&&(m=new g({tileWidth:u,tileHeight:s,width:l,height:c})),new a(e,m)};p.exports=r}),23029:((p,M,t)=>{var h=t(83419),g=t(31401),o=t(91907),a=t(62644),r=t(93232),e=new h({Mixins:[g.AlphaSingle,g.Flip,g.Visible],initialize:function(u,s,l,c,d,f,m,y){this.layer=u,this.index=s,this.x=l,this.y=c,this.width=d,this.height=f,this.right,this.bottom,this.baseWidth=m!==void 0?m:d,this.baseHeight=y!==void 0?y:f,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(n,u){return!(n<this.pixelX||u<this.pixelY||n>this.right||u>this.bottom)},copy:function(n){return this.index=n.index,this.alpha=n.alpha,this.properties=a(n.properties),this.visible=n.visible,this.setFlip(n.flipX,n.flipY),this.tint=n.tint,this.rotation=n.rotation,this.collideUp=n.collideUp,this.collideDown=n.collideDown,this.collideLeft=n.collideLeft,this.collideRight=n.collideRight,this.collisionCallback=n.collisionCallback,this.collisionCallbackContext=n.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(n){var u=this.tilemapLayer;if(u){var s=u.tileToWorldXY(this.x,this.y,void 0,n);return s.x}return this.x*this.baseWidth},getRight:function(n){var u=this.tilemapLayer;return u?this.getLeft(n)+this.width*u.scaleX:this.getLeft(n)+this.width},getTop:function(n){var u=this.tilemapLayer;if(u){var s=u.tileToWorldXY(this.x,this.y,void 0,n);return s.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(n){var u=this.tilemapLayer;return u?this.getTop(n)+this.height*u.scaleY:this.getTop(n)+this.height},getBounds:function(n,u){return u===void 0&&(u=new r),u.x=this.getLeft(n),u.y=this.getTop(n),u.width=this.getRight(n)-u.x,u.height=this.getBottom(n)-u.y,u},getCenterX:function(n){return(this.getLeft(n)+this.getRight(n))/2},getCenterY:function(n){return(this.getTop(n)+this.getBottom(n))/2},intersects:function(n,u,s,l){return!(s<=this.pixelX||l<=this.pixelY||n>=this.right||u>=this.bottom)},isInteresting:function(n,u){return n&&u?this.canCollide||this.hasInterestingFace:n?this.collides:u?this.hasInterestingFace:!1},resetCollision:function(n){if(n===void 0&&(n=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,n){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(n,u,s,l,c){if(u===void 0&&(u=n),s===void 0&&(s=n),l===void 0&&(l=n),c===void 0&&(c=!0),this.collideLeft=n,this.collideRight=u,this.collideUp=s,this.collideDown=l,this.faceLeft=n,this.faceRight=u,this.faceTop=s,this.faceBottom=l,c){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(n,u){return n===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=n,this.collisionCallbackContext=u),this},setSize:function(n,u,s,l){return n!==void 0&&(this.width=n),u!==void 0&&(this.height=u),s!==void 0&&(this.baseWidth=s),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var n=this.layer.orientation;if(n===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(n===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(n===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(n===o.HEXAGONAL){var u=this.layer.staggerAxis,s=this.layer.staggerIndex,l=this.layer.hexSideLength,c,d;u==="y"?(d=(this.baseHeight-l)/2+l,s==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*d):u==="x"&&(c=(this.baseWidth-l)/2+l,this.pixelX=this.x*c,s==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var n=this.layer.tilemapLayer;if(n){var u=n.gidMap[this.index];if(u)return u}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var n=this.tilemapLayer;return n?n.tilemap:null}}});p.exports=e}),49075:((p,M,t)=>{var h=t(84101),g=t(83419),o=t(39506),a=t(80341),r=t(95540),e=t(14977),n=t(27462),u=t(91907),s=t(36305),l=t(19133),c=t(68287),d=t(23029),f=t(81086),m=t(20442),y=t(33629),S=new g({initialize:function(E,P){this.scene=E,this.tileWidth=P.tileWidth,this.tileHeight=P.tileHeight,this.width=P.width,this.height=P.height,this.orientation=P.orientation,this.renderOrder=P.renderOrder,this.format=P.format,this.version=P.version,this.properties=P.properties,this.widthInPixels=P.widthInPixels,this.heightInPixels=P.heightInPixels,this.imageCollections=P.imageCollections,this.images=P.images,this.layers=P.layers,this.tiles=P.tiles,this.tilesets=P.tilesets,this.objects=P.objects,this.currentLayerIndex=0,this.hexSideLength=P.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(A),WorldToTileX:f.GetWorldToTileXFunction(A),WorldToTileY:f.GetWorldToTileYFunction(A),TileToWorldXY:f.GetTileToWorldXYFunction(A),TileToWorldX:f.GetTileToWorldXFunction(A),TileToWorldY:f.GetTileToWorldYFunction(A),GetTileCorners:f.GetTileCornersFunction(A)}},setRenderOrder:function(C){var E=["right-down","left-down","right-up","left-up"];return typeof C=="number"&&(C=E[C]),E.indexOf(C)>-1&&(this.renderOrder=C),this},addTilesetImage:function(C,E,P,A,R,G,b,L){if(C===void 0)return null;E==null&&(E=C);var w=this.scene.sys.textures;if(!w.exists(E))return console.warn('Texture key "%s" not found',E),null;var B=w.get(E),N=this.getTilesetIndex(C);if(N===null&&this.format===a.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',C,this.tilesets),null;var Y=this.tilesets[N];return Y?((P||A)&&Y.setTileSize(P,A),(R||G)&&Y.setSpacing(R,G),Y.setImage(B),Y):(P===void 0&&(P=this.tileWidth),A===void 0&&(A=this.tileHeight),R===void 0&&(R=0),G===void 0&&(G=0),b===void 0&&(b=0),L===void 0&&(L={x:0,y:0}),Y=new y(C,b,P,A,R,G,void 0,void 0,L),Y.setImage(B),this.tilesets.push(Y),this.tiles=h(this),Y)},copy:function(C,E,P,A,R,G,b,L){return L=this.getLayer(L),L!==null?(f.Copy(C,E,P,A,R,G,b,L),this):null},createBlankLayer:function(C,E,P,A,R,G,b,L){P===void 0&&(P=0),A===void 0&&(A=0),R===void 0&&(R=this.width),G===void 0&&(G=this.height),b===void 0&&(b=this.tileWidth),L===void 0&&(L=this.tileHeight);var w=this.getLayerIndex(C);if(w!==null)return console.warn("Invalid Tilemap Layer ID: "+C),null;for(var B=new e({name:C,tileWidth:b,tileHeight:L,width:R,height:G,orientation:this.orientation,hexSideLength:this.hexSideLength}),N,Y=0;Y<G;Y++){N=[];for(var U=0;U<R;U++)N.push(new d(B,-1,U,Y,b,L,this.tileWidth,this.tileHeight));B.data.push(N)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var W=new m(this.scene,this,this.currentLayerIndex,E,P,A);return W.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(W),W},createLayer:function(C,E,P,A){var R=this.getLayerIndex(C);if(R===null)return console.warn("Invalid Tilemap Layer ID: "+C),typeof C=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var G=this.layers[R];if(G.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+C),null;this.currentLayerIndex=R,P===void 0&&(P=G.x),A===void 0&&(A=G.y);var b=new m(this.scene,this,R,E,P,A);return b.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(b),b},createFromObjects:function(C,E,P){P===void 0&&(P=!0);var A=[],R=this.getObjectLayer(C);if(!R)return console.warn("createFromObjects: Invalid objectLayerName given: "+C),A;var G=new n(P?this.tilesets:void 0);Array.isArray(E)||(E=[E]);for(var b=R.objects,L=0;L<E.length;L++){var w=E[L],B=r(w,"id",null),N=r(w,"gid",null),Y=r(w,"name",null),U=r(w,"type",null);G.enabled=!r(w,"ignoreTileset",null);for(var W,O=[],V=0;V<b.length;V++)W=b[V],(B===null&&N===null&&Y===null&&U===null||B!==null&&W.id===B||N!==null&&W.gid===N||Y!==null&&W.name===Y||U!==null&&G.getTypeIncludingTile(W)===U)&&O.push(W);for(var X=r(w,"classType",c),z=r(w,"scene",this.scene),I=r(w,"container",null),Z=r(w,"key",null),J=r(w,"frame",null),k=0;k<O.length;k++){W=O[k];var j=new X(z);if(j.setName(W.name),j.setPosition(W.x,W.y),G.setTextureAndFrame(j,Z,J,W),W.width&&(j.displayWidth=W.width),W.height&&(j.displayHeight=W.height),this.orientation===u.ISOMETRIC){var tt=this.tileWidth/this.tileHeight,ht={x:j.x-j.y,y:(j.x+j.y)/tt};j.x=ht.x,j.y=ht.y}var ot={x:j.originX*W.width,y:(j.originY-(W.gid?1:0))*W.height};if(W.rotation){var st=o(W.rotation);s(ot,st),j.rotation=st}j.x+=ot.x,j.y+=ot.y,(W.flippedHorizontal!==void 0||W.flippedVertical!==void 0)&&j.setFlip(W.flippedHorizontal,W.flippedVertical),W.visible||(j.visible=!1),G.setPropertiesFromTiledObject(j,W),I?I.add(j):z.add.existing(j),A.push(j)}}return A},createFromTiles:function(C,E,P,A,R,G){return G=this.getLayer(G),G===null?null:f.CreateFromTiles(C,E,P,A,R,G)},fill:function(C,E,P,A,R,G,b){return G===void 0&&(G=!0),b=this.getLayer(b),b===null?null:(f.Fill(C,E,P,A,R,G,b),this)},filterObjects:function(C,E,P){if(typeof C=="string"){var A=C;if(C=this.getObjectLayer(C),!C)return console.warn("No object layer found with the name: "+A),null}return C.objects.filter(E,P)},filterTiles:function(C,E,P,A,R,G,b,L){return L=this.getLayer(L),L===null?null:f.FilterTiles(C,E,P,A,R,G,b,L)},findByIndex:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.FindByIndex(C,E,P,A)},findObject:function(C,E,P){if(typeof C=="string"){var A=C;if(C=this.getObjectLayer(C),!C)return console.warn("No object layer found with the name: "+A),null}return C.objects.find(E,P)||null},findTile:function(C,E,P,A,R,G,b,L){return L=this.getLayer(L),L===null?null:f.FindTile(C,E,P,A,R,G,b,L)},forEachTile:function(C,E,P,A,R,G,b,L){return L=this.getLayer(L),L===null?null:(f.ForEachTile(C,E,P,A,R,G,b,L),this)},getImageIndex:function(C){return this.getIndex(this.images,C)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(C){return C.name})},getIndex:function(C,E){for(var P=0;P<C.length;P++)if(C[P].name===E)return P;return null},getLayer:function(C){var E=this.getLayerIndex(C);return E!==null?this.layers[E]:null},getObjectLayer:function(C){var E=this.getIndex(this.objects,C);return E!==null?this.objects[E]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(C){return C.name})},getLayerIndex:function(C){return C===void 0?this.currentLayerIndex:typeof C=="string"?this.getLayerIndexByName(C):typeof C=="number"&&C<this.layers.length?C:C instanceof m&&C.tilemap===this?C.layerIndex:null},getLayerIndexByName:function(C){return this.getIndex(this.layers,C)},getTileAt:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.GetTileAt(C,E,P,A)},getTileAtWorldXY:function(C,E,P,A,R){return R=this.getLayer(R),R===null?null:f.GetTileAtWorldXY(C,E,P,A,R)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(C){return C.name})},getTilesWithin:function(C,E,P,A,R,G){return G=this.getLayer(G),G===null?null:f.GetTilesWithin(C,E,P,A,R,G)},getTilesWithinShape:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.GetTilesWithinShape(C,E,P,A)},getTilesWithinWorldXY:function(C,E,P,A,R,G,b){return b=this.getLayer(b),b===null?null:f.GetTilesWithinWorldXY(C,E,P,A,R,G,b)},getTileset:function(C){var E=this.getIndex(this.tilesets,C);return E!==null?this.tilesets[E]:null},getTilesetIndex:function(C){return this.getIndex(this.tilesets,C)},hasTileAt:function(C,E,P){return P=this.getLayer(P),P===null?null:f.HasTileAt(C,E,P)},hasTileAtWorldXY:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.HasTileAtWorldXY(C,E,P,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(C){this.setLayer(C)}},putTileAt:function(C,E,P,A,R){return A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:f.PutTileAt(C,E,P,A,R)},putTileAtWorldXY:function(C,E,P,A,R,G){return A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:f.PutTileAtWorldXY(C,E,P,A,R,G)},putTilesAt:function(C,E,P,A,R){return A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(f.PutTilesAt(C,E,P,A,R),this)},randomize:function(C,E,P,A,R,G){return G=this.getLayer(G),G===null?null:(f.Randomize(C,E,P,A,R,G),this)},calculateFacesAt:function(C,E,P){return P=this.getLayer(P),P===null?null:(f.CalculateFacesAt(C,E,P),this)},calculateFacesWithin:function(C,E,P,A,R){return R=this.getLayer(R),R===null?null:(f.CalculateFacesWithin(C,E,P,A,R),this)},removeLayer:function(C){var E=this.getLayerIndex(C);if(E!==null){l(this.layers,E);for(var P=E;P<this.layers.length;P++)this.layers[P].tilemapLayer&&this.layers[P].tilemapLayer.layerIndex--;return this.currentLayerIndex===E&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(C){var E=this.getLayerIndex(C);return E!==null?(C=this.layers[E],C.tilemapLayer.destroy(),l(this.layers,E),this.currentLayerIndex===E&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var C=this.layers,E=0;E<C.length;E++)C[E].tilemapLayer&&C[E].tilemapLayer.destroy(!1);return C.length=0,this.currentLayerIndex=0,this},removeTile:function(C,E,P){E===void 0&&(E=-1),P===void 0&&(P=!0);var A=[];Array.isArray(C)||(C=[C]);for(var R=0;R<C.length;R++){var G=C[R];A.push(this.removeTileAt(G.x,G.y,!0,P,G.tilemapLayer)),E>-1&&this.putTileAt(E,G.x,G.y,P,G.tilemapLayer)}return A},removeTileAt:function(C,E,P,A,R){return P===void 0&&(P=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:f.RemoveTileAt(C,E,P,A,R)},removeTileAtWorldXY:function(C,E,P,A,R,G){return P===void 0&&(P=!0),A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:f.RemoveTileAtWorldXY(C,E,P,A,R,G)},renderDebug:function(C,E,P){return P=this.getLayer(P),P===null?null:(this.orientation===u.ORTHOGONAL&&f.RenderDebug(C,E,P),this)},renderDebugFull:function(C,E){for(var P=this.layers,A=0;A<P.length;A++)f.RenderDebug(C,E,P[A]);return this},replaceByIndex:function(C,E,P,A,R,G,b){return b=this.getLayer(b),b===null?null:(f.ReplaceByIndex(C,E,P,A,R,G,b),this)},setCollision:function(C,E,P,A,R){return E===void 0&&(E=!0),P===void 0&&(P=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(f.SetCollision(C,E,P,A,R),this)},setCollisionBetween:function(C,E,P,A,R){return P===void 0&&(P=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(f.SetCollisionBetween(C,E,P,A,R),this)},setCollisionByProperty:function(C,E,P,A){return E===void 0&&(E=!0),P===void 0&&(P=!0),A=this.getLayer(A),A===null?null:(f.SetCollisionByProperty(C,E,P,A),this)},setCollisionByExclusion:function(C,E,P,A){return E===void 0&&(E=!0),P===void 0&&(P=!0),A=this.getLayer(A),A===null?null:(f.SetCollisionByExclusion(C,E,P,A),this)},setCollisionFromCollisionGroup:function(C,E,P){return C===void 0&&(C=!0),E===void 0&&(E=!0),P=this.getLayer(P),P===null?null:(f.SetCollisionFromCollisionGroup(C,E,P),this)},setTileIndexCallback:function(C,E,P,A){return A=this.getLayer(A),A===null?null:(f.SetTileIndexCallback(C,E,P,A),this)},setTileLocationCallback:function(C,E,P,A,R,G,b){return b=this.getLayer(b),b===null?null:(f.SetTileLocationCallback(C,E,P,A,R,G,b),this)},setLayer:function(C){var E=this.getLayerIndex(C);return E!==null&&(this.currentLayerIndex=E),this},setBaseTileSize:function(C,E){this.tileWidth=C,this.tileHeight=E,this.widthInPixels=this.width*C,this.heightInPixels=this.height*E;for(var P=0;P<this.layers.length;P++){this.layers[P].baseTileWidth=C,this.layers[P].baseTileHeight=E;for(var A=this.layers[P].data,R=this.layers[P].width,G=this.layers[P].height,b=0;b<G;b++)for(var L=0;L<R;L++){var w=A[b][L];w!==null&&w.setSize(void 0,void 0,C,E)}}return this},setLayerTileSize:function(C,E,P){if(P=this.getLayer(P),P===null)return this;P.tileWidth=C,P.tileHeight=E;for(var A=P.data,R=P.width,G=P.height,b=0;b<G;b++)for(var L=0;L<R;L++){var w=A[b][L];w!==null&&w.setSize(C,E)}return this},shuffle:function(C,E,P,A,R){return R=this.getLayer(R),R===null?null:(f.Shuffle(C,E,P,A,R),this)},swapByIndex:function(C,E,P,A,R,G,b){return b=this.getLayer(b),b===null?null:(f.SwapByIndex(C,E,P,A,R,G,b),this)},tileToWorldX:function(C,E,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldX(C,E,P)},tileToWorldY:function(C,E,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldY(C,E,P)},tileToWorldXY:function(C,E,P,A,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldXY(C,E,P,A,R)},getTileCorners:function(C,E,P,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(C,E,P,A)},weightedRandomize:function(C,E,P,A,R,G){return G=this.getLayer(G),G===null?null:(f.WeightedRandomize(E,P,A,R,C,G),this)},worldToTileX:function(C,E,P,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(C,E,P,A)},worldToTileY:function(C,E,P,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(C,E,P,A)},worldToTileXY:function(C,E,P,A,R,G){return G=this.getLayer(G),G===null?null:this._convert.WorldToTileXY(C,E,P,A,R,G)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});p.exports=S}),45939:((p,M,t)=>{var h=t(44603),g=t(31989);h.register("tilemap",function(o){var a=o!==void 0?o:{};return g(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})}),46029:((p,M,t)=>{var h=t(39429),g=t(31989);h.register("tilemap",function(o,a,r,e,n,u,s){return o===null&&(o=void 0),a===null&&(a=void 0),r===null&&(r=void 0),e===null&&(e=void 0),n===null&&(n=void 0),g(this.scene,o,a,r,e,n,u,s)})}),20442:((p,M,t)=>{var h=t(83419),g=t(78389),o=t(31401),a=t(95643),r=t(81086),e=t(19218),n=t(26099),u=new h({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,g,e],initialize:function(l,c,d,f,m,y){a.call(this,l,"TilemapLayer"),this.isTilemap=!0,this.tilemap=c,this.layerIndex=d,this.layer=c.layers[d],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=r.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new n,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(f),this.setAlpha(this.layer.alpha),this.setPosition(m,y),this.setOrigin(0,0),this.setSize(c.tileWidth*this.layer.width,c.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(s){var l=[],c=[],d=this.tilemap;Array.isArray(s)||(s=[s]);for(var f=0;f<s.length;f++){var m=s[f];if(typeof m=="string"&&(m=d.getTileset(m)),m){c.push(m);for(var y=m.firstgid,S=0;S<m.total;S++)l[y+S]=m}}this.gidMap=l,this.tileset=c},setRenderOrder:function(s){var l=["right-down","left-down","right-up","left-up"];return typeof s=="string"&&(s=l.indexOf(s)),s>=0&&s<4&&(this._renderOrder=s),this},calculateFacesAt:function(s,l){return r.CalculateFacesAt(s,l,this.layer),this},calculateFacesWithin:function(s,l,c,d){return r.CalculateFacesWithin(s,l,c,d,this.layer),this},createFromTiles:function(s,l,c,d,f){return r.CreateFromTiles(s,l,c,d,f,this.layer)},cull:function(s){return this.cullCallback(this.layer,s,this.culledTiles,this._renderOrder)},copy:function(s,l,c,d,f,m,y){return r.Copy(s,l,c,d,f,m,y,this.layer),this},fill:function(s,l,c,d,f,m){return r.Fill(s,l,c,d,f,m,this.layer),this},filterTiles:function(s,l,c,d,f,m,y){return r.FilterTiles(s,l,c,d,f,m,y,this.layer)},findByIndex:function(s,l,c){return r.FindByIndex(s,l,c,this.layer)},findTile:function(s,l,c,d,f,m,y){return r.FindTile(s,l,c,d,f,m,y,this.layer)},forEachTile:function(s,l,c,d,f,m,y){return r.ForEachTile(s,l,c,d,f,m,y,this.layer),this},setTint:function(s,l,c,d,f,m){s===void 0&&(s=16777215);var y=function(S){S.tint=s,S.tintFill=!1};return this.forEachTile(y,this,l,c,d,f,m)},setTintFill:function(s,l,c,d,f,m){s===void 0&&(s=16777215);var y=function(S){S.tint=s,S.tintFill=!0};return this.forEachTile(y,this,l,c,d,f,m)},getTileAt:function(s,l,c){return r.GetTileAt(s,l,c,this.layer)},getTileAtWorldXY:function(s,l,c,d){return r.GetTileAtWorldXY(s,l,c,d,this.layer)},getIsoTileAtWorldXY:function(s,l,c,d,f){c===void 0&&(c=!0);var m=this.tempVec;return r.IsometricWorldToTileXY(s,l,!0,m,f,this.layer,c),this.getTileAt(m.x,m.y,d)},getTilesWithin:function(s,l,c,d,f){return r.GetTilesWithin(s,l,c,d,f,this.layer)},getTilesWithinShape:function(s,l,c){return r.GetTilesWithinShape(s,l,c,this.layer)},getTilesWithinWorldXY:function(s,l,c,d,f,m){return r.GetTilesWithinWorldXY(s,l,c,d,f,m,this.layer)},hasTileAt:function(s,l){return r.HasTileAt(s,l,this.layer)},hasTileAtWorldXY:function(s,l,c){return r.HasTileAtWorldXY(s,l,c,this.layer)},putTileAt:function(s,l,c,d){return r.PutTileAt(s,l,c,d,this.layer)},putTileAtWorldXY:function(s,l,c,d,f){return r.PutTileAtWorldXY(s,l,c,d,f,this.layer)},putTilesAt:function(s,l,c,d){return r.PutTilesAt(s,l,c,d,this.layer),this},randomize:function(s,l,c,d,f){return r.Randomize(s,l,c,d,f,this.layer),this},removeTileAt:function(s,l,c,d){return r.RemoveTileAt(s,l,c,d,this.layer)},removeTileAtWorldXY:function(s,l,c,d,f){return r.RemoveTileAtWorldXY(s,l,c,d,f,this.layer)},renderDebug:function(s,l){return r.RenderDebug(s,l,this.layer),this},replaceByIndex:function(s,l,c,d,f,m){return r.ReplaceByIndex(s,l,c,d,f,m,this.layer),this},setSkipCull:function(s){return s===void 0&&(s=!0),this.skipCull=s,this},setCullPadding:function(s,l){return s===void 0&&(s=1),l===void 0&&(l=1),this.cullPaddingX=s,this.cullPaddingY=l,this},setCollision:function(s,l,c,d){return r.SetCollision(s,l,c,this.layer,d),this},setCollisionBetween:function(s,l,c,d){return r.SetCollisionBetween(s,l,c,d,this.layer),this},setCollisionByProperty:function(s,l,c){return r.SetCollisionByProperty(s,l,c,this.layer),this},setCollisionByExclusion:function(s,l,c){return r.SetCollisionByExclusion(s,l,c,this.layer),this},setCollisionFromCollisionGroup:function(s,l){return r.SetCollisionFromCollisionGroup(s,l,this.layer),this},setTileIndexCallback:function(s,l,c){return r.SetTileIndexCallback(s,l,c,this.layer),this},setTileLocationCallback:function(s,l,c,d,f,m){return r.SetTileLocationCallback(s,l,c,d,f,m,this.layer),this},shuffle:function(s,l,c,d){return r.Shuffle(s,l,c,d,this.layer),this},swapByIndex:function(s,l,c,d,f,m){return r.SwapByIndex(s,l,c,d,f,m,this.layer),this},tileToWorldX:function(s,l){return this.tilemap.tileToWorldX(s,l,this)},tileToWorldY:function(s,l){return this.tilemap.tileToWorldY(s,l,this)},tileToWorldXY:function(s,l,c,d){return this.tilemap.tileToWorldXY(s,l,c,d,this)},getTileCorners:function(s,l,c){return this.tilemap.getTileCorners(s,l,c,this)},weightedRandomize:function(s,l,c,d,f){return r.WeightedRandomize(l,c,d,f,s,this.layer),this},worldToTileX:function(s,l,c){return this.tilemap.worldToTileX(s,l,c,this)},worldToTileY:function(s,l,c){return this.tilemap.worldToTileY(s,l,c,this)},worldToTileXY:function(s,l,c,d,f){return this.tilemap.worldToTileXY(s,l,c,d,f,this)},destroy:function(s){s===void 0&&(s=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),s&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))}});p.exports=u}),16153:((p,M,t)=>{var h=t(61340),g=new h,o=new h,a=new h,r=function(e,n,u,s){var l=n.cull(u),c=l.length,d=u.alpha*n.alpha;if(!(c===0||d<=0)){var f=g,m=o,y=a;m.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),f.copyFrom(u.matrix);var S=e.currentContext,C=n.gidMap;S.save(),s?(f.multiplyWithOffset(s,-u.scrollX*n.scrollFactorX,-u.scrollY*n.scrollFactorY),m.e=n.x,m.f=n.y,f.multiply(m,y),y.copyToContext(S)):(m.e-=u.scrollX*n.scrollFactorX,m.f-=u.scrollY*n.scrollFactorY,m.copyToContext(S)),(!e.antialias||n.scaleX>1||n.scaleY>1)&&(S.imageSmoothingEnabled=!1);for(var E=0;E<c;E++){var P=l[E],A=C[P.index];if(A){var R=A.image.getSourceImage(),G=A.getTileTextureCoordinates(P.index),b=A.tileWidth,L=A.tileHeight;if(!(G===null||b===0||L===0)){var w=b*.5,B=L*.5;G.x+=A.tileOffset.x,G.y+=A.tileOffset.y,S.save(),S.translate(P.pixelX+w,P.pixelY+B),P.rotation!==0&&S.rotate(P.rotation),(P.flipX||P.flipY)&&S.scale(P.flipX?-1:1,P.flipY?-1:1),S.globalAlpha=d*P.alpha,S.drawImage(R,G.x,G.y,b,L,-w,-B,b,L),S.restore()}}}S.restore()}};p.exports=r}),19218:((p,M,t)=>{var h=t(29747),g=h,o=h;g=t(99558),o=t(16153),p.exports={renderWebGL:g,renderCanvas:o}}),99558:((p,M,t)=>{var h=t(70554),g=function(o,a,r){var e=a.cull(r),n=e.length,u=r.alpha*a.alpha;if(!(n===0||u<=0)){var s=a.gidMap,l=o.pipelines.set(a.pipeline,a),c=h.getTintAppendFloatAlpha,d=a.scrollFactorX,f=a.scrollFactorY,m=a.x,y=a.y,S=a.scaleX,C=a.scaleY;o.pipelines.preBatch(a);for(var E=0;E<n;E++){var P=e[E],A=s[P.index];if(A){var R=A.getTileTextureCoordinates(P.index),G=A.tileWidth,b=A.tileHeight;if(!(!R||G===0||b===0)){var L=G*.5,w=b*.5,B=A.glTexture,N=l.setTexture2D(B,a),Y=G,U=b,W=R.x,O=R.y,V=A.tileOffset.x,X=A.tileOffset.y,z=c(P.tint,u*P.alpha);l.batchTexture(a,B,B.width,B.height,m+P.pixelX*S+(L*S-V),y+P.pixelY*C+(w*C-X),G,b,S,C,P.rotation,P.flipX,P.flipY,d,f,L,w,W,O,Y,U,z,z,z,z,P.tintFill,0,0,r,null,!0,N,!0)}}}o.pipelines.postBatch(a)}};p.exports=g}),33629:((p,M,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(r,e,n,u,s,l,c,d,f){(n===void 0||n<=0)&&(n=32),(u===void 0||u<=0)&&(u=32),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c={}),d===void 0&&(d={}),this.name=r,this.firstgid=e,this.tileWidth=n,this.tileHeight=u,this.tileMargin=s,this.tileSpacing=l,this.tileProperties=c,this.tileData=d,this.tileOffset=new g,f!==void 0&&this.tileOffset.set(f.x,f.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(a){return this.containsTileIndex(a)?this.tileProperties[a-this.firstgid]:null},getTileData:function(a){return this.containsTileIndex(a)?this.tileData[a-this.firstgid]:null},getTileCollisionGroup:function(a){var r=this.getTileData(a);return r&&r.objectgroup?r.objectgroup:null},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},getTileTextureCoordinates:function(a){return this.containsTileIndex(a)?this.texCoordinates[a-this.firstgid]:null},setImage:function(a){this.image=a;var r=a.get(),e=a.getFrameBounds();return this.glTexture=r.source.glTexture,r.width>e.width||r.height>e.height?this.updateTileData(r.width,r.height):this.updateTileData(e.width,e.height,e.x,e.y),this},setTileSize:function(a,r){return a!==void 0&&(this.tileWidth=a),r!==void 0&&(this.tileHeight=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(a,r){return a!==void 0&&(this.tileMargin=a),r!==void 0&&(this.tileSpacing=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(a,r,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var u=(r-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(a-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(u%1!==0||s%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),u=Math.floor(u),s=Math.floor(s),this.rows=u,this.columns=s,this.total=u*s,this.texCoordinates.length=0;for(var l=this.tileMargin+e,c=this.tileMargin+n,d=0;d<this.rows;d++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:l,y:c}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin+e,c+=this.tileHeight+this.tileSpacing}return this}});p.exports=o}),72023:((p,M,t)=>{var h=t(7423),g=function(o,a,r){var e=h(o,a,!0,r),n=h(o,a-1,!0,r),u=h(o,a+1,!0,r),s=h(o-1,a,!0,r),l=h(o+1,a,!0,r),c=e&&e.collides;return c&&(e.faceTop=!0,e.faceBottom=!0,e.faceLeft=!0,e.faceRight=!0),n&&n.collides&&(c&&(e.faceTop=!1),n.faceBottom=!c),u&&u.collides&&(c&&(e.faceBottom=!1),u.faceTop=!c),s&&s.collides&&(c&&(e.faceLeft=!1),s.faceRight=!c),l&&l.collides&&(c&&(e.faceRight=!1),l.faceLeft=!c),e&&!e.collides&&e.resetFaces(),e};p.exports=g}),42573:((p,M,t)=>{var h=t(7423),g=t(7386),o=function(a,r,e,n,u){for(var s=null,l=null,c=null,d=null,f=g(a,r,e,n,null,u),m=0;m<f.length;m++){var y=f[m];y&&(y.collides?(s=h(y.x,y.y-1,!0,u),l=h(y.x,y.y+1,!0,u),c=h(y.x-1,y.y,!0,u),d=h(y.x+1,y.y,!0,u),y.faceTop=!(s&&s.collides),y.faceBottom=!(l&&l.collides),y.faceLeft=!(c&&c.collides),y.faceRight=!(d&&d.collides)):y.resetFaces())}};p.exports=o}),33528:((p,M,t)=>{var h=t(26099),g=new h,o=function(a,r,e,n){var u=e.tilemapLayer,s=u.cullPaddingX,l=u.cullPaddingY,c=u.tilemap.tileToWorldXY(a,r,g,n,u);return c.x>n.worldView.x+u.scaleX*e.tileWidth*(-s-.5)&&c.x<n.worldView.right+u.scaleX*e.tileWidth*(s-.5)&&c.y>n.worldView.y+u.scaleY*e.tileHeight*(-l-1)&&c.y<n.worldView.bottom+u.scaleY*e.tileHeight*(l-.5)};p.exports=o}),1785:((p,M,t)=>{var h=t(42573),g=t(7386),o=t(62991),a=t(23029),r=function(e,n,u,s,l,c,d,f){d===void 0&&(d=!0);var m=g(e,n,u,s,null,f),y=[];m.forEach(function(G){var b=new a(G.layer,G.index,G.x,G.y,G.width,G.height,G.baseWidth,G.baseHeight);b.copy(G),y.push(b)});for(var S=l-e,C=c-n,E=0;E<y.length;E++){var P=y[E],A=P.x+S,R=P.y+C;o(A,R,f)&&f.data[R][A]&&(P.x=A,P.y=R,P.updatePixelXY(),f.data[R][A]=P)}d&&h(l-1,c-1,u+2,s+2,f),m.length=0,y.length=0};p.exports=r}),78419:((p,M,t)=>{var h=t(62644),g=t(7386),o=t(27987),a=function(r,e,n,u,s,l){n||(n={}),Array.isArray(r)||(r=[r]);var c=l.tilemapLayer;u||(u=c.scene),s||(s=u.cameras.main);var d=l.width,f=l.height,m=g(0,0,d,f,null,l),y=[],S,C=function(R,G,b){for(var L=0;L<b.length;L++){var w=b[L];R.hasOwnProperty(w)||(R[w]=G[w])}};for(S=0;S<m.length;S++){var E=m[S],P=h(n);if(r.indexOf(E.index)!==-1){var A=c.tileToWorldXY(E.x,E.y,void 0,s,l);P.x=A.x,P.y=A.y,C(P,E,["rotation","flipX","flipY","alpha","visible","tint"]),P.hasOwnProperty("origin")||(P.x+=E.width*.5,P.y+=E.height*.5),P.hasOwnProperty("useSpriteSheet")&&(P.key=E.tileset.image,P.frame=E.index-E.tileset.firstgid),y.push(u.make.sprite(P))}}if(Array.isArray(e))for(S=0;S<r.length;S++)o(r[S],e[S],0,0,d,f,l);else if(e!==null)for(S=0;S<r.length;S++)o(r[S],e,0,0,d,f,l);return y};p.exports=a}),19545:((p,M,t)=>{var h=t(87841),g=t(63448),o=t(56583),a=new h,r=function(e,n){var u=e.tilemapLayer.tilemap,s=e.tilemapLayer,l=Math.floor(u.tileWidth*s.scaleX),c=Math.floor(u.tileHeight*s.scaleY),d=o(n.worldView.x-s.x,l,0,!0)-s.cullPaddingX,f=g(n.worldView.right-s.x,l,0,!0)+s.cullPaddingX,m=o(n.worldView.y-s.y,c,0,!0)-s.cullPaddingY,y=g(n.worldView.bottom-s.y,c,0,!0)+s.cullPaddingY;return a.setTo(d,m,f-d,y-m)};p.exports=r}),30003:((p,M,t)=>{var h=t(19545),g=t(32483),o=function(a,r,e,n){e===void 0&&(e=[]),n===void 0&&(n=0),e.length=0;var u=a.tilemapLayer,s=h(a,r);return(u.skipCull||u.scrollFactorX!==1||u.scrollFactorY!==1)&&(s.left=0,s.right=a.width,s.top=0,s.bottom=a.height),g(a,s,n,e),e};p.exports=o}),35137:((p,M,t)=>{var h=t(7386),g=t(42573),o=t(20576),a=function(r,e,n,u,s,l,c){for(var d=c.collideIndexes.indexOf(r)!==-1,f=h(e,n,u,s,null,c),m=0;m<f.length;m++)f[m].index=r,o(f[m],d);l&&g(e-1,n-1,u+2,s+2,c)};p.exports=a}),40253:((p,M,t)=>{var h=t(7386),g=function(o,a,r,e,n,u,s,l){var c=h(r,e,n,u,s,l);return c.filter(o,a)};p.exports=g}),52692:(p=>{var M=function(t,h,g,o){h===void 0&&(h=0),g===void 0&&(g=!1);var a=0,r,e,n;if(g){for(e=o.height-1;e>=0;e--)for(r=o.width-1;r>=0;r--)if(n=o.data[e][r],n&&n.index===t){if(a===h)return n;a+=1}}else for(e=0;e<o.height;e++)for(r=0;r<o.width;r++)if(n=o.data[e][r],n&&n.index===t){if(a===h)return n;a+=1}return null};p.exports=M}),66151:((p,M,t)=>{var h=t(7386),g=function(o,a,r,e,n,u,s,l){var c=h(r,e,n,u,s,l);return c.find(o,a)||null};p.exports=g}),97560:((p,M,t)=>{var h=t(7386),g=function(o,a,r,e,n,u,s,l){var c=h(r,e,n,u,s,l);c.forEach(o,a)};p.exports=g}),43305:((p,M,t)=>{var h=t(91907),g=t(30003),o=t(9474),a=t(14018),r=t(29747),e=t(54503),n=function(u){return u===h.ORTHOGONAL?g:u===h.HEXAGONAL?o:u===h.STAGGERED?e:u===h.ISOMETRIC?a:r};p.exports=n}),7423:((p,M,t)=>{var h=t(62991),g=function(o,a,r,e){if(h(o,a,e)){var n=e.data[a][o]||null;return n?n.index===-1?r?n:null:n:null}else return null};p.exports=g}),60540:((p,M,t)=>{var h=t(7423),g=t(26099),o=new g,a=function(r,e,n,u,s){return s.tilemapLayer.worldToTileXY(r,e,!0,o,u),h(o.x,o.y,n,s)};p.exports=a}),55826:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e){var n=e.baseTileWidth,u=e.baseTileHeight,s=e.tilemapLayer,l=0,c=0;s&&(r||(r=s.scene.cameras.main),l=s.x+r.scrollX*(1-s.scrollFactorX),c=s.y+r.scrollY*(1-s.scrollFactorY),n*=s.scaleX,u*=s.scaleY);var d=l+o*n,f=c+a*u;return[new h(d,f),new h(d+n,f),new h(d+n,f+u),new h(d,f+u)]};p.exports=g}),11758:((p,M,t)=>{var h=t(91907),g=t(27229),o=t(29747),a=t(55826),r=function(e){return e===h.ORTHOGONAL?a:e===h.ISOMETRIC?o:e===h.HEXAGONAL?g:(e===h.STAGGERED,o)};p.exports=r}),39167:((p,M,t)=>{var h=t(91907),g=t(29747),o=t(97281),a=function(r){return r===h.ORTHOGONAL?o:g};p.exports=a}),62e3:((p,M,t)=>{var h=t(91907),g=t(19951),o=t(14127),a=t(29747),r=t(97202),e=t(70326),n=function(u){return u===h.ORTHOGONAL?e:u===h.ISOMETRIC?o:u===h.HEXAGONAL?g:u===h.STAGGERED?r:a};p.exports=n}),5984:((p,M,t)=>{var h=t(91907),g=t(29747),o=t(28054),a=t(29650),r=function(e){return e===h.ORTHOGONAL?a:e===h.STAGGERED?o:g};p.exports=r}),7386:((p,M,t)=>{var h=t(95540),g=function(o,a,r,e,n,u){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=u.width),e===void 0&&(e=u.height),n||(n={});var s=h(n,"isNotEmpty",!1),l=h(n,"isColliding",!1),c=h(n,"hasInterestingFace",!1);o<0&&(r+=o,o=0),a<0&&(e+=a,a=0),o+r>u.width&&(r=Math.max(u.width-o,0)),a+e>u.height&&(e=Math.max(u.height-a,0));for(var d=[],f=a;f<a+e;f++)for(var m=o;m<o+r;m++){var y=u.data[f][m];if(y!==null){if(s&&y.index===-1||l&&!y.collides||c&&!y.hasInterestingFace)continue;d.push(y)}}return d};p.exports=g}),91141:((p,M,t)=>{var h=t(55738),g=t(7386),o=t(91865),a=t(29747),r=t(26099),e=t(91907),n=function(d,f){return o.RectangleToTriangle(f,d)},u=new r,s=new r,l=new r,c=function(d,f,m,y){if(y.orientation!==e.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(d===void 0)return[];var S=a;d instanceof h.Circle?S=o.CircleToRectangle:d instanceof h.Rectangle?S=o.RectangleToRectangle:d instanceof h.Triangle?S=n:d instanceof h.Line&&(S=o.LineToRectangle),y.tilemapLayer.worldToTileXY(d.left,d.top,!0,s,m);var C=s.x,E=s.y;y.tilemapLayer.worldToTileXY(d.right,d.bottom,!1,l,m);var P=Math.ceil(l.x),A=Math.ceil(l.y),R=Math.max(P-C,1),G=Math.max(A-E,1),b=g(C,E,R,G,f,y),L=y.tileWidth,w=y.tileHeight;y.tilemapLayer&&(L*=y.tilemapLayer.scaleX,w*=y.tilemapLayer.scaleY);for(var B=[],N=new h.Rectangle(0,0,L,w),Y=0;Y<b.length;Y++){var U=b[Y];y.tilemapLayer.tileToWorldXY(U.x,U.y,u,m),N.x=u.x,N.y=u.y,S(d,N)&&B.push(U)}return B};p.exports=c}),96523:((p,M,t)=>{var h=t(7386),g=t(26099),o=new g,a=new g,r=function(e,n,u,s,l,c,d){var f=d.tilemapLayer.tilemap._convert.WorldToTileXY;f(e,n,!0,o,c,d);var m=o.x,y=o.y;f(e+u,n+s,!1,a,c,d);var S=Math.ceil(a.x),C=Math.ceil(a.y);return h(m,y,S-m,C-y,l,d)};p.exports=r}),96113:((p,M,t)=>{var h=t(91907),g=t(20242),o=t(10095),a=function(r){return r===h.ORTHOGONAL?o:g};p.exports=a}),16926:((p,M,t)=>{var h=t(91907),g=t(86625),o=t(96897),a=t(29747),r=t(15108),e=t(85896),n=function(u){return u===h.ORTHOGONAL?e:u===h.ISOMETRIC?o:u===h.HEXAGONAL?g:u===h.STAGGERED?r:a};p.exports=n}),55762:((p,M,t)=>{var h=t(91907),g=t(20242),o=t(51900),a=t(63288),r=function(e){return e===h.ORTHOGONAL?a:e===h.STAGGERED?o:g};p.exports=r}),45091:((p,M,t)=>{var h=t(62991),g=function(o,a,r){if(h(o,a,r)){var e=r.data[a][o];return e!==null&&e.index>-1}else return!1};p.exports=g}),24152:((p,M,t)=>{var h=t(45091),g=t(26099),o=new g,a=function(r,e,n,u){u.tilemapLayer.worldToTileXY(r,e,!0,o,n);var s=o.x,l=o.y;return h(s,l,u)};p.exports=a}),90454:((p,M,t)=>{var h=t(63448),g=t(56583),o=function(a,r){var e=a.tilemapLayer.tilemap,n=a.tilemapLayer,u=Math.floor(e.tileWidth*n.scaleX),s=Math.floor(e.tileHeight*n.scaleY),l=a.hexSideLength,c,d,f,m;if(a.staggerAxis==="y"){var y=(s-l)/2+l;c=g(r.worldView.x-n.x,u,0,!0)-n.cullPaddingX,d=h(r.worldView.right-n.x,u,0,!0)+n.cullPaddingX,f=g(r.worldView.y-n.y,y,0,!0)-n.cullPaddingY,m=h(r.worldView.bottom-n.y,y,0,!0)+n.cullPaddingY}else{var S=(u-l)/2+l;c=g(r.worldView.x-n.x,S,0,!0)-n.cullPaddingX,d=h(r.worldView.right-n.x,S,0,!0)+n.cullPaddingX,f=g(r.worldView.y-n.y,s,0,!0)-n.cullPaddingY,m=h(r.worldView.bottom-n.y,s,0,!0)+n.cullPaddingY}return{left:c,right:d,top:f,bottom:m}};p.exports=o}),9474:((p,M,t)=>{var h=t(90454),g=t(32483),o=function(a,r,e,n){e===void 0&&(e=[]),n===void 0&&(n=0),e.length=0;var u=a.tilemapLayer,s=h(a,r);return u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1&&(s.left=0,s.right=a.width,s.top=0,s.bottom=a.height),g(a,s,n,e),e};p.exports=o}),27229:((p,M,t)=>{var h=t(19951),g=t(26099),o=new g,a=function(r,e,n,u){var s=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(s*=c.scaleX,l*=c.scaleY);var d=h(r,e,o,n,u),f=[],m=.5773502691896257,y,S;u.staggerAxis==="y"?(y=m*s,S=l/2):(y=s/2,S=m*l);for(var C=0;C<6;C++){var E=2*Math.PI*(.5-C)/6;f.push(new g(d.x+y*Math.cos(E),d.y+S*Math.sin(E)))}return f};p.exports=a}),19951:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n){r||(r=new h);var u=n.baseTileWidth,s=n.baseTileHeight,l=n.tilemapLayer,c=0,d=0;l&&(e||(e=l.scene.cameras.main),c=l.x+e.scrollX*(1-l.scrollFactorX),d=l.y+e.scrollY*(1-l.scrollFactorY),u*=l.scaleX,s*=l.scaleY);var f=u/2,m=s/2,y,S,C=n.staggerAxis,E=n.staggerIndex;return C==="y"?(y=c+u*o+u,S=d+1.5*a*m+m,a%2===0&&(E==="odd"?y-=f:y+=f)):C==="x"&&E==="odd"&&(y=c+1.5*o*f+f,S=d+s*o+s,o%2===0&&(E==="odd"?S-=m:S+=m)),r.set(y,S)};p.exports=g}),86625:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n,u){e||(e=new h);var s=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(n||(n=c.scene.cameras.main),o=o-(c.x+n.scrollX*(1-c.scrollFactorX)),a=a-(c.y+n.scrollY*(1-c.scrollFactorY)),s*=c.scaleX,l*=c.scaleY);var d=.5773502691896257,f=-.3333333333333333,m=0,y=.6666666666666666,S=s/2,C=l/2,E,P,A,R,G;u.staggerAxis==="y"?(E=(o-S)/(d*s),P=(a-C)/C,A=d*E+f*P,R=m*E+y*P):(E=(o-S)/S,P=(a-C)/(d*l),A=f*E+d*P,R=y*E+m*P),G=-A-R;var b=Math.round(A),L=Math.round(R),w=Math.round(G),B=Math.abs(b-A),N=Math.abs(L-R),Y=Math.abs(w-G);B>N&&B>Y?b=-L-w:N>Y&&(L=-b-w);var U,W=L;return u.staggerIndex==="odd"?U=W%2===0?L/2+b:L/2+b-.5:U=W%2===0?L/2+b:L/2+b+.5,e.set(U,W)};p.exports=g}),62991:(p=>{var M=function(t,h,g){return t>=0&&t<g.width&&h>=0&&h<g.height};p.exports=M}),14018:((p,M,t)=>{var h=t(33528),g=function(o,a,r,e){r===void 0&&(r=[]),e===void 0&&(e=0),r.length=0;var n=o.tilemapLayer,u=o.data,s=o.width,l=o.height,c=n.skipCull,d=0,f=s,m=0,y=l,S,C,E;if(e===0)for(C=m;C<y;C++)for(S=d;S<f;S++)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));else if(e===1)for(C=m;C<y;C++)for(S=f;S>=d;S--)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));else if(e===2)for(C=y;C>=m;C--)for(S=d;S<f;S++)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));else if(e===3)for(C=y;C>=m;C--)for(S=f;S>=d;S--)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));return n.tilesDrawn=r.length,n.tilesTotal=s*l,r};p.exports=g}),14127:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n){r||(r=new h);var u=n.baseTileWidth,s=n.baseTileHeight,l=n.tilemapLayer,c=0,d=0;l&&(e||(e=l.scene.cameras.main),c=l.x+e.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+e.scrollY*(1-l.scrollFactorY),s*=l.scaleY);var f=c+(o-a)*(u/2),m=d+(o+a)*(s/2);return r.set(f,m)};p.exports=g}),96897:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n,u,s){e||(e=new h);var l=u.baseTileWidth,c=u.baseTileHeight,d=u.tilemapLayer;d&&(n||(n=d.scene.cameras.main),a=a-(d.y+n.scrollY*(1-d.scrollFactorY)),c*=d.scaleY,o=o-(d.x+n.scrollX*(1-d.scrollFactorX)),l*=d.scaleX);var f=l/2,m=c/2;o=o-f,s||(a=a-c);var y=.5*(o/f+a/m),S=.5*(-o/f+a/m);return r&&(y=Math.floor(y),S=Math.floor(S)),e.set(y,S)};p.exports=g}),71558:((p,M,t)=>{var h=t(23029),g=t(62991),o=t(72023),a=t(20576),r=function(e,n,u,s,l){if(s===void 0&&(s=!0),!g(n,u,l))return null;var c,d=l.data[u][n],f=d&&d.collides;e instanceof h?(l.data[u][n]===null&&(l.data[u][n]=new h(l,e.index,n,u,l.tileWidth,l.tileHeight)),l.data[u][n].copy(e)):(c=e,l.data[u][n]===null?l.data[u][n]=new h(l,c,n,u,l.tileWidth,l.tileHeight):l.data[u][n].index=c);var m=l.data[u][n],y=l.collideIndexes.indexOf(m.index)!==-1;if(c=e instanceof h?e.index:e,c===-1)m.width=l.tileWidth,m.height=l.tileHeight;else{var S=l.tilemapLayer.tilemap,C=S.tiles,E=C[c][2],P=S.tilesets[E];m.width=P.tileWidth,m.height=P.tileHeight}return a(m,y),s&&f!==m.collides&&o(n,u,l),m};p.exports=r}),26303:((p,M,t)=>{var h=t(71558),g=t(26099),o=new g,a=function(r,e,n,u,s,l){return l.tilemapLayer.worldToTileXY(e,n,!0,o,s,l),h(r,o.x,o.y,u,l)};p.exports=a}),14051:((p,M,t)=>{var h=t(42573),g=t(71558),o=function(a,r,e,n,u){if(n===void 0&&(n=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var s=a.length,l=a[0].length,c=0;c<s;c++)for(var d=0;d<l;d++){var f=a[c][d];g(f,r+d,e+c,!1,u)}n&&h(r-1,e-1,l+2,s+2,u)};p.exports=o}),77389:((p,M,t)=>{var h=t(7386),g=t(26546),o=function(a,r,e,n,u,s){var l,c=h(a,r,e,n,{},s);if(!u)for(u=[],l=0;l<c.length;l++)u.indexOf(c[l].index)===-1&&u.push(c[l].index);for(l=0;l<c.length;l++)c[l].index=g(u)};p.exports=o}),63557:((p,M,t)=>{var h=t(23029),g=t(62991),o=t(72023),a=function(r,e,n,u,s){if(n===void 0&&(n=!0),u===void 0&&(u=!0),!g(r,e,s))return null;var l=s.data[e][r];if(l)s.data[e][r]=n?null:new h(s,-1,r,e,s.tileWidth,s.tileHeight);else return null;return u&&l&&l.collides&&o(r,e,s),l};p.exports=a}),94178:((p,M,t)=>{var h=t(63557),g=t(26099),o=new g,a=function(r,e,n,u,s,l){return l.tilemapLayer.worldToTileXY(r,e,!0,o,s,l),h(o.x,o.y,n,u,l)};p.exports=a}),15533:((p,M,t)=>{var h=t(7386),g=t(3956),o=new g(105,210,231,150),a=new g(243,134,48,200),r=new g(40,39,37,150),e=function(n,u,s){u===void 0&&(u={});var l=u.tileColor!==void 0?u.tileColor:o,c=u.collidingTileColor!==void 0?u.collidingTileColor:a,d=u.faceColor!==void 0?u.faceColor:r,f=h(0,0,s.width,s.height,null,s);n.translateCanvas(s.tilemapLayer.x,s.tilemapLayer.y),n.scaleCanvas(s.tilemapLayer.scaleX,s.tilemapLayer.scaleY);for(var m=0;m<f.length;m++){var y=f[m],S=y.tileset?y.tileset.tileOffset:{x:0,y:0},C=y.width,E=y.height,P=y.pixelX-S.x,A=y.pixelY-S.y,R=y.collides?c:l;R!==null&&(n.fillStyle(R.color,R.alpha/255),n.fillRect(P,A,C,E)),P+=1,A+=1,C-=2,E-=2,d!==null&&(n.lineStyle(1,d.color,d.alpha/255),y.faceTop&&n.lineBetween(P,A,P+C,A),y.faceRight&&n.lineBetween(P+C,A,P+C,A+E),y.faceBottom&&n.lineBetween(P,A+E,P+C,A+E),y.faceLeft&&n.lineBetween(P,A,P,A+E))}};p.exports=e}),27987:((p,M,t)=>{var h=t(7386),g=function(o,a,r,e,n,u,s){for(var l=h(r,e,n,u,null,s),c=0;c<l.length;c++)l[c]&&l[c].index===o&&(l[c].index=a)};p.exports=g}),32483:(p=>{var M=function(t,h,g,o){var a=t.data,r=t.width,e=t.height,n=t.tilemapLayer,u=Math.max(0,h.left),s=Math.min(r,h.right),l=Math.max(0,h.top),c=Math.min(e,h.bottom),d,f,m;if(g===0)for(f=l;f<c;f++)for(d=u;a[f]&&d<s;d++)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(g===1)for(f=l;f<c;f++)for(d=s;a[f]&&d>=u;d--)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(g===2)for(f=c;f>=l;f--)for(d=u;a[f]&&d<s;d++)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(g===3)for(f=c;f>=l;f--)for(d=s;a[f]&&d>=u;d--)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);return n.tilesDrawn=o.length,n.tilesTotal=r*e,o};p.exports=M}),57068:((p,M,t)=>{var h=t(20576),g=t(42573),o=t(9589),a=function(r,e,n,u,s){e===void 0&&(e=!0),n===void 0&&(n=!0),s===void 0&&(s=!0),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++)o(r[l],e,u);if(s)for(var c=0;c<u.height;c++)for(var d=0;d<u.width;d++){var f=u.data[c][d];f&&r.indexOf(f.index)!==-1&&h(f,e)}n&&g(0,0,u.width,u.height,u)};p.exports=a}),37266:((p,M,t)=>{var h=t(20576),g=t(42573),o=t(9589),a=function(r,e,n,u,s,l){if(n===void 0&&(n=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),!(r>e)){for(var c=r;c<=e;c++)o(c,n,s);if(l)for(var d=0;d<s.height;d++)for(var f=0;f<s.width;f++){var m=s.data[d][f];m&&m.index>=r&&m.index<=e&&h(m,n)}u&&g(0,0,s.width,s.height,s)}};p.exports=a}),75661:((p,M,t)=>{var h=t(20576),g=t(42573),o=t(9589),a=function(r,e,n,u){e===void 0&&(e=!0),n===void 0&&(n=!0),Array.isArray(r)||(r=[r]);for(var s=0;s<u.height;s++)for(var l=0;l<u.width;l++){var c=u.data[s][l];c&&r.indexOf(c.index)===-1&&(h(c,e),o(c.index,e,u))}n&&g(0,0,u.width,u.height,u)};p.exports=a}),64740:((p,M,t)=>{var h=t(20576),g=t(42573),o=t(97022),a=function(r,e,n,u){e===void 0&&(e=!0),n===void 0&&(n=!0);for(var s=0;s<u.height;s++)for(var l=0;l<u.width;l++){var c=u.data[s][l];if(c){for(var d in r)if(o(c.properties,d)){var f=r[d];Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++)c.properties[d]===f[m]&&h(c,e)}}}n&&g(0,0,u.width,u.height,u)};p.exports=a}),63307:((p,M,t)=>{var h=t(20576),g=t(42573),o=function(a,r,e){a===void 0&&(a=!0),r===void 0&&(r=!0);for(var n=0;n<e.height;n++)for(var u=0;u<e.width;u++){var s=e.data[n][u];if(s){var l=s.getCollisionGroup();l&&l.objects&&l.objects.length>0&&h(s,a)}}r&&g(0,0,e.width,e.height,e)};p.exports=o}),9589:(p=>{var M=function(t,h,g){var o=g.collideIndexes.indexOf(t);h&&o===-1?g.collideIndexes.push(t):!h&&o!==-1&&g.collideIndexes.splice(o,1)};p.exports=M}),20576:(p=>{var M=function(t,h){h?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};p.exports=M}),79583:(p=>{var M=function(t,h,g,o){if(typeof t=="number")o.callbacks[t]=h!==null?{callback:h,callbackContext:g}:void 0;else for(var a=0,r=t.length;a<r;a++)o.callbacks[t[a]]=h!==null?{callback:h,callbackContext:g}:void 0};p.exports=M}),93254:((p,M,t)=>{var h=t(7386),g=function(o,a,r,e,n,u,s){for(var l=h(o,a,r,e,null,s),c=0;c<l.length;c++)l[c].setCollisionCallback(n,u)};p.exports=g}),32903:((p,M,t)=>{var h=t(7386),g=t(33680),o=function(a,r,e,n,u){var s=h(a,r,e,n,null,u),l=s.map(function(d){return d.index});g(l);for(var c=0;c<s.length;c++)s[c].index=l[c]};p.exports=o}),61325:((p,M,t)=>{var h=t(63448),g=t(56583),o=function(a,r){var e=a.tilemapLayer.tilemap,n=a.tilemapLayer,u=Math.floor(e.tileWidth*n.scaleX),s=Math.floor(e.tileHeight*n.scaleY),l=g(r.worldView.x-n.x,u,0,!0)-n.cullPaddingX,c=h(r.worldView.right-n.x,u,0,!0)+n.cullPaddingX,d=g(r.worldView.y-n.y,s/2,0,!0)-n.cullPaddingY,f=h(r.worldView.bottom-n.y,s/2,0,!0)+n.cullPaddingY;return{left:l,right:c,top:d,bottom:f}};p.exports=o}),54503:((p,M,t)=>{var h=t(61325),g=t(32483),o=function(a,r,e,n){e===void 0&&(e=[]),n===void 0&&(n=0),e.length=0;var u=a.tilemapLayer,s=h(a,r);return u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1&&(s.left=0,s.right=a.width,s.top=0,s.bottom=a.height),g(a,s,n,e),e};p.exports=o}),97202:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n){r||(r=new h);var u=n.baseTileWidth,s=n.baseTileHeight,l=n.tilemapLayer,c=0,d=0;l&&(e||(e=l.scene.cameras.main),c=l.x+e.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+e.scrollY*(1-l.scrollFactorY),s*=l.scaleY);var f=c+o*u+a%2*(u/2),m=d+a*(s/2);return r.set(f,m)};p.exports=g}),28054:(p=>{var M=function(t,h,g){var o=g.baseTileHeight,a=g.tilemapLayer,r=0;return a&&(h===void 0&&(h=a.scene.cameras.main),r=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleY),r+t*(o/2)+o};p.exports=M}),15108:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n,u){e||(e=new h);var s=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(n||(n=c.scene.cameras.main),a=a-(c.y+n.scrollY*(1-c.scrollFactorY)),l*=c.scaleY,o=o-(c.x+n.scrollX*(1-c.scrollFactorX)),s*=c.scaleX);var d=r?Math.floor(a/(l/2)):a/(l/2),f=r?Math.floor((o+d%2*.5*s)/s):(o+d%2*.5*s)/s;return e.set(f,d)};p.exports=g}),51900:(p=>{var M=function(t,h,g,o){var a=o.baseTileHeight,r=o.tilemapLayer;return r&&(g||(g=r.scene.cameras.main),t=t-(r.y+g.scrollY*(1-r.scrollFactorY)),a*=r.scaleY),h?Math.floor(t/(a/2)):t/(a/2)};p.exports=M}),86560:((p,M,t)=>{var h=t(7386),g=function(o,a,r,e,n,u,s){for(var l=h(r,e,n,u,null,s),c=0;c<l.length;c++)l[c]&&(l[c].index===o?l[c].index=a:l[c].index===a&&(l[c].index=o))};p.exports=g}),97281:(p=>{var M=function(t,h,g){var o=g.baseTileWidth,a=g.tilemapLayer,r=0;return a&&(h||(h=a.scene.cameras.main),r=a.x+h.scrollX*(1-a.scrollFactorX),o*=a.scaleX),r+t*o};p.exports=M}),70326:((p,M,t)=>{var h=t(97281),g=t(29650),o=t(26099),a=function(r,e,n,u,s){return n||(n=new o(0,0)),n.x=h(r,u,s),n.y=g(e,u,s),n};p.exports=a}),29650:(p=>{var M=function(t,h,g){var o=g.baseTileHeight,a=g.tilemapLayer,r=0;return a&&(h||(h=a.scene.cameras.main),r=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleY),r+t*o};p.exports=M}),77366:((p,M,t)=>{var h=t(7386),g=t(75508),o=function(a,r,e,n,u,s){if(u){var l,c=h(a,r,e,n,null,s),d=0;for(l=0;l<u.length;l++)d+=u[l].weight;if(!(d<=0))for(l=0;l<c.length;l++){for(var f=g.RND.frac()*d,m=0,y=-1,S=0;S<u.length;S++)if(m+=u[S].weight,f<=m){var C=u[S].index;y=Array.isArray(C)?C[Math.floor(g.RND.frac()*C.length)]:C;break}c[l].index=y}}};p.exports=o}),10095:((p,M,t)=>{var h=t(85896),g=t(26099),o=new g,a=function(r,e,n,u){return h(r,0,e,o,n,u),o.x};p.exports=a}),85896:((p,M,t)=>{var h=t(26099),g=function(o,a,r,e,n,u){r===void 0&&(r=!0),e||(e=new h);var s=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(n||(n=c.scene.cameras.main),o=o-(c.x+n.scrollX*(1-c.scrollFactorX)),a=a-(c.y+n.scrollY*(1-c.scrollFactorY)),s*=c.scaleX,l*=c.scaleY);var d=o/s,f=a/l;return r&&(d=Math.floor(d),f=Math.floor(f)),e.set(d,f)};p.exports=g}),63288:((p,M,t)=>{var h=t(85896),g=t(26099),o=new g,a=function(r,e,n,u){return h(0,r,e,o,n,u),o.y};p.exports=a}),81086:((p,M,t)=>{p.exports={CalculateFacesAt:t(72023),CalculateFacesWithin:t(42573),CheckIsoBounds:t(33528),Copy:t(1785),CreateFromTiles:t(78419),CullBounds:t(19545),CullTiles:t(30003),Fill:t(35137),FilterTiles:t(40253),FindByIndex:t(52692),FindTile:t(66151),ForEachTile:t(97560),GetCullTilesFunction:t(43305),GetTileAt:t(7423),GetTileAtWorldXY:t(60540),GetTileCorners:t(55826),GetTileCornersFunction:t(11758),GetTilesWithin:t(7386),GetTilesWithinShape:t(91141),GetTilesWithinWorldXY:t(96523),GetTileToWorldXFunction:t(39167),GetTileToWorldXYFunction:t(62e3),GetTileToWorldYFunction:t(5984),GetWorldToTileXFunction:t(96113),GetWorldToTileXYFunction:t(16926),GetWorldToTileYFunction:t(55762),HasTileAt:t(45091),HasTileAtWorldXY:t(24152),HexagonalCullBounds:t(90454),HexagonalCullTiles:t(9474),HexagonalGetTileCorners:t(27229),HexagonalTileToWorldXY:t(19951),HexagonalWorldToTileXY:t(86625),IsInLayerBounds:t(62991),IsometricCullTiles:t(14018),IsometricTileToWorldXY:t(14127),IsometricWorldToTileXY:t(96897),PutTileAt:t(71558),PutTileAtWorldXY:t(26303),PutTilesAt:t(14051),Randomize:t(77389),RemoveTileAt:t(63557),RemoveTileAtWorldXY:t(94178),RenderDebug:t(15533),ReplaceByIndex:t(27987),RunCull:t(32483),SetCollision:t(57068),SetCollisionBetween:t(37266),SetCollisionByExclusion:t(75661),SetCollisionByProperty:t(64740),SetCollisionFromCollisionGroup:t(63307),SetLayerCollisionIndex:t(9589),SetTileCollision:t(20576),SetTileIndexCallback:t(79583),SetTileLocationCallback:t(93254),Shuffle:t(32903),StaggeredCullBounds:t(61325),StaggeredCullTiles:t(54503),StaggeredTileToWorldXY:t(97202),StaggeredTileToWorldY:t(28054),StaggeredWorldToTileXY:t(15108),StaggeredWorldToTileY:t(51900),SwapByIndex:t(86560),TileToWorldX:t(97281),TileToWorldXY:t(70326),TileToWorldY:t(29650),WeightedRandomize:t(77366),WorldToTileX:t(10095),WorldToTileXY:t(85896),WorldToTileY:t(63288)}}),91907:(p=>{p.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((p,M,t)=>{var h={ORIENTATION:t(91907)};p.exports=h}),62501:((p,M,t)=>{var h=t(79291),g=t(21829),o={Components:t(81086),Parsers:t(57442),Formats:t(80341),ImageCollection:t(16536),ParseToTilemap:t(31989),Tile:t(23029),Tilemap:t(49075),TilemapCreator:t(45939),TilemapFactory:t(46029),Tileset:t(33629),TilemapLayer:t(20442),Orientation:t(91907),LayerData:t(14977),MapData:t(87010),ObjectLayer:t(48700)};o=h(!1,o,g.ORIENTATION),p.exports=o}),14977:((p,M,t)=>{var h=t(83419),g=t(91907),o=t(95540),a=new h({initialize:function(e){e===void 0&&(e={}),this.name=o(e,"name","layer"),this.id=o(e,"id",0),this.x=o(e,"x",0),this.y=o(e,"y",0),this.width=o(e,"width",0),this.height=o(e,"height",0),this.tileWidth=o(e,"tileWidth",0),this.tileHeight=o(e,"tileHeight",0),this.baseTileWidth=o(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=o(e,"baseTileHeight",this.tileHeight),this.orientation=o(e,"orientation",g.ORTHOGONAL),this.widthInPixels=o(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=o(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=o(e,"alpha",1),this.visible=o(e,"visible",!0),this.properties=o(e,"properties",[]),this.indexes=o(e,"indexes",[]),this.collideIndexes=o(e,"collideIndexes",[]),this.callbacks=o(e,"callbacks",[]),this.bodies=o(e,"bodies",[]),this.data=o(e,"data",[]),this.tilemapLayer=o(e,"tilemapLayer",null),this.hexSideLength=o(e,"hexSideLength",0),this.staggerAxis=o(e,"staggerAxis","y"),this.staggerIndex=o(e,"staggerIndex","odd")}});p.exports=a}),87010:((p,M,t)=>{var h=t(83419),g=t(91907),o=t(95540),a=new h({initialize:function(e){e===void 0&&(e={}),this.name=o(e,"name","map"),this.width=o(e,"width",0),this.height=o(e,"height",0),this.infinite=o(e,"infinite",!1),this.tileWidth=o(e,"tileWidth",0),this.tileHeight=o(e,"tileHeight",0),this.widthInPixels=o(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=o(e,"heightInPixels",this.height*this.tileHeight),this.format=o(e,"format",null),this.orientation=o(e,"orientation",g.ORTHOGONAL),this.renderOrder=o(e,"renderOrder","right-down"),this.version=o(e,"version","1"),this.properties=o(e,"properties",{}),this.layers=o(e,"layers",[]),this.images=o(e,"images",[]),this.objects=o(e,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=o(e,"collision",{}),this.tilesets=o(e,"tilesets",[]),this.imageCollections=o(e,"imageCollections",[]),this.tiles=o(e,"tiles",[]),this.hexSideLength=o(e,"hexSideLength",0),this.staggerAxis=o(e,"staggerAxis","y"),this.staggerIndex=o(e,"staggerIndex","odd")}});p.exports=a}),48700:((p,M,t)=>{var h=t(83419),g=t(95540),o=new h({initialize:function(r){r===void 0&&(r={}),this.name=g(r,"name","object layer"),this.id=g(r,"id",0),this.opacity=g(r,"opacity",1),this.properties=g(r,"properties",{}),this.propertyTypes=g(r,"propertytypes",{}),this.type=g(r,"type","objectgroup"),this.visible=g(r,"visible",!0),this.objects=g(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});p.exports=o}),6641:((p,M,t)=>{var h=t(91907),g=function(o){return o=o.toLowerCase(),o==="isometric"?h.ISOMETRIC:o==="staggered"?h.STAGGERED:o==="hexagonal"?h.HEXAGONAL:h.ORTHOGONAL};p.exports=g}),46177:((p,M,t)=>{var h=t(80341),g=t(2342),o=t(82593),a=t(46594),r=t(87021),e=function(n,u,s,l,c,d){var f;switch(u){case h.ARRAY_2D:f=g(n,s,l,c,d);break;case h.CSV:f=o(n,s,l,c,d);break;case h.TILED_JSON:f=a(n,s,d);break;case h.WELTMEISTER:f=r(n,s,d);break;default:console.warn("Unrecognized tilemap data format: "+u),f=null}return f};p.exports=e}),2342:((p,M,t)=>{var h=t(80341),g=t(14977),o=t(87010),a=t(23029),r=function(e,n,u,s,l){for(var c=new g({tileWidth:u,tileHeight:s}),d=new o({name:e,tileWidth:u,tileHeight:s,format:h.ARRAY_2D,layers:[c]}),f=[],m=n.length,y=0,S=0;S<n.length;S++){f[S]=[];for(var C=n[S],E=0;E<C.length;E++){var P=parseInt(C[E],10);isNaN(P)||P===-1?f[S][E]=l?null:new a(c,-1,E,S,u,s):f[S][E]=new a(c,P,E,S,u,s)}y===0&&(y=C.length)}return d.width=c.width=y,d.height=c.height=m,d.widthInPixels=c.widthInPixels=y*u,d.heightInPixels=c.heightInPixels=m*s,c.data=f,d};p.exports=r}),82593:((p,M,t)=>{var h=t(80341),g=t(2342),o=function(a,r,e,n,u){var s=r.trim().split(`
`).map(function(c){return c.split(",")}),l=g(a,s,e,n,u);return l.format=h.CSV,l};p.exports=o}),6656:((p,M,t)=>{var h=t(14977),g=t(23029),o=function(a,r){for(var e=[],n=0;n<a.layer.length;n++){for(var u=a.layer[n],s=new h({name:u.name,width:u.width,height:u.height,tileWidth:u.tilesize,tileHeight:u.tilesize,visible:u.visible===1}),l=[],c=[],d=0;d<u.data.length;d++){for(var f=0;f<u.data[d].length;f++){var m=u.data[d][f]-1,y;m>-1?y=new g(s,m,f,d,u.tilesize,u.tilesize):y=r?null:new g(s,-1,f,d,u.tilesize,u.tilesize),l.push(y)}c.push(l),l=[]}s.data=c,e.push(s)}return e};p.exports=o}),96483:((p,M,t)=>{var h=t(33629),g=function(o){for(var a=[],r=[],e=0;e<o.layer.length;e++){var n=o.layer[e],u=n.tilesetName;u!==""&&r.indexOf(u)===-1&&(r.push(u),a.push(new h(u,0,n.tilesize,n.tilesize,0,0)))}return a};p.exports=g}),87021:((p,M,t)=>{var h=t(80341),g=t(87010),o=t(6656),a=t(96483),r=function(e,n,u){if(n.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var s=0,l=0,c=0;c<n.layer.length;c++)n.layer[c].width>s&&(s=n.layer[c].width),n.layer[c].height>l&&(l=n.layer[c].height);var d=new g({width:s,height:l,name:e,tileWidth:n.layer[0].tilesize,tileHeight:n.layer[0].tilesize,format:h.WELTMEISTER});return d.layers=o(n,u),d.tilesets=a(n),d};p.exports=r}),52833:((p,M,t)=>{p.exports={ParseTileLayers:t(6656),ParseTilesets:t(96483),ParseWeltmeister:t(87021)}}),57442:((p,M,t)=>{p.exports={FromOrientationString:t(6641),Parse:t(46177),Parse2DArray:t(2342),ParseCSV:t(82593),Impact:t(52833),Tiled:t(96761)}}),51233:((p,M,t)=>{var h=t(79291),g=function(o){for(var a,r,e,n,u,s=0;s<o.layers.length;s++){a=o.layers[s],n=null;for(var l=0;l<a.data.length;l++){u=a.data[l];for(var c=0;c<u.length;c++)r=u[c],!(r===null||r.index<0)&&(e=o.tiles[r.index][2],n=o.tilesets[e],r.width=n.tileWidth,r.height=n.tileHeight,n.tileProperties&&n.tileProperties[r.index-n.firstgid]&&(r.properties=h(r.properties,n.tileProperties[r.index-n.firstgid])))}}};p.exports=g}),41868:(p=>{var M=function(t){for(var h=window.atob(t),g=h.length,o=new Array(g/4),a=0;a<g;a+=4)o[a/4]=(h.charCodeAt(a)|h.charCodeAt(a+1)<<8|h.charCodeAt(a+2)<<16|h.charCodeAt(a+3)<<24)>>>0;return o};p.exports=M}),84101:((p,M,t)=>{var h=t(33629),g=function(o){var a,r,e=[];for(a=0;a<o.imageCollections.length;a++)for(var n=o.imageCollections[a],u=n.images,s=0;s<u.length;s++){var l=u[s],c={x:0,y:l.height-o.tileHeight};r=new h(l.image,l.gid,l.width,l.height,0,0,void 0,void 0,c),r.updateTileData(l.width,l.height),o.tilesets.push(r)}for(a=0;a<o.tilesets.length;a++){r=o.tilesets[a];for(var d=r.tileMargin,f=r.tileMargin,m=0,y=0,S=0,C=r.firstgid;C<r.firstgid+r.total&&(e[C]=[d,f,a],d+=r.tileWidth+r.tileSpacing,m++,!(m===r.total||(y++,y===r.columns&&(d=r.tileMargin,f+=r.tileHeight+r.tileSpacing,y=0,S++,S===r.rows))));C++);}return e};p.exports=g}),79677:((p,M,t)=>{var h=t(95540),g=function(o,a,r){if(!a)return{i:0,layers:o.layers,name:"",opacity:1,visible:!0,x:0,y:0};var e=a.x+h(a,"startx",0)*o.tilewidth+h(a,"offsetx",0),n=a.y+h(a,"starty",0)*o.tileheight+h(a,"offsety",0);return{i:0,layers:a.layers,name:r.name+a.name+"/",opacity:r.opacity*a.opacity,visible:r.visible&&a.visible,x:r.x+e,y:r.y+n}};p.exports=g}),29920:(p=>{var M=2147483648,t=1073741824,h=536870912,g=function(o){var a=!!(o&M),r=!!(o&t),e=!!(o&h);o=o&536870911;var n=0,u=!1;return a&&r&&e?(n=Math.PI/2,u=!0):a&&r&&!e?(n=Math.PI,u=!1):a&&!r&&e?(n=Math.PI/2,u=!1):a&&!r&&!e?(n=0,u=!0):!a&&r&&e?(n=3*Math.PI/2,u=!1):!a&&r&&!e?(n=Math.PI,u=!0):!a&&!r&&e?(n=3*Math.PI/2,u=!0):!a&&!r&&!e&&(n=0,u=!1),{gid:o,flippedHorizontal:a,flippedVertical:r,flippedAntiDiagonal:e,rotation:n,flipped:u}};p.exports=g}),12635:((p,M,t)=>{var h=t(95540),g=t(79677),o=function(a){for(var r=[],e=[],n=g(a);n.i<n.layers.length||e.length>0;){if(n.i>=n.layers.length){if(e.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=e.pop();continue}var u=n.layers[n.i];if(n.i++,u.type!=="imagelayer"){if(u.type==="group"){var s=g(a,u,n);e.push(n),n=s}continue}var l=h(u,"offsetx",0)+h(u,"startx",0),c=h(u,"offsety",0)+h(u,"starty",0);r.push({name:n.name+u.name,image:u.image,x:n.x+l+u.x,y:n.y+c+u.y,alpha:n.opacity*u.opacity,visible:n.visible&&u.visible,properties:h(u,"properties",{})})}return r};p.exports=o}),46594:((p,M,t)=>{var h=t(51233),g=t(84101),o=t(91907),a=t(62644),r=t(80341),e=t(6641),n=t(87010),u=t(12635),s=t(22611),l=t(28200),c=t(24619),d=function(f,m,y){var S=a(m),C=new n({width:S.width,height:S.height,name:f,tileWidth:S.tilewidth,tileHeight:S.tileheight,orientation:e(S.orientation),format:r.TILED_JSON,version:S.version,properties:S.properties,renderOrder:S.renderorder,infinite:S.infinite});if(C.orientation===o.HEXAGONAL)if(C.hexSideLength=S.hexsidelength,C.staggerAxis=S.staggeraxis,C.staggerIndex=S.staggerindex,C.staggerAxis==="y"){var E=(C.tileHeight-C.hexSideLength)/2;C.widthInPixels=C.tileWidth*(C.width+.5),C.heightInPixels=C.height*(C.hexSideLength+E)+E}else{var P=(C.tileWidth-C.hexSideLength)/2;C.widthInPixels=C.width*(C.hexSideLength+P)+P,C.heightInPixels=C.tileHeight*(C.height+.5)}C.layers=l(S,y),C.images=u(S);var A=c(S);return C.tilesets=A.tilesets,C.imageCollections=A.imageCollections,C.objects=s(S),C.tiles=g(C),h(C),C};p.exports=d}),52205:((p,M,t)=>{var h=t(18254),g=t(29920),o=function(e){return{x:e.x,y:e.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],r=function(e,n,u){n===void 0&&(n=0),u===void 0&&(u=0);var s=h(e,a);if(s.x+=n,s.y+=u,e.gid){var l=g(e.gid);s.gid=l.gid,s.flippedHorizontal=l.flippedHorizontal,s.flippedVertical=l.flippedVertical,s.flippedAntiDiagonal=l.flippedAntiDiagonal}else e.polyline?s.polyline=e.polyline.map(o):e.polygon?s.polygon=e.polygon.map(o):e.ellipse?s.ellipse=e.ellipse:e.text?s.text=e.text:e.point?s.point=!0:s.rectangle=!0;return s};p.exports=r}),22611:((p,M,t)=>{var h=t(95540),g=t(52205),o=t(48700),a=t(79677),r=function(e){for(var n=[],u=[],s=a(e);s.i<s.layers.length||u.length>0;){if(s.i>=s.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=u.pop();continue}var l=s.layers[s.i];if(s.i++,l.opacity*=s.opacity,l.visible=s.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var c=a(e,l,s);u.push(s),s=c}continue}l.name=s.name+l.name;for(var d=s.x+h(l,"startx",0)+h(l,"offsetx",0),f=s.y+h(l,"starty",0)+h(l,"offsety",0),m=[],y=0;y<l.objects.length;y++){var S=g(l.objects[y],d,f);m.push(S)}var C=new o(l);C.objects=m,n.push(C)}return n};p.exports=r}),28200:((p,M,t)=>{var h=t(41868),g=t(91907),o=t(79677),a=t(6641),r=t(95540),e=t(14977),n=t(29920),u=t(23029),s=function(l,c){for(var d=r(l,"infinite",!1),f=[],m=[],y=o(l);y.i<y.layers.length||m.length>0;){if(y.i>=y.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=m.pop();continue}var S=y.layers[y.i];if(y.i++,S.type!=="tilelayer"){if(S.type==="group"){var C=o(l,S,y);m.push(y),y=C}continue}if(S.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+S.name+"'");continue}else if(S.encoding&&S.encoding==="base64"){if(S.chunks)for(var E=0;E<S.chunks.length;E++)S.chunks[E].data=h(S.chunks[E].data);S.data&&(S.data=h(S.data)),delete S.encoding}var P,A,R,G,b,L,w=[],B=0;if(d){var N=r(S,"startx",0)+S.x,Y=r(S,"starty",0)+S.y;P=new e({name:y.name+S.name,id:S.id,x:y.x+r(S,"offsetx",0)+N*l.tilewidth,y:y.y+r(S,"offsety",0)+Y*l.tileheight,width:S.width,height:S.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:y.opacity*S.opacity,visible:y.visible&&S.visible,properties:r(S,"properties",[]),orientation:a(l.orientation)}),P.orientation===g.HEXAGONAL&&(P.hexSideLength=l.hexsidelength,P.staggerAxis=l.staggeraxis,P.staggerIndex=l.staggerindex,P.staggerAxis==="y"?(b=(P.tileHeight-P.hexSideLength)/2,P.widthInPixels=P.tileWidth*(P.width+.5),P.heightInPixels=P.height*(P.hexSideLength+b)+b):(L=(P.tileWidth-P.hexSideLength)/2,P.widthInPixels=P.width*(P.hexSideLength+L)+L,P.heightInPixels=P.tileHeight*(P.height+.5)));for(var U=0;U<S.height;U++){w[U]=[null];for(var W=0;W<S.width;W++)w[U][W]=null}for(U=0,ht=S.chunks.length;U<ht;U++)for(var O=S.chunks[U],V=O.x-N,X=O.y-Y,z=0,I=0,Z=O.data.length;I<Z;I++){var J=B+V,k=z+X;A=n(O.data[I]),A.gid>0?(R=new u(P,A.gid,J,k,l.tilewidth,l.tileheight),R.rotation=A.rotation,R.flipX=A.flipped,w[k][J]=R):(G=c?null:new u(P,-1,J,k,l.tilewidth,l.tileheight),w[k][J]=G),B++,B===O.width&&(z++,B=0)}}else{P=new e({name:y.name+S.name,id:S.id,x:y.x+r(S,"offsetx",0)+S.x,y:y.y+r(S,"offsety",0)+S.y,width:S.width,height:S.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:y.opacity*S.opacity,visible:y.visible&&S.visible,properties:r(S,"properties",[]),orientation:a(l.orientation)}),P.orientation===g.HEXAGONAL&&(P.hexSideLength=l.hexsidelength,P.staggerAxis=l.staggeraxis,P.staggerIndex=l.staggerindex,P.staggerAxis==="y"?(b=(P.tileHeight-P.hexSideLength)/2,P.widthInPixels=P.tileWidth*(P.width+.5),P.heightInPixels=P.height*(P.hexSideLength+b)+b):(L=(P.tileWidth-P.hexSideLength)/2,P.widthInPixels=P.width*(P.hexSideLength+L)+L,P.heightInPixels=P.tileHeight*(P.height+.5)));for(var j=[],tt=0,ht=S.data.length;tt<ht;tt++)A=n(S.data[tt]),A.gid>0?(R=new u(P,A.gid,B,w.length,l.tilewidth,l.tileheight),R.rotation=A.rotation,R.flipX=A.flipped,j.push(R)):(G=c?null:new u(P,-1,B,w.length,l.tilewidth,l.tileheight),j.push(G)),B++,B===S.width&&(w.push(j),B=0,j=[])}P.data=w,f.push(P)}return f};p.exports=s}),24619:((p,M,t)=>{var h=t(33629),g=t(16536),o=t(52205),a=t(57880),r=function(e){for(var n=[],u=[],s=null,l,c=0;c<e.tilesets.length;c++){var d=e.tilesets[c];if(d.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(d.image){var f=new h(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,void 0,void 0,d.tileoffset);if(e.version>1){var m=void 0,y=void 0;if(Array.isArray(d.tiles)){m=m||{},y=y||{};for(var S=0;S<d.tiles.length;S++){var C=d.tiles[S];if(C.properties){var E={};C.properties.forEach(function(U){E[U.name]=U.value}),y[C.id]=E}if(C.objectgroup&&((m[C.id]||(m[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var P=C.objectgroup.objects.map(function(U){return o(U)});m[C.id].objectgroup.objects=P}C.animation&&((m[C.id]||(m[C.id]={})).animation=C.animation),C.type&&((m[C.id]||(m[C.id]={})).type=C.type)}}Array.isArray(d.wangsets)&&(m=m||{},y=y||{},a(d.wangsets,m)),m&&(f.tileData=m,f.tileProperties=y)}else if(d.tileproperties&&(f.tileProperties=d.tileproperties),d.tiles){f.tileData=d.tiles;for(l in f.tileData){var A=f.tileData[l].objectgroup;if(A&&A.objects){var R=A.objects.map(function(U){return o(U)});f.tileData[l].objectgroup.objects=R}}}f.updateTileData(d.imagewidth,d.imageheight),n.push(f)}else{var G=new g(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,d.properties),b=0;for(S=0;S<d.tiles.length;S++){C=d.tiles[S];var L=C.image,w=parseInt(C.id,10),B=d.firstgid+w,N=C.imagewidth,Y=C.imageheight;G.addImage(B,L,N,Y),b=Math.max(w,b)}G.maxId=b,u.push(G)}s&&(s.lastgid=d.firstgid-1),s=d}return{tilesets:n,imageCollections:u}};p.exports=r}),57880:(p=>{var M=function(t,h){for(var g=0;g<t.length;g++){var o=t[g],a=g;if(o.name&&o.name!==""&&(a=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var r={},e={},n,u,s;if(Array.isArray(o.edgecolors))for(n=0;n<o.edgecolors.length;n++)s=1+n,u=o.edgecolors[n],u.name!==""&&(r[s]=u.name);if(Array.isArray(o.cornercolors))for(n=0;n<o.cornercolors.length;n++)s=1+n,u=o.cornercolors[n],u.name!==""&&(e[s]=u.name);if(Array.isArray(o.colors))for(n=0;n<o.colors.length;n++)u=o.colors[n],s=1+n,u.name!==""&&(r[s]=e[s]=u.name);for(var l=[r,e,r,e,r,e,r,e],c=0;c<o.wangtiles.length;c++){var d=o.wangtiles[c],f=h[d.tileid]||(h[d.tileid]={});f=f.wangid||(f.wangid={});for(var m=[],y=0;y<Math.min(l.length,d.wangid.length);y++){if(u=d.wangid[y],u===0){m.push(void 0);continue}var S=l[y][u];if(S!==void 0){m.push(S);continue}m.push(u)}f[a]=m}}}};p.exports=M}),96761:((p,M,t)=>{p.exports={AssignTileProperties:t(51233),Base64Decode:t(41868),BuildTilesetIndex:t(84101),CreateGroupLayer:t(79677),ParseGID:t(29920),ParseImageLayers:t(12635),ParseJSONTiled:t(46594),ParseObject:t(52205),ParseObjectLayers:t(22611),ParseTileLayers:t(28200),ParseTilesets:t(24619)}}),33385:((p,M,t)=>{var h=t(83419),g=t(37277),o=t(44594),a=t(94880),r=t(72905),e=new h({initialize:function(u){this.scene=u,this.systems=u.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var n=this.systems.events;n.on(o.PRE_UPDATE,this.preUpdate,this),n.on(o.UPDATE,this.update,this),n.once(o.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var u;if(n instanceof a){if(u=n,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat,u.delay<=0&&u.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else u=new a(n);return this._pendingInsertion.push(u),u},delayedCall:function(n,u,s,l){return this.addEvent({delay:n,callback:u,args:s,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++){var s=n[u];r(this._pendingRemoval,s),r(this._pendingInsertion,s),r(this._active,s)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,u=this._pendingInsertion.length;if(!(n===0&&u===0)){var s,l;for(s=0;s<n;s++){l=this._pendingRemoval[s];var c=this._active.indexOf(l);c>-1&&this._active.splice(c,1),l.destroy()}for(s=0;s<u;s++)l=this._pendingInsertion[s],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,u){if(this.now=n,!this.paused){u*=this.timeScale;for(var s=0;s<this._active.length;s++){var l=this._active[s];if(!l.paused&&(l.elapsed+=u*l.timeScale,l.elapsed>=l.delay)){var c=l.elapsed-l.delay;if(l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0){if(l.repeatCount--,c>=l.delay)for(;c>=l.delay&&l.repeatCount>0;)l.callback&&l.callback.apply(l.callbackScope,l.args),c-=l.delay,l.repeatCount--;l.elapsed=c,l.hasDispatched=!1}else l.hasDispatched&&this._pendingRemoval.push(l)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(o.PRE_UPDATE,this.preUpdate,this),u.off(o.UPDATE,this.update,this),u.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",e,"time"),p.exports=e}),96120:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(39429),a=t(95540),r=t(44594),e=t(89809),n=new h({Extends:g,initialize:function(s,l){g.call(this),this.scene=s,this.systems=s.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var c=this.systems.events;c.on(r.PRE_UPDATE,this.preUpdate,this),c.on(r.UPDATE,this.update,this),c.once(r.SHUTDOWN,this.destroy,this),l&&this.add(l)},preUpdate:function(u,s){this.paused||(this.elapsed+=s*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var u,s=this.events,l=!1,c=this.systems,d;for(u=0;u<s.length;u++){var f=s[u];if(!f.complete&&f.time<=this.elapsed){if(f.complete=!0,this.totalComplete++,d=f.target?f.target:this,f.if&&!f.if.call(d,f))continue;if(f.once&&(l=!0),f.set&&f.target)for(var m in f.set)f.target[m]=f.set[m];this.iteration&&f.repeat++,f.loop&&f.repeat&&f.loop.call(d),f.tween&&(f.tweenInstance=c.tweens.add(f.tween)),f.sound&&(typeof f.sound=="string"?c.sound.play(f.sound):c.sound.play(f.sound.key,f.sound.config)),f.event&&this.emit(f.event,d),f.run&&f.run.call(d),f.stop&&this.stop()}}if(l)for(u=0;u<s.length;u++)s[u].complete&&s[u].once&&(s.splice(u,1),u--);this.totalComplete>=s.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(e.COMPLETE,this)}},play:function(u){return u===void 0&&(u=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,u&&this.reset(),this},pause:function(){this.paused=!0;for(var u=this.events,s=0;s<u.length;s++){var l=u[s];l.tweenInstance&&(l.tweenInstance.paused=!0)}return this},repeat:function(u){return(u===void 0||u===!0)&&(u=-1),u===!1&&(u=0),this.loop=u,this},resume:function(){this.paused=!1;for(var u=this.events,s=0;s<u.length;s++){var l=u[s];l.tweenInstance&&(l.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(u){u===void 0&&(u=!1),this.elapsed=0,u||(this.iteration=0);for(var s=this.events,l=0;l<s.length;l++){var c=s[l];c.complete=!1,u||(c.repeat=0),c.tweenInstance&&c.tweenInstance.stop()}return this.play(!1)},add:function(u){Array.isArray(u)||(u=[u]);var s=this.events,l=0;s.length>0&&(l=s[s.length-1].time);for(var c=0;c<u.length;c++){var d=u[c],f=a(d,"at",0),m=a(d,"in",null);m!==null&&(f=this.elapsed+m);var y=a(d,"from",null);y!==null&&(f=l+y),s.push({complete:!1,time:f,repeat:0,if:a(d,"if",null),run:a(d,"run",null),loop:a(d,"loop",null),event:a(d,"event",null),target:a(d,"target",null),set:a(d,"set",null),tween:a(d,"tween",null),sound:a(d,"sound",null),once:a(d,"once",!1),stop:a(d,"stop",!1)}),l=f}return this.complete=!1,this},clear:function(){for(var u=this.events,s=0;s<u.length;s++){var l=u[s];l.tweenInstance&&l.tweenInstance.stop()}return u=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var u=Math.min(this.totalComplete,this.events.length);return u/this.events.length},destroy:function(){var u=this.systems.events;u.off(r.PRE_UPDATE,this.preUpdate,this),u.off(r.UPDATE,this.update,this),u.off(r.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});o.register("timeline",function(u){return new n(this.scene,u)}),p.exports=n}),94880:((p,M,t)=>{var h=t(83419),g=t(95540),o=new h({initialize:function(r){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(r)},reset:function(a){if(this.delay=g(a,"delay",0),this.repeat=g(a,"repeat",0),this.loop=g(a,"loop",!1),this.callback=g(a,"callback",void 0),this.callbackScope=g(a,"callbackScope",this),this.args=g(a,"args",[]),this.timeScale=g(a,"timeScale",1),this.startAt=g(a,"startAt",0),this.paused=g(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,r=this.elapsed+this.delay*(this.repeat-this.repeatCount);return r/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});p.exports=o}),35945:(p=>{p.exports="complete"}),89809:((p,M,t)=>{p.exports={COMPLETE:t(35945)}}),90291:((p,M,t)=>{p.exports={Clock:t(33385),Events:t(89809),Timeline:t(96120),TimerEvent:t(94880)}}),40382:((p,M,t)=>{var h=t(72905),g=t(83419),o=t(43491),a=t(88032),r=t(37277),e=t(44594),n=t(93109),u=t(86081),s=t(8357),l=t(43960),c=t(26012),d=new g({initialize:function(m){this.scene=m,this.events=m.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(e.BOOT,this.boot,this),this.events.on(e.START,this.start,this)},boot:function(){this.events.once(e.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(e.UPDATE,this.update,this),this.events.once(e.SHUTDOWN,this.shutdown,this)},create:function(f){Array.isArray(f)||(f=[f]);for(var m=[],y=0;y<f.length;y++){var S=f[y];S instanceof u||S instanceof l?m.push(S):Array.isArray(S.tweens)?m.push(c(this,S)):m.push(s(this,S))}return m.length===1?m[0]:m},add:function(f){var m=f,y=this.tweens;return m instanceof u||m instanceof l||(Array.isArray(m.tweens)?m=c(this,m):m=s(this,m)),y.push(m.reset()),m},addMultiple:function(f){for(var m,y=[],S=this.tweens,C=0;C<f.length;C++)m=f[C],m instanceof u||m instanceof l||(Array.isArray(m.tweens)?m=c(this,m):m=s(this,m)),S.push(m.reset()),y.push(m);return y},chain:function(f){var m=c(this,f);return this.tweens.push(m.init()),m},getChainedTweens:function(f){return f.getChainedTweens()},has:function(f){return this.tweens.indexOf(f)>-1},existing:function(f){return this.has(f)||this.tweens.push(f.reset()),this},addCounter:function(f){var m=a(this,f);return this.tweens.push(m.reset()),m},stagger:function(f,m){return n(f,m)},setLagSmooth:function(f,m){return f===void 0&&(f=1/1e-8),m===void 0&&(m=0),this.maxLag=f,this.lagSkip=Math.min(m,this.maxLag),this},setFps:function(f){return f===void 0&&(f=240),this.gap=1e3/f,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(f){var m=Date.now()-this.prevTime;m>this.maxLag&&(this.startTime+=m-this.lagSkip),this.prevTime+=m;var y=this.prevTime-this.startTime,S=y-this.nextTime,C=y-this.time*1e3;return S>0||f?(y/=1e3,this.time=y,this.nextTime+=S+(S>=this.gap?4:this.gap-S)):C=0,C},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(f){f===void 0&&(f=!1);var m=this.getDelta(f);if(!(m<=0)){this.processing=!0;var y,S,C=[],E=this.tweens;for(y=0;y<E.length;y++)S=E[y],S.update(m)&&C.push(S);var P=C.length;if(P&&E.length>0){for(y=0;y<P;y++){S=C[y];var A=E.indexOf(S);A>-1&&(S.isPendingRemove()||S.isDestroyed())&&(E.splice(A,1),S.destroy())}C.length=0}this.processing=!1}},remove:function(f){return this.processing?f.setPendingRemoveState():(h(this.tweens,f),f.setRemovedState()),this},reset:function(f){return this.existing(f),f.seek(),f.setActiveState(),this},makeActive:function(f){return this.existing(f),f.setActiveState(),this},each:function(f,m){var y,S=[null];for(y=1;y<arguments.length;y++)S.push(arguments[y]);return this.tweens.forEach(function(C){S[0]=C,f.apply(m,S)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(f){var m=[],y=this.tweens;Array.isArray(f)?f=o(f):f=[f];for(var S=f.length,C=0;C<y.length;C++)for(var E=y[C],P=0;P<S;P++)!E.isDestroyed()&&E.hasTarget(f[P])&&m.push(E);return m},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(f){return this.timeScale=f,this},isTweening:function(f){for(var m=this.tweens,y,S=0;S<m.length;S++)if(y=m[S],y.isPlaying()&&y.hasTarget(f))return!0;return!1},killAll:function(){for(var f=this.processing?this.getTweens():this.tweens,m=0;m<f.length;m++)f[m].destroy();return this.processing||(f.length=0),this},killTweensOf:function(f){for(var m=this.getTweensOf(f),y=0;y<m.length;y++)m[y].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(e.UPDATE,this.update,this),this.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(e.START,this.start,this),this.scene=null,this.events=null}});r.register("TweenManager",d,"tweens"),p.exports=d}),57355:(p=>{var M=function(t,h,g){return t&&t.hasOwnProperty(h)?t[h]:g};p.exports=M}),6113:((p,M,t)=>{var h=t(62640),g=t(35355),o=function(a,r){var e=h.Power0;if(typeof a=="string")if(h.hasOwnProperty(a))e=h[a];else{var n="";if(a.indexOf(".")){n=a.substring(a.indexOf(".")+1);var u=n.toLowerCase();u==="in"?n="easeIn":u==="out"?n="easeOut":u==="inout"&&(n="easeInOut")}a=g(a.substring(0,a.indexOf(".")+1)+n),h.hasOwnProperty(a)&&(e=h[a])}else typeof a=="function"&&(e=a);if(!r)return e;var s=r.slice(0);return s.unshift(0),function(l){return s[0]=l,e.apply(this,s)}};p.exports=o}),91389:((p,M,t)=>{var h=t(89318),g=t(77259),o=t(28392),a={bezier:h,catmull:g,catmullrom:g,linear:o},r=function(e){if(e===null)return null;var n=a.linear;return typeof e=="string"?a.hasOwnProperty(e)&&(n=a[e]):typeof e=="function"&&(n=e),n};p.exports=r}),55292:(p=>{var M=function(t,h,g){var o;if(t.hasOwnProperty(h)){var a=typeof t[h];a==="function"?o=function(r,e,n,u,s,l){return t[h](r,e,n,u,s,l)}:o=function(){return t[h]}}else typeof g=="function"?o=g:o=function(){return g};return o};p.exports=M}),82985:((p,M,t)=>{var h=t(81076),g=function(o){var a,r=[];if(o.hasOwnProperty("props"))for(a in o.props)a.substring(0,1)!=="_"&&r.push({key:a,value:o.props[a]});else for(a in o)h.indexOf(a)===-1&&a.substring(0,1)!=="_"&&r.push({key:a,value:o[a]});return r};p.exports=g}),62329:((p,M,t)=>{var h=t(35154),g=function(o){var a=h(o,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};p.exports=g}),17777:((p,M,t)=>{var h=t(30976),g=t(99472);function o(u){return!!u.getActive&&typeof u.getActive=="function"}function a(u){return!!u.getStart&&typeof u.getStart=="function"}function r(u){return!!u.getEnd&&typeof u.getEnd=="function"}function e(u){return a(u)||r(u)||o(u)}var n=function(u,s){var l,c=function(U,W,O){return O},d=function(U,W,O){return O},f=null,m=typeof s;if(m==="number")c=function(){return s};else if(Array.isArray(s))d=function(){return s[0]},c=function(){return s[s.length-1]};else if(m==="string"){var y=s.toLowerCase(),S=y.substring(0,6)==="random",C=y.substring(0,3)==="int";if(S||C){var E=y.indexOf("("),P=y.indexOf(")"),A=y.indexOf(",");if(E&&P&&A){var R=parseFloat(y.substring(E+1,A)),G=parseFloat(y.substring(A+1,P));S?c=function(){return g(R,G)}:c=function(){return h(R,G)}}else throw new Error("invalid random() format")}else{y=y[0];var b=parseFloat(s.substr(2));switch(y){case"+":c=function(U,W,O){return O+b};break;case"-":c=function(U,W,O){return O-b};break;case"*":c=function(U,W,O){return O*b};break;case"/":c=function(U,W,O){return O/b};break;default:c=function(){return parseFloat(s)}}}}else if(m==="function")c=s;else if(m==="object")if(e(s))o(s)&&(f=s.getActive),r(s)&&(c=s.getEnd),a(s)&&(d=s.getStart);else if(s.hasOwnProperty("value"))l=n(u,s.value);else{var L=s.hasOwnProperty("to"),w=s.hasOwnProperty("from"),B=s.hasOwnProperty("start");if(L&&(w||B)){if(l=n(u,s.to),B){var N=n(u,s.start);l.getActive=N.getEnd}if(w){var Y=n(u,s.from);l.getStart=Y.getEnd}}}return l||(l={getActive:f,getEnd:c,getStart:d}),l};p.exports=n}),88032:((p,M,t)=>{var h=t(70402),g=t(69902),o=t(23568),a=t(57355),r=t(6113),e=t(95540),n=t(55292),u=t(35154),s=t(17777),l=t(269),c=t(86081),d=function(f,m,y){if(m instanceof c)return m.parent=f,m;y===void 0?y=g:y=l(g,y);var S=e(m,"from",0),C=e(m,"to",1),E=[{value:S}],P=e(m,"delay",y.delay),A=e(m,"easeParams",y.easeParams),R=e(m,"ease",y.ease),G=s("value",C),b=new c(f,E),L=b.add(0,"value",G.getEnd,G.getStart,G.getActive,r(e(m,"ease",R),e(m,"easeParams",A)),n(m,"delay",P),e(m,"duration",y.duration),a(m,"yoyo",y.yoyo),e(m,"hold",y.hold),e(m,"repeat",y.repeat),e(m,"repeatDelay",y.repeatDelay),!1,!1);L.start=S,L.current=S,b.completeDelay=o(m,"completeDelay",0),b.loop=Math.round(o(m,"loop",0)),b.loopDelay=Math.round(o(m,"loopDelay",0)),b.paused=a(m,"paused",!1),b.persist=a(m,"persist",!1),b.isNumberTween=!0,b.callbackScope=u(m,"callbackScope",b);for(var w=h.TYPES,B=0;B<w.length;B++){var N=w[B],Y=u(m,N,!1);if(Y){var U=u(m,N+"Params",[]);b.setCallback(N,Y,U)}}return b};p.exports=d}),93109:((p,M,t)=>{var h=t(6113),g=t(35154),o=t(36383),a=function(r,e){e===void 0&&(e={});var n,u=g(e,"start",0),s=g(e,"ease",null),l=g(e,"grid",null),c=g(e,"from",0),d=c==="first",f=c==="center",m=c==="last",y=typeof c=="number",S=Array.isArray(r),C=parseFloat(S?r[0]:r),E=S?parseFloat(r[1]):0,P=Math.max(C,E);if(S&&(u+=C),l){var A=l[0],R=l[1],G=0,b=0,L=0,w=0,B=[];m?(G=A-1,b=R-1):y?(G=c%A,b=Math.floor(c/A)):f&&(G=(A-1)/2,b=(R-1)/2);for(var N=o.MIN_SAFE_INTEGER,Y=0;Y<R;Y++){B[Y]=[];for(var U=0;U<A;U++){L=G-U,w=b-Y;var W=Math.sqrt(L*L+w*w);W>N&&(N=W),B[Y][U]=W}}}var O=s?h(s):null;return l?n=function(V,X,z,I){var Z=0,J=I%A,k=Math.floor(I/A);J>=0&&J<A&&k>=0&&k<R&&(Z=B[k][J]);var j;if(S){var tt=E-C;O?j=Z/N*tt*O(Z/N):j=Z/N*tt}else O?j=Z*C*O(Z/N):j=Z*C;return j+u}:n=function(V,X,z,I,Z){Z--;var J;d?J=I:f?J=Math.abs(Z/2-I):m?J=Z-I:y&&(J=Math.abs(c-I));var k;if(S){var j;f?j=(E-C)/Z*(J*2):j=(E-C)/Z*J,O?k=j*O(J/Z):k=j}else O?k=Z*P*O(J/Z):k=J*C;return k+u},n};p.exports=a}),8357:((p,M,t)=>{var h=t(70402),g=t(69902),o=t(23568),a=t(57355),r=t(6113),e=t(95540),n=t(91389),u=t(55292),s=t(82985),l=t(62329),c=t(35154),d=t(17777),f=t(269),m=t(86081),y=function(S,C,E){if(C instanceof m)return C.parent=S,C;E===void 0?E=g:E=f(g,E);var P=l(C);!P&&E.targets&&(P=E.targets);for(var A=s(C),R=e(C,"delay",E.delay),G=e(C,"duration",E.duration),b=e(C,"easeParams",E.easeParams),L=e(C,"ease",E.ease),w=e(C,"hold",E.hold),B=e(C,"repeat",E.repeat),N=e(C,"repeatDelay",E.repeatDelay),Y=a(C,"yoyo",E.yoyo),U=a(C,"flipX",E.flipX),W=a(C,"flipY",E.flipY),O=e(C,"interpolation",E.interpolation),V=function(st,ft,ut,lt){if(ut==="texture"){var Tt=lt,bt=void 0;Array.isArray(lt)?(Tt=lt[0],bt=lt[1]):lt.hasOwnProperty("value")?(Tt=lt.value,Array.isArray(lt.value)?(Tt=lt.value[0],bt=lt.value[1]):typeof lt.value=="string"&&(Tt=lt.value)):typeof lt=="string"&&(Tt=lt),st.addFrame(ft,Tt,bt,u(lt,"delay",R),e(lt,"duration",G),e(lt,"hold",w),e(lt,"repeat",B),e(lt,"repeatDelay",N),a(lt,"flipX",U),a(lt,"flipY",W))}else{var Dt=d(ut,lt),ct=n(e(lt,"interpolation",O));st.add(ft,ut,Dt.getEnd,Dt.getStart,Dt.getActive,r(e(lt,"ease",L),e(lt,"easeParams",b)),u(lt,"delay",R),e(lt,"duration",G),a(lt,"yoyo",Y),e(lt,"hold",w),e(lt,"repeat",B),e(lt,"repeatDelay",N),a(lt,"flipX",U),a(lt,"flipY",W),ct,ct?lt:null)}},X=new m(S,P),z=0;z<A.length;z++)for(var I=A[z].key,Z=A[z].value,J=0;J<P.length;J++)I==="scale"&&!P[J].hasOwnProperty("scale")?(V(X,J,"scaleX",Z),V(X,J,"scaleY",Z)):V(X,J,I,Z);X.completeDelay=o(C,"completeDelay",0),X.loop=Math.round(o(C,"loop",0)),X.loopDelay=Math.round(o(C,"loopDelay",0)),X.paused=a(C,"paused",!1),X.persist=a(C,"persist",!1),X.callbackScope=e(C,"callbackScope",X);for(var k=h.TYPES,j=0;j<k.length;j++){var tt=k[j],ht=c(C,tt,!1);if(ht){var ot=c(C,tt+"Params",[]);X.setCallback(tt,ht,ot)}}return X};p.exports=y}),26012:((p,M,t)=>{var h=t(70402),g=t(23568),o=t(57355),a=t(62329),r=t(35154),e=t(8357),n=t(43960),u=function(s,l){if(l instanceof n)return l.parent=s,l;var c=new n(s);c.startDelay=r(l,"delay",0),c.completeDelay=g(l,"completeDelay",0),c.loop=Math.round(g(l,"loop",r(l,"repeat",0))),c.loopDelay=Math.round(g(l,"loopDelay",r(l,"repeatDelay",0))),c.paused=o(l,"paused",!1),c.persist=o(l,"persist",!1),c.callbackScope=r(l,"callbackScope",c);var d,f=h.TYPES;for(d=0;d<f.length;d++){var m=f[d],y=r(l,m,!1);if(y){var S=r(l,m+"Params",[]);c.setCallback(m,y,S)}}var C=r(l,"tweens",null);if(Array.isArray(C)){var E=[],P=a(l),A=void 0;for(P&&(A={targets:P}),d=0;d<C.length;d++)E.push(e(c,C[d],A));c.add(E)}return c};p.exports=u}),30231:((p,M,t)=>{p.exports={GetBoolean:t(57355),GetEaseFunction:t(6113),GetInterpolationFunction:t(91389),GetNewValue:t(55292),GetProps:t(82985),GetTargets:t(62329),GetValueOp:t(17777),NumberTweenBuilder:t(88032),StaggerBuilder:t(93109),TweenBuilder:t(8357)}}),73685:(p=>{p.exports="active"}),98540:(p=>{p.exports="complete"}),67233:(p=>{p.exports="loop"}),2859:(p=>{p.exports="pause"}),98336:(p=>{p.exports="repeat"}),25764:(p=>{p.exports="resume"}),32193:(p=>{p.exports="start"}),84371:(p=>{p.exports="stop"}),70766:(p=>{p.exports="update"}),55659:(p=>{p.exports="yoyo"}),842:((p,M,t)=>{p.exports={TWEEN_ACTIVE:t(73685),TWEEN_COMPLETE:t(98540),TWEEN_LOOP:t(67233),TWEEN_PAUSE:t(2859),TWEEN_RESUME:t(25764),TWEEN_REPEAT:t(98336),TWEEN_START:t(32193),TWEEN_STOP:t(84371),TWEEN_UPDATE:t(70766),TWEEN_YOYO:t(55659)}}),43066:((p,M,t)=>{var h={States:t(86353),Builders:t(30231),Events:t(842),TweenManager:t(40382),Tween:t(86081),TweenData:t(48177),TweenFrameData:t(42220),BaseTween:t(70402),TweenChain:t(43960)};p.exports=h}),70402:((p,M,t)=>{var h=t(83419),g=t(50792),o=t(842),a=t(86353),r=new h({Extends:g,initialize:function(n){g.call(this),this.parent=n,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(o.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(o.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(o.TWEEN_COMPLETE,"onComplete")},complete:function(e){return e===void 0&&(e=0),e?(this.setCompleteDelayState(),this.countdown=e):this.onCompleteHandler(),this},completeAfterLoop:function(e){return e===void 0&&(e=0),this.loopCounter>e&&(this.loopCounter=e),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(o.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(e){this.countdown-=e,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(e){return this.countdown-=e,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(o.TWEEN_START,"onStart"),e=0),e},updateCompleteDelay:function(e){this.countdown-=e,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(e,n,u){return u===void 0&&(u=[]),this.callbacks.hasOwnProperty(e)&&(this.callbacks[e]={func:n,params:u}),this},setPendingState:function(){this.state=a.PENDING},setActiveState:function(){this.state=a.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=a.LOOP_DELAY},setCompleteDelayState:function(){this.state=a.COMPLETE_DELAY},setStartDelayState:function(){this.state=a.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=a.PENDING_REMOVE},setRemovedState:function(){this.state=a.REMOVED},setFinishedState:function(){this.state=a.FINISHED},setDestroyedState:function(){this.state=a.DESTROYED},isPending:function(){return this.state===a.PENDING},isActive:function(){return this.state===a.ACTIVE},isLoopDelayed:function(){return this.state===a.LOOP_DELAY},isCompleteDelayed:function(){return this.state===a.COMPLETE_DELAY},isStartDelayed:function(){return this.state===a.START_DELAY},isPendingRemove:function(){return this.state===a.PENDING_REMOVE},isRemoved:function(){return this.state===a.REMOVED},isFinished:function(){return this.state===a.FINISHED},isDestroyed:function(){return this.state===a.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(e){e.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});r.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],p.exports=r}),95042:((p,M,t)=>{var h=t(83419),g=t(842),o=t(86353),a=new h({initialize:function(e,n,u,s,l,c,d,f,m,y){this.tween=e,this.targetIndex=n,this.duration=s<=0?.01:s,this.totalDuration=0,this.delay=0,this.getDelay=u,this.yoyo=l,this.hold=c,this.repeat=d,this.repeatDelay=f,this.repeatCounter=0,this.flipX=m,this.flipY=y,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(r){r===void 0&&(r=this.current),this.tween.targets[this.targetIndex][this.key]=r},setCreatedState:function(){this.state=o.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=o.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=o.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=o.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=o.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=o.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=o.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=o.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===o.CREATED},isDelayed:function(){return this.state===o.DELAY},isPendingRender:function(){return this.state===o.PENDING_RENDER},isPlayingForward:function(){return this.state===o.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===o.PLAYING_BACKWARD},isHolding:function(){return this.state===o.HOLD_DELAY},isRepeating:function(){return this.state===o.REPEAT_DELAY},isComplete:function(){return this.state===o.COMPLETE},setStateFromEnd:function(r){this.yoyo?this.onRepeat(r,!0,!0):this.repeatCounter>0?this.onRepeat(r,!0,!1):this.setCompleteState()},setStateFromStart:function(r){this.repeatCounter>0?this.onRepeat(r,!1):this.setCompleteState()},reset:function(){var r=this.tween,e=r.totalTargets,n=this.targetIndex,u=r.targets[n],s=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(u,s,0,n,e,r),this.repeatCounter=this.repeat===-1?o.MAX:this.repeat,this.setPendingRenderState();var l=this.duration+this.hold;this.yoyo&&(l+=this.duration);var c=l+this.repeatDelay;this.totalDuration=this.delay+l,this.repeat===-1?(this.totalDuration+=c*o.MAX,r.isInfinite=!0):this.repeat>0&&(this.totalDuration+=c*this.repeat),this.totalDuration>r.duration&&(r.duration=this.totalDuration),this.delay<r.startDelay&&(r.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(r,e,n){var u=this.tween,s=u.totalTargets,l=this.targetIndex,c=u.targets[l],d=this.key,f=d!=="texture";if(this.elapsed=r,this.progress=r/this.duration,this.flipX&&c.toggleFlipX(),this.flipY&&c.toggleFlipY(),f&&(e||n)&&(this.start=this.getStartValue(c,d,this.start,l,s,u)),n){this.setPlayingBackwardState(),this.dispatchEvent(g.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,f&&(this.end=this.getEndValue(c,d,this.start,l,s,u)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-r,f&&(this.current=this.start,c[d]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(g.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});p.exports=a}),69902:(p=>{var M={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};p.exports=M}),81076:(p=>{p.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((p,M,t)=>{var h=t(70402),g=t(83419),o=t(842),a=t(44603),r=t(39429),e=t(36383),n=t(86353),u=t(48177),s=t(42220),l=new g({Extends:h,initialize:function(d,f){h.call(this,d),this.targets=f,this.totalTargets=f.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(c,d,f,m,y,S,C,E,P,A,R,G,b,L,w,B){var N=new u(this,c,d,f,m,y,S,C,E,P,A,R,G,b,L,w,B);return this.totalData=this.data.push(N),N},addFrame:function(c,d,f,m,y,S,C,E,P,A){var R=new s(this,c,d,f,m,y,S,C,E,P,A);return this.totalData=this.data.push(R),R},getValue:function(c){c===void 0&&(c=0);var d=null;return this.data&&(d=this.data[c].current),d},hasTarget:function(c){return this.targets&&this.targets.indexOf(c)!==-1},updateTo:function(c,d,f){if(f===void 0&&(f=!1),c!=="texture")for(var m=0;m<this.totalData;m++){var y=this.data[m];y.key===c&&(y.isPlayingForward()||y.isPlayingBackward())&&(y.end=d,f&&(y.start=y.current))}return this},restart:function(){switch(this.state){case n.REMOVED:case n.FINISHED:this.seek(),this.parent.makeActive(this);break;case n.PENDING:case n.PENDING_REMOVE:this.parent.reset(this);break;case n.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,h.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(c,d,f){if(c===void 0&&(c=0),d===void 0&&(d=16.6),f===void 0&&(f=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;f||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive");var m=this.paused;if(this.paused=!1,c>0){for(var y=Math.floor(c/d),S=c-y*d,C=0;C<y;C++)this.update(d);S>0&&this.update(S)}return this.paused=m,this.isSeeking=!1,this},initTweenData:function(c){c===void 0&&(c=!1),this.duration=0,this.startDelay=e.MAX_SAFE_INTEGER;for(var d=this.data,f=0;f<this.totalData;f++)d[f].reset(c);this.duration=Math.max(this.duration,.01);var m=this.duration,y=this.completeDelay,S=this.loopCounter,C=this.loopDelay;S>0?this.totalDuration=m+y+(m+C)*S:this.totalDuration=m+y},reset:function(c){return c===void 0&&(c=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=n.MAX),c||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")),this},update:function(c){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(c*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(c),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(c),!1;this.hasStarted||(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(o.TWEEN_START,"onStart"),c=0));var d=!1;if(this.isActive())for(var f=this.data,m=0;m<this.totalData;m++)f[m].update(c)&&(d=!0);this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),d||this.nextState();var y=this.isPendingRemove();return y&&this.persist&&(this.setFinishedState(),y=!1),y},forward:function(c){return this.update(c),this},rewind:function(c){return this.update(-c),this},dispatchEvent:function(c,d){if(!this.isSeeking){if(this.emit(c,this,this.targets),!this.callbacks)return;var f=this.callbacks[d];f&&f.func.apply(this.callbackScope,[this,this.targets].concat(f.params))}},destroy:function(){h.prototype.destroy.call(this),this.targets=null}});r.register("tween",function(c){return this.scene.sys.tweens.add(c)}),a.register("tween",function(c){return this.scene.sys.tweens.create(c)}),p.exports=l}),43960:((p,M,t)=>{var h=t(72905),g=t(70402),o=t(83419),a=t(842),r=t(44603),e=t(39429),n=t(86353),u=new o({Extends:g,initialize:function(l){g.call(this,l),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?n.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(s){var l=this.parent.create(s);Array.isArray(l)||(l=[l]);for(var c=this.data,d=0;d<l.length;d++){var f=l[d];f.parent=this,c.push(f.reset())}return this.totalData=c.length,this},remove:function(s){return h(this.data,s),s.setRemovedState(),s===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(s){for(var l=this.data,c=0;c<this.totalData;c++)if(l[c].hasTarget(s))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(s){return s.seek(),s.setActiveState(),this},makeActive:function(s){return s.reset(),s.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var s=this.data,l=this.totalData,c=0;c<l;c++)s[c].reset(!1);this.setCurrentTween(0)},update:function(s){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(s*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(s),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(s),!1;this.hasStarted||(this.startDelay-=s,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),s=0));var l=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(s)&&this.nextTween()&&this.nextState(),l=this.isPendingRemove(),l&&this.persist&&(this.setFinishedState(),l=!1)),l},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(s){this.currentIndex=s,this.currentTween=this.data[s],this.currentTween.setActiveState()},dispatchEvent:function(s,l){this.emit(s,this);var c=this.callbacks[l];c&&c.func.apply(this.callbackScope,[this].concat(c.params))},destroy:function(){g.prototype.destroy.call(this),this.currentTween=null}});e.register("tweenchain",function(s){return this.scene.sys.tweens.chain(s)}),r.register("tweenchain",function(s){return this.scene.sys.tweens.create(s)}),p.exports=u}),48177:((p,M,t)=>{var h=t(95042),g=t(45319),o=t(83419),a=t(842),r=new o({Extends:h,initialize:function(n,u,s,l,c,d,f,m,y,S,C,E,P,A,R,G,b){h.call(this,n,u,m,y,S,C,E,P,A,R),this.key=s,this.getActiveValue=d,this.getEndValue=l,this.getStartValue=c,this.ease=f,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=G,this.interpolationData=b},reset:function(e){h.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex],u=this.key;e&&(n[u]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(n[u]=this.getActiveValue(n,u,0))},update:function(e){var n=this.tween,u=n.totalTargets,s=this.targetIndex,l=n.targets[s],c=this.key;if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(l,c,l[c],s,u,n),this.end=this.getEndValue(l,c,this.start,s,u,n),this.current=this.start,l[c]=this.start,this.setPlayingForwardState(),!0;var d=this.isPlayingForward(),f=this.isPlayingBackward();if(d||f){var m=this.elapsed,y=this.duration,S=0,C=!1;m+=e,m>=y?(S=m-y,m=y,C=!0):m<0&&(m=0);var E=g(m/y,0,1);this.elapsed=m,this.progress=E,this.previous=this.current,d||(E=1-E);var P=this.ease(E);this.interpolation?this.current=this.interpolation(this.interpolationData,P):this.current=this.start+(this.end-this.start)*P,l[c]=this.current,C&&(d?(n.isNumberTween&&(this.current=this.end,l[c]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(S)):(n.isNumberTween&&(this.current=this.start,l[c]=this.current),this.setStateFromStart(S))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,n){var u=this.tween;if(!u.isSeeking){var s=u.targets[this.targetIndex],l=this.key,c=this.current,d=this.previous;u.emit(e,u,l,s,c,d);var f=u.callbacks[n];f&&f.func.apply(u.callbackScope,[u,s,l,c,d].concat(f.params))}},destroy:function(){h.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});p.exports=r}),42220:((p,M,t)=>{var h=t(95042),g=t(45319),o=t(83419),a=t(842),r=new o({Extends:h,initialize:function(n,u,s,l,c,d,f,m,y,S,C){h.call(this,n,u,c,d,!1,f,m,y,S,C),this.key="texture",this.startTexture=null,this.endTexture=s,this.startFrame=null,this.endFrame=l,this.yoyo=m!==0},reset:function(e){h.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=n.texture.key,this.startFrame=n.frame.name),e&&n.setTexture(this.startTexture,this.startFrame)},update:function(e){var n=this.tween,u=this.targetIndex,s=n.targets[u];if(!s)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&s.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var l=this.isPlayingForward(),c=this.isPlayingBackward();if(l||c){var d=this.elapsed,f=this.duration,m=0,y=!1;d+=e,d>=f?(m=d-f,d=f,y=!0):d<0&&(d=0);var S=g(d/f,0,1);this.elapsed=d,this.progress=S,y&&(l?(s.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(m)):(s.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(m))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,n){var u=this.tween;if(!u.isSeeking){var s=u.targets[this.targetIndex],l=this.key;u.emit(e,u,l,s);var c=u.callbacks[n];c&&c.func.apply(u.callbackScope,[u,s,l].concat(c.params))}},destroy:function(){h.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});p.exports=r}),86353:(p=>{var M={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};p.exports=M}),83419:(p=>{function M(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function t(r,e,n){var u=n?r[e]:Object.getOwnPropertyDescriptor(r,e);return!n&&u.value&&typeof u.value=="object"&&(u=u.value),u&&M(u)?(typeof u.enumerable>"u"&&(u.enumerable=!0),typeof u.configurable>"u"&&(u.configurable=!0),u):!1}function h(r,e){var n=Object.getOwnPropertyDescriptor(r,e);return n?(n.value&&typeof n.value=="object"&&(n=n.value),n.configurable===!1):!1}function g(r,e,n,u){for(var s in e)if(e.hasOwnProperty(s)){var l=t(e,s,n);if(l!==!1){var c=u||r;if(h(c.prototype,s)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,s,l)}else r.prototype[s]=e[s]}}function o(r,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)g(r,e[n].prototype||e[n])}}function a(r){r||(r={});var e,n;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");e=r.initialize,delete r.initialize}else if(r.Extends){var u=r.Extends;e=function(){u.apply(this,arguments)}}else e=function(){};r.Extends?(e.prototype=Object.create(r.Extends.prototype),e.prototype.constructor=e,n=r.Extends,delete r.Extends):e.prototype.constructor=e;var s=null;return r.Mixins&&(s=r.Mixins,delete r.Mixins),o(e,s),g(e,r,!0,n),e}a.extend=g,a.mixin=o,a.ignoreFinals=!1,p.exports=a}),29747:(p=>{var M=function(){};p.exports=M}),20242:(p=>{var M=function(){return null};p.exports=M}),71146:(p=>{var M=function(t,h,g,o,a){if(a===void 0&&(a=t),g>0){var r=g-t.length;if(r<=0)return null}if(!Array.isArray(h))return t.indexOf(h)===-1?(t.push(h),o&&o.call(a,h),h):null;for(var e=h.length-1;e>=0;)t.indexOf(h[e])!==-1&&h.splice(e,1),e--;if(e=h.length,e===0)return null;g>0&&e>r&&(h.splice(r),e=r);for(var n=0;n<e;n++){var u=h[n];t.push(u),o&&o.call(a,u)}return h};p.exports=M}),51067:(p=>{var M=function(t,h,g,o,a,r){if(g===void 0&&(g=0),r===void 0&&(r=t),o>0){var e=o-t.length;if(e<=0)return null}if(!Array.isArray(h))return t.indexOf(h)===-1?(t.splice(g,0,h),a&&a.call(r,h),h):null;for(var n=h.length-1;n>=0;)t.indexOf(h[n])!==-1&&h.pop(),n--;if(n=h.length,n===0)return null;o>0&&n>e&&(h.splice(e),n=e);for(var u=n-1;u>=0;u--){var s=h[u];t.splice(g,0,s),a&&a.call(r,s)}return h};p.exports=M}),66905:(p=>{var M=function(t,h){var g=t.indexOf(h);return g!==-1&&g<t.length&&(t.splice(g,1),t.push(h)),h};p.exports=M}),21612:((p,M,t)=>{var h=t(82011),g=function(o,a,r,e,n){e===void 0&&(e=0),n===void 0&&(n=o.length);var u=0;if(h(o,e,n))for(var s=e;s<n;s++){var l=o[s];l[a]===r&&u++}return u};p.exports=g}),95428:(p=>{var M=function(t,h,g){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],h.apply(g,a);return t};p.exports=M}),36914:((p,M,t)=>{var h=t(82011),g=function(o,a,r,e,n){if(e===void 0&&(e=0),n===void 0&&(n=o.length),h(o,e,n)){var u,s=[null];for(u=5;u<arguments.length;u++)s.push(arguments[u]);for(u=e;u<n;u++)s[0]=o[u],a.apply(r,s)}return o};p.exports=g}),81957:(p=>{var M=function(t,h,g){if(h.length){if(h.length===1)return h[0]}else return NaN;var o=1,a,r;if(g){if(t<h[0][g])return h[0];for(;h[o][g]<t;)o++}else for(;h[o]<t;)o++;return o>h.length&&(o=h.length),g?(a=h[o-1][g],r=h[o][g],r-t<=t-a?h[o]:h[o-1]):(a=h[o-1],r=h[o],r-t<=t-a?r:a)};p.exports=M}),43491:(p=>{var M=function(t,h){h===void 0&&(h=[]);for(var g=0;g<t.length;g++)Array.isArray(t[g])?M(t[g],h):h.push(t[g]);return h};p.exports=M}),46710:((p,M,t)=>{var h=t(82011),g=function(o,a,r,e,n){e===void 0&&(e=0),n===void 0&&(n=o.length);var u=[];if(h(o,e,n))for(var s=e;s<n;s++){var l=o[s];(!a||a&&r===void 0&&l.hasOwnProperty(a)||a&&r!==void 0&&l[a]===r)&&u.push(l)}return u};p.exports=g}),58731:((p,M,t)=>{var h=t(82011),g=function(o,a,r,e,n){if(e===void 0&&(e=0),n===void 0&&(n=o.length),e!==-1){if(h(o,e,n))for(var u=e;u<n;u++){var s=o[u];if(!a||a&&r===void 0&&s.hasOwnProperty(a)||a&&r!==void 0&&s[a]===r)return s}}else if(h(o,0,n))for(var u=n;u>=0;u--){var s=o[u];if(!a||a&&r===void 0&&s.hasOwnProperty(a)||a&&r!==void 0&&s[a]===r)return s}return null};p.exports=g}),26546:(p=>{var M=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=t.length);var o=h+Math.floor(Math.random()*g);return t[o]===void 0?null:t[o]};p.exports=M}),85835:(p=>{var M=function(t,h,g){if(h===g)return t;var o=t.indexOf(h),a=t.indexOf(g);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o>a||(t.splice(o,1),a=t.indexOf(g),t.splice(a+1,0,h)),t};p.exports=M}),83371:(p=>{var M=function(t,h,g){if(h===g)return t;var o=t.indexOf(h),a=t.indexOf(g);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o<a||(t.splice(o,1),a===0?t.unshift(h):t.splice(a,0,h)),t};p.exports=M}),70864:(p=>{var M=function(t,h){var g=t.indexOf(h);if(g>0){var o=t[g-1],a=t.indexOf(o);t[g]=o,t[a]=h}return t};p.exports=M}),69693:(p=>{var M=function(t,h,g){var o=t.indexOf(h);if(o===-1||g<0||g>=t.length)throw new Error("Supplied index out of bounds");return o!==g&&(t.splice(o,1),t.splice(g,0,h)),h};p.exports=M}),40853:(p=>{var M=function(t,h){var g=t.indexOf(h);if(g!==-1&&g<t.length-1){var o=t[g+1],a=t.indexOf(o);t[g]=o,t[a]=h}return t};p.exports=M}),20283:(p=>{var M=function(t,h,g,o){var a=[],r,e=!1;if((g||o)&&(e=!0,g||(g=""),o||(o="")),h<t)for(r=t;r>=h;r--)e?a.push(g+r.toString()+o):a.push(r);else for(r=t;r<=h;r++)e?a.push(g+r.toString()+o):a.push(r);return a};p.exports=M}),593:((p,M,t)=>{var h=t(2284),g=function(o,a,r){o===void 0&&(o=0),a===void 0&&(a=null),r===void 0&&(r=1),a===null&&(a=o,o=0);for(var e=[],n=Math.max(h((a-o)/(r||1)),0),u=0;u<n;u++)e.push(o),o+=r;return e};p.exports=g}),43886:(p=>{function M(g,o,a){var r=g[o];g[o]=g[a],g[a]=r}function t(g,o){return g<o?-1:g>o?1:0}var h=function(g,o,a,r,e){for(a===void 0&&(a=0),r===void 0&&(r=g.length-1),e===void 0&&(e=t);r>a;){if(r-a>600){var n=r-a+1,u=o-a+1,s=Math.log(n),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(n-l)/n)*(u-n/2<0?-1:1),d=Math.max(a,Math.floor(o-u*l/n+c)),f=Math.min(r,Math.floor(o+(n-u)*l/n+c));h(g,o,d,f,e)}var m=g[o],y=a,S=r;for(M(g,a,o),e(g[r],m)>0&&M(g,a,r);y<S;){for(M(g,y,S),y++,S--;e(g[y],m)<0;)y++;for(;e(g[S],m)>0;)S--}e(g[a],m)===0?M(g,a,S):(S++,M(g,S,r)),S<=o&&(a=S+1),o<=S&&(r=S-1)}};p.exports=h}),88492:((p,M,t)=>{var h=t(35154),g=t(33680),o=function(r,e,n){for(var u=[],s=0;s<r.length;s++)for(var l=0;l<e.length;l++)for(var c=0;c<n;c++)u.push({a:r[s],b:e[l]});return u},a=function(r,e,n){var u=h(n,"max",0),s=h(n,"qty",1),l=h(n,"random",!1),c=h(n,"randomB",!1),d=h(n,"repeat",0),f=h(n,"yoyo",!1),m=[];if(c&&g(e),d===-1)if(u===0)d=0;else{var y=r.length*e.length*s;f&&(y*=2),d=Math.ceil(u/y)}for(var S=0;S<=d;S++){var C=o(r,e,s);l&&g(C),m=m.concat(C),f&&(C.reverse(),m=m.concat(C))}return u&&m.splice(u),m};p.exports=a}),72905:((p,M,t)=>{var h=t(19133),g=function(o,a,r,e){e===void 0&&(e=o);var n;if(!Array.isArray(a))return n=o.indexOf(a),n!==-1?(h(o,n),r&&r.call(e,a),a):null;for(var u=a.length-1,s=[];u>=0;){var l=a[u];n=o.indexOf(l),n!==-1&&(h(o,n),s.push(l),r&&r.call(e,l)),u--}return s};p.exports=g}),60248:((p,M,t)=>{var h=t(19133),g=function(o,a,r,e){if(e===void 0&&(e=o),a<0||a>o.length-1)throw new Error("Index out of bounds");var n=h(o,a);return r&&r.call(e,n),n};p.exports=g}),81409:((p,M,t)=>{var h=t(82011),g=function(o,a,r,e,n){if(a===void 0&&(a=0),r===void 0&&(r=o.length),n===void 0&&(n=o),h(o,a,r)){var u=r-a,s=o.splice(a,u);if(e)for(var l=0;l<s.length;l++){var c=s[l];e.call(n,c)}return s}else return[]};p.exports=g}),31856:((p,M,t)=>{var h=t(19133),g=function(o,a,r){a===void 0&&(a=0),r===void 0&&(r=o.length);var e=a+Math.floor(Math.random()*r);return h(o,e)};p.exports=g}),42169:(p=>{var M=function(t,h,g){var o=t.indexOf(h),a=t.indexOf(g);return o!==-1&&a===-1?(t[o]=g,!0):!1};p.exports=M}),86003:(p=>{var M=function(t,h){h===void 0&&(h=1);for(var g=null,o=0;o<h;o++)g=t.shift(),t.push(g);return g};p.exports=M}),49498:(p=>{var M=function(t,h){h===void 0&&(h=1);for(var g=null,o=0;o<h;o++)g=t.pop(),t.unshift(g);return g};p.exports=M}),82011:(p=>{var M=function(t,h,g,o){var a=t.length;if(h<0||h>=a||h>=g||g>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};p.exports=M}),89545:(p=>{var M=function(t,h){var g=t.indexOf(h);return g!==-1&&g>0&&(t.splice(g,1),t.unshift(h)),h};p.exports=M}),17810:((p,M,t)=>{var h=t(82011),g=function(o,a,r,e,n){if(e===void 0&&(e=0),n===void 0&&(n=o.length),h(o,e,n))for(var u=e;u<n;u++){var s=o[u];s.hasOwnProperty(a)&&(s[a]=r)}return o};p.exports=g}),33680:(p=>{var M=function(t){for(var h=t.length-1;h>0;h--){var g=Math.floor(Math.random()*(h+1)),o=t[h];t[h]=t[g],t[g]=o}return t};p.exports=M}),90126:(p=>{var M=function(t){var h=/\D/g;return t.sort(function(g,o){return parseInt(g.replace(h,""),10)-parseInt(o.replace(h,""),10)}),t};p.exports=M}),19133:(p=>{var M=function(t,h){if(!(h>=t.length)){for(var g=t.length-1,o=t[h],a=h;a<g;a++)t[a]=t[a+1];return t.length=g,o}};p.exports=M}),19186:((p,M,t)=>{var h=t(82264);function g(e,n){return String(e).localeCompare(n)}function o(e,n){var u=e.length;if(u<=1)return e;for(var s=new Array(u),l=1;l<u;l*=2){a(e,n,l,s);var c=e;e=s,s=c}return e}function a(e,n,u,s){var l=e.length,c=0,d=u*2,f,m,y,S,C;for(f=0;f<l;f+=d)for(m=f+u,y=m+u,m>l&&(m=l),y>l&&(y=l),S=f,C=m;;)if(S<m&&C<y)n(e[S],e[C])<=0?s[c++]=e[S++]:s[c++]=e[C++];else if(S<m)s[c++]=e[S++];else if(C<y)s[c++]=e[C++];else break}var r=function(e,n){if(n===void 0&&(n=g),!e||e.length<2)return e;if(h.features.stableSort)return e.sort(n);var u=o(e,n);return u!==e&&a(u,null,e.length,e),e};p.exports=r}),25630:(p=>{var M=function(t,h,g){if(h===g)return t;var o=t.indexOf(h),a=t.indexOf(g);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=g,t[a]=h,t};p.exports=M}),37105:((p,M,t)=>{p.exports={Matrix:t(54915),Add:t(71146),AddAt:t(51067),BringToTop:t(66905),CountAllMatching:t(21612),Each:t(95428),EachInRange:t(36914),FindClosestInSorted:t(81957),Flatten:t(43491),GetAll:t(46710),GetFirst:t(58731),GetRandom:t(26546),MoveDown:t(70864),MoveTo:t(69693),MoveUp:t(40853),MoveAbove:t(85835),MoveBelow:t(83371),NumberArray:t(20283),NumberArrayStep:t(593),QuickSelect:t(43886),Range:t(88492),Remove:t(72905),RemoveAt:t(60248),RemoveBetween:t(81409),RemoveRandomElement:t(31856),Replace:t(42169),RotateLeft:t(86003),RotateRight:t(49498),SafeRange:t(82011),SendToBack:t(89545),SetAll:t(17810),Shuffle:t(33680),SortByDigits:t(90126),SpliceOne:t(19133),StableSort:t(19186),Swap:t(25630)}}),86922:(p=>{var M=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var h=t[0].length,g=1;g<t.length;g++)if(t[g].length!==h)return!1;return!0};p.exports=M}),63362:((p,M,t)=>{var h=t(41836),g=t(86922),o=function(a){var r="";if(!g(a))return r;for(var e=0;e<a.length;e++){for(var n=0;n<a[e].length;n++){var u=a[e][n].toString();u!=="undefined"?r+=h(u,2):r+="?",n<a[e].length-1&&(r+=" |")}if(e<a.length-1){r+=`
`;for(var s=0;s<a[e].length;s++)r+="---",s<a[e].length-1&&(r+="+");r+=`
`}}return r};p.exports=o}),92598:(p=>{var M=function(t){return t.reverse()};p.exports=M}),21224:(p=>{var M=function(t){for(var h=0;h<t.length;h++)t[h].reverse();return t};p.exports=M}),98717:((p,M,t)=>{var h=t(37829),g=function(o){return h(o,180)};p.exports=g}),44657:((p,M,t)=>{var h=t(37829),g=function(o,a){a===void 0&&(a=1);for(var r=0;r<a;r++)o=h(o,90);return o};p.exports=g}),37829:((p,M,t)=>{var h=t(86922),g=t(2429),o=function(a,r){if(r===void 0&&(r=90),!h(a))return null;if(typeof r!="string"&&(r=(r%360+360)%360),r===90||r===-270||r==="rotateLeft")a=g(a),a.reverse();else if(r===-90||r===270||r==="rotateRight")a.reverse(),a=g(a);else if(Math.abs(r)===180||r==="rotate180"){for(var e=0;e<a.length;e++)a[e].reverse();a.reverse()}return a};p.exports=o}),92632:((p,M,t)=>{var h=t(37829),g=function(o,a){a===void 0&&(a=1);for(var r=0;r<a;r++)o=h(o,-90);return o};p.exports=g}),69512:((p,M,t)=>{var h=t(86003),g=t(49498),o=function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),e!==0&&(e<0?h(a,Math.abs(e)):g(a,e)),r!==0)for(var n=0;n<a.length;n++){var u=a[n];r<0?h(u,Math.abs(r)):g(u,r)}return a};p.exports=o}),2429:(p=>{var M=function(t){for(var h=t.length,g=t[0].length,o=new Array(g),a=0;a<g;a++){o[a]=new Array(h);for(var r=h-1;r>-1;r--)o[a][r]=t[r][a]}return o};p.exports=M}),54915:((p,M,t)=>{p.exports={CheckMatrix:t(86922),MatrixToString:t(63362),ReverseColumns:t(92598),ReverseRows:t(21224),Rotate180:t(98717),RotateLeft:t(44657),RotateMatrix:t(37829),RotateRight:t(92632),Translate:t(69512),TransposeMatrix:t(2429)}}),71334:(p=>{var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(h,g){for(var o=new Uint8Array(h),a=o.length,r=g?"data:"+g+";base64,":"",e=0;e<a;e+=3)r+=M[o[e]>>2],r+=M[(o[e]&3)<<4|o[e+1]>>4],r+=M[(o[e+1]&15)<<2|o[e+2]>>6],r+=M[o[e+2]&63];return a%3===2?r=r.substring(0,r.length-1)+"=":a%3===1&&(r=r.substring(0,r.length-2)+"=="),r};p.exports=t}),53134:(p=>{for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),h=0;h<M.length;h++)t[M.charCodeAt(h)]=h;var g=function(o){o=o.substr(o.indexOf(",")+1);var a=o.length,r=a*.75,e=0,n,u,s,l;o[a-1]==="="&&(r--,o[a-2]==="="&&r--);for(var c=new ArrayBuffer(r),d=new Uint8Array(c),f=0;f<a;f+=4)n=t[o.charCodeAt(f)],u=t[o.charCodeAt(f+1)],s=t[o.charCodeAt(f+2)],l=t[o.charCodeAt(f+3)],d[e++]=n<<2|u>>4,d[e++]=(u&15)<<4|s>>2,d[e++]=(s&3)<<6|l&63;return c};p.exports=g}),65839:((p,M,t)=>{p.exports={ArrayBufferToBase64:t(71334),Base64ToArrayBuffer:t(53134)}}),91799:((p,M,t)=>{p.exports={Array:t(37105),Base64:t(65839),Objects:t(1183),String:t(31749),NOOP:t(29747),NULL:t(20242)}}),41786:(p=>{var M=function(t){var h={};for(var g in t)Array.isArray(t[g])?h[g]=t[g].slice(0):h[g]=t[g];return h};p.exports=M}),62644:(p=>{var M=function(t){var h,g,o;if(typeof t!="object"||t===null)return t;h=Array.isArray(t)?[]:{};for(o in t)g=t[o],h[o]=M(g);return h};p.exports=M}),79291:((p,M,t)=>{var h=t(41212),g=function(){var o,a,r,e,n,u,s=arguments[0]||{},l=1,c=arguments.length,d=!1;for(typeof s=="boolean"&&(d=s,s=arguments[1]||{},l=2),c===l&&(s=this,--l);l<c;l++)if((o=arguments[l])!=null)for(a in o)r=s[a],e=o[a],s!==e&&(d&&e&&(h(e)||(n=Array.isArray(e)))?(n?(n=!1,u=r&&Array.isArray(r)?r:[]):u=r&&h(r)?r:{},s[a]=g(d,u,e)):e!==void 0&&(s[a]=e));return s};p.exports=g}),23568:((p,M,t)=>{var h=t(75508),g=t(35154),o=function(a,r,e){var n=g(a,r,null);if(n===null)return e;if(Array.isArray(n))return h.RND.pick(n);if(typeof n=="object"){if(n.hasOwnProperty("randInt"))return h.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return h.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if(typeof n=="function")return n(r);return n};p.exports=o}),95540:(p=>{var M=function(t,h,g){var o=typeof t;return!t||o==="number"||o==="string"?g:t.hasOwnProperty(h)&&t[h]!==void 0?t[h]:g};p.exports=M}),82840:((p,M,t)=>{var h=t(35154),g=t(45319),o=function(a,r,e,n,u){u===void 0&&(u=e);var s=h(a,r,u);return g(s,e,n)};p.exports=o}),35154:(p=>{var M=function(t,h,g,o){if(!t&&!o||typeof t=="number")return g;if(t&&t.hasOwnProperty(h))return t[h];if(o&&o.hasOwnProperty(h))return o[h];if(h.indexOf(".")!==-1){for(var a=h.split("."),r=t,e=o,n=g,u=g,s=!0,l=!0,c=0;c<a.length;c++)r&&r.hasOwnProperty(a[c])?(n=r[a[c]],r=r[a[c]]):s=!1,e&&e.hasOwnProperty(a[c])?(u=e[a[c]],e=e[a[c]]):l=!1;return s?n:l?u:g}else return g};p.exports=M}),69036:(p=>{var M=function(t,h){for(var g=0;g<h.length;g++)if(!t.hasOwnProperty(h[g]))return!1;return!0};p.exports=M}),1985:(p=>{var M=function(t,h){for(var g=0;g<h.length;g++)if(t.hasOwnProperty(h[g]))return!0;return!1};p.exports=M}),97022:(p=>{var M=function(t,h){return t.hasOwnProperty(h)};p.exports=M}),41212:(p=>{var M=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};p.exports=M}),46975:((p,M,t)=>{var h=t(41786),g=function(o,a){var r=h(o);for(var e in a)r.hasOwnProperty(e)||(r[e]=a[e]);return r};p.exports=g}),269:((p,M,t)=>{var h=t(41786),g=function(o,a){var r=h(o);for(var e in a)r.hasOwnProperty(e)&&(r[e]=a[e]);return r};p.exports=g}),18254:((p,M,t)=>{var h=t(97022),g=function(o,a){for(var r={},e=0;e<a.length;e++){var n=a[e];h(o,n)&&(r[n]=o[n])}return r};p.exports=g}),61622:(p=>{var M=function(t,h,g){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(h))return t[h]=g,!0;if(h.indexOf(".")!==-1){for(var o=h.split("."),a=t,r=t,e=0;e<o.length;e++)if(a.hasOwnProperty(o[e]))r=a,a=a[o[e]];else return!1;return r[o[o.length-1]]=g,!0}return!1};p.exports=M}),1183:((p,M,t)=>{p.exports={Clone:t(41786),DeepCopy:t(62644),Extend:t(79291),GetAdvancedValue:t(23568),GetFastValue:t(95540),GetMinMaxValue:t(82840),GetValue:t(35154),HasAll:t(69036),HasAny:t(1985),HasValue:t(97022),IsPlainObject:t(41212),Merge:t(46975),MergeRight:t(269),Pick:t(18254),SetValue:t(61622)}}),27902:(p=>{var M=function(t,h){return t.replace(/%([0-9]+)/g,function(g,o){return h[Number(o)-1]})};p.exports=M}),41836:(p=>{var M=function(t,h,g,o){h===void 0&&(h=0),g===void 0&&(g=" "),o===void 0&&(o=3),t=t.toString();var a=0;if(h+1>=t.length)switch(o){case 1:t=new Array(h+1-t.length).join(g)+t;break;case 3:var r=Math.ceil((a=h-t.length)/2),e=a-r;t=new Array(e+1).join(g)+t+new Array(r+1).join(g);break;default:t=t+new Array(h+1-t.length).join(g);break}return t};p.exports=M}),33628:(p=>{var M=function(t,h){return h===0?t.slice(1):t.slice(0,h)+t.slice(h+1)};p.exports=M}),27671:(p=>{var M=function(t){return t.split("").reverse().join("")};p.exports=M}),45650:(p=>{var M=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var h=Math.random()*16|0,g=t==="x"?h:h&3|8;return g.toString(16)})};p.exports=M}),35355:(p=>{var M=function(t){return t&&t[0].toUpperCase()+t.slice(1)};p.exports=M}),31749:((p,M,t)=>{p.exports={Format:t(27902),Pad:t(41836),RemoveAt:t(33628),Reverse:t(27671),UppercaseFirst:t(35355),UUID:t(45650)}})},T={};function F(p){var M=T[p];if(M!==void 0)return M.exports;var t=T[p]={exports:{}};return x[p](t,t.exports,F),t.exports}F.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var D=F(85454);return D})())})(Sr)),Sr.exports}var aT=rT();const ze=sT(aT),Uo=Math.min(window.devicePixelRatio||1,2),Pf=window.innerHeight>window.innerWidth,Af=Pf?540:960,oT=Pf?960:540,wa=Af/oT,Ba=window.innerWidth*Uo,Xa=window.innerHeight*Uo;let wn,Lr;Ba/Xa>wa?(wn=Ba,Lr=Math.round(Ba/wa)):(wn=Math.round(Xa*wa),Lr=Xa);const ve=wn/Af,Ve=Math.ceil(ve),ee={WIDTH:wn,HEIGHT:Lr},ys={START_X:wn/2,START_Y:Lr/2,SIZE:16*ve,SPEED:220*ve},Ke={BASE_SPEED:100*ve,SPAWN_INTERVAL_START:1200,SPAWN_INTERVAL_MIN:250,ACCELERATION_RATE:.015,SPAWN_ACCELERATION:15,MAX_SPEED_MULTIPLIER:4,DATA_STREAM:{SPEED_MULT:1.6},CODE_BLOCK:{SPEED_MULT:.7},SINGULARITY_NODE:{SPEED_MULT:1.2,HOMING_STRENGTH:.03,MIN_SPAWN_TIME:15e3}},os={SPAWN_INTERVAL:3e3,SLOW_DURATION:2e3,SLOW_FACTOR:.7,MAX_ON_SCREEN:5,BOB_AMPLITUDE:4*ve,BOB_DURATION:1200,EDGE_MARGIN:60*ve},qe={BG:657946,MUTED_TEXT:"#8888aa",SCORE_GOLD:"#ffd700",SURVIVAL_TEXT:"#00ffff",BG_TOP:657946,BG_BOTTOM:1706542,BTN_PRIMARY:7103487,BTN_PRIMARY_HOVER:8748543,BTN_PRIMARY_PRESS:5919445,BTN_TEXT:"#ffffff"},De={FONT:'system-ui, -apple-system, "Segoe UI", Roboto, sans-serif',TITLE_RATIO:.08,HEADING_RATIO:.05,BODY_RATIO:.035,SMALL_RATIO:.025,BTN_W_RATIO:.45,BTN_H_RATIO:.075,BTN_RADIUS:12*ve,MIN_TOUCH:44*ve},Ge={FRAGMENT_COLLECT:{COUNT:10,SPEED:120*ve,LIFETIME:400,SIZE_MIN:2*ve,SIZE_MAX:4*ve,COLORS:[16766720,16777215,16772744]},PLAYER_DEATH:{COUNT:18,SPEED:180*ve,LIFETIME:600,SIZE_MIN:3*ve,SIZE_MAX:6*ve,COLORS:[65535,34986,16777215]},ENEMY_SPAWN:{COUNT:3,SPEED:40*ve,LIFETIME:200,SIZE:2*ve,COLORS:[16724787,16737792]},SLOWDOWN_RING:{COUNT:12,SPEED:100*ve,LIFETIME:500,SIZE:3*ve,COLORS:[65535,16777215]},SCREEN_SHAKE_DURATION:300,SCREEN_SHAKE_INTENSITY:.015,FLASH_DURATION:200,DEATH_SLOWMO_SCALE:.3,DEATH_SLOWMO_DURATION:400,SLOWDOWN_OVERLAY_ALPHA:.08,SLOWDOWN_OVERLAY_COLOR:65535,AMBIENT:{COUNT:8,ALPHA_MIN:.15,ALPHA_MAX:.3,SIZE_MIN:1*ve,SIZE_MAX:3*ve,SPEED_MIN:8*ve,SPEED_MAX:20*ve,COLORS:[65535,2245802,16711935,65348]},PLAYER_TRAIL:{LENGTH:4,ALPHA_START:.35,ALPHA_STEP:.08,UPDATE_INTERVAL:50},SCORE_POP:{RISE_DISTANCE:30*ve,DURATION:500,FONT_SIZE_RATIO:.03,COLOR:"#ffd700",SHADOW_COLOR:"#000000"},ACCEL_WARNING:{DURATION:600,FONT_SIZE_RATIO:.04,COLOR:"#ff3333",MILESTONES:[1.5,2,2.5,3],LABELS:{1.5:"ACCELERATING...",2:"SPEED x2",2.5:"SPEED x2.5",3:"MAX SPEED!"}},GAMEOVER:{GLITCH_INTERVAL:2e3,GLITCH_OFFSET:2*ve,GLITCH_DURATION:80,SCORE_COUNTUP_DURATION:800}},ao={FADE_DURATION:350};class hT extends ze.Scene{constructor(){super("BootScene")}create(){this.scene.start("GameScene")}}const qt={GAME_START:"game:start",GAME_OVER:"game:over",GAME_RESTART:"game:restart",PLAYER_MOVE:"player:move",PLAYER_DIED:"player:died",SCORE_CHANGED:"score:changed",FRAGMENT_COLLECTED:"fragment:collected",ENEMY_SPAWNED:"enemy:spawned",SLOWDOWN_START:"slowdown:start",SLOWDOWN_END:"slowdown:end",ACCELERATION_TICK:"acceleration:tick",PARTICLES_EMIT:"particles:emit",AUDIO_INIT:"audio:init",MUSIC_MENU:"music:menu",MUSIC_GAMEPLAY:"music:gameplay",MUSIC_GAMEOVER:"music:gameover",MUSIC_STOP:"music:stop"};class uT{constructor(){this.listeners={}}on(v,x){return this.listeners[v]||(this.listeners[v]=[]),this.listeners[v].push(x),this}off(v,x){return this.listeners[v]?(this.listeners[v]=this.listeners[v].filter(T=>T!==x),this):this}emit(v,x){return this.listeners[v]?(this.listeners[v].forEach(T=>{try{T(x)}catch(F){console.error(`EventBus error in ${v}:`,F)}}),this):this}removeAll(){return this.listeners={},this}}const _t=new uT;class lT{constructor(){this.bestScore=0,this.reset()}reset(){this.score=0,this.bestScore=this.bestScore||0,this.started=!1,this.gameOver=!1,this.survivalTime=0,this.fragmentsCollected=0,this.currentSpeedMultiplier=1,this.isSlowed=!1,this.isMuted=!1}addScore(v=1){this.score+=v,this.fragmentsCollected+=v,this.score>this.bestScore&&(this.bestScore=this.score)}}const Ht=new lT;function Ia(i,v,x,T,F=2){if(i.textures.exists(T))return;const D=v.length,p=v[0].length,M=document.createElement("canvas");M.width=p*F,M.height=D*F;const t=M.getContext("2d");for(let h=0;h<D;h++)for(let g=0;g<p;g++){const o=v[h][g];if(o===0||x[o]==null)continue;const a=x[o],r=a>>16&255,e=a>>8&255,n=a&255;t.fillStyle=`rgb(${r},${e},${n})`,t.fillRect(g*F,h*F,F,F)}i.textures.addCanvas(T,M)}function Rn(i,v,x,T,F=2){if(i.textures.exists(T))return;const D=v[0].length,p=v[0][0].length,M=p*F,t=D*F,h=document.createElement("canvas");h.width=M*v.length,h.height=t;const g=h.getContext("2d");v.forEach((a,r)=>{const e=r*M;for(let n=0;n<D;n++)for(let u=0;u<p;u++){const s=a[n][u];if(s===0||x[s]==null)continue;const l=x[s],c=l>>16&255,d=l>>8&255,f=l&255;g.fillStyle=`rgb(${c},${d},${f})`,g.fillRect(e+u*F,n*F,F,F)}});const o=i.textures.addCanvas(T,h);ze.Textures.Parsers.SpriteSheet(o,0,0,0,h.width,h.height,{frameWidth:M,frameHeight:t})}const fs=[null,657966,1184307,65535,16724804,16737792,16711935,16766720,16777215,26248,2245802,8917282,65348],fT=[[0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],[0,0,0,0,0,3,9,9,9,9,3,0,0,0,0,0],[0,0,0,0,3,9,3,3,3,3,9,3,0,0,0,0],[0,0,0,3,9,3,8,3,3,8,3,9,3,0,0,0],[0,0,0,3,9,3,3,8,8,3,3,9,3,0,0,0],[0,0,3,9,3,3,3,8,8,3,3,3,9,3,0,0],[0,0,3,9,3,3,8,8,8,8,3,3,9,3,0,0],[0,3,9,3,3,3,8,8,8,8,3,3,3,9,3,0],[0,3,9,3,3,8,8,8,8,8,8,3,3,9,3,0],[0,0,3,9,3,3,3,8,8,3,3,3,9,3,0,0],[0,0,3,9,3,3,3,3,3,3,3,3,9,3,0,0],[0,0,0,3,9,3,3,3,3,3,3,9,3,0,0,0],[0,0,0,3,9,9,3,3,3,3,9,9,3,0,0,0],[0,0,0,0,3,9,9,3,3,9,9,3,0,0,0,0],[0,0,0,0,0,3,9,9,9,9,3,0,0,0,0,0],[0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0]],dT=[[0,0,0,0,0,3,9,9,9,9,3,0,0,0,0,0],[0,0,0,0,3,9,3,3,3,3,9,3,0,0,0,0],[0,0,0,3,9,3,3,3,3,3,3,9,3,0,0,0],[0,0,3,9,3,3,8,3,3,8,3,3,9,3,0,0],[0,0,3,9,3,3,3,8,8,3,3,3,9,3,0,0],[0,3,9,3,3,3,3,8,8,3,3,3,3,9,3,0],[0,3,9,3,3,3,8,8,8,8,3,3,3,9,3,0],[3,9,3,3,3,3,8,8,8,8,3,3,3,3,9,3],[3,9,3,3,3,8,8,8,8,8,8,3,3,3,9,3],[0,3,9,3,3,3,3,8,8,3,3,3,3,9,3,0],[0,3,9,3,3,3,3,3,3,3,3,3,3,9,3,0],[0,0,3,9,3,3,3,3,3,3,3,3,9,3,0,0],[0,0,3,9,9,3,3,3,3,3,3,9,9,3,0,0],[0,0,0,3,9,9,9,3,3,9,9,9,3,0,0,0],[0,0,0,0,3,9,9,9,9,9,9,3,0,0,0,0],[0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0]],cT=[fT,dT],Oa="player-sprite";class pT{constructor(v){this.scene=v,Rn(v,cT,fs,Oa,Ve),this.sprite=v.physics.add.sprite(ys.START_X,ys.START_Y,Oa),v.anims.exists("player-pulse")||v.anims.create({key:"player-pulse",frames:v.anims.generateFrameNumbers(Oa,{start:0,end:1}),frameRate:4,repeat:-1}),this.sprite.play("player-pulse");const T=16*Ve/2;this.sprite.body.setCircle(T,0,0),this.sprite.body.setCollideWorldBounds(!0)}update(v,x){const T=this.sprite.body,F=Math.sqrt(v*v+x*x);if(F>0){const D=v/F,p=x/F;T.setVelocity(D*ys.SPEED,p*ys.SPEED)}else T.setVelocity(0,0)}reset(){this.sprite.setPosition(ys.START_X,ys.START_Y),this.sprite.body.setVelocity(0,0)}destroy(){this.sprite.destroy()}}const vT=[[0,1,4,4,1,4,4,1,1,4,4,1,4,4,1,0],[1,11,4,8,4,11,4,4,4,4,11,4,8,4,11,1],[1,4,4,4,11,4,8,4,4,8,4,11,4,4,4,1],[4,4,11,4,4,4,4,8,8,4,4,4,4,11,4,4],[4,4,4,8,4,4,11,4,4,11,4,4,8,4,4,4],[1,4,11,4,4,8,4,4,4,4,8,4,4,11,4,1],[1,11,4,4,4,4,4,11,11,4,4,4,4,4,11,1],[0,1,4,4,1,4,4,1,1,4,4,1,4,4,1,0]],mT=[[0,1,4,4,1,4,4,1,1,4,4,1,4,4,1,0],[1,4,4,11,4,8,4,4,4,4,8,4,11,4,4,1],[1,11,4,4,4,4,11,4,4,11,4,4,4,4,11,1],[4,4,4,8,4,4,4,11,11,4,4,4,8,4,4,4],[4,8,4,4,11,4,4,4,4,4,4,11,4,4,8,4],[1,4,4,4,4,11,4,8,8,4,11,4,4,4,4,1],[1,4,11,4,4,4,4,4,4,4,4,4,4,11,4,1],[0,1,4,4,1,4,4,1,1,4,4,1,4,4,1,0]],gT=[vT,mT],xT=[[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1],[1,5,1,1,5,5,5,1,1,5,5,5,1,1,5,1],[1,5,1,5,5,8,5,5,5,5,8,5,5,1,5,1],[1,5,5,5,1,1,1,5,5,1,1,1,5,5,5,1],[1,5,5,8,5,5,1,5,5,1,5,5,8,5,5,1],[1,5,5,5,5,5,1,5,5,1,5,5,5,5,5,1],[1,5,1,5,5,1,1,5,5,1,1,5,5,1,5,1],[1,5,1,5,5,1,1,5,5,1,1,5,5,1,5,1],[1,5,5,5,5,5,1,5,5,1,5,5,5,5,5,1],[1,5,5,8,5,5,1,5,5,1,5,5,8,5,5,1],[1,5,5,5,1,1,1,5,5,1,1,1,5,5,5,1],[1,5,1,5,5,8,5,5,5,5,8,5,5,1,5,1],[1,5,1,1,5,5,5,1,1,5,5,5,1,1,5,1],[1,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],yT=[xT],MT=[[0,0,0,6,6,6,6,6,6,0,0,0],[0,0,6,6,1,1,1,1,6,6,0,0],[0,6,6,1,2,2,2,2,1,6,6,0],[6,6,1,2,1,1,1,1,2,1,6,6],[6,1,2,1,1,2,2,1,1,2,1,6],[6,1,2,1,2,1,1,2,1,2,1,6],[6,1,2,1,2,1,1,2,1,2,1,6],[6,1,2,1,1,2,2,1,1,2,1,6],[6,6,1,2,1,1,1,1,2,1,6,6],[0,6,6,1,2,2,2,2,1,6,6,0],[0,0,6,6,1,1,1,1,6,6,0,0],[0,0,0,6,6,6,6,6,6,0,0,0]],CT=[[0,0,6,6,6,6,6,6,6,6,0,0],[0,6,6,1,1,1,1,1,1,6,6,0],[6,6,1,1,2,2,2,2,1,1,6,6],[6,1,1,2,2,1,1,2,2,1,1,6],[6,1,2,2,1,1,1,1,2,2,1,6],[6,1,2,1,1,2,2,1,1,2,1,6],[6,1,2,1,1,2,2,1,1,2,1,6],[6,1,2,2,1,1,1,1,2,2,1,6],[6,1,1,2,2,1,1,2,2,1,1,6],[6,6,1,1,2,2,2,2,1,1,6,6],[0,6,6,1,1,1,1,1,1,6,6,0],[0,0,6,6,6,6,6,6,6,6,0,0]],ST=[MT,CT],Fe={DATA_STREAM:"dataStream",CODE_BLOCK:"codeBlock",SINGULARITY_NODE:"singularityNode"},fr={[Fe.DATA_STREAM]:"enemy-datastream",[Fe.CODE_BLOCK]:"enemy-codeblock",[Fe.SINGULARITY_NODE]:"enemy-singularity"},Ys={[Fe.DATA_STREAM]:"datastream-scroll",[Fe.SINGULARITY_NODE]:"singularity-pulse"};class TT{constructor(v,x,T,F,D,p,M){this.scene=v,this.type=x,this.playerSprite=M||null;const t=fr[x];if(this._ensureTextures(v),this.sprite=v.physics.add.sprite(T,F,t),x===Fe.DATA_STREAM?(v.anims.exists(Ys[x])||v.anims.create({key:Ys[x],frames:v.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:6,repeat:-1}),this.sprite.play(Ys[x])):x===Fe.SINGULARITY_NODE&&(v.anims.exists(Ys[x])||v.anims.create({key:Ys[x],frames:v.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:4,repeat:-1}),this.sprite.play(Ys[x])),x===Fe.DATA_STREAM){const h=16*Ve,g=8*Ve;this.sprite.body.setSize(h,g),this.sprite.body.setOffset(0,0)}else if(x===Fe.CODE_BLOCK){const h=16*Ve;this.sprite.body.setSize(h,h),this.sprite.body.setOffset(0,0)}else{const g=12*Ve/2;this.sprite.body.setCircle(g,0,0)}this.sprite.body.setVelocity(D,p),this.baseVx=D,this.baseVy=p}_ensureTextures(v){Rn(v,gT,fs,fr[Fe.DATA_STREAM],Ve),Rn(v,yT,fs,fr[Fe.CODE_BLOCK],Ve),Rn(v,ST,fs,fr[Fe.SINGULARITY_NODE],Ve)}update(){if(this.type!==Fe.SINGULARITY_NODE||!this.playerSprite)return;const v=this.playerSprite.x-this.sprite.x,x=this.playerSprite.y-this.sprite.y,T=Math.sqrt(v*v+x*x);if(T>0){const F=Ke.BASE_SPEED*Ke.SINGULARITY_NODE.SPEED_MULT*Ht.currentSpeedMultiplier,D=Ht.isSlowed?Ke.SINGULARITY_NODE.SPEED_MULT:1,p=v/T*F*D,M=x/T*F*D,t=Ke.SINGULARITY_NODE.HOMING_STRENGTH,h=this.sprite.body.velocity.x,g=this.sprite.body.velocity.y;this.sprite.body.setVelocity(h+(p-h)*t,g+(M-g)*t)}}applySlowdown(v){this.type!==Fe.SINGULARITY_NODE&&this.sprite.body.setVelocity(this.baseVx*v,this.baseVy*v)}restoreSpeed(){this.type!==Fe.SINGULARITY_NODE&&this.sprite.body.setVelocity(this.baseVx,this.baseVy)}isOffScreen(){const x=this.sprite.x,T=this.sprite.y;return x<-100||x>ee.WIDTH+100||T<-100||T>ee.HEIGHT+100}destroy(){this.sprite.destroy()}}const ET=[[0,0,0,0,0,7,7,0,0,0,0,0],[0,0,0,0,7,8,8,7,0,0,0,0],[0,0,0,7,8,8,7,7,7,0,0,0],[0,0,7,8,8,7,7,7,7,7,0,0],[0,7,8,8,7,7,7,7,7,7,7,0],[7,8,8,7,7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7],[0,7,7,7,7,7,7,7,7,7,7,0],[0,0,7,7,7,7,7,7,7,7,0,0],[0,0,0,7,7,7,7,7,7,0,0,0],[0,0,0,0,7,7,7,7,0,0,0,0],[0,0,0,0,0,7,7,0,0,0,0,0]],PT=[ET],Vu="fragment-sprite";class AT{constructor(v,x,T){this.scene=v,Rn(v,PT,fs,Vu,Ve),this.sprite=v.physics.add.sprite(x,T,Vu);const D=12*Ve/2;this.sprite.body.setCircle(D,0,0),v.tweens.add({targets:this.sprite,y:T-os.BOB_AMPLITUDE,duration:os.BOB_DURATION/2,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),v.tweens.add({targets:this.sprite,alpha:{from:1,to:.7},duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}destroy(){this.sprite.destroy()}}class FT{constructor(v,x){this.scene=v,this.getPlayerSprite=x,this.enemies=[],this.fragments=[],this.currentSpawnInterval=Ke.SPAWN_INTERVAL_START,this.elapsedTime=0,this.enemyTimer=v.time.addEvent({delay:this.currentSpawnInterval,callback:()=>this.spawnEnemy(),loop:!0}),this.fragmentTimer=v.time.addEvent({delay:os.SPAWN_INTERVAL,callback:()=>this.spawnFragment(),loop:!0}),this.accelTimer=v.time.addEvent({delay:1e3,callback:()=>this.accelerate(),loop:!0}),v.time.delayedCall(500,()=>this.spawnFragment())}accelerate(){this.elapsedTime+=1e3,Ht.survivalTime=this.elapsedTime/1e3,Ht.currentSpeedMultiplier=Math.min(1+this.elapsedTime/1e3*Ke.ACCELERATION_RATE,Ke.MAX_SPEED_MULTIPLIER),this.currentSpawnInterval=Math.max(Ke.SPAWN_INTERVAL_START-this.elapsedTime/1e3*Ke.SPAWN_ACCELERATION,Ke.SPAWN_INTERVAL_MIN),this.enemyTimer.delay=this.currentSpawnInterval,_t.emit(qt.ACCELERATION_TICK,{speedMultiplier:Ht.currentSpeedMultiplier,spawnInterval:this.currentSpawnInterval,survivalTime:Ht.survivalTime})}spawnEnemy(){if(Ht.gameOver)return;const v=this._pickEnemyType(),{x,y:T,vx:F,vy:D}=this._getSpawnPosition(v),p=this.getPlayerSprite(),M=new TT(this.scene,v,x,T,F,D,p);this.enemies.push(M),_t.emit(qt.ENEMY_SPAWNED,{type:v,x,y:T})}_pickEnemyType(){const v=this.elapsedTime,x=Math.random();return v>=Ke.SINGULARITY_NODE.MIN_SPAWN_TIME&&x<.15?Fe.SINGULARITY_NODE:x<.6?Fe.DATA_STREAM:Fe.CODE_BLOCK}_getSpawnPosition(v){const x=Math.floor(Math.random()*4),T=Ke.BASE_SPEED*Ht.currentSpeedMultiplier,F=Ht.isSlowed?os.SLOW_FACTOR:1;let D,p,M,t,h;switch(v){case Fe.DATA_STREAM:h=Ke.DATA_STREAM.SPEED_MULT;break;case Fe.CODE_BLOCK:h=Ke.CODE_BLOCK.SPEED_MULT;break;case Fe.SINGULARITY_NODE:h=Ke.SINGULARITY_NODE.SPEED_MULT;break;default:h=1}const g=T*h*F,o=50;switch(x){case 0:D=Math.random()*ee.WIDTH,p=-o;break;case 1:D=ee.WIDTH+o,p=Math.random()*ee.HEIGHT;break;case 2:D=Math.random()*ee.WIDTH,p=ee.HEIGHT+o;break;case 3:D=-o,p=Math.random()*ee.HEIGHT;break}const a=this.getPlayerSprite();let r,e;v===Fe.CODE_BLOCK&&a?(r=a.x,e=a.y):(r=ee.WIDTH/2+(Math.random()-.5)*ee.WIDTH*.4,e=ee.HEIGHT/2+(Math.random()-.5)*ee.HEIGHT*.4);const n=r-D,u=e-p,s=Math.sqrt(n*n+u*u);return s>0?(M=n/s*g,t=u/s*g):(M=0,t=g),{x:D,y:p,vx:M,vy:t}}spawnFragment(){if(Ht.gameOver||this.fragments.length>=os.MAX_ON_SCREEN)return;const v=os.EDGE_MARGIN,x=v+Math.random()*(ee.WIDTH-v*2),T=v+Math.random()*(ee.HEIGHT-v*2),F=new AT(this.scene,x,T);this.fragments.push(F)}applySlowdown(){Ht.isSlowed=!0,_t.emit(qt.SLOWDOWN_START);for(const v of this.enemies)v.applySlowdown(os.SLOW_FACTOR);this._slowdownTimer&&this._slowdownTimer.remove(),this._slowdownTimer=this.scene.time.delayedCall(os.SLOW_DURATION,()=>{Ht.isSlowed=!1,_t.emit(qt.SLOWDOWN_END);for(const v of this.enemies)v.restoreSpeed()})}removeFragment(v){const x=this.fragments.indexOf(v);x!==-1&&(this.fragments.splice(x,1),v.destroy())}update(){for(const v of this.enemies)v.update();for(let v=this.enemies.length-1;v>=0;v--)this.enemies[v].isOffScreen()&&(this.enemies[v].destroy(),this.enemies.splice(v,1))}getEnemySprites(){return this.enemies.map(v=>v.sprite)}getFragmentSprites(){return this.fragments.map(v=>v.sprite)}destroy(){this.enemyTimer&&this.enemyTimer.remove(),this.fragmentTimer&&this.fragmentTimer.remove(),this.accelTimer&&this.accelTimer.remove(),this._slowdownTimer&&this._slowdownTimer.remove();for(const v of this.enemies)v.destroy();for(const v of this.fragments)v.destroy();this.enemies=[],this.fragments=[]}}class RT{constructor(){this.onAddScore=this.onAddScore.bind(this)}onAddScore(v=1){Ht.addScore(v),_t.emit(qt.SCORE_CHANGED,{score:Ht.score})}destroy(){}}class LT{constructor(v){this.scene=v,this._particleGraphics=[],this._tweens=[],this._texts=[],this._shownMilestones=new Set,this._slowdownOverlay=null,this._createParticleTextures(),this._onFragmentCollected=this._handleFragmentCollected.bind(this),this._onPlayerDied=this._handlePlayerDied.bind(this),this._onEnemySpawned=this._handleEnemySpawned.bind(this),this._onSlowdownStart=this._handleSlowdownStart.bind(this),this._onSlowdownEnd=this._handleSlowdownEnd.bind(this),this._onAccelerationTick=this._handleAccelerationTick.bind(this),_t.on(qt.FRAGMENT_COLLECTED,this._onFragmentCollected),_t.on(qt.PLAYER_DIED,this._onPlayerDied),_t.on(qt.ENEMY_SPAWNED,this._onEnemySpawned),_t.on(qt.SLOWDOWN_START,this._onSlowdownStart),_t.on(qt.SLOWDOWN_END,this._onSlowdownEnd),_t.on(qt.ACCELERATION_TICK,this._onAccelerationTick)}_createParticleTextures(){const v=this.scene,x=[{key:"particle-sm",size:Math.max(2,Math.round(2*ve))},{key:"particle-md",size:Math.max(3,Math.round(3*ve))},{key:"particle-lg",size:Math.max(4,Math.round(4*ve))}];for(const{key:T,size:F}of x){if(v.textures.exists(T))continue;const D=v.make.graphics({add:!1});D.fillStyle(16777215,1),D.fillRect(0,0,F,F),D.generateTexture(T,F,F),D.destroy()}}_handleFragmentCollected(v){if(!v)return;const{x,y:T,score:F}=v,D=Ge.FRAGMENT_COLLECT;this._burstParticles(x,T,D.COUNT,D.SPEED,D.LIFETIME,D.COLORS,D.SIZE_MIN,D.SIZE_MAX),this._showScorePop(x,T,"+1")}_handlePlayerDied(){const v=this.scene,x=v.player;if(!x||!x.sprite)return;const T=x.sprite.x,F=x.sprite.y,D=Ge.PLAYER_DEATH;v.cameras.main.flash(Ge.FLASH_DURATION,255,255,255),v.cameras.main.shake(Ge.SCREEN_SHAKE_DURATION,Ge.SCREEN_SHAKE_INTENSITY),this._burstParticles(T,F,D.COUNT,D.SPEED,D.LIFETIME,D.COLORS,D.SIZE_MIN,D.SIZE_MAX),v.time.timeScale=Ge.DEATH_SLOWMO_SCALE,v.time.delayedCall(Ge.DEATH_SLOWMO_DURATION*Ge.DEATH_SLOWMO_SCALE,()=>{v.time.timeScale=1})}_handleEnemySpawned(v){if(!v||v.x==null||v.y==null)return;const x=Ge.ENEMY_SPAWN,T=ze.Math.Clamp(v.x,0,ee.WIDTH),F=ze.Math.Clamp(v.y,0,ee.HEIGHT);this._burstParticles(T,F,x.COUNT,x.SPEED,x.LIFETIME,x.COLORS,x.SIZE,x.SIZE)}_handleSlowdownStart(){const v=this.scene,x=v.player;if(!x||!x.sprite)return;const T=x.sprite.x,F=x.sprite.y,D=Ge.SLOWDOWN_RING;for(let p=0;p<D.COUNT;p++){const M=p/D.COUNT*Math.PI*2,t=Math.cos(M)*D.SPEED,h=Math.sin(M)*D.SPEED,g=D.COLORS[p%D.COLORS.length];this._singleParticle(T,F,t,h,D.LIFETIME,g,D.SIZE)}this._slowdownOverlay||(this._slowdownOverlay=v.add.rectangle(ee.WIDTH/2,ee.HEIGHT/2,ee.WIDTH,ee.HEIGHT,Ge.SLOWDOWN_OVERLAY_COLOR,0),this._slowdownOverlay.setDepth(50)),v.tweens.add({targets:this._slowdownOverlay,alpha:Ge.SLOWDOWN_OVERLAY_ALPHA,duration:150,ease:"Sine.easeOut"})}_handleSlowdownEnd(){this._slowdownOverlay&&this.scene.tweens.add({targets:this._slowdownOverlay,alpha:0,duration:300,ease:"Sine.easeIn"})}_handleAccelerationTick(v){if(!v)return;const{speedMultiplier:x}=v,T=Ge.ACCEL_WARNING;for(const F of T.MILESTONES)if(x>=F&&!this._shownMilestones.has(F)){this._shownMilestones.add(F),this._showAccelWarning(T.LABELS[F]||`SPEED x${F}`);break}}_burstParticles(v,x,T,F,D,p,M,t){this.scene;for(let h=0;h<T;h++){const g=Math.random()*Math.PI*2,o=F*(.5+Math.random()*.5),a=Math.cos(g)*o,r=Math.sin(g)*o,e=p[Math.floor(Math.random()*p.length)],n=M+Math.random()*(t-M);this._singleParticle(v,x,a,r,D,e,n)}}_singleParticle(v,x,T,F,D,p,M){const t=this.scene,h=Math.max(1,Math.round(M)),g=t.add.rectangle(v,x,h,h,p,1);g.setDepth(100);const o=t.tweens.add({targets:g,x:v+T*(D/1e3),y:x+F*(D/1e3),alpha:0,scaleX:.2,scaleY:.2,duration:D,ease:"Quad.easeOut",onComplete:()=>{g.destroy()}});this._tweens.push(o)}_showScorePop(v,x,T){const F=this.scene,D=Ge.SCORE_POP,p=Math.round(ee.HEIGHT*D.FONT_SIZE_RATIO),M=F.add.text(v,x,T,{fontSize:p+"px",fontFamily:De.FONT,color:D.COLOR,fontStyle:"bold",shadow:{offsetX:1,offsetY:1,color:D.SHADOW_COLOR,blur:2,fill:!0}}).setOrigin(.5).setDepth(110);this._texts.push(M),F.tweens.add({targets:M,y:x-D.RISE_DISTANCE,alpha:0,duration:D.DURATION,ease:"Quad.easeOut",onComplete:()=>{M.destroy();const t=this._texts.indexOf(M);t!==-1&&this._texts.splice(t,1)}})}_showAccelWarning(v){const x=this.scene,T=Ge.ACCEL_WARNING,F=Math.round(ee.HEIGHT*T.FONT_SIZE_RATIO),D=x.add.text(ee.WIDTH/2,ee.HEIGHT/2,v,{fontSize:F+"px",fontFamily:De.FONT,color:T.COLOR,fontStyle:"bold",shadow:{offsetX:0,offsetY:2,color:"rgba(0,0,0,0.6)",blur:6,fill:!0}}).setOrigin(.5).setDepth(120).setAlpha(0);this._texts.push(D),x.tweens.add({targets:D,alpha:1,duration:100,ease:"Sine.easeIn",onComplete:()=>{x.tweens.add({targets:D,alpha:0,duration:T.DURATION-100,delay:100,ease:"Sine.easeOut",onComplete:()=>{D.destroy();const p=this._texts.indexOf(D);p!==-1&&this._texts.splice(p,1)}})}})}destroy(){_t.off(qt.FRAGMENT_COLLECTED,this._onFragmentCollected),_t.off(qt.PLAYER_DIED,this._onPlayerDied),_t.off(qt.ENEMY_SPAWNED,this._onEnemySpawned),_t.off(qt.SLOWDOWN_START,this._onSlowdownStart),_t.off(qt.SLOWDOWN_END,this._onSlowdownEnd),_t.off(qt.ACCELERATION_TICK,this._onAccelerationTick);for(const v of this._texts)v&&v.scene&&v.destroy();this._texts=[],this._slowdownOverlay&&(this._slowdownOverlay.destroy(),this._slowdownOverlay=null),this._tweens=[],this._shownMilestones.clear()}}const bT=[[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,1,1,1,1,2,2,2,2,2,1,1,2,2,2],[2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2],[2,2,2,2,2,1,1,1,1,2,2,2,1,2,2,2],[2,2,2,2,2,2,2,2,1,2,2,2,1,1,2,2],[2,2,2,2,2,2,2,2,1,1,1,1,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]],DT=[[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2],[2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2],[2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2],[2,2,2,1,1,1,2,2,2,1,2,2,2,2,2,2],[2,2,2,2,2,1,2,2,2,1,1,1,2,2,2,2],[2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]],GT=[[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,10,1,10,2,2,2,2,2,2,2],[2,2,2,2,2,10,2,1,2,10,2,2,2,2,2,2],[2,1,1,1,1,1,1,10,1,1,1,1,1,1,1,2],[2,2,2,2,2,10,2,1,2,10,2,2,2,2,2,2],[2,2,2,2,2,2,10,1,10,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]],zu=[bT,DT,GT],wT=[[0,0,0,0,0,12,0,0],[0,0,3,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,10,0],[0,0,0,0,3,0,0,0],[0,12,0,0,0,0,0,0]],BT=[[0,0,1,1,0,0],[0,1,10,10,1,0],[1,10,12,12,10,1],[1,10,12,12,10,1],[0,1,10,10,1,0],[0,0,1,1,0,0]];class XT extends ze.Scene{constructor(){super("GameScene")}create(){Ht.reset(),this.cameras.main.setBackgroundColor(qe.BG),this.isMobile=this.sys.game.device.os.android||this.sys.game.device.os.iOS||this.sys.game.device.os.iPad,this._createBackground(),this.player=new pT(this),this.scoreSystem=new RT,this.spawnSystem=new FT(this,()=>this.player.sprite),this.cursors=this.input.keyboard.createCursorKeys(),this.wasd=this.input.keyboard.addKeys({up:ze.Input.Keyboard.KeyCodes.W,left:ze.Input.Keyboard.KeyCodes.A,down:ze.Input.Keyboard.KeyCodes.S,right:ze.Input.Keyboard.KeyCodes.D}),this.pointerActive=!1,this.pointerX=0,this.pointerY=0,this.input.on("pointerdown",v=>{this.pointerActive=!0,this.pointerX=v.x,this.pointerY=v.y}),this.input.on("pointermove",v=>{v.isDown&&(this.pointerActive=!0,this.pointerX=v.x,this.pointerY=v.y)}),this.input.on("pointerup",()=>{this.pointerActive=!1}),this.particleSystem=new LT(this),this._createAmbientParticles(),this._trailPositions=[],this._trailSprites=[],this._trailTimer=0,Ht.started=!0,this.cameras.main.fadeIn(ao.FADE_DURATION,0,0,0)}_createBackground(){const v=["bg-tile-a","bg-tile-b","bg-tile-c"];for(let p=0;p<zu.length;p++)Ia(this,zu[p],fs,v[p],Ve);Ia(this,wT,fs,"decor-glitch",Ve),Ia(this,BT,fs,"decor-circuit-node",Ve);const x=16*Ve,T=Math.ceil(ee.WIDTH/x),F=Math.ceil(ee.HEIGHT/x);for(let p=0;p<F;p++)for(let M=0;M<T;M++){const t=Math.floor(Math.random()*v.length);this.add.image(M*x+x/2,p*x+x/2,v[t]).setDepth(-10)}const D=15+Math.floor(Math.random()*11);for(let p=0;p<D;p++){const t=Math.random()<.6?"decor-glitch":"decor-circuit-node",h=Math.random()*ee.WIDTH,g=Math.random()*ee.HEIGHT,o=this.add.image(h,g,t);o.setAlpha(.3+Math.random()*.2),o.setDepth(-5)}}_createAmbientParticles(){const v=Ge.AMBIENT;for(let x=0;x<v.COUNT;x++){const T=Math.random()*ee.WIDTH,F=Math.random()*ee.HEIGHT,D=v.SIZE_MIN+Math.random()*(v.SIZE_MAX-v.SIZE_MIN),p=v.COLORS[Math.floor(Math.random()*v.COLORS.length)],M=v.ALPHA_MIN+Math.random()*(v.ALPHA_MAX-v.ALPHA_MIN),t=v.SPEED_MIN+Math.random()*(v.SPEED_MAX-v.SPEED_MIN),h=this.add.rectangle(T,F,Math.max(1,Math.round(D)),Math.max(1,Math.round(D)),p,M);h.setDepth(-2);const g=Math.random()*Math.PI*2,o=Math.cos(g)*t,a=Math.sin(g)*t;this.tweens.add({targets:h,x:T+o*10,y:F+a*10,alpha:{from:M,to:M*.3},duration:8e3+Math.random()*4e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}_updatePlayerTrail(v){if(!this.player||!this.player.sprite)return;const x=Ge.PLAYER_TRAIL;for(this._trailTimer+=v,this._trailTimer>=x.UPDATE_INTERVAL&&(this._trailTimer=0,this._trailPositions.unshift({x:this.player.sprite.x,y:this.player.sprite.y}),this._trailPositions.length>x.LENGTH&&this._trailPositions.pop());this._trailSprites.length<this._trailPositions.length;){const T=this.add.rectangle(0,0,16*Ve*.6,16*Ve*.6,65535,0);T.setDepth(4),this._trailSprites.push(T)}for(let T=0;T<this._trailSprites.length;T++)if(T<this._trailPositions.length){const F=this._trailPositions[T];this._trailSprites[T].setPosition(F.x,F.y),this._trailSprites[T].setAlpha(Math.max(0,x.ALPHA_START-T*x.ALPHA_STEP)),this._trailSprites[T].setVisible(!0)}else this._trailSprites[T].setVisible(!1)}update(v,x){if(Ht.gameOver)return;let T=0,F=0;const D=this.cursors.left.isDown||this.wasd.left.isDown,p=this.cursors.right.isDown||this.wasd.right.isDown,M=this.cursors.up.isDown||this.wasd.up.isDown,t=this.cursors.down.isDown||this.wasd.down.isDown;if(D&&(T-=1),p&&(T+=1),M&&(F-=1),t&&(F+=1),this.pointerActive){const o=this.pointerX-this.player.sprite.x,a=this.pointerY-this.player.sprite.y,r=Math.sqrt(o*o+a*a),e=ys.SIZE*2;r>e?(T=o/r,F=a/r):(T=0,F=0)}this.player.update(T,F),this._updatePlayerTrail(x||16),this.spawnSystem.update();const h=this.spawnSystem.getEnemySprites();for(const o of h)if(this.physics.overlap(this.player.sprite,o)){this.triggerGameOver();return}const g=this.spawnSystem.fragments;for(let o=g.length-1;o>=0;o--){const a=g[o];this.physics.overlap(this.player.sprite,a.sprite)&&this.collectFragment(a)}}collectFragment(v){this.scoreSystem.onAddScore(1),this.spawnSystem.applySlowdown(),_t.emit(qt.FRAGMENT_COLLECTED,{x:v.sprite.x,y:v.sprite.y,score:Ht.score}),this.spawnSystem.removeFragment(v)}triggerGameOver(){Ht.gameOver||(Ht.gameOver=!0,this.player.sprite.body.setVelocity(0,0),_t.emit(qt.PLAYER_DIED),_t.emit(qt.GAME_OVER,{score:Ht.score,survivalTime:Ht.survivalTime}),this.time.delayedCall(400,()=>{this.spawnSystem.destroy(),this.scene.start("GameOverScene")}))}shutdown(){this.spawnSystem&&this.spawnSystem.destroy(),this.particleSystem&&this.particleSystem.destroy()}}class IT extends ze.Scene{constructor(){super("GameOverScene")}create(){const v=ee.WIDTH,x=ee.HEIGHT,T=v/2;this._transitioning=!1,this.drawGradient(v,x,qe.BG_TOP,qe.BG_BOTTOM);const F=Math.round(x*De.TITLE_RATIO),D=this.add.text(T,x*.18,"MELTDOWN",{fontSize:F+"px",fontFamily:De.FONT,color:"#ff3333",fontStyle:"bold",shadow:{offsetX:0,offsetY:3,color:"rgba(255,0,0,0.3)",blur:12,fill:!0}}).setOrigin(.5),p=Ge.GAMEOVER;this.time.addEvent({delay:p.GLITCH_INTERVAL,loop:!0,callback:()=>{const c=(Math.random()-.5)*2*p.GLITCH_OFFSET;D.setX(T+c),this.time.delayedCall(p.GLITCH_DURATION,()=>D.setX(T))}});const M=Math.round(x*De.SMALL_RATIO);this.add.text(T,x*.25,"Nothing human makes it out.",{fontSize:M+"px",fontFamily:De.FONT,color:qe.MUTED_TEXT,fontStyle:"italic"}).setOrigin(.5);const t=v*.65,h=x*.32,g=x*.45,o=this.add.graphics();o.fillStyle(0,.4),o.fillRoundedRect(T-t/2,g-h/2,t,h,16),o.lineStyle(2,7103487,.5),o.strokeRoundedRect(T-t/2,g-h/2,t,h,16);const a=Math.round(x*De.SMALL_RATIO);this.add.text(T,g-h*.32,"FRAGMENTS SAVED",{fontSize:a+"px",fontFamily:De.FONT,color:qe.MUTED_TEXT,letterSpacing:4}).setOrigin(.5);const r=Math.round(x*De.HEADING_RATIO*1.3),e=Ht.score,n=this.add.text(T,g-h*.12,"0",{fontSize:r+"px",fontFamily:De.FONT,color:qe.SCORE_GOLD,fontStyle:"bold"}).setOrigin(.5);n.setScale(0),this.tweens.add({targets:n,scaleX:1,scaleY:1,duration:400,delay:200,ease:"Back.easeOut",onComplete:()=>{if(e>0){const c={val:0};this.tweens.add({targets:c,val:e,duration:Ge.GAMEOVER.SCORE_COUNTUP_DURATION,ease:"Quad.easeOut",onUpdate:()=>{n.setText(`${Math.round(c.val)}`)}})}}});const u=Math.floor(Ht.survivalTime),s=Math.round(x*De.BODY_RATIO);this.add.text(T,g+h*.1,`Survived: ${u}s`,{fontSize:s+"px",fontFamily:De.FONT,color:qe.SURVIVAL_TEXT}).setOrigin(.5);const l=Math.round(x*De.SMALL_RATIO);this.add.text(T,g+h*.32,`Best: ${Ht.bestScore}`,{fontSize:l+"px",fontFamily:De.FONT,color:qe.MUTED_TEXT}).setOrigin(.5),this.createButton(T,x*.72,"PLAY AGAIN",()=>this.restartGame()),this.input.keyboard.once("keydown-SPACE",()=>this.restartGame()),this.cameras.main.fadeIn(ao.FADE_DURATION,0,0,0)}restartGame(){this._transitioning||(this._transitioning=!0,_t.emit(qt.GAME_RESTART),this.cameras.main.fadeOut(ao.FADE_DURATION,0,0,0),this.cameras.main.once("camerafadeoutcomplete",()=>{this.scene.start("GameScene")}))}drawGradient(v,x,T,F){const D=this.add.graphics(),p=ze.Display.Color.IntegerToColor(T),M=ze.Display.Color.IntegerToColor(F),t=64,h=Math.ceil(x/t);for(let g=0;g<t;g++){const o=g/(t-1),a=Math.round(p.red+(M.red-p.red)*o),r=Math.round(p.green+(M.green-p.green)*o),e=Math.round(p.blue+(M.blue-p.blue)*o);D.fillStyle(ze.Display.Color.GetColor(a,r,e)),D.fillRect(0,g*h,v,h+1)}}createButton(v,x,T,F){const D=Math.max(ee.WIDTH*De.BTN_W_RATIO,160),p=Math.max(ee.HEIGHT*De.BTN_H_RATIO,De.MIN_TOUCH),M=De.BTN_RADIUS,t=this.add.container(v,x),h=this.add.graphics();this.fillBtn(h,D,p,M,qe.BTN_PRIMARY),t.add(h);const g=Math.round(ee.HEIGHT*De.BODY_RATIO),o=this.add.text(0,0,T,{fontSize:g+"px",fontFamily:De.FONT,color:qe.BTN_TEXT,fontStyle:"bold"}).setOrigin(.5);return t.add(o),t.setSize(D,p),t.setInteractive({useHandCursor:!0}),t.on("pointerover",()=>{this.fillBtn(h,D,p,M,qe.BTN_PRIMARY_HOVER),this.tweens.add({targets:t,scaleX:1.05,scaleY:1.05,duration:80})}),t.on("pointerout",()=>{this.fillBtn(h,D,p,M,qe.BTN_PRIMARY),this.tweens.add({targets:t,scaleX:1,scaleY:1,duration:80})}),t.on("pointerdown",()=>{this.fillBtn(h,D,p,M,qe.BTN_PRIMARY_PRESS),t.setScale(.95)}),t.on("pointerup",()=>{t.setScale(1),F()}),t}fillBtn(v,x,T,F,D){v.clear(),v.fillStyle(D,1),v.fillRoundedRect(-x/2,-T/2,x,T,F)}}const OT={type:ze.AUTO,width:ee.WIDTH,height:ee.HEIGHT,parent:"game-container",backgroundColor:qe.BG,roundPixels:!0,antialias:!0,render:{preserveDrawingBuffer:!0},scale:{mode:ze.Scale.FIT,autoCenter:ze.Scale.CENTER_BOTH,zoom:1/Uo},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[hT,XT,IT]},Ho="strudel.log";let NT=1e3,Wu,Yu;function Jn(i,v="cyclist"){Ie(`[${v}] error: ${i.message}`)}function Ie(i,v,x={}){let T=performance.now();Wu===i&&T-Yu<NT||(Wu=i,Yu=T,console.log(`%c${i}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(Ho,{detail:{message:i,type:v,data:x}})))}Ie.key=Ho;typeof BigInt>"u"&&(BigInt=function(i){if(isNaN(i))throw new Error("");return i});const Wt=BigInt(0),Qt=BigInt(1),Bn=BigInt(2),oo=BigInt(5),_e=BigInt(10),VT=2e3,Rt={s:Qt,n:Wt,d:Qt};function Ki(i,v){try{i=BigInt(i)}catch{throw rs()}return i*v}function xi(i){return typeof i=="bigint"?i:Math.floor(i)}function Te(i,v){if(v===Wt)throw Ko();const x=Object.create(Me.prototype);x.s=i<Wt?-Qt:Qt,i=i<Wt?-i:i;const T=Ms(i,v);return x.n=i/T,x.d=v/T,x}function Zs(i){const v={};let x=i,T=Bn,F=oo-Qt;for(;F<=x;){for(;x%T===Wt;)x/=T,v[T]=(v[T]||Wt)+Qt;F+=Qt+Bn*T++}return x!==i?x>1&&(v[x]=(v[x]||Wt)+Qt):v[i]=(v[i]||Wt)+Qt,v}const Be=function(i,v){let x=Wt,T=Qt,F=Qt;if(i!=null)if(v!==void 0){if(typeof i=="bigint")x=i;else{if(isNaN(i))throw rs();if(i%1!==0)throw Zu();x=BigInt(i)}if(typeof v=="bigint")T=v;else{if(isNaN(v))throw rs();if(v%1!==0)throw Zu();T=BigInt(v)}F=x*T}else if(typeof i=="object"){if("d"in i&&"n"in i)x=BigInt(i.n),T=BigInt(i.d),"s"in i&&(x*=BigInt(i.s));else if(0 in i)x=BigInt(i[0]),1 in i&&(T=BigInt(i[1]));else if(typeof i=="bigint")x=i;else throw rs();F=x*T}else if(typeof i=="number"){if(isNaN(i))throw rs();if(i<0&&(F=-Qt,i=-i),i%1===0)x=BigInt(i);else if(i>0){let D=1,p=0,M=1,t=1,h=1,g=1e7;for(i>=1&&(D=10**Math.floor(1+Math.log10(i)),i/=D);M<=g&&h<=g;){let o=(p+t)/(M+h);if(i===o){M+h<=g?(x=p+t,T=M+h):h>M?(x=t,T=h):(x=p,T=M);break}else i>o?(p+=t,M+=h):(t+=p,h+=M),M>g?(x=t,T=h):(x=p,T=M)}x=BigInt(x)*BigInt(D),T=BigInt(T)}}else if(typeof i=="string"){let D=0,p=Wt,M=Wt,t=Wt,h=Qt,g=Qt,o=i.replace(/_/g,"").match(/\d+|./g);if(o===null)throw rs();if(o[D]==="-"?(F=-Qt,D++):o[D]==="+"&&D++,o.length===D+1?M=Ki(o[D++],F):o[D+1]==="."||o[D]==="."?(o[D]!=="."&&(p=Ki(o[D++],F)),D++,(D+1===o.length||o[D+1]==="("&&o[D+3]===")"||o[D+1]==="'"&&o[D+3]==="'")&&(M=Ki(o[D],F),h=_e**BigInt(o[D].length),D++),(o[D]==="("&&o[D+2]===")"||o[D]==="'"&&o[D+2]==="'")&&(t=Ki(o[D+1],F),g=_e**BigInt(o[D+1].length)-Qt,D+=3)):o[D+1]==="/"||o[D+1]===":"?(M=Ki(o[D],F),h=Ki(o[D+2],Qt),D+=3):o[D+3]==="/"&&o[D+1]===" "&&(p=Ki(o[D],F),M=Ki(o[D+2],F),h=Ki(o[D+4],Qt),D+=5),o.length<=D)T=h*g,F=x=t+T*p+g*M;else throw rs()}else if(typeof i=="bigint")x=i,F=i,T=Qt;else throw rs();if(T===Wt)throw Ko();Rt.s=F<Wt?-Qt:Qt,Rt.n=x<Wt?-x:x,Rt.d=T<Wt?-T:T};function zT(i,v,x){let T=Qt;for(;v>Wt;i=i*i%x,v>>=Qt)v&Qt&&(T=T*i%x);return T}function WT(i,v){for(;v%Bn===Wt;v/=Bn);for(;v%oo===Wt;v/=oo);if(v===Qt)return Wt;let x=_e%v,T=1;for(;x!==Qt;T++)if(x=x*_e%v,T>VT)return Wt;return BigInt(T)}function YT(i,v,x){let T=Qt,F=zT(_e,x,v);for(let D=0;D<300;D++){if(T===F)return BigInt(D);T=T*_e%v,F=F*_e%v}return 0}function Ms(i,v){if(!i)return v;if(!v)return i;for(;;){if(i%=v,!i)return v;if(v%=i,!v)return i}}function Me(i,v){if(Be(i,v),this instanceof Me)i=Ms(Rt.d,Rt.n),this.s=Rt.s,this.n=Rt.n/i,this.d=Rt.d/i;else return Te(Rt.s*Rt.n,Rt.d)}var Ko=function(){return new Error("Division by Zero")},rs=function(){return new Error("Invalid argument")},Zu=function(){return new Error("Parameters must be integer")};Me.prototype={s:Qt,n:Wt,d:Qt,abs:function(){return Te(this.n,this.d)},neg:function(){return Te(-this.s*this.n,this.d)},add:function(i,v){return Be(i,v),Te(this.s*this.n*Rt.d+Rt.s*this.d*Rt.n,this.d*Rt.d)},sub:function(i,v){return Be(i,v),Te(this.s*this.n*Rt.d-Rt.s*this.d*Rt.n,this.d*Rt.d)},mul:function(i,v){return Be(i,v),Te(this.s*Rt.s*this.n*Rt.n,this.d*Rt.d)},div:function(i,v){return Be(i,v),Te(this.s*Rt.s*this.n*Rt.d,this.d*Rt.n)},clone:function(){return Te(this.s*this.n,this.d)},mod:function(i,v){if(i===void 0)return Te(this.s*this.n%this.d,Qt);if(Be(i,v),Wt===Rt.n*this.d)throw Ko();return Te(this.s*(Rt.d*this.n)%(Rt.n*this.d),Rt.d*this.d)},gcd:function(i,v){return Be(i,v),Te(Ms(Rt.n,this.n)*Ms(Rt.d,this.d),Rt.d*this.d)},lcm:function(i,v){return Be(i,v),Rt.n===Wt&&this.n===Wt?Te(Wt,Qt):Te(Rt.n*this.n,Ms(Rt.n,this.n)*Ms(Rt.d,this.d))},inverse:function(){return Te(this.s*this.d,this.n)},pow:function(i,v){if(Be(i,v),Rt.d===Qt)return Rt.s<Wt?Te((this.s*this.d)**Rt.n,this.n**Rt.n):Te((this.s*this.n)**Rt.n,this.d**Rt.n);if(this.s<Wt)return null;let x=Zs(this.n),T=Zs(this.d),F=Qt,D=Qt;for(let p in x)if(p!=="1"){if(p==="0"){F=Wt;break}if(x[p]*=Rt.n,x[p]%Rt.d===Wt)x[p]/=Rt.d;else return null;F*=BigInt(p)**x[p]}for(let p in T)if(p!=="1"){if(T[p]*=Rt.n,T[p]%Rt.d===Wt)T[p]/=Rt.d;else return null;D*=BigInt(p)**T[p]}return Rt.s<Wt?Te(D,F):Te(F,D)},log:function(i,v){if(Be(i,v),this.s<=Wt||Rt.s<=Wt)return null;const x={},T=Zs(Rt.n),F=Zs(Rt.d),D=Zs(this.n),p=Zs(this.d);for(const h in F)T[h]=(T[h]||Wt)-F[h];for(const h in p)D[h]=(D[h]||Wt)-p[h];for(const h in T)h!=="1"&&(x[h]=!0);for(const h in D)h!=="1"&&(x[h]=!0);let M=null,t=null;for(const h in x){const g=T[h]||Wt,o=D[h]||Wt;if(g===Wt){if(o!==Wt)return null;continue}let a=o,r=g;const e=Ms(a,r);if(a/=e,r/=e,M===null&&t===null)M=a,t=r;else if(a*t!==M*r)return null}return M!==null&&t!==null?Te(M,t):null},equals:function(i,v){return Be(i,v),this.s*this.n*Rt.d===Rt.s*Rt.n*this.d},lt:function(i,v){return Be(i,v),this.s*this.n*Rt.d<Rt.s*Rt.n*this.d},lte:function(i,v){return Be(i,v),this.s*this.n*Rt.d<=Rt.s*Rt.n*this.d},gt:function(i,v){return Be(i,v),this.s*this.n*Rt.d>Rt.s*Rt.n*this.d},gte:function(i,v){return Be(i,v),this.s*this.n*Rt.d>=Rt.s*Rt.n*this.d},compare:function(i,v){Be(i,v);let x=this.s*this.n*Rt.d-Rt.s*Rt.n*this.d;return(Wt<x)-(x<Wt)},ceil:function(i){return i=_e**BigInt(i||0),Te(xi(this.s*i*this.n/this.d)+(i*this.n%this.d>Wt&&this.s>=Wt?Qt:Wt),i)},floor:function(i){return i=_e**BigInt(i||0),Te(xi(this.s*i*this.n/this.d)-(i*this.n%this.d>Wt&&this.s<Wt?Qt:Wt),i)},round:function(i){return i=_e**BigInt(i||0),Te(xi(this.s*i*this.n/this.d)+this.s*((this.s>=Wt?Qt:Wt)+Bn*(i*this.n%this.d)>this.d?Qt:Wt),i)},roundTo:function(i,v){Be(i,v);const x=this.n*Rt.d,T=this.d*Rt.n,F=x%T;let D=xi(x/T);return F+F>=T&&D++,Te(this.s*D*Rt.n,Rt.d)},divisible:function(i,v){return Be(i,v),!(!(Rt.n*this.d)||this.n*Rt.d%(Rt.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(i){let v=this.n,x=this.d;i=i||15;let T=WT(v,x),F=YT(v,x,T),D=this.s<Wt?"-":"";if(D+=xi(v/x),v%=x,v*=_e,v&&(D+="."),T){for(let p=F;p--;)D+=xi(v/x),v%=x,v*=_e;D+="(";for(let p=T;p--;)D+=xi(v/x),v%=x,v*=_e;D+=")"}else for(let p=i;v&&p--;)D+=xi(v/x),v%=x,v*=_e;return D},toFraction:function(i){let v=this.n,x=this.d,T=this.s<Wt?"-":"";if(x===Qt)T+=v;else{let F=xi(v/x);i&&F>Wt&&(T+=F,T+=" ",v%=x),T+=v,T+="/",T+=x}return T},toLatex:function(i){let v=this.n,x=this.d,T=this.s<Wt?"-":"";if(x===Qt)T+=v;else{let F=xi(v/x);i&&F>Wt&&(T+=F,v%=x),T+="\\frac{",T+=v,T+="}{",T+=x,T+="}"}return T},toContinued:function(){let i=this.n,v=this.d,x=[];do{x.push(xi(i/v));let T=i%v;i=v,v=T}while(i!==Qt);return x},simplify:function(i){const v=BigInt(1/(i||.001)|0),x=this.abs(),T=x.toContinued();for(let F=1;F<T.length;F++){let D=Te(T[F-1],Qt);for(let M=F-2;M>=0;M--)D=D.inverse().add(T[M]);let p=D.sub(x);if(p.n*v<p.d)return D.mul(this.s)}return this}};const ZT=i=>/^[a-gA-G][#bsf]*[0-9]*$/.test(i),Ds=i=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(i),Ff=i=>{if(typeof i!="string")return[];const[v,x="",T]=i.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return v?[v,x,T?Number(T):void 0]:[]},UT={c:0,d:2,e:4,f:5,g:7,a:9,b:11},HT={"#":1,b:-1,s:1,f:-1},Jo=i=>i?.split("").reduce((v,x)=>v+HT[x],0)||0,wi=(i,v=3)=>{const[x,T,F=v]=Ff(i);if(!x)throw new Error('not a note: "'+i+'"');const D=UT[x.toLowerCase()],p=Jo(T);return(Number(F)+1)*12+D+p},js=i=>Math.pow(2,(i-69)/12)*440,ko=i=>12*Math.log(i/440)/Math.LN2+69,KT=(i,v)=>{if(typeof i!="object")throw new Error("valueToMidi: expected object value");let{freq:x,note:T}=i;if(typeof x=="number")return ko(x);if(typeof T=="string")return wi(T);if(typeof T=="number")return T;if(!v)throw new Error("valueToMidi: expected freq or note to be set");return v},JT=(i,v)=>(i-v)*1e3,Rf=i=>js(typeof i=="number"?i:wi(i)),kT=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],jT=i=>{const v=Math.floor(i/12)-1;return kT[i%12]+v},di=(i,v)=>(i%v+v)%v,Lf=i=>i.reduce((v,x)=>v+x)/i.length;function bf(i,v=0){return isNaN(Number(i))?(Ie(`"${i}" is not a number, falling back to ${v}`,"warning"),v):i}const QT=(i,v)=>di(Math.round(bf(i??0,0)),v),$T=i=>{let{value:v,context:x}=i,T=v;if(typeof T=="object"&&!Array.isArray(T)&&(T=T.note||T.n||T.value,T===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(v)}`);if(typeof T=="number"&&x.type!=="frequency")T=js(i.value);else if(typeof T=="number"&&x.type==="frequency")T=i.value;else if(typeof T!="string"||!Ds(T))throw new Error("not a note: "+JSON.stringify(T));return T},Df=i=>{let{value:v,context:x}=i;if(typeof v=="object")return v.freq?v.freq:Rf(v.note||v.n||v.value);if(typeof v=="number"&&x.type!=="frequency")v=js(i.value);else if(typeof v=="string"&&Ds(v))v=js(wi(i.value));else if(typeof v!="number")throw new Error("not a note or frequency: "+v);return v},Gf=(i,v)=>i.slice(v).concat(i.slice(0,v)),wf=(...i)=>i.reduce((v,x)=>(...T)=>v(x(...T)),v=>v),qT=(...i)=>wf(...i.reverse()),Gs=i=>i.filter(v=>v!=null),ki=i=>[].concat(...i),Hs=i=>i,_T=(i,v)=>i,kn=(i,v)=>Array.from({length:v-i+1},(x,T)=>T+i);function $t(i,v,x=i.length){const T=function F(...D){if(D.length>=x)return i.apply(this,D);{const p=function(...M){return F.apply(this,D.concat(M))};return v&&v(p,D),p}};return v&&v(T,[]),T}function jo(i){const v=Number(i);if(!isNaN(v))return v;if(Ds(i))return wi(i);throw new Error(`cannot parse as numeral: "${i}"`)}function Qo(i,v){return(...x)=>i(...x.map(v))}function ii(i){return Qo(i,jo)}function Bf(i){const v=Number(i);if(!isNaN(v))return v;const x={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[i];if(typeof x<"u")return x;throw new Error(`cannot parse as fractional: "${i}"`)}const t5=i=>Qo(i,Bf),$o=function(i,v){return[v.slice(0,i),v.slice(i)]},Ur=(i,v,x)=>v.map((T,F)=>i(T,x[F])),Xf=function(i){const v=[];for(let x=0;x<i.length-1;++x)v.push([i[x],i[x+1]]);return v},Hr=(i,v,x)=>Math.min(Math.max(i,v),x),e5=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],i5=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],s5=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],n5=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],r5=["I","Ro","Ha","Ni","Ho","He","To"],a5=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],o5=(i,v="letters")=>{const x=(v==="solfeggio"?e5:v==="indian"?i5:v==="german"?s5:v==="byzantine"?n5:v==="japanese"?r5:a5)[i%12],T=Math.floor(i/12)-1;return x+T};function h5(i){var v={};return i.filter(function(x){return v.hasOwn(x)?!1:v[x]=!0})}function u5(i){return i.sort().filter(function(v,x,T){return!x||v!=T[x-1]})}function If(i){return i.sort((v,x)=>v.compare(x)).filter(function(v,x,T){return!x||v.ne(T[x-1])})}function Of(i){const v=new TextEncoder().encode(i);return btoa(String.fromCharCode(...v))}function Nf(i){const v=new Uint8Array(atob(i).split("").map(x=>x.charCodeAt(0)));return new TextDecoder().decode(v)}function l5(i){return encodeURIComponent(Of(i))}function f5(i){return Nf(decodeURIComponent(i))}function Vf(i,v){return Array.isArray(i)?i.map(v):Object.fromEntries(Object.entries(i).map(([x,T],F)=>[x,v(T,x,F)]))}function ho(i,v){return i/v}class zf{constructor({getTargetClockTime:v=c5,weight:x=16,offsetDelta:T=.005,checkAfterTime:F=2,resetAfterTime:D=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=v,this.weight=x,this.offsetDelta=T,this.checkAfterTime=F,this.resetAfterTime=D,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(v){const x=this.getTargetClockTime(),T=x-this.timeAtPrevOffsetSample,F=x-v;if(T>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=F),this.prevOffsetTimes.push(F),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||T>this.checkAfterTime){this.timeAtPrevOffsetSample=x;const D=Lf(this.prevOffsetTimes);Math.abs(D-this.offsetTime)>this.offsetDelta&&(this.offsetTime=D)}return this.offsetTime}calculateTimestamp(v,x){return this.calculateOffset(v)+x}}function d5(){return performance.now()*.001}function c5(){return Date.now()*.001}const Wf=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let xn;function Yf(){if(xn==null){if(typeof window>"u")return;xn={},window.addEventListener("keydown",i=>{xn[i.key]=!0}),window.addEventListener("keyup",i=>{xn[i.key]=!1})}return{...xn}}function qo(i,v=!1){return typeof i=="object"?v?JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(i):i}Me.prototype.sam=function(){return this.floor()};Me.prototype.nextSam=function(){return this.sam().add(1)};Me.prototype.wholeCycle=function(){return new Re(this.sam(),this.nextSam())};Me.prototype.cyclePos=function(){return this.sub(this.sam())};Me.prototype.lt=function(i){return this.compare(i)<0};Me.prototype.gt=function(i){return this.compare(i)>0};Me.prototype.lte=function(i){return this.compare(i)<=0};Me.prototype.gte=function(i){return this.compare(i)>=0};Me.prototype.eq=function(i){return this.compare(i)==0};Me.prototype.ne=function(i){return this.compare(i)!=0};Me.prototype.max=function(i){return this.gt(i)?this:i};Me.prototype.maximum=function(...i){return i=i.map(v=>new Me(v)),i.reduce((v,x)=>x.max(v),this)};Me.prototype.min=function(i){return this.lt(i)?this:i};Me.prototype.mulmaybe=function(i){return i!==void 0?this.mul(i):void 0};Me.prototype.divmaybe=function(i){return i!==void 0?this.div(i):void 0};Me.prototype.addmaybe=function(i){return i!==void 0?this.add(i):void 0};Me.prototype.submaybe=function(i){return i!==void 0?this.sub(i):void 0};Me.prototype.show=function(){return this.s*this.n+"/"+this.d};Me.prototype.or=function(i){return this.eq(0)?i:this};const St=i=>Me(i),p5=(...i)=>{if(i=Gs(i),i.length!==0)return i.reduce((v,x)=>v.gcd(x),St(1))},Ti=(...i)=>{if(i=Gs(i),i.length===0)return;const v=i.pop();return i.reduce((x,T)=>x===void 0||T===void 0?void 0:x.lcm(T),v)},v5=i=>i instanceof Me;St._original=Me;class Re{constructor(v,x){this.begin=St(v),this.end=St(x)}get spanCycles(){const v=[];var x=this.begin;const T=this.end,F=T.sam();if(x.equals(T))return[new Re(x,T)];for(;T.gt(x);){if(x.sam().equals(F)){v.push(new Re(x,this.end));break}const D=x.nextSam();v.push(new Re(x,D)),x=D}return v}get duration(){return this.end.sub(this.begin)}cycleArc(){const v=this.begin.cyclePos(),x=v.add(this.duration);return new Re(v,x)}withTime(v){return new Re(v(this.begin),v(this.end))}withEnd(v){return new Re(this.begin,v(this.end))}withCycle(v){const x=this.begin.sam(),T=x.add(v(this.begin.sub(x))),F=x.add(v(this.end.sub(x)));return new Re(T,F)}intersection(v){const x=this.begin.max(v.begin),T=this.end.min(v.end);if(!x.gt(T)&&!(x.equals(T)&&(x.equals(this.end)&&this.begin.lt(this.end)||x.equals(v.end)&&v.begin.lt(v.end))))return new Re(x,T)}intersection_e(v){const x=this.intersection(v);if(x==null)throw"TimeSpans do not intersect";return x}midpoint(){return this.begin.add(this.duration.div(St(2)))}equals(v){return this.begin.equals(v.begin)&&this.end.equals(v.end)}show(){return this.begin.show()+"  "+this.end.show()}}class Ce{constructor(v,x,T,F={},D=!1){this.whole=v,this.part=x,this.value=T,this.context=F,this.stateful=D,D&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let v;return typeof this.value?.duration=="number"?v=St(this.value.duration):v=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?v.mul(this.value.clip):v}get endClipped(){return this.whole.begin.add(this.duration)}isActive(v){return this.whole.begin<=v&&this.endClipped>=v}isInPast(v){return v>this.endClipped}isInNearPast(v,x){return x-v<=this.endClipped}isInFuture(v){return v<this.whole.begin}isInNearFuture(v,x){return x<this.whole.begin&&x>this.whole.begin-v}isWithinTime(v,x){return this.whole.begin<=x&&this.endClipped>=v}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(v){const x=this.whole?v(this.whole):void 0;return new Ce(x,v(this.part),this.value,this.context)}withValue(v){return new Ce(this.whole,this.part,v(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(v){return this.context.tags?.includes(v)}resolveState(v){if(this.stateful&&this.hasOnset()){console.log("stateful");const x=this.value,[T,F]=x(v);return[T,new Ce(this.whole,this.part,F,this.context,!1)]}return[v,this]}spanEquals(v){return this.whole==null&&v.whole==null||this.whole.equals(v.whole)}equals(v){return this.spanEquals(v)&&this.part.equals(v.part)&&this.value===v.value}show(v=!1){const x=typeof this.value=="object"?v?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var T="";if(this.whole==null)T="~"+this.part.show;else{var F=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(T=this.whole.begin.show()+"  "),F||(T+="("),T+=this.part.show(),F||(T+=")"),this.whole.end.equals(this.part.end)||(T+="  "+this.whole.end.show())}return"[ "+T+" | "+x+" ]"}showWhole(v=!1){return`${this.whole==null?"~":this.whole.show()}: ${qo(this.value,v)}`}combineContext(v){const x=this;return{...x.context,...v.context,locations:(x.context.locations||[]).concat(v.context.locations||[])}}setContext(v){return new Ce(this.whole,this.part,this.value,v)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class Qs{constructor(v,x={}){this.span=v,this.controls=x}setSpan(v){return new Qs(v,this.controls)}withSpan(v){return this.setSpan(v(this.span))}setControls(v){return new Qs(this.span,{...this.controls,...v})}}function m5(i,v,x){if(v?.value!==void 0&&Object.keys(v).length===1)return Ie("[warn]: Can't do arithmetic on control pattern."),i;const T=Object.keys(i).filter(F=>Object.keys(v).includes(F));return Object.assign({},i,v,Object.fromEntries(T.map(F=>[F,x(i[F],v[F])])))}$t((i,v)=>i*v);$t((i,v)=>v.map(i));function Zf(i,v=60){let x=0,T=St(0),F=[""],D="";for(;F[0].length<v;){const p=i.queryArc(x,x+1),M=p.filter(g=>g.hasOnset()).map(g=>g.duration),t=p5(...M),h=t.inverse();F=F.map(g=>g+"|"),D+="|";for(let g=0;g<h;g++){const[o,a]=[T,T.add(t)],r=p.filter(n=>n.whole.begin.lte(o)&&n.whole.end.gte(a)),e=r.length-F.length;e>0&&(F=F.concat(Array(e).fill(D))),F=F.map((n,u)=>{const s=r[u];if(s){const l=s.whole.begin.eq(o)?""+s.value:"-";return n+l}return n+"."}),D+=".",T=T.add(t)}x++}return F.join(`
`)}const _o={},br=async(...i)=>{const v=await Promise.allSettled(i),x=v.filter(T=>T.status==="fulfilled").map(T=>T.value);return v.forEach((T,F)=>{T.status==="rejected"&&console.warn(`evalScope: module with index ${F} could not be loaded:`,T.reason)}),x.forEach(T=>{Object.entries(T).forEach(([F,D])=>{globalThis[F]=D,_o[F]=D})}),x};function g5(i,v={}){const{wrapExpression:x=!0,wrapAsync:T=!0}=v;x&&(i=`{${i}}`),T&&(i=`(async ()=>${i})()`);const F=`"use strict";return (${i})`;return Function(F)()}const Uf=async(i,v,x)=>{let T={};if(v){const F=v(i,x);i=F.output,T=F}return{mode:"javascript",pattern:await g5(i,{wrapExpression:!!v}),meta:T}};let uo,ri=!0;const x5=function(i){ri=!!i},Hf=i=>uo=i;let xt=class Xe{constructor(v,x=void 0){this.query=v,this._Pattern=!0,this._steps=x}get _steps(){return this.__steps}set _steps(v){this.__steps=v===void 0?void 0:St(v)}setSteps(v){return this._steps=v,this}withSteps(v){return ri?new Xe(this.query,this._steps===void 0?void 0:v(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(v){const x=new Xe(T=>this.query(T).map(F=>F.withValue(v)));return x._steps=this._steps,x}withState(v){return new Xe(x=>this.query(v(x)))}fmap(v){return this.withValue(v)}appWhole(v,x){const T=this,F=function(D){const p=T.query(D),M=x.query(D),t=function(h,g){const o=h.part.intersection(g.part);if(o!=null)return new Ce(v(h.whole,g.whole),o,h.value(g.value),g.combineContext(h))};return ki(p.map(h=>Gs(M.map(g=>t(h,g)))))};return new Xe(F)}appBoth(v){const x=this,T=function(D,p){if(!(D==null||p==null))return D.intersection_e(p)},F=x.appWhole(T,v);return ri&&(F._steps=Ti(v._steps,x._steps)),F}appLeft(v){const x=this,T=function(D){const p=[];for(const M of x.query(D)){const t=v.query(D.setSpan(M.wholeOrPart()));for(const h of t){const g=M.whole,o=M.part.intersection(h.part);if(o){const a=M.value(h.value),r=h.combineContext(M),e=new Ce(g,o,a,r);p.push(e)}}}return p},F=new Xe(T);return F._steps=this._steps,F}appRight(v){const x=this,T=function(D){const p=[];for(const M of v.query(D)){const t=x.query(D.setSpan(M.wholeOrPart()));for(const h of t){const g=M.whole,o=h.part.intersection(M.part);if(o){const a=h.value(M.value),r=M.combineContext(h),e=new Ce(g,o,a,r);p.push(e)}}}return p},F=new Xe(T);return F._steps=v._steps,F}bindWhole(v,x){const T=this,F=function(D){const p=function(t,h){return new Ce(v(t.whole,h.whole),h.part,h.value,Object.assign({},t.context,h.context,{locations:(t.context.locations||[]).concat(h.context.locations||[])}))},M=function(t){return x(t.value).query(D.setSpan(t.part)).map(h=>p(t,h))};return ki(T.query(D).map(t=>M(t)))};return new Xe(F)}bind(v){const x=function(T,F){if(!(T==null||F==null))return T.intersection_e(F)};return this.bindWhole(x,v)}join(){return this.bind(Hs)}outerBind(v){return this.bindWhole(x=>x,v).setSteps(this._steps)}outerJoin(){return this.outerBind(Hs)}innerBind(v){return this.bindWhole((x,T)=>T,v)}innerJoin(){return this.innerBind(Hs)}resetJoin(v=!1){const x=this;return new Xe(T=>x.discreteOnly().query(T).map(F=>F.value.late(v?F.whole.begin:F.whole.begin.cyclePos()).query(T).map(D=>new Ce(D.whole?D.whole.intersection(F.whole):void 0,D.part.intersection(F.part),D.value).setContext(F.combineContext(D))).filter(D=>D.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const v=this;function x(T){const F=v.discreteOnly().query(T);function D(p){const M=p.value._focusSpan(p.wholeOrPart()).query(T.setSpan(p.part));function t(h,g){let o;if(g.whole&&h.whole&&(o=g.whole.intersection(h.whole),!o))return;const a=g.part.intersection(h.part);if(!a)return;const r=g.combineContext(h);return new Ce(o,a,g.value,r)}return M.map(h=>t(p,h))}return ki(F.map(D)).filter(p=>p)}return new Xe(x)}squeezeBind(v){return this.fmap(v).squeezeJoin()}polyJoin=function(){const v=this;return v.fmap(x=>x.extend(v._steps.div(x._steps))).outerJoin()};polyBind(v){return this.fmap(v).polyJoin()}queryArc(v,x,T={}){try{return this.query(new Qs(new Re(v,x),T))}catch(F){return Jn(F,"query"),[]}}splitQueries(){const v=this,x=T=>ki(T.span.spanCycles.map(F=>v.query(T.setSpan(F))));return new Xe(x)}withQuerySpan(v){return new Xe(x=>this.query(x.withSpan(v)))}withQuerySpanMaybe(v){const x=this;return new Xe(T=>{const F=T.withSpan(v);return F.span?x.query(F):[]})}withQueryTime(v){return new Xe(x=>this.query(x.withSpan(T=>T.withTime(v))))}withHapSpan(v){return new Xe(x=>this.query(x).map(T=>T.withSpan(v)))}withHapTime(v){return this.withHapSpan(x=>x.withTime(v))}withHaps(v){const x=new Xe(T=>v(this.query(T),T));return x._steps=this._steps,x}withHap(v){return this.withHaps(x=>x.map(v))}setContext(v){return this.withHap(x=>x.setContext(v))}withContext(v){const x=this.withHap(T=>T.setContext(v(T.context)));return this.__pure!==void 0&&(x.__pure=this.__pure,x.__pure_loc=this.__pure_loc),x}stripContext(){return this.withHap(v=>v.setContext({}))}withLoc(v,x){const T={start:v,end:x},F=this.withContext(D=>{const p=(D.locations||[]).concat([T]);return{...D,locations:p}});return this.__pure&&(F.__pure=this.__pure,F.__pure_loc=T),F}filterHaps(v){return new Xe(x=>this.query(x).filter(v))}filterValues(v){return new Xe(x=>this.query(x).filter(T=>v(T.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(v=>v!=null)}onsetsOnly(){return this.filterHaps(v=>v.hasOnset())}discreteOnly(){return this.filterHaps(v=>v.whole)}defragmentHaps(){return this.discreteOnly().withHaps(v=>{const x=[];for(var T=0;T<v.length;++T){for(var F=!0,D=v[T];F;){const t=JSON.stringify(v[T].value);for(var p=!1,M=T+1;M<v.length;M++){const h=v[M];if(D.whole.equals(h.whole)){if(D.part.begin.eq(h.part.end)){if(t===JSON.stringify(h.value)){D=new Ce(D.whole,new Re(h.part.begin,D.part.end),D.value),v.splice(M,1),p=!0;break}}else if(h.part.begin.eq(D.part.end)&&t==JSON.stringify(h.value)){D=new Ce(D.whole,new Re(D.part.begin,h.part.end),D.value),v.splice(M,1),p=!0;break}}}F=p}x.push(D)}return x})}firstCycle(v=!1){var x=this;return v||(x=x.stripContext()),x.query(new Qs(new Re(St(0),St(1))))}get firstCycleValues(){return this.firstCycle().map(v=>v.value)}get showFirstCycle(){return this.firstCycle().map(v=>`${v.value}: ${v.whole.begin.toFraction()} - ${v.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(v=>v.sort((x,T)=>x.part.begin.sub(T.part.begin).or(x.part.end.sub(T.part.end)).or(x.whole.begin.sub(T.whole.begin).or(x.whole.end.sub(T.whole.end)))))}asNumber(){return this.fmap(jo)}_opIn(v,x){return this.fmap(x).appLeft(Ct(v))}_opOut(v,x){return this.fmap(x).appRight(Ct(v))}_opMix(v,x){return this.fmap(x).appBoth(Ct(v))}_opSqueeze(v,x){const T=Ct(v);return this.fmap(F=>T.fmap(D=>x(F)(D))).squeezeJoin()}_opSqueezeOut(v,x){const T=this;return Ct(v).fmap(F=>T.fmap(D=>x(D)(F))).squeezeJoin()}_opReset(v,x){return Ct(v).fmap(T=>this.fmap(F=>x(F)(T))).resetJoin()}_opRestart(v,x){return Ct(v).fmap(T=>this.fmap(F=>x(F)(T))).restartJoin()}_opPoly(v,x){const T=Ct(v);return this.fmap(F=>T.fmap(D=>x(D)(F))).polyJoin()}layer(...v){return xe(...v.map(x=>x(this)))}superimpose(...v){return this.stack(...v.map(x=>x(this)))}stack(...v){return xe(this,...v)}sequence(...v){return Fi(this,...v)}seq(...v){return Fi(this,...v)}cat(...v){return Xn(this,...v)}fastcat(...v){return He(this,...v)}slowcat(...v){return vs(this,...v)}onTrigger(v,x=!0){return this.withHap(T=>T.setContext({...T.context,onTrigger:(...F)=>{T.context.onTrigger?.(...F),v(...F)},dominantTrigger:T.context.dominantTrigger||x}))}log(v=T=>`[hap] ${T.showWhole(!0)}`,x=T=>({hap:T})){return this.onTrigger((...T)=>{Ie(v(...T),void 0,x(...T))},!1)}logValues(v=x=>`[hap] ${qo(x,!0)}`){return this.log(x=>v(x.value))}drawLine(){return console.log(Zf(this)),this}unjoin(v,x=Hs){return v.withHap(T=>T.withValue(F=>F?x(this.ribbon(T.whole.begin,T.whole.duration)):this))}into(v,x){return this.unjoin(v,x).innerJoin()}};function y5(i,v){let x=[];return v.forEach(T=>{const F=x.findIndex(([D])=>i(T,D));F===-1?x.push([T]):x[F].push(T)}),x}const M5=(i,v)=>i.spanEquals(v);xt.prototype.collect=function(){return this.withHaps(i=>y5(M5,i).map(v=>new Ce(v[0].whole,v[0].part,v,{})))};const C5=dt("arpWith",(i,v)=>v.collect().fmap(x=>Ct(i(x))).innerJoin().withHap(x=>new Ce(x.whole,x.part,x.value.value,x.combineContext(x.value)))),S5=dt("arp",(i,v)=>v.arpWith(x=>Ct(i).fmap(T=>x[T%x.length])),!1);function dr(i){return!Array.isArray(i)&&typeof i=="object"&&!v5(i)}function T5(i,v,x){return dr(i)||dr(v)?(dr(i)||(i={value:i}),dr(v)||(v={value:v}),m5(i,v,x)):x(i,v)}(function(){const i={set:[(x,T)=>T],keep:[x=>x],keepif:[(x,T)=>T?x:void 0],add:[ii((x,T)=>x+T)],sub:[ii((x,T)=>x-T)],mul:[ii((x,T)=>x*T)],div:[ii((x,T)=>x/T)],mod:[ii(di)],pow:[ii(Math.pow)],log2:[ii(Math.log2)],band:[ii((x,T)=>x&T)],bor:[ii((x,T)=>x|T)],bxor:[ii((x,T)=>x^T)],blshift:[ii((x,T)=>x<<T)],brshift:[ii((x,T)=>x>>T)],lt:[(x,T)=>x<T],gt:[(x,T)=>x>T],lte:[(x,T)=>x<=T],gte:[(x,T)=>x>=T],eq:[(x,T)=>x==T],eqt:[(x,T)=>x===T],ne:[(x,T)=>x!=T],net:[(x,T)=>x!==T],and:[(x,T)=>x&&T],or:[(x,T)=>x||T],func:[(x,T)=>T(x)]},v=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[x,[T,F]]of Object.entries(i)){xt.prototype["_"+x]=function(D){return this.fmap(p=>T(p,D))},Object.defineProperty(xt.prototype,x,{get:function(){const D=this,p=(...M)=>D[x].in(...M);for(const M of v)p[M.toLowerCase()]=function(...t){var h=D;t=Fi(t),F&&(h=F(h),t=F(t));var g;return x==="keepif"?(g=h["_op"+M](t,o=>a=>T(o,a)),g=g.removeUndefineds()):g=h["_op"+M](t,o=>a=>T5(o,a,T)),g};return p.squeezein=p.squeeze,p}});for(const D of v)xt.prototype[D.toLowerCase()]=function(...p){return this.set[D.toLowerCase()](p)}}xt.prototype.struct=function(...x){return this.keepif.out(...x)},xt.prototype.structAll=function(...x){return this.keep.out(...x)},xt.prototype.mask=function(...x){return this.keepif.in(...x)},xt.prototype.maskAll=function(...x){return this.keep.in(...x)},xt.prototype.reset=function(...x){return this.keepif.reset(...x)},xt.prototype.resetAll=function(...x){return this.keep.reset(...x)},xt.prototype.restart=function(...x){return this.keepif.restart(...x)},xt.prototype.restartAll=function(...x){return this.keep.restart(...x)}})();const E5=xe,P5=xe,A5=Kr,sn=i=>new xt(()=>[],i),ce=sn(1),Ai=sn(0);function ge(i){function v(T){return T.span.spanCycles.map(F=>new Ce(St(F.begin).wholeCycle(),F,i))}const x=new xt(v,1);return x.__pure=i,x}function th(i){return i instanceof xt||i?._Pattern}function Ct(i){return th(i)?i:uo&&typeof i=="string"?uo(i):ge(i)}function Kf(i){let v=ge([]);for(const x of i)v=v.bind(T=>x.fmap(F=>T.concat([F])));return v}function xe(...i){i=i.map(T=>Array.isArray(T)?Fi(...T):Ct(T));const v=T=>ki(i.map(F=>F.query(T))),x=new xt(v);return ri&&(x._steps=Ti(...i.map(T=>T._steps))),x}function eh(i,v){if(v=v.map(D=>Array.isArray(D)?Fi(...D):Ct(D)),v.length===0)return ce;if(v.length===1)return v[0];const[x,...T]=v.map(D=>D._steps),F=ri?x.maximum(...T):void 0;return xe(...i(F,v))}function Jf(...i){return eh((v,x)=>x.map(T=>T._steps.eq(v)?T:ti(T,sn(v.sub(T._steps)))),i)}function kf(...i){return eh((v,x)=>x.map(T=>T._steps.eq(v)?T:ti(sn(v.sub(T._steps)),T)),i)}function jf(...i){return eh((v,x)=>x.map(T=>{if(T._steps.eq(v))return T;const F=sn(v.sub(T._steps).div(2));return ti(F,T,F)}),i)}function F5(i,...v){const[x,...T]=v.map(p=>p._steps),F=x.maximum(...T),D={centre:jf,left:Jf,right:kf,expand:xe,repeat:(...p)=>Kr(...p).steps(F)};return i.inhabit(D).fmap(p=>p(...v)).innerJoin().setSteps(F)}function vs(...i){if(i=i.map(T=>Array.isArray(T)?He(...T):Ct(T)),i.length==1)return i[0];const v=function(T){const F=T.span,D=di(F.begin.sam(),i.length),p=i[D];if(!p)return[];const M=F.begin.floor().sub(F.begin.div(i.length).floor());return p.withHapTime(t=>t.add(M)).query(T.setSpan(F.withTime(t=>t.sub(M))))},x=ri?Ti(...i.map(T=>T._steps)):void 0;return new xt(v).splitQueries().setSteps(x)}function ih(...i){i=i.map(Ct);const v=function(x){const T=Math.floor(x.span.begin)%i.length;return i[T]?.query(x)||[]};return new xt(v).splitQueries()}function Xn(...i){return vs(...i)}function R5(...i){const v=i.reduce((x,[T])=>x+T,0);return i=i.map(([x,T])=>[x,T.fast(x)]),ti(...i).slow(v)}function L5(...i){let v=St(0);for(let x of i)x.length==2&&x.unshift(v),v=x[1];return xe(...i.map(([x,T,F])=>ge(Ct(F)).compress(St(x).div(v),St(T).div(v)))).slow(v).innerJoin()}function He(...i){let v=vs(...i);return i.length>1&&(v=v._fast(i.length),v._steps=i.length),i.length==1&&i[0].__steps_source&&(i._steps=i[0]._steps),v}function Fi(...i){return He(...i)}function Qf(...i){return He(...i)}function lo(i){return Array.isArray(i)?i.length==0?[ce,0]:i.length==1?lo(i[0]):[He(...i.map(v=>lo(v)[0])),i.length]:[Ct(i),1]}const b5=$t((i,v)=>Ct(v).mask(i)),D5=$t((i,v)=>Ct(v).struct(i)),G5=$t((i,v)=>Ct(v).superimpose(...i)),w5=$t((i,v)=>Ct(v).withValue(i)),B5=$t((i,v)=>Ct(v).bind(i)),X5=$t((i,v)=>Ct(v).innerBind(i)),I5=$t((i,v)=>Ct(v).outerBind(i)),O5=$t((i,v)=>Ct(v).squeezeBind(i)),N5=$t((i,v)=>Ct(v).stepBind(i)),V5=$t((i,v)=>Ct(v).polyBind(i)),z5=$t((i,v)=>Ct(v).set(i)),W5=$t((i,v)=>Ct(v).keep(i)),Y5=$t((i,v)=>Ct(v).keepif(i)),Z5=$t((i,v)=>Ct(v).add(i)),U5=$t((i,v)=>Ct(v).sub(i)),H5=$t((i,v)=>Ct(v).mul(i)),K5=$t((i,v)=>Ct(v).div(i)),J5=$t((i,v)=>Ct(v).mod(i)),k5=$t((i,v)=>Ct(v).pow(i)),j5=$t((i,v)=>Ct(v).band(i)),Q5=$t((i,v)=>Ct(v).bor(i)),$5=$t((i,v)=>Ct(v).bxor(i)),q5=$t((i,v)=>Ct(v).blshift(i)),_5=$t((i,v)=>Ct(v).brshift(i)),tE=$t((i,v)=>Ct(v).lt(i)),eE=$t((i,v)=>Ct(v).gt(i)),iE=$t((i,v)=>Ct(v).lte(i)),sE=$t((i,v)=>Ct(v).gte(i)),nE=$t((i,v)=>Ct(v).eq(i)),rE=$t((i,v)=>Ct(v).eqt(i)),aE=$t((i,v)=>Ct(v).ne(i)),oE=$t((i,v)=>Ct(v).net(i)),hE=$t((i,v)=>Ct(v).and(i)),uE=$t((i,v)=>Ct(v).or(i)),lE=$t((i,v)=>Ct(v).func(i));function dt(i,v,x=!0,T=!1,F=D=>D.innerJoin()){if(Array.isArray(i)){const t={};for(const h of i)t[h]=dt(h,v,x,T,F);return t}const D=v.length;var p;x?p=function(...t){t=t.map(Ct);const h=t[t.length-1];let g;if(D===1)g=v(h);else{const o=t.slice(0,-1);if(o.every(a=>a.__pure!=null)){const a=o.map(e=>e.__pure),r=o.filter(e=>e.__pure_loc).map(e=>e.__pure_loc);g=v(...a,h),g=g.withContext(e=>{const n=(e.locations||[]).concat(r);return{...e,locations:n}})}else{const[a,...r]=o;let e=(...n)=>v(...n,h);e=$t(e,null,D-1),g=F(r.reduce((n,u)=>n.appLeft(u),a.fmap(e)))}}return T&&(g._steps=h._steps),g}:p=function(...t){t=t.map(Ct);const h=v(...t);return T&&(h._steps=t[t.length-1]._steps),h},xt.prototype[i]=function(...t){if(D===2&&t.length!==1)t=[Fi(...t)];else if(D!==t.length+1)throw new Error(`.${i}() expects ${D-1} inputs but got ${t.length}.`);return t=t.map(Ct),p(...t,this)},D>1&&(xt.prototype["_"+i]=function(...t){const h=v(...t,this);return T&&h.setSteps(this._steps),h});const M=$t(p,null,D);return _o[i]=M,M}function nn(i,v,x=!0,T=!1,F=D=>D.stepJoin()){return dt(i,v,x,T,F)}const fE=dt("round",function(i){return i.asNumber().fmap(v=>Math.round(v))}),dE=dt("floor",function(i){return i.asNumber().fmap(v=>Math.floor(v))}),cE=dt("ceil",function(i){return i.asNumber().fmap(v=>Math.ceil(v))}),pE=dt("toBipolar",function(i){return i.fmap(v=>v*2-1)}),vE=dt("fromBipolar",function(i){return i.fmap(v=>(v+1)/2)}),mE=dt("range",function(i,v,x){return x.mul(v-i).add(i)}),gE=dt("rangex",function(i,v,x){return x._range(Math.log(i),Math.log(v)).fmap(Math.exp)}),xE=dt("range2",function(i,v,x){return x.fromBipolar()._range(i,v)}),yE=dt("ratio",i=>i.fmap(v=>Array.isArray(v)?v.slice(1).reduce((x,T)=>x/T,v[0]):v)),ME=dt("compress",function(i,v,x){return i=St(i),v=St(v),i.gt(v)||i.gt(1)||v.gt(1)||i.lt(0)||v.lt(0)?ce:x._fastGap(St(1).div(v.sub(i)))._late(i)}),{compressSpan:CE,compressspan:SE}=dt(["compressSpan","compressspan"],function(i,v){return v._compress(i.begin,i.end)}),{fastGap:TE,fastgap:EE}=dt(["fastGap","fastgap"],function(i,v){const x=function(F){const D=F.begin.sam(),p=F.begin.sub(D).mul(i).min(1),M=F.end.sub(D).mul(i).min(1);if(!(p>=1))return new Re(D.add(p),D.add(M))},T=function(F){const D=F.part.begin,p=F.part.end,M=D.sam(),t=D.sub(M).div(i).min(1),h=p.sub(M).div(i).min(1),g=new Re(M.add(t),M.add(h)),o=F.whole?new Re(g.begin.sub(D.sub(F.whole.begin).div(i)),g.end.add(F.whole.end.sub(p).div(i))):void 0;return new Ce(o,g,F.value,F.context)};return v.withQuerySpanMaybe(x).withHap(T).splitQueries()}),PE=dt("focus",function(i,v,x){return i=St(i),v=St(v),x._early(i.sam())._fast(St(1).div(v.sub(i)))._late(i)}),{focusSpan:AE,focusspan:FE}=dt(["focusSpan","focusspan"],function(i,v){return v._focus(i.begin,i.end)}),RE=dt("ply",function(i,v){const x=v.fmap(T=>ge(T)._fast(i)).squeezeJoin();return ri&&(x._steps=St(i).mulmaybe(v._steps)),x}),{fast:LE,density:DB}=dt(["fast","density"],function(i,v){return i===0?ce:(i=St(i),v.withQueryTime(x=>x.mul(i)).withHapTime(x=>x.div(i)).setSteps(v._steps))},!0,!0),bE=dt("hurry",function(i,v){return v._fast(i).mul(ge({speed:i}))}),{slow:DE,sparsity:GE}=dt(["slow","sparsity"],function(i,v){return i===0?ce:v._fast(St(1).div(i))}),wE=dt("inside",function(i,v,x){return v(x._slow(i))._fast(i)}),BE=dt("outside",function(i,v,x){return v(x._fast(i))._slow(i)}),XE=dt("lastOf",function(i,v,x){const T=Array(i-1).fill(x);return T.push(v(x)),ih(...T)}),{firstOf:IE,every:OE}=dt(["firstOf","every"],function(i,v,x){const T=Array(i-1).fill(x);return T.unshift(v(x)),ih(...T)}),NE=dt("apply",function(i,v){return i(v)}),VE=dt("cpm",function(i,v){return v._fast(i/60/1)}),zE=dt("early",function(i,v){return i=St(i),v.withQueryTime(x=>x.add(i)).withHapTime(x=>x.sub(i))},!0,!0),$f=dt("late",function(i,v){return i=St(i),v._early(St(0).sub(i))},!0,!0),WE=dt("zoom",function(i,v,x){if(v=St(v),i=St(i),i.gte(v))return Ai;const T=v.sub(i),F=ri?x._steps?.mulmaybe(T):void 0;return x.withQuerySpan(D=>D.withCycle(p=>p.mul(T).add(i))).withHapSpan(D=>D.withCycle(p=>p.sub(i).div(T))).splitQueries().setSteps(F)}),{zoomArc:YE,zoomarc:ZE}=dt(["zoomArc","zoomarc"],function(i,v){return v.zoom(i.begin,i.end)}),UE=dt("bite",(i,v,x)=>v.fmap(T=>F=>{const D=St(T).div(F).mod(1),p=D.add(St(1).div(F));return x.zoom(D,p)}).appLeft(i).squeezeJoin(),!1),HE=dt("linger",function(i,v){return i==0?ce:i<0?v._zoom(i.add(1),1)._slow(i):v._zoom(0,i)._slow(i)},!0,!0),{segment:KE,seg:JE}=dt(["segment","seg"],function(i,v){return v.struct(ge(!0)._fast(i)).setSteps(i)}),kE=dt("swingBy",(i,v,x)=>x.inside(v,$f(Qf(0,i/2)))),jE=dt("swing",(i,v)=>v.swingBy(1/3,i)),{invert:QE,inv:$E}=dt(["invert","inv"],function(i){return i.fmap(v=>!v)},!0,!0),qE=dt("when",function(i,v,x){return i?v(x):x}),_E=dt("off",function(i,v,x){return xe(x,v(x.late(i)))}),t9=dt("brak",function(i){return i.when(vs(!1,!0),v=>He(v,ce)._late(.25))}),qf=dt("rev",function(i){const v=function(x){const T=x.span,F=T.begin.sam(),D=T.begin.nextSam(),p=function(M){const t=M.withTime(g=>F.add(D.sub(g))),h=t.begin;return t.begin=t.end,t.end=h,t};return i.query(x.setSpan(p(T))).map(M=>M.withSpan(p))};return new xt(v).splitQueries()},!1,!0),e9=dt("revv",function(i){const v=x=>new Re(St(0).sub(x.end),St(0).sub(x.begin));return i.withQuerySpan(v).withHapSpan(v)}),i9=dt("pressBy",function(i,v){return v.fmap(x=>ge(x).compress(i,1)).squeezeJoin()}),s9=dt("press",function(i){return i._pressBy(.5)});xt.prototype.hush=function(){return ce};const n9=dt("palindrome",function(i){return i.lastOf(2,qf)},!0,!0),{juxBy:r9,juxby:a9}=dt(["juxBy","juxby"],function(i,v,x){i/=2;const T=function(p,M,t){return M in p?p[M]:t},F=x.withValue(p=>Object.assign({},p,{pan:T(p,"pan",.5)-i})),D=v(x.withValue(p=>Object.assign({},p,{pan:T(p,"pan",.5)+i})));return xe(F,D).setSteps(ri?Ti(F._steps,D._steps):void 0)}),o9=dt("jux",function(i,v){return v._juxBy(1,i,v)}),{echoWith:h9,echowith:u9,stutWith:l9,stutwith:f9}=dt(["echoWith","echowith","stutWith","stutwith"],function(i,v,x,T){return xe(...kn(0,i-1).map(F=>x(T.late(St(v).mul(F)),F)))}),d9=dt("echo",function(i,v,x,T){return T._echoWith(i,v,(F,D)=>F.gain(Math.pow(x,D)))}),c9=dt("stut",function(i,v,x,T){return T._echoWith(i,x,(F,D)=>F.gain(Math.pow(v,D)))}),_f=dt("applyN",function(i,v,x){let T=x;for(let F=0;F<i;F++)T=v(T);return T}),p9=dt(["plyWith","plywith"],function(i,v,x){const T=x.fmap(F=>Xn(...kn(0,i-1).map(D=>_f(D,v,F)))._fast(i)).squeezeJoin();return ri&&(T._steps=St(i).mulmaybe(x._steps)),T}),v9=dt(["plyForEach","plyforeach"],function(i,v,x){const T=x.fmap(F=>Xn(Xn(ge(F),...kn(1,i-1).map(D=>v(ge(F),D))))._fast(i)).squeezeJoin();return ri&&(T._steps=St(i).mulmaybe(x._steps)),T}),sh=function(i,v,x=!1){return i=St(i),vs(...kn(0,i.sub(1)).map(T=>x?v.late(St(T).div(i)):v.early(St(T).div(i))))},m9=dt("iter",function(i,v){return sh(i,v,!1)},!0,!0),{iterBack:g9,iterback:x9}=dt(["iterBack","iterback"],function(i,v){return sh(i,v,!0)},!0,!0),{repeatCycles:y9}=dt("repeatCycles",function(i,v){return new xt(function(x){const T=x.span.begin.sam(),F=T.div(i).sam(),D=T.sub(F);return x=x.withSpan(p=>p.withTime(M=>M.sub(D))),v.query(x).map(p=>p.withSpan(M=>M.withTime(t=>t.add(D))))}).splitQueries()},!0,!0),nh=function(i,v,x,T=!1,F=!1){const D=Array(i-1).fill(!1);D.unshift(!0);const p=sh(i,Fi(...D),!T);return F||(x=x.repeatCycles(i)),x.when(p,v)},{chunk:M9,slowchunk:C9,slowChunk:S9}=dt(["chunk","slowchunk","slowChunk"],function(i,v,x){return nh(i,v,x,!1,!1)},!0,!0),{chunkBack:T9,chunkback:E9}=dt(["chunkBack","chunkback"],function(i,v,x){return nh(i,v,x,!0)},!0,!0),{fastchunk:P9,fastChunk:A9}=dt(["fastchunk","fastChunk"],function(i,v,x){return nh(i,v,x,!1,!0)},!0,!0),{chunkinto:F9,chunkInto:R9}=dt(["chunkinto","chunkInto"],function(i,v,x){return x.into(He(!0,...Array(i-1).fill(!1))._iterback(i),v)}),{chunkbackinto:L9,chunkBackInto:b9}=dt(["chunkbackinto","chunkBackInto"],function(i,v,x){return x.into(He(!0,...Array(i-1).fill(!1))._iter(i)._early(1),v)}),D9=dt("bypass",function(i,v){return i=!!parseInt(i),i?ce:v},!0,!0),{ribbon:G9,rib:w9}=dt(["ribbon","rib"],(i,v,x)=>x.early(i).restart(ge(1).slow(v))),B9=dt("hsla",(i,v,x,T,F)=>F.color(`hsla(${i}turn,${v*100}%,${x*100}%,${T})`)),X9=dt("hsl",(i,v,x,T)=>T.color(`hsl(${i}turn,${v*100}%,${x*100}%)`));xt.prototype.tag=function(i){return this.withContext(v=>({...v,tags:(v.tags||[]).concat([i])}))};const I9=dt("filter",(i,v)=>v.withHaps(x=>x.filter(i))),O9=dt("filterWhen",(i,v)=>v.filter(x=>i(x.whole.begin))),N9=dt("within",(i,v,x,T)=>xe(x(T.filterWhen(F=>F.cyclePos()>=i&&F.cyclePos()<=v)),T.filterWhen(F=>F.cyclePos()<i||F.cyclePos()>v)));xt.prototype.stepJoin=function(){const i=this,v=ti(...fo(co(i.queryArc(0,1))))._steps,x=function(T){const F=i.early(T.span.begin.sam()).query(T.setSpan(new Re(St(0),St(1))));return ti(...fo(co(F))).query(T)};return new xt(x,v)};xt.prototype.stepBind=function(i){return this.fmap(i).stepJoin()};function fo(i){const v=i.filter((D,p)=>p.hasSteps).reduce((D,p)=>D.add(p),St(0)),x=Gs(i.map((D,p)=>p._steps)).reduce((D,p)=>D.add(p),St(0)),T=v.eq(0)?void 0:x.div(v);function F(D,p){return p._steps===void 0?[D.mulmaybe(T),p]:[p._steps,p]}return i.map(D=>F(...D))}function co(i){const v=ki(i.map(T=>[T.part.begin,T.part.end])),x=If([St(0),St(1),...v]);return Xf(x).map(T=>[T[1].sub(T[0]),xe(...td(new Re(...T),i).map(F=>F.value.withHap(D=>D.setContext(D.combineContext(F)))))])}function td(i,v){return Gs(v.map(x=>ed(i,x)))}function ed(i,v){const x=i.intersection(v.part);if(x!=null)return new Ce(v.whole,x,v.value,v.context)}const id=dt("pace",function(i,v){return v._steps===void 0?v:v._steps.eq(St(0))?Ai:v._fast(St(i).div(v._steps)).setSteps(i)});function sd(i,...v){const x=v.map(F=>lo(F));if(x.length==0)return ce;i==0&&(i=x[0][1]);const T=[];for(const F of x)F[1]!=0&&(i==F[1]?T.push(F[0]):T.push(F[0]._fast(St(i).div(St(F[1])))));return xe(...T)}function Kr(...i){if(Array.isArray(i[0]))return sd(0,...i);if(i=i.filter(T=>T.hasSteps),i.length==0)return ce;const v=Ti(...i.map(T=>T._steps));if(v.eq(St(0)))return Ai;const x=xe(...i.map(T=>T.pace(v)));return x._steps=v,x}function ti(...i){if(i.length===0)return Ai;const v=p=>Array.isArray(p)?p:[p._steps??1,p];if(i=i.map(v),i.find(p=>p[0]===void 0)){const p=i.map(t=>t[0]).filter(t=>t!==void 0);if(p.length===0)return He(...i.map(t=>t[1]));if(p.length===i.length)return Ai;const M=p.reduce((t,h)=>t.add(h),St(0)).div(p.length);for(let t of i)t[0]===void 0&&(t[0]=M)}if(i.length==1)return Ct(i[0][1]).withSteps(p=>i[0][0]);const x=i.map(p=>p[0]).reduce((p,M)=>p.add(M),St(0));let T=St(0);const F=[];for(const[p,M]of i){if(St(p).eq(0))continue;const t=T.add(p);F.push(Ct(M)._compress(T.div(x),t.div(x))),T=t}const D=xe(...F);return D._steps=x,D}function nd(...i){i=i.map(F=>Array.isArray(F)?F.map(Ct):[Ct(F)]);const v=Ti(...i.map(F=>St(F.length)));let x=[];for(let F=0;F<v;++F)x.push(...i.map(D=>D.length==0?ce:D[F%D.length]));x=x.filter(F=>F.hasSteps&&F._steps>0);const T=x.reduce((F,D)=>F.add(D._steps),St(0));return x=ti(...x),x._steps=T,x}const rd=nn("take",function(i,v){if(!v.hasSteps||v._steps.lte(0)||(i=St(i),i.eq(0)))return Ai;const x=i<0;x&&(i=i.abs());const T=i.div(v._steps);return T.lte(0)?Ai:T.gte(1)?v:x?v.zoom(St(1).sub(T),1):v.zoom(0,T)}),ad=nn("drop",function(i,v){return v.hasSteps?(i=St(i),i.lt(0)?v.take(v._steps.add(i)):v.take(St(0).sub(v._steps.sub(i)))):Ai}),od=nn("extend",function(i,v){return v.fast(i).expand(i)}),V9=nn("replicate",function(i,v){return v.repeatCycles(i).fast(i).expand(i)}),hd=nn("expand",function(i,v){return v.withSteps(x=>x.mul(St(i)))}),ud=nn("contract",function(i,v){return v.withSteps(x=>x.div(St(i)))});xt.prototype.shrinklist=function(i){const v=this;if(!v.hasSteps)return[v];let[x,T]=Array.isArray(i)?i:[i,v._steps];if(x=St(x),T===0||x===0)return[v];const F=x>0,D=[];if(F){const p=St(1).div(v._steps).mul(x);for(let M=0;M<T;++M){const t=p.mul(M);if(t.gt(1))break;D.push([t,1])}}else{x=St(0).sub(x);const p=St(1).div(v._steps).mul(x);for(let M=0;M<T;++M){const t=St(1).sub(p.mul(M));if(t.lt(0))break;D.push([St(0),t])}}return D.map(p=>v.zoom(...p))};const ld=(i,v)=>v.shrinklist(i),fd=dt("shrink",function(i,v){if(!v.hasSteps)return Ai;const x=v.shrinklist(i),T=ti(...x);return T._steps=x.reduce((F,D)=>F.add(D._steps),St(0)),T},!0,!1,i=>i.stepJoin()),z9=dt("grow",function(i,v){if(!v.hasSteps)return Ai;const x=v.shrinklist(St(0).sub(i));x.reverse();const T=ti(...x);return T._steps=x.reduce((F,D)=>F.add(D._steps),St(0)),T},!0,!1,i=>i.stepJoin()),dd=function(i,...v){return i.tour(...v)};xt.prototype.tour=function(...i){return ti(...[].concat(...i.map((v,x)=>[...i.slice(0,i.length-x),this,...i.slice(i.length-x)]),this,...i))};const cd=function(...i){i=i.filter(T=>T.hasSteps);const v=vs(...i.map(T=>T._slow(T._steps))),x=Ti(...i.map(T=>T._steps));return v._fast(x).setSteps(x)},W9=ti,rh=ti,Y9=ti,Z9=nd,U9=Kr;xt.prototype.s_polymeter=xt.prototype.polymeter;const H9=fd;xt.prototype.s_taper=xt.prototype.shrink;const K9=ld;xt.prototype.s_taperlist=xt.prototype.shrinklist;const J9=rd;xt.prototype.s_add=xt.prototype.take;const k9=ad;xt.prototype.s_sub=xt.prototype.drop;const j9=hd;xt.prototype.s_expand=xt.prototype.expand;const Q9=od;xt.prototype.s_extend=xt.prototype.extend;const $9=ud;xt.prototype.s_contract=xt.prototype.contract;const q9=dd;xt.prototype.s_tour=xt.prototype.tour;const _9=cd;xt.prototype.s_zip=xt.prototype.zip;const tP=id;xt.prototype.steps=xt.prototype.pace;const eP=dt("chop",function(i,v){const x=Array.from({length:i},(D,p)=>p).map(D=>({begin:D/i,end:(D+1)/i})),T=function(D,p){if("begin"in D&&"end"in D&&D.begin!==void 0&&D.end!==void 0){const M=D.end-D.begin;p={begin:D.begin+p.begin*M,end:D.begin+p.end*M}}return Object.assign({},D,p)},F=function(D){return Fi(x.map(p=>T(D,p)))};return v.squeezeBind(F).setSteps(ri?St(i).mulmaybe(v._steps):void 0)}),iP=dt("striate",function(i,v){const x=Array.from({length:i},(F,D)=>D).map(F=>({begin:F/i,end:(F+1)/i})),T=vs(...x);return v.set(T)._fast(i).setSteps(ri?St(i).mulmaybe(v._steps):void 0)}),pd=function(i,v,x=.5){return v.speed(1/i*x).unit("c").slow(i)},vd=dt("slice",function(i,v,x){return i.innerBind(T=>v.outerBind(F=>x.outerBind(D=>{D=D instanceof Object?D:{s:D};const p=Array.isArray(T)?T[F]:F/T,M=Array.isArray(T)?T[F+1]:(F+1)/T;return ge({begin:p,end:M,_slices:T,...D})}))).setSteps(v._steps)},!1);xt.prototype.onTriggerTime=function(i){return this.onTrigger((v,x,T,F)=>{const D=F-x;window.setTimeout(()=>{i(v)},D*1e3)},!1)};const sP=dt("splice",function(i,v,x){const T=vd(i,v,x);return new xt(F=>{const D=F.controls._cps||1;return T.query(F).map(p=>p.withValue(M=>({speed:D/M._slices/p.whole.duration*(M.speed||1),unit:"c",...M})))}).setSteps(v._steps)},!1),{loopAt:nP,loopat:rP}=dt(["loopAt","loopat"],function(i,v){const x=v._steps?v._steps.div(i):void 0;return new xt(T=>pd(i,v,T.controls._cps).query(T),x)}),aP=dt("fit",i=>i.withHaps((v,x)=>v.map(T=>T.withValue(F=>{const D=("end"in F?F.end:1)-("begin"in F?F.begin:0);return{...F,speed:(x.controls._cps||1)/T.whole.duration*D,unit:"c"}})))),{loopAtCps:oP,loopatcps:hP}=dt(["loopAtCps","loopatcps"],function(i,v,x){return pd(i,x,v)}),uP=i=>ge(1).withValue(()=>Ct(i())).innerJoin();let Uu=i=>i<.5?1:1-(i-.5)/.5,md=(i,v,x)=>{v=Ct(v),i=Ct(i),x=Ct(x);let T=v.fmap(D=>({gain:Uu(D)})),F=v.fmap(D=>({gain:Uu(1-D)}));return xe(i.mul(T),x.mul(F))};xt.prototype.xfade=function(i,v){return md(this,i,v)};const lP=i=>(v,x,T)=>{v=St(v).mod(x),x=St(x);const F=v.div(x),D=v.add(1).div(x);return i(T.fmap(p=>ge(p)._compress(F,D)))},{beat:fP}=dt(["beat"],lP(i=>i.innerJoin())),ah=(i,v,x)=>{x=St(x);const T=St(1).div(i.length),F=M=>{const t=[];for(const[h,g]of M.entries())g&&t.push([St(h).div(M.length),g]);return t},D=Ur(([M,t],[h,g])=>{const o=x.mul(h-M).add(M),a=o.add(T);return new Re(o,a)},F(i),F(v));function p(M){const t=M.span.begin.sam(),h=M.span.cycleArc(),g=[];for(const o of D){const a=o.intersection(h);a!==void 0&&g.push(new Ce(o.withTime(r=>r.add(t)),a.withTime(r=>r.add(t)),!0))}return g}return new xt(p).splitQueries()},dP=(i,v,x)=>(i=Ct(i),v=Ct(v),x=Ct(x),i.innerBind(T=>v.innerBind(F=>x.innerBind(D=>ah(T,F,D))))),ms=function(i){const v=function(x,T){const F=Ct(x).fmap(D=>Array.isArray(D)?[...D,i]:[D,1,i]);return T?T.distort(F):ge({}).distort(F)};return xt.prototype[i]=function(x){return v(x,this)},v},cP=ms("soft"),pP=ms("hard"),vP=ms("cubic"),mP=ms("diode"),gP=ms("asym"),xP=ms("fold"),yP=ms("sinefold"),MP=ms("chebyshev"),oh=i=>{let v=ge($t((...x)=>x,null,i.length));for(const x of i)v=v.appBoth(Ct(x));return v},Jr=i=>Array.isArray(i)?oh(i):Ct(i);xt.prototype.partials=function(i){return this.withValue(v=>x=>({...v,partials:x})).appLeft(Jr(i))};const CP=i=>Jr(i).as("partials");xt.prototype.phases=function(i){return this.withValue(v=>x=>({...v,phases:x})).appLeft(Jr(i))};const SP=i=>Jr(i).as("phases");xt.prototype.FX=function(...i){return i=i.map(Ct),this.withValue(v=>x=>{const T=v.FX??[];return{...v,FX:T.concat(x)}}).appLeft(oh(i))};const TP=i=>{let v=ge($t((...x)=>x,null,i.length));for(const x of i)v=v.appLeft(x);return v};xt.prototype.worklet=function(i,...v){return v=v.map(Ct),this.outerBind(x=>TP(v).withValue(T=>{const F=x.workletInputs??[];return{...x,workletSrc:i,workletInputs:F.concat(T)}}))};const EP=(...i)=>ge({}).worklet(...i);function kr(i){let v=Array.isArray(i);i=v?i:[i];const x=i[0],T=D=>{let p;if(typeof D=="object"&&D.value!==void 0&&(p={...D},D=D.value,delete p.value),v&&Array.isArray(D)){const M=p||{};return D.forEach((t,h)=>{h<i.length&&(M[i[h]]=t)}),M}else return p?(p[x]=D,p):{[x]:D}},F=function(D,p){return p?typeof D>"u"?p.fmap(T):p.set(Ct(D).withValue(T)):Ct(D).withValue(T)};return xt.prototype[x]=function(D){return F(D,this)},F}const In=new Map;function gd(i){return In.has(i)}function nt(i,...v){const x=Array.isArray(i)?i[0]:i;let T={};return T[x]=kr(i),In.set(x,x),v.forEach(F=>{T[F]=T[x],In.set(F,x),xt.prototype[F]=xt.prototype[x]}),T}function Vi(i,v,...x){i=Array.isArray(i)?i:[i];let T={};for(let F=1;F<=v;F++){let D=[...x],p=[...i];if(F===1){const t=D.map(g=>`${g}1`),h=p.map(g=>`${g}1`);D=D.concat(t).concat(h)}else D=D.map(t=>`${t}${F}`),p=p.map(t=>`${t}${F}`);const M=nt(p,...D);T={...T,...M}}return T}const{s:xd,sound:yd}=nt(["s","n","gain"],"sound"),{wt:Md,wavetablePosition:Cd}=nt("wt","wavetablePosition"),{wtenv:Sd}=nt("wtenv"),{wtattack:Td,wtatt:Ed}=nt("wtattack","wtatt"),{wtdecay:Pd,wtdec:Ad}=nt("wtdecay","wtdec"),{wtsustain:Fd,wtsus:Rd}=nt("wtsustain","wtsus"),{wtrelease:Ld,wtrel:bd}=nt("wtrelease","wtrel"),{wtrate:Dd}=nt("wtrate"),{wtsync:Gd}=nt("wtsync"),{wtdepth:wd}=nt("wtdepth"),{wtshape:Bd}=nt("wtshape"),{wtdc:Xd}=nt("wtdc"),{wtskew:Id}=nt("wtskew"),{warp:Od,wavetableWarp:Nd}=nt("warp","wavetableWarp"),{warpattack:Vd,warpatt:zd}=nt("warpattack","warpatt"),{warpdecay:Wd,warpdec:Yd}=nt("warpdecay","warpdec"),{warpsustain:Zd,warpsus:Ud}=nt("warpsustain","warpsus"),{warprelease:Hd,warprel:Kd}=nt("warprelease","warprel"),{warprate:Jd}=nt("warprate"),{warpdepth:kd}=nt("warpdepth"),{warpshape:jd}=nt("warpshape"),{warpdc:Qd}=nt("warpdc"),{warpskew:$d}=nt("warpskew"),{warpmode:qd,wavetableWarpMode:_d}=nt("warpmode","wavetableWarpMode"),{wtphaserand:tc,wavetablePhaseRand:ec}=nt("wtphaserand","wavetablePhaseRand"),{warpenv:ic}=nt("warpenv"),{warpsync:sc}=nt("warpsync"),{source:nc,src:rc}=nt("source","src"),{n:ac}=nt("n"),{note:Si}=nt(["note","n"]),{accelerate:oc}=nt("accelerate"),{velocity:hc,vel:uc}=nt("velocity","vel"),{gain:lc}=nt("gain"),{postgain:fc}=nt("postgain"),{amp:dc}=nt("amp"),{attack:cc,att:pc}=nt("attack","att"),{fmh:vc,fmh1:mc,fmh2:gc,fmh3:xc,fmh4:yc,fmh5:Mc,fmh6:Cc,fmh7:Sc,fmh8:Tc}=Vi(["fmh","fmi"],8,"fmh"),{fmi:Ec,fmi1:Pc,fmi2:Ac,fmi3:Fc,fmi4:Rc,fmi5:Lc,fmi6:bc,fmi7:Dc,fmi8:Gc,fm:wc,fm1:Bc,fm2:Xc,fm3:Ic,fm4:Oc,fm5:Nc,fm6:Vc,fm7:zc,fm8:Wc}=Vi(["fmi","fmh"],8,"fm"),{fmenv:Yc,fmenv1:Zc,fmenv2:Uc,fmenv3:Hc,fmenv4:Kc,fmenv5:Jc,fmenv6:kc,fmenv7:jc,fmenv8:Qc}=Vi("fmenv",8),{fmattack:$c,fmattack1:qc,fmattack2:_c,fmattack3:tp,fmattack4:ep,fmattack5:ip,fmattack6:sp,fmattack7:np,fmattack8:rp,fmatt:ap,fmatt1:op,fmatt2:hp,fmatt3:up,fmatt4:lp,fmatt5:fp,fmatt6:dp,fmatt7:cp,fmatt8:pp}=Vi("fmattack",8,"fmatt"),{fmwave:vp,fmwave1:mp,fmwave2:gp,fmwave3:xp,fmwave4:yp,fmwave5:Mp,fmwave6:Cp,fmwave7:Sp,fmwave8:Tp}=Vi("fmwave",8),{fmdecay:Ep,fmdecay1:Pp,fmdecay2:Ap,fmdecay3:Fp,fmdecay4:Rp,fmdecay5:Lp,fmdecay6:bp,fmdecay7:Dp,fmdecay8:Gp,fmdec:wp,fmdec1:Bp,fmdec2:Xp,fmdec3:Ip,fmdec4:Op,fmdec5:Np,fmdec6:Vp,fmdec7:zp,fmdec8:Wp}=Vi("fmdecay",8,"fmdec"),{fmsustain:Yp,fmsustain1:Zp,fmsustain2:Up,fmsustain3:Hp,fmsustain4:Kp,fmsustain5:Jp,fmsustain6:kp,fmsustain7:jp,fmsustain8:Qp,fmsus:$p,fmsus1:qp,fmsus2:_p,fmsus3:t0,fmsus4:e0,fmsus5:i0,fmsus6:s0,fmsus7:n0,fmsus8:r0}=Vi("fmsustain",8,"fmsus"),{fmrelease:a0,fmrelease1:o0,fmrelease2:h0,fmrelease3:u0,fmrelease4:l0,fmrelease5:f0,fmrelease6:d0,fmrelease7:c0,fmrelease8:p0,fmrel:v0,fmrel1:m0,fmrel2:g0,fmrel3:x0,fmrel4:y0,fmrel5:M0,fmrel6:C0,fmrel7:S0,fmrel8:T0}=Vi("fmrelease",8,"fmrel");for(let i=0;i<=8;i++)for(let v=0;v<=8;v++)nt(`fmi${i}${v}`,`fm${i}${v}`);const{bank:E0}=nt("bank"),{chorus:P0}=nt("chorus"),{analyze:A0}=nt("analyze"),{fft:F0}=nt("fft"),{decay:R0,dec:L0}=nt("decay","dec"),{sustain:b0,sus:D0}=nt("sustain","sus"),{release:G0,rel:w0}=nt("release","rel"),{hold:B0}=nt("hold"),{bandf:X0,bpf:I0,bp:O0}=nt(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:N0,bpq:V0}=nt("bandq","bpq"),{begin:z0}=nt("begin"),{end:W0}=nt("end"),{loop:Y0}=nt("loop"),{loopBegin:Z0,loopb:U0}=nt("loopBegin","loopb"),{loopEnd:H0,loope:K0}=nt("loopEnd","loope"),{crush:J0}=nt("crush"),{coarse:k0}=nt("coarse"),{tremolo:j0,trem:Q0}=nt(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:$0}=nt(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:q0}=nt("tremolodepth","tremdepth"),{tremoloskew:_0}=nt("tremoloskew","tremskew"),{tremolophase:tv}=nt("tremolophase","tremphase"),{tremoloshape:ev}=nt("tremoloshape","tremshape"),{drive:iv}=nt("drive"),{duck:sv}=nt("duckorbit","duck"),{duckdepth:nv}=nt("duckdepth"),{duckonset:rv}=nt("duckonset","duckons"),{duckattack:av}=nt("duckattack","duckatt"),{byteBeatExpression:ov,bbexpr:hv}=nt("byteBeatExpression","bbexpr"),{byteBeatStartTime:uv,bbst:lv}=nt("byteBeatStartTime","bbst"),{channels:fv,ch:dv}=nt("channels","ch"),{pw:cv}=nt(["pw","pwrate","pwsweep"]),{pwrate:pv}=nt("pwrate"),{pwsweep:vv}=nt("pwsweep"),{phaserrate:mv,ph:gv,phaser:xv}=nt(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:yv,phs:Mv}=nt("phasersweep","phs"),{phasercenter:Cv,phc:Sv}=nt("phasercenter","phc"),{phaserdepth:Tv,phd:Ev,phasdp:Pv}=nt("phaserdepth","phd","phasdp"),{channel:Av}=nt("channel"),{cut:Fv}=nt("cut"),{cutoff:Rv,ctf:Lv,lpf:bv,lp:Dv}=nt(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Gv,lpe:wv}=nt("lpenv","lpe"),{hpenv:Bv,hpe:Xv}=nt("hpenv","hpe"),{bpenv:Iv,bpe:Ov}=nt("bpenv","bpe"),{lpattack:Nv,lpa:Vv}=nt("lpattack","lpa"),{hpattack:zv,hpa:Wv}=nt("hpattack","hpa"),{bpattack:Yv,bpa:Zv}=nt("bpattack","bpa"),{lpdecay:Uv,lpd:Hv}=nt("lpdecay","lpd"),{hpdecay:Kv,hpd:Jv}=nt("hpdecay","hpd"),{bpdecay:kv,bpd:jv}=nt("bpdecay","bpd"),{lpsustain:Qv,lps:$v}=nt("lpsustain","lps"),{hpsustain:qv,hps:_v}=nt("hpsustain","hps"),{bpsustain:tm,bps:em}=nt("bpsustain","bps"),{lprelease:im,lpr:sm}=nt("lprelease","lpr"),{hprelease:nm,hpr:rm}=nt("hprelease","hpr"),{bprelease:am,bpr:om}=nt("bprelease","bpr"),{ftype:hm}=nt("ftype"),{fanchor:um}=nt("fanchor"),{lprate:lm}=nt("lprate"),{lpsync:fm}=nt("lpsync"),{lpdepth:dm}=nt("lpdepth"),{lpdepthfrequency:cm,lpdepthfreq:pm}=nt("lpdepthfrequency","lpdepthfreq"),{lpshape:vm}=nt("lpshape"),{lpdc:mm}=nt("lpdc"),{lpskew:gm}=nt("lpskew"),{bprate:xm}=nt("bprate"),{bpsync:ym}=nt("bpsync"),{bpdepth:Mm}=nt("bpdepth"),{bpdepthfrequency:Cm,bpdepthfreq:Sm}=nt("bpdepthfrequency","bpdepthfreq"),{bpshape:Tm}=nt("bpshape"),{bpdc:Em}=nt("bpdc"),{bpskew:Pm}=nt("bpskew"),{hprate:Am}=nt("hprate"),{hpsync:Fm}=nt("hpsync"),{hpdepth:Rm}=nt("hpdepth"),{hpdepthfrequency:Lm,hpdepthfreq:bm}=nt("hpdepthfrequency","hpdepthfreq"),{hpshape:Dm}=nt("hpshape"),{hpdc:Gm}=nt("hpdc"),{hpskew:wm}=nt("hpskew"),{vib:Bm,vibrato:Xm,v:Im}=nt(["vib","vibmod"],"vibrato","v"),{noise:Om}=nt("noise"),{vibmod:Nm,vmod:Vm}=nt(["vibmod","vib"],"vmod"),{hcutoff:zm,hpf:Wm,hp:Ym}=nt(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:Zm,hpq:Um}=nt("hresonance","hpq"),{resonance:Hm,lpq:Km}=nt("resonance","lpq"),{djf:Jm}=nt("djf"),{delay:km}=nt(["delay","delaytime","delayfeedback"]),{delayfeedback:jm,delayfb:Qm,dfb:$m}=nt("delayfeedback","delayfb","dfb"),{delayspeed:qm}=nt("delayspeed"),{delaytime:_m,delayt:t1,dt:e1}=nt("delaytime","delayt","dt"),{delaysync:i1}=nt("delaysync"),{lock:s1}=nt("lock"),{detune:n1,det:r1}=nt("detune","det"),{unison:a1}=nt("unison"),{spread:o1}=nt("spread"),{dry:h1}=nt("dry"),{fadeTime:u1,fadeOutTime:l1}=nt("fadeTime","fadeOutTime"),{fadeInTime:f1}=nt("fadeInTime"),{freq:d1}=nt("freq"),{pattack:c1,patt:p1}=nt("pattack","patt"),{pdecay:v1,pdec:m1}=nt("pdecay","pdec"),{psustain:g1,psus:x1}=nt("psustain","psus"),{prelease:y1,prel:M1}=nt("prelease","prel"),{penv:C1}=nt("penv"),{pcurve:S1}=nt("pcurve"),{panchor:T1}=nt("panchor"),{gate:E1,gat:P1}=nt("gate","gat"),{leslie:A1}=nt("leslie"),{lrate:F1}=nt("lrate"),{lsize:R1}=nt("lsize"),{activeLabel:L1}=nt("activeLabel"),{label:b1}=nt(["label","activeLabel"]),{degree:D1}=nt("degree"),{mtranspose:G1}=nt("mtranspose"),{ctranspose:w1}=nt("ctranspose"),{harmonic:B1}=nt("harmonic"),{stepsPerOctave:X1}=nt("stepsPerOctave"),{octaveR:I1}=nt("octaveR"),{nudge:O1}=nt("nudge"),{octave:N1,oct:V1}=nt("octave","oct"),{orbit:z1}=nt("orbit","o"),{bus:W1}=nt("bus"),{busgain:Y1,bgain:Z1}=nt("busgain","bgain"),{overgain:U1}=nt("overgain"),{overshape:H1}=nt("overshape"),{pan:K1}=nt("pan"),{panspan:J1}=nt("panspan"),{pansplay:k1}=nt("pansplay"),{panwidth:j1}=nt("panwidth"),{panorient:Q1}=nt("panorient"),{slide:$1}=nt("slide"),{semitone:q1}=nt("semitone"),{voice:_1}=nt("voice"),{chord:tg}=nt("chord"),{dictionary:eg,dict:ig}=nt("dictionary","dict"),{anchor:sg}=nt("anchor"),{offset:ng}=nt("offset"),{octaves:rg}=nt("octaves"),{mode:ag}=nt(["mode","anchor"]),{room:og}=nt(["room","size"]),{roomlp:hg,rlp:ug}=nt("roomlp","rlp"),{roomdim:lg,rdim:fg}=nt("roomdim","rdim"),{roomfade:dg,rfade:cg}=nt("roomfade","rfade"),{ir:pg,iresponse:vg}=nt(["ir","i"],"iresponse"),{irspeed:mg}=nt("irspeed"),{irbegin:gg}=nt("irbegin"),{roomsize:xg,size:yg,sz:Mg,rsize:Cg}=nt("roomsize","size","sz","rsize"),{shape:Sg}=nt(["shape","shapevol"]),{distort:Tg,dist:Eg}=nt(["distort","distortvol","distorttype"],"dist"),{distortvol:Pg}=nt("distortvol","distvol"),{distorttype:Ag}=nt("distorttype","disttype"),{compressor:Fg}=nt(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:Rg}=nt("compressorKnee"),{compressorRatio:Lg}=nt("compressorRatio"),{compressorAttack:bg}=nt("compressorAttack"),{compressorRelease:Dg}=nt("compressorRelease"),{speed:hh}=nt("speed"),{stretch:Gg}=nt("stretch"),{unit:wg}=nt("unit"),{squiz:Bg}=nt("squiz"),{vowel:Xg}=nt("vowel"),{waveloss:Ig}=nt("waveloss"),{density:PP}=nt("density"),{expression:Og}=nt("expression"),{sustainpedal:Ng}=nt("sustainpedal"),{fshift:Vg}=nt("fshift"),{fshiftnote:zg}=nt("fshiftnote"),{fshiftphase:Wg}=nt("fshiftphase"),{triode:Yg}=nt("triode"),{krush:Zg}=nt("krush"),{kcutoff:Ug}=nt("kcutoff"),{octer:Hg}=nt("octer"),{octersub:Kg}=nt("octersub"),{octersubsub:Jg}=nt("octersubsub"),{ring:kg}=nt("ring"),{ringf:jg}=nt("ringf"),{ringdf:Qg}=nt("ringdf"),{freeze:$g}=nt("freeze"),{xsdelay:qg}=nt("xsdelay"),{tsdelay:_g}=nt("tsdelay"),{real:tx}=nt("real"),{imag:ex}=nt("imag"),{enhance:ix}=nt("enhance"),{comb:sx}=nt("comb"),{smear:nx}=nt("smear"),{scram:rx}=nt("scram"),{binshift:ax}=nt("binshift"),{hbrick:ox}=nt("hbrick"),{lbrick:hx}=nt("lbrick"),{frameRate:ux}=nt("frameRate"),{frames:lx}=nt("frames"),{hours:fx}=nt("hours"),{minutes:dx}=nt("minutes"),{seconds:cx}=nt("seconds"),{songPtr:px}=nt("songPtr"),{uid:vx}=nt("uid"),{val:mx}=nt("val"),{cps:gx}=nt("cps"),{clip:xx,legato:yx}=nt("clip","legato"),{duration:Mx,dur:Cx}=nt("duration","dur"),{zrand:Sx}=nt("zrand"),{curve:Tx}=nt("curve"),{deltaSlide:Ex}=nt("deltaSlide"),{pitchJump:Px}=nt("pitchJump"),{pitchJumpTime:Ax}=nt("pitchJumpTime"),{znoise:Fx}=nt("znoise"),{zmod:Rx}=nt("zmod"),{zcrush:Lx}=nt("zcrush"),{zdelay:bx}=nt("zdelay"),{zzfx:Dx}=nt("zzfx"),{color:Gx,colour:wx}=nt(["color","colour"]);let uh=(...i)=>i.reduce((v,x)=>Object.assign(v,{[x]:kr(x)}),{});const Bx=dt("adsr",(i,v)=>{i=Array.isArray(i)?i:[i];const[x,T,F,D]=i;return v.set({attack:x,decay:T,sustain:F,release:D})}),Xx=dt("ad",(i,v)=>{i=Array.isArray(i)?i:[i];const[x,T=x]=i;return v.attack(x).decay(T)}),Ix=dt("ds",(i,v)=>{i=Array.isArray(i)?i:[i];const[x,T=0]=i;return v.set({decay:x,sustain:T})}),Ox=dt("ar",(i,v)=>{i=Array.isArray(i)?i:[i];const[x,T=x]=i;return v.set({attack:x,release:T})}),{midichan:Nx}=nt("midichan"),{midimap:Vx}=nt("midimap"),{midiport:zx}=nt("midiport"),{midicmd:Wx}=nt("midicmd"),Yx=dt("control",(i,v)=>{if(!Array.isArray(i))throw new Error("control expects an array of [ccn, ccv]");const[x,T]=i;return v.ccn(x).ccv(T)}),{ccn:Zx}=nt("ccn"),{ccv:Ux}=nt("ccv"),{ctlNum:Hx}=nt("ctlNum"),{nrpnn:Kx}=nt("nrpnn"),{nrpv:Jx}=nt("nrpv"),{progNum:kx}=nt("progNum"),jx=dt("sysex",(i,v)=>{if(!Array.isArray(i))throw new Error("sysex expects an array of [id, data]");const[x,T]=i;return v.sysexid(x).sysexdata(T)}),{sysexid:Qx}=nt("sysexid"),{sysexdata:$x}=nt("sysexdata"),{midibend:qx}=nt("midibend"),{miditouch:_x}=nt("miditouch"),{polyTouch:ty}=nt("polyTouch"),{oschost:ey}=nt("oschost"),{oscport:iy}=nt("oscport"),On=i=>In.has(i)?In.get(i):i,sy=dt("as",(i,v)=>(i=Array.isArray(i)?i:[i],v.fmap(x=>{x=Array.isArray(x)?x:[x];const T=[];for(let F=0;F<i.length;++F)x[F]!==void 0&&T.push([On(i[F]),x[F]]);return Object.fromEntries(T)}))),ny=dt("scrub",(i,v)=>i.outerBind(x=>{Array.isArray(x)||(x=[x]);const[T,F=1]=x;return v.begin(T).mul(hh(F)).clip(1)}),!1),po=new Map,AP=(i,v,...x)=>{const T=po.get(i)??new Map,F=new Set([v,...x]);for(const D of F)T.set(String(D).toLowerCase(),v);po.set(i,T)},lh=(i,v=[])=>{for(const[x,...T]of v)AP(i,x,...T)},FP=(i,v)=>{const x=po.get(i);return x?x.get(String(v).toLowerCase())??v:v};lh("lfo",[["control","c"],["subControl","sc"],["rate","r"],["depth","dep","dr"],["depthabs","da"],["dcoffset","dc"],["shape","sh"],["skew","sk"],["curve","cu"],["sync","s"],["fxi"]]);lh("env",[["control","c"],["subControl","sc"],["attack","att","a"],["decay","dec","d"],["sustain","sus","s"],["release","rel","r"],["depth","dep","dr"],["depthabs","da"],["acurve","ac"],["dcurve","dc"],["rcurve","rc"],["fxi"]]);lh("bmod",[["bus","b"],["control","c"],["subControl","sc"],["depth","dep","dr"],["depthabs","da"],["dc"],["fxi"]]);xt.prototype.modulate=function(i,v,x){v={control:void 0,...v};const T=["lfo","env","bmod"];if(!T.includes(i))return Ie(`[core] Modulation type ${i} not found. Please use one of 'lfo', 'env', 'bmod'`),this;let F=this,D;F=F.fmap(p=>M=>({v:p,id:M})).appLeft(Ct(x));for(const[p,M]of Object.entries(v)){const t=FP(i,p),h=Ct(M);F=F.fmap(({v:g,id:o})=>a=>{if(D===void 0){let e=On(Object.keys(g).at(-1));T.includes(e)&&(e=`${e}_${[...g[e].__ids].at(-1)}`),D=e}g[i]??={__ids:new Set};const r=g[i];return o??=r.__ids.size,r[o]??={control:D},r.__ids.add(o),a===void 0?{v:g,id:o}:(t==="control"||t==="subControl"?r[o][t]=On(a):r[o][t]=a,{v:g,id:o})}).appLeft(h)}return F.fmap(({v:p})=>p)};xt.prototype.lfo=function(i,v){return this.modulate("lfo",i,v)};const ry=i=>ge({}).lfo(i);xt.prototype.env=function(i,v){return this.modulate("env",i,v)};const ay=i=>ge({}).env(i);xt.prototype.bmod=function(i,v){return this.modulate("bmod",i,v)};const oy=i=>ge({}).bmod(i),{transient:hy}=nt(["transient","transsustain"]),{FXrelease:uy,FXrel:ly,FXr:fy,fxr:dy}=nt("FXrelease","FXrel","FXr","fxr"),RP=Object.freeze(Object.defineProperty({__proto__:null,FXr:fy,FXrel:ly,FXrelease:uy,accelerate:oc,activeLabel:L1,ad:Xx,adsr:Bx,amp:dc,analyze:A0,anchor:sg,ar:Ox,as:sy,att:pc,attack:cc,bandf:X0,bandq:N0,bank:E0,bbexpr:hv,bbst:lv,begin:z0,bgain:Z1,binshift:ax,bmod:oy,bp:O0,bpa:Zv,bpattack:Yv,bpd:jv,bpdc:Em,bpdecay:kv,bpdepth:Mm,bpdepthfreq:Sm,bpdepthfrequency:Cm,bpe:Ov,bpenv:Iv,bpf:I0,bpq:V0,bpr:om,bprate:xm,bprelease:am,bps:em,bpshape:Tm,bpskew:Pm,bpsustain:tm,bpsync:ym,bus:W1,busgain:Y1,byteBeatExpression:ov,byteBeatStartTime:uv,ccn:Zx,ccv:Ux,ch:dv,channel:Av,channels:fv,chord:tg,chorus:P0,clip:xx,coarse:k0,color:Gx,colour:wx,comb:sx,compressor:Fg,compressorAttack:bg,compressorKnee:Rg,compressorRatio:Lg,compressorRelease:Dg,control:Yx,cps:gx,createParam:kr,createParams:uh,crush:J0,ctf:Lv,ctlNum:Hx,ctranspose:w1,curve:Tx,cut:Fv,cutoff:Rv,dec:L0,decay:R0,degree:D1,delay:km,delayfb:Qm,delayfeedback:jm,delayspeed:qm,delaysync:i1,delayt:t1,delaytime:_m,deltaSlide:Ex,density:PP,det:r1,detune:n1,dfb:$m,dict:ig,dictionary:eg,dist:Eg,distort:Tg,distorttype:Ag,distortvol:Pg,djf:Jm,drive:iv,dry:h1,ds:Ix,dt:e1,duck:sv,duckattack:av,duckdepth:nv,duckonset:rv,dur:Cx,duration:Mx,end:W0,enhance:ix,env:ay,expression:Og,fadeInTime:f1,fadeOutTime:l1,fadeTime:u1,fanchor:um,fft:F0,fm:wc,fm1:Bc,fm2:Xc,fm3:Ic,fm4:Oc,fm5:Nc,fm6:Vc,fm7:zc,fm8:Wc,fmatt:ap,fmatt1:op,fmatt2:hp,fmatt3:up,fmatt4:lp,fmatt5:fp,fmatt6:dp,fmatt7:cp,fmatt8:pp,fmattack:$c,fmattack1:qc,fmattack2:_c,fmattack3:tp,fmattack4:ep,fmattack5:ip,fmattack6:sp,fmattack7:np,fmattack8:rp,fmdec:wp,fmdec1:Bp,fmdec2:Xp,fmdec3:Ip,fmdec4:Op,fmdec5:Np,fmdec6:Vp,fmdec7:zp,fmdec8:Wp,fmdecay:Ep,fmdecay1:Pp,fmdecay2:Ap,fmdecay3:Fp,fmdecay4:Rp,fmdecay5:Lp,fmdecay6:bp,fmdecay7:Dp,fmdecay8:Gp,fmenv:Yc,fmenv1:Zc,fmenv2:Uc,fmenv3:Hc,fmenv4:Kc,fmenv5:Jc,fmenv6:kc,fmenv7:jc,fmenv8:Qc,fmh:vc,fmh1:mc,fmh2:gc,fmh3:xc,fmh4:yc,fmh5:Mc,fmh6:Cc,fmh7:Sc,fmh8:Tc,fmi:Ec,fmi1:Pc,fmi2:Ac,fmi3:Fc,fmi4:Rc,fmi5:Lc,fmi6:bc,fmi7:Dc,fmi8:Gc,fmrel:v0,fmrel1:m0,fmrel2:g0,fmrel3:x0,fmrel4:y0,fmrel5:M0,fmrel6:C0,fmrel7:S0,fmrel8:T0,fmrelease:a0,fmrelease1:o0,fmrelease2:h0,fmrelease3:u0,fmrelease4:l0,fmrelease5:f0,fmrelease6:d0,fmrelease7:c0,fmrelease8:p0,fmsus:$p,fmsus1:qp,fmsus2:_p,fmsus3:t0,fmsus4:e0,fmsus5:i0,fmsus6:s0,fmsus7:n0,fmsus8:r0,fmsustain:Yp,fmsustain1:Zp,fmsustain2:Up,fmsustain3:Hp,fmsustain4:Kp,fmsustain5:Jp,fmsustain6:kp,fmsustain7:jp,fmsustain8:Qp,fmwave:vp,fmwave1:mp,fmwave2:gp,fmwave3:xp,fmwave4:yp,fmwave5:Mp,fmwave6:Cp,fmwave7:Sp,fmwave8:Tp,frameRate:ux,frames:lx,freeze:$g,freq:d1,fshift:Vg,fshiftnote:zg,fshiftphase:Wg,ftype:hm,fxr:dy,gain:lc,gat:P1,gate:E1,getControlName:On,harmonic:B1,hbrick:ox,hcutoff:zm,hold:B0,hours:fx,hp:Ym,hpa:Wv,hpattack:zv,hpd:Jv,hpdc:Gm,hpdecay:Kv,hpdepth:Rm,hpdepthfreq:bm,hpdepthfrequency:Lm,hpe:Xv,hpenv:Bv,hpf:Wm,hpq:Um,hpr:rm,hprate:Am,hprelease:nm,hps:_v,hpshape:Dm,hpskew:wm,hpsustain:qv,hpsync:Fm,hresonance:Zm,imag:ex,ir:pg,irbegin:gg,iresponse:vg,irspeed:mg,isControlName:gd,kcutoff:Ug,krush:Zg,label:b1,lbrick:hx,legato:yx,leslie:A1,lfo:ry,lock:s1,loop:Y0,loopBegin:Z0,loopEnd:H0,loopb:U0,loope:K0,lp:Dv,lpa:Vv,lpattack:Nv,lpd:Hv,lpdc:mm,lpdecay:Uv,lpdepth:dm,lpdepthfreq:pm,lpdepthfrequency:cm,lpe:wv,lpenv:Gv,lpf:bv,lpq:Km,lpr:sm,lprate:lm,lprelease:im,lps:$v,lpshape:vm,lpskew:gm,lpsustain:Qv,lpsync:fm,lrate:F1,lsize:R1,midibend:qx,midichan:Nx,midicmd:Wx,midimap:Vx,midiport:zx,miditouch:_x,minutes:dx,mode:ag,mtranspose:G1,n:ac,noise:Om,note:Si,nrpnn:Kx,nrpv:Jx,nudge:O1,oct:V1,octave:N1,octaveR:I1,octaves:rg,octer:Hg,octersub:Kg,octersubsub:Jg,offset:ng,orbit:z1,oschost:ey,oscport:iy,overgain:U1,overshape:H1,pan:K1,panchor:T1,panorient:Q1,panspan:J1,pansplay:k1,panwidth:j1,patt:p1,pattack:c1,pcurve:S1,pdec:m1,pdecay:v1,penv:C1,ph:gv,phasdp:Pv,phaser:xv,phasercenter:Cv,phaserdepth:Tv,phaserrate:mv,phasersweep:yv,phc:Sv,phd:Ev,phs:Mv,pitchJump:Px,pitchJumpTime:Ax,polyTouch:ty,postgain:fc,prel:M1,prelease:y1,progNum:kx,psus:x1,psustain:g1,pw:cv,pwrate:pv,pwsweep:vv,rdim:fg,real:tx,registerControl:nt,registerMultiControl:Vi,rel:w0,release:G0,resonance:Hm,rfade:cg,ring:kg,ringdf:Qg,ringf:jg,rlp:ug,room:og,roomdim:lg,roomfade:dg,roomlp:hg,roomsize:xg,rsize:Cg,s:xd,scram:rx,scrub:ny,seconds:cx,semitone:q1,shape:Sg,size:yg,slide:$1,smear:nx,songPtr:px,sound:yd,source:nc,speed:hh,spread:o1,squiz:Bg,src:rc,stepsPerOctave:X1,stretch:Gg,sus:D0,sustain:b0,sustainpedal:Ng,sysex:jx,sysexdata:$x,sysexid:Qx,sz:Mg,transient:hy,trem:Q0,tremolo:j0,tremolodepth:q0,tremolophase:tv,tremoloshape:ev,tremoloskew:_0,tremolosync:$0,triode:Yg,tsdelay:_g,uid:vx,unison:a1,unit:wg,v:Im,val:mx,vel:uc,velocity:hc,vib:Bm,vibmod:Nm,vibrato:Xm,vmod:Vm,voice:_1,vowel:Xg,warp:Od,warpatt:zd,warpattack:Vd,warpdc:Qd,warpdec:Yd,warpdecay:Wd,warpdepth:kd,warpenv:ic,warpmode:qd,warprate:Jd,warprel:Kd,warprelease:Hd,warpshape:jd,warpskew:$d,warpsus:Ud,warpsustain:Zd,warpsync:sc,waveloss:Ig,wavetablePhaseRand:ec,wavetablePosition:Cd,wavetableWarp:Nd,wavetableWarpMode:_d,wt:Md,wtatt:Ed,wtattack:Td,wtdc:Xd,wtdec:Ad,wtdecay:Pd,wtdepth:wd,wtenv:Sd,wtphaserand:tc,wtrate:Dd,wtrel:bd,wtrelease:Ld,wtshape:Bd,wtskew:Id,wtsus:Rd,wtsustain:Fd,wtsync:Gd,xsdelay:qg,zcrush:Lx,zdelay:bx,zmod:Rx,znoise:Fx,zrand:Sx,zzfx:Dx},Symbol.toStringTag,{value:"Module"})),LP=function(i,v){const[x,T]=i,[F,D]=v,[p,M]=$o(T,F);return[[T,x-T],[Ur((t,h)=>t.concat(h),p,D),M]]},bP=function(i,v){const[x,T]=i,[F,D]=v,[p,M]=$o(x,D);return[[x,T-x],[Ur((t,h)=>t.concat(h),F,p),M]]},cy=function(i,v){const[x,T]=i;return Math.min(x,T)<=1?[i,v]:cy(...x>T?LP(i,v):bP(i,v))},fh=function(i,v){const x=i<0,T=Math.abs(i),F=v-T,D=Array(T).fill([1]),p=Array(F).fill([0]),M=cy([T,F],[D,p]),t=ki(M[1][0]).concat(ki(M[1][1]));return x?t.map(h=>1-h):t},jr=function(i,v,x){const T=fh(i,v);return x?Gf(T,-x):T},DP=dt("euclid",function(i,v,x){return x.struct(jr(i,v,0))}),GP=dt("bjork",function(i,v){Array.isArray(i)||(i=[i]);const[x,T=x,F=0]=i;return v.struct(jr(x,T,F))}),{euclidrot:wP,euclidRot:BP}=dt(["euclidrot","euclidRot"],function(i,v,x,T){return T.struct(jr(i,v,x))}),py=function(i,v,x,T){if(i<1)return ce;const F=jr(i,v,0).join("").split("1").slice(1).map(D=>[D.length+1,!0]);return T.struct(rh(...F)).late(St(x).div(v))},XP=dt(["euclidLegato"],function(i,v,x){return py(i,v,0,x)}),IP=dt(["euclidLegatoRot"],function(i,v,x,T){return py(i,v,x,T)}),{euclidish:OP,eish:NP}=dt(["euclidish","eish"],function(i,v,x,T){const F=ah(fh(i,v),new Array(i).fill(1),x);return T.struct(F).setSteps(v)});function vy(i,v,x=.05,T=.1,F=.1,D=globalThis.setInterval,p=globalThis.clearInterval,M=!0){let t=0,h=0,g=10**4,o=.01;const a=s=>x=s(x);F=F||T/2;const r=()=>{const s=i(),l=s+T+F;for(h===0&&(h=s+o);h<l;)h=M?Math.round(h*g)/g:h,v(h,x,t,s),h+=x,t++};let e;const n=()=>{u(),r(),e=D(r,T*1e3)},u=()=>{e!==void 0&&p(e),e=void 0};return{setDuration:a,start:n,stop:()=>{t=0,h=0,u()},pause:()=>u(),duration:x,interval:T,getPhase:()=>h,minLatency:o}}class my{constructor({interval:v,onTrigger:x,onToggle:T,onError:F,getTime:D,latency:p=.1,setInterval:M,clearInterval:t,beforeStart:h}){this.started=!1,this.beforeStart=h,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=D,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=T,this.latency=p,this.clock=vy(D,(g,o,a,r)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=g),this.num_ticks_since_cps_change++;const e=this.num_ticks_since_cps_change*o*this.cps;try{const n=this.lastEnd;this.lastBegin=n;const u=this.num_cycles_at_cps_change+e;if(this.lastEnd=u,this.lastTick=g,g<r){console.log("skip query: too late");return}this.pattern.queryArc(n,u,{_cps:this.cps,cyclist:"cyclist"}).forEach(s=>{if(s.hasOnset()){const l=(s.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+p,c=s.duration/this.cps,d=l-g;x?.(s,d,c,this.cps,l),s.value.cps!==void 0&&this.cps!=s.value.cps&&(this.cps=s.value.cps,this.num_ticks_since_cps_change=0)}})}catch(n){Jn(n),F?.(n)}},v,.1,.1,M,t)}now(){if(!this.started)return 0;const v=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+v*this.cps}setStarted(v){this.started=v,this.onToggle?.(v)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");Ie("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){Ie("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){Ie("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(v,x=!1){this.pattern=v,x&&!this.started&&await this.start()}setCps(v=.5){this.cps!==v&&(this.cps=v,this.num_ticks_since_cps_change=0)}log(v,x,T){const F=T.filter(D=>D.hasOnset());console.log(`${v.toFixed(4)} - ${x.toFixed(4)} ${Array(F.length).fill("I").join("")}`)}}let Fn={};const gy=function(){xy()},xy=function(){Fn={}},VP=dt("timeline",function(i,v){i=Ct(i);const x=function(T){const F=!!T.controls.cyclist,D=i.query(T),p=[];for(const M of D){const t=M.value;let h;if(t===0)h=0;else if(t in Fn)h=Fn[t];else{const o=M.wholeOrPart();!F||T.span.begin.lt(o.midpoint())?h=o.begin:h=o.end}F&&(Fn[t]=h,t!==0&&delete Fn[-t]);const g=v.late(h).query(T.setSpan(M.part)).map(o=>o.setContext(o.combineContext(M)));p.push(...g)}return p};return new xt(x,v._steps)},!1),zi=function(i,v,x=!0){const T=Array.isArray(i),F=Object.keys(i).length;return i=Vf(i,Ct),F===0?ce:v.fmap(D=>{let p=D;return T&&(p=x?Math.round(p)%F:Hr(Math.round(p),0,i.length-1)),i[p]})},yy=function(i,v){return Array.isArray(v)&&([v,i]=[i,v]),zP(i,v)},zP=dt("pick",function(i,v){return zi(i,v,!1).innerJoin()}),My=dt("pickmod",function(i,v){return zi(i,v,!0).innerJoin()}),WP=dt("pickF",function(i,v,x){return x.apply(yy(i,v))}),YP=dt("pickmodF",function(i,v,x){return x.apply(My(i,v))}),ZP=dt("pickOut",function(i,v){return zi(i,v,!1).outerJoin()}),UP=dt("pickmodOut",function(i,v){return zi(i,v,!0).outerJoin()}),HP=dt("pickRestart",function(i,v){return zi(i,v,!1).restartJoin()}),KP=dt("pickmodRestart",function(i,v){return zi(i,v,!0).restartJoin()}),JP=dt("pickReset",function(i,v){return zi(i,v,!1).resetJoin()}),kP=dt("pickmodReset",function(i,v){return zi(i,v,!0).resetJoin()}),{inhabit:jP,pickSqueeze:QP}=dt(["inhabit","pickSqueeze"],function(i,v){return zi(i,v,!1).squeezeJoin()}),{inhabitmod:$P,pickmodSqueeze:qP}=dt(["inhabitmod","pickmodSqueeze"],function(i,v){return zi(i,v,!0).squeezeJoin()}),_P=(i,v)=>(v=v.map(Ct),v.length==0?ce:i.fmap(x=>{const T=di(Math.round(x),v.length);return v[T]}).squeezeJoin());class tA{constructor({onTrigger:v,onToggle:x,getTime:T}){this.started=!1,this.cps=.5,this.getTime=T,this.time_at_last_tick_message=0,this.collator=new zf({getTargetClockTime:T}),this.onToggle=x,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEwoKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkqLjAwMX1sZXQgXz0wLHI9MCxvPS41O2NvbnN0IGg9bmV3IE1hcCxtPS4xLE09bmV3IEJyb2FkY2FzdENoYW5uZWwoInN0cnVkZWx0aWNrIiksYj0ocyxlKT0+e00ucG9zdE1lc3NhZ2Uoe3R5cGU6cyxwYXlsb2FkOmV9KX0sQz1FKEwsKHMsZSx0LG4pPT57Y29uc3QgaT1yKmUsZD1zLW4sYz1uK2QsdT1pKm8sbD1fK3UsZz1uLWMtZSxmPWUqbyxwPWwrZix5PWwrZypvO2IoInRpY2siLHtiZWdpbjpsLGVuZDpwLGNwczpvLHRpbWU6bixjeWNsZTp5fSkscisrfSxtKTtsZXQgaz0hMTtjb25zdCBJPXM9PntoLnNldChzLHtzdGFydGVkOiEwfSksIWsmJihDLnN0YXJ0KCksaz0hMCl9LEE9YXN5bmMgcz0+e2guc2V0KHMse3N0YXJ0ZWQ6ITF9KTtjb25zdCBlPUFycmF5LmZyb20oaC52YWx1ZXMoKSkuc29tZSh0PT50LnN0YXJ0ZWQpOyFrfHxlfHwoQy5zdG9wKCksdygwKSxrPSExKX0sdz1zPT57cj0wLF89c30sRD1zPT57Y29uc3R7dHlwZTplLHBheWxvYWQ6dH09cztzd2l0Y2goZSl7Y2FzZSJjcHNjaGFuZ2UiOntpZih0LmNwcyE9PW8pe2NvbnN0IG49ciptO189XytuKm8sbz10LmNwcyxyPTB9YnJlYWt9Y2FzZSJzZXRjeWNsZSI6e3codC5jeWNsZSk7YnJlYWt9Y2FzZSJ0b2dnbGUiOnt0LnN0YXJ0ZWQ/SShzLmlkKTpBKHMuaWQpO2JyZWFrfX19O3NlbGYub25jb25uZWN0PWZ1bmN0aW9uKHMpe2NvbnN0IGU9cy5wb3J0c1swXTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKHQpe0QodC5kYXRhKX0pLGUuc3RhcnQoKX07ZnVuY3Rpb24gRShzLGUsdD0uMDUsbj0uMSxpPS4xKXtsZXQgZD0wLGM9MCx1PTEwKio0LGw9LjAxO2NvbnN0IGc9YT0+dD1hKHQpO2k9aXx8bi8yO2NvbnN0IGY9KCk9Pntjb25zdCBhPXMoKSxPPWErbitpO2ZvcihjPT09MCYmKGM9YStsKTtjPE87KWM9TWF0aC5yb3VuZChjKnUpL3UsYz49YSYmZShjLHQsZCxhKSxjPGEmJmNvbnNvbGUubG9nKCJUT08gTEFURSIsYyksYys9dCxkKyt9O2xldCBwO2NvbnN0IHk9KCk9PntUKCksZigpLHA9c2V0SW50ZXJ2YWwoZixuKjFlMyl9LFQ9KCk9PnAhPT12b2lkIDAmJmNsZWFySW50ZXJ2YWwocCk7cmV0dXJue3NldER1cmF0aW9uOmcsc3RhcnQ6eSxzdG9wOigpPT57ZD0wLGM9MCxUKCl9LHBhdXNlOigpPT5UKCksZHVyYXRpb246dCxpbnRlcnZhbDpuLGdldFBoYXNlOigpPT5jLG1pbkxhdGVuY3k6bH19fSkoKTsK",import.meta.url).href,import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const F=p=>{const{cps:M,begin:t,end:h,cycle:g,time:o}=p;this.cps=M,this.cycle=g;const a=this.collator.calculateOffset(o)+o;D(t,h,a),this.time_at_last_tick_message=a},D=(p,M,t)=>{this.started!==!1&&this.pattern.queryArc(p,M,{_cps:this.cps,cyclist:"neocyclist"}).forEach(h=>{if(h.hasOnset()){const g=ho(h.whole.begin-this.cycle,this.cps)+t+this.latency,o=ho(h.duration,this.cps);v?.(h,0,o,this.cps,g)}})};this.channel.onmessage=p=>{if(!this.started)return;const{payload:M,type:t}=p.data;t==="tick"&&F(M)}}sendMessage(v,x){this.worker.port.postMessage({type:v,payload:x,id:this.id})}now(){const v=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+v}setCps(v=1){this.sendMessage("cpschange",{cps:v})}setCycle(v){this.sendMessage("setcycle",{cycle:v})}setStarted(v){this.sendMessage("toggle",{started:v}),this.started=v,this.onToggle?.(v)}start(){Ie("[cyclist] start"),this.setStarted(!0)}stop(){Ie("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(v,x=!1){this.pattern=v,x&&!this.started&&this.start()}log(v,x,T){const F=T.filter(D=>D.hasOnset());console.log(`${v.toFixed(4)} - ${x.toFixed(4)} ${Array(F.length).fill("I").join("")}`)}}let vo,Cy,Sy,Ty,Ey;function mo(){if(!vo)throw new Error("no time set! use setTime to define a time source");return vo()}function Dr(i){vo=i}function Py(i){Cy=i}function eA(){return Cy?.()}function Ay(i){Sy=i}function iA(){return Sy}function Fy(i){Ty=i}function sA(){return Ty}function Ry(i){Ey=!!i}function nA(){return Ey}function go(i,v){if(v||(v="assertion failed"),!i)throw new Error(v)}let ie=class{constructor(i,v){this.type=i,v!==void 0&&(this.value=v),this.ins=[]}static parseInput(i,v){if(typeof i=="function"){if(!v)throw new Error("tried to parse function input without without passing node..");return i(v)}return typeof i=="object"?i:typeof i=="number"&&!isNaN(i)||typeof i=="string"?ci(i):(console.log(`invalid input type "${typeof i}" for node of type "${v.type}", falling back to 0. The input was:`,i),0)}};const $s=(i,v)=>new ie(i,v);let Ze=new Map;const as="poly",xo="exit";ie.prototype.inherit=function(i){return i.inputOf&&(this.inputOf=i.inputOf),i.outputOf&&(this.outputOf=i.outputOf),this};ie.prototype.toObject=function(){return JSON.parse(JSON.stringify(this))};ie.prototype.stringify=function(){return JSON.stringify(this,null,2).replaceAll('"',"'")};function Ly(i,...v){let x=1;if(v=v.map(F=>{if(Array.isArray(F)){if(F.length===1)return F[0];F=new ie(as).withIns(...F)}if(typeof F=="function"){const D=F(new ie("peek"));D.type===as&&(x=Math.max(D.ins.length,x))}return F.type===as&&(x=Math.max(F.ins.length,x)),F}),x===1){const F=$s(i);return F.withIns(...v.map(D=>ie.parseInput(D,F)))}if(i===xo){const F=v.map(D=>D.type===as?D.ins.map(p=>ie.parseInput(p).inherit(p)):D).flat();return $s(xo).withIns(...F)}const T=Array.from({length:x},(F,D)=>{const p=new ie(i),M=v.map(t=>t.type===as?ie.parseInput(t.ins[D%t.ins.length],p).inherit(t):(t=ie.parseInput(t,p),t.type===as&&(t=t.ins[D]),t));return p.withIns(...M)});return new ie(as).withIns(...T)}function rA(i,v){const x=Ze.get(i);return x?.ins?.[v]?x.ins[v].name:""}let Lt=(i,v)=>Oe(i,(...x)=>Ly(i,...x),v);Ze.set("register",{tags:["meta"],graph:!1,description:"Registers a new Node function. Sets it on the prototype + returns the function itself. Like `module` but doesn't hide complexity in graph viz.",examples:[`let kick = register('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let Oe=(i,v,x)=>(x&&Ze.set(i,x),ie.prototype[i]=function(...T){return v(this,...T)},ie.prototype["_"+i]=function(){return this},v);Ze.set("module",{tags:["meta"],graph:!0,description:"Creates a module. Like `register`, but the graph viz will hide the internal complexity of the module.",examples:[`let kick = module('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let aA=0;function ai(i,v,x){return Oe(i,(...T)=>{const F=aA++;return T=T.map((D,p)=>ie.parseInput(D).asModuleInput?.(i,F,p)),v(...T).asModuleOutput?.(i,F)},x)}Ze.set("n",{tags:["math"],description:"Constant value node. Turns a number into a Node.",ins:[{name:"value",default:0}]});function ci(i){return Array.isArray(i)?poly(...i.map(v=>ci(v))):typeof i=="object"?i:$s("n",i)}Ze.set("out",{tags:["meta"],description:"Sends the node to the audio output"});Ze.set("withIns",{internal:!0,tags:["innards"],description:"Sets the inputs of a node. Returns the node itself",ins:[{name:"in",dynamic:!0}]});ie.prototype.withIns=function(...i){return this.ins=i,this};Ze.set("flatten",{internal:!0,tags:["innards"],description:"Flattens the node to a list of all nodes in the graph, where each Node's ins are now indices"});ie.prototype.flatten=function(){return hA(this)};Ze.set("apply",{graph:!0,tags:["meta"],description:"Applies the given function to the Node. Useful when a node has to be used multiple times.",examples:[`impulse(4)
.apply(imp=>imp
  .seq(110,220,330,440)
  .sine()
  .mul( imp.ad(.1,.1) )
).out()`]});ie.prototype.apply=function(i){return i(this)};Ze.set("clone",{internal:!0,tags:["innards"],description:"Clones the node"});ie.prototype.clone=function(){return new ie(this.type,this.value).withIns(...this.ins)};Ze.set("map",{tags:["meta"],description:"Applies the given function to all ins if it's poly node. Otherwise it applies the function to itself.",examples:[`n([110,220,330])
.map( freq=>freq.mul([1,1.007]).saw().mix() )
.mix(2).mul(.5).out()`]});ie.prototype.map=function(i){return this.type!=="poly"?i(this):poly(...this.ins.map(i))};ie.prototype.channel=function(i){return this.type!=="poly"?this:this.ins[i%this.ins.length]};Ze.set("select",{tags:["meta"],graph:!0,description:"Find the first occurence of the given type up in the graph and returns the match. Useful to exit a feedback loop at another point.",examples:[`sine(220).mul(impulse(1).ad(.001,.2))
.add( x=>x.delay(.2).mul(.8) )
.select('delay').out()
`]});ie.prototype.select=function(i){for(let v of this.ins){if(v.type===i)return v;const x=v.select(i);if(x)return x}};Ze.set("debug",{tags:["meta"],description:"Logs the node to the console"});ie.prototype.debug=function(i=v=>v){return console.log(i(this)),this};function oA(i){const v=modules.get(i),x=Array.from({length:v.length},(F,D)=>$s(`$INPUT${D}`)),T=v(...x);return JSON.stringify(T,null,2)}function hA(i){const v=[];return dh(i,x=>(v.push(x),x)),v.map(x=>{let T={...x,type:x.type,ins:x.ins.map(F=>v.indexOf(F)+"")};return x.value!==void 0&&(T.value=x.value),x.to!==void 0&&(T.to=v.indexOf(x.to)),T})}let by=Lt("exit",{internal:!0});function Dy(i,v){let x=[];const T=Oe("out",function(F,D=[0,1]){return x.push(F.output(D)),F});return v?(v.out=T,Function(...Object.keys(v),i)(...Object.values(v))):(globalThis.out=T,Function(i)()),by(...x)}ie.prototype.over=function(i){return this.apply(v=>add(v,i(v)))};ie.prototype.dfs=function(i,v){return this.apply(x=>dh(x,i,v))};ie.prototype.apply2=function(i){return i(this,this)};let dh=(i,v,x=[])=>(i=v(i,x),x.push(i),i.ins=i.ins.map(T=>x.includes(T)?T:dh(T,v,x)),i);ie.prototype.asModuleInput=function(i,v,x){return this.inputOf=this.inputOf||[],this.inputOf.push([i,v,x]),this};ie.prototype.asModuleOutput=function(i,v){return this.outputOf=[i,v],this};function ch(i,v={}){const{log:x=!1,lang:T="js",fallbackType:F="thru",constType:D="n",getRegister:p=e=>`r[${e}]`,getOutput:M=e=>`o[${e}]`,getSource:t=e=>`s[${e}]`}=v;x&&console.log("compile",i);const h=uA(i);let g=[],o=e=>h[e].type!==D?p(e):typeof h[e].value=="string"?`"${h[e].value}"`:h[e].value;const a=[];for(let e in h){const n=h[e],u=h[e].ins.map(d=>o(h.indexOf(d))),s=a.length;let l=Ze.get(n.type);l||(console.warn(`unhandled node type "${h[e].type}". falling back to "${F}"`),l=Ze.get(F));const c={vars:u,node:n,nodes:h,id:e,ugenIndex:s,ugen:l.ugen,name:o(e),lang:T,getRegister:p,getOutput:M,getSource:t};l.compile&&g.push(l.compile(c)),l.ugen&&a.push({type:l.ugen,inputs:u})}const r=g.join(`
`);return x&&(console.log("compiled code:"),console.log(r)),{src:r,ugens:a,registers:h.length}}ie.prototype.compile=function(i){return ch(this,i)};function uA(i){const v=[],x=new Set;function T(F){if(!(typeof F!="object"||x.has(F))){x.add(F);for(let D in F.ins)T(F.ins[D]);v.push(F)}}return T(i),v}const Hu=Object.freeze(Object.defineProperty({__proto__:null,compile:ch},Symbol.toStringTag,{value:"Module"}));class Gy{constructor(){this._events={}}on(v,x){this._events[v]||(this._events[v]=[]);let T=this._events[v];go(T.indexOf(x)==-1),T.push(x)}removeListener(v,x){let T=this._events[v],F=T.indexOf(x);F!=-1&&T.splice(F,1)}trigger(v,...x){let T=this._events[v]||[];for(let F=0;F<T.length;F++)T[F].apply(null,x)}}class lA extends Gy{constructor(v=navigator){super(),this.midiAccess=null,this.getMIDIAccess(v)}async getMIDIAccess(v){if("requestMIDIAccess"in v){this.midiAccess=await v.requestMIDIAccess({sysex:!1}),console.log("got MIDI access");for(let x of this.midiAccess.inputs.values())x.state=="connected"&&(x.onmidimessage=T=>this.trigger("midimessage",x.id,T.data));this.midiAccess.onstatechange=x=>{x.port.type=="input"&&x.port.state=="connected"&&(console.log("MIDI device connected:",x.port.name,"PORT:",x.port.id),x.port.onmidimessage=T=>this.trigger("midimessage",x.port.id,T.data))}}}broadcast(v,x){if(midi)for(let T of this.midiAccess.outputs.values())T.send(v,x)}}function fA(i){let v=i[0]&240,x=(i[0]&15)+1;if(v==176&&i.length==3){let T=i[1],F=i[2]/127*2-1;return{type:"CC",channel:x,cc:T,value:F}}if(v==224&&i.length==3){let T=i[1],F=(i[2]<<7|T)/16383*2-1;return{type:"PITCHBEND",channel:x,value:F}}if(v==144&&i.length==3){let T=i[1],F=i[2]/127;return{type:"NOTE_ON",channel:x,note:T,velocity:F}}if(v==128&&i.length==3){let T=i[1];return{type:"NOTE_ON",channel:x,note:T,velocity:0}}}class dA extends Gy{constructor(){super(),this.attach()}attach(){typeof window<"u"&&(this.handleMouseMove=v=>{const x=v.clientX/document.body.clientWidth*2-1,T=v.clientY/document.body.clientHeight*2-1;this.trigger("move",x,T)},document.addEventListener("mousemove",this.handleMouseMove))}detach(){typeof window<"u"&&document.removeEventListener("mousemove",this.handleMouseMove)}}const cA="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGcoaCx0KXtpZih0fHwodD0iYXNzZXJ0aW9uIGZhaWxlZCIpLCFoKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBTKGgsdCxzKXtyZXR1cm4gaDw9MD90Omg+PTE/czp0K2gqKHMtdCl9ZnVuY3Rpb24gUChoLHQscyl7cmV0dXJuIGg8PXQ/MDpoPj1zPzE6cz09PXQ/MDooaC10KS8ocy10KX1mdW5jdGlvbiBFKGgsdCl7cmV0dXJuIGg8dD8oaC89dCxoK2gtaCpoLTEpOmg+MS10PyhoPShoLTEpL3QsaCpoK2graCsxKTowfWZ1bmN0aW9uIFUoaCl7cmV0dXJuIE1hdGguZmxvb3IoaCk9PT1ofWZ1bmN0aW9uIF8oaCl7cmV0dXJuIFUoaCkmJmg+MH1mdW5jdGlvbiBrKGgsdCl7dD1NYXRoLm1pbihNYXRoLm1heCh0LDApLDEpLHQtPS4wMTt2YXIgcz0yKnQvKDEtdCksZT0oMStzKSpoLygxK3MqTWF0aC5hYnMoaCkpO3JldHVybiBlfWZ1bmN0aW9uIHcoaCx0LHMpe3JldHVybiBoPj0xP3M6dCtoKihzLXQpfWZ1bmN0aW9uIFQoKXt0aGlzLnN0YXRlPSJvZmYiLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5zdGFydFZhbD0wfVQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oaCx0LHMsZSxpLG4pe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcj1oLXRoaXMuc3RhcnRUaW1lO3JldHVybiByPnM/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1oLDEpOncoci9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCByPWgtdGhpcy5zdGFydFRpbWUsbD13KHIvZSwxLGkpO3JldHVybiB0PD0wPyh0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1oLHRoaXMuc3RhcnRWYWw9bCxsKTpyPmU/KHRoaXMuc3RhdGU9InN1c3RhaW4iLHRoaXMuc3RhcnRUaW1lPWgsaSk6bH1jYXNlInN1c3RhaW4iOnJldHVybiB0PD0wJiYodGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPWkpLGk7Y2FzZSJyZWxlYXNlIjp7bGV0IHI9aC10aGlzLnN0YXJ0VGltZTtpZihyPm4pcmV0dXJuIHRoaXMuc3RhdGU9Im9mZiIsMDtsZXQgbD13KHIvbix0aGlzLnN0YXJ0VmFsLDApO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPWgsdGhpcy5zdGFydFZhbD1sKSxsfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn07ZnVuY3Rpb24gdigpe3RoaXMuczA9MCx0aGlzLnMxPTB9di5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oaCx0LHMpe2coIWlzTmFOKGgpLCJOYU4gdmFsdWUgZmVkIGluIFR3b1BvbGVGaWx0ZXIiKSx0PU1hdGgubWluKHQsMSkscz1NYXRoLm1heChzLDApO3ZhciBlPU1hdGgucG93KC41LCgxLXQpLy4xMjUpLGk9TWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSksbj0xLWkqZSxyPXRoaXMuczAsbD10aGlzLnMxO3JldHVybiByPW4qci1lKmwrZSpoLGw9bipsK2UqcixoPWwsdGhpcy5zMD1yLHRoaXMuczE9bCxofTtsZXQgQT1jbGFzcyBDe2NvbnN0cnVjdG9yKHQscyl7dGhpcy5zYW1wbGVSYXRlPXQscz90aGlzLmJ1ZmZlcj1zLnNsaWNlKDApOih0aGlzLmJ1ZmZlcj1uZXcgRmxvYXQzMkFycmF5KDEwKnQpLHRoaXMuYnVmZmVyLmZpbGwoMCkpLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1yZXNldCgpe3RoaXMuYnVmZmVyLmZpbGwoMCksdGhpcy53cml0ZUlkeD0wLHRoaXMucmVhZElkeD0wfWNsb25lKCl7Y29uc3QgdD1uZXcgQyh0aGlzLnNhbXBsZVJhdGUsdGhpcy5idWZmZXIpO3JldHVybiB0LndyaXRlSWR4PXRoaXMud3JpdGVJZHgsdC5yZWFkSWR4PXRoaXMucmVhZElkeCx0fXdyaXRlKHQscyl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09dDtsZXQgZT1NYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuc2FtcGxlUmF0ZSpzKSx0aGlzLmJ1ZmZlci5sZW5ndGgtMSk7dGhpcy5yZWFkSWR4PXRoaXMud3JpdGVJZHgtZSx0aGlzLnJlYWRJZHg8MCYmKHRoaXMucmVhZElkeCs9dGhpcy5idWZmZXIubGVuZ3RoKX1yZWFkKCl7cmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMucmVhZElkeF19fTtjb25zdCB5PTEvNDhlMyxNPTI0LE49TS80O2NsYXNzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgcSBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5lbnY9bmV3IFR9dXBkYXRlKHQscyxlLGksbixyKXtyZXR1cm4gdGhpcy5lbnYuZXZhbCh0LHMsZSxpLG4scil9fWNsYXNzIEYgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9TSp0LzYwLGU9LjU7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSpzLHRoaXMucGhhc2UlMTxlPzE6LTF9fWNsYXNzIEQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuaW5TZ249ITAsdGhpcy5vdXRTZ249ITAsdGhpcy5jbG9ja0NudD0wfXVwZGF0ZSh0LHMpe2xldCBlPXQ+MDtyZXR1cm4gdGhpcy5pblNnbiE9ZSYmKHRoaXMuY2xvY2tDbnQrKyx0aGlzLmNsb2NrQ250Pj1zJiYodGhpcy5jbG9ja0NudD0wLHRoaXMub3V0U2duPSF0aGlzLm91dFNnbikpLHRoaXMuaW5TZ249ZSx0aGlzLm91dFNnbj8xOi0xfX1jbGFzcyBMIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBPPW5ldyBNYXA7Y2xhc3MgViBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1zLmlucHV0c1syXTtuJiZPLmhhcyhuKT90aGlzLmRlbGF5PU8uZ2V0KG4pLmNsb25lKCk6dGhpcy5kZWxheT1uZXcgQShlKSxuJiZPLnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIEcgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBrKHQscyl9fWNsYXNzIFIgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIEJ7Y29uc3RydWN0b3IoKXt0aGlzLnZhbHVlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnZhbHVlPXQsdGhpcy52YWx1ZX19Y29uc3QgJD0zNDA7bGV0IEk9MDtjbGFzcyBIe2NvbnN0cnVjdG9yKCl7dGhpcy5jaD1JLHRoaXMuc3RhcnRfc2VlZD0kKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9MS8oMTw8MjQpLEkrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT1NYXRoLnJhbmRvbSgpKjItMX11cGRhdGUodCl7cmV0dXJuIHQ/KHRoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTEsdGhpcy52YWx1ZSk6dGhpcy52YWx1ZX19Y2xhc3MgS3t1cGRhdGUodCl7cmV0dXJuIE1hdGgucmFuZG9tKCk8dCp5P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgV3tjb25zdHJ1Y3Rvcigpe3RoaXMub3V0PTB9dXBkYXRlKCl7bGV0IHQ9TWF0aC5yYW5kb20oKSoyLTE7cmV0dXJuIHRoaXMub3V0PSh0aGlzLm91dCsuMDIqdCkvMS4wMix0aGlzLm91dH19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe3RoaXMuYjA9MCx0aGlzLmIxPTAsdGhpcy5iMj0wLHRoaXMuYjM9MCx0aGlzLmI0PTAsdGhpcy5iNT0wLHRoaXMuYjY9MH11cGRhdGUoKXtjb25zdCB0PU1hdGgucmFuZG9tKCkqMi0xO3RoaXMuYjA9Ljk5ODg2KnRoaXMuYjArdCouMDU1NTE3OSx0aGlzLmIxPS45OTMzMip0aGlzLmIxK3QqLjA3NTA3NTksdGhpcy5iMj0uOTY5KnRoaXMuYjIrdCouMTUzODUyLHRoaXMuYjM9Ljg2NjUqdGhpcy5iMyt0Ki4zMTA0ODU2LHRoaXMuYjQ9LjU1KnRoaXMuYjQrdCouNTMyOTUyMix0aGlzLmI1PS0uNzYxNip0aGlzLmI1LXQqLjAxNjg5ODtjb25zdCBzPXRoaXMuYjArdGhpcy5iMSt0aGlzLmIyK3RoaXMuYjMrdGhpcy5iNCt0aGlzLmI1K3RoaXMuYjYrdCouNTM2MjtyZXR1cm4gdGhpcy5iNj10Ki4xMTU5MjYscyouMTF9fWNsYXNzIFkgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIHogZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCxzKXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxPHM/MTotMX19Y2xhc3MgWiBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5waGFzZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxKjItMX19Y2xhc3MgSntjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9RSh0aGlzLnBoYXNlLHMpLGk9Mip0aGlzLnBoYXNlLTEtZTtyZXR1cm4gdGhpcy5waGFzZSs9cyx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlLT0xKSxpfX1jbGFzcyBRIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTAsdGhpcy5zeW5jU2duPSExfXVwZGF0ZSh0LHMsZSl7IXRoaXMuc3luY1NnbiYmcz4wJiYodGhpcy5waGFzZT0wKSx0aGlzLnN5bmNTZ249cz4wO2xldCBpPSh0aGlzLnBoYXNlK2UpJTE7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LE1hdGguc2luKGkqMipNYXRoLlBJKX19Y2xhc3MgdHR7ZEJUb0xpbmVhcih0KXtyZXR1cm4gTWF0aC5wb3coMTAsdC8yMCl9bGluZWFyVG9EQih0KXtyZXR1cm4gMjAqTWF0aC5sb2cxMCh0KX11cGRhdGUodCxzLGUpe2xldCBpPXRoaXMubGluZWFyVG9EQihNYXRoLmFicyh0KSksbj0wO3JldHVybiBpPnMmJihuPShpLXMpKigxLTEvZSkpLHRoaXMuZEJUb0xpbmVhcigtbil9fWNsYXNzIHN0IGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3RoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0O2xldCBzPXRoaXMucGhhc2UlMTtyZXR1cm4oczwuNT8yKnM6MS0yKihzLS41KSkqMi0xfX1jbGFzcyBldCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1lLzMwO2coXyhuKSksdGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheShuKSx0aGlzLndyaXRlUG9zPTB9dXBkYXRlKHQscyxlLGkpe3JldHVybiB0aGlzLmJ1ZmZlclt0aGlzLndyaXRlUG9zXT10LHRoaXMud3JpdGVQb3MrKyx0aGlzLndyaXRlUG9zJXRoaXMuYnVmZmVyLmxlbmd0aD09MCYmKHRoaXMud3JpdGVQb3M9MCx0aGlzLnNlbmQoe3R5cGU6IlNFTkRfU0FNUExFUyIsaWQ6cyxzYW1wbGVzOnRoaXMuYnVmZmVyLGNoYW5uZWxzOmUsY2hhbm5lbDppfSkpLHR9fWNsYXNzIGl0e2NvbnN0cnVjdG9yKCl7dGhpcy5sYWdVbml0PTQ0MTAsdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyp0aGlzLmxhZ1VuaXQsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgaHR7Y29uc3RydWN0b3IoKXt0aGlzLmxhc3Q9MH11cGRhdGUodCxzLGUpe2NvbnN0IGk9cyp5LG49ZSp5O2xldCByPXQtdGhpcy5sYXN0O3JldHVybiByPmk/cj1pOnI8LW4mJihyPS1uKSx0aGlzLmxhc3QrPXIsdGhpcy5sYXN0fX1jbGFzcyBhdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgbnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMX19Y2xhc3MgcnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMH19Y2xhc3MgdXQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBzPDAmJihzPTApLHM9cysxLHQ9dCpzLDQqKE1hdGguYWJzKC4yNSp0Ky4yNS1NYXRoLnJvdW5kKC4yNSp0Ky4yNSkpLS4yNSl9fWNsYXNzIGx0IGV4dGVuZHMgb3t1cGRhdGUodCl7cmV0dXJuIHR9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmcoITEpfX1nZXRGcmVxKCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMuZnJlcTtjYXNlIm9mZiI6cmV0dXJuIHRoaXMuZnJlcTtkZWZhdWx0OmcoITEpfX1nZXRWZWxvY2l0eSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLnZlbG9jaXR5O2Nhc2Uib2ZmIjpyZXR1cm4gdGhpcy52ZWxvY2l0eTtkZWZhdWx0OmcoITEpfX19Y2xhc3Mgb3QgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWdhdGUifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRHYXRlKCl9fWNsYXNzIGN0IGV4dGVuZHMgbXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlmcmVxIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0RnJlcSgpfX1jbGFzcyBkdCBleHRlbmRzIG17Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgZnR7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBwdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgYnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBndCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBtdCBleHRlbmRzIG97dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyBTdHt1cGRhdGUodCxzLGUsaSxuKXtsZXQgcj1QKHQscyxlKTtyZXR1cm4gUyhyLGksbil9fWNsYXNzIHd0e3VwZGF0ZSh0LHMsZSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQscyksZSl9fWNsYXNzIHZ0e2NvbnN0cnVjdG9yKCl7dGhpcy5oaT0hMX11cGRhdGUodCl7cmV0dXJuIXRoaXMuaGkmJnQ+MD8odGhpcy5oaT0hMCwxKToodGhpcy5oaSYmdDw9MCYmKHRoaXMuaGk9ITEpLDApfX1jbGFzcyB5dHtjb25zdHJ1Y3Rvcigpe3RoaXMueDE9MCx0aGlzLngyPTAsdGhpcy55MT0wLHRoaXMueTI9MCx0aGlzLmEwPTEsdGhpcy5hMT0wLHRoaXMuYTI9MCx0aGlzLmIwPTEsdGhpcy5iMT0wLHRoaXMuYjI9MH11cGRhdGUodD0wLHM9MCxlPTUwMCxpPTEsbj0xKXtjb25zdCByPTIqTWF0aC5QSSplL3NhbXBsZVJhdGUsbD1NYXRoLnNpbihyKTtpPU1hdGgucG93KDEwLGkvMjApO2NvbnN0IHU9bC8oMippKSxjPU1hdGguY29zKHIpO2lmKHM9PT0wKXRoaXMuYjE9MS1jLHRoaXMuYjA9dGhpcy5iMS8yLHRoaXMuYjI9dGhpcy5iMCx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09MSl0aGlzLmIwPSgxK2MpLzIsdGhpcy5iMT0tKDErYyksdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0yKXRoaXMuYjA9bC8yLHRoaXMuYjE9MCx0aGlzLmIyPS10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0zKXRoaXMuYjA9MSx0aGlzLmIxPS0yKmMsdGhpcy5iMj0xLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT00KXRoaXMuYjA9MS11LHRoaXMuYjE9LTIqYyx0aGlzLmIyPTErdSx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09NSl7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKTt0aGlzLmIwPTErdSphLHRoaXMuYjE9LTIqYyx0aGlzLmIyPTEtdSphLHRoaXMuYTA9MSt1L2EsdGhpcy5hMT0tMipjLHRoaXMuYTI9MS11L2F9ZWxzZSBpZihzPT09Nil7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKSxkPTIqTWF0aC5zcXJ0KGEpKnUsZj0oYS0xKSpjLHA9KGErMSkqYzt0aGlzLmIwPWEqKGErMS1mK2QpLHRoaXMuYjE9MiphKihhLTEtcCksdGhpcy5iMj1hKihhKzEtZi1kKSx0aGlzLmEwPWErMStmK2QsdGhpcy5hMT0tMiooYS0xK3ApLHRoaXMuYTI9YSsxK2YtZH1lbHNlIGlmKHM9PT03KXtjb25zdCBhPU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQoYSkqdSxmPShhLTEpKmMscD0oYSsxKSpjO3RoaXMuYjA9YSooYSsxK2YrZCksdGhpcy5iMT0tMiphKihhLTErcCksdGhpcy5iMj1hKihhKzErZi1kKSx0aGlzLmEwPWErMS1mK2QsdGhpcy5hMT0yKihhLTEtcCksdGhpcy5hMj1hKzEtZi1kfXRoaXMuYjAvPXRoaXMuYTAsdGhpcy5iMS89dGhpcy5hMCx0aGlzLmIyLz10aGlzLmEwLHRoaXMuYTEvPXRoaXMuYTAsdGhpcy5hMi89dGhpcy5hMCx0aGlzLmEwPTE7Y29uc3QgYj10aGlzLmIwKnQrdGhpcy5iMSp0aGlzLngxK3RoaXMuYjIqdGhpcy54Mi10aGlzLmExKnRoaXMueTEtdGhpcy5hMip0aGlzLnkyO3JldHVybiB0aGlzLngyPXRoaXMueDEsdGhpcy54MT10LHRoaXMueTI9dGhpcy55MSx0aGlzLnkxPWIsYn19Y29uc3QgTXQ9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLEFEU1JOb2RlOnEsQXVkaW9JbjpsdCxBdWRpb05vZGU6byxCUEY6cnQsQmlxdWFkRmlsdGVyOnl0LEJyb3duTm9pc2VPc2M6VyxDQzpwdCxDTE9DS19QUFE6TSxDTE9DS19QUFM6TixDbGlwOnd0LENsb2NrOkYsQ2xvY2tEaXY6RCxDbG9ja091dDpMLERlbGF5OlYsRGlzdG9ydDpHLER1c3RPc2M6SyxGaWx0ZXI6bnQsRm9sZDp1dCxIb2xkOlIsSW1wdWxzZU9zYzpZLExhZzppdCxMY2dOb2lzZTpILE1pZGlDQzpidCxNaWRpRnJlcTpjdCxNaWRpR2F0ZTpvdCxNaWRpSW46bSxNaWRpVmVsOmR0LE5vaXNlT3NjOmosT3V0cHV0OkIsUGljazptdCxQaW5rTm9pc2U6WCxQdWxzZU9zYzp6LFJlbWFwOlN0LFNhd09zYzpKLFNjb3BlOmV0LFNlcXVlbmNlOmd0LFNpZGVjaGFpbkNvbXByZXNzb3I6dHQsU2lnbmFsOmZ0LFNpbmVPc2M6USxTbGV3Omh0LFNsaWRlOmF0LFRyaU9zYzpzdCxUcmlnOnZ0LFphd09zYzpafSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpLHg9bmV3IE1hcChPYmplY3QuZW50cmllcyhNdCkpO2NsYXNzIE90e2NvbnN0cnVjdG9yKHQscyl7Zyh0PT00OGUzKSx0aGlzLnNhbXBsZVJhdGU9dCx0aGlzLnBsYXlQb3M9MCx0aGlzLnNlbmQ9cyx0aGlzLnVuaXRzPVtdLHRoaXMudW5pdElEPTAsdGhpcy5mYWRlVGltZT0uMDEsdGhpcy5tYXhVbml0cz0xLHRoaXMucT1bXX1mYWRlT3V0VW5pdCh0KXt0LmZhZGVPdXQodGhpcy5wbGF5UG9zLHRoaXMuZmFkZVRpbWUpLHRoaXMuZnJlZVVuaXQodC5pZCx0aGlzLmZhZGVUaW1lKX1mYWRlT3V0VW5pdEJ5SWQodCl7Y29uc3Qgcz10aGlzLnVuaXRzLmZpbmQoZT0+ZS5pZD09PXQpO3MmJnRoaXMuZmFkZU91dFVuaXQocyl9ZmFkZU91dEFsbFVuaXRzKCl7dGhpcy51bml0cy5mb3JFYWNoKHQ9PnRoaXMuZmFkZU91dFVuaXQodCkpfWZhZGVPdXRPbGRVbml0cygpe2NvbnN0IHQ9dGhpcy51bml0cy5maWx0ZXIoZT0+ZS5hY3RpdmUpLHM9dC5sZW5ndGgtdGhpcy5tYXhVbml0cztzPD0wfHx0LnNsaWNlKDAscykuZm9yRWFjaChlPT50aGlzLmZhZGVPdXRVbml0KGUpKX1zdG9wKCl7dGhpcy5mYWRlT3V0QWxsVW5pdHMoKSx0aGlzLnNlbmQoe3R5cGU6IlNUT1AiLGZhZGVUaW1lOnRoaXMuZmFkZVRpbWV9KX1zcGF3blVuaXQodCxzKXtjb25zdCBlPW5ldyB4dCh0aGlzLnVuaXRJRCsrLHQsdGhpcy5zYW1wbGVSYXRlLHRoaXMuc2VuZCk7dGhpcy51bml0cy5wdXNoKGUpLGUuZmFkZUluKHRoaXMucGxheVBvcyx0aGlzLmZhZGVUaW1lKSx0aGlzLmZhZGVPdXRPbGRVbml0cygpLGNvbnNvbGUubG9nKGBzcGF3biB1bml0ICR7ZS5pZH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApLHMmJnRoaXMuc2NoZWR1bGVNZXNzYWdlKHttc2c6e3R5cGU6IkZBREVfT1VUX1VOSVQiLGlkOmUuaWR9LHRpbWU6c30pfWZyZWVVbml0KHQscyl7aWYocyl7dGhpcy5zY2hlZHVsZU1lc3NhZ2Uoe21zZzp7dHlwZToiRlJFRV9VTklUIixpZDp0fSx0aW1lOnN9KTtyZXR1cm59Y29uc3QgZT10aGlzLnVuaXRzLmxlbmd0aDt0aGlzLnVuaXRzPXRoaXMudW5pdHMuZmlsdGVyKGk9PmkuaWQhPT10KSxlPnRoaXMudW5pdHMubGVuZ3RoJiZjb25zb2xlLmxvZyhgZnJlZSB1bml0ICR7dH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApfXBhcnNlTXNnKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UiU1BBV05fVU5JVCI6dGhpcy5zcGF3blVuaXQodC51bml0LHQuZHVyYXRpb24pO2JyZWFrO2Nhc2UiRlJFRV9VTklUIjp0aGlzLmZyZWVVbml0KHQuaWQpO2JyZWFrO2Nhc2UiRkFERV9PVVRfVU5JVCI6dGhpcy5mYWRlT3V0VW5pdEJ5SWQodC5pZCk7YnJlYWs7Y2FzZSJOT1RFX09OIjp0aGlzLm5vdGVPbih0KTticmVhaztjYXNlIkNDIjp0aGlzLm1pZGlDQyh0KTticmVhaztjYXNlIlNFVF9DT05UUk9MIjp0aGlzLnNldENvbnRyb2wodCk7YnJlYWs7Y2FzZSJGQURFX1RJTUUiOnRoaXMuZmFkZVRpbWU9TnVtYmVyKHQuZmFkZVRpbWUpO2JyZWFrO2Nhc2UiTUFYX1VOSVRTIjp0aGlzLm1heFVuaXRzPU51bWJlcih0Lm1heFVuaXRzKTticmVhaztjYXNlIlNUT1AiOnRoaXMuc3RvcCgpO2JyZWFrO2Nhc2UiU0VUX1VHRU4iOnRoaXMuYWRkVWdlbih0LmNsYXNzTmFtZSx0LnVnZW4pO2JyZWFrO2Nhc2UiU0NIRURVTEVfTVNHIjp0aGlzLnNjaGVkdWxlTWVzc2FnZSh0KTticmVhaztjYXNlIkJBVENIX01TRyI6dC5tZXNzYWdlcy5mb3JFYWNoKHM9PnRoaXMucGFyc2VNc2cocykpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihgdW5rbm93biBtZXNzYWdlIHR5cGUgJHt0LnR5cGV9YCl9fW5vdGVPbih0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5ub3RlT24odCkpfW1pZGlDQyh0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5taWRpQ0ModCkpfXNldENvbnRyb2wodCl7dGhpcy51bml0cy5mb3JFYWNoKHM9PnMuc2V0Q29udHJvbCh0KSl9c2NoZWR1bGVNZXNzYWdlKHQpe2lmKHQudGltZT10aGlzLnBsYXlQb3MrdC50aW1lLCF0aGlzLnEubGVuZ3RoKXt0aGlzLnEucHVzaCh0KTtyZXR1cm59bGV0IHM9MDtmb3IoO3M8dGhpcy5xLmxlbmd0aCYmdGhpcy5xW3NdLnRpbWU8dC50aW1lOylzKys7dGhpcy5xLnNwbGljZShzLDAsdCl9Z2VuU2FtcGxlKHQpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy5wbGF5UG9zOyl0aGlzLnBhcnNlTXNnKHRoaXMucVswXS5tc2cpLHRoaXMucS5zaGlmdCgpO2lmKCF0aGlzLnVuaXRzLmxlbmd0aClyZXR1cm5bMCwwXTtjb25zdCBzPVswLDBdO2ZvcihsZXQgZT0wO2U8dGhpcy51bml0cy5sZW5ndGg7ZSsrKXtjb25zdCBpPXRoaXMudW5pdHNbZV0sbj1pLmdldExldmVsKHRoaXMucGxheVBvcyk7aS5nZW5TYW1wbGUodGhpcy5wbGF5UG9zLGkubm9kZXMsdCxpLnJlZ2lzdGVycyxpLm91dHB1dHMsaS5zb3VyY2VzKSxzWzBdKz1pLm91dHB1dHNbMF0qbixzWzFdKz1pLm91dHB1dHNbMV0qbn1yZXR1cm4gdGhpcy5wbGF5UG9zKz0xLzQ4ZTMsc31hZGRVZ2VuKHQscyl7Y29uc3QgZT1uZXcgRnVuY3Rpb24oYCR7c307cmV0dXJuICR7dH1gKSgpO3guc2V0KHQsZSl9fWNsYXNzIHh0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3RoaXMuaWQ9dCx0aGlzLnNhbXBsZVJhdGU9ZSx0aGlzLnNlbmQ9aSx0aGlzLm5vZGVzPVtdLHRoaXMuYWN0aXZlPSEwO2ZvcihsZXQgciBpbiBzLnVnZW5zKXtjb25zdCBsPXMudWdlbnNbcl07aWYoeC5oYXMobC50eXBlKSl7Y29uc3QgdT14LmdldChsLnR5cGUpLGM9TnVtYmVyKHIpO3RoaXMubm9kZXNbY109bmV3IHUoYyxsLHRoaXMuc2FtcGxlUmF0ZSx0aGlzLnNlbmQpfWVsc2UgY29uc29sZS53YXJuKGB1bmtub3duIHVnZW4gIiR7bC50eXBlfSJgKX10aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkocy5yZWdpc3RlcnMpLmZpbGwoMCk7bGV0IG49MTY7dGhpcy5vdXRwdXRzPW5ldyBBcnJheShuKS5maWxsKDApLHRoaXMuc291cmNlcz1uZXcgQXJyYXkobikuZmlsbCgwKSxzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCmArcy5zcmMsdGhpcy5nZW5TYW1wbGU9bmV3IEZ1bmN0aW9uKCJ0aW1lIiwibm9kZXMiLCJpbnB1dCIsInIiLCJvIiwicyIscy5zcmMpfW5vdGVPbih0KXt2YXIgdSxjLGI7Y29uc3R7Y2hhbm5lbDpzLG5vdGU6ZSx2ZWxvY2l0eTppfT10LG49dGhpcy5ub2Rlcy5maWx0ZXIoYT0+YS50eXBlPT09Im1pZGlmcmVxIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSkscj10aGlzLm5vZGVzLmZpbHRlcihhPT5hLnR5cGU9PT0ibWlkaWdhdGUiJiYoYS5jaGFubmVsPT09LTF8fGEuY2hhbm5lbD09PXMpKSxsPXRoaXMubm9kZXMuZmlsdGVyKGE9PmEudHlwZT09PSJtaWRpdmVsIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSk7aWYoaT4wKXtsZXQgYT1uLmZpbmQocD0+cC5pc0ZyZWUoKSl8fG5bMF0sZD1yLmZpbmQocD0+cC5pc0ZyZWUoKSl8fHJbMF0sZj1sLmZpbmQocD0+cC5pc0ZyZWUoKSl8fGxbMF07YT09bnVsbHx8YS5ub3RlT24oZSxpKSxkPT1udWxsfHxkLm5vdGVPbihlLGkpLGY9PW51bGx8fGYubm90ZU9uKGUsaSl9ZWxzZSh1PW4uZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fHUubm90ZU9mZigpLChjPXIuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGMubm90ZU9mZigpLChiPWwuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGIubm90ZU9mZigpfW1pZGlDQyh0KXtjb25zdHtjaGFubmVsOnMsY2M6ZSx2YWx1ZTppfT10O3RoaXMubm9kZXMuZm9yRWFjaChuPT57bi50eXBlPT09Im1pZGljYyImJihuLmNoYW5uZWw9PT0tMXx8bi5jaGFubmVsPT09cykmJm4uY2NudW1iZXI9PT1lJiZuLnNldFZhbHVlKGkpfSl9c2V0Q29udHJvbCh0KXtjb25zdHt2YWx1ZTpzLGlkOmV9PXQsaT10aGlzLm5vZGVzLmZpbmQobj0+bi50eXBlPT09ImNjIiYmbi5pZD09PWUpO2kmJmkuc2V0VmFsdWUocyl9Z2V0TGV2ZWwodCl7cmV0dXJuIHRoaXMuZmFkZVN0YXJ0PT09dm9pZCAwPzA6dGhpcy5hY3RpdmU/UygodC10aGlzLmZhZGVTdGFydCkvdGhpcy5mYWRlVGltZSwwLC4zKTpTKCh0LXRoaXMuZmFkZVN0YXJ0KS90aGlzLmZhZGVUaW1lLHRoaXMuZmFkZUZyb20sMCl9ZmFkZUluKHQscyl7dGhpcy5mYWRlU3RhcnQ9dCx0aGlzLmZhZGVUaW1lPXN9ZmFkZU91dCh0LHMpe3RoaXMuZmFkZVRpbWU9cyx0aGlzLmZhZGVGcm9tPXRoaXMuZ2V0TGV2ZWwodCksdGhpcy5hY3RpdmU9ITEsdGhpcy5mYWRlU3RhcnQ9dH1pc0RvbmUodCl7cmV0dXJuIXRoaXMuYWN0aXZlJiZ0aGlzLmdldExldmVsKHQpPT09MH19Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSx0aGlzLmF1ZGlvR3JhcGg9bmV3IE90KDQ4ZTMsdGhpcy5wb3J0LnBvc3RNZXNzYWdlLmJpbmQodGhpcy5wb3J0KSl9b25tZXNzYWdlKHQpe2xldCBzPXQuZGF0YTt0aGlzLmF1ZGlvR3JhcGgucGFyc2VNc2cocyl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1zWzBdLG49dFswXVswXSxyPWlbMF0sbD1pWzFdO2ZvcihsZXQgdT0wO3U8ci5sZW5ndGg7dSsrKXtsZXRbYyxiXT10aGlzLmF1ZGlvR3JhcGguZ2VuU2FtcGxlKG4/blt1XTowKTtyW3VdPWMsbFt1XT1ifXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2FtcGxlLWdlbmVyYXRvciIsVHQpfSkoKTsK",pA="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIG4gZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiaXNSZWNvcmRpbmciLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuX2J1ZmZlclNpemU9MjA0OCx0aGlzLl9idWZmZXI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl9idWZmZXJTaXplKSx0aGlzLl9pbml0QnVmZmVyKCl9X2luaXRCdWZmZXIoKXt0aGlzLl9ieXRlc1dyaXR0ZW49MH1faXNCdWZmZXJFbXB0eSgpe3JldHVybiB0aGlzLl9ieXRlc1dyaXR0ZW49PT0wfV9pc0J1ZmZlckZ1bGwoKXtyZXR1cm4gdGhpcy5fYnl0ZXNXcml0dGVuPT09dGhpcy5fYnVmZmVyU2l6ZX1fYXBwZW5kVG9CdWZmZXIoZSl7dGhpcy5faXNCdWZmZXJGdWxsKCkmJnRoaXMuX2ZsdXNoKCksdGhpcy5fYnVmZmVyW3RoaXMuX2J5dGVzV3JpdHRlbl09ZSx0aGlzLl9ieXRlc1dyaXR0ZW4rPTF9X2ZsdXNoKCl7bGV0IGU9dGhpcy5fYnVmZmVyO3RoaXMuX2J5dGVzV3JpdHRlbjx0aGlzLl9idWZmZXJTaXplJiYoZT1lLnNsaWNlKDAsdGhpcy5fYnl0ZXNXcml0dGVuKSksdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtldmVudFR5cGU6ImRhdGEiLGF1ZGlvQnVmZmVyOmV9KSx0aGlzLl9pbml0QnVmZmVyKCl9X3JlY29yZGluZ1N0b3BwZWQoKXt0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZToic3RvcCJ9KX1wcm9jZXNzKGUsbyxoKXtjb25zdCBpPWguaXNSZWNvcmRpbmcsZj1vWzBdLHM9ZVswXSx1PWZbMF0sXz1mWzFdO2xldCByPSExO2ZvcihsZXQgdD0wO3Q8dS5sZW5ndGg7dCsrKXQ8aS5sZW5ndGgmJihyPWlbdF09PT0xKSwhciYmIXRoaXMuX2lzQnVmZmVyRW1wdHkoKSYmKHRoaXMuX2ZsdXNoKCksdGhpcy5fcmVjb3JkaW5nU3RvcHBlZCgpKSxyJiYodGhpcy5fYXBwZW5kVG9CdWZmZXIoc1swXVt0XSksdGhpcy5fYXBwZW5kVG9CdWZmZXIoc1sxXVt0XSkpLHVbdF09c1swXVt0XSxfW3RdPXNbMV1bdF07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJyZWNvcmRlciIsbil9KSgpOwo=";function vA(i,v,x){if(i.length<1)return;i[0];const T=3,F=32,D=i.map(a=>a.length).reduce((a,r)=>a+r,0),p=F/8,M=x*p,t=44,h=new ArrayBuffer(t+D*p),g=new DataView(h);cr(g,0,"RIFF"),g.setUint32(4,36+D*p,!0),cr(g,8,"WAVE"),cr(g,12,"fmt "),g.setUint32(16,16,!0),g.setUint16(20,T,!0),g.setUint16(22,x,!0),g.setUint32(24,v,!0),g.setUint32(28,v*M,!0),g.setUint16(32,M,!0),g.setUint16(34,F,!0),cr(g,36,"data"),g.setUint32(40,D*p,!0);let o=44;for(const a of i)mA(g,o,a),o+=a.length*p;return h}function cr(i,v,x){for(let T=0;T<x.length;T++)i.setUint8(v+T,x.charCodeAt(T))}function mA(i,v,x){for(var T=0;T<x.length;T++,v+=4)i.setFloat32(v,x[T],!0)}const Ku=Object.freeze(Object.defineProperty({__proto__:null,Node:ie,compile:ch,evaluate:Dy,exit:by,exportModule:oA,getInletName:rA,getNode:Ly,module:ai,n:ci,node:$s,nodeRegistry:Ze,outputType:xo,polyType:as,register:Oe,registerNode:Lt},Symbol.toStringTag,{value:"Module"}));let gA=i=>`Math.sin(${i})`,xA=i=>`Math.cos(${i})`,yA=i=>`Math.tan(${i})`,MA=i=>`Math.asin(${i})`,CA=i=>`Math.acos(${i})`,SA=i=>`Math.atan(${i})`,wy=(i,v,x)=>`${i} = ${v};${x?` /* ${x} */`:""}`,ph=(i,...v)=>wy(i.name,`nodes[${i.ugenIndex}].update(${v.join(",")})`,i.node.type),TA=i=>`(2 ** ((${i} - 69) / 12) * 440)`,EA=(i,v)=>`${i} ** ${v}`,PA=i=>`Math.exp(${i})`,AA=i=>`Math.log(${i})`,FA=(i,v)=>`${i}%${v}`,RA=i=>`Math.abs(${i})`,LA=i=>`Math.round(${i})`,bA=i=>`Math.floor(${i})`,DA=i=>`Math.sign(${i})`,GA=i=>`Math.ceil(${i})`,wA=(i,v)=>`Math.min(${i}, ${v})`,BA=(i,v)=>`Math.max(${i}, ${v})`,XA=(i,v)=>`[${i}, ${v}]`,Nn=i=>`${i}[0]`,IA=i=>`${i}[1]`,OA=(i,v)=>`(${Nn(i)} < ${Nn(v)} ? ${i} : ${v})`,NA=(i,v)=>`(${Nn(i)} > ${Nn(v)} ? ${i} : ${v})`;const VA=Object.freeze(Object.defineProperty({__proto__:null,abs:RA,ceil:GA,def:wy,defAcos:CA,defAsin:MA,defAtan:SA,defCos:xA,defSin:gA,defTan:yA,defUgen:ph,exp:PA,floor:bA,log:AA,max:BA,midinote:TA,min:wA,mod:FA,pair_a:Nn,pair_a_max:NA,pair_a_min:OA,pair_b:IA,pair_make:XA,pow:EA,round:LA,sign:DA},Symbol.toStringTag,{value:"Module"}));class zA{constructor(v=null){this.ugens=new Map,this.outputNode=v}async spawn(v,x){this.graph=v;const{src:T,ugens:F,registers:D}=v.compile({log:!1});!this.mouse&&T.includes("mouse")&&this.initMouse(),!this.midiInited&&F.some(p=>p.type.startsWith("Midi"))&&this.initMidi(),!this.audioIn&&F.some(p=>p.type==="AudioIn")&&await this.initAudioIn(),this.sendCustomUgens(),this.send({type:"SPAWN_UNIT",unit:{src:T,ugens:F,registers:D},duration:x})}registerUgen(v){this.ugens.set(v.name,v)}sendCustomUgens(){if(!this.ugens.size)return;let v=[];for(let[x,T]of this.ugens)v.push({type:"SET_UGEN",className:x,ugen:T+""});this.send({type:"BATCH_MSG",messages:v})}scheduleMessage(v,x){this.send({type:"SCHEDULE_MSG",msg:v,time:x})}setControl(v,x,T){const F={type:"SET_CONTROL",id:v,value:x};T?this.send({type:"SCHEDULE_MSG",time:T,msg:F}):this.send(F)}setControls(v){const x={type:"BATCH_MSG",messages:v.map(T=>{const F={type:"SET_CONTROL",id:T.id,value:T.value};return T.time===void 0?F:{type:"SCHEDULE_MSG",time:T.time,msg:F}})};this.send(x)}async initAudioIn(){console.log("init audio input...");const v=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});this.audioCtx.createMediaStreamSource(v).connect(this.audioWorklet)}initMidi(){console.log("init midi input..."),this.midiInited=!0,new lA().on("midimessage",(v,x)=>{const T=fA(x);T&&this.send(T)})}initMouse(){console.log("init mouse"),this.mouse=new dA,this.mouse.on("move",(v,x)=>{this.setControl("mouseX",v),this.setControl("mouseY",x)})}send(v){go(v instanceof Object),this.audioWorklet&&this.audioWorklet.port.postMessage(v)}async init(){if(!this.audioCtx){if(go(!this.audioCtx),this.audioCtx=this.outputNode?.context||new AudioContext({latencyHint:"interactive",sampleRate:48e3}),await this.audioCtx.resume(),!this.audioCtx.audioWorklet)throw new Error("Audio cannot be loaded: non-secure origin? (AudioContext.audioWorklet is undefined)");await this.audioCtx.audioWorklet.addModule(cA),await this.audioCtx.audioWorklet.addModule(pA),this.audioWorklet=new AudioWorkletNode(this.audioCtx,"sample-generator",{outputChannelCount:[2]}),this.audioWorklet.port.onmessage=v=>{const{id:x,time:T,type:F}=v.data;F==="SIGNAL_TRIGGER"?this.graph.dfs(D=>{if(D.type==="signal"&&D.id===x){const p=D.callback(T,x);isNaN(p)?p!==void 0&&console.warn(`expected number from "on" callback with id "${x}", got "${p}" instead.`):window.postMessage({type:"KABELSALAT_SET_CONTROL",value:p,id:x})}return D}):F==="STOP"?setTimeout(()=>this.destroy(),v.data.fadeTime*1e3+200):F==="SEND_SAMPLES"&&this.graph.dfs(D=>(D.type!=="scope"||D.ins.length<2||D.ins[1].value!==x||window.postMessage({type:"KABELSALAT_UPDATE_SCOPE",samples:v.data.samples,channels:v.data.channels,channel:v.data.channel,id:x}),D))},this.recorder=new window.AudioWorkletNode(this.audioCtx,"recorder"),this.audioWorklet.connect(this.recorder),this.sendCustomUgens(),this.recorder.connect(this.outputNode||this.audioCtx.destination),this.recorder.port.onmessage=v=>{if(v.data.eventType==="data"&&this.recordedBuffers.push(v.data.audioBuffer),v.data.eventType==="stop"){console.log("recording stopped");const x=vA(this.recordedBuffers,this.audioCtx.sampleRate,2);WA(x,"kabelsalat.wav","audio/wav"),this.recordedBuffers=[]}},this.recordOnPlay&&this.record()}}destroy(){this.audioWorklet?.disconnect(),this.audioWorklet=null,this.recorder?.disconnect(),this.recorder=null,!this.outputNode&&this.audioCtx?.close(),this.audioCtx=null}stop(){this.audioCtx&&this.send({type:"STOP"}),this.mouse?.detach()}record(){if(!this.audioCtx){this.recordOnPlay=!0;return}this.recordedBuffers=[],this.recorder.parameters.get("isRecording").setValueAtTime(1,0),console.log("recording started")}stopRecording(){this.recordOnPlay=!1,this.audioCtx&&this.recorder.parameters.get("isRecording").setValueAtTime(0,0)}set fadeTime(v){this.send({type:"FADE_TIME",fadeTime:v})}set maxUnits(v){this.send({type:"MAX_UNITS",maxUnits:v})}}function WA(i,v,x){const T=new Blob([i],{type:x}),F=document.createElement("a");F.href=window.URL.createObjectURL(T),F.download=v,F.click()}let YA=0;Oe("signal",(i,v)=>{const x=YA++,T=getNode("signal",i,x);return T.callback=v,T.id=x,T},{ugen:"Signal",compile:({vars:[i,v],...x})=>ph(x,i,v,"time")});let ZA=i=>`sin(${i})`,UA=i=>`cos(${i})`,HA=i=>`tan(${i})`,KA=i=>`asin(${i})`,JA=i=>`acos(${i})`,kA=i=>`atan(${i})`,yo=(i,v,x)=>`${i} = ${v};${x?` /* ${x} */`:""}`,jA=(i,...v)=>{if(v.unshift(`nodes[${i.ugenIndex}]`),i.ugen==="Sequence"||i.ugen==="Pick"){const x=v.length-2,T=`(float[${x}]){${v.slice(2).join(",")}}`;return yo(i.name,`${i.ugen}_update(${v[0]}, ${v[1]}, ${x}, ${T})`,i.ugen)}return yo(i.name,`${i.ugen}_update(${v.join(",")})`,i.ugen)},QA=i=>`pow(2.0, ((${i} - 69.0) / 12.0)) * 440.0`,$A=(i,v)=>`pow(${i}, ${v})`,qA=i=>`exp(${i})`,_A=i=>`log(${i})`,tF=(i,v)=>`${i}>=${v}?${i}-${v}:${i}`,eF=i=>`fabs(${i})`,iF=(i,v)=>`fmin(${i}, ${v})`,sF=(i,v)=>`fmax(${i}, ${v})`,nF=i=>`fround(${i})`,rF=i=>`floor(${i})`,aF=i=>`ceil(${i})`,oF=(i,v)=>`((pair) {${i}, ${v}})`,Vn=i=>`${i}.a`,hF=i=>`${i}.b`,uF=(i,v)=>`(${Vn(i)} < ${Vn(v)} ? ${i} : ${v})`,lF=(i,v)=>`(${Vn(i)} > ${Vn(v)} ? ${i} : ${v})`;const fF=Object.freeze(Object.defineProperty({__proto__:null,abs:eF,ceil:aF,def:yo,defAcos:JA,defAsin:KA,defAtan:kA,defCos:UA,defSin:ZA,defTan:HA,defUgen:jA,exp:qA,floor:rF,log:_A,max:sF,midinote:QA,min:iF,mod:tF,pair_a:Vn,pair_a_max:lF,pair_a_min:uF,pair_b:hF,pair_make:oF,pow:$A,round:nF},Symbol.toStringTag,{value:"Module"})),gt={js:VA,c:fF},By=(i,v)=>Lt(i,{ugen:v,compile:({vars:x,...T})=>gt[T.lang].defUgen(T,...x)});let dF=Oe("time",i=>new ie("time",i),{tags:["meta"],description:"Returns elapsed time in seconds",compile:({name:i,lang:v})=>gt[v].def(i,"time")}),cF=Oe("raw",(i,v)=>new ie("raw",v).withIns(ci(i)),{ins:[{name:"in"},{name:"code",description:"expression with variable `t` being the elapsed time and `$input` the input."}],tags:["meta"],description:"Raw code node, expects floats between -1 and 1",compile:({vars:i,node:v,name:x})=>`let $input = ${i[0]}; 
const ${x} = (${v.value}); // raw`,examples:[`sine(4).range(.5,1)
.raw("(time*110%1*2-1)*$input")
.out()`]}),pF=Oe("bytebeat",(i,v)=>new ie("bytebeat",v).withIns(ci(i)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"bytebeat code with variable `t`"}],tags:["meta"],description:"Bytebeat node, expects numbers from 0 to 255",examples:[`time().mul(8000).bytebeat\`
// Fractalized Past
// by: lhphr
// from: https://dollchan.net/btb/res/3.html#69

(t>>10^t>>11)%5*((t>>14&3^t>>15&1)+1)*t%99+((3+(t>>14&3)-(t>>16&1))/3*t%99&64)
\`.out()`],compile:({vars:i,node:v,name:x})=>`let t = ${i[0]}; 
const ${x} = ((${v.value}) & 255) / 127.5 - 1; // bytebeat`}),vF=Oe("floatbeat",(i,v)=>new ie("bytebeat",v).withIns(ci(i)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"floatbeat code with variable `t`"}],tags:["meta"],description:"Raw code node, expects numbers from -1 to 1",compile:({vars:i,node:v,name:x})=>`let t = ${i[0]}; const ${x} = (${v.value}); // floatbeat`}),mF=Lt("adsr",{ugen:"ADSRNode",tags:["envelope"],description:"ADSR envelope",examples:[`impulse(1).perc(.5)
.adsr(.01, .1, .5, .1)
.mul(sine(220)).out()`],ins:[{name:"gate",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"},{name:"sus",default:.2,description:"sustain level"},{name:"rel",default:.1,description:"release time"}],compile:({vars:[i=0,v=.02,x=.1,T=.2,F=.1],...D})=>gt[D.lang].defUgen(D,"time",i,v,x,T,F)}),gF=ai("ar",(i=0,v=.02,x=.1)=>i.adsr(v,0,1,x),{tags:["envelope"],description:"AR envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"rel",default:.1,description:"release time"}]}),xF=ai("ad",(i=0,v=.02,x=.1)=>i.adsr(v,x,0,x),{tags:["envelope"],description:"AD envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"}]}),yF=Lt("clock",{ugen:"Clock",internal:!0,tags:["regular","clock"],description:"Clock source, with tempo in BPM",examples:["clock(120).clockdiv(16).mul(sine(220)).out()"],ins:[{name:"bpm",default:120,description:"clock tempo in bpm (beats per minute)"}],compile:({vars:[i=120],...v})=>gt[v.lang].defUgen(v,i)}),MF=Lt("clockdiv",{ugen:"ClockDiv",tags:["clock","trigger"],description:"Clock signal divider",examples:["impulse(8).clockdiv(2).ad(.1,.1).mul(sine(220)).out()"],ins:[{name:"clock",default:0,description:"clock input"},{name:"divisor",default:2,description:"tempo divisor"}],compile:({vars:[i=0,v=2],...x})=>gt[x.lang].defUgen(x,i,v)}),CF=Lt("distort",{ugen:"Distort",tags:["fx","distortion"],description:"Overdrive-style distortion",examples:[`sine(220)
.distort( saw(.5).range(0,1) )
.out()`],ins:[{name:"in",default:0},{name:"amt",default:0,description:"distortion amount"}],compile:({vars:[i=0,v=0],...x})=>gt[x.lang].defUgen(x,i,v)}),Xy=Lt("noise",{ugen:"NoiseOsc",tags:["source","noise"],description:"White noise source",examples:["noise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."}],compile:({lang:i,vars:[v=1],...x})=>gt[i].defUgen(x,v)}),SF=Lt("lcgnoise",{ugen:"LcgNoise",tags:["source","noise"],description:"Lcg white noise source.",examples:["lcgnoise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."},{name:"reset",default:0,description:"if 1, the random number generator sequence will reset."}],compile:({lang:i,vars:[v=1,x=0],...T})=>gt[i].defUgen(T,v,x)}),TF=Lt("pink",{ugen:"PinkNoise",tags:["source","noise"],description:"Pink noise source",examples:["pink().mul(.5).out()"],ins:[],compile:({lang:i,...v})=>gt[i].defUgen(v)}),EF=Lt("brown",{ugen:"BrownNoiseOsc",tags:["source","noise"],description:"Brown noise source",examples:["brown().out()"],ins:[],compile:({lang:i,...v})=>gt[i].defUgen(v)}),PF=Lt("dust",{ugen:"DustOsc",tags:["trigger","noise","source"],description:"Generates random impulses from 0 to +1.",examples:["dust(200).out()"],ins:[{name:"density",default:0,description:"average impulses per second"}],compile:({vars:[i=0],...v})=>gt[v.lang].defUgen(v,i)}),Iy=Lt("impulse",{ugen:"ImpulseOsc",tags:["regular","trigger"],description:"Regular single sample impulses (0 - 1)",examples:["impulse(10).out()"],ins:[{name:"freq",default:0},{name:"phase",default:0}],compile:({vars:[i=0,v=0],...x})=>gt[x.lang].defUgen(x,i,v)}),AF=Lt("saw",{ugen:"SawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with anti aliasing",examples:["saw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[i=0],...v})=>gt[v.lang].defUgen(v,i)}),FF=Lt("zaw",{ugen:"ZawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with sharp edges. Use saw for anti aliased variant.",examples:["zaw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[i=0],...v})=>gt[v.lang].defUgen(v,i)}),RF=Lt("sine",{tags:["regular","waveform","source"],ugen:"SineOsc",description:"Sine wave oscillator",examples:["sine(220).out()"],ins:[{name:"freq",default:0},{name:"sync",default:0,description:"sync input"},{name:"phase",default:0,description:"phase offset"}],compile:({vars:[i=0,v=0,x=0],...T})=>gt[T.lang].defUgen(T,i,v,x)}),LF=Lt("tri",{ugen:"TriOsc",tags:["regular","waveform","source"],description:"Triangle wave oscillator",examples:["tri(220).out()"],ins:[{name:"freq",default:0}],compile:({vars:[i=0],...v})=>gt[v.lang].defUgen(v,i)}),bF=Lt("pulse",{ugen:"PulseOsc",tags:["regular","waveform","source"],description:"Pulse wave oscillator",examples:["pulse(220, sine(.1).range(.1,.5)).mul(.5).out()"],ins:[{name:"freq",default:0},{name:"pw",default:.5,description:"pulse width 0 - 1"}],compile:({vars:[i=0,v=.5],...x})=>gt[x.lang].defUgen(x,i,v)}),DF=Lt("slide",{ugen:"Slide",tags:["fx"],internal:!0,description:"Slide/portamento node",examples:[`impulse(2).seq(55,110,220,330)
.slide(4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1}],compile:({vars:[i=0,v=1],...x})=>gt[x.lang].defUgen(x,i,v)}),GF=Lt("lag",{ugen:"Lag",tags:["fx"],description:"Smoothes a signal. Good for slide / portamento effects.",examples:[`impulse(2).seq(220,330,440,550)
.lag(.4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1,description:"60 dB lag time in seconds"}],compile:({vars:[i=0,v=1],...x})=>gt[x.lang].defUgen(x,i,v)}),wF=Lt("slew",{ugen:"Slew",tags:["fx"],description:"Limits the slope of an input signal. The slope is expressed in units per second.",examples:["pulse(800).slew(4000, 4000).out()"],ins:[{name:"in",default:0},{name:"up",default:1,description:"Maximum upward slope in units per second"},{name:"dn",default:1,description:"Maximum downward slope in units per second"}],compile:({vars:[i=0,v=1,x=1],...T})=>gt[T.lang].defUgen(T,i,v,x)}),Oy=Lt("filter",{ugen:"Filter",tags:["fx","filter"],internal:!0,description:"Two-pole low-pass filter",examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"],ins:[{name:"in",default:0},{name:"cutoff",default:1},{name:"reso",default:0}],compile:({vars:[i=0,v=1,x=0],...T})=>gt[T.lang].defUgen(T,i,v,x)}),BF=Lt("fold",{ugen:"Fold",tags:["fx","distortion","limiter"],description:'Distort incoming audio signal by "folding"',examples:[`sine(55)
.fold( sine(.5).range(0.2,4) )
.out()`],ins:[{name:"in",default:0},{name:"rate",default:0}],compile:({vars:[i=0,v=0],...x})=>gt[x.lang].defUgen(x,i,v)}),XF=Lt("seq",{ugen:"Sequence",tags:["sequencer"],description:"Trigger controlled sequencer",examples:[`impulse(2).seq(220,330,440,550)
.sine().out()`],ins:[{name:"trig",default:0},{name:"step",default:0,dynamic:!0,description:"step inputs"}],compile:({vars:i,...v})=>gt[v.lang].defUgen(v,...i)}),IF=Lt("delay",{ugen:"Delay",tags:["fx"],description:"Delay line node",examples:[`impulse(1).ad(.01,.2).mul(sine(220))
.add(x=>x.delay(.1).mul(.8)).out()`],ins:[{name:"in",default:0},{name:"time",default:0}],compile:({vars:[i=0,v=0],...x})=>gt[x.lang].defUgen(x,i,v)}),OF=Lt("hold",{ugen:"Hold",tags:["fx"],description:"Sample and hold",examples:[`noise().hold(impulse(2))
.range(220,880).sine().out()`],ins:[{name:"in",default:0},{name:"trig",default:0}],compile:({vars:[i=0,v=0],...x})=>gt[x.lang].defUgen(x,i,v)}),NF=Lt("midifreq",{ugen:"MidiFreq",tags:["external","midi"],description:"Outputs frequency of midi note in. Multiple instances will do voice allocation",examples:["midifreq().sine().out()"],ins:[{name:"channel",default:-1,description:"Channel filter. Defaults to all channels"}],compile:({vars:[i=-1],...v})=>gt[v.lang].defUgen(v,i)}),VF=Lt("midigate",{ugen:"MidiGate",tags:["external","midi"],description:"outputs gate of midi note in. Multiple instances will do voice allocation",examples:["midigate().lag(1).mul(sine(220)).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[i=-1],...v})=>gt[v.lang].defUgen(v,i)}),zF=Lt("midivel",{ugen:"MidiVel",tags:["external","midi"],description:"outputs velocity of midi note in. Multiple instances will do voice allocation",examples:["midigate().ar(0.01,0.2).mul(saw(midifreq())).mul(midivel()).mul(.8).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[i=-1],...v})=>gt[v.lang].defUgen(v,i)}),WF=Lt("midicc",{ugen:"MidiCC",tags:["external","midi"],description:"Outputs bipolar value of given midi cc number. initValue can be set to be the output before getting first cc message.",examples:["midicc(74).range(100,200).sine().out()"],ins:[{name:"ccnumber",default:-1},{name:"channel",default:-1},{name:"initValue",default:-1}],compile:({vars:[i=-1,v=-1],...x})=>gt[x.lang].defUgen(x,i,v)}),vh=Lt("cc",{ugen:"CC",tags:["external"],description:"CC control",ins:[{name:"id",default:0},{name:"value",default:0}],compile:({vars:[i],...v})=>gt[v.lang].defUgen(v,i)}),YF=Lt("audioin",{ugen:"AudioIn",tags:["source","external"],description:"External Audio Input, depends on your system input",examples:["audioin().add(x=>x.delay(.1).mul(.8)).out()"],ins:[],compile:i=>gt[i.lang].defUgen(i,"input")}),Mo=Lt("log",{tags:["math"],description:"calculates the logarithm (base 10) of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].log(i))}),Ny=Lt("exp",{tags:["math"],description:"raises e to the power of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].exp(i))}),ZF=Lt("pow",{tags:["math"],description:"raises the input to the given power",ins:[{name:"in"},{name:"power"}],compile:({vars:[i=0,v=1],name:x,lang:T})=>gt[T].def(x,gt[T].pow(i,v))}),Vy=Lt("sin",{tags:["math"],description:"calculates the sine of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].defSin(i))}),zy=Lt("cos",{tags:["math"],description:"calculates the cosine of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].defCos(i))}),UF=Lt("tan",{tags:["math"],description:"calculates the tan of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].defTan(i))}),HF=Lt("acos",{tags:["math"],description:"calculates the acos of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].defAcos(i))}),KF=Lt("asin",{tags:["math"],description:"calculates the asin of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].defAsin(i))}),JF=Lt("atan",{tags:["math"],description:"calculates the atan of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].defAtan(i))}),kF=Lt("mul",{tags:["math"],description:"Multiplies the given signals.",examples:["sine(220).mul( sine(4).range(.25,1) ).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,i.join(" * ")||0)}),mh=Lt("add",{tags:["math"],description:"sums the given signals",examples:["n([0,3,7,10]).add(60).midinote().sine().mix(2).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,i.join(" + ")||0)}),jF=Lt("div",{tags:["math"],description:"adds the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,i.join(" / ")||0)}),QF=Lt("sub",{tags:["math"],description:"subtracts the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,i.join(" - ")||0)}),$F=Lt("mod",{tags:["math"],description:"calculates the modulo",examples:["add(x=>x.add(.003).mod(1)).out()"],ins:[{name:"in"},{name:"modulo"}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,gt[x].mod(...i)||0)}),qF=Lt("abs",{tags:["math"],description:"returns the absolute value of the signal",ins:[{name:"in"}],examples:["sine(440).abs().out()"],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].abs(i))}),_F=Lt("round",{tags:["math"],description:"Rounds the signal to the nearest integer",ins:[{name:"in"}],examples:["sine(440.5).round().out()"],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].round(i))}),tR=Lt("clamp",{tags:["math"],description:"Clamps the signal to stay within the given range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine(440.5).clamp(-.6,.6).out()"],compile:({vars:[i=0,v=-1,x=1],name:T,lang:F})=>{const D=gt[F].min(v,x),p=gt[F].max(v,x),M=gt[F].min(gt[F].max(i,D),p);return gt[F].def(T,M)}}),eR=Lt("floor",{tags:["math"],description:"Rounds the signal down",ins:[{name:"in"}],examples:["sine(440.5).floor().out()"],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].floor(i))}),iR=Lt("ceil",{tags:["math"],description:"Rounds the signal up",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].ceil(i))}),sR=Lt("sign",{tags:["math"],description:"Returns 1 if positive and -1 if negative. uses Math.sign",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,gt[x].sign(i))}),nR=Lt("min",{tags:["math"],description:"returns the minimum of the given signals",examples:["impulse(4).apply(x => min(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,i.reduce(gt[x].min)||0)}),rR=Lt("max",{tags:["math"],description:"returns the maximum of the given signals",examples:["impulse(4).apply(x => max(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,i.reduce(gt[x].max)||0)}),aR=Lt("argmin",{tags:["math"],description:"returns the index of the minimum of the given signals",examples:["argmin(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,gt[x].pair_b(i.map(gt[x].pair_make).reduce(gt[x].pair_a_min))||0)}),oR=Lt("argmax",{tags:["math"],description:"returns the index of the maximum of the given signals",examples:["argmax(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:v,lang:x})=>gt[x].def(v,gt[x].pair_b(i.map(gt[x].pair_make).reduce(gt[x].pair_a_max))||0)}),Wy=Lt("greater",{tags:["logic"],description:"returns 1 if input is greater then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`greater(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[i=0,v=0],name:x,lang:T})=>gt[T].def(x,`${i} > ${v}`)}),Yy=Lt("lower",{tags:["logic"],description:"returns 1 if input is lower then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`lower(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[i=0,v=0],name:x,lang:T})=>gt[T].def(x,`${i} < ${v}`)}),hR=Wy,uR=Yy,lR=Lt("xor",{tags:["logic"],description:"returns 1 if exactly one of the inputs is 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[i=0,v=0],name:x,lang:T})=>gt[T].def(x,`${i} != ${v} ? 1 : 0`)}),fR=Lt("and",{tags:["logic"],description:"returns 1 if both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[i=0,v=0],name:x,lang:T})=>gt[T].def(x,`${i} && ${v} ? 1 : 0`)}),dR=Lt("or",{tags:["logic"],description:"returns 1 if one or both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[i=0,v=0],name:x,lang:T})=>gt[T].def(x,`${i} || ${v} ? 1 : 0`)}),cR=Lt("not",{tags:["logic"],description:"returns 1 if input is 0, otherwise 0",ins:[{name:"in"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,`(${i} === 0 ? 1 : 0)`)}),pR=Lt("bool",{tags:["logic"],description:"returns 1 signal is non zero. inspired by genish",ins:[{name:"a"}],compile:({vars:[i=0],name:v,lang:x})=>gt[x].def(v,`(${i} === 0 ? 0 : 1)`)}),vR=Lt("ifelse",{tags:["logic"],description:"if control is 1, a is returned, otherwise b",ins:[{name:"control"},{name:"a"},{name:"b"}],compile:({vars:[i=0,v=0,x=0],name:T,lang:F})=>gt[F].def(T,`(${i} === 1 ? ${v} : ${x})`),examples:["ifelse(pulse(1), sine(220), sine(330)).out()"]}),mR=Lt("range",{tags:["math"],description:"Scales the incoming bipolar value to the given range.",examples:["sine(.5).range(.25,1).mul(sine(440)).out()"],ins:[{name:"in"},{name:"min"},{name:"max"}],compile:({vars:i,name:v,lang:x})=>{const[T,F,D,p=1]=i,M=`((${T} + 1) * 0.5)`,t=p===1?M:gt[x].pow(M,p);return gt[x].def(v,`${t} * (${D} - ${F}) + ${F}`)}}),gR=Lt("remap",{ugen:"Remap",tags:["math"],description:"Remaps input from one value range to another",ins:[{name:"in"},{name:"inmin"},{name:"inmax"},{name:"outmin"},{name:"outmax"}],compile:({vars:[i=0,v=-1,x=1,T=-1,F=1],...D})=>gt[D.lang].defUgen(D,i,v,x,T,F)}),xR=Lt("thru",{compile:({name:i,vars:v,lang:x})=>gt[x].def(i,v[0],"thru")}),yR=ai("rangex",(i,v,x)=>{let T=Mo(v),F=Mo(x).sub(T),D=i.unipolar().mul(F).add(T);return Ny(D)},{tags:["math"],description:"exponential range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine([1,3]).rangex(100, 2e3).sine().out()"]}),MR=Lt("midinote",{compile:({vars:[i],name:v,lang:x})=>gt[x].def(v,gt[x].midinote(i)),tags:["math"],description:"convert midi number to frequency",ins:[{name:"midi"}],examples:[`impulse(4).seq(0,3,7,12).add(60)
.midinote().sine().out()`]}),CR=Lt("src",{internal:!0,compile:({vars:[i=0],name:v,lang:x,...T})=>gt[x].def(v,T.getSource(i),`read source ${i}`)}),SR=Lt("output",{internal:!0,ugen:"Output",compile:({vars:[i,v=0],name:x,lang:T,...F})=>{const D=F.getOutput(v),p=F.getSource(v);return[gt[T].def(D,[D,i].join(" + "),`+ output ${v}`),gt[T].def(p,D,`write source ${v}`)].join(`
`)}}),Zy=Lt("poly"),Uy=ci(Math.PI),TR=Oe("fork",(i,v=1)=>Zy(...Array.from({length:v},()=>i.clone())),{ins:[{name:"in"},{name:"times"}],tags:["multi-channel"],description:"split the signal into n channels",examples:["dust(4).fork(2).adsr(.1).mul(sine(220)).out()"]}),ER=ai("perc",(i,v)=>i.adsr(0,0,1,v),{tags:["envelope"],description:"percussive envelope. usable with triggers or gates",ins:[{name:"gate"},{name:"release"}],examples:["impulse(4).perc(.1).mul( pink() ).out()"]}),PR=ai("hpf",(i,v,x=0)=>i.sub(i.lpf(v,x)),{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],examples:["tri([220,331,442]).mix().hpf(sine(.5).range(0,.9)).out()"]}),AR=ai("lpf",Oy,{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"low pass filter",tags:["fx","filter"],examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"]}),FR=Lt("bpf",{ugen:"BPF",ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],compile:({vars:[i=0,v=1,x=0],...T})=>gt[T.lang].defUgen(T,i,v,x)}),RR=ai("lfnoise",i=>Xy().hold(Iy(i)),{ins:[{name:"freq"}],description:"low frequency stepped noise.",tags:["regular","noise"],examples:["lfnoise(4).range(200,800).sine().out()"]}),LR=ai("bipolar",i=>ci(i).mul(2).sub(1),{ins:[{name:"in"}],description:"convert unipolar [0,1] signal to bipolar [-1,1]",tags:["math"]}),bR=ai("unipolar",i=>ci(i).add(1).div(2),{ins:[{name:"in"}],description:"convert bipolar [-1,1] signal to unipolar [0,1]",tags:["math"]}),DR=ai("pan",(i,v)=>(v=ci(v).add(1).mul(Uy,.25),i.mul([zy(v),Vy(v)])),{ins:[{name:"in"},{name:"pos",description:"bipolar position: -1 = left, 0 = center, 1 = right"}],description:"pans signal to stereo position. splits signal path in 2",tags:["multi-channel"],examples:["sine(220).pan(sine(.25)).out()"]}),GR=Lt("pick",{tags:["multi-channel"],ugen:"Pick",description:"Pick",ins:[{name:"index"},{name:"inputs",dynamic:!0}],description:"picks input of given index",examples:[`sine(.25).range(0,2).round()
.pick(...sine([220,330,440]).ins)
.out()`],compile:({vars:i,...v})=>gt[v.lang].defUgen(v,...i)}),wR=Lt("clip",{tags:["fx"],ugen:"Clip",description:"Hard limits the signal between lo and hi.",ins:[{name:"input"},{name:"lo"},{name:"hi"}],compile:({vars:[i=0,v=-1,x=1],...T})=>gt[T.lang].defUgen(T,i,v,x)}),BR=Lt("trig",{tags:["trigger"],ugen:"Trig",description:"Emits a trigger impulse whenever the signal becomes positive. Useful to turn gates into triggers.",ins:[{name:"input",default:0},{name:"lo",default:-1},{name:"hi",default:1}],compile:({vars:[i=0,v=-1,x=1],...T})=>gt[T.lang].defUgen(T,i,v,x),examples:[`pulse(2)
.trig() // comment out to hear difference
.ar(.01,.2)
.mul(sine(200)).out()`]}),XR=Lt("qf",{tags:["fx","filter"],ugen:"BiquadFilter",description:"biQuad Filter.",ins:[{name:"input",default:0},{name:"type",default:0,description:"filter type: 0 = lowpass, 1 = highpass, 2 = band pass, 3 = notch, 4 = allpass, 5 = peaking, 6 = lowshelf, 7 = highshelf"},{name:"freq",default:500,description:"filter cutoff in Hz"},{name:"q",default:1,description:"q factor"},{name:"gain",default:1}],compile:({vars:i,...v})=>gt[v.lang].defUgen(v,...i),examples:[`pink()
.qf(
 impulse(.5).seq(0,1,2,3,4,5,6,7), // type
  tri(0.5).rangex(100, 8000),  // freq
 10, // Q
 1, // gain (only relevant for types 5-7)
).div(4).out();`]}),IR=Oe("qlpf",(i,v,x=10)=>i.qf(0,v,x),{description:"biQuad Low Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qlpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),OR=Oe("qhpf",(i,v,x=10)=>i.qf(1,v,x),{description:"biQuad High pass filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qhpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),NR=Oe("qbpf",(i,v,x=10)=>i.qf(2,v,x),{description:"biQuad Band Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qbpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),VR=Oe("qnf",(i,v,x=10)=>i.qf(3,v,x),{description:"biQuad Notch Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qnf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),zR=Oe("qapf",(i,v,x=10)=>i.qf(3,v,x),{description:"biQuad All Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`impulse(1).qapf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),WR=Oe("split",(i,v)=>i.type!=="poly"?v([i]):v(i.ins),{ins:[{name:"input"},{name:"fn"}],tags:["multi-channel"],description:"apply fn to an array of signals, one for each channel in input",examples:["sine([220,330,550]).split(chs => add(...chs)).out()"]}),YR=Oe("mix",(i,v=1)=>{if([1,2].includes(v)||(v=2,console.warn("mix only supports 1 or 2 channels atm.. falling back to 2")),i.type!=="poly")return i;if(v===2){const x=i.ins.map((T,F,D)=>{const p=(F/(D.length-1)*2-1+1)*Math.PI/4;return T.mul([Math.cos(p),Math.sin(p)]).inherit(i)});return mh(...x)}return i.ins=i.ins.map(x=>x.inherit(i)),$s("mix").withIns(...i.ins)},{compile:({vars:i,name:v,lang:x})=>gt[x].def(v,`(${i.join(" + ")})`),description:`mixes down multiple channels. Useful to make sure you get a mono or stereo signal out at the end. 
When mixing down to 2 channels, the input channels are equally distributed over the stereo image, e.g. 3 channels are panned [-1,0,1]`,ins:[{name:"in"},{name:"channels",default:1,description:"how many channels to mix down to. Only supports 1 and 2"}],tags:["multi-channel"],examples:["sine([220,330,440]).mix(2).out()"]});ie.prototype.feedback=function(i){return this.add(i)};let ZR=i=>mh(i),UR=ci,HR=ci,KR=ai("mouseX",()=>vh("mouseX"),{ins:[],description:"X position of mouse, bipolar range",tags:["external"],examples:["mouseX.range(100,800).sine().out()"]}),JR=KR(),kR=ai("mouseY",()=>vh("mouseY"),{ins:[],description:"Y position of mouse, bipolar range",tags:["external"],examples:["mouseY.range(800,100).sine().out()"]}),jR=kR(),QR=Oe("scope",(i,v)=>{let x=1;i.type==="poly"&&(x=i.ins.length);const T=getNode("scope",i,v,x);return T.type!=="poly"?(T.ins.push({type:"n",value:0,ins:[]}),T):(T.ins.forEach((F,D)=>F.ins.push({type:"n",value:D,ins:[]})),T)},{ugen:"Scope",description:"renders an an oscilloscope of the current point in the graph. expects values between -1 and 1. warning: this feature is still experimental! when using it, make sure to not switch tabs, as it might fry your browser.",compile:({vars:[i,v,x,T],...F})=>ph(F,i,v,x,T)});const Ju=Object.freeze(Object.defineProperty({__proto__:null,B:UR,PI:Uy,_:HR,abs:qF,acos:HF,ad:xF,add:mh,adsr:mF,and:fR,ar:gF,argmax:oR,argmin:aR,asin:KF,atan:JF,audioin:YF,bipolar:LR,bool:pR,bpf:FR,brown:EF,bytebeat:pF,cc:vh,ceil:iR,clamp:tR,clip:wR,clock:yF,clockdiv:MF,cos:zy,delay:IF,distort:CF,div:jF,dust:PF,exp:Ny,feedback:ZR,filter:Oy,floatbeat:vF,floor:eR,fold:BF,fork:TR,greater:Wy,gt:hR,hold:OF,hpf:PR,ifelse:vR,impulse:Iy,lag:GF,lfnoise:RR,log:Mo,lower:Yy,lpf:AR,lt:uR,max:rR,midicc:WF,midifreq:NF,midigate:VF,midinote:MR,midivel:zF,min:nR,mix:YR,mod:$F,mouseX:JR,mouseY:jR,mul:kF,noise:Xy,not:cR,or:dR,output:SR,pan:DR,perc:ER,pick:GR,pink:TF,poly:Zy,pow:ZF,pulse:bF,qapf:zR,qbpf:NR,qf:XR,qhpf:OR,qlpf:IR,qnf:VR,range:mR,rangex:yR,raw:cF,registerUgen:By,remap:gR,rng:SF,round:_F,saw:AF,scope:QR,seq:XF,sign:sR,sin:Vy,sine:RF,slew:wF,slide:DF,split:WR,src:CR,sub:QF,tan:UF,thru:xR,time:dF,tri:LF,trig:BR,unipolar:bR,xor:lR,zaw:FF},Symbol.toStringTag,{value:"Module"}));class $R{constructor({onToggle:v,onToggleRecording:x,beforeEval:T,transpiler:F,localScope:D=!1,outputNode:p=null}={}){this.outputNode=p,this.audio=new zA(this.outputNode),this.onToggle=v,this.transpiler=F,this.onToggleRecording=x,this.beforeEval=T,this.localScope=D,typeof window<"u"&&(D||(Object.assign(globalThis,Ku),Object.assign(globalThis,Ju),Object.assign(globalThis,Hu),Object.assign(globalThis,{repl:this})),window.addEventListener("message",t=>{t.data.type==="KABELSALAT_SET_CONTROL"&&this.audio.setControl(t.data.id,t.data.value)}));const M=this;ie.prototype.spawn=function(t=[0,1],h){M.audio.spawn(this.output(t).exit(),h)}}registerUgen(v,x){return this.audio.registerUgen(x),By(v,x.name)}evaluate(v){this.localScope||(Object.assign(globalThis,{audio:this.audio}),Object.assign(globalThis,{addUgen:this.registerUgen.bind(this)}));let x;this.transpiler?x=this.transpiler(v):x={output:v},this.beforeEval?.(x);let T;return this.localScope&&(T={...Ku,...Ju,...Hu,audio:this.audio,addUgen:this.registerUgen.bind(this),repl:this}),Dy(x.output,T)}async play(v){await this.audio.init(),v.ins.length&&this.audio.spawn(v),this.onToggle?.(!0)}run(v){const x=this.evaluate(v);this.play(x)}stop(){this.stopRecording(),this.audio.stop(),this.onToggle?.(!1)}record(){this.audio.record(),this.onToggleRecording?.(!0)}stopRecording(){this.audio.stopRecording(),this.onToggleRecording?.(!1)}}function qR({defaultOutput:i,onEvalError:v,beforeEval:x,beforeStart:T,afterEval:F,getTime:D,transpiler:p,onToggle:M,editPattern:t,onUpdateState:h,sync:g=!1,setInterval:o,clearInterval:a,id:r,mondo:e=!1}){const n=new $R({localScope:!0}),u={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},s={id:r},l=W=>{Object.assign(u,W),u.isDirty=u.code!==u.activeCode,u.error=u.evalError||u.schedulerError,h?.(u)},c={onTrigger:Hy({defaultOutput:i,getTime:D}),getTime:D,onToggle:W=>{l({started:W}),Ry(W),M?.(W),W||gy()},setInterval:o,clearInterval:a,beforeStart:T},d=g&&typeof SharedWorker<"u"?new tA(c):new my(c);Fy(c.onTrigger),Py(()=>d.cps);let f={},m=0,y;const S=function(){return f={},m=0,y=void 0,ce},C=W=>n.evaluate(W).compile({log:!1});function E(W){return W._Pattern?W.__pure:W}const P=async(W,O=!0)=>(W=t?.(W)||W,await d.setPattern(W,O),Ay(W),W);Dr(()=>d.now());const A=()=>d.stop(),R=()=>d.start(),G=()=>d.pause(),b=()=>d.toggle(),L=W=>(d.setCps(E(W)),ce),w=W=>(d.setCps(E(W)/60),ce);let B=[];const N=function(W){return B.push(W),ce},Y=function(W){return y=W,ce},U=()=>{xt.prototype.p=function(O){return typeof O=="string"&&(O.startsWith("_")||O.endsWith("_"))?ce:(O.includes("$")&&(O=`${O}${m}`,m++),f[O]=this,this)},xt.prototype.q=function(O){return ce};try{for(let O=1;O<10;++O)Object.defineProperty(xt.prototype,`d${O}`,{get(){return this.p(O)},configurable:!0}),Object.defineProperty(xt.prototype,`p${O}`,{get(){return this.p(O)},configurable:!0}),xt.prototype[`q${O}`]=ce}catch(O){console.warn("injectPatternMethods: error:",O)}const W=dt("cpm",function(O,V){return V._fast(O/60/d.cps)});return br({all:N,each:Y,hush:S,cpm:W,setCps:L,setcps:L,setCpm:w,setcpm:w,compileKabel:C})};return{scheduler:d,evaluate:async(W,O=!0,V=!0)=>{if(!W)throw new Error("no code to evaluate");try{l({code:W,pending:!0}),await U(),Dr(()=>d.now()),await x?.({code:W}),B=[],V&&S(),e&&(W=`mondolang\`${W}\``);let{pattern:X,meta:z}=await Uf(W,p,s);if(Object.keys(f).length){let I=[],Z=!1;for(const[J,k]of Object.entries(f)){const j=J.length>1&&J.startsWith("S");if(j&&Z===!1&&(I=[],Z=!0),!Z||Z&&j){const tt=k.withState(ht=>ht.setControls({id:J}));I.push(tt)}}y&&(I=I.map(J=>y(J))),X=xe(...I)}else y&&(X=y(X));if(B.length)for(const I of B)X=I(X);return th(X)||(X=ce),Ie("[eval] code updated"),X=await P(X,O),l({miniLocations:z?.miniLocations||[],widgets:z?.widgets||[],activeCode:W,pattern:X,evalError:void 0,schedulerError:void 0,pending:!1}),F?.({code:W,pattern:X,meta:z}),X}catch(X){Ie(`[eval] error: ${X.message}`,"error"),console.error(X),l({evalError:X,pending:!1}),v?.(X)}},start:R,stop:A,pause:G,setCps:L,setPattern:P,setCode:W=>l({code:W}),toggle:b,state:u}}const Hy=({getTime:i,defaultOutput:v})=>async(x,T,F,D,p)=>{try{(!x.context.onTrigger||!x.context.dominantTrigger)&&await v(x,T,F,D,p),x.context.onTrigger&&await x.context.onTrigger(x,i(),D,p)}catch(M){Jn(M,"getTrigger")}};function _R(i){return new xt(v=>[new Ce(void 0,v.span,i)])}const je=i=>{const v=x=>[new Ce(void 0,x.span,i(x.span.begin,x.controls))];return new xt(v)},jn=je(i=>i%1),gh=jn.toBipolar(),Qr=je(i=>1-i%1),xh=Qr.toBipolar(),yh=je(i=>Math.sin(Math.PI*2*i)),Ky=yh.fromBipolar(),tL=Ky._early(St(1).div(4)),eL=yh._early(St(1).div(4)),Jy=je(i=>Math.floor(i*2%2)),iL=Jy.toBipolar(),sL=He(jn,Qr),nL=He(gh,xh),rL=He(Qr,jn),aL=He(xh,gh),oL=je(Hs);let Mh=0,Ch=0;typeof window<"u"&&document.addEventListener("mousemove",i=>{Mh=i.clientY/document.body.clientHeight,Ch=i.clientX/document.body.clientWidth});const hL=je(()=>Mh),uL=je(()=>Mh),lL=je(()=>Ch),fL=je(()=>Ch),dL=i=>(i|=0,i^=i>>>16,i=Math.imul(i,2246822507),i^=i>>>13,i=Math.imul(i,3266489909),i^=i>>>16,i>>>0),cL=i=>Math.floor(i*536870912),pL=(i,v=0,x=0)=>{const T=i>>>0>>>0,F=Math.floor(i/4294967296)>>>0;let D=T^Math.imul(F^2246822507,3266489909);return D^=Math.imul(v^2135587861,2654435769),D^=Math.imul(x^374761393,668265261),D>>>0},ku=(i,v=0,x=0)=>dL(pL(i,v,x))/4294967296,vL=(i,v,x=0)=>{const T=cL(i);if(v===1)return ku(T,0,x);const F=new Array(v);for(let D=0;D<v;D++)F[D]=ku(T,D,x);return F},ky=i=>{const v=i<<13^i,x=v>>17^v;return x<<5^x},mL=i=>i-Math.trunc(i),gL=i=>ky(Math.trunc(mL(i/300)*536870912)),ju=i=>i%536870912/536870912,xL=(i,v)=>{if(v===1)return Math.abs(ju(i));const x=[];for(let T=0;T<v;T++)x.push(ju(i)),i=ky(i);return x},yL=(i,v)=>xL(gL(i),v);let jy="legacy";const ds=(i,v=1,x=0)=>jy==="legacy"?yL(i+x,v):vL(i,v,x),ML=(i="legacy")=>jy=i,Qy=i=>jn.range(0,i).round().segment(i),CL=i=>{const v=Ct(i).log2(0).floor().add(1);return $y(i,v)},$y=(i,v=16)=>{v=Ct(v);const x=Qy(v).mul(-1).add(v.sub(1));return Ct(i).segment(v).brshift(x).band(ge(1))},SL=i=>{const v=Ct(i).log2(0).floor().add(1);return qy(i,v)},qy=(i,v=16)=>Ct(i).withValue(x=>T=>{const F=[];for(let D=T-1;D>=0;D--)F.push(x>>D&1);return F}).appLeft(Ct(v)),TL=i=>je(v=>x=>ds(v,x).map(Math.abs)).appLeft(Ct(i)),_y=i=>je((v,x)=>{const T=ds(v.floor().add(.5),i,x.randSeed).map((D,p)=>[D,p]).sort((D,p)=>(D[0]>p[0])-(D[0]<p[0])).map(D=>D[1]),F=v.cyclePos().mul(i).floor()%i;return T[F]})._segment(i),t2=(i,v,x)=>{const T=[...Array(v).keys()].map(F=>x.zoom(St(F).div(v),St(F+1).div(v)));return i.fmap(F=>T[F].repeatCycles(v)._fast(v)).innerJoin()},EL=dt("shuffle",(i,v)=>t2(_y(i),i,v)),PL=dt("scramble",(i,v)=>t2(Th(i)._segment(i),i,v)),e2=(i,v)=>new xt(x=>{let{randSeed:T,...F}=x.controls;return T=i(T),v.query(x.setControls({...F,randSeed:T}))},v._steps),AL=dt("seed",(i,v)=>e2(()=>i,v)),ke=je((i,v)=>ds(i,1,v.randSeed)),FL=ke.toBipolar(),Sh=i=>ke.fmap(v=>v<i),RL=i=>Ct(i).fmap(Sh).innerJoin(),LL=Sh(.5),Th=i=>ke.fmap(v=>Math.trunc(v*i)),bL=i=>Ct(i).fmap(Th).innerJoin(),Eh=(i,v)=>(v=v.map(Ct),v.length==0?ce:i.range(0,v.length).fmap(x=>{const T=Math.min(Math.max(Math.floor(x),0),v.length-1);return v[T]})),$r=(i,v)=>Eh(i,v).outerJoin(),qr=(i,v)=>Eh(i,v).innerJoin(),i2=(...i)=>$r(ke,i),DL=(...i)=>qr(ke,i),GL=i2;xt.prototype.choose=function(...i){return $r(this,i)};xt.prototype.choose2=function(...i){return $r(this.fromBipolar(),i)};const s2=(...i)=>qr(ke.segment(1),i),wL=s2,n2=function(i,...v){const x=v.map(M=>Ct(M[0])),T=[];let F=ge(0);for(const M of v)F=F.add(M[1]),T.push(F);const D=Kf(T),p=function(M){const t=F.mul(M);return D.fmap(h=>g=>x[h.findIndex(o=>o>g,h)]).appLeft(t)};return i.bind(p)},BL=(...i)=>n2(...i).outerJoin(),XL=(...i)=>BL(ke,...i),r2=(...i)=>n2(ke.segment(1),...i).innerJoin(),IL=r2;function OL(i,v=0){let x=Math.floor(i),T=x+1;const F=t=>6*t**5-15*t**4+10*t**3,D=t=>h=>g=>h+F(t)*(g-h),p=ds(x,1,v),M=ds(T,1,v);return D(i-x)(p)(M)}function NL(i,v=0){const x=Math.floor(i),T=x+1,F=ds(x,1,v),D=ds(T,1,v),p=F+D,M=(i-x)/(T-x);return((t,h,g)=>t+g*(h-t))(F,p,M)/2}const VL=je((i,v)=>OL(i,v.randSeed)),zL=je((i,v)=>NL(i,v.randSeed)),WL=dt("degradeByWith",(i,v,x)=>x.fmap(T=>F=>T).appLeft(i.filterValues(T=>T>v)),!0,!0),YL=dt("degradeBy",function(i,v){return v._degradeByWith(ke,i)},!0,!0),ZL=dt("degrade",i=>i._degradeBy(.5),!0,!0),UL=dt("undegradeBy",function(i,v){return v._degradeByWith(ke.fmap(x=>1-x),i)},!0,!0),HL=dt("undegrade",i=>i._undegradeBy(.5),!0,!0),KL=dt("sometimesBy",function(i,v,x){return Ct(i).fmap(T=>xe(x._degradeBy(T),v(x._undegradeBy(1-T)))).innerJoin()}),JL=dt("sometimes",function(i,v){return v._sometimesBy(.5,i)}),kL=dt("someCyclesBy",function(i,v,x){return Ct(i).fmap(T=>xe(x._degradeByWith(ke._segment(1),T),v(x._degradeByWith(ke.fmap(F=>1-F)._segment(1),1-T)))).innerJoin()}),jL=dt("someCycles",function(i,v){return v._someCyclesBy(.5,i)}),QL=dt("often",function(i,v){return v.sometimesBy(.75,i)}),$L=dt("rarely",function(i,v){return v.sometimesBy(.25,i)}),qL=dt("almostNever",function(i,v){return v.sometimesBy(.1,i)}),_L=dt("almostAlways",function(i,v){return v.sometimesBy(.9,i)}),t4=dt("never",function(i,v){return v}),e4=dt("always",function(i,v){return i(v)});function Ph(i){Array.isArray(i)===!1&&(i=[i]);const v=Yf();return i.every(x=>{const T=Wf.get(x)??x;return v[T]})}const i4=dt("whenKey",function(i,v,x){return x.when(Ph(i),v)}),s4=dt("keyDown",function(i){return i.fmap(Ph)}),n4=new xt(function(i){return[new Ce(void 0,i.span,i.span.duration)]}),a2=new xt(function(i){return[new Ce(void 0,i.span,St(1).div(i.span.duration))]}),r4=a2,a4=new xt(function(i){const v=St(1).div(i.span.duration);return[new Ce(void 0,i.span,Math.log(v)/Math.log(2)+1)]});let Gr;try{Gr=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let Qu=Gr?.getVoices();function o4(i,v,x){Gr.cancel();const T=new SpeechSynthesisUtterance(i);T.lang=v,Qu=Gr.getVoices();const F=Qu.filter(D=>D.lang.includes(v));typeof x=="number"?T.voice=F[x%F.length]:typeof x=="string"&&(T.voice=F.find(D=>D.name===D)),speechSynthesis.speak(T)}const h4=dt("speak",function(i,v,x){return x.onTrigger(T=>{o4(T.value,i,v)})}),u4=function(i,v={}){const x=document.getElementById("code"),T="background-image:url("+i+");background-size:contain;";x.style=T;const{className:F}=x,D=(M,t)=>{({style:()=>x.style=T+";"+t,className:()=>x.className=t+" "+F})[M]()},p=Object.entries(v).filter(([M,t])=>typeof t=="function");Object.entries(v).filter(([M,t])=>typeof t=="string").forEach(([M,t])=>D(M,t)),p.length},l4=()=>{const i=document.getElementById("code");i&&(i.style="")};Ie(" @strudel/core loaded ");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const o2=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:zf,Cyclist:my,FXr:fy,FXrel:ly,FXrelease:uy,Fraction:St,Hap:Ce,Pattern:xt,State:Qs,TimeSpan:Re,__chooseWith:Eh,_brandBy:Sh,_fitslice:td,_irand:Th,_keyDown:Ph,_match:ed,_mod:di,_morph:ah,_polymeterListSteps:sd,_retime:fo,_slices:co,accelerate:oc,activeLabel:L1,ad:Xx,add:Z5,adsr:Bx,almostAlways:_L,almostNever:qL,always:e4,amp:dc,analyze:A0,anchor:sg,and:hE,apply:NE,applyN:_f,ar:Ox,arp:S5,arpWith:C5,arrange:R5,as:sy,asym:gP,att:pc,attack:cc,averageArray:Lf,backgroundImage:u4,band:j5,bandf:X0,bandq:N0,bank:E0,base64ToUnicode:Nf,bbexpr:hv,bbst:lv,beat:fP,begin:z0,berlin:zL,bgain:Z1,binary:CL,binaryL:SL,binaryN:$y,binaryNL:qy,bind:B5,binshift:ax,bite:UE,bjork:GP,bjorklund:fh,blshift:q5,bmod:oy,bor:Q5,bp:O0,bpa:Zv,bpattack:Yv,bpd:jv,bpdc:Em,bpdecay:kv,bpdepth:Mm,bpdepthfreq:Sm,bpdepthfrequency:Cm,bpe:Ov,bpenv:Iv,bpf:I0,bpq:V0,bpr:om,bprate:xm,bprelease:am,bps:em,bpshape:Tm,bpskew:Pm,bpsustain:tm,bpsync:ym,brak:t9,brand:LL,brandBy:RL,brshift:_5,bus:W1,busgain:Y1,bxor:$5,bypass:D9,byteBeatExpression:ov,byteBeatStartTime:uv,calculateSteps:x5,cat:Xn,ccn:Zx,ccv:Ux,ceil:cE,ch:dv,channel:Av,channels:fv,chebyshev:MP,choose:i2,chooseCycles:s2,chooseIn:DL,chooseInWith:qr,chooseOut:GL,chooseWith:$r,chop:eP,chord:tg,chorus:P0,chunk:M9,chunkBack:T9,chunkBackInto:b9,chunkInto:R9,chunkback:E9,chunkbackinto:L9,chunkinto:F9,clamp:Hr,cleanupUi:l4,clip:xx,coarse:k0,code2hash:l5,color:Gx,colour:wx,comb:sx,compose:qT,compress:ME,compressSpan:CE,compressor:Fg,compressorAttack:bg,compressorKnee:Rg,compressorRatio:Lg,compressorRelease:Dg,compressspan:SE,constant:_T,contract:ud,control:Yx,controls:RP,cosine:tL,cosine2:eL,cpm:VE,cps:gx,createClock:vy,createParam:kr,createParams:uh,crush:J0,ctf:Lv,ctlNum:Hx,ctranspose:w1,cubic:vP,curry:$t,curve:Tx,cut:Fv,cutoff:Rv,cycleToSeconds:ho,cyclesPer:n4,dec:L0,decay:R0,degrade:ZL,degradeBy:YL,degradeByWith:WL,degree:D1,delay:km,delayfb:Qm,delayfeedback:jm,delayspeed:qm,delaysync:i1,delayt:t1,delaytime:_m,deltaSlide:Ex,det:r1,detune:n1,dfb:$m,dict:ig,dictionary:eg,diode:mP,dist:Eg,distort:Tg,distorttype:Ag,distortvol:Pg,div:K5,djf:Jm,drawLine:Zf,drive:iv,drop:ad,dry:h1,ds:Ix,dt:e1,duck:sv,duckattack:av,duckdepth:nv,duckonset:rv,dur:Cx,duration:Mx,early:zE,echo:d9,echoWith:h9,echowith:u9,eish:NP,end:W0,enhance:ix,env:ay,eq:nE,eqt:rE,errorLogger:Jn,euclid:DP,euclidLegato:XP,euclidLegatoRot:IP,euclidRot:BP,euclidish:OP,euclidrot:wP,evalScope:br,evaluate:Uf,every:OE,expand:hd,expression:Og,extend:od,fadeInTime:f1,fadeOutTime:l1,fadeTime:u1,fanchor:um,fast:LE,fastChunk:A9,fastGap:TE,fastcat:He,fastchunk:P9,fastgap:EE,fft:F0,filter:I9,filterWhen:O9,firstOf:IE,fit:aP,flatten:ki,floor:dE,fm:wc,fm1:Bc,fm2:Xc,fm3:Ic,fm4:Oc,fm5:Nc,fm6:Vc,fm7:zc,fm8:Wc,fmatt:ap,fmatt1:op,fmatt2:hp,fmatt3:up,fmatt4:lp,fmatt5:fp,fmatt6:dp,fmatt7:cp,fmatt8:pp,fmattack:$c,fmattack1:qc,fmattack2:_c,fmattack3:tp,fmattack4:ep,fmattack5:ip,fmattack6:sp,fmattack7:np,fmattack8:rp,fmdec:wp,fmdec1:Bp,fmdec2:Xp,fmdec3:Ip,fmdec4:Op,fmdec5:Np,fmdec6:Vp,fmdec7:zp,fmdec8:Wp,fmdecay:Ep,fmdecay1:Pp,fmdecay2:Ap,fmdecay3:Fp,fmdecay4:Rp,fmdecay5:Lp,fmdecay6:bp,fmdecay7:Dp,fmdecay8:Gp,fmenv:Yc,fmenv1:Zc,fmenv2:Uc,fmenv3:Hc,fmenv4:Kc,fmenv5:Jc,fmenv6:kc,fmenv7:jc,fmenv8:Qc,fmh:vc,fmh1:mc,fmh2:gc,fmh3:xc,fmh4:yc,fmh5:Mc,fmh6:Cc,fmh7:Sc,fmh8:Tc,fmi:Ec,fmi1:Pc,fmi2:Ac,fmi3:Fc,fmi4:Rc,fmi5:Lc,fmi6:bc,fmi7:Dc,fmi8:Gc,fmrel:v0,fmrel1:m0,fmrel2:g0,fmrel3:x0,fmrel4:y0,fmrel5:M0,fmrel6:C0,fmrel7:S0,fmrel8:T0,fmrelease:a0,fmrelease1:o0,fmrelease2:h0,fmrelease3:u0,fmrelease4:l0,fmrelease5:f0,fmrelease6:d0,fmrelease7:c0,fmrelease8:p0,fmsus:$p,fmsus1:qp,fmsus2:_p,fmsus3:t0,fmsus4:e0,fmsus5:i0,fmsus6:s0,fmsus7:n0,fmsus8:r0,fmsustain:Yp,fmsustain1:Zp,fmsustain2:Up,fmsustain3:Hp,fmsustain4:Kp,fmsustain5:Jp,fmsustain6:kp,fmsustain7:jp,fmsustain8:Qp,fmwave:vp,fmwave1:mp,fmwave2:gp,fmwave3:xp,fmwave4:yp,fmwave5:Mp,fmwave6:Cp,fmwave7:Sp,fmwave8:Tp,focus:PE,focusSpan:AE,focusspan:FE,fold:xP,fractionalArgs:t5,frameRate:ux,frames:lx,freeze:$g,freq:d1,freqToMidi:ko,fromBipolar:vE,fshift:Vg,fshiftnote:zg,fshiftphase:Wg,ftype:hm,func:lE,fxr:dy,gain:lc,gap:sn,gat:P1,gate:E1,getAccidentalsOffset:Jo,getControlName:On,getCps:eA,getCurrentKeyboardState:Yf,getEventOffsetMs:JT,getFreq:Rf,getFrequency:Df,getIsStarted:nA,getPattern:iA,getPerformanceTimeSeconds:d5,getPlayableNoteValue:$T,getRandsAtTime:ds,getSoundIndex:QT,getTime:mo,getTrigger:Hy,getTriggerFunc:sA,grow:z9,gt:eE,gte:sE,hard:pP,harmonic:B1,hash2code:f5,hbrick:ox,hcutoff:zm,hold:B0,hours:fx,hp:Ym,hpa:Wv,hpattack:zv,hpd:Jv,hpdc:Gm,hpdecay:Kv,hpdepth:Rm,hpdepthfreq:bm,hpdepthfrequency:Lm,hpe:Xv,hpenv:Bv,hpf:Wm,hpq:Um,hpr:rm,hprate:Am,hprelease:nm,hps:_v,hpshape:Dm,hpskew:wm,hpsustain:qv,hpsync:Fm,hresonance:Zm,hsl:X9,hsla:B9,hurry:bE,id:Hs,imag:ex,inhabit:jP,inhabitmod:$P,innerBind:X5,inside:wE,inv:$E,invert:QE,ir:pg,irand:bL,irbegin:gg,iresponse:vg,irspeed:mg,isControlName:gd,isNote:Ds,isNoteWithOctave:ZT,isPattern:th,isaw:Qr,isaw2:xh,iter:m9,iterBack:g9,iterback:x9,itri:rL,itri2:aL,jux:o9,juxBy:r9,juxby:a9,kcutoff:Ug,keep:W5,keepif:Y5,keyAlias:Wf,keyDown:s4,krush:Zg,label:b1,lastOf:XE,late:$f,lbrick:hx,legato:yx,leslie:A1,lfo:ry,linger:HE,listRange:kn,lock:s1,logKey:Ho,logger:Ie,loop:Y0,loopAt:nP,loopAtCps:oP,loopBegin:Z0,loopEnd:H0,loopat:rP,loopatcps:hP,loopb:U0,loope:K0,lp:Dv,lpa:Vv,lpattack:Nv,lpd:Hv,lpdc:mm,lpdecay:Uv,lpdepth:dm,lpdepthfreq:pm,lpdepthfrequency:cm,lpe:wv,lpenv:Gv,lpf:bv,lpq:Km,lpr:sm,lprate:lm,lprelease:im,lps:$v,lpshape:vm,lpskew:gm,lpsustain:Qv,lpsync:fm,lrate:F1,lsize:R1,lt:tE,lte:iE,mapArgs:Qo,mask:b5,midi2note:jT,midiToFreq:js,midibend:qx,midichan:Nx,midicmd:Wx,midimap:Vx,midiport:zx,miditouch:_x,minutes:dx,mod:J5,mode:ag,morph:dP,mouseX:fL,mouseY:uL,mousex:lL,mousey:hL,mtranspose:G1,mul:H5,n:ac,nanFallback:bf,ne:aE,net:oE,never:t4,noise:Om,note:Si,noteToMidi:wi,nothing:Ai,nrpnn:Kx,nrpv:Jx,nudge:O1,numeralArgs:ii,objectMap:Vf,oct:V1,octave:N1,octaveR:I1,octaves:rg,octer:Hg,octersub:Kg,octersubsub:Jg,off:_E,offset:ng,often:QL,or:uE,orbit:z1,oschost:ey,oscport:iy,outerBind:I5,outside:BE,overgain:U1,overshape:H1,pace:id,pairs:Xf,palindrome:n9,pan:K1,panchor:T1,panorient:Q1,panspan:J1,pansplay:k1,panwidth:j1,parray:oh,parseFractional:Bf,parseNumeral:jo,partials:CP,patt:p1,pattack:c1,pcurve:S1,pdec:m1,pdecay:v1,penv:C1,per:a2,perCycle:r4,perlin:VL,perx:a4,ph:gv,phasdp:Pv,phaser:xv,phasercenter:Cv,phaserdepth:Tv,phaserrate:mv,phasersweep:yv,phases:SP,phc:Sv,phd:Ev,phs:Mv,pick:yy,pickF:WP,pickOut:ZP,pickReset:JP,pickRestart:HP,pickSqueeze:QP,pickmod:My,pickmodF:YP,pickmodOut:UP,pickmodReset:kP,pickmodRestart:KP,pickmodSqueeze:qP,pipe:wf,pitchJump:Px,pitchJumpTime:Ax,ply:RE,plyForEach:v9,plyWith:p9,pm:A5,polyBind:V5,polyTouch:ty,polymeter:Kr,polyrhythm:E5,postgain:fc,pow:k5,pr:P5,prel:M1,prelease:y1,press:s9,pressBy:i9,progNum:kx,psus:x1,psustain:g1,pure:ge,pw:cv,pwrate:pv,pwsweep:vv,rand:ke,rand2:FL,randL:TL,randcat:wL,randrun:_y,range:mE,range2:xE,rangex:gE,rarely:$L,ratio:yE,rdim:fg,real:tx,ref:uP,register:dt,registerControl:nt,registerMultiControl:Vi,reify:Ct,rel:w0,release:G0,removeUndefineds:Gs,repeatCycles:y9,repl:qR,replicate:V9,reset_state:gy,reset_timelines:xy,resonance:Hm,rev:qf,revv:e9,rfade:cg,rib:w9,ribbon:G9,ring:kg,ringdf:Qg,ringf:jg,rlp:ug,room:og,roomdim:lg,roomfade:dg,roomlp:hg,roomsize:xg,rotate:Gf,round:fE,rsize:Cg,run:Qy,s:xd,s_add:J9,s_alt:Z9,s_cat:Y9,s_contract:$9,s_expand:j9,s_extend:Q9,s_polymeter:U9,s_sub:k9,s_taper:H9,s_taperlist:K9,s_tour:q9,s_zip:_9,saw:jn,saw2:gh,scram:rx,scramble:PL,scrub:ny,seconds:cx,seed:AL,seg:JE,segment:KE,semitone:q1,seq:Qf,seqPLoop:L5,sequence:Fi,sequenceP:Kf,set:z5,setCpsFunc:Py,setIsStarted:Ry,setPattern:Ay,setStringParser:Hf,setTime:Dr,setTriggerFunc:Fy,shape:Sg,shrink:fd,shrinklist:ld,shuffle:EL,signal:je,silence:ce,sine:Ky,sine2:yh,sinefold:yP,size:yg,slice:vd,slide:$1,slow:DE,slowChunk:S9,slowcat:vs,slowcatPrime:ih,slowchunk:C9,smear:nx,soft:cP,sol2note:o5,someCycles:jL,someCyclesBy:kL,sometimes:JL,sometimesBy:KL,songPtr:px,sound:yd,source:nc,sparsity:GE,speak:h4,speed:hh,splice:sP,splitAt:$o,spread:o1,square:Jy,square2:iL,squeeze:_P,squeezeBind:O5,squiz:Bg,src:rc,stack:xe,stackBy:F5,stackCentre:jf,stackLeft:Jf,stackRight:kf,steady:_R,stepBind:N5,stepalt:nd,stepcat:ti,steps:tP,stepsPerOctave:X1,stretch:Gg,striate:iP,stringifyValues:qo,struct:D5,strudelScope:_o,stut:c9,stutWith:l9,stutwith:f9,sub:U5,superimpose:G5,sus:D0,sustain:b0,sustainpedal:Ng,swing:jE,swingBy:kE,sysex:jx,sysexdata:$x,sysexid:Qx,sz:Mg,take:rd,time:oL,timeCat:rh,timecat:W9,timeline:VP,toBipolar:pE,tokenizeNote:Ff,tour:dd,transient:hy,trem:Q0,tremolo:j0,tremolodepth:q0,tremolophase:tv,tremoloshape:ev,tremoloskew:_0,tremolosync:$0,tri:sL,tri2:nL,triode:Yg,tsdelay:_g,uid:vx,undegrade:HL,undegradeBy:UL,unicodeToBase64:Of,uniq:h5,uniqsort:u5,uniqsortr:If,unison:a1,unit:wg,useRNG:ML,v:Im,val:mx,valueToMidi:KT,vel:uc,velocity:hc,vib:Bm,vibmod:Nm,vibrato:Xm,vmod:Vm,voice:_1,vowel:Xg,warp:Od,warpatt:zd,warpattack:Vd,warpdc:Qd,warpdec:Yd,warpdecay:Wd,warpdepth:kd,warpenv:ic,warpmode:qd,warprate:Jd,warprel:Kd,warprelease:Hd,warpshape:jd,warpskew:$d,warpsus:Ud,warpsustain:Zd,warpsync:sc,waveloss:Ig,wavetablePhaseRand:ec,wavetablePosition:Cd,wavetableWarp:Nd,wavetableWarpMode:_d,wchoose:XL,wchooseCycles:r2,when:qE,whenKey:i4,withSeed:e2,withValue:w5,within:N9,worklet:EP,wrandcat:IL,wt:Md,wtatt:Ed,wtattack:Td,wtdc:Xd,wtdec:Ad,wtdecay:Pd,wtdepth:wd,wtenv:Sd,wtphaserand:tc,wtrate:Dd,wtrel:bd,wtrelease:Ld,wtshape:Bd,wtskew:Id,wtsus:Rd,wtsustain:Fd,wtsync:Gd,xfade:md,xsdelay:qg,zcrush:Lx,zdelay:bx,zip:cd,zipWith:Ur,zmod:Rx,znoise:Fx,zoom:WE,zoomArc:YE,zoomarc:ZE,zrand:Sx,zzfx:Dx},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class i extends DelayNode{constructor(x,T,F,D){return super(x),T=Math.abs(T),this.delayTime.value=F,this.feedbackGain=x.createGain(),this.feedbackGain.gain.value=Math.min(Math.abs(D),.995),this.feedback=this.feedbackGain.gain,this.delayGain=x.createGain(),this.delayGain.gain.value=T,this.connect(this.feedbackGain),this.connect(this.delayGain),this.feedbackGain.connect(this),this.connect=p=>this.delayGain.connect(p),this}start(x){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,x+this.delayTime.value)}}BaseAudioContext.prototype.createFeedbackDelay=function(v,x,T){return new i(this,v,x,T)}}let zn;const h2=()=>(zn=new AudioContext,zn),wr=i=>(zn=i,zn),kt=()=>zn||h2();function f4(){return kt().currentTime}let u2=i=>console.log(i);function Wn(i,v="superdough"){be(`[${v}] error: ${i.message}`)}const be=(...i)=>u2(...i),l2=i=>{u2=i};let Na={};function f2(i,v){const x=kt();if(Na[i])return Na[i];const T=2*x.sampleRate,F=x.createBuffer(1,T,x.sampleRate),D=F.getChannelData(0);let p=0,M,t,h,g,o,a,r;M=t=h=g=o=a=r=0;for(let e=0;e<T;e++)if(i==="white")D[e]=Math.random()*2-1;else if(i==="brown"){let n=Math.random()*2-1;D[e]=(p+.02*n)/1.02,p=D[e]}else if(i==="pink"){let n=Math.random()*2-1;M=.99886*M+n*.0555179,t=.99332*t+n*.0750759,h=.969*h+n*.153852,g=.8665*g+n*.3104856,o=.55*o+n*.5329522,a=-.7616*a-n*.016898,D[e]=M+t+h+g+o+a+r+n*.5362,D[e]*=.11,r=n*.115926}else if(i==="crackle"){const n=v*.01;Math.random()<n?D[e]=Math.random()*2-1:D[e]=0}return i!=="crackle"&&(Na[i]=F),F}function Co(i="white",v,x=.02){const T=kt().createBufferSource();return T.buffer=f2(i,x),T.loop=!0,T.start(v),{node:T,stop:F=>T.stop(F)}}function d4(i,v,x){const T=Co("pink",x),F=M2(i,T.node,v);return Xi(T.node,()=>{ne(T.node)}),{node:F.node,stop:D=>T?.stop(D),teardown:F.teardown}}const So=new Map,Ah=Symbol("nodePoolKey"),c4=i=>!!i[Ah],d2=i=>i.context?.currentTime??0,p4=i=>{const v=new Set;i.parameters?.forEach(F=>v.add(F));const x=new Set;let T=i;for(;T!==Object.prototype;){for(const F of Object.getOwnPropertyNames(T)){if(x.has(F))continue;x.add(F);const D=i[F];D instanceof AudioParam&&v.add(D)}T=Object.getPrototypeOf(T)}return v},Fh=i=>{if(i.disconnect(),i instanceof AudioScheduledSourceNode)return;const v=i[Ah];if(v==null)return;const x=d2(i);p4(i).forEach(F=>F.cancelScheduledValues(x));const T=So.get(v)??[];T.push(new WeakRef(i)),So.set(v,T)},v4=i=>{if(!(i instanceof AudioWorkletNode))return!0;const v=d2(i),x=i?.parameters?.get("end").value??0;return v<x+.45},Qn=(i,v)=>{const x=So.get(i)??[];let T,F=!1;for(;x.length;)if(T=x.pop()?.deref(),T!=null&&v4(T)){F=!0;break}return F||(T=v()),T[Ah]=i,T},m4=i=>{if(typeof i!="string")return[];const[v,x="",T]=i.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return v?[v,x,T?Number(T):void 0]:[]},g4={c:0,d:2,e:4,f:5,g:7,a:9,b:11},x4={"#":1,b:-1,s:1,f:-1},y4=i=>i?.split("").reduce((v,x)=>v+x4[x],0)||0,_r=(i,v=3)=>{const[x,T,F=v]=m4(i);if(!x)throw new Error('not a note: "'+i+'"');const D=g4[x.toLowerCase()],p=y4(T);return(Number(F)+1)*12+D+p},c2=i=>Math.pow(2,(i-69)/12)*440,Bi=(i,v,x)=>Math.min(Math.max(i,v),x),M4=i=>12*Math.log(i/440)/Math.LN2+69,C4=(i,v)=>{if(typeof i!="object")throw new Error("valueToMidi: expected object value");let{freq:x,note:T}=i;return typeof x=="number"?M4(x):typeof T=="string"?_r(T):typeof T=="number"?T:v};function ji(i,v=0,x){return isNaN(Number(i))?(!x&&be(`"${i}" is not a number, falling back to ${v}`,"warning"),v):i}const p2=(i,v)=>(i%v+v)%v,$u=(i,v)=>p2(Math.round(ji(i,0)),v);function qu(i,v){return i/v}function v2(i,v){const{s:x,n:T=0}=i;let F=C4(i,36),D=F-36,p,M=0;if(Array.isArray(v))M=$u(T,v.length),p=v[M];else{const h=o=>_r(o)-F,g=Object.keys(v).filter(o=>!o.startsWith("_")).reduce((o,a,r)=>!o||Math.abs(h(a))<Math.abs(h(o))?a:o,null);D=-h(g),M=$u(T,v[g].length),p=v[g][M]}const t=`${x}:${M}`;return{transpose:D,url:p,index:M,midi:F,label:t}}const Va=(i,v)=>Object.fromEntries(Object.entries(v).map(([x,T])=>[x,i[T]])),m2=i=>{try{return new URL(".",new URL(i)).href.replace(/\/$/,"")}catch{return i.split("/").slice(0,-1).join("/")}},Rh=["pink","white","brown","crackle"];function me(i){const v=kt().createGain();return v.gain.value=i,v}function Yn(i,v,x){const T=me(x);return i.connect(T),T.connect(v),T}const _u=(i,v,x,T)=>T-x===0?0:(v-i)/(T-x);function Je(i,v,x,T){const F=new AudioWorkletNode(i,v,T);return Object.entries(x).forEach(([D,p])=>{p!==void 0&&(F.parameters.get(D).value=p)}),F}const si=(i,v,x,T,F,D,p,M,t,h="exponential")=>{v=ji(v),x=ji(x),T=ji(T),F=ji(F);const g=h==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";h==="exponential"&&(D=D===0?.001:D,p=p===0?.001:p);const o=p-D,a=D+T*o,r=t-M,e=n=>{let u;return v>n?u=n*_u(D,p,0,v)+D:u=(n-v)*_u(p,a,0,x)+p,h==="exponential"&&(u=u||.001),u};i.setValueAtTime(D,M),v>r?i[g](e(r),t):v+x>r?(i[g](e(v),M+v),i[g](e(r),t)):(i[g](e(v),M+v),i[g](e(v+x),M+v+x),i.setValueAtTime(a,t)),i[g](D,t+F)};function S4(i){return typeof i=="number"?i%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[i]??0}function g2(i,v={}){return Je(i,"envelope-processor",v)}function rn(i,v={}){const{shape:x=0,begin:T=0,end:F=0,time:D,depth:p=1,dcoffset:M=-.5,frequency:t=1,skew:h=.5,phaseoffset:g=0,curve:o=1,min:a,max:r,...e}=v,n={begin:T,end:F,time:D??T,depth:p,dcoffset:M,frequency:t,skew:h,phaseoffset:g,curve:o,shape:S4(x),min:a??M*p,max:r??M*p+p,...e};return Je(i,"lfo-processor",n)}function x2(i,v,x,T,F,D){const p=Qn("compressor",()=>new DynamicsCompressorNode(i,{}));return Object.entries({threshold:v??-3,ratio:x??10,knee:T??10,attack:F??.005,release:D??.05}).forEach(([M,t])=>{p[M].value=t}),p}const ni=(i,v="linear",x)=>{const[T,F,D,p]=i;if(T==null&&F==null&&D==null&&p==null)return x??[.001,.001,1,.01];const M=D??(T!=null&&F==null||T==null&&F==null?1:.001);return[Math.max(T??0,.001),Math.max(F??0,.001),Math.min(M,1),Math.max(p??0,.01)]};function Lh(i,v,x,T,F){let{defaultDepth:D=1,depth:p,dcoffset:M,...t}=F;p==null&&(p=Object.values(t).some(g=>g!=null)?D:0);let h;return p&&(h=rn(i,{begin:x,end:T,depth:p,dcoffset:M,...t}),h.connect(v)),h}function To(i,v,x,T,F,D){let{amount:p,offset:M,defaultAmount:t=1,curve:h="linear",values:g,holdEnd:o,defaultValues:a}=F;p==null&&(p=g.some(n=>n!=null)?t:0);const r=M??0,e=p+r;if(Math.abs(e-r)){const[n,u,s,l]=ni(g,h,a);si(v,n,u,s,l,r,e,x,o,h)}return Lh(i,v,x,T,D)}function y2(i,v,x,T,F,D){let{frequency:p,anchor:M,env:t,type:h,model:g,q:o=1,drive:a=.69,depth:r,depthfrequency:e,dcoffset:n=-.5,skew:u,shape:s,rate:l,sync:c}=T,d,f;g==="ladder"?(f=Je(i,"ladder-processor",{frequency:p,q:o,drive:a}),d=f.parameters.get("frequency")):(f=Qn("filter",()=>i.createBiquadFilter()),f.type=h,Object.entries({Q:o,frequency:p}).forEach(([R,G])=>{f[R].value=G}),d=f.frequency);const m=[T.attack,T.decay,T.sustain,T.release],[y,S,C,E]=ni(m,"exponential",[.005,.14,0,.1]);if([...m,t].some(R=>R!==void 0)){t=ji(t,1,!0),M=ji(M,0,!0);const R=Math.abs(t),G=R*M;let b=Bi(2**-G*p,0,2e4),L=Bi(2**(R-G)*p,0,2e4);t<0&&([b,L]=[L,b]),si(d,y,S,C,E,b,L,v,x,"exponential")}c!=null&&(l=F*c);const P=[r,e,u,s,l].some(R=>R!==void 0);let A;if(P){r=r??1;const R=D/F,G={depth:e??(r??1)*p,dcoffset:n,skew:u,shape:s,frequency:l??F,min:-p+30,max:2e4-p,time:R,curve:1};A=Lh(i,d,v,x,G)}return{filter:f,lfo:A}}let tl=i=>i<.5?1:1-(i-.5)/.5;function M2(i,v,x=0){const T=kt();if(!x)return i;let F=T.createGain(),D=T.createGain();i.connect(F),v.connect(D),F.gain.value=tl(x),D.gain.value=tl(1-x);let p=T.createGain();return F.connect(p),D.connect(p),{node:p,teardown:()=>{ne(F),ne(D),i.disconnect(F),v.disconnect(D)}}}let T4=["linear","exponential"];function qs(i,v,x,T){if((v.pattack??v.pdecay??v.psustain??v.prelease??v.penv)===void 0)return;const F=ji(v.penv,1,!0),D=T4[v.pcurve??0];let[p,M,t,h]=ni([v.pattack,v.pdecay,v.psustain,v.prelease],D,[.2,.001,1,.001]),g=v.panchor??t;const o=F*100,a=0-o*g,r=o-o*g;si(i,p,M,t,h,a,r,x,T,D)}function _s(i,v,x){const{vibmod:T=.5,vib:F}=v;let D;if(F>0){D=kt().createOscillator(),D.frequency.value=F;const p=kt().createGain();return p.gain.value=T*100,D.connect(p),p.connect(i),Xi(D,()=>{ne(p),ne(D)}),D.start(x),{stop:M=>D.stop(M),nodes:{vib:[D],vib_gain:[p]}}}}function E4(i,v,x=kt()){const T=x.currentTime;Di(x,i,T,v)}function Di(i,v,x,T){const F=new ConstantSourceNode(i),D=me(0);return D.connect(i.destination),F.connect(D),Xi(F,()=>{ne(D),ne(F),v()}),F.start(x),F.stop(T),F}const P4=(i,v="sine")=>{const x=kt();let T;return Rh.includes(v)?(T=x.createBufferSource(),T.buffer=f2(v,2),T.loop=!0):(T=x.createOscillator(),T.type=v,T.frequency.value=i),T.start(),T},A4=(i,v,x="sine")=>{const T=i.value*v;return{osc:P4(T,x),freq:T}};function Zn(i,v,x){const T=kt(),F=[],D={},p={};for(let M=1;M<=8;M++)for(let t=0;t<=8;t++){let h;M===t+1?h=`fmi${M===1?"":M}`:h=`fmi${M}${t}`;const g=v[h];if(!g)continue;let o=[];for(let[a,r]of[[!0,M],[!1,t]]){if(r===0){o.push(i);continue}if(!D[r]){const f=r===1?"":r,{osc:m,freq:y}=A4(i,v[`fmh${f}`]??1,v[`fmwave${f}`]??"sine");F.push(m);const S=[m],C=["attack","decay","sustain","release"].map(P=>v[`fm${P}${f}`]);let E=m;if(C.some(P=>P!==void 0)){const P=T.createGain(),[A,R,G,b]=ni(C),L=x+v.duration,w=v[`fmenv${f}`]??"exp";si(P.gain,A,R,G,b,0,1,x,L,w==="exp"?"exponential":"linear"),S.push(P),E=m.connect(P)}D[r]={input:m.frequency,output:E,freq:y,osc:m,toCleanup:S},p[`fm_${r}`]=[m]}const{input:e,output:n,freq:u,osc:s,toCleanup:l}=D[r],c=me(g),d=me(u);o.push(a?n.connect(c).connect(d):e),P2(s,[...l,c,d]),p[`fm_${r}_gain`]=[c]}if(!o[1]){be(`[superdough] control ${h} failed to connect FM ${M} to target ${t} due to missing frequency parameter (likely because fm${t} is noise)`,"warning");continue}o[0].connect(o[1])}return{nodes:p,stop:M=>F.forEach(t=>t?.stop(M))}}const C2=i=>i/(1+i),F4=(i,v)=>(i%v+v)%v,R4=(i,v)=>(1+v)*i/(1+v*Math.abs(i)),Ks=(i,v)=>Math.tanh(i*(1+v)),L4=(i,v)=>Bi((1+v)*i,-1,1),S2=(i,v)=>{let x=(1+.5*v)*i;const T=F4(x+1,4);return 1-Math.abs(T-2)},b4=(i,v)=>Math.sin(Math.PI/2*S2(i,v)),D4=(i,v)=>{const x=C2(Math.log1p(v)),T=(i-x/3*i*i*i)/(1-x/3);return Ks(T,v)},T2=(i,v,x=!1)=>{const T=1+2*v,F=.07*C2(Math.log1p(v)),D=Ks(i+F,2*v),p=Ks(x?F:-i+F,2*v),M=D-p,t=1/Math.cosh(T*F),h=t*t,g=Math.max(1e-8,(x?1:2)*T*h);return Ks(M/g,v)},G4=(i,v)=>T2(i,v,!0),w4=(i,v)=>{const x=10*Math.log1p(v);let T=1,F=i,D,p=0;for(let M=1;M<64;M++){if(M<2){p+=M==0?T:F;continue}D=2*i*T-F,F=T,T=D,M%2===0&&(p+=Math.min(1.3*x/M,2)*D)}return Ks(p,x/20)},bh={scurve:R4,soft:Ks,hard:L4,cubic:D4,diode:T2,asym:G4,fold:S2,sinefold:b4,chebyshev:w4},yn=Object.freeze(Object.keys(bh)),B4=i=>{let v=i;typeof i=="string"&&(v=yn.indexOf(i),v===-1&&(be(`[superdough] Could not find waveshaping algorithm ${i}.
        Available options are ${yn.join(", ")}.
        Defaulting to ${yn[0]}.`),v=0));const x=yn[v%yn.length];return bh[x]},E2=(i,v,x)=>Je(kt(),"distort-processor",{distort:i,postgain:v},{processorOptions:{algorithm:x}}),us=(i,v=36)=>{let{note:x,freq:T,octave:F=0}=i;return x=x||v,typeof x=="string"&&(x=_r(x)),!T&&typeof x=="number"&&(T=c2(x)),T*=Math.pow(2,F),Number(T)},Xi=(i,v)=>{const x=v;i.onended=function(){x&&x(),this.onended=null}},ne=i=>{if(i!=null){if(!(i instanceof AudioNode))throw new Error("releaseAudioNode can only release an AudioNode");if(i.disconnect(),i instanceof AudioScheduledSourceNode)try{i.stop()}catch{i.start(i.context.currentTime+5),i.stop()}i instanceof AudioWorkletNode&&i.parameters.get("end")?.setValueAtTime(0,0)}},P2=(i,v)=>{Xi(i,()=>v.forEach(x=>ne(x)))};var Dh={};Dh.generateReverb=function(i,v){for(var x=i.audioContext||new AudioContext,T=x.sampleRate,F=i.numChannels||2,D=i.decayTime*1.5,p=Math.round(i.decayTime*T),M=Math.round(D*T),t=Math.round((i.fadeInTime||0)*T),h=Math.pow(1/1e3,1/p),g=x.createBuffer(F,M,T),o=0;o<F;o++){for(var a=g.getChannelData(o),r=0;r<M;r++)a[r]=O4()*Math.pow(h,r);for(var r=0;r<t;r++)a[r]*=r/t}X4(g,i.lpFreqStart||0,i.lpFreqEnd||0,i.decayTime,v)};Dh.generateGraph=function(i,v,x,T,F){var D=document.createElement("canvas");D.width=v,D.height=x;var p=D.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,D.width,D.height),p.fillStyle="#fff";for(var M=v/i.length,t=x/(F-T),h=0;h<i.length;h++)p.fillRect(h*M,x-(i[h]-T)*t,1,1);return D};var X4=function(i,v,x,T,F){if(v==0){F(i);return}var D=I4(i),p=new OfflineAudioContext(i.numberOfChannels,D[0].length,i.sampleRate),M=p.createBufferSource();M.buffer=i;var t=p.createBiquadFilter();v=Math.min(v,i.sampleRate/2),x=Math.min(x,i.sampleRate/2),t.type="lowpass",t.Q.value=1e-4,t.frequency.setValueAtTime(v,0),t.frequency.linearRampToValueAtTime(x,T),M.connect(t),t.connect(p.destination),M.start(),p.oncomplete=function(h){F(h.renderedBuffer),ne(t),ne(M)},p.startRendering(),window.filterNode=t},I4=function(i){for(var v=[],x=0;x<i.numberOfChannels;x++)v[x]=i.getChannelData(x);return v},O4=function(){return Math.random()*2-1};typeof AudioContext<"u"&&(BaseAudioContext.prototype.adjustLength=function(i,v,x=1,T=0){const F=Math.floor(Bi(T,0,1)*v.length),D=v.sampleRate*i,p=this.createBuffer(v.numberOfChannels,v.length,v.sampleRate);for(let M=0;M<v.numberOfChannels;M++){let t=v.getChannelData(M),h=p.getChannelData(M);for(let g=0;g<D;g++){let o=(F+g*Math.abs(x))%t.length;x<1&&(o=o*-1),h[g]=t.at(o)||0}}return p},BaseAudioContext.prototype.createReverb=function(i,v,x,T,F,D,p){const M=this.createConvolver();return M.generate=(t=2,h=.1,g=15e3,o=1e3,a,r,e)=>{M.duration=t,M.fade=h,M.lp=g,M.dim=o,M.ir=a,M.irspeed=r,M.irbegin=e,a?M.buffer=this.adjustLength(t,a,r,e):Dh.generateReverb({audioContext:this,numChannels:2,decayTime:t,fadeInTime:h,lpFreqStart:g,lpFreqEnd:o},n=>{M.buffer=n})},M.generate(i,v,x,T,F,D,p),M});var el={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get (){return this.ae},get (){return this.oe},get (){return this.aa},get (){return this.aa},get (){return this.oe},get (){return this.ue},get (){return this.y}};if(typeof GainNode<"u"){class i extends GainNode{constructor(x,T){if(super(x),!el[T])throw new Error("vowel: unknown vowel "+T);const{gains:F,qs:D,freqs:p}=el[T];this.makeupGain=x.createGain(),this.filters=[],this.gains=[];for(let M=0;M<5;M++){const t=x.createGain();t.gain.value=F[M];const h=x.createBiquadFilter();h.type="bandpass",h.Q.value=D[M],h.frequency.value=p[M],super.connect(h),h.connect(t),this.filters.push(h),t.connect(this.makeupGain),this.gains.push(t)}return this.makeupGain.gain.value=8,this}connect(x){this.makeupGain.connect(x)}disconnect(){ne(this.makeupGain),this.filters.forEach(ne),this.gains.forEach(ne),super.disconnect(),this.makeupGain=null,this.filters=null,this.gains=null}}BaseAudioContext.prototype.createVowelFilter=function(v){return new i(this,v)}}const N4="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oUil7InVzZSBzdHJpY3QiO3ZhciBXZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIFllPShSLFcsWCk9PlcgaW4gUj9XZShSLFcse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOlh9KTpSW1ddPVg7dmFyIER0PShSLFcsWCk9PlllKFIsdHlwZW9mIFchPSJzeW1ib2wiP1crIiI6VyxYKTtjbGFzcyBYIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgcz0wO3M8dGhpcy5uYklucHV0cztzKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMocywxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHMsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKXtsZXQgaT10W2VdLmxlbmd0aDtpIT10aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGUsaSl9Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspe2xldCBpPXNbZV0ubGVuZ3RoO2khPXRoaXMub3V0cHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhlLGkpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxzKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkocyk7Zm9yKGxldCBlPTA7ZTxzO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KHMpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtlXT10aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQscyl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bZV09bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtlXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dFtzXVtlXTt0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5zZXQoaSx0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dGhpcy5vdXRwdXRCdWZmZXJzW3NdW2VdLnN1YmFycmF5KDAsMTI4KTt0W3NdW2VdLnNldChpKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IHM9MDtzPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW3NdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtzKyspZm9yKGxldCBlPTA7ZTx0aGlzLmJsb2NrU2l6ZTtlKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW3NdW2VdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW3NdW2VdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQscyxlKXtjb25zdCBuPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW4/ITE6KHRoaXMuc3RhcnRlZD1uLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLGUpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhzKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQscyxlKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBRdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBzPW5ldyBBcnJheSh0aGlzLnNpemUqMiksZT0wO2U8cy5sZW5ndGg7ZSs9Mil7Y29uc3QgaD1NYXRoLlBJKmUvdGhpcy5zaXplO3NbZV09TWF0aC5jb3MoaCksc1tlKzFdPS1NYXRoLnNpbihoKX10aGlzLnRhYmxlPXM7Zm9yKHZhciBpPTAsbj0xO3RoaXMuc2l6ZT5uO248PD0xKWkrKzt0aGlzLl93aWR0aD1pJTI9PT0wP2ktMTppLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgYT0wO2E8dGhpcy5fYml0cmV2Lmxlbmd0aDthKyspe3RoaXMuX2JpdHJldlthXT0wO2Zvcih2YXIgbz0wO288dGhpcy5fd2lkdGg7bys9Mil7dmFyIGM9dGhpcy5fd2lkdGgtby0yO3RoaXMuX2JpdHJldlthXXw9KGE+Pj5vJjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxpPTA7aTx0Lmxlbmd0aDtpKz0yKWVbaT4+PjFdPXRbaV07cmV0dXJuIGV9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRbc109MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLGk9MDtpPGUubGVuZ3RoO2krPTIpZVtpXT10W2k+Pj4xXSxlW2krMV09MDtyZXR1cm4gZX1jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgcz10aGlzLl9jc2l6ZSxlPXM+Pj4xLGk9MjtpPGU7aSs9Mil0W3MtaV09dFtpXSx0W3MtaSsxXT0tdFtpKzFdfXRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxzKXtpZih0PT09cyl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9cyx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxzPXRoaXMuX2NzaXplLGU9dGhpcy5fd2lkdGgsaT0xPDxlLG49cy9pPDwxLGEsbyxjPXRoaXMuX2JpdHJldjtpZihuPT09NClmb3IoYT0wLG89MDthPHM7YSs9bixvKyspe2NvbnN0IG09Y1tvXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGEsbSxpKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgbT1jW29dO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoYSxtLGkpfXZhciBoPXRoaXMuX2ludj8tMToxLGY9dGhpcy50YWJsZTtmb3IoaT4+PTI7aT49MjtpPj49Mil7bj1zL2k8PDE7dmFyIHU9bj4+PjI7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIGQ9YSt1LGw9YSxwPTA7bDxkO2wrPTIscCs9aSl7Y29uc3QgbT1sLEk9bSt1LHc9SSt1LHY9dyt1LE09dFttXSxQPXRbbSsxXSxnPXRbSV0sVD10W0krMV0sQT10W3ddLFY9dFt3KzFdLE89dFt2XSxOPXRbdisxXSxDPU0sRj1QLHE9ZltwXSxCPWgqZltwKzFdLEw9ZypxLVQqQixFPWcqQitUKnEsSD1mWzIqcF0saXQ9aCpmWzIqcCsxXSwkPUEqSC1WKml0LFU9QSppdCtWKkgsSz1mWzMqcF0sWj1oKmZbMypwKzFdLGs9TypLLU4qWixmdD1PKlorTipLLGR0PUMrJCxydD1GK1UsbnQ9Qy0kLHB0PUYtVSxtdD1MK2ssYXQ9RStmdCxvdD1oKihMLWspLGd0PWgqKEUtZnQpLHZ0PWR0K210LEF0PXJ0K2F0LE90PWR0LW10LE50PXJ0LWF0LEN0PW50K2d0LEZ0PXB0LW90LEV0PW50LWd0LGt0PXB0K290O3RbbV09dnQsdFttKzFdPUF0LHRbSV09Q3QsdFtJKzFdPUZ0LHRbd109T3QsdFt3KzFdPU50LHRbdl09RXQsdFt2KzFdPWt0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPW5bc10sbz1uW3MrMV0sYz1uW3MrZV0saD1uW3MrZSsxXSxmPWErYyx1PW8raCxkPWEtYyxsPW8taDtpW3RdPWYsaVt0KzFdPXUsaVt0KzJdPWQsaVt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcysxXSx1PW5bcytlXSxkPW5bcytlKzFdLGw9bltzK29dLHA9bltzK28rMV0sbT1uW3MrY10sST1uW3MrYysxXSx3PWgrbCx2PWYrcCxNPWgtbCxQPWYtcCxnPXUrbSxUPWQrSSxBPWEqKHUtbSksVj1hKihkLUkpLE89dytnLE49ditULEM9TStWLEY9UC1BLHE9dy1nLEI9di1ULEw9TS1WLEU9UCtBO2lbdF09TyxpW3QrMV09TixpW3QrMl09QyxpW3QrM109RixpW3QrNF09cSxpW3QrNV09QixpW3QrNl09TCxpW3QrN109RX1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQscz10aGlzLl9jc2l6ZSxlPXRoaXMuX3dpZHRoLGk9MTw8ZSxuPXMvaTw8MSxhLG8sYz10aGlzLl9iaXRyZXY7aWYobj09PTQpZm9yKGE9MCxvPTA7YTxzO2ErPW4sbysrKXtjb25zdCBSdD1jW29dO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGEsUnQ+Pj4xLGk+Pj4xKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgUnQ9Y1tvXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChhLFJ0Pj4+MSxpPj4+MSl9dmFyIGg9dGhpcy5faW52Py0xOjEsZj10aGlzLnRhYmxlO2ZvcihpPj49MjtpPj0yO2k+Pj0yKXtuPXMvaTw8MTt2YXIgdT1uPj4+MSxkPXU+Pj4xLGw9ZD4+PjE7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIHA9MCxtPTA7cDw9bDtwKz0yLG0rPWkpe3ZhciBJPWErcCx3PUkrZCx2PXcrZCxNPXYrZCxQPXRbSV0sZz10W0krMV0sVD10W3ddLEE9dFt3KzFdLFY9dFt2XSxPPXRbdisxXSxOPXRbTV0sQz10W00rMV0sRj1QLHE9ZyxCPWZbbV0sTD1oKmZbbSsxXSxFPVQqQi1BKkwsSD1UKkwrQSpCLGl0PWZbMiptXSwkPWgqZlsyKm0rMV0sVT1WKml0LU8qJCxLPVYqJCtPKml0LFo9ZlszKm1dLGs9aCpmWzMqbSsxXSxmdD1OKlotQyprLGR0PU4qaytDKloscnQ9RitVLG50PXErSyxwdD1GLVUsbXQ9cS1LLGF0PUUrZnQsb3Q9SCtkdCxndD1oKihFLWZ0KSx2dD1oKihILWR0KSxBdD1ydCthdCxPdD1udCtvdCxOdD1wdCt2dCxDdD1tdC1ndDtpZih0W0ldPUF0LHRbSSsxXT1PdCx0W3ddPU50LHRbdysxXT1DdCxwPT09MCl7dmFyIEZ0PXJ0LWF0LEV0PW50LW90O3Rbdl09RnQsdFt2KzFdPUV0O2NvbnRpbnVlfWlmKHAhPT1sKXt2YXIga3Q9cHQsT2U9LW10LE5lPXJ0LENlPS1udCxGZT0taCp2dCxFZT0taCpndCxrZT0taCpvdCxSZT0taCphdCxEZT1rdCtGZSx6ZT1PZStFZSxxZT1OZStSZSxMZT1DZS1rZSxadD1hK2QtcCxYdD1hK3UtcDt0W1p0XT1EZSx0W1p0KzFdPXplLHRbWHRdPXFlLHRbWHQrMV09TGV9fX19X3NpbmdsZVJlYWxUcmFuc2Zvcm0yKHQscyxlKXtjb25zdCBpPXRoaXMuX291dCxuPXRoaXMuX2RhdGEsYT1uW3NdLG89bltzK2VdLGM9YStvLGg9YS1vO2lbdF09YyxpW3QrMV09MCxpW3QrMl09aCxpW3QrM109MH1fc2luZ2xlUmVhbFRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcytlXSx1PW5bcytvXSxkPW5bcytjXSxsPWgrdSxwPWgtdSxtPWYrZCxJPWEqKGYtZCksdz1sK20sdj1wLE09LUksUD1sLW0sZz1wLFQ9STtpW3RdPXcsaVt0KzFdPTAsaVt0KzJdPXYsaVt0KzNdPU0saVt0KzRdPVAsaVt0KzVdPTAsaVt0KzZdPWcsaVt0KzddPVR9fWxldCB0cz1yPT5jb25zb2xlLmxvZyhyKTtjb25zdCBzcz0oLi4ucik9PnRzKC4uLnIpLGVzPShyLHQscyk9Pk1hdGgubWluKE1hdGgubWF4KHIsdCkscyksenQ9cj0+ci8oMStyKSxpcz0ocix0KT0+KHIldCt0KSV0LHJzPShyLHQpPT4oMSt0KSpyLygxK3QqTWF0aC5hYnMocikpLEo9KHIsdCk9Pk1hdGgudGFuaChyKigxK3QpKSxucz0ocix0KT0+ZXMoKDErdCkqciwtMSwxKSxxdD0ocix0KT0+e2xldCBzPSgxKy41KnQpKnI7Y29uc3QgZT1pcyhzKzEsNCk7cmV0dXJuIDEtTWF0aC5hYnMoZS0yKX0sYXM9KHIsdCk9Pk1hdGguc2luKE1hdGguUEkvMipxdChyLHQpKSxvcz0ocix0KT0+e2NvbnN0IHM9enQoTWF0aC5sb2cxcCh0KSksZT0oci1zLzMqcipyKnIpLygxLXMvMyk7cmV0dXJuIEooZSx0KX0sTHQ9KHIsdCxzPSExKT0+e2NvbnN0IGU9MSsyKnQsbj0uMDcqenQoTWF0aC5sb2cxcCh0KSksYT1KKHIrbiwyKnQpLG89SihzP246LXIrbiwyKnQpLGM9YS1vLGg9MS9NYXRoLmNvc2goZSpuKSxmPWgqaCx1PU1hdGgubWF4KDFlLTgsKHM/MToyKSplKmYpO3JldHVybiBKKGMvdSx0KX0sV3Q9e3NjdXJ2ZTpycyxzb2Z0OkosaGFyZDpucyxjdWJpYzpvcyxkaW9kZTpMdCxhc3ltOihyLHQpPT5MdChyLHQsITApLGZvbGQ6cXQsc2luZWZvbGQ6YXMsY2hlYnlzaGV2OihyLHQpPT57Y29uc3Qgcz0xMCpNYXRoLmxvZzFwKHQpO2xldCBlPTEsaT1yLG4sYT0wO2ZvcihsZXQgbz0xO288NjQ7bysrKXtpZihvPDIpe2ErPW89PTA/ZTppO2NvbnRpbnVlfW49MipyKmUtaSxpPWUsZT1uLG8lMj09PTAmJihhKz1NYXRoLm1pbigxLjMqcy9vLDIpKm4pfXJldHVybiBKKGEscy8yMCl9fSxodD1PYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKFd0KSksaHM9cj0+e2xldCB0PXI7dHlwZW9mIHI9PSJzdHJpbmciJiYodD1odC5pbmRleE9mKHIpLHQ9PT0tMSYmKHNzKGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7cn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7aHQuam9pbigiLCAiKX0uCiAgICAgICAgRGVmYXVsdGluZyB0byAke2h0WzBdfS5gKSx0PTApKTtjb25zdCBzPWh0W3QlaHQubGVuZ3RoXTtyZXR1cm4gV3Rbc119O2Z1bmN0aW9uIGN0KHIsdCl7aWYodHx8KHQ9ImFzc2VydGlvbiBmYWlsZWQiKSwhcil0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gY3Mocix0LHMpe3JldHVybiByPD0wP3Q6cj49MT9zOnQrcioocy10KX1mdW5jdGlvbiB1cyhyLHQscyl7cmV0dXJuIHI8PXQ/MDpyPj1zPzE6cz09PXQ/MDooci10KS8ocy10KX1mdW5jdGlvbiBscyhyLHQpe3JldHVybiByPHQ/KHIvPXQscityLXIqci0xKTpyPjEtdD8ocj0oci0xKS90LHIqcityK3IrMSk6MH1mdW5jdGlvbiBmcyhyKXtyZXR1cm4gTWF0aC5mbG9vcihyKT09PXJ9ZnVuY3Rpb24gZHMocil7cmV0dXJuIGZzKHIpJiZyPjB9ZnVuY3Rpb24gcHMocix0KXt0PU1hdGgubWluKE1hdGgubWF4KHQsMCksMSksdC09LjAxO3ZhciBzPTIqdC8oMS10KSxlPSgxK3MpKnIvKDErcypNYXRoLmFicyhyKSk7cmV0dXJuIGV9ZnVuY3Rpb24gSXQocix0LHMpe3JldHVybiByPj0xP3M6dCtyKihzLXQpfWZ1bmN0aW9uIFl0KCl7dGhpcy5zdGF0ZT0ib2ZmIix0aGlzLnN0YXJ0VGltZT0wLHRoaXMuc3RhcnRWYWw9MH1ZdC5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihyLHQscyxlLGksbil7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2Uib2ZmIjpyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1yLHRoaXMuc3RhcnRWYWw9MCksMDtjYXNlImF0dGFjayI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7cmV0dXJuIGE+cz8odGhpcy5zdGF0ZT0iZGVjYXkiLHRoaXMuc3RhcnRUaW1lPXIsMSk6SXQoYS9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWUsbz1JdChhL2UsMSxpKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8sbyk6YT5lPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1yLGkpOm99Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXIsdGhpcy5zdGFydFZhbD1pKSxpO2Nhc2UicmVsZWFzZSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7aWYoYT5uKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IG89SXQoYS9uLHRoaXMuc3RhcnRWYWwsMCk7cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8pLG99fXRocm93ImludmFsaWQgZW52ZWxvcGUgc3RhdGUifTtmdW5jdGlvbiB3dCgpe3RoaXMuczA9MCx0aGlzLnMxPTB9d3QucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHIsdCxzKXtjdCghaXNOYU4ociksIk5hTiB2YWx1ZSBmZWQgaW4gVHdvUG9sZUZpbHRlciIpLHQ9TWF0aC5taW4odCwxKSxzPU1hdGgubWF4KHMsMCk7dmFyIGU9TWF0aC5wb3coLjUsKDEtdCkvLjEyNSksaT1NYXRoLnBvdyguNSwocysuMTI1KS8uMTI1KSxuPTEtaSplLGE9dGhpcy5zMCxvPXRoaXMuczE7cmV0dXJuIGE9biphLWUqbytlKnIsbz1uKm8rZSphLHI9byx0aGlzLnMwPWEsdGhpcy5zMT1vLHJ9O2xldCBtcz1jbGFzcyBKdHtjb25zdHJ1Y3Rvcih0LHMpe3RoaXMuc2FtcGxlUmF0ZT10LHM/dGhpcy5idWZmZXI9cy5zbGljZSgwKToodGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheSgxMCp0KSx0aGlzLmJ1ZmZlci5maWxsKDApKSx0aGlzLndyaXRlSWR4PTAsdGhpcy5yZWFkSWR4PTB9cmVzZXQoKXt0aGlzLmJ1ZmZlci5maWxsKDApLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1jbG9uZSgpe2NvbnN0IHQ9bmV3IEp0KHRoaXMuc2FtcGxlUmF0ZSx0aGlzLmJ1ZmZlcik7cmV0dXJuIHQud3JpdGVJZHg9dGhpcy53cml0ZUlkeCx0LnJlYWRJZHg9dGhpcy5yZWFkSWR4LHR9d3JpdGUodCxzKXt0aGlzLndyaXRlSWR4PSh0aGlzLndyaXRlSWR4KzEpJXRoaXMuYnVmZmVyLmxlbmd0aCx0aGlzLmJ1ZmZlclt0aGlzLndyaXRlSWR4XT10O2xldCBlPU1hdGgubWluKE1hdGguZmxvb3IodGhpcy5zYW1wbGVSYXRlKnMpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1lLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXJlYWQoKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19O2NvbnN0IFN0PTEvNDhlMyxfdD0yNCxncz1fdC80O2NsYXNzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgYnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZW52PW5ldyBZdH11cGRhdGUodCxzLGUsaSxuLGEpe3JldHVybiB0aGlzLmVudi5ldmFsKHQscyxlLGksbixhKX19Y2xhc3MgdnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9X3QqdC82MCxlPS41O3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqcyx0aGlzLnBoYXNlJTE8ZT8xOi0xfX1jbGFzcyBJcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5pblNnbj0hMCx0aGlzLm91dFNnbj0hMCx0aGlzLmNsb2NrQ250PTB9dXBkYXRlKHQscyl7bGV0IGU9dD4wO3JldHVybiB0aGlzLmluU2duIT1lJiYodGhpcy5jbG9ja0NudCsrLHRoaXMuY2xvY2tDbnQ+PXMmJih0aGlzLmNsb2NrQ250PTAsdGhpcy5vdXRTZ249IXRoaXMub3V0U2duKSksdGhpcy5pblNnbj1lLHRoaXMub3V0U2duPzE6LTF9fWNsYXNzIHdzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBNdD1uZXcgTWFwO2NsYXNzIFNzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPXMuaW5wdXRzWzJdO24mJk10LmhhcyhuKT90aGlzLmRlbGF5PU10LmdldChuKS5jbG9uZSgpOnRoaXMuZGVsYXk9bmV3IG1zKGUpLG4mJk10LnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIF9zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKX11cGRhdGUodCxzKXtyZXR1cm4gcHModCxzKX19Y2xhc3MgTXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIHhze2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy52YWx1ZT10LHRoaXMudmFsdWV9fWNvbnN0IHlzPTM0MDtsZXQgR3Q9MDtjbGFzcyBQc3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2g9R3QsdGhpcy5zdGFydF9zZWVkPXlzKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9NTk2MDQ2NDQ3NzUzOTA2M2UtMjMsR3QrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBUc3tjb25zdHJ1Y3Rvcigpe3RoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTF9dXBkYXRlKHQpe3JldHVybiB0Pyh0aGlzLnZhbHVlPU1hdGgucmFuZG9tKCkqMi0xLHRoaXMudmFsdWUpOnRoaXMudmFsdWV9fWNsYXNzIEJze3VwZGF0ZSh0KXtyZXR1cm4gTWF0aC5yYW5kb20oKTx0KlN0P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgVnN7Y29uc3RydWN0b3IoKXt0aGlzLm91dD0wfXVwZGF0ZSgpe2xldCB0PU1hdGgucmFuZG9tKCkqMi0xO3JldHVybiB0aGlzLm91dD0odGhpcy5vdXQrLjAyKnQpLzEuMDIsdGhpcy5vdXR9fWNsYXNzIEFze2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHQ9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCt0Ki4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErdCouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMit0Ki4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3QqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCt0Ki41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtdCouMDE2ODk4O2NvbnN0IHM9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNit0Ki41MzYyO3JldHVybiB0aGlzLmI2PXQqLjExNTkyNixzKi4xMX19Y2xhc3MgT3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIE5zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LHRoaXMucGhhc2UlMTxzPzE6LTF9fWNsYXNzIENzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqdCx0aGlzLnBoYXNlJTEqMi0xfX1jbGFzcyBGc3tjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9bHModGhpcy5waGFzZSxzKSxpPTIqdGhpcy5waGFzZS0xLWU7cmV0dXJuIHRoaXMucGhhc2UrPXMsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZS09MSksaX19Y2xhc3MgRXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MCx0aGlzLnN5bmNTZ249ITF9dXBkYXRlKHQscyxlKXshdGhpcy5zeW5jU2duJiZzPjAmJih0aGlzLnBoYXNlPTApLHRoaXMuc3luY1Nnbj1zPjA7bGV0IGk9KHRoaXMucGhhc2UrZSklMTtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsTWF0aC5zaW4oaSoyKk1hdGguUEkpfX1jbGFzcyBrc3tkQlRvTGluZWFyKHQpe3JldHVybiBNYXRoLnBvdygxMCx0LzIwKX1saW5lYXJUb0RCKHQpe3JldHVybiAyMCpNYXRoLmxvZzEwKHQpfXVwZGF0ZSh0LHMsZSl7bGV0IGk9dGhpcy5saW5lYXJUb0RCKE1hdGguYWJzKHQpKSxuPTA7cmV0dXJuIGk+cyYmKG49KGktcykqKDEtMS9lKSksdGhpcy5kQlRvTGluZWFyKC1uKX19Y2xhc3MgUnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZSUxO3JldHVybihzPC41PzIqczoxLTIqKHMtLjUpKSoyLTF9fWNsYXNzIERzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPWUvMzA7Y3QoZHMobikpLHRoaXMuYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkobiksdGhpcy53cml0ZVBvcz0wfXVwZGF0ZSh0LHMsZSxpKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy53cml0ZVBvc109dCx0aGlzLndyaXRlUG9zKyssdGhpcy53cml0ZVBvcyV0aGlzLmJ1ZmZlci5sZW5ndGg9PTAmJih0aGlzLndyaXRlUG9zPTAsdGhpcy5zZW5kKHt0eXBlOiJTRU5EX1NBTVBMRVMiLGlkOnMsc2FtcGxlczp0aGlzLmJ1ZmZlcixjaGFubmVsczplLGNoYW5uZWw6aX0pKSx0fX1jbGFzcyB6c3tjb25zdHJ1Y3Rvcigpe3RoaXMubGFnVW5pdD00NDEwLHRoaXMucz0wfXVwZGF0ZSh0LHMpe3JldHVybiBzPXMqdGhpcy5sYWdVbml0LHM8MSYmKHM9MSksdGhpcy5zKz0xL3MqKHQtdGhpcy5zKSx0aGlzLnN9fWNsYXNzIHFze2NvbnN0cnVjdG9yKCl7dGhpcy5sYXN0PTB9dXBkYXRlKHQscyxlKXtjb25zdCBpPXMqU3Qsbj1lKlN0O2xldCBhPXQtdGhpcy5sYXN0O3JldHVybiBhPmk/YT1pOmE8LW4mJihhPS1uKSx0aGlzLmxhc3QrPWEsdGhpcy5sYXN0fX1jbGFzcyBMcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgV3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB3dH11cGRhdGUodCxzLGUpe3JldHVybiB0aGlzLmZpbHRlci5hcHBseSh0LHMsZSksdGhpcy5maWx0ZXIuczF9fWNsYXNzIFlzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmZpbHRlcj1uZXcgd3R9dXBkYXRlKHQscyxlKXtyZXR1cm4gdGhpcy5maWx0ZXIuYXBwbHkodCxzLGUpLHRoaXMuZmlsdGVyLnMwfX1jbGFzcyBHcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSl9dXBkYXRlKHQscyl7cmV0dXJuIHM8MCYmKHM9MCkscz1zKzEsdD10KnMsNCooTWF0aC5hYnMoLjI1KnQrLjI1LU1hdGgucm91bmQoLjI1KnQrLjI1KSktLjI1KX19Y2xhc3MganMgZXh0ZW5kcyB5e3VwZGF0ZSh0KXtyZXR1cm4gdH19Y2xhc3MgYnQgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmN0KCExKX19Z2V0RnJlcSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLmZyZXE7Y2FzZSJvZmYiOnJldHVybiB0aGlzLmZyZXE7ZGVmYXVsdDpjdCghMSl9fWdldFZlbG9jaXR5KCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMudmVsb2NpdHk7Y2FzZSJvZmYiOnJldHVybiB0aGlzLnZlbG9jaXR5O2RlZmF1bHQ6Y3QoITEpfX19Y2xhc3MgSHMgZXh0ZW5kcyBidHtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlnYXRlIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0R2F0ZSgpfX1jbGFzcyBVcyBleHRlbmRzIGJ0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWZyZXEifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRGcmVxKCl9fWNsYXNzICRzIGV4dGVuZHMgYnR7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgS3N7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBacyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgWHMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBKcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBRcyBleHRlbmRzIHl7dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyB0ZXt1cGRhdGUodCxzLGUsaSxuKXtsZXQgYT11cyh0LHMsZSk7cmV0dXJuIGNzKGEsaSxuKX19Y2xhc3Mgc2V7dXBkYXRlKHQscyxlKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodCxzKSxlKX19Y2xhc3MgZWV7Y29uc3RydWN0b3IoKXt0aGlzLmhpPSExfXVwZGF0ZSh0KXtyZXR1cm4hdGhpcy5oaSYmdD4wPyh0aGlzLmhpPSEwLDEpOih0aGlzLmhpJiZ0PD0wJiYodGhpcy5oaT0hMSksMCl9fWNsYXNzIGlle2NvbnN0cnVjdG9yKCl7dGhpcy54MT0wLHRoaXMueDI9MCx0aGlzLnkxPTAsdGhpcy55Mj0wLHRoaXMuYTA9MSx0aGlzLmExPTAsdGhpcy5hMj0wLHRoaXMuYjA9MSx0aGlzLmIxPTAsdGhpcy5iMj0wfXVwZGF0ZSh0PTAscz0wLGU9NTAwLGk9MSxuPTEpe2NvbnN0IGE9MipNYXRoLlBJKmUvc2FtcGxlUmF0ZSxvPU1hdGguc2luKGEpO2k9TWF0aC5wb3coMTAsaS8yMCk7Y29uc3QgYz1vLygyKmkpLGg9TWF0aC5jb3MoYSk7aWYocz09PTApdGhpcy5iMT0xLWgsdGhpcy5iMD10aGlzLmIxLzIsdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT0xKXRoaXMuYjA9KDEraCkvMix0aGlzLmIxPS0oMStoKSx0aGlzLmIyPXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTIpdGhpcy5iMD1vLzIsdGhpcy5iMT0wLHRoaXMuYjI9LXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTMpdGhpcy5iMD0xLHRoaXMuYjE9LTIqaCx0aGlzLmIyPTEsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTQpdGhpcy5iMD0xLWMsdGhpcy5iMT0tMipoLHRoaXMuYjI9MStjLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT01KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApO3RoaXMuYjA9MStjKnUsdGhpcy5iMT0tMipoLHRoaXMuYjI9MS1jKnUsdGhpcy5hMD0xK2MvdSx0aGlzLmExPS0yKmgsdGhpcy5hMj0xLWMvdX1lbHNlIGlmKHM9PT02KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQodSkqYyxsPSh1LTEpKmgscD0odSsxKSpoO3RoaXMuYjA9dSoodSsxLWwrZCksdGhpcy5iMT0yKnUqKHUtMS1wKSx0aGlzLmIyPXUqKHUrMS1sLWQpLHRoaXMuYTA9dSsxK2wrZCx0aGlzLmExPS0yKih1LTErcCksdGhpcy5hMj11KzErbC1kfWVsc2UgaWYocz09PTcpe2NvbnN0IHU9TWF0aC5wb3coMTAsbi80MCksZD0yKk1hdGguc3FydCh1KSpjLGw9KHUtMSkqaCxwPSh1KzEpKmg7dGhpcy5iMD11Kih1KzErbCtkKSx0aGlzLmIxPS0yKnUqKHUtMStwKSx0aGlzLmIyPXUqKHUrMStsLWQpLHRoaXMuYTA9dSsxLWwrZCx0aGlzLmExPTIqKHUtMS1wKSx0aGlzLmEyPXUrMS1sLWR9dGhpcy5iMC89dGhpcy5hMCx0aGlzLmIxLz10aGlzLmEwLHRoaXMuYjIvPXRoaXMuYTAsdGhpcy5hMS89dGhpcy5hMCx0aGlzLmEyLz10aGlzLmEwLHRoaXMuYTA9MTtjb25zdCBmPXRoaXMuYjAqdCt0aGlzLmIxKnRoaXMueDErdGhpcy5iMip0aGlzLngyLXRoaXMuYTEqdGhpcy55MS10aGlzLmEyKnRoaXMueTI7cmV0dXJuIHRoaXMueDI9dGhpcy54MSx0aGlzLngxPXQsdGhpcy55Mj10aGlzLnkxLHRoaXMueTE9ZixmfX1jb25zdCByZT1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsQURTUk5vZGU6YnMsQXVkaW9JbjpqcyxBdWRpb05vZGU6eSxCUEY6WXMsQmlxdWFkRmlsdGVyOmllLEJyb3duTm9pc2VPc2M6VnMsQ0M6WnMsQ0xPQ0tfUFBROl90LENMT0NLX1BQUzpncyxDbGlwOnNlLENsb2NrOnZzLENsb2NrRGl2OklzLENsb2NrT3V0OndzLERlbGF5OlNzLERpc3RvcnQ6X3MsRHVzdE9zYzpCcyxGaWx0ZXI6V3MsRm9sZDpHcyxIb2xkOk1zLEltcHVsc2VPc2M6T3MsTGFnOnpzLExjZ05vaXNlOlBzLE1pZGlDQzpYcyxNaWRpRnJlcTpVcyxNaWRpR2F0ZTpIcyxNaWRpSW46YnQsTWlkaVZlbDokcyxOb2lzZU9zYzpUcyxPdXRwdXQ6eHMsUGljazpRcyxQaW5rTm9pc2U6QXMsUHVsc2VPc2M6TnMsUmVtYXA6dGUsU2F3T3NjOkZzLFNjb3BlOkRzLFNlcXVlbmNlOkpzLFNpZGVjaGFpbkNvbXByZXNzb3I6a3MsU2lnbmFsOktzLFNpbmVPc2M6RXMsU2xldzpxcyxTbGlkZTpMcyxUcmlPc2M6UnMsVHJpZzplZSxaYXdPc2M6Q3N9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSksbmU9bmV3IE1hcChPYmplY3QuZW50cmllcyhyZSkpLFk9MTI4LEQ9TWF0aC5QSSx6PTIqRCxHPTEvc2FtcGxlUmF0ZSx4dD1yPT4xLU1hdGguZXhwKC1HL3IpLGp0PXI9Pk1hdGgucG93KDEwLHIvMjApLFM9KHIsdCxzKT0+TWF0aC5taW4oTWF0aC5tYXgocix0KSxzKSx1dD0ocix0LHMpPT5zKih0LXIpK3IsYj0ocix0KT0+clt0XT8/clswXSxRPXI9PnItTWF0aC5mbG9vcihyKSx0dD1yPT5yfDAsc3Q9cj0+dHQocisuNSksYWU9cj0+dHQocisxKSxIdD1yPT5yLXR0KHIpLGo9cj0+e2NvbnN0IHQ9cioqMjtyZXR1cm4gciooMjcrdCkvKDI3KzkqdCl9LFV0PShyLHQpPT57aWYocjwyKXJldHVybiBpPT4wO2NvbnN0IHM9dC8oci0xKSxlPXQqLjU7cmV0dXJuIGk9Pmkqcy1lfSxldD0ocix0KT0+cipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIG9lKHIsdCl7dD1NYXRoLm1pbih0LDEtdCk7Y29uc3Qgcz0xL3Q7cmV0dXJuIHI8dD8ocio9cywyKnItcioqMi0xKTpyPjEtdD8ocj0oci0xKSpzLHIqKjIrMipyKzEpOjB9Y29uc3QgeXQ9e3RyaShyLHQ9LjUpe2NvbnN0IHM9MS10O3JldHVybiByPj10PzEvcy1yL3M6ci90fSxzaW5lKHIpe3JldHVybiBNYXRoLnNpbih6KnIpKi41Ky41fSxyYW1wKHIpe3JldHVybiByfSxzYXcocil7cmV0dXJuIDEtcn0sc3F1YXJlKHIsdD0uNSl7cmV0dXJuIHI+PXQ/MDoxfSxjdXN0b20ocix0PVswLDFdKXtjb25zdCBzPXQubGVuZ3RoLTEsZT1NYXRoLmZsb29yKHIqcyksaT0xL3Msbj1TKHRbZV0sMCwxKSxvPVModFtlKzFdLDAsMSksYz1uLGg9MCxmPWk7cmV0dXJuKG8tYykvKGYtaCkqKHItaSplKStufSxzYXdibGVwKHIsdCl7cmV0dXJuIDIqci0xLW9lKHIsdCl9fSxoZT1PYmplY3Qua2V5cyh5dCk7Y2xhc3MgY2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTotMWU5fSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MWU5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdLG89ZS5mcmVxdWVuY3lbMF0sYz1lLnRpbWVbMF0saD1lLmRlcHRoWzBdLGY9ZS5za2V3WzBdLHU9ZS5waGFzZW9mZnNldFswXSxkPWUuY3VydmVbMF0sbD1lLmRjb2Zmc2V0WzBdLHA9ZS5taW5bMF0sbT1lLm1heFswXSxJPWhlW2Uuc2hhcGVbMF1dLHc9YVswXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9SHQoYypvK3UpKTtjb25zdCB2PW8qRztmb3IobGV0IE09MDtNPHc7TSsrKXtmb3IobGV0IFA9MDtQPGEubGVuZ3RoO1ArKyl7bGV0IGc9KHl0W0ldKHRoaXMucGhhc2UsZikrbCkqaDtnPU1hdGgucG93KGcsZCksYVtQXVtNXT1TKGcscCxtKX10aGlzLmluY3JlbWVudFBoYXNlKHYpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsY2UpO2NsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7bGV0IG89ZS5jb2Fyc2VbMF0/PzA7bz1NYXRoLm1heCgxLG8pO2ZvcihsZXQgYz0wO2M8WTtjKyspZm9yKGxldCBoPTA7aDxpLmxlbmd0aDtoKyspbltoXVtjXT1jJW89PT0wP2lbaF1bY106bltoXVtjLTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsdWUpO2NsYXNzIGxlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtsZXQgbz1lLmNydXNoWzBdPz84O289TWF0aC5tYXgoMSxvKTtmb3IobGV0IGM9MDtjPFk7YysrKWZvcihsZXQgaD0wO2g8aS5sZW5ndGg7aCsrKXtjb25zdCBmPU1hdGgucG93KDIsby0xKTtuW2hdW2NdPU1hdGgucm91bmQoaVtoXVtjXSpmKS9mfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixsZSk7Y2xhc3MgZmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFhKXJldHVybiExO3RoaXMuc3RhcnRlZD1hO2xldCBvPWUuc2hhcGVbMF07bz1vPDE/bzouOTk5OTk5OTk5NixvPTIqby8oMS1vKTtjb25zdCBjPU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxlLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBoPTA7aDxZO2grKylmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyluW2ZdW2hdPSgxK28pKmlbZl1baF0vKDErbypNYXRoLmFicyhpW2ZdW2hdKSkqYztyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsZmUpO2NsYXNzICR0e2NvbnN0cnVjdG9yKCl7RHQodGhpcywiczAiLDApO0R0KHRoaXMsInMxIiwwKX11cGRhdGUodCxzLGU9MCl7ZT1TKGUsMCwxKSxzPVMocywwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCBpPVMoMipNYXRoLnNpbihzKkQqRyksMCwxLjE0KSxhPTEtTWF0aC5wb3coLjUsOCplKzEpKmk7cmV0dXJuIHRoaXMuczA9YSp0aGlzLnMwLWkqdGhpcy5zMStpKnQsdGhpcy5zMT1hKnRoaXMuczEraSp0aGlzLnMwLHRoaXMuczF9fWNsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InZhbHVlIixkZWZhdWx0VmFsdWU6LjV9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5maWx0ZXJzPVtuZXcgJHQsbmV3ICR0XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDt0aGlzLnN0YXJ0ZWQ9YTtjb25zdCBvPVMoZS52YWx1ZVswXSwwLDEpO2xldCBjPSJub25lIixoLGY9MTtvPi41MT8oYz0iaGlwYXNzIixmPShvLS41KSoyKTpvPC40OSYmKGM9ImxvcGFzcyIsZj1vKjIpLGg9TWF0aC5wb3coZioxMSw0KTtmb3IobGV0IHU9MDt1PGkubGVuZ3RoO3UrKylmb3IobGV0IGQ9MDtkPFk7ZCsrKWM9PSJub25lIj9uW3VdW2RdPWlbdV1bZF06KHRoaXMuZmlsdGVyc1t1XS51cGRhdGUoaVt1XVtkXSxoLC4xKSxjPT09ImxvcGFzcyI/blt1XVtkXT10aGlzLmZpbHRlcnNbdV0uczE6Yz09PSJoaXBhc3MiP25bdV1bZF09aVt1XVtkXS10aGlzLmZpbHRlcnNbdV0uczE6blt1XVtkXT1pW3VdW2RdKTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRqZi1wcm9jZXNzb3IiLGRlKTtjbGFzcyBwZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo1MDB9LHtuYW1lOiJxIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRyaXZlIixkZWZhdWx0VmFsdWU6LjY5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLnAwPVswLDBdLHRoaXMucDE9WzAsMF0sdGhpcy5wMj1bMCwwXSx0aGlzLnAzPVswLDBdLHRoaXMucDMyPVswLDBdLHRoaXMucDMzPVswLDBdLHRoaXMucDM0PVswLDBdfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7Y29uc3Qgbz1lLnFbMF0sYz1TKE1hdGguZXhwKGUuZHJpdmVbMF0pLC4xLDJlMyk7bGV0IGg9ZS5mcmVxdWVuY3lbMF07aD1oKnoqRyxoPWg+MT8xOmg7Y29uc3QgZj1NYXRoLm1pbig4LG8qLjEzKTtsZXQgdT0xL2MqTWF0aC5taW4oMS43NSwxK2YpO2ZvcihsZXQgZD0wO2Q8WTtkKyspZm9yKGxldCBsPTA7bDxpLmxlbmd0aDtsKyspe2NvbnN0IHA9dGhpcy5wM1tsXSouMzYwODkxK3RoaXMucDMyW2xdKi40MTcyOSt0aGlzLnAzM1tsXSouMTc3ODk2K3RoaXMucDM0W2xdKi4wNDM5NzI1O3RoaXMucDM0W2xdPXRoaXMucDMzW2xdLHRoaXMucDMzW2xdPXRoaXMucDMyW2xdLHRoaXMucDMyW2xdPXRoaXMucDNbbF0sdGhpcy5wMFtsXSs9KGooaVtsXVtkXSpjLWYqcCktaih0aGlzLnAwW2xdKSkqaCx0aGlzLnAxW2xdKz0oaih0aGlzLnAwW2xdKS1qKHRoaXMucDFbbF0pKSpoLHRoaXMucDJbbF0rPShqKHRoaXMucDFbbF0pLWoodGhpcy5wMltsXSkpKmgsdGhpcy5wM1tsXSs9KGoodGhpcy5wMltsXSktaih0aGlzLnAzW2xdKSkqaCxuW2xdW2RdPXAqdX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImxhZGRlci1wcm9jZXNzb3IiLHBlKTtjbGFzcyBtZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJkaXN0b3J0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InBvc3RnYWluIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHtwcm9jZXNzb3JPcHRpb25zOnR9KXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLmFsZ29yaXRobT1ocyh0LmFsZ29yaXRobSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtmb3IobGV0IG89MDtvPFk7bysrKXtjb25zdCBjPVMoYihlLnBvc3RnYWluLG8pLC4wMDEsMSksaD1NYXRoLmV4cG0xKGIoZS5kaXN0b3J0LG8pKTtmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyl7Y29uc3QgdT1pW2ZdW29dO25bZl1bb109Yyp0aGlzLmFsZ29yaXRobSh1LGgpfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRpc3RvcnQtcHJvY2Vzc29yIixtZSk7Y2xhc3MgZ2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2NvbnN0e3R5cGU6cyxwYXlsb2FkOmV9PXQuZGF0YXx8e307cz09PSJpbml0aWFsaXplIiYmdGhpcy5pbml0aWFsaXplKGUpfSx0aGlzLmluaXRpYWxpemUoKX1pbml0aWFsaXplKHQpe3RoaXMucGhhc2U9W119c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjotMX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOi0xfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdLGQ9ZS52b2ljZXNbMF07Zm9yKGxldCBsPTA7bDx1WzBdLmxlbmd0aDtsKyspe2NvbnN0IHA9YihlLmRldHVuZSxsKSxtPWIoZS5mcmVxc3ByZWFkLGwpLEk9YihlLnBhbnNwcmVhZCxsKSouNSsuNTtsZXQgdz1NYXRoLnNxcnQoMS1JKSx2PU1hdGguc3FydChJKSxNPWIoZS5mcmVxdWVuY3ksbCk7TT1ldChNLHAvMTAwKTtjb25zdCBQPVV0KGQsbSk7Zm9yKGxldCBnPTA7ZzxkO2crKyl7Y29uc3QgVD1ldChNLFAoZykpLEE9UShUKkcpO3RoaXMucGhhc2VbZ109dGhpcy5waGFzZVtnXT8/TWF0aC5yYW5kb20oKTtjb25zdCBWPXl0LnNhd2JsZXAodGhpcy5waGFzZVtnXSxBKTt1WzBdW2xdKz1WKncsdVsxXVtsXSs9Vip2O2xldCBPPXRoaXMucGhhc2VbZ10rQTtPPj0xJiYoTy09MSksdGhpcy5waGFzZVtnXT1PO2NvbnN0IE49dzt3PXYsdj1OfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInN1cGVyc2F3LW9zY2lsbGF0b3IiLGdlKTtjb25zdCBiZT0yMDQ4LFB0PW5ldyBNYXA7ZnVuY3Rpb24gdmUocil7aWYoIVB0LmhhcyhyKSl7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KHIpO2ZvcihsZXQgcz0wO3M8cjtzKyspdFtzXT0uNSooMS1NYXRoLmNvcyh6KnMvcikpO1B0LnNldChyLHQpfXJldHVybiBQdC5nZXQocil9Y2xhc3MgSWUgZXh0ZW5kcyBYe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOmJlfSxzdXBlcih0KSx0aGlzLnRpbWVDdXJzb3I9MCx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy5pbnZmZnRTaXplPTEvdGhpcy5mZnRTaXplLHRoaXMuaGFubldpbmRvdz12ZSh0aGlzLmZmdFNpemUpLHRoaXMuZmZ0PW5ldyBRdCh0aGlzLmZmdFNpemUpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy50aW1lQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLm1hZ25pdHVkZXM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmZmdFNpemUvMisxKSx0aGlzLnBlYWtJbmRleGVzPW5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpLHRoaXMubmJQZWFrcz0wfXByb2Nlc3NPTEEodCxzLGUpe2xldCBpPWUucGl0Y2hGYWN0b3JbZS5waXRjaEZhY3Rvci5sZW5ndGgtMV07aTwwJiYoaT1pKi4yNSksaT1NYXRoLm1heCgwLGkrMSk7Zm9yKGxldCBuPTA7bjx0aGlzLm5iSW5wdXRzO24rKylmb3IobGV0IGE9MDthPHRbbl0ubGVuZ3RoO2ErKyl7Y29uc3Qgbz10W25dW2FdLGM9c1tuXVthXTt0aGlzLmFwcGx5SGFubldpbmRvdyhvKSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsbyksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKGkpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IobGV0IHM9MDtzPHRoaXMuYmxvY2tTaXplO3MrKyl0W3NdKj10aGlzLmhhbm5XaW5kb3dbc10qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2xldCB0PTAscz0wO2Zvcig7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7Y29uc3QgZT10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3NdLGk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltzKzFdO3RoaXMubWFnbml0dWRlc1t0XT1lKioyK2kqKjIsdCs9MSxzKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDtsZXQgdD0yO2NvbnN0IHM9dGhpcy5tYWduaXR1ZGVzLmxlbmd0aC0yO2Zvcig7dDxzOyl7Y29uc3QgZT10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1lKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1lKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2ZvcihsZXQgcz0wO3M8dGhpcy5uYlBlYWtzO3MrKyl7Y29uc3QgZT10aGlzLnBlYWtJbmRleGVzW3NdLGk9c3QoZSp0KTtpZihpPnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IG49MCxhPXRoaXMuZmZ0U2l6ZTtzPjAmJihuPWUtc3QoKGUtdGhpcy5wZWFrSW5kZXhlc1tzLTFdKS8yKSksczx0aGlzLm5iUGVha3MtMSYmKGE9ZSthZSgodGhpcy5wZWFrSW5kZXhlc1tzKzFdLWUpLzIpKTtjb25zdCBvPW4tZSxjPWEtZSxoPXoqdGhpcy5pbnZmZnRTaXplKihpLWUpLGY9TWF0aC5jb3MoaCp0aGlzLnRpbWVDdXJzb3IpLHU9TWF0aC5zaW4oaCp0aGlzLnRpbWVDdXJzb3IpO2ZvcihsZXQgZD1vO2Q8YztkKyspe2NvbnN0IGw9ZStkLHA9aStkO2lmKHA+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7Y29uc3QgbT0yKmwsST1tKzEsdz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW21dLHY9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltJXSxNPXcqZi12KnUsUD13KnUrdipmLGc9MipwLFQ9ZysxO3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2ddKz1NLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW1RdKz1QfX19fXJlZ2lzdGVyUHJvY2Vzc29yKCJwaGFzZS12b2NvZGVyLXByb2Nlc3NvciIsSWUpO2NsYXNzIHdlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoaT0tRCx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9RCx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7Y29uc3QgaT1zWzBdO2xldCBuPTEsYTtmb3IobGV0IG89MDtvPChpWzBdLmxlbmd0aD8/MCk7bysrKXtjb25zdCBjPSgxLVMoYihlLnB1bHNld2lkdGgsbyksLS45OSwuOTkpKSpELGg9YihlLmRldHVuZSxvKSxmPWV0KGIoZS5mcmVxdWVuY3ksbyksaC8xMDApO2E9Zip6KkcsdGhpcy5kcGhpZis9LjEqKGEtdGhpcy5kcGhpZiksbio9Ljk5OTgsdGhpcy5lbnZmKz0uMSoobi10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpmKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49RCYmKHRoaXMucGhpLT16KTtsZXQgdT1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMCk7dGhpcy5ZMD0uNSoodSt0aGlzLlkwKTtsZXQgZD1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMStjKTt0aGlzLlkxPS41KihkK3RoaXMuWTEpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bb109LjE1Kih1LWQpKnRoaXMuZW52Zn1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInB1bHNlLW9zY2lsbGF0b3IiLHdlKTtjb25zdCBUdD17Yml0QzpmdW5jdGlvbihyLHQscyl7cmV0dXJuIHImdD9zOjB9LGJyOmZ1bmN0aW9uKHIsdD04KXtpZih0PjMyKXRocm93IG5ldyBFcnJvcigiYnIoKSBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMzIiKTtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspc3w9VHQuYml0QyhyLDE8PGUsMTw8dC0oZSsxKSk7cmV0dXJuIHN9LHNpbmY6ZnVuY3Rpb24ocil7cmV0dXJuIE1hdGguc2luKHIqRC8xMjgpfSxjb3NmOmZ1bmN0aW9uKHIpe3JldHVybiBNYXRoLmNvcyhyKkQvMTI4KX0sdGFuZjpmdW5jdGlvbihyKXtyZXR1cm4gTWF0aC50YW4ocipELzEyOCl9LHJlZ0c6ZnVuY3Rpb24ocix0KXtyZXR1cm4gdC50ZXN0KHIudG9TdHJpbmcoMikpfX07bGV0IGx0LEJ0O2Z1bmN0aW9uIFNlKHIpe2lmKGx0PT1udWxsKXtsdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXRoKSxCdD1sdC5tYXAoZT0+TWF0aFtlXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhUdCkscz10Lm1hcChlPT5UdFtlXSk7bHQucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxCdC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5zKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLmx0LCJ0IixgcmV0dXJuIDAsCiR7cnx8MH07YCkuYmluZChnbG9iYWxUaGlzLC4uLkJ0KX1jbGFzcyBfZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5wb3J0Lm9ubWVzc2FnZT10PT57bGV0e2NvZGVUZXh0OnN9PXQuZGF0YTtjb25zdHtieXRlQmVhdFN0YXJ0VGltZTplfT10LmRhdGE7ZSE9bnVsbCYmKHRoaXMudD0wLHRoaXMuaW5pdGlhbE9mZnNldD1NYXRoLmZsb29yKGUpKSxzPXMudHJpbSgpLnJlcGxhY2UoL15ldmFsXCh1bmVzY2FwZVwoZXNjYXBlKD86YHxcKCd8XCgifFwoYCkoLio/KSg/OmB8J1wpfCJcKXxgXCkpLnJlcGxhY2VcKFwvdVwoXC5cLlwpXC9nLFsiJ2BdXCQxJVsiJ2BdXClcKVwpJC8sKGksbik9PnVuZXNjYXBlKGVzY2FwZShuKS5yZXBsYWNlKC91KC4uKS9nLCIkMSUiKSkpLHRoaXMuZnVuYz1TZShzKX0sdGhpcy5pbml0aWFsT2Zmc2V0PTAsdGhpcy50PW51bGwsdGhpcy5mdW5jPW51bGx9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7dGhpcy50PT1udWxsJiYodGhpcy50PWUuYmVnaW5bMF0qc2FtcGxlUmF0ZSk7Y29uc3QgaT1zWzBdLG49MjU2Kkc7Zm9yKGxldCBhPTA7YTxpWzBdLmxlbmd0aDthKyspe2NvbnN0IG89YihlLmRldHVuZSxhKSxjPWV0KGIoZS5mcmVxdWVuY3ksYSksby8xMDApLGg9bipjKnRoaXMudCt0aGlzLmluaXRpYWxPZmZzZXQsdT0odGhpcy5mdW5jKGgpJjI1NSkvMTI3LjUtMSxkPVModSouMiwtLjQsLjQpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bYV09ZDt0aGlzLnQrK31yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImJ5dGUtYmVhdC1wcm9jZXNzb3IiLF9lKTtjbGFzcyBNZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiYXR0YWNrIixkZWZhdWx0VmFsdWU6LjAwNSxtaW5WYWx1ZTowfSx7bmFtZToiZGVjYXkiLGRlZmF1bHRWYWx1ZTouMTQsbWluVmFsdWU6MH0se25hbWU6InN1c3RhaW4iLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOjAsbWF4VmFsdWU6MX0se25hbWU6InJlbGVhc2UiLGRlZmF1bHRWYWx1ZTouMSxtaW5WYWx1ZTowfSx7bmFtZToiYXR0YWNrQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJkZWNheUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6LTFlOX0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjFlOX0se25hbWU6InJldHJpZ2dlciIsZGVmYXVsdFZhbHVlOjEsbWluVmFsdWU6MCxtYXhWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudmFsPTAsdGhpcy5zZWdJZHg9MCx0aGlzLnN0YXRlPTAsdGhpcy5iZWdpblRpbWU9MCx0aGlzLmVuZFRpbWU9MCx0aGlzLmF0dGFja1N0YXJ0PTB9X3dhcnAodCxzLGU9OCl7aWYodD09PTB8fHQ9PT0xKXJldHVybiB0O2lmKHM+MCl7Y29uc3QgaT0xK2UqcztyZXR1cm4gMS1NYXRoLnBvdygxLXQsaSl9ZWxzZXtjb25zdCBpPTEtZSpzO3JldHVybiBNYXRoLnBvdyh0LGkpfX1fYWR2YW5jZSh0LHMsZSxpKXtpZihlPT09MHx8dD09PXMpdGhpcy52YWw9cztlbHNle2NvbnN0IG49TWF0aC5taW4oMSwoY3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWUpL2UpLGE9dGhpcy5fd2FycChuLGkpO3RoaXMudmFsPXQrKHMtdCkqYX19cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdWzBdLG89YihlLnJldHJpZ2dlciwwKT49LjU7aSE9PXRoaXMuYmVnaW5UaW1lJiYodGhpcy5zdGF0ZT09PTB8fG8pJiYodGhpcy5iZWdpblRpbWU9aSx0aGlzLnN0YXRlPTEsdGhpcy5lbmRUaW1lPWIoZS5lbmQsMCksdGhpcy5hdHRhY2tTdGFydD10aGlzLnZhbCk7Y29uc3QgYz10aGlzLmVuZFRpbWUtdGhpcy5iZWdpblRpbWU7Zm9yKGxldCBoPTA7aDxhLmxlbmd0aDtoKyspe2NvbnN0IGY9YihlLmF0dGFjayxoKSx1PWIoZS5kZWNheSxoKSxkPWIoZS5zdXN0YWluLGgpLGw9YihlLnJlbGVhc2UsaCkscD1iKGUuYXR0YWNrQ3VydmUsaCksbT1iKGUuZGVjYXlDdXJ2ZSxoKSxJPWIoZS5yZWxlYXNlQ3VydmUsaCksdz1iKGUuZGVwdGgsaCksdj1iKGUubWluLGgpLE09YihlLm1heCxoKSxQPVt7dGltZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksc3RhcnQ6MCx0YXJnZXQ6MH0se3RpbWU6ZixzdGFydDp0aGlzLmF0dGFja1N0YXJ0LHRhcmdldDoxLGN1cnZlOnB9LHt0aW1lOmYrdSxzdGFydDoxLHRhcmdldDpkLGN1cnZlOm19LHt0aW1lOmMsc3RhcnQ6ZCx0YXJnZXQ6ZH0se3RpbWU6YytsLHN0YXJ0OmQsdGFyZ2V0OjAsY3VydmU6SX1dO2xldHt0aW1lOmcsc3RhcnQ6VCx0YXJnZXQ6QSxjdXJ2ZTpWfT1QW3RoaXMuc3RhdGVdO2Zvcih0aGlzLl9hZHZhbmNlKFQsQSxnLFYpO2N1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lPj1nOyl0aGlzLnN0YXRlPSh0aGlzLnN0YXRlKzEpJVAubGVuZ3RoLGc9UFt0aGlzLnN0YXRlXS50aW1lO2FbaF09Uyh0aGlzLnZhbCp3LHYsTSl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJlbnZlbG9wZS1wcm9jZXNzb3IiLE1lKTtjb25zdCB4PU9iamVjdC5mcmVlemUoe05PTkU6MCxBU1lNOjEsTUlSUk9SOjIsQkVORFA6MyxCRU5ETTo0LEJFTkRNUDo1LFNZTkM6NixRVUFOVDo3LEZPTEQ6OCxQV006OSxPUkJJVDoxMCxTUElOOjExLENIQU9TOjEyLFBSSU1FUzoxMyxCSU5BUlk6MTQsQlJPV05JQU46MTUsUkVDSVBST0NBTDoxNixXT1JNSE9MRToxNyxMT0dJU1RJQzoxOCxTSUdNT0lEOjE5LEZSQUNUQUw6MjAsRkxJUDoyMX0pO2Z1bmN0aW9uIHhlKHIpe3JldHVybiByPXIrMjEyNzkxMjIxNCsocjw8MTIpLHI9cl4zMzQ1MDcyNzAwXnI+Pj4xOSxyPXIrMzc0NzYxMzkzKyhyPDw1KSxyPXIrMzU1MDYzNTExNl5yPDw5LHI9cis0MjUxOTkzNzk3KyhyPDwzKSxyPXJeMzA0MjU5NDU2OV5yPj4+MTYscj4+PjB9Y29uc3QgS3Q9cj0+KHhlKHIpPj4+OCkvMTY3NzcyMTY7ZnVuY3Rpb24geWUocix0KXtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspcz1zPDwxfHImMSxyPj4+PTE7cmV0dXJuIHN9ZnVuY3Rpb24gUGUocil7Y29uc3QgdD1NYXRoLmZsb29yKHIpLHM9ci10LGU9S3QodCksaT1LdCh0KzEpO3JldHVybiBlKyhpLWUpKnN9ZnVuY3Rpb24gVGUocix0PTQpe2xldCBzPS41LGU9MCxpPTAsbj0xO2ZvcihsZXQgYT0wO2E8dDthKyspZSs9cypQZShyKm4pLGkrPXMscyo9LjUsbio9MjtyZXR1cm4gZS9pKjItMX1jb25zdCBWdD17fTtjbGFzcyBCZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOi0xLG1pbjotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6LTEsbWluOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMTgsbWluOjB9LHtuYW1lOiJwb3NpdGlvbiIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX0se25hbWU6IndhcnBNb2RlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjEsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNyxtaW46MCxtYXg6MX0se25hbWU6InBoYXNlcmFuZCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9XX1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLnBvcnQub25tZXNzYWdlPXM9Pntjb25zdHt0eXBlOmUscGF5bG9hZDppfT1zLmRhdGF8fHt9O2U9PT0iaW5pdGlhbGl6ZSImJnRoaXMuaW5pdGlhbGl6ZShpKX0sdGhpcy5pbml0aWFsaXplKCl9aW5pdGlhbGl6ZSh0KXtpZih0aGlzLnRhYmxlPW51bGwsdGhpcy5mcmFtZUxlbj1udWxsLHRoaXMubnVtRnJhbWVzPW51bGwsdGhpcy5waGFzZT1bXSx0IT1udWxsJiZ0LmtleSl7Y29uc3Qgcz10LmtleTt0aGlzLmZyYW1lTGVuPXQuZnJhbWVMZW4sVnRbc118fChWdFtzXT10LmZyYW1lcyksdGhpcy50YWJsZT1WdFtzXSx0aGlzLm51bUZyYW1lcz10aGlzLnRhYmxlLmxlbmd0aH19X21pcnJvcih0KXtyZXR1cm4gMS1NYXRoLmFicygyKnQtMSl9X3RvQml0cyh0LHM9MixlPTEyKXtjb25zdCBpPWUrKHMtZSkqdDtyZXR1cm57YjppLG46c3QoTWF0aC5wb3coMixpKSl9fV93YXJwUGhhc2UodCxzLGUpe3N3aXRjaChlKXtjYXNlIHguTk9ORTpyZXR1cm4gdDtjYXNlIHguQVNZTTp7Y29uc3QgaT0uMDErLjk5KnM7cmV0dXJuIHQ8aT8uNSp0L2k6LjUrLjUqKHQtaSkvKDEtaSl9Y2FzZSB4Lk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LHMseC5BU1lNKSk7Y2FzZSB4LkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMypzKTtjYXNlIHguQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKnMpKTtjYXNlIHguQkVORE1QOnJldHVybiBzPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMipzLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqcy0xLDIpO2Nhc2UgeC5TWU5DOntjb25zdCBpPU1hdGgucG93KDE2LHMqKjIpO3JldHVybiB0KmklMX1jYXNlIHguUVVBTlQ6e2NvbnN0e246aX09dGhpcy5fdG9CaXRzKHMpO3JldHVybiB0dCh0KmkpL2l9Y2FzZSB4LkZPTEQ6e2NvbnN0IG49MStNYXRoLm1heCgxLHN0KDcqcykpO3JldHVybiBNYXRoLmFicyhIdChuKnQpLS41KSoyfWNhc2UgeC5QV006e2NvbnN0IGk9UyguNSsuNDkqKDIqcy0xKSwwLDEpO3JldHVybiB0PGk/dC9pKi41Oi41Kyh0LWkpLygxLWkpKi41fWNhc2UgeC5PUkJJVDp7Y29uc3QgaT0uNSpzO3JldHVybiBRKHQraSpNYXRoLnNpbih6KjMqdCkpfWNhc2UgeC5TUElOOntjb25zdCBpPS41KnMse259PXRoaXMuX3RvQml0cyhzLDEsNik7cmV0dXJuIFEodCtpKk1hdGguc2luKHoqbip0KSl9Y2FzZSB4LkNIQU9TOntjb25zdCBuPSgzLjcrLjMqcykqdCooMS10KTtyZXR1cm4gUygoMS1zKSp0K3MqbiwwLDEpfWNhc2UgeC5QUklNRVM6e2NvbnN0IGk9YT0+e2lmKGE8MilyZXR1cm4hMTtpZihhJTI9PT0wKXJldHVybiBhPT09Mjtmb3IobGV0IG89MztvKioyPD1hO28rPTIpaWYoYSVvPT09MClyZXR1cm4hMTtyZXR1cm4hMH07bGV0e259PXRoaXMuX3RvQml0cyhzLDMpO2Zvcig7IWkobik7KW4rKztyZXR1cm4gdHQodCpuKS9ufWNhc2UgeC5CSU5BUlk6e2xldHtiOml9PXRoaXMuX3RvQml0cyhzLDMpO2k9c3QoaSk7Y29uc3Qgbj0xPDxpLGE9dHQodCpuKTtyZXR1cm4geWUoYSxpKS9ufWNhc2UgeC5CUk9XTklBTjp7Y29uc3QgaT0uMjUqcypUZSg2NCp0LDQpO3JldHVybiBRKHQraSl9Y2FzZSB4LlJFQ0lQUk9DQUw6e2NvbnN0IGk9Mis0KnMsbj10KmksYT10KygxLXQpKmksbz1hPjFlLTEyP24vYTowO3JldHVybiBTKG8sMCwxKX1jYXNlIHguV09STUhPTEU6e2NvbnN0IGk9UyguOCpzLDAsMSksbj0uNSooMS1pKSxhPS41KigxK2kpO3JldHVybiB0PG4/dC9uKi41OnQ+YT8uNSooMSsodC1hKS8oMS1hKSk6LjV9Y2FzZSB4LkxPR0lTVElDOntsZXQgaT10O2NvbnN0IG49My42Ky40KnMsYT0xK3N0KDIqcyk7Zm9yKGxldCBvPTA7bzxhO28rKylpPW4qaSooMS1pKTtyZXR1cm4gUyhpLDAsMSl9Y2FzZSB4LlNJR01PSUQ6e2NvbnN0IGk9MSsxMCpzLG49dC0uNSxhPTEvKDErTWF0aC5leHAoLWkqbikpLG89MS8oMStNYXRoLmV4cCguNSppKSksYz0xLygxK01hdGguZXhwKC0uNSppKSk7cmV0dXJuKGEtbykvKGMtbyl9Y2FzZSB4LkZSQUNUQUw6e2NvbnN0IGk9LjUqTWF0aC5zaW4oeip0KSpzO3JldHVybiBRKHQraSl9Y2FzZSB4LkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQscyl7Y29uc3QgZT10Lmxlbmd0aCxpPXMqZTtsZXQgbj1pfDA7bj49ZSYmKG49MCk7Y29uc3QgYT1pLW4sbz10W25dO2xldCBjPW4rMTtjPj1lJiYoYz0wKTtjb25zdCBoPXRbY107cmV0dXJuIG8rKGgtbykqYX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdWzBdLGQ9c1swXVsxXXx8c1swXVswXTtpZighdGhpcy50YWJsZSlyZXR1cm4gdS5maWxsKDApLGQhPT11JiZkLnNldCh1KSwhMDtjb25zdCBsPWUudm9pY2VzWzBdO2ZvcihsZXQgcD0wO3A8dS5sZW5ndGg7cCsrKXtjb25zdCBtPWIoZS5kZXR1bmUscCksST1iKGUuZnJlcXNwcmVhZCxwKSx2PVMoYihlLnBvc2l0aW9uLHApLDAsMSkqKHRoaXMubnVtRnJhbWVzLTEpLE09dnwwLFA9di1NLGc9UyhiKGUud2FycCxwKSwwLDEpLFQ9YihlLndhcnBNb2RlLHApLEE9UyhiKGUucGhhc2VyYW5kLHApLDAsMSksVj1sPjE/UyhiKGUucGFuc3ByZWFkLHApLDAsMSk6MCxPPU1hdGguc3FydCguNS0uNSpWKSxOPU1hdGguc3FydCguNSsuNSpWKTtsZXQgQz1iKGUuZnJlcXVlbmN5LHApO0M9ZXQoQyxtLzEwMCk7Y29uc3QgRj0xL01hdGguc3FydChsKSxxPVV0KGwsSSk7Zm9yKGxldCBCPTA7QjxsO0IrKyl7Y29uc3QgTD0oQiYxKT09MTtsZXQgRT1PLEg9TjtMJiYoRT1OLEg9Tyk7Y29uc3QgJD1ldChDLHEoQikpKkc7dGhpcy5waGFzZVtCXT10aGlzLnBoYXNlW0JdPz9NYXRoLnJhbmRvbSgpKkE7Y29uc3QgVT10aGlzLl93YXJwUGhhc2UodGhpcy5waGFzZVtCXSxnLFQpLEs9dGhpcy5fc2FtcGxlRnJhbWUodGhpcy50YWJsZVtNXSxVKSxaPXRoaXMuX3NhbXBsZUZyYW1lKHRoaXMudGFibGVbTWF0aC5taW4odGhpcy5udW1GcmFtZXMtMSxNKzEpXSxVKTtsZXQgaz11dChLLFosUCk7VD09PXguRkxJUCYmdGhpcy5waGFzZVtCXTxnJiYoaz0tayksdVtwXSs9aypFKkYsZFtwXSs9aypIKkYsdGhpcy5waGFzZVtCXT1RKHRoaXMucGhhc2VbQl0rJCl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixCZSk7Y2xhc3MgVmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVybltdfWNvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5nYWluQ29lZmY9eHQoLjIpLHRoaXMuYXZnR2Fpbj0xO2xldHthdHRhY2tUaW1lOnM9LjAwMyxzdXN0YWluVGltZTplPS4wOCxhdHRhY2s6aT0wLHN1c3RhaW46bj0wLHNlbnNpdGl2aXR5OmE9LjEsbWl4Om89MSxiZWdpbjpjPTAsZW5kOmg9MH09dC5wcm9jZXNzb3JPcHRpb25zO3M9UyhzLDVlLTQsLjA1KSxlPVMoZSwuMDEsLjUpLHRoaXMuYXR0YWNrQ29lZmY9eHQocyksdGhpcy5zdXN0YWluQ29lZmY9eHQoZSksdGhpcy5hdHRhY2tBbXQ9UyhpLC0xLDEpLHRoaXMuc3VzdGFpbkFtdD1TKG4sLTEsMSksdGhpcy5zY2FsaW5nPS41KzUqUyhhLDAsMSksdGhpcy5taXg9UyhvLDAsMSksdGhpcy5iZWdpbj1jLHRoaXMuZW5kPWgsdGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheSgyKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheSgyKX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdO2lmKGN1cnJlbnRUaW1lPj10aGlzLmVuZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9dGhpcy5iZWdpbilyZXR1cm4hMDtjb25zdCBhPWkubGVuZ3RoO2E+dGhpcy5hdHRhY2tFbnYubGVuZ3RoJiYodGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheShhKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheShhKSk7bGV0IG89dGhpcy5hdmdHYWluO2ZvcihsZXQgYz0wO2M8YTtjKyspe2xldCBoPXRoaXMuYXR0YWNrRW52W2NdLGY9dGhpcy5zdXN0YWluRW52W2NdO2ZvcihsZXQgdT0wO3U8WTt1Kyspe2NvbnN0IGQ9aVtjXVt1XSxsPU1hdGguYWJzKGQpO2g9dXQoaCxsLHRoaXMuYXR0YWNrQ29lZmYpLGY9dXQoZixsLHRoaXMuc3VzdGFpbkNvZWZmKTtjb25zdCBwPVModGhpcy5zY2FsaW5nKihoLWYpLyhmKzFlLTYpLC0xLjUsMS41KSxtPXA+MD9wOjAsST1wPDA/LXA6MCx3PWp0KHRoaXMuYXR0YWNrQW10Km0qMTgpLHY9anQodGhpcy5zdXN0YWluQW10KkkqMzYpLE09Uyh3KnYsMCw4KTtvPXV0KG8sTSx0aGlzLmdhaW5Db2VmZik7Y29uc3QgUD1vPi4wMDE/MS9vOjEsZz1kKk0qUDtsZXQgVD11dChkLGcsdGhpcy5taXgpO1QvPTErTWF0aC5hYnMoVCksbltjXVt1XT1UfXRoaXMuYXR0YWNrRW52W2NdPWgsdGhpcy5zdXN0YWluRW52W2NdPWZ9cmV0dXJuIHRoaXMuYXZnR2Fpbj1vLCEwfX1yZWdpc3RlclByb2Nlc3NvcigidHJhbnNpZW50LXByb2Nlc3NvciIsVmUpO2NsYXNzIEFlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBsYXlQb3M9MDtjb25zdCB0PTE2O3RoaXMub3V0cHV0cz1uZXcgQXJyYXkodCkuZmlsbCgwKSx0aGlzLnNvdXJjZXM9bmV3IEFycmF5KHQpLmZpbGwoMCksdGhpcy5nYXRlRW5kZWQ9ITEsdGhpcy5zdGFydGVkPSExLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3ZhciBoLGY7bGV0e3NyYzplLHNjaGVtYTp7dWdlbnM6aSxyZWdpc3RlcnM6bn0sc3RhcnQ6YSxnYXRlRW5kOm8sZW5kOmN9PXMuZGF0YTt0aGlzLnN0YXJ0PWEsdGhpcy5nYXRlRW5kPW8sdGhpcy5lbmQ9Yyx0aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkobikuZmlsbCgwKSx0aGlzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCiR7ZX1gLHRoaXMubm9kZXM9W107Zm9yKGxldCB1PTA7dTxpLmxlbmd0aDt1Kyspe2NvbnN0IGQ9aVt1XSxsPW5lLmdldChkLnR5cGUpLHA9bmV3IGwodSxkLHNhbXBsZVJhdGUpO3AudHlwZT09PSJjYyImJigoZj0oaD1kLmlucHV0cyk9PW51bGw/dm9pZCAwOmhbMF0pIT1udWxsJiZmLmluY2x1ZGVzKCJzdHJ1ZGVsLWdhdGUiKSkmJihwLnNldFZhbHVlKDEpLHRoaXMuZ2F0ZU5vZGU9cCksdGhpcy5ub2Rlc1t1XT1wfXRoaXMuZ2VuU2FtcGxlPW5ldyBGdW5jdGlvbigidGltZSIsIm5vZGVzIiwiaW5wdXQiLCJyIiwibyIsInMiLHRoaXMuc3JjKX19cHJvY2Vzcyh0LHMpe3ZhciBvLGM7Y29uc3QgZT0obz10WzBdKT09bnVsbD92b2lkIDA6b1swXTtpZihjdXJyZW50VGltZT49dGhpcy5lbmQpcmV0dXJuITE7aWYodGhpcy5nZW5TYW1wbGU9PT12b2lkIDB8fGN1cnJlbnRUaW1lPHRoaXMuc3RhcnQpcmV0dXJuITA7dGhpcy5zdGFydGVkPSEwLCF0aGlzLmdhdGVFbmRlZCYmY3VycmVudFRpbWU+dGhpcy5nYXRlRW5kJiYoKGM9dGhpcy5nYXRlTm9kZSk9PW51bGx8fGMuc2V0VmFsdWUoMCksdGhpcy5nYXRlRW5kZWQ9ITApO2NvbnN0IGk9c1swXSxuPWlbMF0sYT1pWzFdO2ZvcihsZXQgaD0wO2g8WTtoKyspe3RoaXMuZ2VuU2FtcGxlKHRoaXMucGxheVBvcyx0aGlzLm5vZGVzLGU/ZVtoXTowLHRoaXMucmVnaXN0ZXJzLHRoaXMub3V0cHV0cyx0aGlzLnNvdXJjZXMpO2NvbnN0IGY9dGhpcy5vdXRwdXRzWzBdLHU9dGhpcy5vdXRwdXRzWzFdO2E/KG5baF09ZixhW2hdPXUpOm5baF09LjUqKGYrdSksdGhpcy5wbGF5UG9zKz0xL3NhbXBsZVJhdGV9cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3NvcigiZ2VuZXJpYy1wcm9jZXNzb3IiLEFlKSxSLldhcnBNb2RlPXgsT2JqZWN0LmRlZmluZVByb3BlcnR5KFIsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLFJ9KHt9KTsK";let yi=[],ss=0;const pr=4;let V4=i=>{let v=[],x={get(){return x.lc||x.listen(()=>{})(),x.value},lc:0,listen(T){return x.lc=v.push(T),()=>{for(let D=ss+pr;D<yi.length;)yi[D]===T?yi.splice(D,pr):D+=pr;let F=v.indexOf(T);~F&&(v.splice(F,1),--x.lc||x.off())}},notify(T,F){let D=!yi.length;for(let p of v)yi.push(p,x.value,T,F);if(D){for(ss=0;ss<yi.length;ss+=pr)yi[ss](yi[ss+1],yi[ss+2],yi[ss+3]);yi.length=0}},off(){},set(T){let F=x.value;F!==T&&(x.value=T,x.notify(F))},subscribe(T){let F=x.listen(T);return T(x.value),F},value:i};return x},z4=(i={})=>{let v=V4(i);return v.setKey=function(x,T){let F=v.value;typeof T>"u"&&x in v.value?(v.value={...v.value},delete v.value[x],v.notify(F,x)):v.value[x]!==T&&(v.value={...v.value,[x]:T},v.notify(F,x))},v};const W4={stretch:{node:"stretch",param:"pitchFactor"},gain:{node:"gain",param:"gain"},postgain:{node:"post",param:"gain"},pan:{node:"pan",param:"pan"},tremolo:{node:"tremolo",param:"frequency"},tremolosync:{node:"tremolo",param:"frequency"},tremolodepth:{node:"tremolo_gain",param:"gain"},tremoloskew:{node:"tremolo",param:"skew"},tremolophase:{node:"tremolo",param:"phase"},tremoloshape:{node:"tremolo",param:"shape"},lfo:{node:"lfo",param:"frequency"},lfo_rate:{node:"lfo",param:"frequency"},lfo_sync:{node:"lfo",param:"frequency"},lfo_depth:{node:"lfo",param:"depth"},lfo_depthabs:{node:"lfo",param:"depth"},lfo_skew:{node:"lfo",param:"skew"},lfo_curve:{node:"lfo",param:"curve"},lfo_dcoffset:{node:"lfo",param:"dcoffset"},env:{node:"env",param:"depth"},env_attack:{node:"env",param:"attack"},env_decay:{node:"env",param:"decay"},env_sustain:{node:"env",param:"sustain"},env_release:{node:"env",param:"release"},bmod:{node:"bmod",param:"depth"},bmod_depth:{node:"bmod",param:"depth"},bmod_depthabs:{node:"bmod",param:"depth"},cutoff:{node:"lpf",param:"frequency"},resonance:{node:"lpf",param:"Q"},lprate:{node:"lpf_lfo",param:"rate"},lpsync:{node:"lpf_lfo",param:"sync"},lpdepth:{node:"lpf_lfo",param:"depth"},lpdepthfrequency:{node:"lpf_lfo",param:"depth"},lpshape:{node:"lpf_lfo",param:"shape"},lpdc:{node:"lpf_lfo",param:"dcoffset"},lpskew:{node:"lpf_lfo",param:"skew"},hcutoff:{node:"hpf",param:"frequency"},hresonance:{node:"hpf",param:"Q"},hprate:{node:"hpf_lfo",param:"rate"},hpsync:{node:"hpf_lfo",param:"sync"},hpdepth:{node:"hpf_lfo",param:"depth"},hpdepthfrequency:{node:"hpf_lfo",param:"depth"},hpshape:{node:"hpf_lfo",param:"shape"},hpdc:{node:"hpf_lfo",param:"dcoffset"},hpskew:{node:"hpf_lfo",param:"skew"},bandf:{node:"bpf",param:"frequency"},bandq:{node:"bpf",param:"Q"},bprate:{node:"bpf_lfo",param:"rate"},bpsync:{node:"bpf_lfo",param:"sync"},bpdepth:{node:"bpf_lfo",param:"depth"},bpdepthfrequency:{node:"bpf_lfo",param:"depth"},bpshape:{node:"bpf_lfo",param:"shape"},bpdc:{node:"bpf_lfo",param:"dcoffset"},bpskew:{node:"bpf_lfo",param:"skew"},vowel:{node:"vowel",param:"frequency"},coarse:{node:"coarse",param:"coarse"},crush:{node:"crush",param:"crush"},shape:{node:"shape",param:"shape"},shapevol:{node:"shape",param:"postgain"},distort:{node:"distort",param:"distort"},distortvol:{node:"distort",param:"postgain"},distorttype:{node:"distort",param:"distort"},compressor:{node:"compressor",param:"threshold"},compressorRatio:{node:"compressor",param:"ratio"},compressorKnee:{node:"compressor",param:"knee"},compressorAttack:{node:"compressor",param:"attack"},compressorRelease:{node:"compressor",param:"release"},phaserrate:{node:"phaser_lfo",param:"frequency"},phasersweep:{node:"phaser_lfo",param:"depth"},phasercenter:{node:"phaser",param:"frequency"},phaserdepth:{node:"phaser",param:"Q"},delay:{node:"delay_mix",param:"gain"},delaytime:{node:"delay",param:"delayTime"},delayfeedback:{node:"delay",param:"feedback"},delaysync:{node:"delay",param:"delayTime"},dry:{node:"dry",param:"gain"},room:{node:"room_mix",param:"gain"},djf:{node:"djf",param:"value"},busgain:{node:"bus",param:"gain"},s:{node:"source",param:"frequency"},detune:{node:"source",param:"freqspread"},wt:{node:"source",param:"position"},warp:{node:"source",param:"warp"},freq:{node:"source",param:"frequency"},note:{node:"source",param:"frequency"},wtdc:{node:"wt_lfo",param:"dc"},wtskew:{node:"wt_lfo",param:"skew"},wtrate:{node:"wt_lfo",param:"frequency"},wtsync:{node:"wt_lfo",param:"frequency"},wtdepth:{node:"wt_lfo",param:"depth"},warpdc:{node:"warp_lfo",param:"dc"},warpskew:{node:"warp_lfo",param:"skew"},warprate:{node:"warp_lfo",param:"frequency"},warpsync:{node:"warp_lfo",param:"frequency"},warpdepth:{node:"warp_lfo",param:"depth"},fmi:{node:"fm_1_gain",param:"gain"},fmi2:{node:"fm_2_gain",param:"gain"},fmi3:{node:"fm_3_gain",param:"gain"},fmi4:{node:"fm_4_gain",param:"gain"},fmi5:{node:"fm_5_gain",param:"gain"},fmi6:{node:"fm_6_gain",param:"gain"},fmi7:{node:"fm_7_gain",param:"gain"},fmi8:{node:"fm_8_gain",param:"gain"},fmh:{node:"fm_1",param:"frequency"},fmh2:{node:"fm_2",param:"frequency"},fmh3:{node:"fm_3",param:"frequency"},fmh4:{node:"fm_4",param:"frequency"},fmh5:{node:"fm_5",param:"frequency"},fmh6:{node:"fm_6",param:"frequency"},fmh7:{node:"fm_7",param:"frequency"},fmh8:{node:"fm_8",param:"frequency"},pw:{node:"source",param:"pulsewidth"},pwrate:{node:"pw_lfo",param:"frequency"},pwsweep:{node:"pw_lfo",param:"depth"},vib:{node:"vib",param:"frequency"},vibmod:{node:"vib_gain",param:"gain"},byteBeatStartTime:{node:"source",param:"byteBeatStartTime"},spread:{node:"source",param:"panspread"},transient:{node:"transient",param:"attack"}};function Y4(){return W4}const Z4=(i,v)=>{if(i?.parameters){const T=i.parameters.get(v);if(T instanceof AudioParam)return T}let x=i?.[v];if(x===void 0&&v==="frequency"&&(x=i?.detune??i?.playbackRate),x instanceof AudioParam)return x},il=Y4(),U4=(i,v)=>{const x=i.split("_")[0];return il[`${x}_${v}`]??il[x]},Gh=(i,v)=>i==="frequency"&&v>=30?{min:20-v,max:24e3-v}:{min:void 0,max:void 0},H4=(i,v,x)=>{const T=kt(),F=new Float32Array(256);for(let M=0;M<F.length;M++){const t=M/(F.length-1)*2-1;F[M]=Bi(t*x,v,x)}const D=new WaveShaperNode(T,{curve:F}),p=me(1/x);return i.connect(p).connect(D),{modulator:i,toCleanup:[D,p]}},wh=(i,v,x)=>{const T=U4(i,x);if(!T)return Wn(new Error(`Could not find control data for target '${i}'. It may not be modulatable.`),"superdough"),{targetParams:[],paramName:i};const F=T.param,D=v[T.node]?T.node:i,p=v[D];if(!p){const t=Object.keys(v);return Wn(new Error(`Could not connect to target '${D}'  it does not exist. Available targets: ${t.join(", ")}`),"superdough"),{targetParams:[],paramName:F}}const M=[];return p.forEach(t=>{const h=Z4(t,F);M.push(h)}),{targetParams:M,paramName:F}},A2=(i,v,x)=>{const{rate:T=1,sync:F,cps:D,cycle:p,control:M="lfo",subControl:t,fxi:h="main",depth:g=1,depthabs:o,...a}=v,{targetParams:r,paramName:e}=wh(M,x[h],t);if(!r.length)return;let n=r[0].value;n=n===0?1:n;const{min:u,max:s}=Gh(e,n),l=o??g*n,c={...a,frequency:F!==void 0?F*D:T,time:p/D,depth:l,min:u,max:s},d=rn(kt(),c);return x.main[`lfo_${i}`]=[d],r.forEach(f=>d.connect(f)),d},F2=(i,v,x)=>{const{control:T,subControl:F,acurve:D,dcurve:p,rcurve:M,depth:t=1,depthabs:h,fxi:g="main",...o}=v,{targetParams:a,paramName:r}=wh(T,x[g],F);if(!a.length)return;let e=a[0].value;e=e===0?1:e;const{min:n,max:u}=Gh(r,e),s=h??t*e,l=g2(kt(),{...o,depth:s,min:n,max:u,attackCurve:D,decayCurve:p,releaseCurve:M});return x.main[`env_${i}`]=[l],a.forEach(c=>l.connect(c)),l},R2=(i,v,x)=>{const T=kt(),{control:F,subControl:D,depth:p=1,depthabs:M,fxi:t="main"}=i,{targetParams:h,paramName:g}=wh(F,v[t],D);if(!h.length)return{toCleanup:[]};const o=x.getBus(i.bus),a=new ConstantSourceNode(T,{offset:i.dc??0});a.start(i.begin);const r=a.connect(me(1));o.connect(r);let e=h[0].value;e=e===0?1:e;const{min:n,max:u}=Gh(g,e),s=M??p*e,l=me(Math.sign(s)*Math.abs(s)/.3),c=r.connect(l),d=[];let f=c;if(n!==void 0&&u!==void 0){const m=H4(c,n,u);f=m.modulator,d.push(...m.toCleanup)}return Di(T,()=>{h.forEach(m=>f.connect(m))},0,i.begin),d.push(a,r,l),{modulator:f,toCleanup:d}},Bh={},za={},K4=i=>Bh[i];function J4(i,v){var x=1024;if(i<x)return i+" B";var T=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],F=-1;do i/=x,++F;while(i>=x);return i.toFixed(1)+" "+T[F]}function L2(i,v){const{speed:x=1}=i,{transpose:T,url:F,index:D,midi:p,label:M}=v2(i,v);let t=Math.abs(x)*Math.pow(2,T/12);return{transpose:T,url:F,index:D,midi:p,label:M,playbackRate:t}}const b2=async(i,v,x)=>{let{url:T,label:F,playbackRate:D}=L2(i,v);x&&(T=await x(T));const p=kt(),M=await Br(T,p,F);return i.unit==="c"&&(D=D*M.duration),{buffer:M,playbackRate:D}},D2=async(i,v,x)=>{let{buffer:T,playbackRate:F}=await b2(i,v,x);i.speed<0&&(T=G2(T));const D=kt().createBufferSource();D.buffer=T,D.playbackRate.value=F;const{loopBegin:p=0,loopEnd:M=1,begin:t=0,end:h=1}=i,g=D.buffer.duration,o=t*g;i.loop&&(D.loop=!0,D.loopStart=p*g,D.loopEnd=M*g);const a=g/D.playbackRate.value,r=(h-t)*a;return{bufferSource:D,offset:o,bufferDuration:g,playbackDuration:a,sliceDuration:r}},Br=(i,v,x,T=0)=>{const F=x?`sound "${x}:${T}"`:"sample";if(i=i.replace("#","%23"),!za[i]){be(`[sampler] load ${F}..`,"load-sample",{url:i});const D=Date.now();za[i]=fetch(i).then(p=>p.arrayBuffer()).then(async p=>{const M=Date.now()-D,t=J4(p.byteLength);be(`[sampler] load ${F}... done! loaded ${t} in ${M}ms`,"loaded-sample",{url:i});const h=await v.decodeAudioData(p);return Bh[i]=h,h})}return za[i]};function G2(i){const v=kt(),x=v.createBuffer(i.numberOfChannels,i.length,v.sampleRate);for(let T=0;T<i.numberOfChannels;T++)x.copyToChannel(i.getChannelData(T).slice().reverse(),T,T);return x}const k4=i=>Bh[i];function w2(i){if(i.startsWith("bubo:")){const[v,x]=i.split(":");i=`github:Bubobubobubobubo/dough-${x}`}return i}function B2(i,v=""){if(!i.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let x=i.slice(7);x=x.endsWith("/")?x.slice(0,-1):x;let T=x.split("/"),F=T[0],D=T.length>=2?T[1]:"samples",p=T.length>=3?T[2]:"main",M=T.slice(3);return M.push(v||""),M=M.join("/"),`https://raw.githubusercontent.com/${F}/${D}/${p}/${M}`}const X2=(i,v,x=i._base||"")=>Object.entries(i).forEach(([T,F])=>{if(typeof F=="string"&&(F=[F]),typeof F!="object")throw new Error("wrong sample map format for "+T);x=F._base||x,x=w2(x),x.startsWith("github:")&&(x=B2(x,""));const D=p=>x+p;Array.isArray(F)?F=F.map(D):F=Object.fromEntries(Object.entries(F).map(([p,M])=>[p,(typeof M=="string"?[M]:M).map(D)])),v(T,F)});let I2={};function j4(i,v){I2[i]=v}function Q4(i){const v=Object.entries(I2).find(([x])=>i.startsWith(x));if(v)return v[1]}async function $4(i){const v=Q4(i);if(v)return v(i);if(i=w2(i),i.startsWith("github:")&&(i=B2(i,"strudel.json")),i.startsWith("local:")&&(i="http://localhost:5432"),i.startsWith("shabda:")){let[F,D]=i.split("shabda:");i=`https://shabda.ndre.gr/${D}.json?strudel=1`}if(i.startsWith("shabda/speech")){let[F,D]=i.split("shabda/speech");D=D.startsWith("/")?D.substring(1):D;let[p,M]=D.split(":"),t="f",h="en-GB";p&&([h,t]=p.split("/")),i=`https://shabda.ndre.gr/speech/${M}.json?gender=${t}&language=${h}&strudel=1'`}if(typeof fetch!="function")return;const x=m2(i);if(typeof fetch>"u")return;const T=await fetch(i).then(F=>F.json()).catch(F=>{throw console.error(F),new Error(`error loading "${i}"`)});return[T,T._base||x]}const O2=async(i,v=i._base||"",x={})=>{if(typeof i=="string"){const[D,p]=await $4(i);return O2(D,v||p,x)}const{prebake:T,tag:F}=x;X2(i,(D,p)=>{V2(D,p,{baseUrl:v,prebake:T,tag:F})},v)},sl=[];async function N2(i,v,x,T,F){let{s:D,nudge:p=0,cut:M,loop:t,clip:h=void 0,n:g=0,speed:o=1,duration:a}=v;if(o===0)return;const r=kt();let[e,n,u,s]=ni([v.attack,v.decay,v.sustain,v.release]);const{bufferSource:l,sliceDuration:c,offset:d}=await D2(v,T,F);if(!l){be(`[sampler] could not load "${D}:${g}"`,"error");return}if(r.currentTime>i){be(`[sampler] loading sound "${D}:${g}" took too long`,"highlight"),ne(l);return}const f=_s(l.detune,v,i),m=i+p;l.start(m,d);const y=r.createGain(),S=l.connect(y);h==null&&t==null&&v.release==null&&(a=c);let C=i+a;si(S.gain,e,n,u,s,0,1,i,C,"linear"),qs(l.detune,v,i,C);const E=r.createGain();S.connect(E),Xi(l,function(){ne(l),f?.stop(),ne(S),ne(E),x()});let P=C+s+.01;l.stop(P);const A=G=>{l.stop(G)},R={node:E,nodes:{source:[l],...f?.nodes},stop:A};if(M!==void 0){const G=sl[M];G&&(G.node.gain.setValueAtTime(1,m),G.node.gain.linearRampToValueAtTime(0,m+.01)),sl[M]=R}return R}function q4(i,v,x){Ci(i,(T,F,D)=>N2(T,F,D,v),{type:"sample",samples:v,...x})}function V2(i,v,x){i.startsWith("wt_")?Xh(i,v,x):q4(i,v,x)}const Us=(i,v)=>i!==void 0&&i!==v,Eo=i=>new GainNode(i,{gain:1,channelCount:2,channelCountMode:"explicit"});class _4{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(v){this.audioContext=v,this.output=Eo(v),this.summingNode=Eo(v),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(v,x=0){return this.djfNode==null&&(this.djfNode=Je(this.audioContext,"djf-processor",{value:v}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(v,x),this.djfNode}getDelay(v=0,x=.5,T){return x=Bi(x,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,v,x),this.delayNode.connect(this.summingNode),this.delayNode.start?.(T)),this.delayNode.delayTime.value!==v&&this.delayNode.delayTime.setValueAtTime(v,T),this.delayNode.feedback.value!==x&&this.delayNode.feedback.setValueAtTime(x,T),this.delayNode}getReverb(v,x,T,F,D,p,M){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(v,x,T,F,D,p,M),this.reverbNode.connect(this.summingNode)),(Us(v,this.reverbNode.duration)||Us(x,this.reverbNode.fade)||Us(T,this.reverbNode.lp)||Us(F,this.reverbNode.dim)||Us(p,this.reverbNode.irspeed)||Us(M,this.reverbNode.irbegin)||this.reverbNode.ir!==D)&&this.reverbNode.generate(v,x,T,F,D,p,M),this.reverbNode}sendReverb(v,x){return Yn(v,this.reverbNode,x)}sendDelay(v,x){return Yn(v,this.delayNode,x)}duck(v,x=0,T=.1,F=1){const D=x,p=Math.max(T,.002),M=this.output.gain;Di(this.audioContext,()=>{const t=this.audioContext.currentTime,h=M.value;M.cancelScheduledValues(t),M.setValueAtTime(h,t);const g=Math.max(v,t),o=Bi(1-Math.sqrt(F),.01,h);M.exponentialRampToValueAtTime(o,g+D),M.exponentialRampToValueAtTime(1,g+D+p)},0,v-.01)}connectToOutput(v){v.connect(this.summingNode)}}class tb{channelMerger;destinationGain;constructor(v){this.audioContext=v,this.initializeAudio()}initializeAudio(){const v=this.audioContext,x=v.destination.maxChannelCount;this.audioContext.destination.channelCount=x,this.channelMerger=new ChannelMergerNode(v,{numberOfInputs:v.destination.channelCount}),this.destinationGain=new GainNode(v),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(v.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(v,x=[0,1])=>{const T=new StereoPannerNode(this.audioContext);v.connect(T);const F=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:T.channelCount});T.connect(F),x.forEach((D,p)=>{F.connect(this.channelMerger,p%T.channelCount,D%this.audioContext.destination.channelCount)})}}class z2{audioContext;output;nodes={};buses={};constructor(v){this.audioContext=v,this.output=new tb(v)}reset(){Object.values(this.nodes).forEach(v=>{v.disconnect()}),Object.values(this.buses).forEach(v=>{v.disconnect()}),this.nodes={},this.buses={},this.output.reset()}duck(v,x,T=0,F=.1,D=1){const p=[v].flat(),M=[T].flat(),t=[F].flat(),h=[D].flat();p.forEach((g,o)=>{const a=this.nodes[g];if(a==null){Wn(new Error(`duck target orbit ${g} does not exist`),"superdough");return}const r=M[o]??M[0],e=Math.max(t[o]??t[0],.002),n=h[o]??h[0];a.duck(x,r,e,n)})}getOrbit(v,x){return this.nodes[v]==null&&(this.nodes[v]=new _4(this.audioContext),this.output.connectToDestination(this.nodes[v].output,x)),this.nodes[v]}getBus(v){return this.buses[v]==null&&(this.buses[v]=Eo(this.audioContext)),this.buses[v]}}const Po=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),Ao=new Set;function W2(){Ao.clear()}async function eb(i,v,x=2048){const T=`${i},${x}`;if(!Ao.has(T)){const F=(await rb(i,v)).getChannelData(0),D=F.length,p=Math.max(1,Math.floor(D/x)),M=new Array(p);for(let t=0;t<p;t++){const h=t*x;M[t]=F.subarray(h,h+x)}return Ao.add(T),{frames:M,frameLen:x,numFrames:p,key:T}}return{frameLen:x,key:T}}function ib(i,v){var x=1024;if(i<x)return i+" B";var T=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],F=-1;do i/=x,++F;while(i>=x);return i.toFixed(1)+" "+T[F]}function sb(i){const v=new DataView(i);let x=12;for(;x+8<=v.byteLength;){const T=String.fromCharCode(v.getUint8(x),v.getUint8(x+1),v.getUint8(x+2),v.getUint8(x+3)),F=v.getUint32(x+4,!0);if(T==="fmt ")return v.getUint32(x+12,!0);x+=8+F+(F&1)}return null}async function nb(i){const v=sb(i)||44100;return await new OfflineAudioContext(1,1,v).decodeAudioData(i)}const Wa={},rb=(i,v)=>{if(i=i.replace("#","%23"),!Wa[i]){be(`[wavetable] load table ${v}..`,"load-table",{url:i});const x=Date.now();Wa[i]=fetch(i).then(T=>T.arrayBuffer()).then(async T=>{const F=Date.now()-x,D=ib(T.byteLength);return be(`[wavetable] load table ${v}... done! loaded ${D} in ${F}ms`,"loaded-table",{url:i}),await nb(T)})}return Wa[i]};function Y2(i,v=""){if(!i.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[x,T]=i.split("github:");return T=T.endsWith("/")?T.slice(0,-1):T,T.split("/").length===2&&(T+="/main"),`https://raw.githubusercontent.com/${T}/${v}`}const nl=(i,v,x,T={})=>(v=i._base||v,Object.entries(i).forEach(([F,D])=>{if(F==="_base")return!1;if(typeof D=="string"&&(D=[D]),typeof D!="object")throw new Error("wrong json format for "+F);let p=v;p.startsWith("github:")&&(p=Y2(p,"")),D=D.map(M=>p+M).filter(M=>M.toLowerCase().endsWith(".wav")?!0:(be(`[wavetable] skipping ${M} -- wavetables must be ".wav" format`),!1)),D.length&&Xh(F,D,{baseUrl:v,frameLen:x})}));function Xh(i,v,x){Ci(i,(T,F,D,p)=>Z2(T,F,D,v,p,x?.frameLen??2048),{type:"wavetable",tables:v,...x})}const ab=async(i,v,x,T={})=>{if(x!==void 0)return nl(x,i,v);i.startsWith("github:")&&(i=Y2(i,"strudel.json")),i.startsWith("local:")&&(i="http://localhost:5432");const F=m2(i);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(i).then(D=>D.json()).then(D=>nl(D,F,v,T)).catch(D=>{throw console.error(D),new Error(`error loading "${i}"`)})};async function Z2(i,v,x,T,F,D){const{s:p,n:M=0,duration:t,clip:h}=v,g=kt(),[o,a,r,e]=ni([v.attack,v.decay,v.sustain,v.release]);let{warpmode:n}=v;typeof n=="string"&&(n=Po[n.toUpperCase()]??Po.NONE);const u=us(v),{url:s,label:l}=v2(v,T),c=await eb(s,l,D);let d=i+t;h!==void 0&&(d=Math.min(i+h*t,d));const f=d+e,m=f+.01,y={begin:i,end:m,frequency:u,freqspread:v.detune,position:v.wt,warp:v.warp,warpMode:n,voices:Math.max(v.unison??1,1),panspread:v.spread,phaserand:v.wtphaserand??v.unison>1?1:0},S=Qn("wavetable",()=>new AudioWorkletNode(g,"wavetable-oscillator-processor",{outputChannelCount:[2]}));if(Object.entries(y).forEach(([V,X])=>{const z=S.parameters.get(V),I=X!==void 0?X:z.defaultValue;z.value=I}),S.port.postMessage({type:"initialize",payload:c}),g.currentTime>i){be(`[wavetable] still loading sound "${p}:${M}"`,"highlight");return}const C=[v.wtattack,v.wtdecay,v.wtsustain,v.wtrelease],E=[v.warpattack,v.warpdecay,v.warpsustain,v.warprelease],P=S.parameters,A=P.get("position"),R=P.get("warp");let G=v.wtrate;v.wtsync!=null&&(G=F*v.wtsync);const b=To(g,A,i,f,{offset:v.wt,amount:v.wtenv,defaultAmount:.5,values:C,holdEnd:d,defaultValues:[0,.5,0,.1]},{frequency:G,depth:v.wtdepth,defaultDepth:.5,shape:v.wtshape,skew:v.wtskew,dcoffset:v.wtdc??0});let L=v.warprate;v.warpsync!=null&&(L=L=F*v.warpsync);const w=To(g,R,i,f,{offset:v.warp,amount:v.warpenv,defaultAmount:.5,values:E,holdEnd:d,defaultValues:[0,.5,0,.1]},{frequency:L,depth:v.warpdepth,defaultDepth:.5,shape:v.warpshape,skew:v.warpskew,dcoffset:v.warpdc??0}),B=_s(S.parameters.get("detune"),v,i),N=Zn(S.parameters.get("frequency"),v,i),Y=g.createGain(),U=S.connect(Y);si(U.gain,o,a,r,e,0,.3,i,d,"linear"),qs(S.parameters.get("detune"),v,i,d);const W={node:U,nodes:{source:[S],wt_lfo:[b],warp_lfo:[w],...N?.nodes,...B?.nodes}},O=Di(g,()=>{Fh(S),B?.stop(),N?.stop(),ne(b),ne(w),x()},i,m);return W.stop=V=>{O.stop(V)},W}const Ih=128,Fo="System Standard";let Oh=Ih;function U2(i){Oh=parseInt(i)??Ih}let Nh=!1;function H2(i){Nh=i==!0}const Ei=z4();function Ci(i,v,x={}){i=i.toLowerCase().replace(/\s+/g,"_"),Ei.setKey(i,{onTrigger:v,data:x})}let K2=i=>i;function bi(i){return K2(i)}function ob(i){K2=i}function Ro(i){for(const x in i)i[x.toLowerCase()]=i[x];const v=Ei.get();for(const x in v){const[T,F]=x.split("_");if(!F)continue;const D=i[T];if(D){if(typeof D=="string")v[`${D}_${F}`.toLowerCase()]=v[x];else if(Array.isArray(D))for(const p of D)v[`${p}_${F}`.toLowerCase()]=v[x]}}Ei.set({...v})}async function hb(i){const v=await(await fetch(i)).json();Ro(v)}async function ub(...i){switch(i.length){case 1:return typeof i[0]=="string"?hb(i[0]):Ro(i[0]);case 2:return Ro({[i[0]]:i[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+i.length)}}function lb(i,v){if(Cs(i)==null){be("soundAlias: original sound not found");return}Ei.setKey(v,Cs(i))}function Cs(i){return typeof i!="string"?(console.warn(`getSound: expected string got "${i}". fall back to triangle`),Ei.get().triangle):Ei.get()[i.toLowerCase()]}const J2=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let i=await navigator.mediaDevices.enumerateDevices();i=i.filter(x=>x.kind==="audiooutput"&&x.deviceId!=="default");const v=new Map;return v.set(Fo,""),i.forEach(x=>{v.set(x.label,x.deviceId)}),v};let $n={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,busgain:1,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8,tremolodepth:1,tremolophase:0,release:.01};const fb=Object.freeze({...$n});function db(i,v){$n[i]=v}function cb(){$n={...fb}}let Vh=new Map(Object.entries($n));function zh(i,v){Vh.set(i,v)}function Pe(i){return Vh.get(i)}function pb(i){Object.keys(i).forEach(v=>{zh(v,i[v])})}function k2(){Vh=new Map(Object.entries($n))}function vb(i){k2(),i==="1.0"&&zh("fanchor",.5)}const mb=()=>Ei.set({});let j2=[];function Q2(i){j2.push(i)}let vr;function $2(){if(!vr){const i=kt(),v=j2.concat([N4]);vr=Promise.all(v.map(x=>i.audioWorklet.addModule(x))).then(()=>vr=void 0)}return vr}async function Wh(i={}){const{disableWorklets:v=!1,maxPolyphony:x,audioDeviceName:T=Fo,multiChannelOrbits:F=!1}=i;if(U2(x),H2(F),W2(),typeof window>"u")return;const D=kt();if(T!=null&&T!=Fo)try{const p=(await J2()).get(T),M=(p??"").length>0;D.sinkId!==p&&M&&await D.setSinkId(p),be(`[superdough] Audio Device set to ${T}, it might take a few seconds before audio plays on all output channels`)}catch{be("[superdough] failed to set audio interface","warning")}if(!D instanceof OfflineAudioContext&&await D.resume(),v){be("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await $2(),be("[superdough] AudioWorklets loaded")}catch(p){console.warn("could not load AudioWorklet effects",p)}be("[superdough] ready")}let Ya;async function q2(i){return Ya||(Ya=new Promise(v=>{document.addEventListener("mousedown",async function x(){document.removeEventListener("mousedown",x),await Wh(i),v()})})),Ya}let Ts;function ta(){return Ts==null&&(Ts=new z2(kt())),Ts}function Lo(i){return Ts=i,Ts}function _2(i,v){ta().output.connectToDestination(i,v)}function gb(i,v,x=1,T=.5,F=1e3,D=2e3){const p=kt(),M=rn(p,{frequency:x,depth:D*2,begin:i,end:v}),t=1;let h=282;const g=[];for(let o=0;o<t;o++){const a=Qn("filter",()=>p.createBiquadFilter());a.type="notch",a.gain.value=1,a.frequency.value=F+h,a.Q.value=2-Math.min(Math.max(T*2,0),1.9),M.connect(a.detune),h+=282,g.push(a)}return{filterChain:g,lfo:M}}function xb(i){i=i??0;const v=["12db","ladder","24db"];return typeof i=="number"?v[Math.floor(p2(i,v.length))]:i}let Ye={},Es={};function tM(i,v=1024,x=.5){if(!Ye[i]||Ye[i].context!=kt()){const T=kt().createAnalyser();T.fftSize=v,T.smoothingTimeConstant=x,Ye[i]=T,Es[i]=new Float32Array(Ye[i].frequencyBinCount)}return Ye[i].fftSize!==v&&(Ye[i].fftSize=v,Es[i]=new Float32Array(Ye[i].frequencyBinCount)),Ye[i]}function ea(i="time",v=1){const x={time:()=>Ye[v]?.getFloatTimeDomainData(Es[v]),frequency:()=>Ye[v]?.getFloatFrequencyData(Es[v])}[i];if(!x)throw new Error(`getAnalyzerData: ${i} not supported. use one of ${Object.keys(x).join(", ")}`);return x(),Es[v]}function eM(){Ts?.reset(),Ye={},Es={}}let Mn=new Map;function rl(i){return(Array.isArray(i)?i:[i]).map(v=>v-1)}class yb{constructor(){this.audioNodes=[],this.tails=[]}connect(...v){return v.forEach(x=>{this.tails.forEach(T=>{T.connect(x)})}),this.tails=v,this.audioNodes.push(...v),this}connectOne(v,x){return this.tails[v].connect(x),this.tails[v]=x,this.audioNodes.push(x),this}releaseNodes(){this.audioNodes.forEach(v=>c4(v)?Fh(v):ne(v)),this.audioNodes=[],this.tails=[]}}const ia=async(i,v,x,T=.5,F=.5)=>{const D={main:{}},p=kt(),M=ta();let{stretch:t}=i;if(t!=null&&(v=v-.04),typeof i!="object")throw new Error(`expected hap.value to be an object, but got "${i}". Hint: append .note() or .s() to the end`,"error");if(i.duration=x,v<p.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${v.toFixed(2)}, now: ${p.currentTime.toFixed(2)})`);return}let{s:h=Pe("s"),bank:g,source:o,postgain:a=Pe("postgain"),duckorbit:r,duckonset:e,duckattack:n,duckdepth:u,djf:s,release:l=Pe("release"),dry:c,delay:d=Pe("delay"),delayfeedback:f=Pe("delayfeedback"),delaysync:m=Pe("delaysync"),delaytime:y,orbit:S=Pe("orbit"),bus:C,busgain:E=Pe("busgain"),room:P,roomfade:A,roomlp:R,roomdim:G,roomsize:b,ir:L,irspeed:w,irbegin:B,i:N=Pe("i"),analyze:Y,fft:U=Pe("fft"),FX:W=[],FXrelease:O}=i;y=y??qu(m,T);const V=rl(Nh&&S>0?[S*2-1,S*2]:Pe("channels")),X=i.channels!=null?rl(i.channels):V,z=M.getOrbit(S,X);r!=null&&M.duck(r,v,e,n,u),a=bi(a),d=bi(d),E=bi(E);const I=v+x,Z=Math.max(l,O??0),J=I+Z,k=Math.round(Math.random()*1e6);for(let ot=0;ot<=Mn.size-Oh;ot++){const st=Mn.entries().next(),ft=st.value[1].deref(),ut=st.value[0],lt=v+.25;ft?.node?.gain?.linearRampToValueAtTime(0,lt),ft?.stop?.(lt),Mn.delete(ut)}if(["-","~","_"].includes(h))return;g&&h&&(h=`${g}_${h}`,i.s=h);const j=new yb;let tt;if(o)tt=o(v,i,x,T),D.main.source=[tt];else if(Cs(h)){const{onTrigger:ot}=Cs(h),st=await ot(v,i,()=>Di(p,()=>{j.releaseNodes(),Mn.delete(k)},0,J),T);st&&(tt=st.node,Mn.set(k,new WeakRef(st)),D.main={...D.main,...st.nodes})}else throw new Error(`sound ${h} not found! Is it loaded?`);if(!tt)return;if(p.currentTime>v){be("[webaudio] skip hap: still loading",p.currentTime-v);return}j.connect(tt),W=[...W,i];for(let[ot,st]of Object.entries(W)){const ft=ot==W.length-1?"main":ot;D[ft]??={};const ut=D[ft];let{gain:lt=Pe("gain"),velocity:Tt=Pe("velocity"),shapevol:bt=Pe("shapevol"),distorttype:Dt=Pe("distorttype"),distortvol:ct=Pe("distortvol"),tremolodepth:yt=Pe("tremolodepth"),phaserdepth:Et=Pe("phaserdepth"),delay:At=Pe("delay"),delayfeedback:It=Pe("delayfeedback"),delaysync:Ft=Pe("delaysync"),delaytime:wt,i:Bt=Pe("i")}=st;if(lt=bi(ji(lt,1)),bt=bi(bt),ct=bi(ct),Tt=bi(Tt),yt=bi(yt),lt*=Tt,wt=wt??qu(Ft,T),st.workletSrc!==void 0){const Pt=Je(p,"generic-processor",{},{outputChannelCount:[2]});j.connect(Pt);const Ot=st.workletSrc.replace(/\bpat\[(\d+)\]/g,(ye,Le)=>st.workletInputs[Le]).replaceAll("sFreq",us(i)).replaceAll("sGate",`cc('strudel-gate-${k}')`),{src:se,ugens:fe,registers:Kt}=compileKabel(Ot);Pt.port.postMessage({src:se,schema:{ugens:fe,registers:Kt},start:v,gateEnd:I,end:J})}if(st.stretch!==void 0){const Pt=Je(p,"phase-vocoder-processor",{pitchFactor:st.stretch});j.connect(Pt),ut.stretch=[Pt]}if(st.transient!==void 0){const Pt=Je(p,"transient-processor",{},{processorOptions:{attack:st.transient,sustain:st.transsustain,begin:v,end:J}});j.connect(Pt),ut.transient=Pt}const le=me(lt);ut.gain=[le],j.connect(le);const pe=xb(i.ftype),Ut=Pt=>y2(p,v,I,Pt,T,F);if(st.cutoff!==void 0){const Pt=Va(st,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});Pt.type="lowpass";const{filter:Ot,lfo:se}=Ut(Pt);if(ut.lpf=[Ot],ut.lpf_lfo=[se],j.connect(Ot),se&&j.audioNodes.push(se),pe==="24db"){const{filter:fe,lfo:Kt}=Ut(Pt);ut.lpf.push(fe),ut.lpf_lfo.push(Kt),j.connect(fe),Kt&&j.audioNodes.push(Kt)}}if(st.hcutoff!==void 0){const Pt=Va(st,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});Pt.type="highpass";const{filter:Ot,lfo:se}=Ut(Pt);if(ut.hpf=[Ot],ut.hpf_lfo=[se],se&&j.audioNodes.push(se),j.connect(Ot),pe==="24db"){const{filter:fe,lfo:Kt}=Ut(Pt);ut.hpf.push(fe),ut.hpf_lfo.push(Kt),j.connect(fe),Kt&&j.audioNodes.push(Kt)}}if(st.bandf!==void 0){const Pt=Va(st,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});Pt.type="bandpass";const{filter:Ot,lfo:se}=Ut(Pt);if(ut.bpf=[Ot],ut.bpf_lfo=[se],j.connect(Ot),se&&j.audioNodes.push(se),pe==="24db"){const{filter:fe,lfo:Kt}=Ut(Pt);ut.bpf.push(fe),ut.bpf_lfo.push(Kt),j.connect(fe),Kt&&j.audioNodes.push(Kt)}}if(st.vowel!==void 0){const Pt=p.createVowelFilter(st.vowel);ut.vowel=Pt.filters,j.connect(Pt)}if(st.coarse!==void 0){const Pt=Je(p,"coarse-processor",{coarse:st.coarse});ut.coarse=[Pt],j.connect(Pt)}if(st.crush!==void 0){const Pt=Je(p,"crush-processor",{crush:st.crush});ut.crush=[Pt],j.connect(Pt)}if(st.shape!==void 0){const Pt=Je(p,"shape-processor",{shape:st.shape,postgain:bt});ut.shape=[Pt],j.connect(Pt)}if(st.distort!==void 0){const Pt=E2(st.distort,ct,Dt);ut.distort=[Pt],j.connect(Pt)}let he=st.tremolo;if(st.tremolosync!=null&&(he=T*st.tremolosync),he!==void 0){const Pt=Math.max(1-yt,0),Ot=new GainNode(p,{gain:Pt}),se=F/T,fe=rn(p,{skew:st.tremoloskew??(st.tremoloshape!=null?.5:1),frequency:he,depth:yt,time:se,dcoffset:0,shape:st.tremoloshape,phaseoffset:st.tremolophase,min:0,max:1,curve:1.5,begin:v,end:J});ut.tremolo=[fe],ut.tremolo_gain=[Ot],fe.connect(Ot.gain),j.audioNodes.push(fe),j.connect(Ot)}if(st.compressor!==void 0){const Pt=x2(p,st.compressor,st.compressorRatio,st.compressorKnee,st.compressorAttack,st.compressorRelease);ut.compressor=[Pt],j.connect(Pt)}if(st.pan!==void 0){const Pt=p.createStereoPanner();ut.pan=[Pt],Pt.pan.value=2*st.pan-1,j.connect(Pt)}if(st.phaserrate!==void 0&&Et>0){const{filterChain:Pt,lfo:Ot}=gb(v,J,st.phaserrate,Et,st.phasercenter,st.phasersweep);ut.phaser=[...Pt],ut.phaser_lfo=[Ot],Pt.forEach(se=>j.connect(se)),j.audioNodes.push(Ot)}if(ft!=="main"&&At>0&&wt>0&&It>0){const Pt=me(1);It=Bi(It,0,.98);const Ot=p.createFeedbackDelay(1,wt,It),se=me(At),fe=me(st.dry??1),Kt=new GainNode(p,{gain:1,channelCount:2,channelCountMode:"explicit"});j.connect(Pt).connect(fe,Ot).connectOne(1,se).connect(Kt),j.audioNodes.push(Ot.feedbackGain,Ot.delayGain),ut.delay=[Ot],ut.delay_mix=[se]}if(ft!=="main"&&st.room>0){let Pt;if(st.ir!==void 0){let Le,ei=Cs(st.ir);Array.isArray(ei)?Le=ei.data.samples[st.i%ei.data.samples.length]:typeof ei=="object"&&(Le=Object.values(ei.data.samples).flat()[Bt%Object.values(ei.data.samples).length]),Pt=await Br(Le,p,st.ir,0)}const Ot=me(1),se=p.createReverb(st.roomsize,st.roomfade,st.roomlp,st.roomdim,Pt,st.irspeed,st.irbegin),fe=me(st.room),Kt=me(st.dry??1),ye=new GainNode(p,{gain:1,channelCount:2,channelCountMode:"explicit"});j.connect(Ot).connect(Kt,se).connectOne(1,fe).connect(ye),ut.room=[se],ut.room_mix=[fe]}}if(O!==void 0&&O>l){const ot=me(1);ot.gain.setValueAtTime(1,I+l),ot.gain.linearRampToValueAtTime(0,J),j.connect(ot)}const ht=new GainNode(p,{gain:a});if(D.main.post=[ht],j.connect(ht),d>0&&y>0&&f>0){const ot=z.getDelay(y,f,v);D.main.delay=[ot];const st=z.sendDelay(ht,d);D.main.delay_mix=[st],j.audioNodes.push(st)}if(P>0){let ot;if(L!==void 0){let ut,lt=Cs(L);Array.isArray(lt)?ut=lt.data.samples[N%lt.data.samples.length]:typeof lt=="object"&&(ut=Object.values(lt.data.samples).flat()[N%Object.values(lt.data.samples).length]),ot=await Br(ut,p,L,0)}const st=z.getReverb(b,A,R,G,ot,w,B);D.main.room=[st];const ft=z.sendReverb(ht,P);D.main.room_mix=[ft],j.audioNodes.push(ft)}if(C!=null){const ot=M.getBus(C),st=Yn(ht,ot,E);j.audioNodes.push(st)}if(s!=null){const ot=z.getDjf(s,v);D.main.djf=[ot]}if(Y&&!(p instanceof OfflineAudioContext)){const ot=tM(Y,2**(U+5)),st=Yn(ht,ot,1);j.audioNodes.push(st)}if(c!=null){c=bi(c);const ot=new GainNode(p,{gain:c});j.connect(ot),z.connectToOutput(ot)}else z.connectToOutput(ht);W.forEach((ot,st)=>{const ft=st===W.length-1?"main":st;if(ot.lfo)for(const ut of ot.lfo.__ids){const lt=ot.lfo[ut];lt.fxi??=ft;const Tt=A2(ut,{...lt,cps:T,cycle:F,begin:v,end:J},D);Tt&&j.audioNodes.push(Tt)}if(ot.env)for(const ut of ot.env.__ids){const lt=ot.env[ut];lt.fxi??=ft;const Tt=F2(ut,{...lt,begin:v,end:J},D);Tt&&j.audioNodes.push(Tt)}if(ot.bmod)for(const ut of ot.bmod.__ids){const lt=ot.bmod[ut];lt.fxi??=ft;const{toCleanup:Tt}=R2({...lt,begin:v},D,Ts);j.audioNodes.push(...Tt)}})},Mb=(i,v,x,T)=>{ia(v,i-x,v.duration/T,T)},Cb=["triangle","square","sawtooth","sine","user","one"],Sb=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function Tb(i,v){const x=i,T=new Float32Array(v);for(let F=0;F<v;F++){const D=F*2/v-1;T[F]=Math.tanh(D*x)}return T}function iM(){[...Cb].forEach(i=>{Ci(i,(v,x,T)=>{const[F,D,p,M]=ni([x.attack,x.decay,x.sustain,x.release],"linear",[.001,.05,.6,.01]),t=me(.3),h=nM(i,v,x,()=>{ne(t),T()}),{node:g,nodes:o,stop:a,triggerRelease:r}=h,{duration:e}=x,n=me(1),u=g.connect(t).connect(n),s=v+e;si(u.gain,F,D,p,M,0,1,v,s,"linear");const l=s+M+.01;return r?.(l),a(l),{node:u,nodes:o,stop:c=>{a(c)}}},{type:"synth",prebake:!0})}),Ci("sbd",(i,v,x)=>{const{duration:T,decay:F=.5,pdecay:D=.5,penv:p=36,clip:M}=v,t=kt(),h=.02,g=1.2,o=.025,a=1,r=t.createOscillator();r.type="triangle",r.frequency.value=us(v,29),r.detune.setValueAtTime(p*100,0),r.detune.setValueAtTime(p*100,i),r.detune.exponentialRampToValueAtTime(.001,i+D);const e=me(1);e.gain.setValueAtTime(1,i+h),e.gain.exponentialRampToValueAtTime(.001,i+h+F),r.start(i);const n=Co("brown",i,2),u=me(1);u.gain.setValueAtTime(g,i),u.gain.exponentialRampToValueAtTime(.001,i+o);const s=new WaveShaperNode(t);s.curve=Tb(2,t.sampleRate);const l=me(a);Xi(r,()=>{ne(r),ne(e),ne(s),ne(n.node),ne(u),ne(l),x()});const c=r.connect(s).connect(e).connect(l);n.node.connect(u).connect(l);let d=i+F+.01;return M!=null&&(d=Math.min(i+M*T,d)),l.gain.setValueAtTime(a,d-.01),l.gain.linearRampToValueAtTime(0,d),r.stop(d),n.stop(d),{node:c,nodes:{source:[r]},stop:f=>{r.stop(f)}}},{type:"synth",prebake:!0}),Ci("supersaw",(i,v,x)=>{const T=kt();let{duration:F,n:D,unison:p=5,spread:M=.6,detune:t}=v;t=t??D??.18;const h=us(v),[g,o,a,r]=ni([v.attack,v.decay,v.sustain,v.release],"linear",[.001,.05,.6,.01]),e=i+F,n=e+r+.01,u=Bi(p,1,100);let s=u>1?Bi(M,0,1):0;const l={frequency:h,begin:i,end:n,freqspread:t,voices:u,panspread:s},c=Qn("supersaw",()=>new AudioWorkletNode(T,"supersaw-oscillator",{outputChannelCount:[2]}));Object.entries(l).forEach(([C,E])=>{const P=c.parameters.get(C),A=E!==void 0?E:P.defaultValue;P.value=A}),c.port.postMessage({type:"initialize"});const d=1/Math.sqrt(u);qs(c.parameters.get("detune"),v,i,e);const f=_s(c.parameters.get("detune"),v,i),m=Zn(c.parameters.get("frequency"),v,i);let y=me(1);y=c.connect(y),si(y.gain,g,o,a,r,0,.3*d,i,e,"linear");let S=Di(T,()=>{Fh(c),x(),m?.stop(),f?.stop()},i,n);return{node:y,nodes:{source:[c],...m?.nodes,...f?.nodes},stop:C=>{S.stop(C)}}},{prebake:!0,type:"synth"}),Ci("bytebeat",(i,v,x)=>{const T=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:F=0}=v,D=us(v),{byteBeatExpression:p=T[F%T.length],byteBeatStartTime:M}=v,t=kt();let{duration:h}=v;const[g,o,a,r]=ni([v.attack,v.decay,v.sustain,v.release],"linear",[.001,.05,.6,.01]),e=i+h,n=e+r+.01;let u=Je(t,"byte-beat-processor",{frequency:D,begin:i,end:n},{outputChannelCount:[2]});u.port.postMessage({codeText:p,byteBeatStartTime:M,frequency:D});let s=me(1);s=u.connect(s),si(s.gain,g,o,a,r,0,1,i,e,"linear");let l=Di(t,()=>{ne(u),x()},i,n);return{node:s,source:u,stop:c=>{l.stop(c)}}},{prebake:!0,type:"synth"}),Ci("pulse",(i,v,x)=>{const T=kt();let{pwrate:F,pwsweep:D}=v;D==null&&(F!=null?D=.3:D=0),F==null&&D!=null&&(F=1);let{duration:p,pw:M=.5}=v;const t=us(v),[h,g,o,a]=ni([v.attack,v.decay,v.sustain,v.release],"linear",[.001,.05,.6,.01]),r=i+p,e=r+a+.01;let n=Je(T,"pulse-oscillator",{frequency:t,begin:i,end:e,pulsewidth:M},{outputChannelCount:[2]});qs(n.parameters.get("detune"),v,i,r);const u=_s(n.parameters.get("detune"),v,i),s=Zn(n.parameters.get("frequency"),v,i);let l=me(1);l=n.connect(l),si(l.gain,h,g,o,a,0,1,i,r,"linear");let c;D!=0&&(c=rn(T,{frequency:F,depth:D,begin:i,end:e}),c.connect(n.parameters.get("pulsewidth")));let d=Di(T,()=>{ne(n),ne(c),x(),s?.stop(),u?.stop()},i,e);return{node:l,nodes:{source:[n],pw_lfo:[c],...s?.nodes,...u?.nodes},stop:f=>{d.stop(f)}}},{prebake:!0,type:"synth"}),Ci("bus",(i,v,x)=>{const T=kt(),[F,D,p,M]=ni([v.attack,v.decay,v.sustain,v.release],"linear",[.001,.05,1,.01]),t=i+v.duration,h=t+M+.01,g=ta().getBus(v.n??0),o=g.connect(me(0));si(o.gain,F,D,p,M,0,1,i,t,"linear");const a=Di(T,()=>{g.disconnect(o),x()},i,h);return{node:o,nodes:{source:[g]},stop:r=>{a.stop(r)}}},{prebake:!0,type:"input"}),[...Rh].forEach(i=>{Ci(i,(v,x,T)=>{const[F,D,p,M]=ni([x.attack,x.decay,x.sustain,x.release],"linear",[.001,.05,.6,.01]);let t,{density:h}=x;t=Co(i,v,h);let{node:g,stop:o,triggerRelease:a}=t;const r=me(.3),{duration:e}=x;Xi(g,()=>{ne(g),ne(r),T()});const n=me(1);let u=g.connect(r).connect(n);const s=v+e;si(u.gain,F,D,p,M,0,1,v,s,"linear");const l=s+M+.01;return a?.(l),o(l),{node:u,nodes:{source:[g]},stop:c=>{o(c)}}},{type:"synth",prebake:!0})}),Sb.forEach(([i,v])=>Ei.set({...Ei.get(),[i]:Ei.get()[v]}))}const al=2*Math.PI;function sM(i,v,x){i=typeof i=="object"?i:new Float32Array(i).fill(1);const T=i.length,F=new Float32Array(T+1),D=new Float32Array(T+1),p=kt(),M=p.createOscillator(),t={sawtooth:g=>[0,-1/g],square:g=>[0,g%2===0?0:1/g],triangle:g=>[g%2===0?0:1/(g*g),0],user:g=>[0,1]};if(!t[x])throw new Error(`unknown wave type ${x}`);for(let g=0;g<T;g++){const o=i[g],[a,r]=t[x](g+1),e=v?.[g]??0;let n=a*o,u=r*o;if(e!==0){const s=Math.cos(al*e),l=Math.sin(al*e);n=s*n-l*u,u=l*n+s*u}F[g+1]=n,D[g+1]=u}const h=p.createPeriodicWave(F,D);return M.setPeriodicWave(h),M}function nM(i,v,x,T){const{duration:F,noise:D=0}=x,p=x.partials??x.n;let M;if(i==="user"&&!p&&(be("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),i="triangle"),i=i==="user"&&!p?"triangle":i,i==="one")return M=new ConstantSourceNode(kt(),{offset:1}),M.start(v),{node:M,nodes:{source:M},stop:o=>M?.stop(o)};!p||p?.length===0||i==="sine"?(M=kt().createOscillator(),M.type=i||"triangle"):M=sM(p,x.phases,i),M.frequency.value=us(x);const t=_s(M.detune,x,v);qs(M.detune,x,v,v+F);const h=Zn(M.frequency,x,v);let g;return D&&(g=d4(M,D,v)),Xi(M,()=>{g?.teardown(),ne(M),ne(g?.node),T()}),M.start(v),{node:g?.node||M,nodes:{source:[M],...t?.nodes,...h?.nodes},stop:o=>{h.stop(o),t?.stop(o),g?.stop(o),M.stop(o)},triggerRelease:o=>{}}}function Eb(i=1,v=.05,x=220,T=0,F=0,D=.1,p=0,M=1,t=0,h=0,g=0,o=0,a=0,r=0,e=0,n=0,u=0,s=1,l=0,c=0){let d=Math.PI*2,f=kt().sampleRate,m=N=>N>0?1:-1,y=t*=500*d/f/f,S=x*=(1+v*2*Math.random()-v)*d/f,C=[],E=0,P=0,A=0,R=1,G=0,b=0,L=0,w,B;for(T=T*f+9,l*=f,F*=f,D*=f,u*=f,h*=500*d/f**3,e*=d/f,g*=d/f,o*=f,a=a*f|0,B=T+l+F+D+u|0;A<B;C[A++]=L)++b%(n*100|0)||(L=p?p>1?p>2?p>3?Math.sin((E%d)**3):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/d%2+2)%2:1-4*Math.abs(Math.round(E/d)-E/d):Math.sin(E),L=(a?1-c+c*Math.sin(d*A/a):1)*m(L)*Math.abs(L)**M*i*1*(A<T?A/T:A<T+l?1-(A-T)/l*(1-s):A<T+l+F?s:A<B-u?(B-A-u)/D*s:0),L=u?L/2+(u>A?0:(A<B-u?1:(B-A)/u)*C[A-u|0]/2):L),w=(x+=t+=h)*Math.cos(e*P++),E+=w-w*r*(1-(Math.sin(A)+1)*1e9%2),R&&++R>o&&(x+=g,S+=g,R=0),a&&!(++G%a)&&(x=S,t=y,R||=1);return C}const rM=(i,v)=>{let{s:x,note:T=36,freq:F,zrand:D=0,attack:p=0,decay:M=0,sustain:t=.8,release:h=.1,curve:g=1,slide:o=0,deltaSlide:a=0,pitchJump:r=0,pitchJumpTime:e=0,lfo:n=0,znoise:u=0,zmod:s=0,zcrush:l=0,zdelay:c=0,tremolo:d=0,duration:f=.2,zzfx:m}=i;const y=Math.max(f-p-M,0);typeof T=="string"&&(T=_r(T)),!F&&typeof T=="number"&&(F=c2(T)),x=x.replace("z_","");const S=["sine","triangle","sawtooth","tan","noise"].indexOf(x)||0;g=x==="square"?0:g;const C=Eb(...m||[.25,D,F,p,y,h,S,g,o,a,r,e,n,u,s,l,c,t,M,d]),E=kt(),P=E.createBuffer(1,C.length,E.sampleRate);P.getChannelData(0).set(C);const A=kt().createBufferSource();return A.buffer=P,A.start(v),{node:A}};function Pb(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(i=>{Ci(i,(v,x,T)=>{const{node:F}=rM({s:i,...x},v);return Xi(F,()=>{ne(F),T()}),{node:F,nodes:{source:[F]},stop:()=>{}}},{type:"synth",prebake:!0})})}let Js;async function aM(i,v){const x=`dsp-worklet-${Date.now()}`,T=`${v}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${x}', MyProcessor);
`,F=`data:text/javascript;base64,${btoa(T)}`;await i.audioWorklet.addModule(F);const D=new AudioWorkletNode(i,x);return{node:D,stop:()=>D.port.postMessage("stop")}}const oM=()=>{Js&&(Js?.stop(),Js?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",i=>{i.data==="strudel-stop"?oM():i.data?.dough&&Js?.node.port.postMessage(i.data)});const Ab=async i=>{const v=kt();oM(),Js=await aM(v,i),Js.node.connect(v.destination)};function hM(i,v,x,T){window.postMessage({time:T,dough:i.value,currentTime:v,duration:i.duration,cps:x})}let Ln;function Fb(){const i=kt();Ln=Je(i,"dough-processor",{},{outputChannelCount:[2]}),_2(Ln)}const Tr=new Map,ol=new Map;xt.prototype.supradough=function(){return this.onTrigger((i,v,x,T)=>{i.value._begin=T,i.value._duration=i.duration/x,!Ln&&Fb();const F=(i.value.bank?i.value.bank+"_":"")+i.value.s,D=i.value.n??0,p=`${F}:${D}`;if(Tr.has(F)&&(i.value.s=p),Tr.has(F)&&!ol.has(p)){const M=Tr.get(F),t=M[D%M.length];console.log(`load ${p} from ${t}`);const h=bb(t);ol.set(p,h),h.then(({channels:g,sampleRate:o})=>Ln.port.postMessage({sample:p,channels:g,sampleRate:o}))}Ln.port.postMessage({spawn:i.value})},1)};function Rb(i,v=""){if(!i.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[x,T]=i.split("github:");return T=T.endsWith("/")?T.slice(0,-1):T,T.split("/").length===2&&(T+="/main"),`https://raw.githubusercontent.com/${T}/${v}`}async function Lb(i){if(i.startsWith("github:")&&(i=Rb(i,"strudel.json")),i.startsWith("local:")&&(i="http://localhost:5432"),i.startsWith("shabda:")){let[T,F]=i.split("shabda:");i=`https://shabda.ndre.gr/${F}.json?strudel=1`}if(i.startsWith("shabda/speech")){let[T,F]=i.split("shabda/speech");F=F.startsWith("/")?F.substring(1):F;let[D,p]=F.split(":"),M="f",t="en-GB";D&&([t,M]=D.split("/")),i=`https://shabda.ndre.gr/speech/${p}.json?gender=${M}&language=${t}&strudel=1'`}if(typeof fetch!="function")return;const v=i.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const x=await fetch(i).then(T=>T.json()).catch(T=>{throw console.error(T),new Error(`error loading "${i}"`)});return[x,x._base||v]}async function bb(i){const v=await fetch(i).then(T=>T.arrayBuffer()).then(T=>kt().decodeAudioData(T));let x=[];for(let T=0;T<v.numberOfChannels;T++)x.push(v.getChannelData(T));return{channels:x,sampleRate:v.sampleRate}}async function uM(i,v){if(typeof i=="string"){const[x,T]=await Lb(i);return uM(x,T)}Object.entries(i).map(async([x,T])=>{x!=="_base"&&(T=T.map(F=>v+F),Tr.set(x,T))})}const Db="data:text/javascript;base64,dmFyIGh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHUsbSxmKT0+bSBpbiB1P2h0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5udCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2NvbnN0IE89KGgscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaCxzKSx0KTtmdW5jdGlvbiBfKGgpe3JldHVybiBWKGgpfWZ1bmN0aW9uIFQoaCxzLHQpe2NvbnN0IGk9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksbj1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBoKmkrcypufWNsYXNzIGd7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy91KSUxLHR9fWNsYXNzIEl7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiBNKGgscyl7cmV0dXJuIGg8cz8oaC89cyxoK2gtaCpoLTEpOmg+MS1zPyhoPShoLTEpL3MsaCpoK2graCsxKTowfWNsYXNzIFN7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvdTtsZXQgaT1NKHRoaXMucGhhc2UsdCksbj0yKnRoaXMucGhhc2UtMS1pO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLG59fWZ1bmN0aW9uIHooaCxzLHQpe3JldHVybiBoPDI/MDooKG4sbCxyKT0+cioobC1uKStuKSgtcyouNSxzKi41LHQvKGgtMSkpfWZ1bmN0aW9uIEYoaCxzKXtyZXR1cm4gaCpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEx7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksaT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBuPTAsbD0wO2ZvcihsZXQgcj0wO3I8dGhpcy52b2ljZXM7cisrKXtjb25zdCBhPUYocyx6KHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxyKSkvdSxjPShyJjEpPT0xO2xldCBkPXQ7YyYmKGQ9aSk7bGV0IGI9TSh0aGlzLnBoYXNlW3JdLGEpLEU9Mip0aGlzLnBoYXNlW3JdLTEtYjtuPW4rRSpkLGw9bCtFKmQsdGhpcy5waGFzZVtyXSs9YSx0aGlzLnBoYXNlW3JdPjEmJih0aGlzLnBoYXNlW3JdLT0xKX1yZXR1cm4gbitsfX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgcXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiczAiLDApO2UodGhpcywiczEiLDApfXVwZGF0ZShzLHQsaT0wKXtpPU1hdGgubWF4KGksMCksdD1NYXRoLm1pbih0LDJlNCk7bGV0IG49MipNYXRoLnNpbih0Km0pO249TyhuLDAsMS4xNCk7Y29uc3Qgcj0xLU1hdGgucG93KC41LChpKy4xMjUpLy4xMjUpKm47cmV0dXJuIHRoaXMuczA9cip0aGlzLnMwLW4qdGhpcy5zMStuKnMsdGhpcy5zMT1yKnRoaXMuczErbip0aGlzLnMwLHRoaXMuczF9fWNsYXNzIEN7Y29uc3RydWN0b3Iocz0wKXt0aGlzLnBoYXNlPXN9c2F3KHMsdCl7bGV0IGk9KHRoaXMucGhhc2UrcyklMSxuPU0oaSx0KTtyZXR1cm4gMippLTEtbn11cGRhdGUocyx0PS41KXtjb25zdCBpPXMvdTtsZXQgbj10aGlzLnNhdygwLGkpLXRoaXMuc2F3KHQsaSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2UraSklMSxuK3QqMi0xfX1jbGFzcyBOe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMsdD0uNSl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTE8dD8xOi0xfX1jbGFzcyBQe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ1cGRhdGUiLHM9Pk1hdGgucmFuZG9tKCk8cypmP01hdGgucmFuZG9tKCk6MCl9fWNsYXNzIEd7dXBkYXRlKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMi0xfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy5vdXQ9MH11cGRhdGUoKXtsZXQgcz1NYXRoLnJhbmRvbSgpKjItMTtyZXR1cm4gdGhpcy5vdXQ9KHRoaXMub3V0Ky4wMipzKS8xLjAyLHRoaXMub3V0fX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHM9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCtzKi4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErcyouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMitzKi4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3MqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCtzKi41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtcyouMDE2ODk4O2NvbnN0IHQ9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNitzKi41MzYyO3JldHVybiB0aGlzLmI2PXMqLjExNTkyNix0Ki4xMX19Y2xhc3MgJHtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDEpfXVwZGF0ZShzKXt0aGlzLnBoYXNlKz1mKnM7bGV0IHQ9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHR9fWZ1bmN0aW9uIHgoaCxzLHQsaT0xKXtpZihoPD0wKXJldHVybiBzO2lmKGg+PTEpcmV0dXJuIHQ7bGV0IG47cmV0dXJuIGk9PT0wP249aDppPjA/bj1NYXRoLnBvdyhoLGkpOm49MS1NYXRoLnBvdygxLWgsLWkpLHMrKHQtcykqbn1jbGFzcyB2e2NvbnN0cnVjdG9yKHM9e30pe3RoaXMuc3RhdGU9Im9mZiIsdGhpcy5zdGFydFRpbWU9MCx0aGlzLnN0YXJ0VmFsPTAsdGhpcy5kZWNheUN1cnZlPXMuZGVjYXlDdXJ2ZT8/MX11cGRhdGUocyx0LGksbixsLHIpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lO3JldHVybiBwPmk/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1zLDEpOngocC9pLHRoaXMuc3RhcnRWYWwsMSwxKX1jYXNlImRlY2F5Ijp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZSxhPXgocC9uLDEsbCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEsYSk6cD5uPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1zLGwpOmF9Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1sKSxsO2Nhc2UicmVsZWFzZSI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7aWYocD5yKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IGE9eChwL3IsdGhpcy5zdGFydFZhbCwwLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hKSxhfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn19Y29uc3QgVz0xMDtjbGFzcyBSe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ3cml0ZUlkeCIsMCk7ZSh0aGlzLCJyZWFkSWR4IiwwKTtlKHRoaXMsImJ1ZmZlciIsbmV3IEZsb2F0MzJBcnJheShXKnUpKX13cml0ZShzLHQpe3RoaXMud3JpdGVJZHg9KHRoaXMud3JpdGVJZHgrMSkldGhpcy5idWZmZXIubGVuZ3RoLHRoaXMuYnVmZmVyW3RoaXMud3JpdGVJZHhdPXM7bGV0IGk9TWF0aC5taW4oTWF0aC5mbG9vcih1KnQpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1pLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLndyaXRlKHMsdCksdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe2UodGhpcywiZGVsYXkiLG5ldyBSKTtlKHRoaXMsIm1vZHVsYXRvciIsbmV3IGspfXVwZGF0ZShzLHQsaSxuLGwpe2NvbnN0IHI9dGhpcy5tb2R1bGF0b3IudXBkYXRlKG4pKmwscD10aGlzLmRlbGF5LnVwZGF0ZShzLGkqKDErcikpO3JldHVybiBUKHMscCx0KX19Y2xhc3MgVXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiaG9sZCIsMCk7ZSh0aGlzLCJ0IiwwKX11cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBZe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBpPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmkpL2l9fWNsYXNzIFp7dXBkYXRlKHMsdD0wLGk9MSl7aT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsaSkpO2NvbnN0IG49TWF0aC5leHBtMSh0KTtyZXR1cm4oMStuKSpzLygxK24qTWF0aC5hYnMocykpKml9fWNsYXNzIHd7Y29uc3RydWN0b3Iocyx0LGkpe2UodGhpcywiYnVmZmVyIik7ZSh0aGlzLCJzYW1wbGVSYXRlIik7ZSh0aGlzLCJwb3MiLDApO2UodGhpcywic2FtcGxlRnJlcSIsQSgpKTt0aGlzLmJ1ZmZlcj1zLHRoaXMuc2FtcGxlUmF0ZT10LHRoaXMuZHVyYXRpb249dGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc2FtcGxlUmF0ZSx0aGlzLnNwZWVkPXUvdGhpcy5zYW1wbGVSYXRlLGkmJih0aGlzLnNwZWVkKj10aGlzLmR1cmF0aW9uKX11cGRhdGUocyl7aWYodGhpcy5wb3M+PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PXMvdGhpcy5zYW1wbGVGcmVxKnRoaXMuc3BlZWQ7bGV0IGk9dGhpcy5idWZmZXJbTWF0aC5mbG9vcih0aGlzLnBvcyldO3JldHVybiB0aGlzLnBvcz10aGlzLnBvcyt0LGl9fWUodywic2FtcGxlcyIsbmV3IE1hcCk7Y29uc3QgeT0oaCxzPSJsaW5lYXIiLHQpPT57Y29uc3RbcixwLGEsY109aDtpZihyPT1udWxsJiZwPT1udWxsJiZhPT1udWxsJiZjPT1udWxsKXJldHVybiB0Pz9bLjAwMSwuMDAxLDEsLjAxXTtjb25zdCBkPWE/PyhyIT1udWxsJiZwPT1udWxsfHxyPT1udWxsJiZwPT1udWxsPzE6LjAwMSk7cmV0dXJuW01hdGgubWF4KHI/PzAsLjAwMSksTWF0aC5tYXgocD8/MCwuMDAxKSxNYXRoLm1pbihkLDEpLE1hdGgubWF4KGM/PzAsLjAxKV19O2xldCBEPXtzaW5lOmcsc2F3OlMsemF3Okksc2F3dG9vdGg6Uyx6YXd0b290aDpJLHN1cGVyc2F3OkwsdHJpOmssdHJpYW5nbGU6ayxwdWxzZTpDLHNxdWFyZTpDLHB1bHplOk4sZHVzdDpQLGNyYWNrbGU6UCxpbXB1bHNlOiQsd2hpdGU6Ryxicm93bjpqLHBpbms6Qn07Y29uc3QgSD17Y2hvcnVzOjAsbm90ZTo0OCxzOiJ0cmlhbmdsZSIsYmFuazoiIixnYWluOjEscG9zdGdhaW46MSx2ZWxvY2l0eToxLGRlbnNpdHk6Ii4wMyIsZnR5cGU6IjEyZGIiLGZhbmNob3I6MCxyZXNvbmFuY2U6MCxocmVzb25hbmNlOjAsYmFuZHE6MCxjaGFubmVsczpbMSwyXSxwaGFzZXJkZXB0aDouNzUsc2hhcGV2b2w6MSxkaXN0b3J0dm9sOjEsZGVsYXk6MCxieXRlQmVhdEV4cHJlc3Npb246IjAiLGRlbGF5ZmVlZGJhY2s6LjUsZGVsYXlzcGVlZDoxLGRlbGF5dGltZTouMjUsb3JiaXQ6MSxpOjEsZmZ0OjgsejoidHJpYW5nbGUiLHBhbjouNSxmbWg6MSxmbWVudjowLHNwZWVkOjEscHc6LjV9O2xldCBvPWg9PkhbaF07Y29uc3QgSj17YzowLGQ6MixlOjQsZjo1LGc6NyxhOjksYjoxMX0sSz17IiMiOjEsYjotMSxzOjEsZjotMX0sUT0oaCxzPTMpPT57dmFyIGE7bGV0W3QsaT0iIixuPSIiXT0oKGE9U3RyaW5nKGgpLm1hdGNoKC9eKFthLWdBLUddKShbI2JzZl0qKShbMC05XSopJC8pKT09bnVsbD92b2lkIDA6YS5zbGljZSgxKSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraCsnIicpO2NvbnN0IGw9Slt0LnRvTG93ZXJDYXNlKCldLHI9KGk9PW51bGw/dm9pZCAwOmkuc3BsaXQoIiIpLnJlZHVjZSgoYyxkKT0+YytLW2RdLDApKXx8MDtyZXR1cm4oTnVtYmVyKG58fHMpKzEpKjEyK2wrcn0sdHQ9aD0+TWF0aC5wb3coMiwoaC02OSkvMTIpKjQ0MCxBPWg9PihoPWh8fG8oIm5vdGUiKSx0eXBlb2YgaD09InN0cmluZyImJihoPVEoaCwzKSksdHQoaCkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyBVKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgWSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWil9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIGV0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgUix0aGlzLl9kZWxheVI9bmV3IFJ9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyBzdChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGl0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgYXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IGV0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1pdCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsYXQpfSkoKTsK",Gb=Db;Q2(Gb);const{Pattern:wb,logger:bo,repl:Bb}=o2;l2(bo);const lM=i=>(i.ensureObjectValue(),i.value),fM=(i,v,x,T,F)=>ia(lM(i),F,x,T,i.whole?.begin.valueOf());async function Xb(i,v,x,T,F,D,p,M=void 0){let t=kt();await t.close(),t=new OfflineAudioContext(2,(T-x)/v*F,F),wr(t),Lo(new z2(t)),await Wh({maxPolyphony:D,multiChannelOrbits:p}),bo("[webaudio] preloading");let h=i.queryArc(x,T,{_cps:v}).sort((g,o)=>g.whole.begin.valueOf()-o.whole.begin.valueOf());for(const g of h)if(g.hasOnset())try{await ia(lM(g),(g.whole.begin.valueOf()-x)/v,g.duration/v,v,(g.whole?.begin.valueOf()-x)/v)}catch(o){Wn(o,"webaudio")}return bo("[webaudio] start rendering"),t.startRendering().then(g=>{const o=Ib(g),a=new Blob([o],{type:"audio/wav"}),r=URL.createObjectURL(a),e=document.createElement("a");e.href=r,M=M?`${M}.wav`:`${new Date().toISOString()}.wav`,e.download=`${M}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(r)}).finally(async()=>{wr(null),Lo(null),eM()})}function dM(i={}){const v=i.audioContext??kt();return wr(v),i={getTime:()=>v.currentTime,defaultOutput:fM,...i},Bb(i)}wb.prototype.dough=function(){return this.onTrigger(hM,1)};function Ib(i,v){v=v||{};var x=i.numberOfChannels,T=i.sampleRate,F=v.float32?3:1,D=F===3?32:16,p;return x===2?p=Nb(i.getChannelData(0),i.getChannelData(1)):p=i.getChannelData(0),Ob(p,F,T,x,D)}function Ob(i,v,x,T,F){var D=F/8,p=T*D,M=new ArrayBuffer(44+i.length*D),t=new DataView(M);return mr(t,0,"RIFF"),t.setUint32(4,36+i.length*D,!0),mr(t,8,"WAVE"),mr(t,12,"fmt "),t.setUint32(16,16,!0),t.setUint16(20,v,!0),t.setUint16(22,T,!0),t.setUint32(24,x,!0),t.setUint32(28,x*p,!0),t.setUint16(32,p,!0),t.setUint16(34,F,!0),mr(t,36,"data"),t.setUint32(40,i.length*D,!0),v===1?zb(t,44,i):Vb(t,44,i),M}function Nb(i,v){for(var x=i.length+v.length,T=new Float32Array(x),F=0,D=0;F<x;)T[F++]=i[D],T[F++]=v[D],D++;return T}function Vb(i,v,x){for(var T=0;T<x.length;T++,v+=4)i.setFloat32(v,x[T],!0)}function zb(i,v,x){for(var T=0;T<x.length;T++,v+=2){var F=Math.max(-1,Math.min(1,x[T]));i.setInt16(v,F<0?F*32768:F*32767,!0)}}function mr(i,v,x){for(var T=0;T<x.length;T++)i.setUint8(v+T,x.charCodeAt(T))}const ws=(i="test-canvas",v)=>{let{contextType:x="2d",pixelated:T=!1,pixelRatio:F=window.devicePixelRatio}={},D=document.querySelector("#"+i);if(!D){D=document.createElement("canvas"),D.id=i,D.width=window.innerWidth*F,D.height=window.innerHeight*F,D.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",T&&(D.style.imageRendering="pixelated"),document.body.prepend(D);let p;window.addEventListener("resize",()=>{p&&clearTimeout(p),p=setTimeout(()=>{D.width=window.innerWidth*F,D.height=window.innerHeight*F},200)})}return D.getContext(x,{willReadFrequently:!0})};let bn={};function Wb(i){bn[i]!==void 0&&(cancelAnimationFrame(bn[i]),delete bn[i])}let Ji={};xt.prototype.draw=function(i,v){if(typeof window>"u")return this;let{id:x=1,lookbehind:T=0,lookahead:F=0}=v,D=Math.max(mo(),0);Wb(x),T=Math.abs(T),Ji[x]=(Ji[x]||[]).filter(h=>!h.isInFuture(D));let p=this.queryArc(D,D+F).filter(h=>h.hasOnset());Ji[x]=Ji[x].concat(p);let M;const t=()=>{const h=mo(),g=h+F;Ji[x]=Ji[x].filter(r=>r.isInNearPast(T,h));let o=Math.max(M||g,g-1/10);const a=this.queryArc(o,g).filter(r=>r.hasOnset());Ji[x]=Ji[x].concat(a),M=g,i(Ji[x],h,g,this),bn[x]=requestAnimationFrame(t)};return bn[x]=requestAnimationFrame(t),this};xt.prototype.onPaint=function(i){return this.withState(v=>(v.controls.painters||(v.controls.painters=[]),v.controls.painters.push(i),v))};xt.prototype.getPainters=function(){let i=[];return this.queryArc(0,0,{painters:i}),i};let Yb={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function Qi(){return Yb}let hl="#22222210";xt.prototype.animate=function({callback:i,sync:v=!1,smear:x=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const T=ws();let{clientWidth:F,clientHeight:D}=T.canvas;F*=window.devicePixelRatio,D*=window.devicePixelRatio;let p=x===0?"99":Number((1-x)*100).toFixed(0);p=p.length===1?`0${p}`:p,hl=`#200010${p}`;const M=t=>{let h;t=Math.round(t),h=this.slow(1e3).queryArc(t,t),T.fillStyle=hl,T.fillRect(0,0,F,D),h.forEach(g=>{let{x:o,y:a,w:r,h:e,s:n,r:u,angle:s=0,fill:l="darkseagreen"}=g.value;if(r*=F,e*=D,u!==void 0&&s!==void 0){const d=s*2*Math.PI,[f,m]=[(F-r)/2,(D-e)/2];o=f+Math.cos(d)*u*f,a=m+Math.sin(d)*u*m}else o*=F-r,a*=D-e;const c={...g.value,x:o,y:a,w:r,h:e};T.fillStyle=l,n==="rect"?T.fillRect(o,a,r,e):n==="ellipse"&&(T.beginPath(),T.ellipse(o+r/2,a+e/2,r/2,e/2,0,0,2*Math.PI),T.fill()),i&&i(T,c,g)}),window.frame=requestAnimationFrame(M)};return window.frame=requestAnimationFrame(M),ce};const{x:cM,y:GB,w:wB,h:BB,angle:XB,r:IB,fill:OB,smear:NB}=uh("x","y","w","h","angle","r","fill","smear");dt("rescale",function(i,v){return v.mul(cM(i).w(i).y(i).h(i))});dt("moveXY",function(i,v,x){return x.add(cM(i).y(v))});dt("zoomIn",function(i,v){const x=ge(1).sub(i).div(2);return v.rescale(i).move(x,x)});const Cn=(i,v,x)=>i*(x-v)+v,ul=i=>{let{value:v}=i;typeof i.value!="object"&&(v={value:v});let{note:x,n:T,freq:F,s:D}=v;if(F)return ko(F);if(x=x??T,typeof x=="string")try{return wi(x)}catch{return 0}return typeof x=="number"?x:D?"_"+D:v};xt.prototype.pianoroll=function(i={}){let{cycles:v=4,playhead:x=.5,overscan:T=0,hideNegative:F=!1,ctx:D=ws(),id:p=1}=i,M=-v*x,t=v*(1-x);const h=(g,o)=>(!F||g.whole.begin>=0)&&g.isWithinTime(o+M,o+t);return this.draw((g,o)=>{pM({...i,time:o,ctx:D,haps:g.filter(a=>h(a,o))})},{lookbehind:M-T,lookahead:t+T,id:p}),this};function pM({time:i,haps:v,cycles:x=4,playhead:T=.5,flipTime:F=0,flipValues:D=0,hideNegative:p=!1,inactive:M=Qi().foreground,active:t=Qi().foreground,background:h="transparent",smear:g=0,playheadColor:o=Qi().foreground,minMidi:a=10,maxMidi:r=90,autorange:e=0,timeframe:n,fold:u=1,vertical:s=0,labels:l=!1,fill:c=1,fillActive:d=!1,strokeActive:f=!0,stroke:m,hideInactive:y=0,colorizeInactive:S=1,fontFamily:C,ctx:E,id:P}={}){const A=E.canvas.width,R=E.canvas.height;let G=-x*T,b=x*(1-T);P&&(v=v.filter(Z=>Z.hasTag(P))),n&&(console.warn("timeframe is deprecated! use from/to instead"),G=0,b=n);const L=s?R:A,w=s?A:R;let B=s?[L,0]:[0,L];const N=b-G,Y=s?[0,w]:[w,0];let U=r-a+1,W=w/U,O=[];F&&B.reverse(),D&&Y.reverse();const{min:V,max:X,values:z}=v.reduce(({min:Z,max:J,values:k},j)=>{const tt=ul(j);return{min:tt<Z?tt:Z,max:tt>J?tt:J,values:k.includes(tt)?k:[...k,tt]}},{min:1/0,max:-1/0,values:[]});e&&(a=V,r=X,U=r-a+1),O=z.sort((Z,J)=>typeof Z=="number"&&typeof J=="number"?Z-J:typeof Z=="number"?1:String(Z).localeCompare(String(J))),W=u?w/O.length:w/U,E.fillStyle=h,E.globalAlpha=1,g||(E.clearRect(0,0,A,R),E.fillRect(0,0,A,R)),v.forEach(Z=>{const J=Z.whole.begin<=i&&Z.endClipped>i;let k=m??(f&&J),j=!J&&c||J&&d;if(y&&!J)return;let tt=Z.value?.color;t=tt||t,M=S&&tt||M,tt=J?t:M,E.fillStyle=j?tt:"transparent",E.strokeStyle=tt;const{velocity:ht=1,gain:ot=1}=Z.value||{};E.globalAlpha=ht*ot;const st=(Z.whole.begin-(F?b:G))/N,ft=Cn(st,...B);let ut=Cn(Z.duration/N,0,L);const lt=ul(Z),Tt=u?O.indexOf(lt)/O.length:(Number(lt)-a)/U,bt=Cn(Tt,...Y);let Dt=0;const ct=Cn(i/N,...B);let yt;if(s?yt=[bt+1-(D?W:0),L-ct+ft+Dt+1-(F?0:ut),W-2,ut-2]:yt=[ft-ct+Dt+1-(F?ut:0),bt+1-(D?0:W),ut-2,W-2],k&&E.strokeRect(...yt),j&&E.fillRect(...yt),l){const Et=Z.value.note??Z.value.s+(Z.value.n?`:${Z.value.n}`:""),{label:At,activeLabel:It}=Z.value,Ft=(J&&It||At)??Et;let wt=s?ut:W*.75;E.font=`${wt}px ${C||"monospace"}`,E.fillStyle=j?"black":tt,E.textBaseline="top",E.fillText(Ft,...yt)}}),E.globalAlpha=1;const I=Cn(-G/N,...B);return E.strokeStyle=o,E.beginPath(),s?(E.moveTo(0,I),E.lineTo(w,I)):(E.moveTo(I,0),E.lineTo(I,w)),E.stroke(),this}function Zb(i,v={}){let[x,T]=i;x=Math.abs(x);const F=T+x,D=F!==0?x/F:0;return{fold:1,...v,cycles:F,playhead:D}}const Ub=(i={})=>(v,x,T,F)=>pM({ctx:v,time:x,haps:T,...Zb(F,i)});xt.prototype.punchcard=function(i){return this.onPaint(Ub(i))};xt.prototype.wordfall=function(i){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...i})};function Hb(i,v,x,T){const F=(i-90)*Math.PI/180;return[x+Math.cos(F)*v,T+Math.sin(F)*v]}const ll=(i,v,x,T,F=0)=>Hb((i+F)*360,v*i,x,T);function fl(i){let{ctx:v,from:x=0,to:T=3,margin:F=50,cx:D=100,cy:p=100,rotate:M=0,thickness:t=F/2,color:h=Qi().foreground,cap:g="round",stretch:o=1,fromOpacity:a=1,toOpacity:r=1}=i;x*=o,T*=o,M*=o,v.lineWidth=t,v.lineCap=g,v.strokeStyle=h,v.globalAlpha=a,v.beginPath();let[e,n]=ll(x,F,D,p,M);v.moveTo(e,n);const u=1/60;let s=x;for(;s<=T;){const[l,c]=ll(s,F,D,p,M);v.globalAlpha=(s-x)/(T-x)*r,v.lineTo(l,c),s+=u}v.stroke()}function Kb(i){let{stretch:v=1,size:x=80,thickness:T=x/2,cap:F="butt",inset:D=3,playheadColor:p="#ffffff",playheadLength:M=.02,playheadThickness:t=T,padding:h=0,steady:g=1,activeColor:o=Qi().foreground,inactiveColor:a=Qi().gutterForeground,colorizeInactive:r=0,fade:e=!0,ctx:n,time:u,haps:s,drawTime:l,id:c}=i;c&&(s=s.filter(A=>A.hasTag(c)));const[d,f]=[n.canvas.width,n.canvas.height];n.clearRect(0,0,d*2,f*2);const[m,y]=[d/2,f/2],S={margin:x/v,cx:m,cy:y,stretch:v,cap:F,thickness:T},C={...S,thickness:t,from:D-M,to:D,color:p},[E]=l,P=g*u;s.forEach(A=>{const R=A.whole.begin<=u&&A.endClipped>u,G=A.whole.begin-u+D,b=A.endClipped-u+D-h,L=A.value?.color||o,w=r||R?L:a,B=e?1-Math.abs((A.whole.begin-u)/E):1;fl({ctx:n,...S,from:G,to:b,rotate:P,color:w,fromOpacity:B,toOpacity:B})}),fl({ctx:n,...C,rotate:P})}xt.prototype.spiral=function(i={}){return this.onPaint((v,x,T,F)=>Kb({ctx:v,time:x,haps:T,drawTime:F,...i}))};const Jb=js(36),dl=(i,v,x,T)=>{T=T*Math.PI*2;const F=Math.sin(T)*x+i,D=Math.cos(T)*x+v;return[F,D]},cl=(i,v)=>.5-Math.log2(i/v)%1;function kb({haps:i,ctx:v,id:x,hapcircles:T=1,circle:F=0,edo:D=12,root:p=Jb,thickness:M=3,hapRadius:t=6,mode:h="flake",margin:g=10}={}){const o=h==="polygon",a=h==="flake",r=v.canvas.width,e=v.canvas.height;v.clearRect(0,0,r,e);const n=Qi().foreground,u=Math.min(r,e)/2-M/2-t-g,s=r/2,l=e/2;x&&(i=i.filter(d=>d.hasTag(x))),v.strokeStyle=n,v.fillStyle=n,v.globalAlpha=1,v.lineWidth=M,F&&(v.beginPath(),v.arc(s,l,u,0,2*Math.PI),v.stroke()),D&&(Array.from({length:D},(d,f)=>{const m=cl(p*Math.pow(2,f/D),p),[y,S]=dl(s,l,u,m);v.beginPath(),v.arc(y,S,t,0,2*Math.PI),v.fill()}),v.stroke());let c=[];v.lineWidth=t,i.forEach(d=>{let f;try{f=Df(d)}catch{return}const m=cl(f,p),[y,S]=dl(s,l,u,m),C=d.value.color||n;v.strokeStyle=C,v.fillStyle=C;const{velocity:E=1,gain:P=1}=d.value||{},A=E*P;v.globalAlpha=A,c.push([y,S,m,C,A]),v.beginPath(),T&&(v.moveTo(y+t,S),v.arc(y,S,t,0,2*Math.PI),v.fill()),a&&(v.moveTo(s,l),v.lineTo(y,S)),v.stroke()}),v.strokeStyle=n,v.globalAlpha=1,o&&c.length&&(c=c.sort((d,f)=>d[2]-f[2]),v.beginPath(),v.moveTo(c[0][0],c[0][1]),c.forEach(([d,f,m,y,S])=>{v.strokeStyle=y,v.globalAlpha=S,v.lineTo(d,f)}),v.lineTo(c[0][0],c[0][1]),v.stroke())}xt.prototype.pitchwheel=function(i={}){let{ctx:v=ws(),id:x=1}=i;return this.tag(x).onPaint((T,F,D)=>kb({...i,ctx:v,haps:D.filter(p=>p.isActive(F)),id:x}))};function vM(i,{align:v=!0,color:x="white",thickness:T=3,scale:F=.25,pos:D=.75,trigger:p=0,ctx:M=ws(),id:t=1}={}){M.lineWidth=T,M.strokeStyle=x;let h=M.canvas;if(!i){M.beginPath();let n=D*h.height;M.moveTo(0,n),M.lineTo(h.width,n),M.stroke();return}const g=ea("time",t);M.beginPath();const o=i.frequencyBinCount;let a=v?Array.from(g).findIndex((n,u,s)=>u&&s[u-1]>-p&&n<=-p):0;a=Math.max(a,0);const r=h.width*1/o;let e=0;for(let n=a;n<o;n++){const u=g[n]+1,s=(D-F*(u-1))*h.height;n===0?M.moveTo(e,s):M.lineTo(e,s),e+=r}M.stroke()}function mM(i,{color:v="white",scale:x=.25,pos:T=.75,lean:F=.5,min:D=-150,max:p=0,ctx:M=ws(),id:t=1}={}){if(!i){M.beginPath();let e=T*g.height;M.moveTo(0,e),M.lineTo(g.width,e),M.stroke();return}const h=ea("frequency",t),g=M.canvas;M.fillStyle=v;const o=i.frequencyBinCount,a=g.width*1/o;let r=0;for(let e=0;e<o;e++){const n=Hr((h[e]-D)/(p-D),0,1)*x,u=n*g.height,s=(T-n*F)*g.height;M.fillRect(r,s,Math.max(a,1),u),r+=a}}function gM(i=0,v="0,0,0",x=ws()){i?(x.fillStyle=`rgba(${v},${1-i})`,x.fillRect(0,0,x.canvas.width,x.canvas.height)):x.clearRect(0,0,x.canvas.width,x.canvas.height)}xt.prototype.fscope=function(i={}){let v=i.id??1;return this.analyze(v).draw(()=>{gM(i.smear,"0,0,0",i.ctx),Ye[v]&&mM(Ye[v],i)},{id:v})};xt.prototype.tscope=function(i={}){let v=i.id??1;return this.analyze(v).draw(x=>{i.color=x[0]?.value?.color||Qi().foreground,i.color,gM(i.smear,"0,0,0",i.ctx),vM(Ye[v],i)},{id:v})};xt.prototype.scope=xt.prototype.tscope;let pl={};xt.prototype.spectrum=function(i={}){let v=i.id??1;return this.analyze(v).draw(x=>{i.color=x[0]?.value?.color||pl[v]||Qi().foreground,pl[v]=i.color,jb(Ye[v],i)},{id:v})};xt.prototype.scope=xt.prototype.tscope;const Za=new Map;function jb(i,{thickness:v=3,speed:x=1,min:T=-80,max:F=0,ctx:D=ws(),id:p=1,color:M}={}){if(D.lineWidth=v,D.strokeStyle=M,!i)return;const t=x,h=ea("frequency",p),g=D.canvas;D.fillStyle=M;const o=i.frequencyBinCount;let a=Za.get(p)||D.getImageData(0,0,g.width,g.height);Za.set(p,a),D.clearRect(0,0,D.canvas.width,D.canvas.height),D.putImageData(a,-t,0);let r=g.width-x;for(let e=0;e<o;e++){const n=Hr((h[e]-T)/(F-T),0,1);D.globalAlpha=n;const u=Math.log(e+1)/Math.log(o)*g.height;D.fillRect(r,g.height-u,t,2)}Za.set(p,D.getImageData(0,0,g.width,g.height))}const Qb=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:Ih,Warpmode:Po,aliasBank:ub,get analysers(){return Ye},get analysersData(){return Es},applyFM:Zn,applyGainCurve:bi,applyParameterModulators:To,cleanupOnEnd:P2,connectBusModulator:R2,connectEnvelope:F2,connectLFO:A2,connectToDestination:_2,createFilter:y2,distortionAlgorithms:bh,dough:Ab,doughTrigger:hM,doughsamples:uM,drawFrequencyScope:mM,drawTimeScope:vM,drywet:M2,dspWorklet:aM,effectSend:Yn,errorLogger:Wn,gainNode:me,getADSRValues:ni,getAnalyserById:tM,getAnalyzerData:ea,getAudioContext:kt,getAudioContextCurrentTime:f4,getAudioDevices:J2,getCachedBuffer:K4,getCompressor:x2,getDefaultValue:Pe,getDistortion:E2,getDistortionAlgorithm:B4,getEnvelope:g2,getFrequencyFromValue:us,getLfo:rn,getLoadedBuffer:k4,getOscillator:nM,getParamADSR:si,getParamLfo:Lh,getPitchEnvelope:qs,getSampleBuffer:b2,getSampleBufferSource:D2,getSampleInfo:L2,getSound:Cs,getSuperdoughAudioController:ta,getVibratoOscillator:_s,getWorklet:Je,getZZFX:rM,initAudio:Wh,initAudioOnFirstClick:q2,loadBuffer:Br,loadWorklets:$2,logger:be,get maxPolyphony(){return Oh},get multiChannelOrbits(){return Nh},noises:Rh,onTriggerSample:N2,onTriggerSynth:Z2,onceEnded:Xi,processSampleMap:X2,registerSampleSource:V2,registerSamplesPrefix:j4,registerSound:Ci,registerSynthSounds:iM,registerWaveTable:Xh,registerWorklet:Q2,registerZZFXSounds:Pb,releaseAudioNode:ne,renderPatternAudio:Xb,resetDefaultValues:k2,resetDefaults:cb,resetGlobalEffects:eM,resetLoadedSounds:mb,resetSeenKeys:W2,reverseBuffer:G2,samples:O2,scheduleAtTime:E4,setAudioContext:wr,setDefault:db,setDefaultAudioContext:h2,setDefaultValue:zh,setDefaultValues:pb,setGainCurve:ob,setLogger:l2,setMaxPolyphony:U2,setMultiChannelOrbits:H2,setSuperdoughAudioController:Lo,setVersionDefaults:vb,soundAlias:lb,soundMap:Ei,superdough:ia,superdoughTrigger:Mb,tables:ab,waveformN:sM,webAudioTimeout:Di,webaudioOutput:fM,webaudioRepl:dM},Symbol.toStringTag,{value:"Module"}));function $b(i,v){function x(){this.constructor=i}x.prototype=v.prototype,i.prototype=new x}function Rs(i,v,x,T){var F=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(F,Rs.prototype),F.expected=v,F.found=x,F.location=T,F.name="SyntaxError",F}$b(Rs,Error);function Ua(i,v,x){return x=x||" ",i.length>v?i:(v-=i.length,x+=x.repeat(v),i+x.slice(0,v))}Rs.prototype.format=function(i){var v="Error: "+this.message;if(this.location){var x=null,T;for(T=0;T<i.length;T++)if(i[T].source===this.location.source){x=i[T].text.split(/\r\n|\n|\r/g);break}var F=this.location.start,D=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(F):F,p=this.location.source+":"+D.line+":"+D.column;if(x){var M=this.location.end,t=Ua("",D.line.toString().length," "),h=x[F.line-1],g=F.line===M.line?M.column:h.length+1,o=g-F.column||1;v+=`
 --> `+p+`
`+t+` |
`+D.line+" | "+h+`
`+t+" | "+Ua("",F.column-1," ")+Ua("",o,"^")}else v+=`
 at `+p}return v};Rs.buildMessage=function(i,v){var x={literal:function(h){return'"'+F(h.text)+'"'},class:function(h){var g=h.parts.map(function(o){return Array.isArray(o)?D(o[0])+"-"+D(o[1]):D(o)});return"["+(h.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};function T(h){return h.charCodeAt(0).toString(16).toUpperCase()}function F(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+T(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+T(g)})}function D(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+T(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+T(g)})}function p(h){return x[h.type](h)}function M(h){var g=h.map(p),o,a;if(g.sort(),g.length>0){for(o=1,a=1;o<g.length;o++)g[o-1]!==g[o]&&(g[a]=g[o],a++);g.length=a}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function t(h){return h?'"'+F(h)+'"':"end of input"}return"Expected "+M(i)+" but "+t(v)+" found."};function xM(i,v){v=v!==void 0?v:{};var x={},T=v.grammarSource,F={start:bu},D=bu,p=".",M="-",t="0",h=",",g="|",o="[",a="]",r="{",e="}",n="%",u="<",s=">",l="!",c="(",d=")",f="/",m="*",y="?",S=":",C="..",E="^",P="struct",A="target",R="euclid",G="slow",b="rotL",L="rotR",w="fast",B="scale",N="//",Y="cat",U="$",W="setcps",O="setbpm",V="hush",X=/^[1-9]/,z=/^[eE]/,I=/^[+\-]/,Z=/^[0-9]/,J=/^[ \n\r\t\xA0]/,k=/^["']/,j=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,tt=/^[@_]/,ht=/^[^\n]/,ot=Ra("number"),st=ae(".",!1),ft=Ui([["1","9"]],!1,!1),ut=Ui(["e","E"],!1,!1),lt=Ui(["+","-"],!1,!1),Tt=ae("-",!1),bt=ae("0",!1),Dt=Ui([["0","9"]],!1,!1),ct=Ra("whitespace"),yt=Ui([" ",`
`,"\r","	",""],!1,!1),Et=ae(",",!1),At=ae("|",!1),It=Ui(['"',"'"],!1,!1),Ft=Ra('a letter, a number, "-", "#", ".", "^", "_"'),wt=Ui(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","","","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"","",["",""],["",""],"",["",""],["",""],"",["",""],"","","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"","",["",""],"",["",""],"","","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Bt=ae("[",!1),le=ae("]",!1),pe=ae("{",!1),Ut=ae("}",!1),he=ae("%",!1),Pt=ae("<",!1),Ot=ae(">",!1),se=Ui(["@","_"],!1,!1),fe=ae("!",!1),Kt=ae("(",!1),ye=ae(")",!1),Le=ae("/",!1),ei=ae("*",!1),nr=ae("?",!1),Aa=ae(":",!1),Fa=ae("..",!1),H=ae("^",!1),$=ae("struct",!1),Q=ae("target",!1),q=ae("euclid",!1),it=ae("slow",!1),pt=ae("rotL",!1),mt=ae("rotR",!1),Mt=ae("fast",!1),Gt=ae("scale",!1),te=ae("//",!1),Ae=Ui([`
`],!0,!1),Zi=ae("cat",!1),es=ae("$",!1),rr=ae("setcps",!1),ar=ae("setbpm",!1),oi=ae("hush",!1),AS=function(){return parseFloat(f3())},FS=function(K){const et=K.join("");return et==="."||et==="_"},RS=function(K){return new tT(K.join(""))},LS=function(K){return K},bS=function(K,et){return K.arguments_.stepsPerCycle=et,K},DS=function(K){return K},GS=function(K){return K.arguments_.alignment="polymeter_slowcat",K},wS=function(K){return et=>et.options_.weight=(et.options_.weight??1)+(K??2)-1},BS=function(K){return et=>{const at=(et.options_.reps??1)+(K??2)-1;et.options_.reps=at,et.options_.ops=et.options_.ops.filter(vt=>vt.type_!=="replicate"),et.options_.ops.push({type_:"replicate",arguments_:{amount:at}}),et.options_.weight=at}},XS=function(K,et,at){return vt=>vt.options_.ops.push({type_:"bjorklund",arguments_:{pulse:K,step:et,rotation:at}})},IS=function(K){return et=>et.options_.ops.push({type_:"stretch",arguments_:{amount:K,type:"slow"}})},OS=function(K){return et=>et.options_.ops.push({type_:"stretch",arguments_:{amount:K,type:"fast"}})},NS=function(K){return et=>et.options_.ops.push({type_:"degradeBy",arguments_:{amount:K,seed:Ga++}})},VS=function(K){return et=>et.options_.ops.push({type_:"tail",arguments_:{element:K}})},zS=function(K){return et=>et.options_.ops.push({type_:"range",arguments_:{element:K}})},WS=function(K,et){const at=new iT(K,{ops:[],weight:1,reps:1});for(const vt of et)vt(at);return at},YS=function(K,et){return new lr(et,"fastcat",void 0,!!K)},ZS=function(K){return{alignment:"stack",list:K}},US=function(K){return{alignment:"rand",list:K,seed:Ga++}},HS=function(K){return{alignment:"feet",list:K,seed:Ga++}},KS=function(K,et){return et&&et.list.length>0?new lr([K,...et.list],et.alignment,et.seed):K},JS=function(K,et){return new lr(et?[K,...et.list]:[K],"polymeter")},kS=function(K){return K},jS=function(K){return{name:"struct",args:{mini:K}}},QS=function(K){return{name:"target",args:{name:K}}},$S=function(K,et,at){return{name:"bjorklund",args:{pulse:K,step:parseInt(et)}}},qS=function(K){return{name:"stretch",args:{amount:K}}},_S=function(K){return{name:"shift",args:{amount:"-"+K}}},t3=function(K){return{name:"shift",args:{amount:K}}},e3=function(K){return{name:"stretch",args:{amount:"1/"+K}}},i3=function(K){return{name:"scale",args:{scale:K.join("")}}},Fu=function(K,et){return et},s3=function(K,et){return et.unshift(K),new lr(et,"slowcat")},n3=function(K){return K},r3=function(K,et){return new eT(K.name,K.args,et)},a3=function(K){return K},o3=function(K){return K},h3=function(K){return new Da("setcps",{value:K})},u3=function(K){return new Da("setcps",{value:K/120/2})},l3=function(){return new Da("hush")},rt=v.peg$currPos|0,jt=rt,Xs=[{line:1,column:1}],mi=rt,or=v.peg$maxFailExpected||[],Vt=v.peg$silentFails|0,mn;if(v.startRule){if(!(v.startRule in F))throw new Error(`Can't start parsing from rule "`+v.startRule+'".');D=F[v.startRule]}function f3(){return i.substring(jt,rt)}function Ru(){return La(jt,rt)}function ae(K,et){return{type:"literal",text:K,ignoreCase:et}}function Ui(K,et,at){return{type:"class",parts:K,inverted:et,ignoreCase:at}}function d3(){return{type:"end"}}function Ra(K){return{type:"other",description:K}}function Lu(K){var et=Xs[K],at;if(et)return et;if(K>=Xs.length)at=Xs.length-1;else for(at=K;!Xs[--at];);for(et=Xs[at],et={line:et.line,column:et.column};at<K;)i.charCodeAt(at)===10?(et.line++,et.column=1):et.column++,at++;return Xs[K]=et,et}function La(K,et,at){var vt=Lu(K),zt=Lu(et),Se={source:T,start:{offset:K,line:vt.line,column:vt.column},end:{offset:et,line:zt.line,column:zt.column}};return Se}function Yt(K){rt<mi||(rt>mi&&(mi=rt,or=[]),or.push(K))}function c3(K,et,at){return new Rs(Rs.buildMessage(K,et),K,et,at)}function bu(){var K;return K=_3(),K}function Hi(){var K,et;return Vt++,K=rt,y3(),et=hr(),et!==x?(x3(),g3(),jt=K,K=AS()):(rt=K,K=x),Vt--,K===x&&Vt===0&&Yt(ot),K}function p3(){var K;return i.charCodeAt(rt)===46?(K=p,rt++):(K=x,Vt===0&&Yt(st)),K}function v3(){var K;return K=i.charAt(rt),X.test(K)?rt++:(K=x,Vt===0&&Yt(ft)),K}function m3(){var K;return K=i.charAt(rt),z.test(K)?rt++:(K=x,Vt===0&&Yt(ut)),K}function g3(){var K,et,at,vt,zt;if(K=rt,et=m3(),et!==x){if(at=i.charAt(rt),I.test(at)?rt++:(at=x,Vt===0&&Yt(lt)),at===x&&(at=null),vt=[],zt=Is(),zt!==x)for(;zt!==x;)vt.push(zt),zt=Is();else vt=x;vt!==x?(et=[et,at,vt],K=et):(rt=K,K=x)}else rt=K,K=x;return K}function x3(){var K,et,at,vt;if(K=rt,et=p3(),et!==x){if(at=[],vt=Is(),vt!==x)for(;vt!==x;)at.push(vt),vt=Is();else at=x;at!==x?(et=[et,at],K=et):(rt=K,K=x)}else rt=K,K=x;return K}function hr(){var K,et,at,vt;if(K=M3(),K===x)if(K=rt,et=v3(),et!==x){for(at=[],vt=Is();vt!==x;)at.push(vt),vt=Is();et=[et,at],K=et}else rt=K,K=x;return K}function y3(){var K;return i.charCodeAt(rt)===45?(K=M,rt++):(K=x,Vt===0&&Yt(Tt)),K}function M3(){var K;return i.charCodeAt(rt)===48?(K=t,rt++):(K=x,Vt===0&&Yt(bt)),K}function Is(){var K;return K=i.charAt(rt),Z.test(K)?rt++:(K=x,Vt===0&&Yt(Dt)),K}function Zt(){var K,et;for(Vt++,K=[],et=i.charAt(rt),J.test(et)?rt++:(et=x,Vt===0&&Yt(yt));et!==x;)K.push(et),et=i.charAt(rt),J.test(et)?rt++:(et=x,Vt===0&&Yt(yt));return Vt--,et=x,Vt===0&&Yt(ct),K}function Os(){var K,et,at,vt;return K=rt,et=Zt(),i.charCodeAt(rt)===44?(at=h,rt++):(at=x,Vt===0&&Yt(Et)),at!==x?(vt=Zt(),et=[et,at,vt],K=et):(rt=K,K=x),K}function Du(){var K,et,at,vt;return K=rt,et=Zt(),i.charCodeAt(rt)===124?(at=g,rt++):(at=x,Vt===0&&Yt(At)),at!==x?(vt=Zt(),et=[et,at,vt],K=et):(rt=K,K=x),K}function Gu(){var K,et,at,vt;return K=rt,et=Zt(),i.charCodeAt(rt)===46?(at=p,rt++):(at=x,Vt===0&&Yt(st)),at!==x?(vt=Zt(),et=[et,at,vt],K=et):(rt=K,K=x),K}function Ns(){var K;return K=i.charAt(rt),k.test(K)?rt++:(K=x,Vt===0&&Yt(It)),K}function ur(){var K;return Vt++,K=i.charAt(rt),j.test(K)?rt++:(K=x,Vt===0&&Yt(wt)),Vt--,K===x&&Vt===0&&Yt(Ft),K}function wu(){var K,et,at,vt;if(K=rt,Zt(),et=[],at=ur(),at!==x)for(;at!==x;)et.push(at),at=ur();else et=x;return et!==x?(at=Zt(),jt=rt,vt=FS(et),vt?vt=x:vt=void 0,vt!==x?(jt=K,K=RS(et)):(rt=K,K=x)):(rt=K,K=x),K}function C3(){var K,et,at,vt;return K=rt,Zt(),i.charCodeAt(rt)===91?(et=o,rt++):(et=x,Vt===0&&Yt(Bt)),et!==x?(Zt(),at=Iu(),at!==x?(Zt(),i.charCodeAt(rt)===93?(vt=a,rt++):(vt=x,Vt===0&&Yt(le)),vt!==x?(Zt(),jt=K,K=LS(at)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function S3(){var K,et,at,vt,zt;return K=rt,Zt(),i.charCodeAt(rt)===123?(et=r,rt++):(et=x,Vt===0&&Yt(pe)),et!==x?(Zt(),at=Ou(),at!==x?(Zt(),i.charCodeAt(rt)===125?(vt=e,rt++):(vt=x,Vt===0&&Yt(Ut)),vt!==x?(zt=T3(),zt===x&&(zt=null),Zt(),jt=K,K=bS(at,zt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function T3(){var K,et,at;return K=rt,i.charCodeAt(rt)===37?(et=n,rt++):(et=x,Vt===0&&Yt(he)),et!==x?(at=Vs(),at!==x?(jt=K,K=DS(at)):(rt=K,K=x)):(rt=K,K=x),K}function E3(){var K,et,at,vt;return K=rt,Zt(),i.charCodeAt(rt)===60?(et=u,rt++):(et=x,Vt===0&&Yt(Pt)),et!==x?(Zt(),at=Ou(),at!==x?(Zt(),i.charCodeAt(rt)===62?(vt=s,rt++):(vt=x,Vt===0&&Yt(Ot)),vt!==x?(Zt(),jt=K,K=GS(at)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function Vs(){var K;return K=wu(),K===x&&(K=C3(),K===x&&(K=S3(),K===x&&(K=E3()))),K}function Bu(){var K;return K=P3(),K===x&&(K=F3(),K===x&&(K=R3(),K===x&&(K=L3(),K===x&&(K=A3(),K===x&&(K=b3(),K===x&&(K=D3(),K===x&&(K=G3()))))))),K}function P3(){var K,et,at;return K=rt,Zt(),et=i.charAt(rt),tt.test(et)?rt++:(et=x,Vt===0&&Yt(se)),et!==x?(at=Hi(),at===x&&(at=null),jt=K,K=wS(at)):(rt=K,K=x),K}function A3(){var K,et,at;return K=rt,Zt(),i.charCodeAt(rt)===33?(et=l,rt++):(et=x,Vt===0&&Yt(fe)),et!==x?(at=Hi(),at===x&&(at=null),jt=K,K=BS(at)):(rt=K,K=x),K}function F3(){var K,et,at,vt,zt,Se,gi;return K=rt,i.charCodeAt(rt)===40?(et=c,rt++):(et=x,Vt===0&&Yt(Kt)),et!==x?(Zt(),at=gn(),at!==x?(Zt(),vt=Os(),vt!==x?(Zt(),zt=gn(),zt!==x?(Zt(),Os(),Zt(),Se=gn(),Se===x&&(Se=null),Zt(),i.charCodeAt(rt)===41?(gi=d,rt++):(gi=x,Vt===0&&Yt(ye)),gi!==x?(jt=K,K=XS(at,zt,Se)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function R3(){var K,et,at;return K=rt,i.charCodeAt(rt)===47?(et=f,rt++):(et=x,Vt===0&&Yt(Le)),et!==x?(at=Vs(),at!==x?(jt=K,K=IS(at)):(rt=K,K=x)):(rt=K,K=x),K}function L3(){var K,et,at;return K=rt,i.charCodeAt(rt)===42?(et=m,rt++):(et=x,Vt===0&&Yt(ei)),et!==x?(at=Vs(),at!==x?(jt=K,K=OS(at)):(rt=K,K=x)):(rt=K,K=x),K}function b3(){var K,et,at;return K=rt,i.charCodeAt(rt)===63?(et=y,rt++):(et=x,Vt===0&&Yt(nr)),et!==x?(at=Hi(),at===x&&(at=null),jt=K,K=NS(at)):(rt=K,K=x),K}function D3(){var K,et,at;return K=rt,i.charCodeAt(rt)===58?(et=S,rt++):(et=x,Vt===0&&Yt(Aa)),et!==x?(at=Vs(),at!==x?(jt=K,K=VS(at)):(rt=K,K=x)):(rt=K,K=x),K}function G3(){var K,et,at;return K=rt,i.substr(rt,2)===C?(et=C,rt+=2):(et=x,Vt===0&&Yt(Fa)),et!==x?(at=Vs(),at!==x?(jt=K,K=zS(at)):(rt=K,K=x)):(rt=K,K=x),K}function gn(){var K,et,at,vt;if(K=rt,et=Vs(),et!==x){for(at=[],vt=Bu();vt!==x;)at.push(vt),vt=Bu();jt=K,K=WS(et,at)}else rt=K,K=x;return K}function is(){var K,et,at,vt;if(K=rt,i.charCodeAt(rt)===94?(et=E,rt++):(et=x,Vt===0&&Yt(H)),et===x&&(et=null),at=[],vt=gn(),vt!==x)for(;vt!==x;)at.push(vt),vt=gn();else at=x;return at!==x?(jt=K,K=YS(et,at)):(rt=K,K=x),K}function Xu(){var K,et,at,vt,zt;if(K=rt,et=[],at=rt,vt=Os(),vt!==x?(zt=is(),zt!==x?at=zt:(rt=at,at=x)):(rt=at,at=x),at!==x)for(;at!==x;)et.push(at),at=rt,vt=Os(),vt!==x?(zt=is(),zt!==x?at=zt:(rt=at,at=x)):(rt=at,at=x);else et=x;return et!==x&&(jt=K,et=ZS(et)),K=et,K}function w3(){var K,et,at,vt,zt;if(K=rt,et=[],at=rt,vt=Du(),vt!==x?(zt=is(),zt!==x?at=zt:(rt=at,at=x)):(rt=at,at=x),at!==x)for(;at!==x;)et.push(at),at=rt,vt=Du(),vt!==x?(zt=is(),zt!==x?at=zt:(rt=at,at=x)):(rt=at,at=x);else et=x;return et!==x&&(jt=K,et=US(et)),K=et,K}function B3(){var K,et,at,vt,zt;if(K=rt,et=[],at=rt,vt=Gu(),vt!==x?(zt=is(),zt!==x?at=zt:(rt=at,at=x)):(rt=at,at=x),at!==x)for(;at!==x;)et.push(at),at=rt,vt=Gu(),vt!==x?(zt=is(),zt!==x?at=zt:(rt=at,at=x)):(rt=at,at=x);else et=x;return et!==x&&(jt=K,et=HS(et)),K=et,K}function Iu(){var K,et,at;return K=rt,et=is(),et!==x?(at=Xu(),at===x&&(at=w3(),at===x&&(at=B3())),at===x&&(at=null),jt=K,K=KS(et,at)):(rt=K,K=x),K}function Ou(){var K,et,at;return K=rt,et=is(),et!==x?(at=Xu(),at===x&&(at=null),jt=K,K=JS(et,at)):(rt=K,K=x),K}function X3(){var K,et,at,vt;return K=rt,Zt(),et=Ns(),et!==x?(Zt(),at=Iu(),at!==x?(Zt(),vt=Ns(),vt!==x?(jt=K,K=kS(at)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function I3(){var K;return K=U3(),K===x&&(K=z3(),K===x&&(K=Z3(),K===x&&(K=N3(),K===x&&(K=V3(),K===x&&(K=O3(),K===x&&(K=Y3(),K===x&&(K=W3()))))))),K}function O3(){var K,et,at;return K=rt,i.substr(rt,6)===P?(et=P,rt+=6):(et=x,Vt===0&&Yt($)),et!==x?(Zt(),at=zs(),at!==x?(jt=K,K=jS(at)):(rt=K,K=x)):(rt=K,K=x),K}function N3(){var K,et,at,vt,zt;return K=rt,i.substr(rt,6)===A?(et=A,rt+=6):(et=x,Vt===0&&Yt(Q)),et!==x?(Zt(),at=Ns(),at!==x?(vt=wu(),vt!==x?(zt=Ns(),zt!==x?(jt=K,K=QS(vt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function V3(){var K,et,at,vt;return K=rt,i.substr(rt,6)===R?(et=R,rt+=6):(et=x,Vt===0&&Yt(q)),et!==x?(Zt(),at=hr(),at!==x?(Zt(),vt=hr(),vt!==x?(Zt(),hr(),jt=K,K=$S(at,vt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function z3(){var K,et,at;return K=rt,i.substr(rt,4)===G?(et=G,rt+=4):(et=x,Vt===0&&Yt(it)),et!==x?(Zt(),at=Hi(),at!==x?(jt=K,K=qS(at)):(rt=K,K=x)):(rt=K,K=x),K}function W3(){var K,et,at;return K=rt,i.substr(rt,4)===b?(et=b,rt+=4):(et=x,Vt===0&&Yt(pt)),et!==x?(Zt(),at=Hi(),at!==x?(jt=K,K=_S(at)):(rt=K,K=x)):(rt=K,K=x),K}function Y3(){var K,et,at;return K=rt,i.substr(rt,4)===L?(et=L,rt+=4):(et=x,Vt===0&&Yt(mt)),et!==x?(Zt(),at=Hi(),at!==x?(jt=K,K=t3(at)):(rt=K,K=x)):(rt=K,K=x),K}function Z3(){var K,et,at;return K=rt,i.substr(rt,4)===w?(et=w,rt+=4):(et=x,Vt===0&&Yt(Mt)),et!==x?(Zt(),at=Hi(),at!==x?(jt=K,K=e3(at)):(rt=K,K=x)):(rt=K,K=x),K}function U3(){var K,et,at,vt,zt;if(K=rt,i.substr(rt,5)===B?(et=B,rt+=5):(et=x,Vt===0&&Yt(Gt)),et!==x)if(Zt(),at=Ns(),at!==x){if(vt=[],zt=ur(),zt!==x)for(;zt!==x;)vt.push(zt),zt=ur();else vt=x;vt!==x?(zt=Ns(),zt!==x?(jt=K,K=i3(vt)):(rt=K,K=x)):(rt=K,K=x)}else rt=K,K=x;else rt=K,K=x;return K}function ba(){var K,et,at,vt;if(K=rt,i.substr(rt,2)===N?(et=N,rt+=2):(et=x,Vt===0&&Yt(te)),et!==x){for(at=[],vt=i.charAt(rt),ht.test(vt)?rt++:(vt=x,Vt===0&&Yt(Ae));vt!==x;)at.push(vt),vt=i.charAt(rt),ht.test(vt)?rt++:(vt=x,Vt===0&&Yt(Ae));et=[et,at],K=et}else rt=K,K=x;return K}function H3(){var K,et,at,vt,zt,Se,gi,Ws;if(K=rt,i.substr(rt,3)===Y?(et=Y,rt+=3):(et=x,Vt===0&&Yt(Zi)),et!==x)if(Zt(),i.charCodeAt(rt)===91?(at=o,rt++):(at=x,Vt===0&&Yt(Bt)),at!==x)if(Zt(),vt=zs(),vt!==x){for(zt=[],Se=rt,gi=Os(),gi!==x?(Ws=zs(),Ws!==x?(jt=Se,Se=Fu(vt,Ws)):(rt=Se,Se=x)):(rt=Se,Se=x);Se!==x;)zt.push(Se),Se=rt,gi=Os(),gi!==x?(Ws=zs(),Ws!==x?(jt=Se,Se=Fu(vt,Ws)):(rt=Se,Se=x)):(rt=Se,Se=x);Se=Zt(),i.charCodeAt(rt)===93?(gi=a,rt++):(gi=x,Vt===0&&Yt(le)),gi!==x?(jt=K,K=s3(vt,zt)):(rt=K,K=x)}else rt=K,K=x;else rt=K,K=x;else rt=K,K=x;return K}function K3(){var K;return K=H3(),K===x&&(K=X3()),K}function zs(){var K,et,at,vt,zt;if(K=rt,et=K3(),et!==x){for(Zt(),at=[],vt=ba();vt!==x;)at.push(vt),vt=ba();jt=K,K=n3(et)}else rt=K,K=x;return K===x&&(K=rt,et=I3(),et!==x?(Zt(),i.charCodeAt(rt)===36?(at=U,rt++):(at=x,Vt===0&&Yt(es)),at!==x?(vt=Zt(),zt=zs(),zt!==x?(jt=K,K=r3(et,zt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)),K}function J3(){var K,et;return K=rt,et=zs(),et!==x&&(jt=K,et=a3(et)),K=et,K===x&&(K=ba()),K}function k3(){var K;return K=J3(),K}function j3(){var K,et;return K=rt,Zt(),et=Q3(),et===x&&(et=$3(),et===x&&(et=q3())),et!==x?(Zt(),jt=K,K=o3(et)):(rt=K,K=x),K}function Q3(){var K,et,at;return K=rt,i.substr(rt,6)===W?(et=W,rt+=6):(et=x,Vt===0&&Yt(rr)),et!==x?(Zt(),at=Hi(),at!==x?(jt=K,K=h3(at)):(rt=K,K=x)):(rt=K,K=x),K}function $3(){var K,et,at;return K=rt,i.substr(rt,6)===O?(et=O,rt+=6):(et=x,Vt===0&&Yt(ar)),et!==x?(Zt(),at=Hi(),at!==x?(jt=K,K=u3(at)):(rt=K,K=x)):(rt=K,K=x),K}function q3(){var K,et;return K=rt,i.substr(rt,4)===V?(et=V,rt+=4):(et=x,Vt===0&&Yt(oi)),et!==x&&(jt=K,et=l3()),K=et,K}function _3(){var K;return K=k3(),K===x&&(K=j3()),K}var tT=function(K){this.type_="atom",this.source_=K,this.location_=Ru()},lr=function(K,et,at,vt){this.type_="pattern",this.arguments_={alignment:et,_steps:vt},at!==void 0&&(this.arguments_.seed=at),this.source_=K},eT=function(K,et,at){this.type_=K,this.arguments_=et,this.source_=at},iT=function(K,et){this.type_="element",this.source_=K,this.options_=et,this.location_=Ru()},Da=function(K,et){this.type_="command",this.name_=K,this.options_=et},Ga=0;if(mn=D(),v.peg$library)return{peg$result:mn,peg$currPos:rt,peg$FAILED:x,peg$maxFailExpected:or,peg$maxFailPos:mi};if(mn!==x&&rt===i.length)return mn;throw mn!==x&&rt<i.length&&Yt(d3()),c3(or,mi<i.length?i.charAt(mi):null,mi<i.length?La(mi,mi+1):La(mi,mi))}const qb=["start"],yM=3e-4,_b=(i,v)=>(x,T)=>{const F=i.source_[T].options_?.ops,D=x.__steps_source;if(F)for(const p of F)switch(p.type_){case"stretch":{const M=["fast","slow"],{type:t,amount:h}=p.arguments_;if(!M.includes(t))throw new Error(`mini: stretch: type must be one of ${M.join("|")} but got ${t}`);x=Ct(x)[t](v(h));break}case"replicate":{const{amount:M}=p.arguments_;x=Ct(x),x=x._repeatCycles(M)._fast(M);break}case"bjorklund":{p.arguments_.rotation?x=x.euclidRot(v(p.arguments_.pulse),v(p.arguments_.step),v(p.arguments_.rotation)):x=x.euclid(v(p.arguments_.pulse),v(p.arguments_.step));break}case"degradeBy":{x=Ct(x)._degradeByWith(ke.early(yM*p.arguments_.seed),p.arguments_.amount??.5);break}case"tail":{const M=v(p.arguments_.element);x=x.fmap(t=>h=>Array.isArray(t)?[...t,h]:[t,h]).appLeft(M);break}case"range":{const M=v(p.arguments_.element);x=Ct(x);const t=(h,g,o=1)=>Array.from({length:Math.abs(g-h)/o+1},(a,r)=>h<g?h+r*o:h-r*o);x=((h,g)=>h.squeezeBind(o=>g.bind(a=>He(...t(o,a)))))(x,M);break}default:console.warn(`operator "${p.type_}" not implemented`)}return x.__steps_source=x.__steps_source||D,x};function an(i,v,x,T=0){x?.(i);const F=D=>an(D,v,x,T);switch(i.type_){case"pattern":{const D=i.source_.map(h=>F(h)).map(_b(i,F)),p=i.arguments_.alignment,M=D.filter(h=>h.__steps_source);let t;switch(p){case"stack":{t=xe(...D),M.length&&(t._steps=Ti(...M.map(h=>St(h._steps))));break}case"polymeter_slowcat":{t=xe(...D.map(h=>h._slow(h.__weight))),M.length&&(t._steps=Ti(...M.map(h=>St(h._steps))));break}case"polymeter":{const h=i.arguments_.stepsPerCycle?F(i.arguments_.stepsPerCycle).fmap(o=>St(o)):ge(St(D.length>0?D[0].__weight:1)),g=D.map(o=>o.fast(h.fmap(a=>a.div(o.__weight))));t=xe(...g);break}case"rand":{t=qr(ke.early(yM*i.arguments_.seed).segment(1),D),M.length&&(t._steps=Ti(...M.map(h=>St(h._steps))));break}case"feet":{t=He(...D);break}default:{if(i.source_.some(h=>!!h.options_?.weight)){const h=i.source_.reduce((g,o)=>g.add(o.options_?.weight||St(1)),St(0));t=rh(...i.source_.map((g,o)=>[g.options_?.weight||St(1),D[o]])),t.__weight=h,t._steps=h,M.length&&(t._steps=t._steps.mul(Ti(...M.map(g=>St(g._steps)))))}else t=Fi(...D),t._steps=D.length;i.arguments_._steps&&(t.__steps_source=!0)}}return M.length&&(t.__steps_source=!0),t}case"element":return F(i.source_);case"atom":{if(i.source_==="~"||i.source_==="-")return ce;if(!i.location_)return console.warn("no location for",i),i.source_;const D=isNaN(Number(i.source_))?i.source_:Number(i.source_);if(T===-1)return ge(D);const[p,M]=Yh(v,i,T);return ge(D).withLoc(p,M)}case"stretch":return F(i.source_).slow(F(i.arguments_.amount));default:return console.warn(`node type "${i.type_}" not implemented -> returning silence`),ce}}const Yh=(i,v,x=0)=>{const{start:T,end:F}=v.location_,D=i?.split("").slice(T.offset,F.offset).join(""),[p=0,M=0]=D?D.split(v.source_).map(t=>t.split("").filter(h=>h===" ").length):[];return[T.offset+p+x,F.offset-M+x]},qn=(i,v=0,x=i)=>{try{return xM(i)}catch(T){const F=[T.location.start.offset+v,T.location.end.offset+v],D=x.slice(0,F[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${D}: ${T.message}`)}},MM=(i,v,x)=>{const T=qn(i,v,x);let F=[];return an(T,i,D=>{D.type_==="atom"&&F.push(D)},-1),F},Zh=(i,v=0,x)=>MM(i,v,x).map(T=>Yh(i,T,v)),Uh=(...i)=>{const v=i.map(x=>{const T=`"${x}"`,F=qn(T);return an(F,T)});return Fi(...v)},tD=(i,v)=>{const x=`"${i}"`,T=qn(x);return an(T,x,null,v)},eD=i=>{const v=qn(i);return an(v,i)};function iD(i){return typeof i=="string"?Uh(i):Ct(i)}function CM(){Hf(Uh)}const sD=Object.freeze(Object.defineProperty({__proto__:null,StartRules:qb,SyntaxError:Rs,getLeafLocation:Yh,getLeafLocations:Zh,getLeaves:MM,h:eD,m:tD,mini:Uh,mini2ast:qn,miniAllStrings:CM,minify:iD,parse:xM,patternifyAST:an},Symbol.toStringTag,{value:"Module"}));var nD=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],SM=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],rD="-----------------------------------------------------------------------------------------------------------------------------------------------------",TM="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Ha={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Ka="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",aD={5:Ka,"5module":Ka+" export import",6:Ka+" const class extends export import super"},oD=/^in(stanceof)?$/,hD=new RegExp("["+TM+"]"),uD=new RegExp("["+TM+rD+"]");function Do(i,v){for(var x=65536,T=0;T<v.length;T+=2){if(x+=v[T],x>i)return!1;if(x+=v[T+1],x>=i)return!0}return!1}function $i(i,v){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&hD.test(String.fromCharCode(i)):v===!1?!1:Do(i,SM)}function tn(i,v){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&uD.test(String.fromCharCode(i)):v===!1?!1:Do(i,SM)||Do(i,nD)}var ue=function(i,v){v===void 0&&(v={}),this.label=i,this.keyword=v.keyword,this.beforeExpr=!!v.beforeExpr,this.startsExpr=!!v.startsExpr,this.isLoop=!!v.isLoop,this.isAssign=!!v.isAssign,this.prefix=!!v.prefix,this.postfix=!!v.postfix,this.binop=v.binop||null,this.updateContext=null};function hi(i,v){return new ue(i,{beforeExpr:!0,binop:v})}var ui={beforeExpr:!0},$e={startsExpr:!0},Hh={};function oe(i,v){return v===void 0&&(v={}),v.keyword=i,Hh[i]=new ue(i,v)}var _={num:new ue("num",$e),regexp:new ue("regexp",$e),string:new ue("string",$e),name:new ue("name",$e),privateId:new ue("privateId",$e),eof:new ue("eof"),bracketL:new ue("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ue("]"),braceL:new ue("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ue("}"),parenL:new ue("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ue(")"),comma:new ue(",",ui),semi:new ue(";",ui),colon:new ue(":",ui),dot:new ue("."),question:new ue("?",ui),questionDot:new ue("?."),arrow:new ue("=>",ui),template:new ue("template"),invalidTemplate:new ue("invalidTemplate"),ellipsis:new ue("...",ui),backQuote:new ue("`",$e),dollarBraceL:new ue("${",{beforeExpr:!0,startsExpr:!0}),eq:new ue("=",{beforeExpr:!0,isAssign:!0}),assign:new ue("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ue("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ue("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:hi("||",1),logicalAND:hi("&&",2),bitwiseOR:hi("|",3),bitwiseXOR:hi("^",4),bitwiseAND:hi("&",5),equality:hi("==/!=/===/!==",6),relational:hi("</>/<=/>=",7),bitShift:hi("<</>>/>>>",8),plusMin:new ue("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:hi("%",10),star:hi("*",10),slash:hi("/",10),starstar:new ue("**",{beforeExpr:!0}),coalesce:hi("??",1),_break:oe("break"),_case:oe("case",ui),_catch:oe("catch"),_continue:oe("continue"),_debugger:oe("debugger"),_default:oe("default",ui),_do:oe("do",{isLoop:!0,beforeExpr:!0}),_else:oe("else",ui),_finally:oe("finally"),_for:oe("for",{isLoop:!0}),_function:oe("function",$e),_if:oe("if"),_return:oe("return",ui),_switch:oe("switch"),_throw:oe("throw",ui),_try:oe("try"),_var:oe("var"),_const:oe("const"),_while:oe("while",{isLoop:!0}),_with:oe("with"),_new:oe("new",{beforeExpr:!0,startsExpr:!0}),_this:oe("this",$e),_super:oe("super",$e),_class:oe("class",$e),_extends:oe("extends",ui),_export:oe("export"),_import:oe("import",$e),_null:oe("null",$e),_true:oe("true",$e),_false:oe("false",$e),_in:oe("in",{beforeExpr:!0,binop:7}),_instanceof:oe("instanceof",{beforeExpr:!0,binop:7}),_typeof:oe("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:oe("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:oe("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},pi=/\r\n?|\n|\u2028|\u2029/,lD=new RegExp(pi.source,"g");function on(i){return i===10||i===13||i===8232||i===8233}function EM(i,v,x){x===void 0&&(x=i.length);for(var T=v;T<x;T++){var F=i.charCodeAt(T);if(on(F))return T<x-1&&F===13&&i.charCodeAt(T+1)===10?T+2:T+1}return-1}var PM=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,li=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,AM=Object.prototype,fD=AM.hasOwnProperty,dD=AM.toString,hn=Object.hasOwn||function(i,v){return fD.call(i,v)},vl=Array.isArray||function(i){return dD.call(i)==="[object Array]"},ml=Object.create(null);function ls(i){return ml[i]||(ml[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function qi(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var cD=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Un=function(i,v){this.line=i,this.column=v};Un.prototype.offset=function(i){return new Un(this.line,this.column+i)};var sa=function(i,v,x){this.start=v,this.end=x,i.sourceFile!==null&&(this.source=i.sourceFile)};function FM(i,v){for(var x=1,T=0;;){var F=EM(i,T,v);if(F<0)return new Un(x,v-T);++x,T=F}}var Go={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},gl=!1;function pD(i){var v={};for(var x in Go)v[x]=i&&hn(i,x)?i[x]:Go[x];if(v.ecmaVersion==="latest"?v.ecmaVersion=1e8:v.ecmaVersion==null?(!gl&&typeof console=="object"&&console.warn&&(gl=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),v.ecmaVersion=11):v.ecmaVersion>=2015&&(v.ecmaVersion-=2009),v.allowReserved==null&&(v.allowReserved=v.ecmaVersion<5),(!i||i.allowHashBang==null)&&(v.allowHashBang=v.ecmaVersion>=14),vl(v.onToken)){var T=v.onToken;v.onToken=function(F){return T.push(F)}}return vl(v.onComment)&&(v.onComment=vD(v,v.onComment)),v}function vD(i,v){return function(x,T,F,D,p,M){var t={type:x?"Block":"Line",value:T,start:F,end:D};i.locations&&(t.loc=new sa(this,p,M)),i.ranges&&(t.range=[F,D]),v.push(t)}}var Hn=1,un=2,Kh=4,RM=8,LM=16,bM=32,Jh=64,DM=128,_n=256,kh=Hn|un|_n;function jh(i,v){return un|(i?Kh:0)|(v?RM:0)}var Xr=0,Qh=1,ts=2,GM=3,wM=4,BM=5,we=function(i,v,x){this.options=i=pD(i),this.sourceFile=i.sourceFile,this.keywords=ls(aD[i.ecmaVersion>=6?6:i.sourceType==="module"?"5module":5]);var T="";i.allowReserved!==!0&&(T=Ha[i.ecmaVersion>=6?6:i.ecmaVersion===5?5:3],i.sourceType==="module"&&(T+=" await")),this.reservedWords=ls(T);var F=(T?T+" ":"")+Ha.strict;this.reservedWordsStrict=ls(F),this.reservedWordsStrictBind=ls(F+" "+Ha.strictBind),this.input=String(v),this.containsEsc=!1,x?(this.pos=x,this.lineStart=this.input.lastIndexOf(`
`,x-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(pi).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=_.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=i.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&i.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Hn),this.regexpState=null,this.privateNameStack=[]},Wi={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};we.prototype.parse=function(){var i=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(i)};Wi.inFunction.get=function(){return(this.currentVarScope().flags&un)>0};Wi.inGenerator.get=function(){return(this.currentVarScope().flags&RM)>0&&!this.currentVarScope().inClassFieldInit};Wi.inAsync.get=function(){return(this.currentVarScope().flags&Kh)>0&&!this.currentVarScope().inClassFieldInit};Wi.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var v=this.scopeStack[i];if(v.inClassFieldInit||v.flags&_n)return!1;if(v.flags&un)return(v.flags&Kh)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Wi.allowSuper.get=function(){var i=this.currentThisScope(),v=i.flags,x=i.inClassFieldInit;return(v&Jh)>0||x||this.options.allowSuperOutsideMethod};Wi.allowDirectSuper.get=function(){return(this.currentThisScope().flags&DM)>0};Wi.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Wi.allowNewDotTarget.get=function(){var i=this.currentThisScope(),v=i.flags,x=i.inClassFieldInit;return(v&(un|_n))>0||x};Wi.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&_n)>0};we.extend=function(){for(var i=[],v=arguments.length;v--;)i[v]=arguments[v];for(var x=this,T=0;T<i.length;T++)x=i[T](x);return x};we.parse=function(i,v){return new this(v,i).parse()};we.parseExpressionAt=function(i,v,x){var T=new this(x,i,v);return T.nextToken(),T.parseExpression()};we.tokenizer=function(i,v){return new this(v,i)};Object.defineProperties(we.prototype,Wi);var Qe=we.prototype,mD=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Qe.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){li.lastIndex=i,i+=li.exec(this.input)[0].length;var v=mD.exec(this.input.slice(i));if(!v)return!1;if((v[1]||v[2])==="use strict"){li.lastIndex=i+v[0].length;var x=li.exec(this.input),T=x.index+x[0].length,F=this.input.charAt(T);return F===";"||F==="}"||pi.test(x[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(F)||F==="!"&&this.input.charAt(T+1)==="=")}i+=v[0].length,li.lastIndex=i,i+=li.exec(this.input)[0].length,this.input[i]===";"&&i++}};Qe.eat=function(i){return this.type===i?(this.next(),!0):!1};Qe.isContextual=function(i){return this.type===_.name&&this.value===i&&!this.containsEsc};Qe.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1};Qe.expectContextual=function(i){this.eatContextual(i)||this.unexpected()};Qe.canInsertSemicolon=function(){return this.type===_.eof||this.type===_.braceR||pi.test(this.input.slice(this.lastTokEnd,this.start))};Qe.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Qe.semicolon=function(){!this.eat(_.semi)&&!this.insertSemicolon()&&this.unexpected()};Qe.afterTrailingComma=function(i,v){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),v||this.next(),!0};Qe.expect=function(i){this.eat(i)||this.unexpected()};Qe.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var na=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Qe.checkPatternErrors=function(i,v){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var x=v?i.parenthesizedAssign:i.parenthesizedBind;x>-1&&this.raiseRecoverable(x,v?"Assigning to rvalue":"Parenthesized pattern")}};Qe.checkExpressionErrors=function(i,v){if(!i)return!1;var x=i.shorthandAssign,T=i.doubleProto;if(!v)return x>=0||T>=0;x>=0&&this.raise(x,"Shorthand property assignments are valid only in destructuring patterns"),T>=0&&this.raiseRecoverable(T,"Redefinition of __proto__ property")};Qe.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Qe.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var Nt=we.prototype;Nt.parseTopLevel=function(i){var v=Object.create(null);for(i.body||(i.body=[]);this.type!==_.eof;){var x=this.parseStatement(null,!0,v);i.body.push(x)}if(this.inModule)for(var T=0,F=Object.keys(this.undefinedExports);T<F.length;T+=1){var D=F[T];this.raiseRecoverable(this.undefinedExports[D].start,"Export '"+D+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var $h={kind:"loop"},gD={kind:"switch"};Nt.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;li.lastIndex=this.pos;var v=li.exec(this.input),x=this.pos+v[0].length,T=this.input.charCodeAt(x);if(T===91||T===92)return!0;if(i)return!1;if(T===123||T>55295&&T<56320)return!0;if($i(T,!0)){for(var F=x+1;tn(T=this.input.charCodeAt(F),!0);)++F;if(T===92||T>55295&&T<56320)return!0;var D=this.input.slice(x,F);if(!oD.test(D))return!0}return!1};Nt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;li.lastIndex=this.pos;var i=li.exec(this.input),v=this.pos+i[0].length,x;return!pi.test(this.input.slice(this.pos,v))&&this.input.slice(v,v+8)==="function"&&(v+8===this.input.length||!(tn(x=this.input.charCodeAt(v+8))||x>55295&&x<56320))};Nt.parseStatement=function(i,v,x){var T=this.type,F=this.startNode(),D;switch(this.isLet(i)&&(T=_._var,D="let"),T){case _._break:case _._continue:return this.parseBreakContinueStatement(F,T.keyword);case _._debugger:return this.parseDebuggerStatement(F);case _._do:return this.parseDoStatement(F);case _._for:return this.parseForStatement(F);case _._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(F,!1,!i);case _._class:return i&&this.unexpected(),this.parseClass(F,!0);case _._if:return this.parseIfStatement(F);case _._return:return this.parseReturnStatement(F);case _._switch:return this.parseSwitchStatement(F);case _._throw:return this.parseThrowStatement(F);case _._try:return this.parseTryStatement(F);case _._const:case _._var:return D=D||this.value,i&&D!=="var"&&this.unexpected(),this.parseVarStatement(F,D);case _._while:return this.parseWhileStatement(F);case _._with:return this.parseWithStatement(F);case _.braceL:return this.parseBlock(!0,F);case _.semi:return this.parseEmptyStatement(F);case _._export:case _._import:if(this.options.ecmaVersion>10&&T===_._import){li.lastIndex=this.pos;var p=li.exec(this.input),M=this.pos+p[0].length,t=this.input.charCodeAt(M);if(t===40||t===46)return this.parseExpressionStatement(F,this.parseExpression())}return this.options.allowImportExportEverywhere||(v||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),T===_._import?this.parseImport(F):this.parseExport(F,x);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(F,!0,!i);var h=this.value,g=this.parseExpression();return T===_.name&&g.type==="Identifier"&&this.eat(_.colon)?this.parseLabeledStatement(F,h,g,i):this.parseExpressionStatement(F,g)}};Nt.parseBreakContinueStatement=function(i,v){var x=v==="break";this.next(),this.eat(_.semi)||this.insertSemicolon()?i.label=null:this.type!==_.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var T=0;T<this.labels.length;++T){var F=this.labels[T];if((i.label==null||F.name===i.label.name)&&(F.kind!=null&&(x||F.kind==="loop")||i.label&&x))break}return T===this.labels.length&&this.raise(i.start,"Unsyntactic "+v),this.finishNode(i,x?"BreakStatement":"ContinueStatement")};Nt.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")};Nt.parseDoStatement=function(i){return this.next(),this.labels.push($h),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(_._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(_.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")};Nt.parseForStatement=function(i){this.next();var v=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push($h),this.enterScope(0),this.expect(_.parenL),this.type===_.semi)return v>-1&&this.unexpected(v),this.parseFor(i,null);var x=this.isLet();if(this.type===_._var||this.type===_._const||x){var T=this.startNode(),F=x?"let":this.value;return this.next(),this.parseVar(T,!0,F),this.finishNode(T,"VariableDeclaration"),(this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&T.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===_._in?v>-1&&this.unexpected(v):i.await=v>-1),this.parseForIn(i,T)):(v>-1&&this.unexpected(v),this.parseFor(i,T))}var D=this.isContextual("let"),p=!1,M=this.containsEsc,t=new na,h=this.start,g=v>-1?this.parseExprSubscripts(t,"await"):this.parseExpression(!0,t);return this.type===_._in||(p=this.options.ecmaVersion>=6&&this.isContextual("of"))?(v>-1?(this.type===_._in&&this.unexpected(v),i.await=!0):p&&this.options.ecmaVersion>=8&&(g.start===h&&!M&&g.type==="Identifier"&&g.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(i.await=!1)),D&&p&&this.raise(g.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(g,!1,t),this.checkLValPattern(g),this.parseForIn(i,g)):(this.checkExpressionErrors(t,!0),v>-1&&this.unexpected(v),this.parseFor(i,g))};Nt.parseFunctionStatement=function(i,v,x){return this.next(),this.parseFunction(i,Dn|(x?0:wo),!1,v)};Nt.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(_._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")};Nt.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(_.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")};Nt.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(_.braceL),this.labels.push(gD),this.enterScope(0);for(var v,x=!1;this.type!==_.braceR;)if(this.type===_._case||this.type===_._default){var T=this.type===_._case;v&&this.finishNode(v,"SwitchCase"),i.cases.push(v=this.startNode()),v.consequent=[],this.next(),T?v.test=this.parseExpression():(x&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),x=!0,v.test=null),this.expect(_.colon)}else v||this.unexpected(),v.consequent.push(this.parseStatement(null));return this.exitScope(),v&&this.finishNode(v,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")};Nt.parseThrowStatement=function(i){return this.next(),pi.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var xD=[];Nt.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),v=i.type==="Identifier";return this.enterScope(v?bM:0),this.checkLValPattern(i,v?wM:ts),this.expect(_.parenR),i};Nt.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===_._catch){var v=this.startNode();this.next(),this.eat(_.parenL)?v.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),v.param=null,this.enterScope(0)),v.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(v,"CatchClause")}return i.finalizer=this.eat(_._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")};Nt.parseVarStatement=function(i,v,x){return this.next(),this.parseVar(i,!1,v,x),this.semicolon(),this.finishNode(i,"VariableDeclaration")};Nt.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push($h),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")};Nt.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")};Nt.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")};Nt.parseLabeledStatement=function(i,v,x,T){for(var F=0,D=this.labels;F<D.length;F+=1){var p=D[F];p.name===v&&this.raise(x.start,"Label '"+v+"' is already declared")}for(var M=this.type.isLoop?"loop":this.type===_._switch?"switch":null,t=this.labels.length-1;t>=0;t--){var h=this.labels[t];if(h.statementStart===i.start)h.statementStart=this.start,h.kind=M;else break}return this.labels.push({name:v,kind:M,statementStart:this.start}),i.body=this.parseStatement(T?T.indexOf("label")===-1?T+"label":T:"label"),this.labels.pop(),i.label=x,this.finishNode(i,"LabeledStatement")};Nt.parseExpressionStatement=function(i,v){return i.expression=v,this.semicolon(),this.finishNode(i,"ExpressionStatement")};Nt.parseBlock=function(i,v,x){for(i===void 0&&(i=!0),v===void 0&&(v=this.startNode()),v.body=[],this.expect(_.braceL),i&&this.enterScope(0);this.type!==_.braceR;){var T=this.parseStatement(null);v.body.push(T)}return x&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(v,"BlockStatement")};Nt.parseFor=function(i,v){return i.init=v,this.expect(_.semi),i.test=this.type===_.semi?null:this.parseExpression(),this.expect(_.semi),i.update=this.type===_.parenR?null:this.parseExpression(),this.expect(_.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")};Nt.parseForIn=function(i,v){var x=this.type===_._in;return this.next(),v.type==="VariableDeclaration"&&v.declarations[0].init!=null&&(!x||this.options.ecmaVersion<8||this.strict||v.kind!=="var"||v.declarations[0].id.type!=="Identifier")&&this.raise(v.start,(x?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=v,i.right=x?this.parseExpression():this.parseMaybeAssign(),this.expect(_.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,x?"ForInStatement":"ForOfStatement")};Nt.parseVar=function(i,v,x,T){for(i.declarations=[],i.kind=x;;){var F=this.startNode();if(this.parseVarId(F,x),this.eat(_.eq)?F.init=this.parseMaybeAssign(v):!T&&x==="const"&&!(this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!T&&F.id.type!=="Identifier"&&!(v&&(this.type===_._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):F.init=null,i.declarations.push(this.finishNode(F,"VariableDeclarator")),!this.eat(_.comma))break}return i};Nt.parseVarId=function(i,v){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,v==="var"?Qh:ts,!1)};var Dn=1,wo=2,XM=4;Nt.parseFunction=function(i,v,x,T,F){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!T)&&(this.type===_.star&&v&wo&&this.unexpected(),i.generator=this.eat(_.star)),this.options.ecmaVersion>=8&&(i.async=!!T),v&Dn&&(i.id=v&XM&&this.type!==_.name?null:this.parseIdent(),i.id&&!(v&wo)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?Qh:ts:GM));var D=this.yieldPos,p=this.awaitPos,M=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(jh(i.async,i.generator)),v&Dn||(i.id=this.type===_.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,x,!1,F),this.yieldPos=D,this.awaitPos=p,this.awaitIdentPos=M,this.finishNode(i,v&Dn?"FunctionDeclaration":"FunctionExpression")};Nt.parseFunctionParams=function(i){this.expect(_.parenL),i.params=this.parseBindingList(_.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Nt.parseClass=function(i,v){this.next();var x=this.strict;this.strict=!0,this.parseClassId(i,v),this.parseClassSuper(i);var T=this.enterClassBody(),F=this.startNode(),D=!1;for(F.body=[],this.expect(_.braceL);this.type!==_.braceR;){var p=this.parseClassElement(i.superClass!==null);p&&(F.body.push(p),p.type==="MethodDefinition"&&p.kind==="constructor"?(D&&this.raiseRecoverable(p.start,"Duplicate constructor in the same class"),D=!0):p.key&&p.key.type==="PrivateIdentifier"&&yD(T,p)&&this.raiseRecoverable(p.key.start,"Identifier '#"+p.key.name+"' has already been declared"))}return this.strict=x,this.next(),i.body=this.finishNode(F,"ClassBody"),this.exitClassBody(),this.finishNode(i,v?"ClassDeclaration":"ClassExpression")};Nt.parseClassElement=function(i){if(this.eat(_.semi))return null;var v=this.options.ecmaVersion,x=this.startNode(),T="",F=!1,D=!1,p="method",M=!1;if(this.eatContextual("static")){if(v>=13&&this.eat(_.braceL))return this.parseClassStaticBlock(x),x;this.isClassElementNameStart()||this.type===_.star?M=!0:T="static"}if(x.static=M,!T&&v>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===_.star)&&!this.canInsertSemicolon()?D=!0:T="async"),!T&&(v>=9||!D)&&this.eat(_.star)&&(F=!0),!T&&!D&&!F){var t=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?p=t:T=t)}if(T?(x.computed=!1,x.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),x.key.name=T,this.finishNode(x.key,"Identifier")):this.parseClassElementName(x),v<13||this.type===_.parenL||p!=="method"||F||D){var h=!x.static&&Ir(x,"constructor"),g=h&&i;h&&p!=="method"&&this.raise(x.key.start,"Constructor can't have get/set modifier"),x.kind=h?"constructor":p,this.parseClassMethod(x,F,D,g)}else this.parseClassField(x);return x};Nt.isClassElementNameStart=function(){return this.type===_.name||this.type===_.privateId||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword};Nt.parseClassElementName=function(i){this.type===_.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)};Nt.parseClassMethod=function(i,v,x,T){var F=i.key;i.kind==="constructor"?(v&&this.raise(F.start,"Constructor can't be a generator"),x&&this.raise(F.start,"Constructor can't be an async method")):i.static&&Ir(i,"prototype")&&this.raise(F.start,"Classes may not have a static property named prototype");var D=i.value=this.parseMethod(v,x,T);return i.kind==="get"&&D.params.length!==0&&this.raiseRecoverable(D.start,"getter should have no params"),i.kind==="set"&&D.params.length!==1&&this.raiseRecoverable(D.start,"setter should have exactly one param"),i.kind==="set"&&D.params[0].type==="RestElement"&&this.raiseRecoverable(D.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")};Nt.parseClassField=function(i){if(Ir(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&Ir(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(_.eq)){var v=this.currentThisScope(),x=v.inClassFieldInit;v.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),v.inClassFieldInit=x}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")};Nt.parseClassStaticBlock=function(i){i.body=[];var v=this.labels;for(this.labels=[],this.enterScope(_n|Jh);this.type!==_.braceR;){var x=this.parseStatement(null);i.body.push(x)}return this.next(),this.exitScope(),this.labels=v,this.finishNode(i,"StaticBlock")};Nt.parseClassId=function(i,v){this.type===_.name?(i.id=this.parseIdent(),v&&this.checkLValSimple(i.id,ts,!1)):(v===!0&&this.unexpected(),i.id=null)};Nt.parseClassSuper=function(i){i.superClass=this.eat(_._extends)?this.parseExprSubscripts(null,!1):null};Nt.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared};Nt.exitClassBody=function(){var i=this.privateNameStack.pop(),v=i.declared,x=i.used;if(this.options.checkPrivateFields)for(var T=this.privateNameStack.length,F=T===0?null:this.privateNameStack[T-1],D=0;D<x.length;++D){var p=x[D];hn(v,p.name)||(F?F.used.push(p):this.raiseRecoverable(p.start,"Private field '#"+p.name+"' must be declared in an enclosing class"))}};function yD(i,v){var x=v.key.name,T=i[x],F="true";return v.type==="MethodDefinition"&&(v.kind==="get"||v.kind==="set")&&(F=(v.static?"s":"i")+v.kind),T==="iget"&&F==="iset"||T==="iset"&&F==="iget"||T==="sget"&&F==="sset"||T==="sset"&&F==="sget"?(i[x]="true",!1):T?!0:(i[x]=F,!1)}function Ir(i,v){var x=i.computed,T=i.key;return!x&&(T.type==="Identifier"&&T.name===v||T.type==="Literal"&&T.value===v)}Nt.parseExportAllDeclaration=function(i,v){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(v,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==_.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")};Nt.parseExport=function(i,v){if(this.next(),this.eat(_.star))return this.parseExportAllDeclaration(i,v);if(this.eat(_._default))return this.checkExport(v,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(v,i.declaration.declarations):this.checkExport(v,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(v),this.eatContextual("from"))this.type!==_.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause());else{for(var x=0,T=i.specifiers;x<T.length;x+=1){var F=T[x];this.checkUnreserved(F.local),this.checkLocalExport(F.local),F.local.type==="Literal"&&this.raise(F.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")};Nt.parseExportDeclaration=function(i){return this.parseStatement(null)};Nt.parseExportDefaultDeclaration=function(){var i;if(this.type===_._function||(i=this.isAsyncFunction())){var v=this.startNode();return this.next(),i&&this.next(),this.parseFunction(v,Dn|XM,!1,i)}else if(this.type===_._class){var x=this.startNode();return this.parseClass(x,"nullableID")}else{var T=this.parseMaybeAssign();return this.semicolon(),T}};Nt.checkExport=function(i,v,x){i&&(typeof v!="string"&&(v=v.type==="Identifier"?v.name:v.value),hn(i,v)&&this.raiseRecoverable(x,"Duplicate export '"+v+"'"),i[v]=!0)};Nt.checkPatternExport=function(i,v){var x=v.type;if(x==="Identifier")this.checkExport(i,v,v.start);else if(x==="ObjectPattern")for(var T=0,F=v.properties;T<F.length;T+=1){var D=F[T];this.checkPatternExport(i,D)}else if(x==="ArrayPattern")for(var p=0,M=v.elements;p<M.length;p+=1){var t=M[p];t&&this.checkPatternExport(i,t)}else x==="Property"?this.checkPatternExport(i,v.value):x==="AssignmentPattern"?this.checkPatternExport(i,v.left):x==="RestElement"&&this.checkPatternExport(i,v.argument)};Nt.checkVariableExport=function(i,v){if(i)for(var x=0,T=v;x<T.length;x+=1){var F=T[x];this.checkPatternExport(i,F.id)}};Nt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Nt.parseExportSpecifier=function(i){var v=this.startNode();return v.local=this.parseModuleExportName(),v.exported=this.eatContextual("as")?this.parseModuleExportName():v.local,this.checkExport(i,v.exported,v.exported.start),this.finishNode(v,"ExportSpecifier")};Nt.parseExportSpecifiers=function(i){var v=[],x=!0;for(this.expect(_.braceL);!this.eat(_.braceR);){if(x)x=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;v.push(this.parseExportSpecifier(i))}return v};Nt.parseImport=function(i){return this.next(),this.type===_.string?(i.specifiers=xD,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===_.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ImportDeclaration")};Nt.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,ts),this.finishNode(i,"ImportSpecifier")};Nt.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,ts),this.finishNode(i,"ImportDefaultSpecifier")};Nt.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,ts),this.finishNode(i,"ImportNamespaceSpecifier")};Nt.parseImportSpecifiers=function(){var i=[],v=!0;if(this.type===_.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(_.comma)))return i;if(this.type===_.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(_.braceL);!this.eat(_.braceR);){if(v)v=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;i.push(this.parseImportSpecifier())}return i};Nt.parseWithClause=function(){var i=[];if(!this.eat(_._with))return i;this.expect(_.braceL);for(var v={},x=!0;!this.eat(_.braceR);){if(x)x=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;var T=this.parseImportAttribute(),F=T.key.type==="Identifier"?T.key.name:T.key.value;hn(v,F)&&this.raiseRecoverable(T.key.start,"Duplicate attribute key '"+F+"'"),v[F]=!0,i.push(T)}return i};Nt.parseImportAttribute=function(){var i=this.startNode();return i.key=this.type===_.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(_.colon),this.type!==_.string&&this.unexpected(),i.value=this.parseExprAtom(),this.finishNode(i,"ImportAttribute")};Nt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===_.string){var i=this.parseLiteral(this.value);return cD.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)};Nt.adaptDirectivePrologue=function(i){for(var v=0;v<i.length&&this.isDirectiveCandidate(i[v]);++v)i[v].directive=i[v].expression.raw.slice(1,-1)};Nt.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var vi=we.prototype;vi.toAssignable=function(i,v,x){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",x&&this.checkPatternErrors(x,!0);for(var T=0,F=i.properties;T<F.length;T+=1){var D=F[T];this.toAssignable(D,v),D.type==="RestElement"&&(D.argument.type==="ArrayPattern"||D.argument.type==="ObjectPattern")&&this.raise(D.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,v);break;case"ArrayExpression":i.type="ArrayPattern",x&&this.checkPatternErrors(x,!0),this.toAssignableList(i.elements,v);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,v),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,v);break;case"ParenthesizedExpression":this.toAssignable(i.expression,v,x);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!v)break;default:this.raise(i.start,"Assigning to rvalue")}else x&&this.checkPatternErrors(x,!0);return i};vi.toAssignableList=function(i,v){for(var x=i.length,T=0;T<x;T++){var F=i[T];F&&this.toAssignable(F,v)}if(x){var D=i[x-1];this.options.ecmaVersion===6&&v&&D&&D.type==="RestElement"&&D.argument.type!=="Identifier"&&this.unexpected(D.argument.start)}return i};vi.parseSpread=function(i){var v=this.startNode();return this.next(),v.argument=this.parseMaybeAssign(!1,i),this.finishNode(v,"SpreadElement")};vi.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==_.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")};vi.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case _.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(_.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case _.braceL:return this.parseObj(!0)}return this.parseIdent()};vi.parseBindingList=function(i,v,x,T){for(var F=[],D=!0;!this.eat(i);)if(D?D=!1:this.expect(_.comma),v&&this.type===_.comma)F.push(null);else{if(x&&this.afterTrailingComma(i))break;if(this.type===_.ellipsis){var p=this.parseRestBinding();this.parseBindingListItem(p),F.push(p),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else F.push(this.parseAssignableListItem(T))}return F};vi.parseAssignableListItem=function(i){var v=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(v),v};vi.parseBindingListItem=function(i){return i};vi.parseMaybeDefault=function(i,v,x){if(x=x||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(_.eq))return x;var T=this.startNodeAt(i,v);return T.left=x,T.right=this.parseMaybeAssign(),this.finishNode(T,"AssignmentPattern")};vi.checkLValSimple=function(i,v,x){v===void 0&&(v=Xr);var T=v!==Xr;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(T?"Binding ":"Assigning to ")+i.name+" in strict mode"),T&&(v===ts&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),x&&(hn(x,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),x[i.name]=!0),v!==BM&&this.declareName(i.name,v,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":T&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return T&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,v,x);default:this.raise(i.start,(T?"Binding":"Assigning to")+" rvalue")}};vi.checkLValPattern=function(i,v,x){switch(v===void 0&&(v=Xr),i.type){case"ObjectPattern":for(var T=0,F=i.properties;T<F.length;T+=1){var D=F[T];this.checkLValInnerPattern(D,v,x)}break;case"ArrayPattern":for(var p=0,M=i.elements;p<M.length;p+=1){var t=M[p];t&&this.checkLValInnerPattern(t,v,x)}break;default:this.checkLValSimple(i,v,x)}};vi.checkLValInnerPattern=function(i,v,x){switch(v===void 0&&(v=Xr),i.type){case"Property":this.checkLValInnerPattern(i.value,v,x);break;case"AssignmentPattern":this.checkLValPattern(i.left,v,x);break;case"RestElement":this.checkLValPattern(i.argument,v,x);break;default:this.checkLValPattern(i,v,x)}};var Mi=function(i,v,x,T,F){this.token=i,this.isExpr=!!v,this.preserveSpace=!!x,this.override=T,this.generator=!!F},Ee={b_stat:new Mi("{",!1),b_expr:new Mi("{",!0),b_tmpl:new Mi("${",!1),p_stat:new Mi("(",!1),p_expr:new Mi("(",!0),q_tmpl:new Mi("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new Mi("function",!1),f_expr:new Mi("function",!0),f_expr_gen:new Mi("function",!0,!1,null,!0),f_gen:new Mi("function",!1,!1,null,!0)},ln=we.prototype;ln.initialContext=function(){return[Ee.b_stat]};ln.curContext=function(){return this.context[this.context.length-1]};ln.braceIsBlock=function(i){var v=this.curContext();return v===Ee.f_expr||v===Ee.f_stat?!0:i===_.colon&&(v===Ee.b_stat||v===Ee.b_expr)?!v.isExpr:i===_._return||i===_.name&&this.exprAllowed?pi.test(this.input.slice(this.lastTokEnd,this.start)):i===_._else||i===_.semi||i===_.eof||i===_.parenR||i===_.arrow?!0:i===_.braceL?v===Ee.b_stat:i===_._var||i===_._const||i===_.name?!1:!this.exprAllowed};ln.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var v=this.context[i];if(v.token==="function")return v.generator}return!1};ln.updateContext=function(i){var v,x=this.type;x.keyword&&i===_.dot?this.exprAllowed=!1:(v=x.updateContext)?v.call(this,i):this.exprAllowed=x.beforeExpr};ln.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)};_.parenR.updateContext=_.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===Ee.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr};_.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?Ee.b_stat:Ee.b_expr),this.exprAllowed=!0};_.dollarBraceL.updateContext=function(){this.context.push(Ee.b_tmpl),this.exprAllowed=!0};_.parenL.updateContext=function(i){var v=i===_._if||i===_._for||i===_._with||i===_._while;this.context.push(v?Ee.p_stat:Ee.p_expr),this.exprAllowed=!0};_.incDec.updateContext=function(){};_._function.updateContext=_._class.updateContext=function(i){i.beforeExpr&&i!==_._else&&!(i===_.semi&&this.curContext()!==Ee.p_stat)&&!(i===_._return&&pi.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===_.colon||i===_.braceL)&&this.curContext()===Ee.b_stat)?this.context.push(Ee.f_expr):this.context.push(Ee.f_stat),this.exprAllowed=!1};_.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};_.backQuote.updateContext=function(){this.curContext()===Ee.q_tmpl?this.context.pop():this.context.push(Ee.q_tmpl),this.exprAllowed=!1};_.star.updateContext=function(i){if(i===_._function){var v=this.context.length-1;this.context[v]===Ee.f_expr?this.context[v]=Ee.f_expr_gen:this.context[v]=Ee.f_gen}this.exprAllowed=!0};_.name.updateContext=function(i){var v=!1;this.options.ecmaVersion>=6&&i!==_.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(v=!0),this.exprAllowed=v};var Jt=we.prototype;Jt.checkPropClash=function(i,v,x){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var T=i.key,F;switch(T.type){case"Identifier":F=T.name;break;case"Literal":F=String(T.value);break;default:return}var D=i.kind;if(this.options.ecmaVersion>=6){F==="__proto__"&&D==="init"&&(v.proto&&(x?x.doubleProto<0&&(x.doubleProto=T.start):this.raiseRecoverable(T.start,"Redefinition of __proto__ property")),v.proto=!0);return}F="$"+F;var p=v[F];if(p){var M;D==="init"?M=this.strict&&p.init||p.get||p.set:M=p.init||p[D],M&&this.raiseRecoverable(T.start,"Redefinition of property")}else p=v[F]={init:!1,get:!1,set:!1};p[D]=!0}};Jt.parseExpression=function(i,v){var x=this.start,T=this.startLoc,F=this.parseMaybeAssign(i,v);if(this.type===_.comma){var D=this.startNodeAt(x,T);for(D.expressions=[F];this.eat(_.comma);)D.expressions.push(this.parseMaybeAssign(i,v));return this.finishNode(D,"SequenceExpression")}return F};Jt.parseMaybeAssign=function(i,v,x){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var T=!1,F=-1,D=-1,p=-1;v?(F=v.parenthesizedAssign,D=v.trailingComma,p=v.doubleProto,v.parenthesizedAssign=v.trailingComma=-1):(v=new na,T=!0);var M=this.start,t=this.startLoc;(this.type===_.parenL||this.type===_.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var h=this.parseMaybeConditional(i,v);if(x&&(h=x.call(this,h,M,t)),this.type.isAssign){var g=this.startNodeAt(M,t);return g.operator=this.value,this.type===_.eq&&(h=this.toAssignable(h,!1,v)),T||(v.parenthesizedAssign=v.trailingComma=v.doubleProto=-1),v.shorthandAssign>=h.start&&(v.shorthandAssign=-1),this.type===_.eq?this.checkLValPattern(h):this.checkLValSimple(h),g.left=h,this.next(),g.right=this.parseMaybeAssign(i),p>-1&&(v.doubleProto=p),this.finishNode(g,"AssignmentExpression")}else T&&this.checkExpressionErrors(v,!0);return F>-1&&(v.parenthesizedAssign=F),D>-1&&(v.trailingComma=D),h};Jt.parseMaybeConditional=function(i,v){var x=this.start,T=this.startLoc,F=this.parseExprOps(i,v);if(this.checkExpressionErrors(v))return F;if(this.eat(_.question)){var D=this.startNodeAt(x,T);return D.test=F,D.consequent=this.parseMaybeAssign(),this.expect(_.colon),D.alternate=this.parseMaybeAssign(i),this.finishNode(D,"ConditionalExpression")}return F};Jt.parseExprOps=function(i,v){var x=this.start,T=this.startLoc,F=this.parseMaybeUnary(v,!1,!1,i);return this.checkExpressionErrors(v)||F.start===x&&F.type==="ArrowFunctionExpression"?F:this.parseExprOp(F,x,T,-1,i)};Jt.parseExprOp=function(i,v,x,T,F){var D=this.type.binop;if(D!=null&&(!F||this.type!==_._in)&&D>T){var p=this.type===_.logicalOR||this.type===_.logicalAND,M=this.type===_.coalesce;M&&(D=_.logicalAND.binop);var t=this.value;this.next();var h=this.start,g=this.startLoc,o=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,F),h,g,D,F),a=this.buildBinary(v,x,i,o,t,p||M);return(p&&this.type===_.coalesce||M&&(this.type===_.logicalOR||this.type===_.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(a,v,x,T,F)}return i};Jt.buildBinary=function(i,v,x,T,F,D){T.type==="PrivateIdentifier"&&this.raise(T.start,"Private identifier can only be left side of binary expression");var p=this.startNodeAt(i,v);return p.left=x,p.operator=F,p.right=T,this.finishNode(p,D?"LogicalExpression":"BinaryExpression")};Jt.parseMaybeUnary=function(i,v,x,T){var F=this.start,D=this.startLoc,p;if(this.isContextual("await")&&this.canAwait)p=this.parseAwait(T),v=!0;else if(this.type.prefix){var M=this.startNode(),t=this.type===_.incDec;M.operator=this.value,M.prefix=!0,this.next(),M.argument=this.parseMaybeUnary(null,!0,t,T),this.checkExpressionErrors(i,!0),t?this.checkLValSimple(M.argument):this.strict&&M.operator==="delete"&&IM(M.argument)?this.raiseRecoverable(M.start,"Deleting local variable in strict mode"):M.operator==="delete"&&Bo(M.argument)?this.raiseRecoverable(M.start,"Private fields can not be deleted"):v=!0,p=this.finishNode(M,t?"UpdateExpression":"UnaryExpression")}else if(!v&&this.type===_.privateId)(T||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),p=this.parsePrivateIdent(),this.type!==_._in&&this.unexpected();else{if(p=this.parseExprSubscripts(i,T),this.checkExpressionErrors(i))return p;for(;this.type.postfix&&!this.canInsertSemicolon();){var h=this.startNodeAt(F,D);h.operator=this.value,h.prefix=!1,h.argument=p,this.checkLValSimple(p),this.next(),p=this.finishNode(h,"UpdateExpression")}}if(!x&&this.eat(_.starstar))if(v)this.unexpected(this.lastTokStart);else return this.buildBinary(F,D,p,this.parseMaybeUnary(null,!1,!1,T),"**",!1);else return p};function IM(i){return i.type==="Identifier"||i.type==="ParenthesizedExpression"&&IM(i.expression)}function Bo(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&Bo(i.expression)||i.type==="ParenthesizedExpression"&&Bo(i.expression)}Jt.parseExprSubscripts=function(i,v){var x=this.start,T=this.startLoc,F=this.parseExprAtom(i,v);if(F.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return F;var D=this.parseSubscripts(F,x,T,!1,v);return i&&D.type==="MemberExpression"&&(i.parenthesizedAssign>=D.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=D.start&&(i.parenthesizedBind=-1),i.trailingComma>=D.start&&(i.trailingComma=-1)),D};Jt.parseSubscripts=function(i,v,x,T,F){for(var D=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,p=!1;;){var M=this.parseSubscript(i,v,x,T,D,p,F);if(M.optional&&(p=!0),M===i||M.type==="ArrowFunctionExpression"){if(p){var t=this.startNodeAt(v,x);t.expression=M,M=this.finishNode(t,"ChainExpression")}return M}i=M}};Jt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(_.arrow)};Jt.parseSubscriptAsyncArrow=function(i,v,x,T){return this.parseArrowExpression(this.startNodeAt(i,v),x,!0,T)};Jt.parseSubscript=function(i,v,x,T,F,D,p){var M=this.options.ecmaVersion>=11,t=M&&this.eat(_.questionDot);T&&t&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var h=this.eat(_.bracketL);if(h||t&&this.type!==_.parenL&&this.type!==_.backQuote||this.eat(_.dot)){var g=this.startNodeAt(v,x);g.object=i,h?(g.property=this.parseExpression(),this.expect(_.bracketR)):this.type===_.privateId&&i.type!=="Super"?g.property=this.parsePrivateIdent():g.property=this.parseIdent(this.options.allowReserved!=="never"),g.computed=!!h,M&&(g.optional=t),i=this.finishNode(g,"MemberExpression")}else if(!T&&this.eat(_.parenL)){var o=new na,a=this.yieldPos,r=this.awaitPos,e=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var n=this.parseExprList(_.parenR,this.options.ecmaVersion>=8,!1,o);if(F&&!t&&this.shouldParseAsyncArrow())return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=a,this.awaitPos=r,this.awaitIdentPos=e,this.parseSubscriptAsyncArrow(v,x,n,p);this.checkExpressionErrors(o,!0),this.yieldPos=a||this.yieldPos,this.awaitPos=r||this.awaitPos,this.awaitIdentPos=e||this.awaitIdentPos;var u=this.startNodeAt(v,x);u.callee=i,u.arguments=n,M&&(u.optional=t),i=this.finishNode(u,"CallExpression")}else if(this.type===_.backQuote){(t||D)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var s=this.startNodeAt(v,x);s.tag=i,s.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(s,"TaggedTemplateExpression")}return i};Jt.parseExprAtom=function(i,v,x){this.type===_.slash&&this.readRegexp();var T,F=this.potentialArrowAt===this.start;switch(this.type){case _._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),T=this.startNode(),this.next(),this.type===_.parenL&&!this.allowDirectSuper&&this.raise(T.start,"super() call outside constructor of a subclass"),this.type!==_.dot&&this.type!==_.bracketL&&this.type!==_.parenL&&this.unexpected(),this.finishNode(T,"Super");case _._this:return T=this.startNode(),this.next(),this.finishNode(T,"ThisExpression");case _.name:var D=this.start,p=this.startLoc,M=this.containsEsc,t=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!M&&t.name==="async"&&!this.canInsertSemicolon()&&this.eat(_._function))return this.overrideContext(Ee.f_expr),this.parseFunction(this.startNodeAt(D,p),0,!1,!0,v);if(F&&!this.canInsertSemicolon()){if(this.eat(_.arrow))return this.parseArrowExpression(this.startNodeAt(D,p),[t],!1,v);if(this.options.ecmaVersion>=8&&t.name==="async"&&this.type===_.name&&!M&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return t=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(_.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(D,p),[t],!0,v)}return t;case _.regexp:var h=this.value;return T=this.parseLiteral(h.value),T.regex={pattern:h.pattern,flags:h.flags},T;case _.num:case _.string:return this.parseLiteral(this.value);case _._null:case _._true:case _._false:return T=this.startNode(),T.value=this.type===_._null?null:this.type===_._true,T.raw=this.type.keyword,this.next(),this.finishNode(T,"Literal");case _.parenL:var g=this.start,o=this.parseParenAndDistinguishExpression(F,v);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(o)&&(i.parenthesizedAssign=g),i.parenthesizedBind<0&&(i.parenthesizedBind=g)),o;case _.bracketL:return T=this.startNode(),this.next(),T.elements=this.parseExprList(_.bracketR,!0,!0,i),this.finishNode(T,"ArrayExpression");case _.braceL:return this.overrideContext(Ee.b_expr),this.parseObj(!1,i);case _._function:return T=this.startNode(),this.next(),this.parseFunction(T,0);case _._class:return this.parseClass(this.startNode(),!1);case _._new:return this.parseNew();case _.backQuote:return this.parseTemplate();case _._import:return this.options.ecmaVersion>=11?this.parseExprImport(x):this.unexpected();default:return this.parseExprAtomDefault()}};Jt.parseExprAtomDefault=function(){this.unexpected()};Jt.parseExprImport=function(i){var v=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===_.parenL&&!i)return this.parseDynamicImport(v);if(this.type===_.dot){var x=this.startNodeAt(v.start,v.loc&&v.loc.start);return x.name="import",v.meta=this.finishNode(x,"Identifier"),this.parseImportMeta(v)}else this.unexpected()};Jt.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(_.parenR)?i.options=null:(this.expect(_.comma),this.afterTrailingComma(_.parenR)?i.options=null:(i.options=this.parseMaybeAssign(),this.eat(_.parenR)||(this.expect(_.comma),this.afterTrailingComma(_.parenR)||this.unexpected())));else if(!this.eat(_.parenR)){var v=this.start;this.eat(_.comma)&&this.eat(_.parenR)?this.raiseRecoverable(v,"Trailing comma is not allowed in import()"):this.unexpected(v)}return this.finishNode(i,"ImportExpression")};Jt.parseImportMeta=function(i){this.next();var v=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),v&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")};Jt.parseLiteral=function(i){var v=this.startNode();return v.value=i,v.raw=this.input.slice(this.start,this.end),v.raw.charCodeAt(v.raw.length-1)===110&&(v.bigint=v.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(v,"Literal")};Jt.parseParenExpression=function(){this.expect(_.parenL);var i=this.parseExpression();return this.expect(_.parenR),i};Jt.shouldParseArrow=function(i){return!this.canInsertSemicolon()};Jt.parseParenAndDistinguishExpression=function(i,v){var x=this.start,T=this.startLoc,F,D=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var p=this.start,M=this.startLoc,t=[],h=!0,g=!1,o=new na,a=this.yieldPos,r=this.awaitPos,e;for(this.yieldPos=0,this.awaitPos=0;this.type!==_.parenR;)if(h?h=!1:this.expect(_.comma),D&&this.afterTrailingComma(_.parenR,!0)){g=!0;break}else if(this.type===_.ellipsis){e=this.start,t.push(this.parseParenItem(this.parseRestBinding())),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else t.push(this.parseMaybeAssign(!1,o,this.parseParenItem));var n=this.lastTokEnd,u=this.lastTokEndLoc;if(this.expect(_.parenR),i&&this.shouldParseArrow(t)&&this.eat(_.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=a,this.awaitPos=r,this.parseParenArrowList(x,T,t,v);(!t.length||g)&&this.unexpected(this.lastTokStart),e&&this.unexpected(e),this.checkExpressionErrors(o,!0),this.yieldPos=a||this.yieldPos,this.awaitPos=r||this.awaitPos,t.length>1?(F=this.startNodeAt(p,M),F.expressions=t,this.finishNodeAt(F,"SequenceExpression",n,u)):F=t[0]}else F=this.parseParenExpression();if(this.options.preserveParens){var s=this.startNodeAt(x,T);return s.expression=F,this.finishNode(s,"ParenthesizedExpression")}else return F};Jt.parseParenItem=function(i){return i};Jt.parseParenArrowList=function(i,v,x,T){return this.parseArrowExpression(this.startNodeAt(i,v),x,!1,T)};var MD=[];Jt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===_.dot){var v=this.startNodeAt(i.start,i.loc&&i.loc.start);v.name="new",i.meta=this.finishNode(v,"Identifier"),this.next();var x=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),x&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var T=this.start,F=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),T,F,!0,!1),this.eat(_.parenL)?i.arguments=this.parseExprList(_.parenR,this.options.ecmaVersion>=8,!1):i.arguments=MD,this.finishNode(i,"NewExpression")};Jt.parseTemplateElement=function(i){var v=i.isTagged,x=this.startNode();return this.type===_.invalidTemplate?(v||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),x.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):x.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),x.tail=this.type===_.backQuote,this.finishNode(x,"TemplateElement")};Jt.parseTemplate=function(i){i===void 0&&(i={});var v=i.isTagged;v===void 0&&(v=!1);var x=this.startNode();this.next(),x.expressions=[];var T=this.parseTemplateElement({isTagged:v});for(x.quasis=[T];!T.tail;)this.type===_.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(_.dollarBraceL),x.expressions.push(this.parseExpression()),this.expect(_.braceR),x.quasis.push(T=this.parseTemplateElement({isTagged:v}));return this.next(),this.finishNode(x,"TemplateLiteral")};Jt.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===_.name||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===_.star)&&!pi.test(this.input.slice(this.lastTokEnd,this.start))};Jt.parseObj=function(i,v){var x=this.startNode(),T=!0,F={};for(x.properties=[],this.next();!this.eat(_.braceR);){if(T)T=!1;else if(this.expect(_.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(_.braceR))break;var D=this.parseProperty(i,v);i||this.checkPropClash(D,F,v),x.properties.push(D)}return this.finishNode(x,i?"ObjectPattern":"ObjectExpression")};Jt.parseProperty=function(i,v){var x=this.startNode(),T,F,D,p;if(this.options.ecmaVersion>=9&&this.eat(_.ellipsis))return i?(x.argument=this.parseIdent(!1),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(x,"RestElement")):(x.argument=this.parseMaybeAssign(!1,v),this.type===_.comma&&v&&v.trailingComma<0&&(v.trailingComma=this.start),this.finishNode(x,"SpreadElement"));this.options.ecmaVersion>=6&&(x.method=!1,x.shorthand=!1,(i||v)&&(D=this.start,p=this.startLoc),i||(T=this.eat(_.star)));var M=this.containsEsc;return this.parsePropertyName(x),!i&&!M&&this.options.ecmaVersion>=8&&!T&&this.isAsyncProp(x)?(F=!0,T=this.options.ecmaVersion>=9&&this.eat(_.star),this.parsePropertyName(x)):F=!1,this.parsePropertyValue(x,i,T,F,D,p,v,M),this.finishNode(x,"Property")};Jt.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var v=i.kind==="get"?0:1;if(i.value.params.length!==v){var x=i.value.start;i.kind==="get"?this.raiseRecoverable(x,"getter should have no params"):this.raiseRecoverable(x,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")};Jt.parsePropertyValue=function(i,v,x,T,F,D,p,M){(x||T)&&this.type===_.colon&&this.unexpected(),this.eat(_.colon)?(i.value=v?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,p),i.kind="init"):this.options.ecmaVersion>=6&&this.type===_.parenL?(v&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(x,T)):!v&&!M&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==_.comma&&this.type!==_.braceR&&this.type!==_.eq?((x||T)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((x||T)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=F),i.kind="init",v?i.value=this.parseMaybeDefault(F,D,this.copyNode(i.key)):this.type===_.eq&&p?(p.shorthandAssign<0&&(p.shorthandAssign=this.start),i.value=this.parseMaybeDefault(F,D,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()};Jt.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(_.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(_.bracketR),i.key;i.computed=!1}return i.key=this.type===_.num||this.type===_.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Jt.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)};Jt.parseMethod=function(i,v,x){var T=this.startNode(),F=this.yieldPos,D=this.awaitPos,p=this.awaitIdentPos;return this.initFunction(T),this.options.ecmaVersion>=6&&(T.generator=i),this.options.ecmaVersion>=8&&(T.async=!!v),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(jh(v,T.generator)|Jh|(x?DM:0)),this.expect(_.parenL),T.params=this.parseBindingList(_.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(T,!1,!0,!1),this.yieldPos=F,this.awaitPos=D,this.awaitIdentPos=p,this.finishNode(T,"FunctionExpression")};Jt.parseArrowExpression=function(i,v,x,T){var F=this.yieldPos,D=this.awaitPos,p=this.awaitIdentPos;return this.enterScope(jh(x,!1)|LM),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!x),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(v,!0),this.parseFunctionBody(i,!0,!1,T),this.yieldPos=F,this.awaitPos=D,this.awaitIdentPos=p,this.finishNode(i,"ArrowFunctionExpression")};Jt.parseFunctionBody=function(i,v,x,T){var F=v&&this.type!==_.braceL,D=this.strict,p=!1;if(F)i.body=this.parseMaybeAssign(T),i.expression=!0,this.checkParams(i,!1);else{var M=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!D||M)&&(p=this.strictDirective(this.end),p&&M&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var t=this.labels;this.labels=[],p&&(this.strict=!0),this.checkParams(i,!D&&!p&&!v&&!x&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,BM),i.body=this.parseBlock(!1,void 0,p&&!D),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=t}this.exitScope()};Jt.isSimpleParamList=function(i){for(var v=0,x=i;v<x.length;v+=1){var T=x[v];if(T.type!=="Identifier")return!1}return!0};Jt.checkParams=function(i,v){for(var x=Object.create(null),T=0,F=i.params;T<F.length;T+=1){var D=F[T];this.checkLValInnerPattern(D,Qh,v?null:x)}};Jt.parseExprList=function(i,v,x,T){for(var F=[],D=!0;!this.eat(i);){if(D)D=!1;else if(this.expect(_.comma),v&&this.afterTrailingComma(i))break;var p=void 0;x&&this.type===_.comma?p=null:this.type===_.ellipsis?(p=this.parseSpread(T),T&&this.type===_.comma&&T.trailingComma<0&&(T.trailingComma=this.start)):p=this.parseMaybeAssign(!1,T),F.push(p)}return F};Jt.checkUnreserved=function(i){var v=i.start,x=i.end,T=i.name;if(this.inGenerator&&T==="yield"&&this.raiseRecoverable(v,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&T==="await"&&this.raiseRecoverable(v,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&T==="arguments"&&this.raiseRecoverable(v,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(T==="arguments"||T==="await")&&this.raise(v,"Cannot use "+T+" in class static initialization block"),this.keywords.test(T)&&this.raise(v,"Unexpected keyword '"+T+"'"),!(this.options.ecmaVersion<6&&this.input.slice(v,x).indexOf("\\")!==-1)){var F=this.strict?this.reservedWordsStrict:this.reservedWords;F.test(T)&&(!this.inAsync&&T==="await"&&this.raiseRecoverable(v,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(v,"The keyword '"+T+"' is reserved"))}};Jt.parseIdent=function(i){var v=this.parseIdentNode();return this.next(!!i),this.finishNode(v,"Identifier"),i||(this.checkUnreserved(v),v.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=v.start)),v};Jt.parseIdentNode=function(){var i=this.startNode();return this.type===_.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=_.name):this.unexpected(),i};Jt.parsePrivateIdent=function(){var i=this.startNode();return this.type===_.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i};Jt.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var v=this.startNode();return this.next(),this.type===_.semi||this.canInsertSemicolon()||this.type!==_.star&&!this.type.startsExpr?(v.delegate=!1,v.argument=null):(v.delegate=this.eat(_.star),v.argument=this.parseMaybeAssign(i)),this.finishNode(v,"YieldExpression")};Jt.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var v=this.startNode();return this.next(),v.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(v,"AwaitExpression")};var Or=we.prototype;Or.raise=function(i,v){var x=FM(this.input,i);v+=" ("+x.line+":"+x.column+")";var T=new SyntaxError(v);throw T.pos=i,T.loc=x,T.raisedAt=this.pos,T};Or.raiseRecoverable=Or.raise;Or.curPosition=function(){if(this.options.locations)return new Un(this.curLine,this.pos-this.lineStart)};var gs=we.prototype,CD=function(i){this.flags=i,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};gs.enterScope=function(i){this.scopeStack.push(new CD(i))};gs.exitScope=function(){this.scopeStack.pop()};gs.treatFunctionsAsVarInScope=function(i){return i.flags&un||!this.inModule&&i.flags&Hn};gs.declareName=function(i,v,x){var T=!1;if(v===ts){var F=this.currentScope();T=F.lexical.indexOf(i)>-1||F.functions.indexOf(i)>-1||F.var.indexOf(i)>-1,F.lexical.push(i),this.inModule&&F.flags&Hn&&delete this.undefinedExports[i]}else if(v===wM){var D=this.currentScope();D.lexical.push(i)}else if(v===GM){var p=this.currentScope();this.treatFunctionsAsVar?T=p.lexical.indexOf(i)>-1:T=p.lexical.indexOf(i)>-1||p.var.indexOf(i)>-1,p.functions.push(i)}else for(var M=this.scopeStack.length-1;M>=0;--M){var t=this.scopeStack[M];if(t.lexical.indexOf(i)>-1&&!(t.flags&bM&&t.lexical[0]===i)||!this.treatFunctionsAsVarInScope(t)&&t.functions.indexOf(i)>-1){T=!0;break}if(t.var.push(i),this.inModule&&t.flags&Hn&&delete this.undefinedExports[i],t.flags&kh)break}T&&this.raiseRecoverable(x,"Identifier '"+i+"' has already been declared")};gs.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)};gs.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};gs.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var v=this.scopeStack[i];if(v.flags&kh)return v}};gs.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var v=this.scopeStack[i];if(v.flags&kh&&!(v.flags&LM))return v}};var ra=function(i,v,x){this.type="",this.start=v,this.end=0,i.options.locations&&(this.loc=new sa(i,x)),i.options.directSourceFile&&(this.sourceFile=i.options.directSourceFile),i.options.ranges&&(this.range=[v,0])},tr=we.prototype;tr.startNode=function(){return new ra(this,this.start,this.startLoc)};tr.startNodeAt=function(i,v){return new ra(this,i,v)};function OM(i,v,x,T){return i.type=v,i.end=x,this.options.locations&&(i.loc.end=T),this.options.ranges&&(i.range[1]=x),i}tr.finishNode=function(i,v){return OM.call(this,i,v,this.lastTokEnd,this.lastTokEndLoc)};tr.finishNodeAt=function(i,v,x,T){return OM.call(this,i,v,x,T)};tr.copyNode=function(i){var v=new ra(this,i.start,this.startLoc);for(var x in i)v[x]=i[x];return v};var SD="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",NM="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",VM=NM+" Extended_Pictographic",zM=VM,WM=zM+" EBase EComp EMod EPres ExtPict",YM=WM,TD=YM,ED={9:NM,10:VM,11:zM,12:WM,13:YM,14:TD},PD="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",AD={9:"",10:"",11:"",12:"",13:"",14:PD},xl="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ZM="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",UM=ZM+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",HM=UM+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",KM=HM+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",JM=KM+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",FD=JM+" "+SD,RD={9:ZM,10:UM,11:HM,12:KM,13:JM,14:FD},kM={};function LD(i){var v=kM[i]={binary:ls(ED[i]+" "+xl),binaryOfStrings:ls(AD[i]),nonBinary:{General_Category:ls(xl),Script:ls(RD[i])}};v.nonBinary.Script_Extensions=v.nonBinary.Script,v.nonBinary.gc=v.nonBinary.General_Category,v.nonBinary.sc=v.nonBinary.Script,v.nonBinary.scx=v.nonBinary.Script_Extensions}for(var Ja=0,yl=[9,10,11,12,13,14];Ja<yl.length;Ja+=1){var bD=yl[Ja];LD(bD)}var Xt=we.prototype,Nr=function(i,v){this.parent=i,this.base=v||this};Nr.prototype.separatedFrom=function(i){for(var v=this;v;v=v.parent)for(var x=i;x;x=x.parent)if(v.base===x.base&&v!==x)return!0;return!1};Nr.prototype.sibling=function(){return new Nr(this.parent,this.base)};var Yi=function(i){this.parser=i,this.validFlags="gim"+(i.options.ecmaVersion>=6?"uy":"")+(i.options.ecmaVersion>=9?"s":"")+(i.options.ecmaVersion>=13?"d":"")+(i.options.ecmaVersion>=15?"v":""),this.unicodeProperties=kM[i.options.ecmaVersion>=14?14:i.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Yi.prototype.reset=function(i,v,x){var T=x.indexOf("v")!==-1,F=x.indexOf("u")!==-1;this.start=i|0,this.source=v+"",this.flags=x,T&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=F&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=F&&this.parser.options.ecmaVersion>=9)};Yi.prototype.raise=function(i){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+i)};Yi.prototype.at=function(i,v){v===void 0&&(v=!1);var x=this.source,T=x.length;if(i>=T)return-1;var F=x.charCodeAt(i);if(!(v||this.switchU)||F<=55295||F>=57344||i+1>=T)return F;var D=x.charCodeAt(i+1);return D>=56320&&D<=57343?(F<<10)+D-56613888:F};Yi.prototype.nextIndex=function(i,v){v===void 0&&(v=!1);var x=this.source,T=x.length;if(i>=T)return T;var F=x.charCodeAt(i),D;return!(v||this.switchU)||F<=55295||F>=57344||i+1>=T||(D=x.charCodeAt(i+1))<56320||D>57343?i+1:i+2};Yi.prototype.current=function(i){return i===void 0&&(i=!1),this.at(this.pos,i)};Yi.prototype.lookahead=function(i){return i===void 0&&(i=!1),this.at(this.nextIndex(this.pos,i),i)};Yi.prototype.advance=function(i){i===void 0&&(i=!1),this.pos=this.nextIndex(this.pos,i)};Yi.prototype.eat=function(i,v){return v===void 0&&(v=!1),this.current(v)===i?(this.advance(v),!0):!1};Yi.prototype.eatChars=function(i,v){v===void 0&&(v=!1);for(var x=this.pos,T=0,F=i;T<F.length;T+=1){var D=F[T],p=this.at(x,v);if(p===-1||p!==D)return!1;x=this.nextIndex(x,v)}return this.pos=x,!0};Xt.validateRegExpFlags=function(i){for(var v=i.validFlags,x=i.flags,T=!1,F=!1,D=0;D<x.length;D++){var p=x.charAt(D);v.indexOf(p)===-1&&this.raise(i.start,"Invalid regular expression flag"),x.indexOf(p,D+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),p==="u"&&(T=!0),p==="v"&&(F=!0)}this.options.ecmaVersion>=15&&T&&F&&this.raise(i.start,"Invalid regular expression flag")};function DD(i){for(var v in i)return!0;return!1}Xt.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&DD(i.groupNames)&&(i.switchN=!0,this.regexp_pattern(i))};Xt.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames=Object.create(null),i.backReferenceNames.length=0,i.branchID=null,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var v=0,x=i.backReferenceNames;v<x.length;v+=1){var T=x[v];i.groupNames[T]||i.raise("Invalid named capture referenced")}};Xt.regexp_disjunction=function(i){var v=this.options.ecmaVersion>=16;for(v&&(i.branchID=new Nr(i.branchID,null)),this.regexp_alternative(i);i.eat(124);)v&&(i.branchID=i.branchID.sibling()),this.regexp_alternative(i);v&&(i.branchID=i.branchID.parent),this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")};Xt.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););};Xt.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1};Xt.regexp_eatAssertion=function(i){var v=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=v}if(i.eat(40)&&i.eat(63)){var x=!1;if(this.options.ecmaVersion>=9&&(x=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!x,!0}return i.pos=v,!1};Xt.regexp_eatQuantifier=function(i,v){return v===void 0&&(v=!1),this.regexp_eatQuantifierPrefix(i,v)?(i.eat(63),!0):!1};Xt.regexp_eatQuantifierPrefix=function(i,v){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,v)};Xt.regexp_eatBracedQuantifier=function(i,v){var x=i.pos;if(i.eat(123)){var T=0,F=-1;if(this.regexp_eatDecimalDigits(i)&&(T=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(F=i.lastIntValue),i.eat(125)))return F!==-1&&F<T&&!v&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!v&&i.raise("Incomplete quantifier"),i.pos=x}return!1};Xt.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)};Xt.regexp_eatReverseSolidusAtomEscape=function(i){var v=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=v}return!1};Xt.regexp_eatUncapturingGroup=function(i){var v=i.pos;if(i.eat(40)){if(i.eat(63)){if(this.options.ecmaVersion>=16){var x=this.regexp_eatModifiers(i),T=i.eat(45);if(x||T){for(var F=0;F<x.length;F++){var D=x.charAt(F);x.indexOf(D,F+1)>-1&&i.raise("Duplicate regular expression modifiers")}if(T){var p=this.regexp_eatModifiers(i);!x&&!p&&i.current()===58&&i.raise("Invalid regular expression modifiers");for(var M=0;M<p.length;M++){var t=p.charAt(M);(p.indexOf(t,M+1)>-1||x.indexOf(t)>-1)&&i.raise("Duplicate regular expression modifiers")}}}}if(i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}}i.pos=v}return!1};Xt.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1};Xt.regexp_eatModifiers=function(i){for(var v="",x=0;(x=i.current())!==-1&&GD(x);)v+=qi(x),i.advance();return v};function GD(i){return i===105||i===109||i===115}Xt.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)};Xt.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1};Xt.regexp_eatSyntaxCharacter=function(i){var v=i.current();return jM(v)?(i.lastIntValue=v,i.advance(),!0):!1};function jM(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}Xt.regexp_eatPatternCharacters=function(i){for(var v=i.pos,x=0;(x=i.current())!==-1&&!jM(x);)i.advance();return i.pos!==v};Xt.regexp_eatExtendedPatternCharacter=function(i){var v=i.current();return v!==-1&&v!==36&&!(v>=40&&v<=43)&&v!==46&&v!==63&&v!==91&&v!==94&&v!==124?(i.advance(),!0):!1};Xt.regexp_groupSpecifier=function(i){if(i.eat(63)){this.regexp_eatGroupName(i)||i.raise("Invalid group");var v=this.options.ecmaVersion>=16,x=i.groupNames[i.lastStringValue];if(x)if(v)for(var T=0,F=x;T<F.length;T+=1){var D=F[T];D.separatedFrom(i.branchID)||i.raise("Duplicate capture group name")}else i.raise("Duplicate capture group name");v?(x||(i.groupNames[i.lastStringValue]=[])).push(i.branchID):i.groupNames[i.lastStringValue]=!0}};Xt.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1};Xt.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=qi(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=qi(i.lastIntValue);return!0}return!1};Xt.regexp_eatRegExpIdentifierStart=function(i){var v=i.pos,x=this.options.ecmaVersion>=11,T=i.current(x);return i.advance(x),T===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,x)&&(T=i.lastIntValue),wD(T)?(i.lastIntValue=T,!0):(i.pos=v,!1)};function wD(i){return $i(i,!0)||i===36||i===95}Xt.regexp_eatRegExpIdentifierPart=function(i){var v=i.pos,x=this.options.ecmaVersion>=11,T=i.current(x);return i.advance(x),T===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,x)&&(T=i.lastIntValue),BD(T)?(i.lastIntValue=T,!0):(i.pos=v,!1)};function BD(i){return tn(i,!0)||i===36||i===95||i===8204||i===8205}Xt.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)};Xt.regexp_eatBackReference=function(i){var v=i.pos;if(this.regexp_eatDecimalEscape(i)){var x=i.lastIntValue;if(i.switchU)return x>i.maxBackReference&&(i.maxBackReference=x),!0;if(x<=i.numCapturingParens)return!0;i.pos=v}return!1};Xt.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1};Xt.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)};Xt.regexp_eatCControlLetter=function(i){var v=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=v}return!1};Xt.regexp_eatZero=function(i){return i.current()===48&&!aa(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1};Xt.regexp_eatControlEscape=function(i){var v=i.current();return v===116?(i.lastIntValue=9,i.advance(),!0):v===110?(i.lastIntValue=10,i.advance(),!0):v===118?(i.lastIntValue=11,i.advance(),!0):v===102?(i.lastIntValue=12,i.advance(),!0):v===114?(i.lastIntValue=13,i.advance(),!0):!1};Xt.regexp_eatControlLetter=function(i){var v=i.current();return QM(v)?(i.lastIntValue=v%32,i.advance(),!0):!1};function QM(i){return i>=65&&i<=90||i>=97&&i<=122}Xt.regexp_eatRegExpUnicodeEscapeSequence=function(i,v){v===void 0&&(v=!1);var x=i.pos,T=v||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var F=i.lastIntValue;if(T&&F>=55296&&F<=56319){var D=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var p=i.lastIntValue;if(p>=56320&&p<=57343)return i.lastIntValue=(F-55296)*1024+(p-56320)+65536,!0}i.pos=D,i.lastIntValue=F}return!0}if(T&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&XD(i.lastIntValue))return!0;T&&i.raise("Invalid unicode escape"),i.pos=x}return!1};function XD(i){return i>=0&&i<=1114111}Xt.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var v=i.current();return v!==99&&(!i.switchN||v!==107)?(i.lastIntValue=v,i.advance(),!0):!1};Xt.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var v=i.current();if(v>=49&&v<=57){do i.lastIntValue=10*i.lastIntValue+(v-48),i.advance();while((v=i.current())>=48&&v<=57);return!0}return!1};var $M=0,_i=1,fi=2;Xt.regexp_eatCharacterClassEscape=function(i){var v=i.current();if(ID(v))return i.lastIntValue=-1,i.advance(),_i;var x=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((x=v===80)||v===112)){i.lastIntValue=-1,i.advance();var T;if(i.eat(123)&&(T=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return x&&T===fi&&i.raise("Invalid property name"),T;i.raise("Invalid property name")}return $M};function ID(i){return i===100||i===68||i===115||i===83||i===119||i===87}Xt.regexp_eatUnicodePropertyValueExpression=function(i){var v=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var x=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var T=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,x,T),_i}}if(i.pos=v,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var F=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,F)}return $M};Xt.regexp_validateUnicodePropertyNameAndValue=function(i,v,x){hn(i.unicodeProperties.nonBinary,v)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[v].test(x)||i.raise("Invalid property value")};Xt.regexp_validateUnicodePropertyNameOrValue=function(i,v){if(i.unicodeProperties.binary.test(v))return _i;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(v))return fi;i.raise("Invalid property name")};Xt.regexp_eatUnicodePropertyName=function(i){var v=0;for(i.lastStringValue="";qM(v=i.current());)i.lastStringValue+=qi(v),i.advance();return i.lastStringValue!==""};function qM(i){return QM(i)||i===95}Xt.regexp_eatUnicodePropertyValue=function(i){var v=0;for(i.lastStringValue="";OD(v=i.current());)i.lastStringValue+=qi(v),i.advance();return i.lastStringValue!==""};function OD(i){return qM(i)||aa(i)}Xt.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)};Xt.regexp_eatCharacterClass=function(i){if(i.eat(91)){var v=i.eat(94),x=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),v&&x===fi&&i.raise("Negated character class may contain strings"),!0}return!1};Xt.regexp_classContents=function(i){return i.current()===93?_i:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),_i)};Xt.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var v=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var x=i.lastIntValue;i.switchU&&(v===-1||x===-1)&&i.raise("Invalid character class"),v!==-1&&x!==-1&&v>x&&i.raise("Range out of order in character class")}}};Xt.regexp_eatClassAtom=function(i){var v=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var x=i.current();(x===99||eC(x))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=v}var T=i.current();return T!==93?(i.lastIntValue=T,i.advance(),!0):!1};Xt.regexp_eatClassEscape=function(i){var v=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=v}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)};Xt.regexp_classSetExpression=function(i){var v=_i,x;if(!this.regexp_eatClassSetRange(i))if(x=this.regexp_eatClassSetOperand(i)){x===fi&&(v=fi);for(var T=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(x=this.regexp_eatClassSetOperand(i))){x!==fi&&(v=_i);continue}i.raise("Invalid character in character class")}if(T!==i.pos)return v;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(T!==i.pos)return v}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(x=this.regexp_eatClassSetOperand(i),!x)return v;x===fi&&(v=fi)}};Xt.regexp_eatClassSetRange=function(i){var v=i.pos;if(this.regexp_eatClassSetCharacter(i)){var x=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var T=i.lastIntValue;return x!==-1&&T!==-1&&x>T&&i.raise("Range out of order in character class"),!0}i.pos=v}return!1};Xt.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?_i:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)};Xt.regexp_eatNestedClass=function(i){var v=i.pos;if(i.eat(91)){var x=i.eat(94),T=this.regexp_classContents(i);if(i.eat(93))return x&&T===fi&&i.raise("Negated character class may contain strings"),T;i.pos=v}if(i.eat(92)){var F=this.regexp_eatCharacterClassEscape(i);if(F)return F;i.pos=v}return null};Xt.regexp_eatClassStringDisjunction=function(i){var v=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var x=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return x}else i.raise("Invalid escape");i.pos=v}return null};Xt.regexp_classStringDisjunctionContents=function(i){for(var v=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===fi&&(v=fi);return v};Xt.regexp_classString=function(i){for(var v=0;this.regexp_eatClassSetCharacter(i);)v++;return v===1?_i:fi};Xt.regexp_eatClassSetCharacter=function(i){var v=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=v,!1);var x=i.current();return x<0||x===i.lookahead()&&ND(x)||VD(x)?!1:(i.advance(),i.lastIntValue=x,!0)};function ND(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function VD(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}Xt.regexp_eatClassSetReservedPunctuator=function(i){var v=i.current();return zD(v)?(i.lastIntValue=v,i.advance(),!0):!1};function zD(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}Xt.regexp_eatClassControlLetter=function(i){var v=i.current();return aa(v)||v===95?(i.lastIntValue=v%32,i.advance(),!0):!1};Xt.regexp_eatHexEscapeSequence=function(i){var v=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=v}return!1};Xt.regexp_eatDecimalDigits=function(i){var v=i.pos,x=0;for(i.lastIntValue=0;aa(x=i.current());)i.lastIntValue=10*i.lastIntValue+(x-48),i.advance();return i.pos!==v};function aa(i){return i>=48&&i<=57}Xt.regexp_eatHexDigits=function(i){var v=i.pos,x=0;for(i.lastIntValue=0;_M(x=i.current());)i.lastIntValue=16*i.lastIntValue+tC(x),i.advance();return i.pos!==v};function _M(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function tC(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}Xt.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var v=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var x=i.lastIntValue;v<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=v*64+x*8+i.lastIntValue:i.lastIntValue=v*8+x}else i.lastIntValue=v;return!0}return!1};Xt.regexp_eatOctalDigit=function(i){var v=i.current();return eC(v)?(i.lastIntValue=v-48,i.advance(),!0):(i.lastIntValue=0,!1)};function eC(i){return i>=48&&i<=55}Xt.regexp_eatFixedHexDigits=function(i,v){var x=i.pos;i.lastIntValue=0;for(var T=0;T<v;++T){var F=i.current();if(!_M(F))return i.pos=x,!1;i.lastIntValue=16*i.lastIntValue+tC(F),i.advance()}return!0};var qh=function(i){this.type=i.type,this.value=i.value,this.start=i.start,this.end=i.end,i.options.locations&&(this.loc=new sa(i,i.startLoc,i.endLoc)),i.options.ranges&&(this.range=[i.start,i.end])},re=we.prototype;re.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new qh(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};re.getToken=function(){return this.next(),new qh(this)};typeof Symbol<"u"&&(re[Symbol.iterator]=function(){var i=this;return{next:function(){var v=i.getToken();return{done:v.type===_.eof,value:v}}}});re.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(_.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())};re.readToken=function(i){return $i(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)};re.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var v=this.input.charCodeAt(this.pos+1);return v<=56319||v>=57344?i:(i<<10)+v-56613888};re.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),v=this.pos,x=this.input.indexOf("*/",this.pos+=2);if(x===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=x+2,this.options.locations)for(var T=void 0,F=v;(T=EM(this.input,F,this.pos))>-1;)++this.curLine,F=this.lineStart=T;this.options.onComment&&this.options.onComment(!0,this.input.slice(v+2,x),v,this.pos,i,this.curPosition())};re.skipLineComment=function(i){for(var v=this.pos,x=this.options.onComment&&this.curPosition(),T=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!on(T);)T=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(v+i,this.pos),v,this.pos,x,this.curPosition())};re.skipSpace=function(){t:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(i>8&&i<14||i>=5760&&PM.test(String.fromCharCode(i)))++this.pos;else break t}}};re.finishToken=function(i,v){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var x=this.type;this.type=i,this.value=v,this.updateContext(x)};re.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var v=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&v===46?(this.pos+=3,this.finishToken(_.ellipsis)):(++this.pos,this.finishToken(_.dot))};re.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(_.assign,2):this.finishOp(_.slash,1)};re.readToken_mult_modulo_exp=function(i){var v=this.input.charCodeAt(this.pos+1),x=1,T=i===42?_.star:_.modulo;return this.options.ecmaVersion>=7&&i===42&&v===42&&(++x,T=_.starstar,v=this.input.charCodeAt(this.pos+2)),v===61?this.finishOp(_.assign,x+1):this.finishOp(T,x)};re.readToken_pipe_amp=function(i){var v=this.input.charCodeAt(this.pos+1);if(v===i){if(this.options.ecmaVersion>=12){var x=this.input.charCodeAt(this.pos+2);if(x===61)return this.finishOp(_.assign,3)}return this.finishOp(i===124?_.logicalOR:_.logicalAND,2)}return v===61?this.finishOp(_.assign,2):this.finishOp(i===124?_.bitwiseOR:_.bitwiseAND,1)};re.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(_.assign,2):this.finishOp(_.bitwiseXOR,1)};re.readToken_plus_min=function(i){var v=this.input.charCodeAt(this.pos+1);return v===i?v===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||pi.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(_.incDec,2):v===61?this.finishOp(_.assign,2):this.finishOp(_.plusMin,1)};re.readToken_lt_gt=function(i){var v=this.input.charCodeAt(this.pos+1),x=1;return v===i?(x=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+x)===61?this.finishOp(_.assign,x+1):this.finishOp(_.bitShift,x)):v===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(v===61&&(x=2),this.finishOp(_.relational,x))};re.readToken_eq_excl=function(i){var v=this.input.charCodeAt(this.pos+1);return v===61?this.finishOp(_.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&v===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(_.arrow)):this.finishOp(i===61?_.eq:_.prefix,1)};re.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var v=this.input.charCodeAt(this.pos+1);if(v===46){var x=this.input.charCodeAt(this.pos+2);if(x<48||x>57)return this.finishOp(_.questionDot,2)}if(v===63){if(i>=12){var T=this.input.charCodeAt(this.pos+2);if(T===61)return this.finishOp(_.assign,3)}return this.finishOp(_.coalesce,2)}}return this.finishOp(_.question,1)};re.readToken_numberSign=function(){var i=this.options.ecmaVersion,v=35;if(i>=13&&(++this.pos,v=this.fullCharCodeAtPos(),$i(v,!0)||v===92))return this.finishToken(_.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+qi(v)+"'")};re.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(_.parenL);case 41:return++this.pos,this.finishToken(_.parenR);case 59:return++this.pos,this.finishToken(_.semi);case 44:return++this.pos,this.finishToken(_.comma);case 91:return++this.pos,this.finishToken(_.bracketL);case 93:return++this.pos,this.finishToken(_.bracketR);case 123:return++this.pos,this.finishToken(_.braceL);case 125:return++this.pos,this.finishToken(_.braceR);case 58:return++this.pos,this.finishToken(_.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(_.backQuote);case 48:var v=this.input.charCodeAt(this.pos+1);if(v===120||v===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(v===111||v===79)return this.readRadixNumber(8);if(v===98||v===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(_.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+qi(i)+"'")};re.finishOp=function(i,v){var x=this.input.slice(this.pos,this.pos+v);return this.pos+=v,this.finishToken(i,x)};re.readRegexp=function(){for(var i,v,x=this.pos;;){this.pos>=this.input.length&&this.raise(x,"Unterminated regular expression");var T=this.input.charAt(this.pos);if(pi.test(T)&&this.raise(x,"Unterminated regular expression"),i)i=!1;else{if(T==="[")v=!0;else if(T==="]"&&v)v=!1;else if(T==="/"&&!v)break;i=T==="\\"}++this.pos}var F=this.input.slice(x,this.pos);++this.pos;var D=this.pos,p=this.readWord1();this.containsEsc&&this.unexpected(D);var M=this.regexpState||(this.regexpState=new Yi(this));M.reset(x,F,p),this.validateRegExpFlags(M),this.validateRegExpPattern(M);var t=null;try{t=new RegExp(F,p)}catch{}return this.finishToken(_.regexp,{pattern:F,flags:p,value:t})};re.readInt=function(i,v,x){for(var T=this.options.ecmaVersion>=12&&v===void 0,F=x&&this.input.charCodeAt(this.pos)===48,D=this.pos,p=0,M=0,t=0,h=v??1/0;t<h;++t,++this.pos){var g=this.input.charCodeAt(this.pos),o=void 0;if(T&&g===95){F&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),M===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),t===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),M=g;continue}if(g>=97?o=g-97+10:g>=65?o=g-65+10:g>=48&&g<=57?o=g-48:o=1/0,o>=i)break;M=g,p=p*i+o}return T&&M===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===D||v!=null&&this.pos-D!==v?null:p};function WD(i,v){return v?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function iC(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}re.readRadixNumber=function(i){var v=this.pos;this.pos+=2;var x=this.readInt(i);return x==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(x=iC(this.input.slice(v,this.pos)),++this.pos):$i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(_.num,x)};re.readNumber=function(i){var v=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(v,"Invalid number");var x=this.pos-v>=2&&this.input.charCodeAt(v)===48;x&&this.strict&&this.raise(v,"Invalid number");var T=this.input.charCodeAt(this.pos);if(!x&&!i&&this.options.ecmaVersion>=11&&T===110){var F=iC(this.input.slice(v,this.pos));return++this.pos,$i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(_.num,F)}x&&/[89]/.test(this.input.slice(v,this.pos))&&(x=!1),T===46&&!x&&(++this.pos,this.readInt(10),T=this.input.charCodeAt(this.pos)),(T===69||T===101)&&!x&&(T=this.input.charCodeAt(++this.pos),(T===43||T===45)&&++this.pos,this.readInt(10)===null&&this.raise(v,"Invalid number")),$i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var D=WD(this.input.slice(v,this.pos),x);return this.finishToken(_.num,D)};re.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),v;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var x=++this.pos;v=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,v>1114111&&this.invalidStringToken(x,"Code point out of bounds")}else v=this.readHexChar(4);return v};re.readString=function(i){for(var v="",x=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var T=this.input.charCodeAt(this.pos);if(T===i)break;T===92?(v+=this.input.slice(x,this.pos),v+=this.readEscapedChar(!1),x=this.pos):T===8232||T===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(on(T)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return v+=this.input.slice(x,this.pos++),this.finishToken(_.string,v)};var sC={};re.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===sC)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1};re.invalidStringToken=function(i,v){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw sC;this.raise(i,v)};re.readTmplToken=function(){for(var i="",v=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var x=this.input.charCodeAt(this.pos);if(x===96||x===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===_.template||this.type===_.invalidTemplate)?x===36?(this.pos+=2,this.finishToken(_.dollarBraceL)):(++this.pos,this.finishToken(_.backQuote)):(i+=this.input.slice(v,this.pos),this.finishToken(_.template,i));if(x===92)i+=this.input.slice(v,this.pos),i+=this.readEscapedChar(!0),v=this.pos;else if(on(x)){switch(i+=this.input.slice(v,this.pos),++this.pos,x){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(x);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),v=this.pos}else++this.pos}};re.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(_.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};re.readEscapedChar=function(i){var v=this.input.charCodeAt(++this.pos);switch(++this.pos,v){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return qi(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var x=this.pos-1;this.invalidStringToken(x,"Invalid escape sequence in template string")}default:if(v>=48&&v<=55){var T=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],F=parseInt(T,8);return F>255&&(T=T.slice(0,-1),F=parseInt(T,8)),this.pos+=T.length-1,v=this.input.charCodeAt(this.pos),(T!=="0"||v===56||v===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-T.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(F)}return on(v)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(v)}};re.readHexChar=function(i){var v=this.pos,x=this.readInt(16,i);return x===null&&this.invalidStringToken(v,"Bad character escape sequence"),x};re.readWord1=function(){this.containsEsc=!1;for(var i="",v=!0,x=this.pos,T=this.options.ecmaVersion>=6;this.pos<this.input.length;){var F=this.fullCharCodeAtPos();if(tn(F,T))this.pos+=F<=65535?1:2;else if(F===92){this.containsEsc=!0,i+=this.input.slice(x,this.pos);var D=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var p=this.readCodePoint();(v?$i:tn)(p,T)||this.invalidStringToken(D,"Invalid Unicode escape"),i+=qi(p),x=this.pos}else break;v=!1}return i+this.input.slice(x,this.pos)};re.readWord=function(){var i=this.readWord1(),v=_.name;return this.keywords.test(i)&&(v=Hh[i]),this.finishToken(v,i)};var YD="8.14.0";we.acorn={Parser:we,version:YD,defaultOptions:Go,Position:Un,SourceLocation:sa,getLineInfo:FM,Node:ra,TokenType:ue,tokTypes:_,keywordTypes:Hh,TokContext:Mi,tokContexts:Ee,isIdentifierChar:tn,isIdentifierStart:$i,Token:qh,isNewLine:on,lineBreak:pi,lineBreakG:lD,nonASCIIwhitespace:PM};function ZD(i,v){return we.parse(i,v)}var UD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function HD(i){if(i.__esModule)return i;var v=i.default;if(typeof v=="function"){var x=function T(){return this instanceof T?Reflect.construct(v,arguments,this.constructor):v.apply(this,arguments)};x.prototype=v.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(i).forEach(function(T){var F=Object.getOwnPropertyDescriptor(i,T);Object.defineProperty(x,T,F.get?F:{enumerable:!0,get:function(){return i[T]}})}),x}var Ml={},Cl={},Sl;function KD(){return Sl||(Sl=1,(function(i){(function v(x){var T,F,D,p,M,t;function h(f){var m={},y,S;for(y in f)f.hasOwnProperty(y)&&(S=f[y],typeof S=="object"&&S!==null?m[y]=h(S):m[y]=S);return m}function g(f,m){var y,S,C,E;for(S=f.length,C=0;S;)y=S>>>1,E=C+y,m(f[E])?S=y:(C=E+1,S-=y+1);return C}T={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},D={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},p={},M={},t={},F={Break:p,Skip:M,Remove:t};function o(f,m){this.parent=f,this.key=m}o.prototype.replace=function(f){this.parent[this.key]=f},o.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function a(f,m,y,S){this.node=f,this.path=m,this.wrap=y,this.ref=S}function r(){}r.prototype.path=function(){var f,m,y,S,C,E;function P(A,R){if(Array.isArray(R))for(y=0,S=R.length;y<S;++y)A.push(R[y]);else A.push(R)}if(!this.__current.path)return null;for(C=[],f=2,m=this.__leavelist.length;f<m;++f)E=this.__leavelist[f],P(C,E.path);return P(C,this.__current.path),C},r.prototype.type=function(){var f=this.current();return f.type||this.__current.wrap},r.prototype.parents=function(){var f,m,y;for(y=[],f=1,m=this.__leavelist.length;f<m;++f)y.push(this.__leavelist[f].node);return y},r.prototype.current=function(){return this.__current.node},r.prototype.__execute=function(f,m){var y,S;return S=void 0,y=this.__current,this.__current=m,this.__state=null,f&&(S=f.call(this,m.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=y,S},r.prototype.notify=function(f){this.__state=f},r.prototype.skip=function(){this.notify(M)},r.prototype.break=function(){this.notify(p)},r.prototype.remove=function(){this.notify(t)},r.prototype.__initialize=function(f,m){this.visitor=m,this.root=f,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,m.fallback==="iteration"?this.__fallback=Object.keys:typeof m.fallback=="function"&&(this.__fallback=m.fallback),this.__keys=D,m.keys&&(this.__keys=Object.assign(Object.create(this.__keys),m.keys))};function e(f){return f==null?!1:typeof f=="object"&&typeof f.type=="string"}function n(f,m){return(f===T.ObjectExpression||f===T.ObjectPattern)&&m==="properties"}function u(f,m){for(var y=f.length-1;y>=0;--y)if(f[y].node===m)return!0;return!1}r.prototype.traverse=function(f,m){var y,S,C,E,P,A,R,G,b,L,w,B;for(this.__initialize(f,m),B={},y=this.__worklist,S=this.__leavelist,y.push(new a(f,null,null,null)),S.push(new a(null,null,null,null));y.length;){if(C=y.pop(),C===B){if(C=S.pop(),A=this.__execute(m.leave,C),this.__state===p||A===p)return;continue}if(C.node){if(A=this.__execute(m.enter,C),this.__state===p||A===p)return;if(y.push(B),S.push(C),this.__state===M||A===M)continue;if(E=C.node,P=E.type||C.wrap,L=this.__keys[P],!L)if(this.__fallback)L=this.__fallback(E);else throw new Error("Unknown node type "+P+".");for(G=L.length;(G-=1)>=0;)if(R=L[G],w=E[R],!!w){if(Array.isArray(w)){for(b=w.length;(b-=1)>=0;)if(w[b]&&!u(S,w[b])){if(n(P,L[G]))C=new a(w[b],[R,b],"Property",null);else if(e(w[b]))C=new a(w[b],[R,b],null,null);else continue;y.push(C)}}else if(e(w)){if(u(S,w))continue;y.push(new a(w,R,null,null))}}}}},r.prototype.replace=function(f,m){var y,S,C,E,P,A,R,G,b,L,w,B,N;function Y(U){var W,O,V,X;if(U.ref.remove()){for(O=U.ref.key,X=U.ref.parent,W=y.length;W--;)if(V=y[W],V.ref&&V.ref.parent===X){if(V.ref.key<O)break;--V.ref.key}}}for(this.__initialize(f,m),w={},y=this.__worklist,S=this.__leavelist,B={root:f},A=new a(f,null,null,new o(B,"root")),y.push(A),S.push(A);y.length;){if(A=y.pop(),A===w){if(A=S.pop(),P=this.__execute(m.leave,A),P!==void 0&&P!==p&&P!==M&&P!==t&&A.ref.replace(P),(this.__state===t||P===t)&&Y(A),this.__state===p||P===p)return B.root;continue}if(P=this.__execute(m.enter,A),P!==void 0&&P!==p&&P!==M&&P!==t&&(A.ref.replace(P),A.node=P),(this.__state===t||P===t)&&(Y(A),A.node=null),this.__state===p||P===p)return B.root;if(C=A.node,!!C&&(y.push(w),S.push(A),!(this.__state===M||P===M))){if(E=C.type||A.wrap,b=this.__keys[E],!b)if(this.__fallback)b=this.__fallback(C);else throw new Error("Unknown node type "+E+".");for(R=b.length;(R-=1)>=0;)if(N=b[R],L=C[N],!!L)if(Array.isArray(L)){for(G=L.length;(G-=1)>=0;)if(L[G]){if(n(E,b[R]))A=new a(L[G],[N,G],"Property",new o(L,G));else if(e(L[G]))A=new a(L[G],[N,G],null,new o(L,G));else continue;y.push(A)}}else e(L)&&y.push(new a(L,N,null,new o(C,N)))}}return B.root};function s(f,m){var y=new r;return y.traverse(f,m)}function l(f,m){var y=new r;return y.replace(f,m)}function c(f,m){var y;return y=g(m,function(S){return S.range[0]>f.range[0]}),f.extendedRange=[f.range[0],f.range[1]],y!==m.length&&(f.extendedRange[1]=m[y].range[0]),y-=1,y>=0&&(f.extendedRange[0]=m[y].range[1]),f}function d(f,m,y){var S=[],C,E,P,A;if(!f.range)throw new Error("attachComments needs range information");if(!y.length){if(m.length){for(P=0,E=m.length;P<E;P+=1)C=h(m[P]),C.extendedRange=[0,f.range[0]],S.push(C);f.leadingComments=S}return f}for(P=0,E=m.length;P<E;P+=1)S.push(c(h(m[P]),y));return A=0,s(f,{enter:function(R){for(var G;A<S.length&&(G=S[A],!(G.extendedRange[1]>R.range[0]));)G.extendedRange[1]===R.range[0]?(R.leadingComments||(R.leadingComments=[]),R.leadingComments.push(G),S.splice(A,1)):A+=1;if(A===S.length)return F.Break;if(S[A].extendedRange[0]>R.range[1])return F.Skip}}),A=0,s(f,{leave:function(R){for(var G;A<S.length&&(G=S[A],!(R.range[1]<G.extendedRange[0]));)R.range[1]===G.extendedRange[0]?(R.trailingComments||(R.trailingComments=[]),R.trailingComments.push(G),S.splice(A,1)):A+=1;if(A===S.length)return F.Break;if(S[A].extendedRange[0]>R.range[1])return F.Skip}}),f}return x.Syntax=T,x.traverse=s,x.replace=l,x.attachComments=d,x.VisitorKeys=D,x.VisitorOption=F,x.Controller=r,x.cloneEnvironment=function(){return v({})},x})(i)})(Cl)),Cl}var gr={},Tl={exports:{}},El;function JD(){return El||(El=1,(function(){function i(p){if(p==null)return!1;switch(p.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function v(p){if(p==null)return!1;switch(p.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function x(p){if(p==null)return!1;switch(p.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function T(p){return x(p)||p!=null&&p.type==="FunctionDeclaration"}function F(p){switch(p.type){case"IfStatement":return p.alternate!=null?p.alternate:p.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return p.body}return null}function D(p){var M;if(p.type!=="IfStatement"||p.alternate==null)return!1;M=p.consequent;do{if(M.type==="IfStatement"&&M.alternate==null)return!0;M=F(M)}while(M);return!1}Tl.exports={isExpression:i,isStatement:x,isIterationStatement:v,isSourceElement:T,isProblematicIfStatement:D,trailingStatement:F}})()),Tl.exports}var Pl={exports:{}},Al;function rC(){return Al||(Al=1,(function(){var i,v,x,T,F,D;v={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},i={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function p(u){return 48<=u&&u<=57}function M(u){return 48<=u&&u<=57||97<=u&&u<=102||65<=u&&u<=70}function t(u){return u>=48&&u<=55}x=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function h(u){return u===32||u===9||u===11||u===12||u===160||u>=5760&&x.indexOf(u)>=0}function g(u){return u===10||u===13||u===8232||u===8233}function o(u){if(u<=65535)return String.fromCharCode(u);var s=String.fromCharCode(Math.floor((u-65536)/1024)+55296),l=String.fromCharCode((u-65536)%1024+56320);return s+l}for(T=new Array(128),D=0;D<128;++D)T[D]=D>=97&&D<=122||D>=65&&D<=90||D===36||D===95;for(F=new Array(128),D=0;D<128;++D)F[D]=D>=97&&D<=122||D>=65&&D<=90||D>=48&&D<=57||D===36||D===95;function a(u){return u<128?T[u]:v.NonAsciiIdentifierStart.test(o(u))}function r(u){return u<128?F[u]:v.NonAsciiIdentifierPart.test(o(u))}function e(u){return u<128?T[u]:i.NonAsciiIdentifierStart.test(o(u))}function n(u){return u<128?F[u]:i.NonAsciiIdentifierPart.test(o(u))}Pl.exports={isDecimalDigit:p,isHexDigit:M,isOctalDigit:t,isWhiteSpace:h,isLineTerminator:g,isIdentifierStartES5:a,isIdentifierPartES5:r,isIdentifierStartES6:e,isIdentifierPartES6:n}})()),Pl.exports}var Fl={exports:{}},Rl;function kD(){return Rl||(Rl=1,(function(){var i=rC();function v(a){switch(a){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function x(a,r){return!r&&a==="yield"?!1:T(a,r)}function T(a,r){if(r&&v(a))return!0;switch(a.length){case 2:return a==="if"||a==="in"||a==="do";case 3:return a==="var"||a==="for"||a==="new"||a==="try";case 4:return a==="this"||a==="else"||a==="case"||a==="void"||a==="with"||a==="enum";case 5:return a==="while"||a==="break"||a==="catch"||a==="throw"||a==="const"||a==="yield"||a==="class"||a==="super";case 6:return a==="return"||a==="typeof"||a==="delete"||a==="switch"||a==="export"||a==="import";case 7:return a==="default"||a==="finally"||a==="extends";case 8:return a==="function"||a==="continue"||a==="debugger";case 10:return a==="instanceof";default:return!1}}function F(a,r){return a==="null"||a==="true"||a==="false"||x(a,r)}function D(a,r){return a==="null"||a==="true"||a==="false"||T(a,r)}function p(a){return a==="eval"||a==="arguments"}function M(a){var r,e,n;if(a.length===0||(n=a.charCodeAt(0),!i.isIdentifierStartES5(n)))return!1;for(r=1,e=a.length;r<e;++r)if(n=a.charCodeAt(r),!i.isIdentifierPartES5(n))return!1;return!0}function t(a,r){return(a-55296)*1024+(r-56320)+65536}function h(a){var r,e,n,u,s;if(a.length===0)return!1;for(s=i.isIdentifierStartES6,r=0,e=a.length;r<e;++r){if(n=a.charCodeAt(r),55296<=n&&n<=56319){if(++r,r>=e||(u=a.charCodeAt(r),!(56320<=u&&u<=57343)))return!1;n=t(n,u)}if(!s(n))return!1;s=i.isIdentifierPartES6}return!0}function g(a,r){return M(a)&&!F(a,r)}function o(a,r){return h(a)&&!D(a,r)}Fl.exports={isKeywordES5:x,isKeywordES6:T,isReservedWordES5:F,isReservedWordES6:D,isRestrictedWord:p,isIdentifierNameES5:M,isIdentifierNameES6:h,isIdentifierES5:g,isIdentifierES6:o}})()),Fl.exports}var Ll;function jD(){return Ll||(Ll=1,(function(){gr.ast=JD(),gr.code=rC(),gr.keyword=kD()})()),gr}var xr={},ka={},yr={},Mr={},bl;function QD(){if(bl)return Mr;bl=1;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return Mr.encode=function(v){if(0<=v&&v<i.length)return i[v];throw new TypeError("Must be between 0 and 63: "+v)},Mr.decode=function(v){var x=65,T=90,F=97,D=122,p=48,M=57,t=43,h=47,g=26,o=52;return x<=v&&v<=T?v-x:F<=v&&v<=D?v-F+g:p<=v&&v<=M?v-p+o:v==t?62:v==h?63:-1},Mr}var Dl;function aC(){if(Dl)return yr;Dl=1;var i=QD(),v=5,x=1<<v,T=x-1,F=x;function D(M){return M<0?(-M<<1)+1:(M<<1)+0}function p(M){var t=(M&1)===1,h=M>>1;return t?-h:h}return yr.encode=function(M){var t="",h,g=D(M);do h=g&T,g>>>=v,g>0&&(h|=F),t+=i.encode(h);while(g>0);return t},yr.decode=function(M,t,h){var g=M.length,o=0,a=0,r,e;do{if(t>=g)throw new Error("Expected more digits in base 64 VLQ value.");if(e=i.decode(M.charCodeAt(t++)),e===-1)throw new Error("Invalid base64 digit: "+M.charAt(t-1));r=!!(e&F),e&=T,o=o+(e<<a),a+=v}while(r);h.value=p(o),h.rest=t},yr}var Gl={},wl;function er(){return wl||(wl=1,(function(i){function v(d,f,m){if(f in d)return d[f];if(arguments.length===3)return m;throw new Error('"'+f+'" is a required argument.')}i.getArg=v;var x=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,T=/^data:.+\,.+$/;function F(d){var f=d.match(x);return f?{scheme:f[1],auth:f[2],host:f[3],port:f[4],path:f[5]}:null}i.urlParse=F;function D(d){var f="";return d.scheme&&(f+=d.scheme+":"),f+="//",d.auth&&(f+=d.auth+"@"),d.host&&(f+=d.host),d.port&&(f+=":"+d.port),d.path&&(f+=d.path),f}i.urlGenerate=D;function p(d){var f=d,m=F(d);if(m){if(!m.path)return d;f=m.path}for(var y=i.isAbsolute(f),S=f.split(/\/+/),C,E=0,P=S.length-1;P>=0;P--)C=S[P],C==="."?S.splice(P,1):C===".."?E++:E>0&&(C===""?(S.splice(P+1,E),E=0):(S.splice(P,2),E--));return f=S.join("/"),f===""&&(f=y?"/":"."),m?(m.path=f,D(m)):f}i.normalize=p;function M(d,f){d===""&&(d="."),f===""&&(f=".");var m=F(f),y=F(d);if(y&&(d=y.path||"/"),m&&!m.scheme)return y&&(m.scheme=y.scheme),D(m);if(m||f.match(T))return f;if(y&&!y.host&&!y.path)return y.host=f,D(y);var S=f.charAt(0)==="/"?f:p(d.replace(/\/+$/,"")+"/"+f);return y?(y.path=S,D(y)):S}i.join=M,i.isAbsolute=function(d){return d.charAt(0)==="/"||x.test(d)};function t(d,f){d===""&&(d="."),d=d.replace(/\/$/,"");for(var m=0;f.indexOf(d+"/")!==0;){var y=d.lastIndexOf("/");if(y<0||(d=d.slice(0,y),d.match(/^([^\/]+:\/)?\/*$/)))return f;++m}return Array(m+1).join("../")+f.substr(d.length+1)}i.relative=t;var h=(function(){var d=Object.create(null);return!("__proto__"in d)})();function g(d){return d}function o(d){return r(d)?"$"+d:d}i.toSetString=h?g:o;function a(d){return r(d)?d.slice(1):d}i.fromSetString=h?g:a;function r(d){if(!d)return!1;var f=d.length;if(f<9||d.charCodeAt(f-1)!==95||d.charCodeAt(f-2)!==95||d.charCodeAt(f-3)!==111||d.charCodeAt(f-4)!==116||d.charCodeAt(f-5)!==111||d.charCodeAt(f-6)!==114||d.charCodeAt(f-7)!==112||d.charCodeAt(f-8)!==95||d.charCodeAt(f-9)!==95)return!1;for(var m=f-10;m>=0;m--)if(d.charCodeAt(m)!==36)return!1;return!0}function e(d,f,m){var y=u(d.source,f.source);return y!==0||(y=d.originalLine-f.originalLine,y!==0)||(y=d.originalColumn-f.originalColumn,y!==0||m)||(y=d.generatedColumn-f.generatedColumn,y!==0)||(y=d.generatedLine-f.generatedLine,y!==0)?y:u(d.name,f.name)}i.compareByOriginalPositions=e;function n(d,f,m){var y=d.generatedLine-f.generatedLine;return y!==0||(y=d.generatedColumn-f.generatedColumn,y!==0||m)||(y=u(d.source,f.source),y!==0)||(y=d.originalLine-f.originalLine,y!==0)||(y=d.originalColumn-f.originalColumn,y!==0)?y:u(d.name,f.name)}i.compareByGeneratedPositionsDeflated=n;function u(d,f){return d===f?0:d===null?1:f===null?-1:d>f?1:-1}function s(d,f){var m=d.generatedLine-f.generatedLine;return m!==0||(m=d.generatedColumn-f.generatedColumn,m!==0)||(m=u(d.source,f.source),m!==0)||(m=d.originalLine-f.originalLine,m!==0)||(m=d.originalColumn-f.originalColumn,m!==0)?m:u(d.name,f.name)}i.compareByGeneratedPositionsInflated=s;function l(d){return JSON.parse(d.replace(/^\)]}'[^\n]*\n/,""))}i.parseSourceMapInput=l;function c(d,f,m){if(f=f||"",d&&(d[d.length-1]!=="/"&&f[0]!=="/"&&(d+="/"),f=d+f),m){var y=F(m);if(!y)throw new Error("sourceMapURL could not be parsed");if(y.path){var S=y.path.lastIndexOf("/");S>=0&&(y.path=y.path.substring(0,S+1))}f=M(D(y),f)}return p(f)}i.computeSourceURL=c})(Gl)),Gl}var ja={},Bl;function oC(){if(Bl)return ja;Bl=1;var i=er(),v=Object.prototype.hasOwnProperty,x=typeof Map<"u";function T(){this._array=[],this._set=x?new Map:Object.create(null)}return T.fromArray=function(F,D){for(var p=new T,M=0,t=F.length;M<t;M++)p.add(F[M],D);return p},T.prototype.size=function(){return x?this._set.size:Object.getOwnPropertyNames(this._set).length},T.prototype.add=function(F,D){var p=x?F:i.toSetString(F),M=x?this.has(F):v.call(this._set,p),t=this._array.length;(!M||D)&&this._array.push(F),M||(x?this._set.set(F,t):this._set[p]=t)},T.prototype.has=function(F){if(x)return this._set.has(F);var D=i.toSetString(F);return v.call(this._set,D)},T.prototype.indexOf=function(F){if(x){var D=this._set.get(F);if(D>=0)return D}else{var p=i.toSetString(F);if(v.call(this._set,p))return this._set[p]}throw new Error('"'+F+'" is not in the set.')},T.prototype.at=function(F){if(F>=0&&F<this._array.length)return this._array[F];throw new Error("No element indexed by "+F)},T.prototype.toArray=function(){return this._array.slice()},ja.ArraySet=T,ja}var Qa={},Xl;function $D(){if(Xl)return Qa;Xl=1;var i=er();function v(T,F){var D=T.generatedLine,p=F.generatedLine,M=T.generatedColumn,t=F.generatedColumn;return p>D||p==D&&t>=M||i.compareByGeneratedPositionsInflated(T,F)<=0}function x(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return x.prototype.unsortedForEach=function(T,F){this._array.forEach(T,F)},x.prototype.add=function(T){v(this._last,T)?(this._last=T,this._array.push(T)):(this._sorted=!1,this._array.push(T))},x.prototype.toArray=function(){return this._sorted||(this._array.sort(i.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Qa.MappingList=x,Qa}var Il;function hC(){if(Il)return ka;Il=1;var i=aC(),v=er(),x=oC().ArraySet,T=$D().MappingList;function F(D){D||(D={}),this._file=v.getArg(D,"file",null),this._sourceRoot=v.getArg(D,"sourceRoot",null),this._skipValidation=v.getArg(D,"skipValidation",!1),this._sources=new x,this._names=new x,this._mappings=new T,this._sourcesContents=null}return F.prototype._version=3,F.fromSourceMap=function(D){var p=D.sourceRoot,M=new F({file:D.file,sourceRoot:p});return D.eachMapping(function(t){var h={generated:{line:t.generatedLine,column:t.generatedColumn}};t.source!=null&&(h.source=t.source,p!=null&&(h.source=v.relative(p,h.source)),h.original={line:t.originalLine,column:t.originalColumn},t.name!=null&&(h.name=t.name)),M.addMapping(h)}),D.sources.forEach(function(t){var h=t;p!==null&&(h=v.relative(p,t)),M._sources.has(h)||M._sources.add(h);var g=D.sourceContentFor(t);g!=null&&M.setSourceContent(t,g)}),M},F.prototype.addMapping=function(D){var p=v.getArg(D,"generated"),M=v.getArg(D,"original",null),t=v.getArg(D,"source",null),h=v.getArg(D,"name",null);this._skipValidation||this._validateMapping(p,M,t,h),t!=null&&(t=String(t),this._sources.has(t)||this._sources.add(t)),h!=null&&(h=String(h),this._names.has(h)||this._names.add(h)),this._mappings.add({generatedLine:p.line,generatedColumn:p.column,originalLine:M!=null&&M.line,originalColumn:M!=null&&M.column,source:t,name:h})},F.prototype.setSourceContent=function(D,p){var M=D;this._sourceRoot!=null&&(M=v.relative(this._sourceRoot,M)),p!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[v.toSetString(M)]=p):this._sourcesContents&&(delete this._sourcesContents[v.toSetString(M)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},F.prototype.applySourceMap=function(D,p,M){var t=p;if(p==null){if(D.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);t=D.file}var h=this._sourceRoot;h!=null&&(t=v.relative(h,t));var g=new x,o=new x;this._mappings.unsortedForEach(function(a){if(a.source===t&&a.originalLine!=null){var r=D.originalPositionFor({line:a.originalLine,column:a.originalColumn});r.source!=null&&(a.source=r.source,M!=null&&(a.source=v.join(M,a.source)),h!=null&&(a.source=v.relative(h,a.source)),a.originalLine=r.line,a.originalColumn=r.column,r.name!=null&&(a.name=r.name))}var e=a.source;e!=null&&!g.has(e)&&g.add(e);var n=a.name;n!=null&&!o.has(n)&&o.add(n)},this),this._sources=g,this._names=o,D.sources.forEach(function(a){var r=D.sourceContentFor(a);r!=null&&(M!=null&&(a=v.join(M,a)),h!=null&&(a=v.relative(h,a)),this.setSourceContent(a,r))},this)},F.prototype._validateMapping=function(D,p,M,t){if(p&&typeof p.line!="number"&&typeof p.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(D&&"line"in D&&"column"in D&&D.line>0&&D.column>=0&&!p&&!M&&!t)){if(D&&"line"in D&&"column"in D&&p&&"line"in p&&"column"in p&&D.line>0&&D.column>=0&&p.line>0&&p.column>=0&&M)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:D,source:M,original:p,name:t}))}},F.prototype._serializeMappings=function(){for(var D=0,p=1,M=0,t=0,h=0,g=0,o="",a,r,e,n,u=this._mappings.toArray(),s=0,l=u.length;s<l;s++){if(r=u[s],a="",r.generatedLine!==p)for(D=0;r.generatedLine!==p;)a+=";",p++;else if(s>0){if(!v.compareByGeneratedPositionsInflated(r,u[s-1]))continue;a+=","}a+=i.encode(r.generatedColumn-D),D=r.generatedColumn,r.source!=null&&(n=this._sources.indexOf(r.source),a+=i.encode(n-g),g=n,a+=i.encode(r.originalLine-1-t),t=r.originalLine-1,a+=i.encode(r.originalColumn-M),M=r.originalColumn,r.name!=null&&(e=this._names.indexOf(r.name),a+=i.encode(e-h),h=e)),o+=a}return o},F.prototype._generateSourcesContent=function(D,p){return D.map(function(M){if(!this._sourcesContents)return null;p!=null&&(M=v.relative(p,M));var t=v.toSetString(M);return Object.prototype.hasOwnProperty.call(this._sourcesContents,t)?this._sourcesContents[t]:null},this)},F.prototype.toJSON=function(){var D={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(D.file=this._file),this._sourceRoot!=null&&(D.sourceRoot=this._sourceRoot),this._sourcesContents&&(D.sourcesContent=this._generateSourcesContent(D.sources,D.sourceRoot)),D},F.prototype.toString=function(){return JSON.stringify(this.toJSON())},ka.SourceMapGenerator=F,ka}var Sn={},Ol={},Nl;function qD(){return Nl||(Nl=1,(function(i){i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2;function v(x,T,F,D,p,M){var t=Math.floor((T-x)/2)+x,h=p(F,D[t],!0);return h===0?t:h>0?T-t>1?v(t,T,F,D,p,M):M==i.LEAST_UPPER_BOUND?T<D.length?T:-1:t:t-x>1?v(x,t,F,D,p,M):M==i.LEAST_UPPER_BOUND?t:x<0?-1:x}i.search=function(x,T,F,D){if(T.length===0)return-1;var p=v(-1,T.length,x,T,F,D||i.GREATEST_LOWER_BOUND);if(p<0)return-1;for(;p-1>=0&&F(T[p],T[p-1],!0)===0;)--p;return p}})(Ol)),Ol}var $a={},Vl;function _D(){if(Vl)return $a;Vl=1;function i(T,F,D){var p=T[F];T[F]=T[D],T[D]=p}function v(T,F){return Math.round(T+Math.random()*(F-T))}function x(T,F,D,p){if(D<p){var M=v(D,p),t=D-1;i(T,M,p);for(var h=T[p],g=D;g<p;g++)F(T[g],h)<=0&&(t+=1,i(T,t,g));i(T,t+1,g);var o=t+1;x(T,F,D,o-1),x(T,F,o+1,p)}}return $a.quickSort=function(T,F){x(T,F,0,T.length-1)},$a}var zl;function tG(){if(zl)return Sn;zl=1;var i=er(),v=qD(),x=oC().ArraySet,T=aC(),F=_D().quickSort;function D(h,g){var o=h;return typeof h=="string"&&(o=i.parseSourceMapInput(h)),o.sections!=null?new t(o,g):new p(o,g)}D.fromSourceMap=function(h,g){return p.fromSourceMap(h,g)},D.prototype._version=3,D.prototype.__generatedMappings=null,Object.defineProperty(D.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),D.prototype.__originalMappings=null,Object.defineProperty(D.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),D.prototype._charIsMappingSeparator=function(h,g){var o=h.charAt(g);return o===";"||o===","},D.prototype._parseMappings=function(h,g){throw new Error("Subclasses must implement _parseMappings")},D.GENERATED_ORDER=1,D.ORIGINAL_ORDER=2,D.GREATEST_LOWER_BOUND=1,D.LEAST_UPPER_BOUND=2,D.prototype.eachMapping=function(h,g,o){var a=g||null,r=o||D.GENERATED_ORDER,e;switch(r){case D.GENERATED_ORDER:e=this._generatedMappings;break;case D.ORIGINAL_ORDER:e=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var n=this.sourceRoot;e.map(function(u){var s=u.source===null?null:this._sources.at(u.source);return s=i.computeSourceURL(n,s,this._sourceMapURL),{source:s,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(h,a)},D.prototype.allGeneratedPositionsFor=function(h){var g=i.getArg(h,"line"),o={source:i.getArg(h,"source"),originalLine:g,originalColumn:i.getArg(h,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var a=[],r=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,v.LEAST_UPPER_BOUND);if(r>=0){var e=this._originalMappings[r];if(h.column===void 0)for(var n=e.originalLine;e&&e.originalLine===n;)a.push({line:i.getArg(e,"generatedLine",null),column:i.getArg(e,"generatedColumn",null),lastColumn:i.getArg(e,"lastGeneratedColumn",null)}),e=this._originalMappings[++r];else for(var u=e.originalColumn;e&&e.originalLine===g&&e.originalColumn==u;)a.push({line:i.getArg(e,"generatedLine",null),column:i.getArg(e,"generatedColumn",null),lastColumn:i.getArg(e,"lastGeneratedColumn",null)}),e=this._originalMappings[++r]}return a},Sn.SourceMapConsumer=D;function p(h,g){var o=h;typeof h=="string"&&(o=i.parseSourceMapInput(h));var a=i.getArg(o,"version"),r=i.getArg(o,"sources"),e=i.getArg(o,"names",[]),n=i.getArg(o,"sourceRoot",null),u=i.getArg(o,"sourcesContent",null),s=i.getArg(o,"mappings"),l=i.getArg(o,"file",null);if(a!=this._version)throw new Error("Unsupported version: "+a);n&&(n=i.normalize(n)),r=r.map(String).map(i.normalize).map(function(c){return n&&i.isAbsolute(n)&&i.isAbsolute(c)?i.relative(n,c):c}),this._names=x.fromArray(e.map(String),!0),this._sources=x.fromArray(r,!0),this._absoluteSources=this._sources.toArray().map(function(c){return i.computeSourceURL(n,c,g)}),this.sourceRoot=n,this.sourcesContent=u,this._mappings=s,this._sourceMapURL=g,this.file=l}p.prototype=Object.create(D.prototype),p.prototype.consumer=D,p.prototype._findSourceIndex=function(h){var g=h;if(this.sourceRoot!=null&&(g=i.relative(this.sourceRoot,g)),this._sources.has(g))return this._sources.indexOf(g);var o;for(o=0;o<this._absoluteSources.length;++o)if(this._absoluteSources[o]==h)return o;return-1},p.fromSourceMap=function(h,g){var o=Object.create(p.prototype),a=o._names=x.fromArray(h._names.toArray(),!0),r=o._sources=x.fromArray(h._sources.toArray(),!0);o.sourceRoot=h._sourceRoot,o.sourcesContent=h._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=h._file,o._sourceMapURL=g,o._absoluteSources=o._sources.toArray().map(function(f){return i.computeSourceURL(o.sourceRoot,f,g)});for(var e=h._mappings.toArray().slice(),n=o.__generatedMappings=[],u=o.__originalMappings=[],s=0,l=e.length;s<l;s++){var c=e[s],d=new M;d.generatedLine=c.generatedLine,d.generatedColumn=c.generatedColumn,c.source&&(d.source=r.indexOf(c.source),d.originalLine=c.originalLine,d.originalColumn=c.originalColumn,c.name&&(d.name=a.indexOf(c.name)),u.push(d)),n.push(d)}return F(o.__originalMappings,i.compareByOriginalPositions),o},p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function M(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}p.prototype._parseMappings=function(h,g){for(var o=1,a=0,r=0,e=0,n=0,u=0,s=h.length,l=0,c={},d={},f=[],m=[],y,S,C,E,P;l<s;)if(h.charAt(l)===";")o++,l++,a=0;else if(h.charAt(l)===",")l++;else{for(y=new M,y.generatedLine=o,E=l;E<s&&!this._charIsMappingSeparator(h,E);E++);if(S=h.slice(l,E),C=c[S],C)l+=S.length;else{for(C=[];l<E;)T.decode(h,l,d),P=d.value,l=d.rest,C.push(P);if(C.length===2)throw new Error("Found a source, but no line and column");if(C.length===3)throw new Error("Found a source and line, but no column");c[S]=C}y.generatedColumn=a+C[0],a=y.generatedColumn,C.length>1&&(y.source=n+C[1],n+=C[1],y.originalLine=r+C[2],r=y.originalLine,y.originalLine+=1,y.originalColumn=e+C[3],e=y.originalColumn,C.length>4&&(y.name=u+C[4],u+=C[4])),m.push(y),typeof y.originalLine=="number"&&f.push(y)}F(m,i.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,F(f,i.compareByOriginalPositions),this.__originalMappings=f},p.prototype._findMapping=function(h,g,o,a,r,e){if(h[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+h[o]);if(h[a]<0)throw new TypeError("Column must be greater than or equal to 0, got "+h[a]);return v.search(h,g,r,e)},p.prototype.computeColumnSpans=function(){for(var h=0;h<this._generatedMappings.length;++h){var g=this._generatedMappings[h];if(h+1<this._generatedMappings.length){var o=this._generatedMappings[h+1];if(g.generatedLine===o.generatedLine){g.lastGeneratedColumn=o.generatedColumn-1;continue}}g.lastGeneratedColumn=1/0}},p.prototype.originalPositionFor=function(h){var g={generatedLine:i.getArg(h,"line"),generatedColumn:i.getArg(h,"column")},o=this._findMapping(g,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositionsDeflated,i.getArg(h,"bias",D.GREATEST_LOWER_BOUND));if(o>=0){var a=this._generatedMappings[o];if(a.generatedLine===g.generatedLine){var r=i.getArg(a,"source",null);r!==null&&(r=this._sources.at(r),r=i.computeSourceURL(this.sourceRoot,r,this._sourceMapURL));var e=i.getArg(a,"name",null);return e!==null&&(e=this._names.at(e)),{source:r,line:i.getArg(a,"originalLine",null),column:i.getArg(a,"originalColumn",null),name:e}}}return{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(h){return h==null}):!1},p.prototype.sourceContentFor=function(h,g){if(!this.sourcesContent)return null;var o=this._findSourceIndex(h);if(o>=0)return this.sourcesContent[o];var a=h;this.sourceRoot!=null&&(a=i.relative(this.sourceRoot,a));var r;if(this.sourceRoot!=null&&(r=i.urlParse(this.sourceRoot))){var e=a.replace(/^file:\/\//,"");if(r.scheme=="file"&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!r.path||r.path=="/")&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(g)return null;throw new Error('"'+a+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(h){var g=i.getArg(h,"source");if(g=this._findSourceIndex(g),g<0)return{line:null,column:null,lastColumn:null};var o={source:g,originalLine:i.getArg(h,"line"),originalColumn:i.getArg(h,"column")},a=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,i.getArg(h,"bias",D.GREATEST_LOWER_BOUND));if(a>=0){var r=this._originalMappings[a];if(r.source===o.source)return{line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:i.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Sn.BasicSourceMapConsumer=p;function t(h,g){var o=h;typeof h=="string"&&(o=i.parseSourceMapInput(h));var a=i.getArg(o,"version"),r=i.getArg(o,"sections");if(a!=this._version)throw new Error("Unsupported version: "+a);this._sources=new x,this._names=new x;var e={line:-1,column:0};this._sections=r.map(function(n){if(n.url)throw new Error("Support for url field in sections not implemented.");var u=i.getArg(n,"offset"),s=i.getArg(u,"line"),l=i.getArg(u,"column");if(s<e.line||s===e.line&&l<e.column)throw new Error("Section offsets must be ordered and non-overlapping.");return e=u,{generatedOffset:{generatedLine:s+1,generatedColumn:l+1},consumer:new D(i.getArg(n,"map"),g)}})}return t.prototype=Object.create(D.prototype),t.prototype.constructor=D,t.prototype._version=3,Object.defineProperty(t.prototype,"sources",{get:function(){for(var h=[],g=0;g<this._sections.length;g++)for(var o=0;o<this._sections[g].consumer.sources.length;o++)h.push(this._sections[g].consumer.sources[o]);return h}}),t.prototype.originalPositionFor=function(h){var g={generatedLine:i.getArg(h,"line"),generatedColumn:i.getArg(h,"column")},o=v.search(g,this._sections,function(r,e){var n=r.generatedLine-e.generatedOffset.generatedLine;return n||r.generatedColumn-e.generatedOffset.generatedColumn}),a=this._sections[o];return a?a.consumer.originalPositionFor({line:g.generatedLine-(a.generatedOffset.generatedLine-1),column:g.generatedColumn-(a.generatedOffset.generatedLine===g.generatedLine?a.generatedOffset.generatedColumn-1:0),bias:h.bias}):{source:null,line:null,column:null,name:null}},t.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(h){return h.consumer.hasContentsOfAllSources()})},t.prototype.sourceContentFor=function(h,g){for(var o=0;o<this._sections.length;o++){var a=this._sections[o],r=a.consumer.sourceContentFor(h,!0);if(r)return r}if(g)return null;throw new Error('"'+h+'" is not in the SourceMap.')},t.prototype.generatedPositionFor=function(h){for(var g=0;g<this._sections.length;g++){var o=this._sections[g];if(o.consumer._findSourceIndex(i.getArg(h,"source"))!==-1){var a=o.consumer.generatedPositionFor(h);if(a){var r={line:a.line+(o.generatedOffset.generatedLine-1),column:a.column+(o.generatedOffset.generatedLine===a.line?o.generatedOffset.generatedColumn-1:0)};return r}}}return{line:null,column:null}},t.prototype._parseMappings=function(h,g){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var a=this._sections[o],r=a.consumer._generatedMappings,e=0;e<r.length;e++){var n=r[e],u=a.consumer._sources.at(n.source);u=i.computeSourceURL(a.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var s=null;n.name&&(s=a.consumer._names.at(n.name),this._names.add(s),s=this._names.indexOf(s));var l={source:u,generatedLine:n.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+(a.generatedOffset.generatedLine===n.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:s};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}F(this.__generatedMappings,i.compareByGeneratedPositionsDeflated),F(this.__originalMappings,i.compareByOriginalPositions)},Sn.IndexedSourceMapConsumer=t,Sn}var qa={},Wl;function eG(){if(Wl)return qa;Wl=1;var i=hC().SourceMapGenerator,v=er(),x=/(\r?\n)/,T=10,F="$$$isSourceNode$$$";function D(p,M,t,h,g){this.children=[],this.sourceContents={},this.line=p??null,this.column=M??null,this.source=t??null,this.name=g??null,this[F]=!0,h!=null&&this.add(h)}return D.fromStringWithSourceMap=function(p,M,t){var h=new D,g=p.split(x),o=0,a=function(){var s=c(),l=c()||"";return s+l;function c(){return o<g.length?g[o++]:void 0}},r=1,e=0,n=null;return M.eachMapping(function(s){if(n!==null)if(r<s.generatedLine)u(n,a()),r++,e=0;else{var l=g[o]||"",c=l.substr(0,s.generatedColumn-e);g[o]=l.substr(s.generatedColumn-e),e=s.generatedColumn,u(n,c),n=s;return}for(;r<s.generatedLine;)h.add(a()),r++;if(e<s.generatedColumn){var l=g[o]||"";h.add(l.substr(0,s.generatedColumn)),g[o]=l.substr(s.generatedColumn),e=s.generatedColumn}n=s},this),o<g.length&&(n&&u(n,a()),h.add(g.splice(o).join(""))),M.sources.forEach(function(s){var l=M.sourceContentFor(s);l!=null&&(t!=null&&(s=v.join(t,s)),h.setSourceContent(s,l))}),h;function u(s,l){if(s===null||s.source===void 0)h.add(l);else{var c=t?v.join(t,s.source):s.source;h.add(new D(s.originalLine,s.originalColumn,c,l,s.name))}}},D.prototype.add=function(p){if(Array.isArray(p))p.forEach(function(M){this.add(M)},this);else if(p[F]||typeof p=="string")p&&this.children.push(p);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+p);return this},D.prototype.prepend=function(p){if(Array.isArray(p))for(var M=p.length-1;M>=0;M--)this.prepend(p[M]);else if(p[F]||typeof p=="string")this.children.unshift(p);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+p);return this},D.prototype.walk=function(p){for(var M,t=0,h=this.children.length;t<h;t++)M=this.children[t],M[F]?M.walk(p):M!==""&&p(M,{source:this.source,line:this.line,column:this.column,name:this.name})},D.prototype.join=function(p){var M,t,h=this.children.length;if(h>0){for(M=[],t=0;t<h-1;t++)M.push(this.children[t]),M.push(p);M.push(this.children[t]),this.children=M}return this},D.prototype.replaceRight=function(p,M){var t=this.children[this.children.length-1];return t[F]?t.replaceRight(p,M):typeof t=="string"?this.children[this.children.length-1]=t.replace(p,M):this.children.push("".replace(p,M)),this},D.prototype.setSourceContent=function(p,M){this.sourceContents[v.toSetString(p)]=M},D.prototype.walkSourceContents=function(p){for(var M=0,t=this.children.length;M<t;M++)this.children[M][F]&&this.children[M].walkSourceContents(p);for(var h=Object.keys(this.sourceContents),M=0,t=h.length;M<t;M++)p(v.fromSetString(h[M]),this.sourceContents[h[M]])},D.prototype.toString=function(){var p="";return this.walk(function(M){p+=M}),p},D.prototype.toStringWithSourceMap=function(p){var M={code:"",line:1,column:0},t=new i(p),h=!1,g=null,o=null,a=null,r=null;return this.walk(function(e,n){M.code+=e,n.source!==null&&n.line!==null&&n.column!==null?((g!==n.source||o!==n.line||a!==n.column||r!==n.name)&&t.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:M.line,column:M.column},name:n.name}),g=n.source,o=n.line,a=n.column,r=n.name,h=!0):h&&(t.addMapping({generated:{line:M.line,column:M.column}}),g=null,h=!1);for(var u=0,s=e.length;u<s;u++)e.charCodeAt(u)===T?(M.line++,M.column=0,u+1===s?(g=null,h=!1):h&&t.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:M.line,column:M.column},name:n.name})):M.column++}),this.walkSourceContents(function(e,n){t.setSourceContent(e,n)}),{code:M.code,map:t}},qa.SourceNode=D,qa}var Yl;function iG(){return Yl||(Yl=1,xr.SourceMapGenerator=hC().SourceMapGenerator,xr.SourceMapConsumer=tG().SourceMapConsumer,xr.SourceNode=eG().SourceNode),xr}const sG="2.1.0",nG={version:sG};var Zl;function rG(){return Zl||(Zl=1,(function(i){(function(){var v,x,T,F,D,p,M,t,h,g,o,a,r,e,n,u,s,l,c,d,f,m,y,S,C,E;D=KD(),p=jD(),v=D.Syntax;function P(H){return Kt.Expression.hasOwnProperty(H.type)}function A(H){return Kt.Statement.hasOwnProperty(H.type)}x={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},T={"??":x.Coalesce,"||":x.LogicalOR,"&&":x.LogicalAND,"|":x.BitwiseOR,"^":x.BitwiseXOR,"&":x.BitwiseAND,"==":x.Equality,"!=":x.Equality,"===":x.Equality,"!==":x.Equality,is:x.Equality,isnt:x.Equality,"<":x.Relational,">":x.Relational,"<=":x.Relational,">=":x.Relational,in:x.Relational,instanceof:x.Relational,"<<":x.BitwiseSHIFT,">>":x.BitwiseSHIFT,">>>":x.BitwiseSHIFT,"+":x.Additive,"-":x.Additive,"*":x.Multiplicative,"%":x.Multiplicative,"/":x.Multiplicative,"**":x.Exponentiation};var R=1,G=2,b=4,L=8,w=16,B=32,N=64,Y=G|b,U=R|G,W=R|G|b,O=R,V=b,X=R|b,z=R,I=R|B,Z=0,J=R|w,k=R|L;function j(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function tt(H,$){var Q="";for($|=0;$>0;$>>>=1,H+=H)$&1&&(Q+=H);return Q}function ht(H){return/[\r\n]/g.test(H)}function ot(H){var $=H.length;return $&&p.code.isLineTerminator(H.charCodeAt($-1))}function st(H,$){var Q;for(Q in $)$.hasOwnProperty(Q)&&(H[Q]=$[Q]);return H}function ft(H,$){var Q,q;function it(pt){return typeof pt=="object"&&pt instanceof Object&&!(pt instanceof RegExp)}for(Q in $)$.hasOwnProperty(Q)&&(q=$[Q],it(q)?it(H[Q])?ft(H[Q],q):H[Q]=ft({},q):H[Q]=q);return H}function ut(H){var $,Q,q,it,pt;if(H!==H)throw new Error("Numeric literal whose value is NaN");if(H<0||H===0&&1/H<0)throw new Error("Numeric literal whose value is negative");if(H===1/0)return h?"null":g?"1e400":"1e+400";if($=""+H,!g||$.length<3)return $;for(Q=$.indexOf("."),!h&&$.charCodeAt(0)===48&&Q===1&&(Q=0,$=$.slice(1)),q=$,$=$.replace("e+","e"),it=0,(pt=q.indexOf("e"))>0&&(it=+q.slice(pt+1),q=q.slice(0,pt)),Q>=0&&(it-=q.length-Q-1,q=+(q.slice(0,Q)+q.slice(Q+1))+""),pt=0;q.charCodeAt(q.length+pt-1)===48;)--pt;return pt!==0&&(it-=pt,q=q.slice(0,pt)),it!==0&&(q+="e"+it),(q.length<$.length||o&&H>1e12&&Math.floor(H)===H&&(q="0x"+H.toString(16)).length<$.length)&&+q===H&&($=q),$}function lt(H,$){return(H&-2)===8232?($?"u":"\\u")+(H===8232?"2028":"2029"):H===10||H===13?($?"":"\\")+(H===10?"n":"r"):String.fromCharCode(H)}function Tt(H){var $,Q,q,it,pt,mt,Mt,Gt;if(Q=H.toString(),H.source){if($=Q.match(/\/([^/]*)$/),!$)return Q;for(q=$[1],Q="",Mt=!1,Gt=!1,it=0,pt=H.source.length;it<pt;++it)mt=H.source.charCodeAt(it),Gt?(Q+=lt(mt,Gt),Gt=!1):(Mt?mt===93&&(Mt=!1):mt===47?Q+="\\":mt===91&&(Mt=!0),Q+=lt(mt,Gt),Gt=mt===92);return"/"+Q+"/"+q}return Q}function bt(H,$){var Q;return H===8?"\\b":H===12?"\\f":H===9?"\\t":(Q=H.toString(16).toUpperCase(),h||H>255?"\\u"+"0000".slice(Q.length)+Q:H===0&&!p.code.isDecimalDigit($)?"\\0":H===11?"\\x0B":"\\x"+"00".slice(Q.length)+Q)}function Dt(H){if(H===92)return"\\\\";if(H===10)return"\\n";if(H===13)return"\\r";if(H===8232)return"\\u2028";if(H===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function ct(H){var $,Q,q,it;for(it=a==="double"?'"':"'",$=0,Q=H.length;$<Q;++$)if(q=H.charCodeAt($),q===39){it='"';break}else if(q===34){it="'";break}else q===92&&++$;return it+H+it}function yt(H){var $="",Q,q,it,pt=0,mt=0,Mt,Gt;for(Q=0,q=H.length;Q<q;++Q){if(it=H.charCodeAt(Q),it===39)++pt;else if(it===34)++mt;else if(it===47&&h)$+="\\";else if(p.code.isLineTerminator(it)||it===92){$+=Dt(it);continue}else if(!p.code.isIdentifierPartES5(it)&&(h&&it<32||!h&&!r&&(it<32||it>126))){$+=bt(it,H.charCodeAt(Q+1));continue}$+=String.fromCharCode(it)}if(Mt=!(a==="double"||a==="auto"&&mt<pt),Gt=Mt?"'":'"',!(Mt?pt:mt))return Gt+$+Gt;for(H=$,$=Gt,Q=0,q=H.length;Q<q;++Q)it=H.charCodeAt(Q),(it===39&&Mt||it===34&&!Mt)&&($+="\\"),$+=String.fromCharCode(it);return $+Gt}function Et(H){var $,Q,q,it="";for($=0,Q=H.length;$<Q;++$)q=H[$],it+=Array.isArray(q)?Et(q):q;return it}function At(H,$){if(!m)return Array.isArray(H)?Et(H):H;if($==null){if(H instanceof F)return H;$={}}return $.loc==null?new F(null,null,m,H,$.name||null):new F($.loc.start.line,$.loc.start.column,m===!0?$.loc.source||null:m,H,$.name||null)}function It(){return n||" "}function Ft(H,$){var Q,q,it,pt;return Q=At(H).toString(),Q.length===0?[$]:(q=At($).toString(),q.length===0?[H]:(it=Q.charCodeAt(Q.length-1),pt=q.charCodeAt(0),(it===43||it===45)&&it===pt||p.code.isIdentifierPartES5(it)&&p.code.isIdentifierPartES5(pt)||it===47&&pt===105?[H,It(),$]:p.code.isWhiteSpace(it)||p.code.isLineTerminator(it)||p.code.isWhiteSpace(pt)||p.code.isLineTerminator(pt)?[H,$]:[H,n,$]))}function wt(H){return[M,H]}function Bt(H){var $;$=M,M+=t,H(M),M=$}function le(H){var $;for($=H.length-1;$>=0&&!p.code.isLineTerminator(H.charCodeAt($));--$);return H.length-1-$}function pe(H,$){var Q,q,it,pt,mt,Mt,Gt,te;for(Q=H.split(/\r\n|[\r\n]/),Mt=Number.MAX_VALUE,q=1,it=Q.length;q<it;++q){for(pt=Q[q],mt=0;mt<pt.length&&p.code.isWhiteSpace(pt.charCodeAt(mt));)++mt;Mt>mt&&(Mt=mt)}for(typeof $<"u"?(Gt=M,Q[1][Mt]==="*"&&($+=" "),M=$):(Mt&1&&--Mt,Gt=M),q=1,it=Q.length;q<it;++q)te=At(wt(Q[q].slice(Mt))),Q[q]=m?te.join(""):te;return M=Gt,Q.join(`
`)}function Ut(H,$){if(H.type==="Line"){if(ot(H.value))return"//"+H.value;var Q="//"+H.value;return S||(Q+=`
`),Q}return d.format.indent.adjustMultilineComment&&/[\n\r]/.test(H.value)?pe("/*"+H.value+"*/",$):"/*"+H.value+"*/"}function he(H,$){var Q,q,it,pt,mt,Mt,Gt,te,Ae,Zi,es,rr,ar,oi;if(H.leadingComments&&H.leadingComments.length>0){if(pt=$,S){for(it=H.leadingComments[0],$=[],te=it.extendedRange,Ae=it.range,es=y.substring(te[0],Ae[0]),oi=(es.match(/\n/g)||[]).length,oi>0?($.push(tt(`
`,oi)),$.push(wt(Ut(it)))):($.push(es),$.push(Ut(it))),Zi=Ae,Q=1,q=H.leadingComments.length;Q<q;Q++)it=H.leadingComments[Q],Ae=it.range,rr=y.substring(Zi[1],Ae[0]),oi=(rr.match(/\n/g)||[]).length,$.push(tt(`
`,oi)),$.push(wt(Ut(it))),Zi=Ae;ar=y.substring(Ae[1],te[1]),oi=(ar.match(/\n/g)||[]).length,$.push(tt(`
`,oi))}else for(it=H.leadingComments[0],$=[],l&&H.type===v.Program&&H.body.length===0&&$.push(`
`),$.push(Ut(it)),ot(At($).toString())||$.push(`
`),Q=1,q=H.leadingComments.length;Q<q;++Q)it=H.leadingComments[Q],Gt=[Ut(it)],ot(At(Gt).toString())||Gt.push(`
`),$.push(wt(Gt));$.push(wt(pt))}if(H.trailingComments)if(S)it=H.trailingComments[0],te=it.extendedRange,Ae=it.range,es=y.substring(te[0],Ae[0]),oi=(es.match(/\n/g)||[]).length,oi>0?($.push(tt(`
`,oi)),$.push(wt(Ut(it)))):($.push(es),$.push(Ut(it)));else for(mt=!ot(At($).toString()),Mt=tt(" ",le(At([M,$,t]).toString())),Q=0,q=H.trailingComments.length;Q<q;++Q)it=H.trailingComments[Q],mt?(Q===0?$=[$,t]:$=[$,Mt],$.push(Ut(it,Mt))):$=[$,wt(Ut(it))],Q!==q-1&&!ot(At($).toString())&&($=[$,`
`]);return $}function Pt(H,$,Q){var q,it=0;for(q=H;q<$;q++)y[q]===`
`&&it++;for(q=1;q<it;q++)Q.push(e)}function Ot(H,$,Q){return $<Q?["(",H,")"]:H}function se(H){var $,Q,q;for(q=H.split(/\r\n|\n/),$=1,Q=q.length;$<Q;$++)q[$]=e+M+q[$];return q}function fe(H,$){var Q,q,it;return Q=H[d.verbatim],typeof Q=="string"?q=Ot(se(Q),x.Sequence,$):(q=se(Q.content),it=Q.precedence!=null?Q.precedence:x.Sequence,q=Ot(q,it,$)),At(q,H)}function Kt(){}Kt.prototype.maybeBlock=function(H,$){var Q,q,it=this;return q=!d.comment||!H.leadingComments,H.type===v.BlockStatement&&q?[n,this.generateStatement(H,$)]:H.type===v.EmptyStatement&&q?";":(Bt(function(){Q=[e,wt(it.generateStatement(H,$))]}),Q)},Kt.prototype.maybeBlockSuffix=function(H,$){var Q=ot(At($).toString());return H.type===v.BlockStatement&&(!d.comment||!H.leadingComments)&&!Q?[$,n]:Q?[$,M]:[$,e,M]};function ye(H){return At(H.name,H)}function Le(H,$){return H.async?"async"+($?It():n):""}function ei(H){var $=H.generator&&!d.moz.starlessGenerator;return $?"*"+n:""}function nr(H){var $=H.value,Q="";return $.async&&(Q+=Le($,!H.computed)),$.generator&&(Q+=ei($)?"*":""),Q}Kt.prototype.generatePattern=function(H,$,Q){return H.type===v.Identifier?ye(H):this.generateExpression(H,$,Q)},Kt.prototype.generateFunctionParams=function(H){var $,Q,q,it;if(it=!1,H.type===v.ArrowFunctionExpression&&!H.rest&&(!H.defaults||H.defaults.length===0)&&H.params.length===1&&H.params[0].type===v.Identifier)q=[Le(H,!0),ye(H.params[0])];else{for(q=H.type===v.ArrowFunctionExpression?[Le(H,!1)]:[],q.push("("),H.defaults&&(it=!0),$=0,Q=H.params.length;$<Q;++$)it&&H.defaults[$]?q.push(this.generateAssignment(H.params[$],H.defaults[$],"=",x.Assignment,W)):q.push(this.generatePattern(H.params[$],x.Assignment,W)),$+1<Q&&q.push(","+n);H.rest&&(H.params.length&&q.push(","+n),q.push("..."),q.push(ye(H.rest))),q.push(")")}return q},Kt.prototype.generateFunctionBody=function(H){var $,Q;return $=this.generateFunctionParams(H),H.type===v.ArrowFunctionExpression&&($.push(n),$.push("=>")),H.expression?($.push(n),Q=this.generateExpression(H.body,x.Assignment,W),Q.toString().charAt(0)==="{"&&(Q=["(",Q,")"]),$.push(Q)):$.push(this.maybeBlock(H.body,k)),$},Kt.prototype.generateIterationForStatement=function(H,$,Q){var q=["for"+($.await?It()+"await":"")+n+"("],it=this;return Bt(function(){$.left.type===v.VariableDeclaration?Bt(function(){q.push($.left.kind+It()),q.push(it.generateStatement($.left.declarations[0],Z))}):q.push(it.generateExpression($.left,x.Call,W)),q=Ft(q,H),q=[Ft(q,it.generateExpression($.right,x.Assignment,W)),")"]}),q.push(this.maybeBlock($.body,Q)),q},Kt.prototype.generatePropertyKey=function(H,$){var Q=[];return $&&Q.push("["),Q.push(this.generateExpression(H,x.Assignment,W)),$&&Q.push("]"),Q},Kt.prototype.generateAssignment=function(H,$,Q,q,it){return x.Assignment<q&&(it|=R),Ot([this.generateExpression(H,x.Call,it),n+Q+n,this.generateExpression($,x.Assignment,it)],x.Assignment,q)},Kt.prototype.semicolon=function(H){return!s&&H&B?"":";"},Kt.Statement={BlockStatement:function(H,$){var Q,q,it=["{",e],pt=this;return Bt(function(){H.body.length===0&&S&&(Q=H.range,Q[1]-Q[0]>2&&(q=y.substring(Q[0]+1,Q[1]-1),q[0]===`
`&&(it=["{"]),it.push(q)));var mt,Mt,Gt,te;for(te=z,$&L&&(te|=w),mt=0,Mt=H.body.length;mt<Mt;++mt)S&&(mt===0&&(H.body[0].leadingComments&&(Q=H.body[0].leadingComments[0].extendedRange,q=y.substring(Q[0],Q[1]),q[0]===`
`&&(it=["{"])),H.body[0].leadingComments||Pt(H.range[0],H.body[0].range[0],it)),mt>0&&!H.body[mt-1].trailingComments&&!H.body[mt].leadingComments&&Pt(H.body[mt-1].range[1],H.body[mt].range[0],it)),mt===Mt-1&&(te|=B),H.body[mt].leadingComments&&S?Gt=pt.generateStatement(H.body[mt],te):Gt=wt(pt.generateStatement(H.body[mt],te)),it.push(Gt),ot(At(Gt).toString())||S&&mt<Mt-1&&H.body[mt+1].leadingComments||it.push(e),S&&mt===Mt-1&&(H.body[mt].trailingComments||Pt(H.body[mt].range[1],H.range[1],it))}),it.push(wt("}")),it},BreakStatement:function(H,$){return H.label?"break "+H.label.name+this.semicolon($):"break"+this.semicolon($)},ContinueStatement:function(H,$){return H.label?"continue "+H.label.name+this.semicolon($):"continue"+this.semicolon($)},ClassBody:function(H,$){var Q=["{",e],q=this;return Bt(function(it){var pt,mt;for(pt=0,mt=H.body.length;pt<mt;++pt)Q.push(it),Q.push(q.generateExpression(H.body[pt],x.Sequence,W)),pt+1<mt&&Q.push(e)}),ot(At(Q).toString())||Q.push(e),Q.push(M),Q.push("}"),Q},ClassDeclaration:function(H,$){var Q,q;return Q=["class"],H.id&&(Q=Ft(Q,this.generateExpression(H.id,x.Sequence,W))),H.superClass&&(q=Ft("extends",this.generateExpression(H.superClass,x.Unary,W)),Q=Ft(Q,q)),Q.push(n),Q.push(this.generateStatement(H.body,I)),Q},DirectiveStatement:function(H,$){return d.raw&&H.raw?H.raw+this.semicolon($):ct(H.directive)+this.semicolon($)},DoWhileStatement:function(H,$){var Q=Ft("do",this.maybeBlock(H.body,z));return Q=this.maybeBlockSuffix(H.body,Q),Ft(Q,["while"+n+"(",this.generateExpression(H.test,x.Sequence,W),")"+this.semicolon($)])},CatchClause:function(H,$){var Q,q=this;return Bt(function(){var it;H.param?(Q=["catch"+n+"(",q.generateExpression(H.param,x.Sequence,W),")"],H.guard&&(it=q.generateExpression(H.guard,x.Sequence,W),Q.splice(2,0," if ",it))):Q=["catch"]}),Q.push(this.maybeBlock(H.body,z)),Q},DebuggerStatement:function(H,$){return"debugger"+this.semicolon($)},EmptyStatement:function(H,$){return";"},ExportDefaultDeclaration:function(H,$){var Q=["export"],q;return q=$&B?I:z,Q=Ft(Q,"default"),A(H.declaration)?Q=Ft(Q,this.generateStatement(H.declaration,q)):Q=Ft(Q,this.generateExpression(H.declaration,x.Assignment,W)+this.semicolon($)),Q},ExportNamedDeclaration:function(H,$){var Q=["export"],q,it=this;return q=$&B?I:z,H.declaration?Ft(Q,this.generateStatement(H.declaration,q)):(H.specifiers&&(H.specifiers.length===0?Q=Ft(Q,"{"+n+"}"):H.specifiers[0].type===v.ExportBatchSpecifier?Q=Ft(Q,this.generateExpression(H.specifiers[0],x.Sequence,W)):(Q=Ft(Q,"{"),Bt(function(pt){var mt,Mt;for(Q.push(e),mt=0,Mt=H.specifiers.length;mt<Mt;++mt)Q.push(pt),Q.push(it.generateExpression(H.specifiers[mt],x.Sequence,W)),mt+1<Mt&&Q.push(","+e)}),ot(At(Q).toString())||Q.push(e),Q.push(M+"}")),H.source?Q=Ft(Q,["from"+n,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]):Q.push(this.semicolon($))),Q)},ExportAllDeclaration:function(H,$){return["export"+n,"*"+n,"from"+n,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]},ExpressionStatement:function(H,$){var Q,q;function it(Mt){var Gt;return Mt.slice(0,5)!=="class"?!1:(Gt=Mt.charCodeAt(5),Gt===123||p.code.isWhiteSpace(Gt)||p.code.isLineTerminator(Gt))}function pt(Mt){var Gt;return Mt.slice(0,8)!=="function"?!1:(Gt=Mt.charCodeAt(8),Gt===40||p.code.isWhiteSpace(Gt)||Gt===42||p.code.isLineTerminator(Gt))}function mt(Mt){var Gt,te,Ae;if(Mt.slice(0,5)!=="async"||!p.code.isWhiteSpace(Mt.charCodeAt(5)))return!1;for(te=6,Ae=Mt.length;te<Ae&&p.code.isWhiteSpace(Mt.charCodeAt(te));++te);return te===Ae||Mt.slice(te,te+8)!=="function"?!1:(Gt=Mt.charCodeAt(te+8),Gt===40||p.code.isWhiteSpace(Gt)||Gt===42||p.code.isLineTerminator(Gt))}return Q=[this.generateExpression(H.expression,x.Sequence,W)],q=At(Q).toString(),q.charCodeAt(0)===123||it(q)||pt(q)||mt(q)||c&&$&w&&H.expression.type===v.Literal&&typeof H.expression.value=="string"?Q=["(",Q,")"+this.semicolon($)]:Q.push(this.semicolon($)),Q},ImportDeclaration:function(H,$){var Q,q,it=this;return H.specifiers.length===0?["import",n,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]:(Q=["import"],q=0,H.specifiers[q].type===v.ImportDefaultSpecifier&&(Q=Ft(Q,[this.generateExpression(H.specifiers[q],x.Sequence,W)]),++q),H.specifiers[q]&&(q!==0&&Q.push(","),H.specifiers[q].type===v.ImportNamespaceSpecifier?Q=Ft(Q,[n,this.generateExpression(H.specifiers[q],x.Sequence,W)]):(Q.push(n+"{"),H.specifiers.length-q===1?(Q.push(n),Q.push(this.generateExpression(H.specifiers[q],x.Sequence,W)),Q.push(n+"}"+n)):(Bt(function(pt){var mt,Mt;for(Q.push(e),mt=q,Mt=H.specifiers.length;mt<Mt;++mt)Q.push(pt),Q.push(it.generateExpression(H.specifiers[mt],x.Sequence,W)),mt+1<Mt&&Q.push(","+e)}),ot(At(Q).toString())||Q.push(e),Q.push(M+"}"+n)))),Q=Ft(Q,["from"+n,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]),Q)},VariableDeclarator:function(H,$){var Q=$&R?W:Y;return H.init?[this.generateExpression(H.id,x.Assignment,Q),n,"=",n,this.generateExpression(H.init,x.Assignment,Q)]:this.generatePattern(H.id,x.Assignment,Q)},VariableDeclaration:function(H,$){var Q,q,it,pt,mt,Mt=this;Q=[H.kind],mt=$&R?z:Z;function Gt(){for(pt=H.declarations[0],d.comment&&pt.leadingComments?(Q.push(`
`),Q.push(wt(Mt.generateStatement(pt,mt)))):(Q.push(It()),Q.push(Mt.generateStatement(pt,mt))),q=1,it=H.declarations.length;q<it;++q)pt=H.declarations[q],d.comment&&pt.leadingComments?(Q.push(","+e),Q.push(wt(Mt.generateStatement(pt,mt)))):(Q.push(","+n),Q.push(Mt.generateStatement(pt,mt)))}return H.declarations.length>1?Bt(Gt):Gt(),Q.push(this.semicolon($)),Q},ThrowStatement:function(H,$){return[Ft("throw",this.generateExpression(H.argument,x.Sequence,W)),this.semicolon($)]},TryStatement:function(H,$){var Q,q,it,pt;if(Q=["try",this.maybeBlock(H.block,z)],Q=this.maybeBlockSuffix(H.block,Q),H.handlers)for(q=0,it=H.handlers.length;q<it;++q)Q=Ft(Q,this.generateStatement(H.handlers[q],z)),(H.finalizer||q+1!==it)&&(Q=this.maybeBlockSuffix(H.handlers[q].body,Q));else{for(pt=H.guardedHandlers||[],q=0,it=pt.length;q<it;++q)Q=Ft(Q,this.generateStatement(pt[q],z)),(H.finalizer||q+1!==it)&&(Q=this.maybeBlockSuffix(pt[q].body,Q));if(H.handler)if(Array.isArray(H.handler))for(q=0,it=H.handler.length;q<it;++q)Q=Ft(Q,this.generateStatement(H.handler[q],z)),(H.finalizer||q+1!==it)&&(Q=this.maybeBlockSuffix(H.handler[q].body,Q));else Q=Ft(Q,this.generateStatement(H.handler,z)),H.finalizer&&(Q=this.maybeBlockSuffix(H.handler.body,Q))}return H.finalizer&&(Q=Ft(Q,["finally",this.maybeBlock(H.finalizer,z)])),Q},SwitchStatement:function(H,$){var Q,q,it,pt,mt,Mt=this;if(Bt(function(){Q=["switch"+n+"(",Mt.generateExpression(H.discriminant,x.Sequence,W),")"+n+"{"+e]}),H.cases)for(mt=z,it=0,pt=H.cases.length;it<pt;++it)it===pt-1&&(mt|=B),q=wt(this.generateStatement(H.cases[it],mt)),Q.push(q),ot(At(q).toString())||Q.push(e);return Q.push(wt("}")),Q},SwitchCase:function(H,$){var Q,q,it,pt,mt,Mt=this;return Bt(function(){for(H.test?Q=[Ft("case",Mt.generateExpression(H.test,x.Sequence,W)),":"]:Q=["default:"],it=0,pt=H.consequent.length,pt&&H.consequent[0].type===v.BlockStatement&&(q=Mt.maybeBlock(H.consequent[0],z),Q.push(q),it=1),it!==pt&&!ot(At(Q).toString())&&Q.push(e),mt=z;it<pt;++it)it===pt-1&&$&B&&(mt|=B),q=wt(Mt.generateStatement(H.consequent[it],mt)),Q.push(q),it+1!==pt&&!ot(At(q).toString())&&Q.push(e)}),Q},IfStatement:function(H,$){var Q,q,it,pt=this;return Bt(function(){Q=["if"+n+"(",pt.generateExpression(H.test,x.Sequence,W),")"]}),it=$&B,q=z,it&&(q|=B),H.alternate?(Q.push(this.maybeBlock(H.consequent,z)),Q=this.maybeBlockSuffix(H.consequent,Q),H.alternate.type===v.IfStatement?Q=Ft(Q,["else ",this.generateStatement(H.alternate,q)]):Q=Ft(Q,Ft("else",this.maybeBlock(H.alternate,q)))):Q.push(this.maybeBlock(H.consequent,q)),Q},ForStatement:function(H,$){var Q,q=this;return Bt(function(){Q=["for"+n+"("],H.init?H.init.type===v.VariableDeclaration?Q.push(q.generateStatement(H.init,Z)):(Q.push(q.generateExpression(H.init,x.Sequence,Y)),Q.push(";")):Q.push(";"),H.test&&(Q.push(n),Q.push(q.generateExpression(H.test,x.Sequence,W))),Q.push(";"),H.update&&(Q.push(n),Q.push(q.generateExpression(H.update,x.Sequence,W))),Q.push(")")}),Q.push(this.maybeBlock(H.body,$&B?I:z)),Q},ForInStatement:function(H,$){return this.generateIterationForStatement("in",H,$&B?I:z)},ForOfStatement:function(H,$){return this.generateIterationForStatement("of",H,$&B?I:z)},LabeledStatement:function(H,$){return[H.label.name+":",this.maybeBlock(H.body,$&B?I:z)]},Program:function(H,$){var Q,q,it,pt,mt;for(pt=H.body.length,Q=[l&&pt>0?`
`:""],mt=J,it=0;it<pt;++it)!l&&it===pt-1&&(mt|=B),S&&(it===0&&(H.body[0].leadingComments||Pt(H.range[0],H.body[it].range[0],Q)),it>0&&!H.body[it-1].trailingComments&&!H.body[it].leadingComments&&Pt(H.body[it-1].range[1],H.body[it].range[0],Q)),q=wt(this.generateStatement(H.body[it],mt)),Q.push(q),it+1<pt&&!ot(At(q).toString())&&(S&&H.body[it+1].leadingComments||Q.push(e)),S&&it===pt-1&&(H.body[it].trailingComments||Pt(H.body[it].range[1],H.range[1],Q));return Q},FunctionDeclaration:function(H,$){return[Le(H,!0),"function",ei(H)||It(),H.id?ye(H.id):"",this.generateFunctionBody(H)]},ReturnStatement:function(H,$){return H.argument?[Ft("return",this.generateExpression(H.argument,x.Sequence,W)),this.semicolon($)]:["return"+this.semicolon($)]},WhileStatement:function(H,$){var Q,q=this;return Bt(function(){Q=["while"+n+"(",q.generateExpression(H.test,x.Sequence,W),")"]}),Q.push(this.maybeBlock(H.body,$&B?I:z)),Q},WithStatement:function(H,$){var Q,q=this;return Bt(function(){Q=["with"+n+"(",q.generateExpression(H.object,x.Sequence,W),")"]}),Q.push(this.maybeBlock(H.body,$&B?I:z)),Q}},st(Kt.prototype,Kt.Statement),Kt.Expression={SequenceExpression:function(H,$,Q){var q,it,pt;for(x.Sequence<$&&(Q|=R),q=[],it=0,pt=H.expressions.length;it<pt;++it)q.push(this.generateExpression(H.expressions[it],x.Assignment,Q)),it+1<pt&&q.push(","+n);return Ot(q,x.Sequence,$)},AssignmentExpression:function(H,$,Q){return this.generateAssignment(H.left,H.right,H.operator,$,Q)},ArrowFunctionExpression:function(H,$,Q){return Ot(this.generateFunctionBody(H),x.ArrowFunction,$)},ConditionalExpression:function(H,$,Q){return x.Conditional<$&&(Q|=R),Ot([this.generateExpression(H.test,x.Coalesce,Q),n+"?"+n,this.generateExpression(H.consequent,x.Assignment,Q),n+":"+n,this.generateExpression(H.alternate,x.Assignment,Q)],x.Conditional,$)},LogicalExpression:function(H,$,Q){return H.operator==="??"&&(Q|=N),this.BinaryExpression(H,$,Q)},BinaryExpression:function(H,$,Q){var q,it,pt,mt,Mt,Gt;return mt=T[H.operator],it=H.operator==="**"?x.Postfix:mt,pt=H.operator==="**"?mt:mt+1,mt<$&&(Q|=R),Mt=this.generateExpression(H.left,it,Q),Gt=Mt.toString(),Gt.charCodeAt(Gt.length-1)===47&&p.code.isIdentifierPartES5(H.operator.charCodeAt(0))?q=[Mt,It(),H.operator]:q=Ft(Mt,H.operator),Mt=this.generateExpression(H.right,pt,Q),H.operator==="/"&&Mt.toString().charAt(0)==="/"||H.operator.slice(-1)==="<"&&Mt.toString().slice(0,3)==="!--"?(q.push(It()),q.push(Mt)):q=Ft(q,Mt),H.operator==="in"&&!(Q&R)?["(",q,")"]:(H.operator==="||"||H.operator==="&&")&&Q&N?["(",q,")"]:Ot(q,mt,$)},CallExpression:function(H,$,Q){var q,it,pt;for(q=[this.generateExpression(H.callee,x.Call,U)],H.optional&&q.push("?."),q.push("("),it=0,pt=H.arguments.length;it<pt;++it)q.push(this.generateExpression(H.arguments[it],x.Assignment,W)),it+1<pt&&q.push(","+n);return q.push(")"),Q&G?Ot(q,x.Call,$):["(",q,")"]},ChainExpression:function(H,$,Q){x.OptionalChaining<$&&(Q|=G);var q=this.generateExpression(H.expression,x.OptionalChaining,Q);return Ot(q,x.OptionalChaining,$)},NewExpression:function(H,$,Q){var q,it,pt,mt,Mt;if(it=H.arguments.length,Mt=Q&b&&!u&&it===0?X:O,q=Ft("new",this.generateExpression(H.callee,x.New,Mt)),!(Q&b)||u||it>0){for(q.push("("),pt=0,mt=it;pt<mt;++pt)q.push(this.generateExpression(H.arguments[pt],x.Assignment,W)),pt+1<mt&&q.push(","+n);q.push(")")}return Ot(q,x.New,$)},MemberExpression:function(H,$,Q){var q,it;return q=[this.generateExpression(H.object,x.Call,Q&G?U:O)],H.computed?(H.optional&&q.push("?."),q.push("["),q.push(this.generateExpression(H.property,x.Sequence,Q&G?W:X)),q.push("]")):(!H.optional&&H.object.type===v.Literal&&typeof H.object.value=="number"&&(it=At(q).toString(),it.indexOf(".")<0&&!/[eExX]/.test(it)&&p.code.isDecimalDigit(it.charCodeAt(it.length-1))&&!(it.length>=2&&it.charCodeAt(0)===48)&&q.push(" ")),q.push(H.optional?"?.":"."),q.push(ye(H.property))),Ot(q,x.Member,$)},MetaProperty:function(H,$,Q){var q;return q=[],q.push(typeof H.meta=="string"?H.meta:ye(H.meta)),q.push("."),q.push(typeof H.property=="string"?H.property:ye(H.property)),Ot(q,x.Member,$)},UnaryExpression:function(H,$,Q){var q,it,pt,mt,Mt;return it=this.generateExpression(H.argument,x.Unary,W),n===""?q=Ft(H.operator,it):(q=[H.operator],H.operator.length>2?q=Ft(q,it):(mt=At(q).toString(),Mt=mt.charCodeAt(mt.length-1),pt=it.toString().charCodeAt(0),((Mt===43||Mt===45)&&Mt===pt||p.code.isIdentifierPartES5(Mt)&&p.code.isIdentifierPartES5(pt))&&q.push(It()),q.push(it))),Ot(q,x.Unary,$)},YieldExpression:function(H,$,Q){var q;return H.delegate?q="yield*":q="yield",H.argument&&(q=Ft(q,this.generateExpression(H.argument,x.Yield,W))),Ot(q,x.Yield,$)},AwaitExpression:function(H,$,Q){var q=Ft(H.all?"await*":"await",this.generateExpression(H.argument,x.Await,W));return Ot(q,x.Await,$)},UpdateExpression:function(H,$,Q){return H.prefix?Ot([H.operator,this.generateExpression(H.argument,x.Unary,W)],x.Unary,$):Ot([this.generateExpression(H.argument,x.Postfix,W),H.operator],x.Postfix,$)},FunctionExpression:function(H,$,Q){var q=[Le(H,!0),"function"];return H.id?(q.push(ei(H)||It()),q.push(ye(H.id))):q.push(ei(H)||n),q.push(this.generateFunctionBody(H)),q},ArrayPattern:function(H,$,Q){return this.ArrayExpression(H,$,Q,!0)},ArrayExpression:function(H,$,Q,q){var it,pt,mt=this;return H.elements.length?(pt=q?!1:H.elements.length>1,it=["[",pt?e:""],Bt(function(Mt){var Gt,te;for(Gt=0,te=H.elements.length;Gt<te;++Gt)H.elements[Gt]?(it.push(pt?Mt:""),it.push(mt.generateExpression(H.elements[Gt],x.Assignment,W))):(pt&&it.push(Mt),Gt+1===te&&it.push(",")),Gt+1<te&&it.push(","+(pt?e:n))}),pt&&!ot(At(it).toString())&&it.push(e),it.push(pt?M:""),it.push("]"),it):"[]"},RestElement:function(H,$,Q){return"..."+this.generatePattern(H.argument)},ClassExpression:function(H,$,Q){var q,it;return q=["class"],H.id&&(q=Ft(q,this.generateExpression(H.id,x.Sequence,W))),H.superClass&&(it=Ft("extends",this.generateExpression(H.superClass,x.Unary,W)),q=Ft(q,it)),q.push(n),q.push(this.generateStatement(H.body,I)),q},MethodDefinition:function(H,$,Q){var q,it;return H.static?q=["static"+n]:q=[],H.kind==="get"||H.kind==="set"?it=[Ft(H.kind,this.generatePropertyKey(H.key,H.computed)),this.generateFunctionBody(H.value)]:it=[nr(H),this.generatePropertyKey(H.key,H.computed),this.generateFunctionBody(H.value)],Ft(q,it)},Property:function(H,$,Q){return H.kind==="get"||H.kind==="set"?[H.kind,It(),this.generatePropertyKey(H.key,H.computed),this.generateFunctionBody(H.value)]:H.shorthand?H.value.type==="AssignmentPattern"?this.AssignmentPattern(H.value,x.Sequence,W):this.generatePropertyKey(H.key,H.computed):H.method?[nr(H),this.generatePropertyKey(H.key,H.computed),this.generateFunctionBody(H.value)]:[this.generatePropertyKey(H.key,H.computed),":"+n,this.generateExpression(H.value,x.Assignment,W)]},ObjectExpression:function(H,$,Q){var q,it,pt,mt=this;return H.properties.length?(q=H.properties.length>1,Bt(function(){pt=mt.generateExpression(H.properties[0],x.Sequence,W)}),!q&&!ht(At(pt).toString())?["{",n,pt,n,"}"]:(Bt(function(Mt){var Gt,te;if(it=["{",e,Mt,pt],q)for(it.push(","+e),Gt=1,te=H.properties.length;Gt<te;++Gt)it.push(Mt),it.push(mt.generateExpression(H.properties[Gt],x.Sequence,W)),Gt+1<te&&it.push(","+e)}),ot(At(it).toString())||it.push(e),it.push(M),it.push("}"),it)):"{}"},AssignmentPattern:function(H,$,Q){return this.generateAssignment(H.left,H.right,"=",$,Q)},ObjectPattern:function(H,$,Q){var q,it,pt,mt,Mt,Gt=this;if(!H.properties.length)return"{}";if(mt=!1,H.properties.length===1)Mt=H.properties[0],Mt.type===v.Property&&Mt.value.type!==v.Identifier&&(mt=!0);else for(it=0,pt=H.properties.length;it<pt;++it)if(Mt=H.properties[it],Mt.type===v.Property&&!Mt.shorthand){mt=!0;break}return q=["{",mt?e:""],Bt(function(te){var Ae,Zi;for(Ae=0,Zi=H.properties.length;Ae<Zi;++Ae)q.push(mt?te:""),q.push(Gt.generateExpression(H.properties[Ae],x.Sequence,W)),Ae+1<Zi&&q.push(","+(mt?e:n))}),mt&&!ot(At(q).toString())&&q.push(e),q.push(mt?M:""),q.push("}"),q},ThisExpression:function(H,$,Q){return"this"},Super:function(H,$,Q){return"super"},Identifier:function(H,$,Q){return ye(H)},ImportDefaultSpecifier:function(H,$,Q){return ye(H.id||H.local)},ImportNamespaceSpecifier:function(H,$,Q){var q=["*"],it=H.id||H.local;return it&&q.push(n+"as"+It()+ye(it)),q},ImportSpecifier:function(H,$,Q){var q=H.imported,it=[q.name],pt=H.local;return pt&&pt.name!==q.name&&it.push(It()+"as"+It()+ye(pt)),it},ExportSpecifier:function(H,$,Q){var q=H.local,it=[q.name],pt=H.exported;return pt&&pt.name!==q.name&&it.push(It()+"as"+It()+ye(pt)),it},Literal:function(H,$,Q){var q;if(H.hasOwnProperty("raw")&&f&&d.raw)try{if(q=f(H.raw).body[0].expression,q.type===v.Literal&&q.value===H.value)return H.raw}catch{}return H.regex?"/"+H.regex.pattern+"/"+H.regex.flags:typeof H.value=="bigint"?H.value.toString()+"n":H.bigint?H.bigint+"n":H.value===null?"null":typeof H.value=="string"?yt(H.value):typeof H.value=="number"?ut(H.value):typeof H.value=="boolean"?H.value?"true":"false":Tt(H.value)},GeneratorExpression:function(H,$,Q){return this.ComprehensionExpression(H,$,Q)},ComprehensionExpression:function(H,$,Q){var q,it,pt,mt,Mt=this;return q=H.type===v.GeneratorExpression?["("]:["["],d.moz.comprehensionExpressionStartsWithAssignment&&(mt=this.generateExpression(H.body,x.Assignment,W),q.push(mt)),H.blocks&&Bt(function(){for(it=0,pt=H.blocks.length;it<pt;++it)mt=Mt.generateExpression(H.blocks[it],x.Sequence,W),it>0||d.moz.comprehensionExpressionStartsWithAssignment?q=Ft(q,mt):q.push(mt)}),H.filter&&(q=Ft(q,"if"+n),mt=this.generateExpression(H.filter,x.Sequence,W),q=Ft(q,["(",mt,")"])),d.moz.comprehensionExpressionStartsWithAssignment||(mt=this.generateExpression(H.body,x.Assignment,W),q=Ft(q,mt)),q.push(H.type===v.GeneratorExpression?")":"]"),q},ComprehensionBlock:function(H,$,Q){var q;return H.left.type===v.VariableDeclaration?q=[H.left.kind,It(),this.generateStatement(H.left.declarations[0],Z)]:q=this.generateExpression(H.left,x.Call,W),q=Ft(q,H.of?"of":"in"),q=Ft(q,this.generateExpression(H.right,x.Sequence,W)),["for"+n+"(",q,")"]},SpreadElement:function(H,$,Q){return["...",this.generateExpression(H.argument,x.Assignment,W)]},TaggedTemplateExpression:function(H,$,Q){var q=U;Q&G||(q=O);var it=[this.generateExpression(H.tag,x.Call,q),this.generateExpression(H.quasi,x.Primary,V)];return Ot(it,x.TaggedTemplate,$)},TemplateElement:function(H,$,Q){return H.value.raw},TemplateLiteral:function(H,$,Q){var q,it,pt;for(q=["`"],it=0,pt=H.quasis.length;it<pt;++it)q.push(this.generateExpression(H.quasis[it],x.Primary,W)),it+1<pt&&(q.push("${"+n),q.push(this.generateExpression(H.expressions[it],x.Sequence,W)),q.push(n+"}"));return q.push("`"),q},ModuleSpecifier:function(H,$,Q){return this.Literal(H,$,Q)},ImportExpression:function(H,$,Q){return Ot(["import(",this.generateExpression(H.source,x.Assignment,W),")"],x.Call,$)}},st(Kt.prototype,Kt.Expression),Kt.prototype.generateExpression=function(H,$,Q){var q,it;return it=H.type||v.Property,d.verbatim&&H.hasOwnProperty(d.verbatim)?fe(H,$):(q=this[it](H,$,Q),d.comment&&(q=he(H,q)),At(q,H))},Kt.prototype.generateStatement=function(H,$){var Q,q;return Q=this[H.type](H,$),d.comment&&(Q=he(H,Q)),q=At(Q).toString(),H.type===v.Program&&!l&&e===""&&q.charAt(q.length-1)===`
`&&(Q=m?At(Q).replaceRight(/\s+$/,""):q.replace(/\s+$/,"")),At(Q,H)};function Aa(H){var $;if($=new Kt,A(H))return $.generateStatement(H,z);if(P(H))return $.generateExpression(H,x.Sequence,W);throw new Error("Unknown node type: "+H.type)}function Fa(H,$){var Q=j(),q,it;return $!=null?(typeof $.indent=="string"&&(Q.format.indent.style=$.indent),typeof $.base=="number"&&(Q.format.indent.base=$.base),$=ft(Q,$),t=$.format.indent.style,typeof $.base=="string"?M=$.base:M=tt(t,$.format.indent.base)):($=Q,t=$.format.indent.style,M=tt(t,$.format.indent.base)),h=$.format.json,g=$.format.renumber,o=h?!1:$.format.hexadecimal,a=h?"double":$.format.quotes,r=$.format.escapeless,e=$.format.newline,n=$.format.space,$.format.compact&&(e=n=t=M=""),u=$.format.parentheses,s=$.format.semicolons,l=$.format.safeConcatenation,c=$.directive,f=h?null:$.parse,m=$.sourceMap,y=$.sourceCode,S=$.format.preserveBlankLines&&y!==null,d=$,m&&(i.browser?F=UD.sourceMap.SourceNode:F=iG().SourceNode),q=Aa(H),m?(it=q.toStringWithSourceMap({file:$.file,sourceRoot:$.sourceMapRoot}),$.sourceContent&&it.map.setSourceContent($.sourceMap,$.sourceContent),$.sourceMapWithCode?it:it.map.toString()):(it={code:q.toString(),map:null},$.sourceMapWithCode?it:it.code)}C={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},E=j().format,i.version=nG.version,i.generate=Fa,i.attachComments=D.attachComments,i.Precedence=ft({},x),i.browser=!1,i.FORMAT_MINIFY=C,i.FORMAT_DEFAULTS=E})()})(Ml)),Ml}var aG=rG();const uC=nC(aG);class oG{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:v=>this.replacement=v}}replace(v,x,T,F){v&&x&&(T!=null?v[x][T]=F:v[x]=F)}remove(v,x,T){v&&x&&(T!=null?v[x].splice(T,1):delete v[x])}}class hG extends oG{constructor(v,x){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:T=>this.replacement=T},this.enter=v,this.leave=x}visit(v,x,T,F){if(v){if(this.enter){const p=this.should_skip,M=this.should_remove,t=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,v,x,T,F),this.replacement&&(v=this.replacement,this.replace(x,T,F,v)),this.should_remove&&this.remove(x,T,F);const h=this.should_skip,g=this.should_remove;if(this.should_skip=p,this.should_remove=M,this.replacement=t,h)return v;if(g)return null}let D;for(D in v){const p=v[D];if(p&&typeof p=="object")if(Array.isArray(p)){const M=p;for(let t=0;t<M.length;t+=1){const h=M[t];Ul(h)&&(this.visit(h,v,D,t)||t--)}}else Ul(p)&&this.visit(p,v,D,null)}if(this.leave){const p=this.replacement,M=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,v,x,T,F),this.replacement&&(v=this.replacement,this.replace(x,T,F,v)),this.should_remove&&this.remove(x,T,F);const t=this.should_remove;if(this.replacement=p,this.should_remove=M,t)return null}}return v}}function Ul(i){return i!==null&&typeof i=="object"&&"type"in i&&typeof i.type=="string"}function lC(i,{enter:v,leave:x}){return new hG(v,x).visit(i,null)}let uG=[],Kn=new Map;function lG(i,v={}){const{wrapAsync:x=!1,addReturn:T=!0,emitMiniLocations:F=!0,emitWidgets:D=!0}=v,p=[];let M=ZD(i,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0,onComment:p});const t=XG(p,i.length);let h=[];const g=(e,n)=>{const u=Kn.get("minilang");if(u){const s=`[${e}]`,l=u.getLocations(s,n.start);h=h.concat(l)}else{const s=Zh(`"${e}"`,n.start,i);h=h.concat(s)}};let o=[];lC(M,{enter(e,n){if(bG(e)){const{name:u}=e.tag,s=Kn.get(u),l=e.quasi.quasis[0].value.raw,c=e.quasi.start+1;if(F){const d=s.getLocations(l,c);h=h.concat(d)}return this.skip(),this.replace(BG(u,l,c))}if(DG(e,"tidal")){const u=e.quasi.quasis[0].value.raw,s=e.quasi.start+1;if(F){const l=GG(u,s);h=h.concat(l)}return this.skip(),this.replace(wG(u,s))}if(MG(e,n)){if(jl(e.start,t))return;const{quasis:u}=e,{raw:s}=u[0].value;return this.skip(),F&&g(s,e),this.replace(kl(s,e))}if(yG(e)){if(jl(e.start,t))return;const{value:u}=e;return this.skip(),F&&g(u,e),this.replace(kl(u,e))}if(CG(e))return D&&o.push({from:e.arguments[0].start,to:e.arguments[0].end,value:e.arguments[0].raw,min:e.arguments[1]?.value??0,max:e.arguments[2]?.value??1,step:e.arguments[3]?.value,type:"slider"}),this.replace(TG(e));if(SG(e)){const u=e.callee.property.name,s=o.filter(c=>c.type===u).length,l={to:e.end,index:s,type:u,id:v.id};return D&&o.push(l),this.replace(PG(e,l))}if(AG(e,n))return this.replace(FG(e));if(RG(e))return this.replace(LG(e))},leave(e,n,u,s){if(!fG(e))return;let[l,...c]=e.arguments;if(!l)throw new Error("K(...) requires an expression");dG(l)&&(l={type:"CallExpression",callee:l,arguments:[],optional:!1});const{template:d,patternExprs:f}=cG(l);if(f.length){const S=[{type:"Literal",value:d},...f,...c];let C=e.callee;return C.type==="ChainExpression"&&(C=C.expression),C.type==="MemberExpression"?this.replace({type:"CallExpression",callee:Jl(C.object),arguments:S,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:S,optional:!1})}const m=[{type:"Literal",value:Xo(l)},...c];let y=e.callee;return y.type==="ChainExpression"&&(y=y.expression),y.type==="MemberExpression"?this.replace({type:"CallExpression",callee:Jl(y.object),arguments:m,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:m,optional:!1})}});let{body:a}=M;if(!a.length)console.warn("empty body -> fallback to silence"),a.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!a?.[a.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(T){const{expression:e}=a[a.length-1];a[a.length-1]={type:"ReturnStatement",argument:e}}let r=uC.generate(M);return x&&(r=`(async ()=>{${r}})()`),F?{output:r,miniLocations:h,widgets:o}:{output:r}}function fG(i){if(i.type!=="CallExpression")return!1;let v=i.callee;return v.type==="ChainExpression"&&(v=v.expression),v.type==="MemberExpression"?!v.computed&&v.property?.name==="K":v.type==="Identifier"&&v.name==="K"}function dG(i){return i.type!=="ArrowFunctionExpression"&&i.type!=="FunctionExpression"||i.params.length?!1:i.body?.type==="BlockStatement"}function Xo(i){return uC.generate(i,{format:{semicolons:!1}})}function cG(i){const v=Kl(i),x=new Map,T=[];if(lC(v,{enter(p,M,t,h){x.set(p,{parent:M,prop:t,index:h});const g=pG(p);g&&(T.push({node:p,patternExpr:g}),this.skip())}}),!T.length)return{template:Xo(v),patternExprs:[]};T.sort((p,M)=>Hl(p.node)-Hl(M.node));const F=T.map(({patternExpr:p})=>Kl(p));let D=v;return T.forEach(({node:p},M)=>{D=xG(p,gG(M),x,D)}),{template:Xo(D),patternExprs:F}}function pG(i){if(vG(i)){const v=i.arguments?.[0];if(!v)throw new Error("S(...) requires an argument");return v}return fC(i)?i:null}function vG(i){if(i.type!=="CallExpression")return!1;const v=i.callee;return v.type==="Identifier"?v.name==="S":v.type==="MemberExpression"&&!v.computed?v.property?.name==="S":!1}function mG(){return Kn.get("minilang")?.name||"m"}function fC(i){if(i.type!=="CallExpression")return!1;const v=i.callee;if(v.type!=="Identifier"||v.name!==mG())return!1;const x=i.arguments?.[0];return x?.type==="Literal"&&typeof x.value=="string"}function Hl(i){if(typeof i.start=="number")return i.start;if(fC(i)){const v=i.arguments?.[1];if(v?.type==="Literal"&&typeof v.value=="number")return v.value}return 0}function gG(i){return{type:"MemberExpression",object:{type:"Identifier",name:"pat"},property:{type:"Literal",value:i},computed:!0,optional:!1}}function xG(i,v,x,T){const F=x.get(i);if(!F||!F.parent)return v;const{parent:D,prop:p,index:M}=F;return Array.isArray(D[p])?D[p][M]=v:D[p]=v,x.set(v,{parent:D,prop:p,index:M}),T}function Kl(i){return JSON.parse(JSON.stringify(i))}function Jl(i){return{type:"MemberExpression",object:i,property:{type:"Identifier",name:"worklet"},computed:!1,optional:!1}}function yG(i,v,x){return i.type!=="Literal"?!1:i.raw[0]==='"'}function MG(i,v){return i.type==="TemplateLiteral"&&v.type!=="TaggedTemplateExpression"}function kl(i,v){const{start:x}=v,T=Kn.get("minilang");let F="m";return T&&T.name&&(F=T.name),{type:"CallExpression",callee:{type:"Identifier",name:F},arguments:[{type:"Literal",value:i},{type:"Literal",value:x}],optional:!1}}function CG(i){return i.type==="CallExpression"&&i.callee.name==="slider"}function SG(i){return i.type==="CallExpression"&&uG.includes(i.callee.property?.name)}function TG(i){const v="slider_"+i.arguments[0].start;return i.arguments.unshift({type:"Literal",value:v,raw:v}),i.callee.name="sliderWithID",i}function EG(i){return`${i.id||""}_widget_${i.type}_${i.index}`}function PG(i,v){const x=EG(v);return i.arguments.unshift({type:"Literal",value:x,raw:x}),i}function AG(i,v){return i.type==="CallExpression"&&i.callee.name==="samples"&&v.type!=="AwaitExpression"}function FG(i){return{type:"AwaitExpression",argument:i}}function RG(i){return i.type==="LabeledStatement"}function LG(i){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:i.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:i.label.name,raw:`'${i.label.name}'`}]}}}function bG(i){return i.type==="TaggedTemplateExpression"&&Kn.has(i.tag.name)}function DG(i,v){return i.type==="TaggedTemplateExpression"&&i.tag.name===v}function GG(i,v){return i.split("").reduce((x,T,F)=>(T!=='"'||(!x.length||x[x.length-1].length>1?x.push([F+1]):x[x.length-1].push(F)),x),[]).map(([x,T])=>{const F=i.slice(x,T);return Zh(`"${F}"`,v+x-1)}).flat()}function wG(i,v){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:i},{type:"Literal",value:v}],optional:!1}}function BG(i,v,x){return{type:"CallExpression",callee:{type:"Identifier",name:i},arguments:[{type:"Literal",value:v},{type:"Literal",value:x}],optional:!1}}function XG(i,v){const x=[],T=[];for(const F of i){const D=F.value.trim();if(D.startsWith("mini-off"))T.push(F.start);else if(D.startsWith("mini-on")){const p=T.pop();x.push([p,F.end])}}for(;T.length;){const F=T.pop();x.push([F,v])}return x}function jl(i,v){for(const[x,T]of v)if(i>=x&&i<T)return!0;return!1}function _h(i){return i!==null&&typeof i=="object"&&"name"in i&&typeof i.name=="string"}function tu(i){return i!==null&&typeof i=="object"&&"step"in i&&typeof i.step=="number"&&"alt"in i&&typeof i.alt=="number"&&!isNaN(i.step)&&!isNaN(i.alt)}var dC=[0,2,4,-1,1,3,5],cC=dC.map(i=>Math.floor(i*7/12));function pC(i){const{step:v,alt:x,oct:T,dir:F=1}=i,D=dC[v]+7*x;if(T===void 0)return[F*D];const p=T-cC[v]-4*x;return[F*D,F*p]}var IG=[3,0,4,1,5,2,6];function vC(i){const[v,x,T]=i,F=IG[OG(v)],D=Math.floor((v+1)/7);if(x===void 0)return{step:F,alt:D,dir:T};const p=x+4*D+cC[F];return{step:F,alt:D,oct:p,dir:T}}function OG(i){const v=(i+1)%7;return v<0?7+v:v}var Ql=(i,v)=>Array(Math.abs(v)+1).join(i),Io=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),NG="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",VG="(AA|A|P|M|m|d|dd)([-+]?\\d+)",zG=new RegExp("^"+NG+"|"+VG+"$");function WG(i){const v=zG.exec(`${i}`);return v===null?["",""]:v[1]?[v[1],v[2]]:[v[4],v[3]]}var $l={};function Ii(i){return typeof i=="string"?$l[i]||($l[i]=YG(i)):tu(i)?Ii(UG(i)):_h(i)?Ii(i.name):Io}var ql=[0,2,4,5,7,9,11],mC="PMMPPMM";function YG(i){const v=WG(i);if(v[0]==="")return Io;const x=+v[0],T=v[1],F=(Math.abs(x)-1)%7,D=mC[F];if(D==="M"&&T==="P")return Io;const p=D==="M"?"majorable":"perfectable",M=""+x+T,t=x<0?-1:1,h=x===8||x===-8?x:t*(F+1),g=ZG(p,T),o=Math.floor((Math.abs(x)-1)/7),a=t*(ql[F]+g+12*o),r=(t*(ql[F]+g)%12+12)%12,e=pC({step:F,alt:g,oct:o,dir:t});return{empty:!1,name:M,num:x,q:T,step:F,alt:g,dir:t,type:p,simple:h,semitones:a,chroma:r,coord:e,oct:o}}function gC(i,v){const[x,T=0]=i,F=x*7+T*12<0,D=v||F?[-x,-T,-1]:[x,T,1];return Ii(vC(D))}function ZG(i,v){return v==="M"&&i==="majorable"||v==="P"&&i==="perfectable"?0:v==="m"&&i==="majorable"?-1:/^A+$/.test(v)?v.length:/^d+$/.test(v)?-1*(i==="perfectable"?v.length:v.length+1):0}function UG(i){const{step:v,alt:x,oct:T=0,dir:F}=i;if(!F)return"";const D=v+1+7*T,p=D===0?v+1:D,M=F<0?"-":"",t=mC[v]==="M"?"majorable":"perfectable";return M+p+HG(t,x)}function HG(i,v){return v===0?i==="majorable"?"M":"P":v===-1&&i==="majorable"?"m":v>0?Ql("A",v):Ql("d",i==="perfectable"?v:v+1)}var _l=(i,v)=>Array(Math.abs(v)+1).join(i),xC=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),tf=new Map,KG=i=>"CDEFGAB".charAt(i),oa=i=>i<0?_l("b",-i):_l("#",i),eu=i=>i[0]==="b"?-i.length:i.length;function de(i){const v=JSON.stringify(i),x=tf.get(v);if(x)return x;const T=typeof i=="string"?QG(i):tu(i)?de($G(i)):_h(i)?de(i.name):xC;return tf.set(v,T),T}var JG=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function iu(i){const v=JG.exec(i);return v?[v[1].toUpperCase(),v[2].replace(/x/g,"##"),v[3],v[4]]:["","","",""]}function kG(i){return de(vC(i))}var jG=(i,v)=>(i%v+v)%v,_a=[0,2,4,5,7,9,11];function QG(i){const v=iu(i);if(v[0]===""||v[3]!=="")return xC;const x=v[0],T=v[1],F=v[2],D=(x.charCodeAt(0)+3)%7,p=eu(T),M=F.length?+F:void 0,t=pC({step:D,alt:p,oct:M}),h=x+T+F,g=x+T,o=(_a[D]+p+120)%12,a=M===void 0?jG(_a[D]+p,12)-1188:_a[D]+p+12*(M+1),r=a>=0&&a<=127?a:null,e=M===void 0?null:Math.pow(2,(a-69)/12)*440;return{empty:!1,acc:T,alt:p,chroma:o,coord:t,freq:e,height:a,letter:x,midi:r,name:h,oct:M,pc:g,step:D}}function $G(i){const{step:v,alt:x,oct:T}=i,F=KG(v);if(!F)return"";const D=F+oa(x);return T||T===0?D+T:D}function Ri(i,v){const x=de(i),T=Array.isArray(v)?v:Ii(v).coord;if(x.empty||!T||T.length<2)return"";const F=x.coord,D=F.length===1?[F[0]+T[0]]:[F[0]+T[0],F[1]+T[1]];return kG(D).name}function yC(i,v){const x=i.length;return T=>{if(!v)return"";const F=T<0?(x- -T%x)%x:T%x,D=Math.floor(T/x),p=Ri(v,[0,D]);return Ri(p,i[F])}}function ha(i,v){const x=de(i),T=de(v);if(x.empty||T.empty)return"";const F=x.coord,D=T.coord,p=D[0]-F[0],M=F.length===2&&D.length===2?D[1]-F[1]:-Math.floor(p*7/12),t=T.height===x.height&&T.midi!==null&&x.oct===T.oct&&x.step>T.step;return gC([p,M],t).name}var ef=(i,v)=>Array(v+1).join(i),qG=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function MC(i){const v=qG.exec(i);return v?[v[1],v[2],v[3]]:["","",""]}function Vr(i){const[v,x,T]=MC(i);if(x==="")return"";let F=4;for(let p=0;p<T.length;p++)F+=T.charAt(p)===","?-1:1;const D=v[0]==="_"?v.replace(/_/g,"b"):v[0]==="^"?v.replace(/\^/g,"#"):"";return x.charCodeAt(0)>96?x.toUpperCase()+D+(F+1):x+D+F}function CC(i){const v=de(i);if(v.empty||!v.oct&&v.oct!==0)return"";const{letter:x,acc:T,oct:F}=v,D=T[0]==="b"?T.replace(/b/g,"_"):T.replace(/#/g,"^"),p=F>4?x.toLowerCase():x,M=F===5?"":F>4?ef("'",F-5):ef(",",4-F);return D+p+M}function _G(i,v){return CC(Ri(Vr(i),v))}function tw(i,v){return ha(Vr(i),Vr(v))}var ew={abcToScientificNotation:Vr,scientificToAbcNotation:CC,tokenize:MC,transpose:_G,distance:tw};function iw(i,v){const x=[];for(;v--;x[v]=v+i);return x}function sw(i,v){const x=[];for(;v--;x[v]=i-v);return x}function nw(i,v){return i<v?iw(i,v-i+1):sw(i,i-v+1)}function rw(i,v){const x=v.length,T=(i%x+x)%x;return v.slice(T,x).concat(v.slice(0,T))}function aw(i){return i.filter(v=>v===0||v)}function SC(i){return i.map(v=>de(v)).filter(v=>!v.empty).sort((v,x)=>v.height-x.height).map(v=>v.name)}function ow(i){return SC(i).filter((v,x,T)=>x===0||v!==T[x-1])}function hw(i,v=Math.random){let x,T,F=i.length;for(;F;)x=Math.floor(v()*F--),T=i[F],i[F]=i[x],i[x]=T;return i}function TC(i){return i.length===0?[[]]:TC(i.slice(1)).reduce((v,x)=>v.concat(i.map((T,F)=>{const D=x.slice();return D.splice(F,0,i[0]),D})),[])}const uw=Object.freeze(Object.defineProperty({__proto__:null,compact:aw,permutations:TC,range:nw,rotate:rw,shuffle:hw,sortedNoteNames:SC,sortedUniqNoteNames:ow},Symbol.toStringTag,{value:"Module"}));function lw(i,v){const x=[];for(;v--;x[v]=v+i);return x}function fw(i,v){const x=[];for(;v--;x[v]=i-v);return x}function ua(i,v){return i<v?lw(i,v-i+1):fw(i,i-v+1)}function fn(i,v){const x=v.length,T=(i%x+x)%x;return v.slice(T,x).concat(v.slice(0,T))}function su(i){return i.filter(v=>v===0||v)}function dw(i,v=Math.random){let x,T,F=i.length;for(;F;)x=Math.floor(v()*F--),T=i[F],i[F]=i[x],i[x]=T;return i}function EC(i){return i.length===0?[[]]:EC(i.slice(1)).reduce((v,x)=>v.concat(i.map((T,F)=>{const D=x.slice();return D.splice(F,0,i[0]),D})),[])}var cw={compact:su,permutations:EC,range:ua,rotate:fn,shuffle:dw},cs={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},nu=i=>Number(i).toString(2).padStart(12,"0"),sf=i=>parseInt(i,2),pw=/^[01]{12}$/;function ru(i){return pw.test(i)}var vw=i=>typeof i=="number"&&i>=0&&i<=4095,mw=i=>i&&ru(i.chroma),nf={[cs.chroma]:cs};function We(i){const v=ru(i)?i:vw(i)?nu(i):Array.isArray(i)?Rw(i):mw(i)?i.chroma:cs.chroma;return nf[v]=nf[v]||Fw(v)}var gw=We,PC=i=>We(i).chroma,xw=i=>We(i).intervals,yw=i=>We(i).setNum,Mw=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Cw(i){const v=[];for(let x=0;x<12;x++)i.charAt(x)==="1"&&v.push(Mw[x]);return v}function Sw(i){return We(i).intervals.map(v=>Ri("C",v))}function Tw(){return ua(2048,4095).map(nu)}function au(i,v=!0){const x=We(i).chroma.split("");return su(x.map((T,F)=>{const D=fn(F,x);return v&&D[0]==="0"?null:D.join("")}))}function Ew(i,v){return We(i).setNum===We(v).setNum}function la(i){const v=We(i).setNum;return x=>{const T=We(x).setNum;return v&&v!==T&&(T&v)===T}}function fa(i){const v=We(i).setNum;return x=>{const T=We(x).setNum;return v&&v!==T&&(T|v)===T}}function AC(i){const v=We(i);return x=>{const T=de(x);return v&&!T.empty&&v.chroma.charAt(T.chroma)==="1"}}function Pw(i){const v=AC(i);return x=>x.filter(v)}var FC={get:We,chroma:PC,num:yw,intervals:xw,chromas:Tw,isSupersetOf:fa,isSubsetOf:la,isNoteIncludedIn:AC,isEqual:Ew,filter:Pw,modes:au,notes:Sw,pcset:gw};function Aw(i){const v=i.split("");return v.map((x,T)=>fn(T,v).join(""))}function Fw(i){const v=sf(i),x=Aw(i).map(sf).filter(D=>D>=2048).sort()[0],T=nu(x),F=Cw(i);return{empty:!1,name:"",setNum:v,chroma:i,normalized:T,intervals:F}}function Rw(i){if(i.length===0)return cs.chroma;let v;const x=[0,0,0,0,0,0,0,0,0,0,0,0];for(let T=0;T<i.length;T++)v=de(i[T]),v.empty&&(v=Ii(i[T])),v.empty||(x[v.chroma]=1);return x.join("")}var Lw=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],bw=Lw;({...cs});var ou=[],Er={};function RC(){return ou.slice()}function Dw(i,v,x){const T=ww(i),F={...We(i),name:x||"",quality:T,intervals:i,aliases:v};ou.push(F),F.name&&(Er[F.name]=F),Er[F.setNum]=F,Er[F.chroma]=F,F.aliases.forEach(D=>Gw(F,D))}function Gw(i,v){Er[v]=i}function ww(i){const v=x=>i.indexOf(x)!==-1;return v("5A")?"Augmented":v("3M")?"Major":v("5d")?"Diminished":v("3m")?"Minor":"Unknown"}bw.forEach(([i,v,x])=>Dw(i.split(" "),x.split(" "),v));ou.sort((i,v)=>i.setNum-v.setNum);var Bw=i=>{const v=i.reduce((x,T)=>{const F=de(T).chroma;return F!==void 0&&(x[F]=x[F]||de(T).name),x},{});return x=>v[x]};function Xw(i,v={}){const x=i.map(T=>de(T).pc).filter(T=>T);return de.length===0?[]:Yw(x,1,v).filter(T=>T.weight).sort((T,F)=>F.weight-T.weight).map(T=>T.name)}var da={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},ca=i=>v=>!!(v&i),Iw=ca(da.anyThirds),Ow=ca(da.perfectFifth),Nw=ca(da.anySeventh),Vw=ca(da.nonPerfectFifths);function zw(i){const v=parseInt(i.chroma,2);return Iw(v)&&Ow(v)&&Nw(v)}function Ww(i){const v=parseInt(i,2);return Vw(v)?i:(v|16).toString(2)}function Yw(i,v,x){const T=i[0],F=de(T).chroma,D=Bw(i),p=au(i,!1),M=[];return p.forEach((t,h)=>{const g=x.assumePerfectFifth&&Ww(t);RC().filter(o=>x.assumePerfectFifth&&zw(o)?o.chroma===g:o.chroma===t).forEach(o=>{const a=o.aliases[0],r=D(h);h!==F?M.push({weight:.5*v,name:`${r}${a}/${T}`}):M.push({weight:1*v,name:`${r}${a}`})})}),M}function ir(i){return i!==null&&typeof i=="object"&&"name"in i&&typeof i.name=="string"}var LC=[0,2,4,5,7,9,11],bC=({step:i,alt:v})=>(LC[i]+v+120)%12,hu=({step:i,alt:v,oct:x,dir:T=1})=>T*(LC[i]+v+12*(x===void 0?-100:x)),DC=i=>{const v=hu(i);return i.oct!==void 0&&v>=-12&&v<=115?v+12:null};function pa(i){return i!==null&&typeof i=="object"&&"step"in i&&typeof i.step=="number"&&"alt"in i&&typeof i.alt=="number"}var GC=[0,2,4,-1,1,3,5],wC=GC.map(i=>Math.floor(i*7/12));function va(i){const{step:v,alt:x,oct:T,dir:F=1}=i,D=GC[v]+7*x;if(T===void 0)return[F*D];const p=T-wC[v]-4*x;return[F*D,F*p]}var Zw=[3,0,4,1,5,2,6];function ma(i){const[v,x,T]=i,F=Zw[Uw(v)],D=Math.floor((v+1)/7);if(x===void 0)return{step:F,alt:D,dir:T};const p=x+4*D+wC[F];return{step:F,alt:D,oct:p,dir:T}}function Uw(i){const v=(i+1)%7;return v<0?7+v:v}var rf=(i,v)=>Array(Math.abs(v)+1).join(i),Oo={empty:!0,name:"",acc:""},Hw="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",Kw="(AA|A|P|M|m|d|dd)([-+]?\\d+)",Jw=new RegExp("^"+Hw+"|"+Kw+"$");function uu(i){const v=Jw.exec(`${i}`);return v===null?["",""]:v[1]?[v[1],v[2]]:[v[4],v[3]]}var af={};function Ue(i){return typeof i=="string"?af[i]||(af[i]=kw(i)):pa(i)?Ue(Qw(i)):ir(i)?Ue(i.name):Oo}var of=[0,2,4,5,7,9,11],BC="PMMPPMM";function kw(i){const v=uu(i);if(v[0]==="")return Oo;const x=+v[0],T=v[1],F=(Math.abs(x)-1)%7,D=BC[F];if(D==="M"&&T==="P")return Oo;const p=D==="M"?"majorable":"perfectable",M=""+x+T,t=x<0?-1:1,h=x===8||x===-8?x:t*(F+1),g=jw(p,T),o=Math.floor((Math.abs(x)-1)/7),a=t*(of[F]+g+12*o),r=(t*(of[F]+g)%12+12)%12,e=va({step:F,alt:g,oct:o,dir:t});return{empty:!1,name:M,num:x,q:T,step:F,alt:g,dir:t,type:p,simple:h,semitones:a,chroma:r,coord:e,oct:o}}function sr(i,v){const[x,T=0]=i,F=x*7+T*12<0,D=v||F?[-x,-T,-1]:[x,T,1];return Ue(ma(D))}function jw(i,v){return v==="M"&&i==="majorable"||v==="P"&&i==="perfectable"?0:v==="m"&&i==="majorable"?-1:/^A+$/.test(v)?v.length:/^d+$/.test(v)?-1*(i==="perfectable"?v.length:v.length+1):0}function Qw(i){const{step:v,alt:x,oct:T=0,dir:F}=i;if(!F)return"";const D=v+1+7*T,p=D===0?v+1:D,M=F<0?"-":"",t=BC[v]==="M"?"majorable":"perfectable";return M+p+$w(t,x)}function $w(i,v){return v===0?i==="majorable"?"M":"P":v===-1&&i==="majorable"?"m":v>0?rf("A",v):rf("d",i==="perfectable"?v:v+1)}var hf=(i,v)=>Array(Math.abs(v)+1).join(i),XC={empty:!0,name:"",pc:"",acc:""},uf=new Map,lu=i=>"CDEFGAB".charAt(i),fu=i=>i<0?hf("b",-i):hf("#",i),du=i=>i[0]==="b"?-i.length:i.length;function Oi(i){const v=JSON.stringify(i),x=uf.get(v);if(x)return x;const T=typeof i=="string"?t7(i):pa(i)?Oi(e7(i)):ir(i)?Oi(i.name):XC;return uf.set(v,T),T}var qw=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function ga(i){const v=qw.exec(i);return v?[v[1].toUpperCase(),v[2].replace(/x/g,"##"),v[3],v[4]]:["","","",""]}function cu(i){return Oi(ma(i))}var _w=(i,v)=>(i%v+v)%v,to=[0,2,4,5,7,9,11];function t7(i){const v=ga(i);if(v[0]===""||v[3]!=="")return XC;const x=v[0],T=v[1],F=v[2],D=(x.charCodeAt(0)+3)%7,p=du(T),M=F.length?+F:void 0,t=va({step:D,alt:p,oct:M}),h=x+T+F,g=x+T,o=(to[D]+p+120)%12,a=M===void 0?_w(to[D]+p,12)-1188:to[D]+p+12*(M+1),r=a>=0&&a<=127?a:null,e=M===void 0?null:Math.pow(2,(a-69)/12)*440;return{empty:!1,acc:T,alt:p,chroma:o,coord:t,freq:e,height:a,letter:x,midi:r,name:h,oct:M,pc:g,step:D}}function e7(i){const{step:v,alt:x,oct:T}=i,F=lu(v);if(!F)return"";const D=F+fu(x);return T||T===0?D+T:D}function en(i,v){const x=Oi(i),T=Array.isArray(v)?v:Ue(v).coord;if(x.empty||!T||T.length<2)return"";const F=x.coord,D=F.length===1?[F[0]+T[0]]:[F[0]+T[0],F[1]+T[1]];return cu(D).name}function xa(i,v){const x=i.length;return T=>{if(!v)return"";const F=T<0?(x- -T%x)%x:T%x,D=Math.floor(T/x),p=en(v,[0,D]);return en(p,i[F])}}function pu(i,v){const x=Oi(i),T=Oi(v);if(x.empty||T.empty)return"";const F=x.coord,D=T.coord,p=D[0]-F[0],M=F.length===2&&D.length===2?D[1]-F[1]:-Math.floor(p*7/12),t=T.height===x.height&&T.midi!==null&&x.midi!==null&&x.step>T.step;return sr([p,M],t).name}var IC=(i,v)=>Array(Math.abs(v)+1).join(i);function dn(i,v,x){return function(...T){return console.warn(`${i} is deprecated. Use ${v}.`),x.apply(this,T)}}var OC=dn("isNamed","isNamedPitch",ir);const NC=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:du,altToAcc:fu,chroma:bC,coordToInterval:sr,coordToNote:cu,coordinates:va,deprecate:dn,distance:pu,fillStr:IC,height:hu,interval:Ue,isNamed:OC,isNamedPitch:ir,isPitch:pa,midi:DC,note:Oi,pitch:ma,stepToLetter:lu,tokenizeInterval:uu,tokenizeNote:ga,tonicIntervalsTransposer:xa,transpose:en},Symbol.toStringTag,{value:"Module"}));var i7=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],s7=i7,n7={...cs,name:"",quality:"Unknown",intervals:[],aliases:[]},cn=[],Ps={};function vu(i){return Ps[i]||n7}var r7=dn("ChordType.chordType","ChordType.get",vu);function a7(){return cn.map(i=>i.name).filter(i=>i)}function o7(){return cn.map(i=>i.aliases[0]).filter(i=>i)}function h7(){return Object.keys(Ps)}function ya(){return cn.slice()}var u7=dn("ChordType.entries","ChordType.all",ya);function l7(){cn=[],Ps={}}function VC(i,v,x){const T=d7(i),F={...We(i),name:x||"",quality:T,intervals:i,aliases:v};cn.push(F),F.name&&(Ps[F.name]=F),Ps[F.setNum]=F,Ps[F.chroma]=F,F.aliases.forEach(D=>f7(F,D))}function f7(i,v){Ps[v]=i}function d7(i){const v=x=>i.indexOf(x)!==-1;return v("5A")?"Augmented":v("3M")?"Major":v("5d")?"Diminished":v("3m")?"Minor":"Unknown"}s7.forEach(([i,v,x])=>VC(i.split(" "),x.split(" "),v));cn.sort((i,v)=>i.setNum-v.setNum);var zC={names:a7,symbols:o7,get:vu,all:ya,add:VC,removeAll:l7,keys:h7,entries:u7,chordType:r7},c7=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],p7=c7,v7={...cs,intervals:[],aliases:[]},Ma=[],As={};function WC(){return Ma.map(i=>i.name)}function Ca(i){return As[i]||v7}var m7=Ca;function pn(){return Ma.slice()}var g7=pn;function x7(){return Object.keys(As)}function y7(){Ma=[],As={}}function YC(i,v,x=[]){const T={...We(i),name:v,intervals:i,aliases:x};return Ma.push(T),As[T.name]=T,As[T.setNum]=T,As[T.chroma]=T,T.aliases.forEach(F=>M7(T,F)),T}function M7(i,v){As[v]=i}p7.forEach(([i,v,...x])=>YC(i.split(" "),v,x));var ZC={names:WC,get:Ca,all:pn,add:YC,removeAll:y7,keys:x7,entries:g7,scaleType:m7},No={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function mu(i){const[v,x,T,F]=ga(i);return v===""?["",i]:v==="A"&&F==="ug"?["","aug"]:[v+x,T+F]}function Bs(i){if(i==="")return No;if(Array.isArray(i)&&i.length===2)return Pr(i[1],i[0]);{const[v,x]=mu(i),T=Pr(x,v);return T.empty?Pr(i):T}}function Pr(i,v,x){const T=vu(i),F=Oi(v||""),D=Oi(x||"");if(T.empty||v&&F.empty||x&&D.empty)return No;const p=pu(F.pc,D.pc),M=T.intervals.indexOf(p)+1;if(!D.empty&&!M)return No;const t=Array.from(T.intervals);for(let a=1;a<M;a++){const r=t[0][0],e=t[0][1],n=parseInt(r,10)+7;t.push(`${n}${e}`),t.shift()}const h=F.empty?[]:t.map(a=>en(F,a));i=T.aliases.indexOf(i)!==-1?i:T.aliases[0];const g=`${F.empty?"":F.pc}${i}${D.empty||M<=1?"":"/"+D.pc}`,o=`${v?F.pc+" ":""}${T.name}${M>1&&x?" over "+D.pc:""}`;return{...T,name:o,symbol:g,type:T.name,root:D.name,intervals:t,rootDegree:M,tonic:F.name,notes:h}}var C7=dn("Chord.chord","Chord.get",Bs);function S7(i,v){const[x,T]=mu(i);return x?en(x,v)+T:i}function T7(i){const v=Bs(i),x=fa(v.chroma);return pn().filter(T=>x(T.chroma)).map(T=>T.name)}function E7(i){const v=Bs(i),x=fa(v.chroma);return ya().filter(T=>x(T.chroma)).map(T=>v.tonic+T.aliases[0])}function P7(i){const v=Bs(i),x=la(v.chroma);return ya().filter(T=>x(T.chroma)).map(T=>v.tonic+T.aliases[0])}function A7(i){const{intervals:v,tonic:x}=Bs(i),T=xa(v,x);return F=>F?T(F>0?F-1:F):""}function F7(i){const{intervals:v,tonic:x}=Bs(i);return xa(v,x)}var R7={getChord:Pr,get:Bs,detect:Xw,chordScales:T7,extended:E7,reduced:P7,tokenize:mu,transpose:S7,degrees:A7,steps:F7,chord:C7},L7=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],b7=L7,Sa=[];b7.forEach(([i,v,x])=>N7(i,v,x));var D7={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function G7(){return Sa.reduce((i,v)=>(v.names.forEach(x=>i.push(x)),i),[])}function w7(){return Sa.map(i=>i.shorthand)}var B7=/^([^.]+)(\.*)$/;function gu(i){const[v,x,T]=B7.exec(i)||[],F=Sa.find(M=>M.shorthand===x||M.names.includes(x));if(!F)return D7;const D=V7(F.fraction,T.length),p=D[0]/D[1];return{...F,name:i,dots:T,value:p,fraction:D}}var X7=i=>gu(i).value,I7=i=>gu(i).fraction,O7={names:G7,shorthands:w7,get:gu,value:X7,fraction:I7};function N7(i,v,x){Sa.push({empty:!1,dots:"",name:"",value:1/i,fraction:i<1?[1/i,1]:[1,i],shorthand:v,names:x})}function V7(i,v){const x=Math.pow(2,v);let T=i[0]*x,F=i[1]*x;const D=T;for(let p=0;p<v;p++)T+=D/Math.pow(2,p+1);for(;T%2===0&&F%2===0;)T/=2,F/=2;return[T,F]}function z7(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var UC=Ue,W7=i=>Ue(i).name,Y7=i=>Ue(i).semitones,Z7=i=>Ue(i).q,U7=i=>Ue(i).num;function H7(i){const v=Ue(i);return v.empty?"":v.simple+v.q}function K7(i){const v=Ue(i);if(v.empty)return"";const x=(7-v.step)%7,T=v.type==="perfectable"?-v.alt:-(v.alt+1);return Ue({step:x,alt:T,oct:v.oct,dir:v.dir}).name}var J7=[1,2,2,3,3,4,5,5,6,6,7,7],k7="P m M m M P d P m M m M".split(" ");function j7(i){const v=i<0?-1:1,x=Math.abs(i),T=x%12,F=Math.floor(x/12);return v*(J7[T]+7*F)+k7[T]}var Q7=ha,HC=KC((i,v)=>[i[0]+v[0],i[1]+v[1]]),$7=i=>v=>HC(i,v),q7=KC((i,v)=>[i[0]-v[0],i[1]-v[1]]);function _7(i,v){const x=UC(i);if(x.empty)return"";const[T,F,D]=x.coord;return sr([T+v,F,D]).name}var Ls={names:z7,get:UC,name:W7,num:U7,semitones:Y7,quality:Z7,fromSemitones:j7,distance:Q7,invert:K7,simplify:H7,add:HC,addTo:$7,substract:q7,transposeFifths:_7};function KC(i){return(v,x)=>{const T=Ue(v).coord,F=Ue(x).coord;if(T&&F){const D=i(T,F);return sr(D).name}}}function JC(i){return+i>=0&&+i<=127}function kC(i){if(JC(i))return+i;const v=de(i);return v.empty?null:v.midi}function t8(i,v=440){return Math.pow(2,(i-69)/12)*v}var e8=Math.log(2),i8=Math.log(440);function xu(i){const v=12*(Math.log(i)-i8)/e8+69;return Math.round(v*100)/100}var s8="C C# D D# E F F# G G# A A# B".split(" "),n8="C Db D Eb E F Gb G Ab A Bb B".split(" ");function xs(i,v={}){if(isNaN(i)||i===-1/0||i===1/0)return"";i=Math.round(i);const x=(v.sharps===!0?s8:n8)[i%12];if(v.pitchClass)return x;const T=Math.floor(i/12)-1;return x+T}function yu(i){return i%12}function r8(i){return i.split("").reduce((v,x,T)=>(T<12&&x==="1"&&v.push(T),v),[])}function a8(i){return i.map(yu).sort((v,x)=>v-x).filter((v,x,T)=>x===0||v!==T[x-1])}function Mu(i){return Array.isArray(i)?a8(i):r8(i)}function o8(i){const v=Mu(i);return x=>{const T=yu(x);for(let F=0;F<12;F++){if(v.includes(T+F))return x+F;if(v.includes(T-F))return x-F}}}function jC(i,v){const x=Mu(i),T=x.length;return F=>{const D=F<0?(T- -F%T)%T:F%T,p=Math.floor(F/T);return x[D]+p*12+v}}function h8(i,v){const x=jC(i,v);return T=>{if(T!==0)return x(T>0?T-1:T)}}var u8={chroma:yu,freqToMidi:xu,isMidi:JC,midiToFreq:t8,midiToNoteName:xs,pcsetNearest:o8,pcset:Mu,pcsetDegrees:h8,pcsetSteps:jC,toMidi:kC},l8=["C","D","E","F","G","A","B"],QC=i=>i.name,$C=i=>i.map(de).filter(v=>!v.empty);function f8(i){return i===void 0?l8.slice():Array.isArray(i)?$C(i).map(QC):[]}var Li=de,d8=i=>Li(i).name,c8=i=>Li(i).pc,p8=i=>Li(i).acc,v8=i=>Li(i).oct,m8=i=>Li(i).midi,g8=i=>Li(i).freq,x8=i=>Li(i).chroma;function qC(i){return xs(i)}function y8(i){return xs(xu(i))}function M8(i){return xs(xu(i),{sharps:!0})}function C8(i){return xs(i,{sharps:!0})}var S8=ha,Pi=Ri,T8=Ri,_C=i=>v=>Pi(v,i),E8=_C,tS=i=>v=>Pi(i,v),P8=tS;function zr(i,v){return Pi(i,[v,0])}var A8=zr;function F8(i,v){return Pi(i,[0,v])}var Cu=(i,v)=>i.height-v.height,R8=(i,v)=>v.height-i.height;function eS(i,v){return v=v||Cu,$C(i).sort(v).map(QC)}function iS(i){return eS(i,Cu).filter((v,x,T)=>x===0||v!==T[x-1])}var L8=i=>{const v=Li(i);return v.empty?"":xs(v.midi||v.chroma,{sharps:v.alt>0,pitchClass:v.midi===null})};function sS(i,v){const x=Li(i);if(x.empty)return"";const T=Li(v||xs(x.midi||x.chroma,{sharps:x.alt<0,pitchClass:!0}));if(T.empty||T.chroma!==x.chroma)return"";if(x.oct===void 0)return T.pc;const F=x.chroma-x.alt,D=T.chroma-T.alt,p=F>11||D<0?-1:F<0||D>11?1:0,M=x.oct+p;return T.pc+M}var Gi={names:f8,get:Li,name:d8,pitchClass:c8,accidentals:p8,octave:v8,midi:m8,ascending:Cu,descending:R8,distance:S8,sortedNames:eS,sortedUniqNames:iS,fromMidi:qC,fromMidiSharps:C8,freq:g8,fromFreq:y8,fromFreqSharps:M8,chroma:x8,transpose:Pi,tr:T8,transposeBy:_C,trBy:E8,transposeFrom:tS,trFrom:P8,transposeFifths:zr,transposeOctaves:F8,trFifths:A8,simplify:L8,enharmonic:sS},nS={empty:!0,name:"",chordType:""},lf={};function ps(i){return typeof i=="string"?lf[i]||(lf[i]=I8(i)):typeof i=="number"?ps(Ta[i]||""):tu(i)?G8(i):_h(i)?ps(i.name):nS}var b8=ps;function D8(i=!0){return(i?Ta:X8).slice()}function G8(i){return ps(oa(i.alt)+Ta[i.step])}var w8=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function B8(i){return w8.exec(i)||["","","",""]}var rS="I II III IV V VI VII",Ta=rS.split(" "),X8=rS.toLowerCase().split(" ");function I8(i){const[v,x,T,F]=B8(i);if(!T)return nS;const D=T.toUpperCase(),p=Ta.indexOf(D),M=eu(x),t=1;return{empty:!1,name:v,roman:T,interval:Ii({step:p,alt:M,dir:t}).name,acc:x,chordType:F,alt:M,step:p,major:T===D,oct:0,dir:t}}var O8={names:D8,get:ps,romanNumeral:b8},Ne=Object.freeze([]),aS={type:"major",tonic:"",alteration:0,keySignature:""},Ar={tonic:"",grades:Ne,intervals:Ne,scale:Ne,triads:Ne,chords:Ne,chordsHarmonicFunction:Ne,chordScales:Ne,secondaryDominants:Ne,secondaryDominantSupertonics:Ne,substituteDominantsMinorRelative:Ne,substituteDominants:Ne,substituteDominantSupertonics:Ne,secondaryDominantsMinorRelative:Ne},N8={...aS,...Ar,type:"major",minorRelative:"",scale:Ne,substituteDominants:Ne,secondaryDominantSupertonics:Ne,substituteDominantsMinorRelative:Ne},V8={...aS,type:"minor",relativeMajor:"",natural:Ar,harmonic:Ar,melodic:Ar},eo=(i,v,x="")=>v.map((T,F)=>`${i[F]}${x}${T}`);function Ea(i,v,x,T,F){return D=>{const p=i.map(r=>ps(r).interval||""),M=p.map(r=>Pi(D,r)),t=eo(M,x),h=M.map(r=>Pi(r,"5P")).map(r=>M.includes(r)&&!t.includes(r+"7")?r+"7":""),g=ff(h,v),o=h.map(r=>{if(!r)return"";const e=r.slice(0,-1);return Pi(e,"5d")+"7"}),a=ff(o,v);return{tonic:D,grades:i,intervals:p,scale:M,triads:eo(M,v),chords:t,chordsHarmonicFunction:T.slice(),chordScales:eo(M,F," "),secondaryDominants:h,secondaryDominantSupertonics:g,substituteDominants:o,substituteDominantSupertonics:a,secondaryDominantsMinorRelative:g,substituteDominantsMinorRelative:a}}}var ff=(i,v)=>i.map((x,T)=>{if(!x)return"";const F=x.slice(0,-1),D=Pi(F,"5P");return v[T].endsWith("m")?D+"m7":D+"m7b5"}),oS=(i,v)=>{const x=de(i),T=de(v);return x.empty||T.empty?0:T.coord[0]-x.coord[0]},z8=Ea("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),W8=Ea("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),Y8=Ea("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),Z8=Ea("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function U8(i){const v=de(i).pc;if(!v)return N8;const x=z8(v),T=oS("C",v);return{...x,type:"major",minorRelative:Pi(v,"-3m"),alteration:T,keySignature:oa(T)}}function H8(i){const v=de(i).pc;if(!v)return V8;const x=oS("C",v)-3;return{type:"minor",tonic:v,relativeMajor:Pi(v,"3m"),alteration:x,keySignature:oa(x),natural:W8(v),harmonic:Y8(v),melodic:Z8(v)}}function K8(i){return typeof i=="number"?zr("C",i):typeof i=="string"&&/^b+|#+$/.test(i)?zr("C",eu(i)):null}var J8={majorKey:U8,majorTonicFromKeySignature:K8,minorKey:H8},k8=Ii;function j8(i){const v=Ii(i);return v.empty?"":v.simple+v.q}function Q8(i,v){const x=k8(i);if(x.empty)return"";const[T,F,D]=x.coord;return gC([T+v,F,D]).name}var Su=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],df={...cs,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Tu=Su.map(t6),Vo={};Tu.forEach(i=>{Vo[i.name]=i,i.aliases.forEach(v=>{Vo[v]=i})});function bs(i){return typeof i=="string"?Vo[i.toLowerCase()]||df:i&&i.name?bs(i.name):df}var $8=bs;function hS(){return Tu.slice()}var q8=hS;function _8(){return Tu.map(i=>i.name)}function t6(i){const[v,x,T,F,D,p,M]=i,t=M?[M]:[],h=Number(x).toString(2);return{empty:!1,intervals:Ca(F).intervals,modeNum:v,chroma:h,normalized:h,name:F,setNum:x,alt:T,triad:D,seventh:p,aliases:t}}function e6(i,v){return bs(i).intervals.map(x=>Ri(v,x))}function uS(i){return(v,x)=>{const T=bs(v);if(T.empty)return[];const F=fn(T.modeNum,i),D=T.intervals.map(p=>Ri(x,p));return F.map((p,M)=>D[M]+p)}}var i6=uS(Su.map(i=>i[4])),s6=uS(Su.map(i=>i[5]));function lS(i,v){const x=bs(v),T=bs(i);return x.empty||T.empty?"":j8(Q8("1P",T.alt-x.alt))}function n6(i,v,x){return Ri(x,lS(i,v))}var r6={get:bs,names:_8,all:hS,distance:lS,relativeTonic:n6,notes:e6,triads:i6,seventhChords:s6,entries:q8,mode:$8};function a6(i){const[v,x,T,F]=iu(i);return v===""?io("",i):v==="A"&&F==="ug"?io("","aug"):io(v+x,T+F)}function io(i,v){const x=v.split("/");if(x.length===1)return[i,x[0],""];const[T,F,D,p]=iu(x[1]);return T!==""&&D===""&&p===""?[i,x[0],T+F]:[i,v,""]}function o6(i,v){return v.map(ps).map(x=>Ri(i,Ii(x))+x.chordType)}function h6(i,v){return v.map(x=>{const[T,F]=a6(x),D=ha(i,T);return ps(Ii(D)).name+F})}var u6={fromRomanNumerals:o6,toRomanNumerals:h6};function fS(i){const v=su(i.map(x=>typeof x=="number"?x:kC(x)));return!i.length||v.length!==i.length?[]:v.reduce((x,T)=>{const F=x[x.length-1];return x.concat(ua(F,T).slice(1))},[v[0]])}function l6(i,v){return fS(i).map(x=>xs(x,v))}var f6={numeric:fS,chromatic:l6},d6={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function dS(i){if(typeof i!="string")return["",""];const v=i.indexOf(" "),x=de(i.substring(0,v));if(x.empty){const F=de(i);return F.empty?["",i]:[F.name,""]}const T=i.substring(x.name.length+1).toLowerCase();return[x.name,T.length?T:""]}var c6=WC;function Ni(i){const v=Array.isArray(i)?i:dS(i),x=de(v[0]).name,T=Ca(v[1]);if(T.empty)return d6;const F=T.name,D=x?T.intervals.map(M=>Ri(x,M)):[],p=x?x+" "+F:F;return{...T,name:p,type:F,tonic:x,notes:D}}var p6=Ni;function v6(i,v={}){const x=PC(i),T=de(v.tonic??i[0]??""),F=T.chroma;if(F===void 0)return[];const D=x.split("");D[F]="1";const p=fn(F,D).join(""),M=pn().find(h=>h.chroma===p),t=[];return M&&t.push(T.name+" "+M.name),v.match==="exact"||cS(p).forEach(h=>{t.push(T.name+" "+h)}),t}function m6(i){const v=Ni(i),x=la(v.chroma);return RC().filter(T=>x(T.chroma)).map(T=>T.aliases[0])}function cS(i){const v=ru(i)?i:Ni(i).chroma,x=fa(v);return pn().filter(T=>x(T.chroma)).map(T=>T.name)}function g6(i){const v=la(Ni(i).chroma);return pn().filter(x=>v(x.chroma)).map(x=>x.name)}function pS(i){const v=i.map(F=>de(F).pc).filter(F=>F),x=v[0],T=iS(v);return fn(T.indexOf(x),T)}function x6(i){const v=Ni(i);if(v.empty)return[];const x=v.tonic?v.notes:v.intervals;return au(v.chroma).map((T,F)=>{const D=Ni(T).name;return D?[x[F],D]:["",""]}).filter(T=>T[0])}function y6(i){const v=Array.isArray(i)?pS(i):Ni(i).notes,x=v.map(T=>de(T).chroma);return T=>{const F=de(typeof T=="number"?qC(T):T),D=F.height;if(D===void 0)return;const p=D%12,M=x.indexOf(p);if(M!==-1)return sS(F.name,v[M])}}function M6(i){const v=y6(i);return(x,T)=>{const F=de(x).height,D=de(T).height;return F===void 0||D===void 0?[]:ua(F,D).map(v).filter(p=>p)}}function C6(i){const{intervals:v,tonic:x}=Ni(i),T=yC(v,x);return F=>F?T(F>0?F-1:F):""}function S6(i){const{intervals:v,tonic:x}=Ni(i);return yC(v,x)}var Wr={degrees:C6,detect:v6,extended:cS,get:Ni,modeNames:x6,names:c6,rangeOf:M6,reduced:g6,scaleChords:m6,scaleNotes:pS,steps:S6,tokenize:dS,scale:p6},T6={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},E6=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function P6(){return E6.slice()}var A6=/^(\d*\d(?:\+\d)*)\/(\d+)$/,cf=new Map;function F6(i){const v=JSON.stringify(i),x=cf.get(v);if(x)return x;const T=b6(Eu(i));return cf.set(v,T),T}function Eu(i){if(typeof i=="string"){const[D,p,M]=A6.exec(i)||[];return Eu([p,M])}const[v,x]=i,T=+x;if(typeof v=="number")return[v,T];const F=v.split("+").map(D=>+D);return F.length===1?[F[0],T]:[F,T]}var R6={names:P6,parse:Eu,get:F6},L6=i=>Math.log(i)/Math.log(2)%1===0;function b6([i,v]){const x=Array.isArray(i)?i.reduce((M,t)=>M+t,0):i,T=v;if(x===0||T===0)return T6;const F=Array.isArray(i)?`${i.join("+")}/${v}`:`${i}/${v}`,D=Array.isArray(i)?i:[],p=T===4||T===2?"simple":T===8&&x%3===0?"compound":L6(T)?"irregular":"irrational";return{empty:!1,name:F,type:p,upper:x,lower:T,additive:D}}var D6=NC,G6=FC,w6=zC,B6=ZC;const X6=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:ew,Array:uw,Chord:R7,ChordDictionary:w6,ChordType:zC,Collection:cw,Core:NC,DurationValue:O7,Interval:Ls,Key:J8,Midi:u8,Mode:r6,Note:Gi,PcSet:G6,Pcset:FC,Progression:u6,Range:f6,RomanNumeral:O8,Scale:Wr,ScaleDictionary:B6,ScaleType:ZC,TimeSignature:R6,Tonal:D6,accToAlt:du,altToAcc:fu,chroma:bC,coordToInterval:sr,coordToNote:cu,coordinates:va,deprecate:dn,distance:pu,fillStr:IC,height:hu,interval:Ue,isNamed:OC,isNamedPitch:ir,isPitch:pa,midi:DC,note:Oi,pitch:ma,stepToLetter:lu,tokenizeInterval:uu,tokenizeNote:ga,tonicIntervalsTransposer:xa,transpose:en},Symbol.toStringTag,{value:"Module"})),I6=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],O6=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],N6=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],V6={b:-1,"#":1},z6=i=>{const[v,...x]=i.split("");return O6.indexOf(v.toLowerCase())+x.reduce((T,F)=>T+V6[F],0)};function W6(i){const v=(i||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return v?v.slice(1):[]}const zo=i=>i%12,vS=i=>{let v=Number(i);return isNaN(v)?Ls.semitones(i):v},Wo=(i,v)=>{if(typeof i=="number")return i;if(typeof i=="string")return wi(i,v)},Y6=(i,v=!1)=>{const x=Math.floor(i/12)-1;return(v?N6:I6)[i%12]+x};function Z6(i,v,x=1){i=i.map(F=>typeof F=="string"?wi(F):F);const T=Math.floor(v/i.length)*x*12;return v=di(v,i.length),i[v]+T}function mS(i,v,x){let T=0,F=1/0;return v.forEach((D,p)=>{const M=Math.abs(D-i);(!x&&M<F||x&&M<=F)&&(T=p,F=M)}),T}let so={};function U6(i,v,x,T){const[F,D]=Wr.tokenize(v),p=Wo(F),M=zo(p);if(!so[D]){const{intervals:o}=Wr.get(`C ${D}`);so[D]=o.map(vS)}const t=so[D];if(!t)return null;let h=p;if(x){x=Wo(x,3);const o=zo(x),a=di(o-M,12),r=mS(a,t,T);i=i+r,h=x-a}const g=Math.floor(i/t.length)*12;return i=di(i,t.length),t[i]+h+g}let pf={below:i=>i.slice(-1)[0],duck:i=>i.slice(-1)[0],above:i=>i[0],root:i=>i[0]};function H6({chord:i,dictionary:v,offset:x=0,n:T,mode:F="below",anchor:D="c5",octaves:p=1}){const[M,t]=W6(i),h=z6(M);D=Wo(D?.note||D,4);const g=zo(D),o=v[t].map(m=>(typeof m=="string"?m.split(" "):m).map(vS));let a,r,e=o.map((m,y)=>{const S=pf[F](m),C=di(g-S-h,12);return(a===void 0||C<a)&&(a=C,r=y),C});F==="root"&&(r=0);const n=Math.ceil(x/o.length)*12,u=di(r+x,o.length),s=o[u],l=pf[F](s),c=D-e[u]+n,d=s.map(m=>c-l+m);let f=d.map(m=>Y6(m));return F==="duck"&&(f=f.filter((m,y)=>d[y]!==D)),T!==void 0?[Z6(f,T,p)]:f}const K6=i=>(i<=0?-1:1)+i*7+"P";function Pu(i){i=i.replaceAll(":"," ");const v=Wr.get(i),{tonic:x,empty:T}=v;if(T&&Ds(i)||T&&!x)throw new Error(`Scale name ${i} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(T)throw new Error(`Invalid scale name "${i}"`);return v}function J6(i,v){i=Math.ceil(i);let{intervals:x,tonic:T}=Pu(v);T=T||"C";const{pc:F,oct:D=3}=Gi.get(T),p=Math.floor(i/x.length),M=di(i,x.length),t=Ls.add(x[M],K6(p));return Gi.transpose(F+D,t)}function vf(i,v,x){let{notes:T}=Pu(i);if(T=T.map(o=>Gi.get(o).pc),v=Number(v),isNaN(v))throw new Error(`scale offset "${v}" not a number`);const{pc:F,oct:D=3}=Gi.get(x),p=T.indexOf(F);if(p===-1)throw new Error(`note "${x}" is not in scale "${i}"`);let M=p,t=D,h=F;const g=Math.sign(v);for(;Math.abs(M-p)<Math.abs(v);){M+=g;const o=di(M,T.length);g<0&&h[0]==="C"&&(t+=g),h=T[o],g>0&&h[0]==="C"&&(t+=g)}return h+t}const{transpose:k6,trans:j6}=dt(["transpose","trans"],function(i,v){return v.withHap(x=>{const T=x.value.note??x.value;if(typeof T=="number"){let p;typeof i=="number"?p=i:typeof i=="string"&&(p=Ls.semitones(i)||0);const M=T+p;return typeof x.value=="object"?x.withValue(()=>({...x.value,note:M})):x.withValue(()=>M)}if(typeof T!="string"||!Ds(T))return Ie(`[tonal] transpose: not a note "${T}"`,"warning"),x;const F=isNaN(Number(i))?String(i):Ls.fromSemitones(i),D=Gi.transpose(T,F);return typeof x.value=="object"?x.withValue(()=>({...x.value,note:D})):x.withValue(()=>D)})}),{scaleTranspose:Q6,scaleTrans:$6,strans:q6}=dt(["scaleTranspose","scaleTrans","strans"],function(i,v){return v.withHap(x=>{if(!x.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof x.value=="object")return x.withValue(()=>({...x.value,note:vf(x.context.scale,Number(i),x.value.note)}));if(typeof x.value!="string")throw new Error("can only use scaleTranspose with notes");return x.withValue(()=>vf(x.context.scale,Number(i),x.value))})});function _6(i){let v=Number(i),x=0;if(isNaN(v)){i=String(i);const T=/^(-?\d+)([#bsf]*)$/.exec(i);if(!T)throw new Error(`invalid scale step "${i}", expected number or integer with optional # b suffixes`);v=Number(T[1]);const F=T[2]||"";x=Jo(F)}return[v,x]}let no={};function tB(i,v,x=!0){let T=typeof v=="string"?wi(v):v;if(no[i]===void 0){const{intervals:o,tonic:a}=Pu(i),{pc:r}=Gi.get(a),e=o.concat("8P").map(u=>Gi.transpose(r+"0",u)),n=e.map(wi);no[i]=[n,e]}const[F,D]=no[i],p=F[0],M=Math.floor((T-p)/12),t=F.map(o=>o+12*M),h=mS(T,t,x),g=D[h];return Gi.transpose(g,Ls.fromSemitones(12*M))}const eB=dt("scale",function(i,v){return Array.isArray(i)&&(i=i.flat().join(" ")),v.withHaps(x=>(x=x.map(T=>{let F=T.value;const D=typeof F=="object";F=D?F:{n:F};const{note:p,n:M,value:t,...h}=F,g=p??M??t;if(g===void 0)return Ie(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(F).join(", ")}]`,"error"),T;let o;if(Ds(g))o=tB(i,g),T.value={...h,note:o};else try{const[a,r]=_6(g);h.anchor?o=U6(a,i,h.anchor):o=J6(a,i),r!=0&&(o=Gi.transpose(o,Ls.fromSemitones(r)))}catch(a){Jn(a,"tonal");return}return T.value=D?{...h,note:o}:o,T.setContext({...T.context,scale:i})}),Gs(x)))},!0,!0);var mf={},Cr={},Tn={},gf;function gS(){if(gf)return Tn;gf=1,Tn.__esModule=!0,Tn.getBestVoicing=void 0;function i(v){var x=v.chord,T=v.range,F=v.finder,D=v.picker,p=v.lastVoicing,M=F(x,T);return M.length?D(M,p):[]}return Tn.getBestVoicing=i,Tn}var En={};const xS=HD(X6);var Pn={},xf;function yS(){if(xf)return Pn;xf=1,Pn.__esModule=!0,Pn.tokenizeChord=void 0;function i(v){var x=(v||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return x?x.slice(1):[]}return Pn.tokenizeChord=i,Pn}var yf;function iB(){if(yf)return En;yf=1,En.__esModule=!0,En.voicingsInRange=void 0;var i=xS,v=MS(),x=yS();function T(F,D,p){D===void 0&&(D=v.lefthand),p===void 0&&(p=["D3","A4"]);var M=(0,x.tokenizeChord)(F),t=M[0],h=M[1];if(!D[h])return[];var g=D[h].map(function(a){return a.split(" ")}),o=i.Range.chromatic(p);return g.reduce(function(a,r){var e=r.map(function(l){return i.Interval.substract(l,r[0])}),n=i.Note.transpose(t,r[0]),u=o.filter(function(l){return i.Note.chroma(l)===i.Note.chroma(n)}).filter(function(l){return i.Note.midi(i.Note.transpose(l,e[e.length-1]))<=i.Note.midi(p[1])}).map(function(l){return i.Note.enharmonic(l,n)}),s=u.map(function(l){return e.map(function(c){return i.Note.transpose(l,c)})});return a.concat(s)},[])}return En.voicingsInRange=T,En}var Mf;function MS(){return Mf||(Mf=1,(function(i){var v=Cr.__assign||function(){return v=Object.assign||function(M){for(var t,h=1,g=arguments.length;h<g;h++){t=arguments[h];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(M[o]=t[o])}return M},v.apply(this,arguments)},x=Cr.__rest||function(M,t){var h={};for(var g in M)Object.prototype.hasOwnProperty.call(M,g)&&t.indexOf(g)<0&&(h[g]=M[g]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,g=Object.getOwnPropertySymbols(M);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(M,g[o])&&(h[g[o]]=M[g[o]]);return h};i.__esModule=!0,i.dictionaryVoicing=i.dictionaryVoicingFinder=i.triads=i.guidetones=i.lefthand=void 0;var T=gS(),F=iB();i.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},i.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},i.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var D=function(M){return function(t,h){return(0,F.voicingsInRange)(t,M,h)}};i.dictionaryVoicingFinder=D;var p=function(M){var t=M.dictionary,h=M.range,g=x(M,["dictionary","range"]);return(0,T.getBestVoicing)(v(v({},g),{range:h,finder:(0,i.dictionaryVoicingFinder)(t)}))};i.dictionaryVoicing=p})(Cr)),Cr}var An={},Cf;function sB(){if(Cf)return An;Cf=1,An.__esModule=!0,An.minTopNoteDiff=void 0;var i=xS;function v(x,T){if(!T)return x[0];var F=function(D){return Math.abs(i.Note.midi(T[T.length-1])-i.Note.midi(D[D.length-1]))};return x.reduce(function(D,p){return F(p)<F(D)?p:D},x[0])}return An.minTopNoteDiff=v,An}var Sf;function nB(){return Sf||(Sf=1,(function(i){i.__esModule=!0;var v=MS(),x=sB(),T=gS(),F=yS();i.default={tokenizeChord:F.tokenizeChord,getBestVoicing:T.getBestVoicing,dictionaryVoicing:v.dictionaryVoicing,dictionaryVoicingFinder:v.dictionaryVoicingFinder,lefthand:v.lefthand,guidetones:v.guidetones,triads:v.triads,minTopNoteDiff:x.minTopNoteDiff}})(mf)),mf}var rB=nB();const Tf=nC(rB),Ss={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},ks={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:aB,minTopNoteDiff:oB}=Tf.default||Tf,hB={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},uB={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},lB={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},fB={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},vn={lefthand:{dictionary:hB,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:lB,mode:"below",anchor:"a4"},guidetones:{dictionary:uB,mode:"above",anchor:"a4"},legacy:{dictionary:fB,mode:"below",anchor:"a4"}};let CS="ireal";const SS=i=>CS=i,dB=(i,v)=>TS(i,vn[i].dictionary,v),TS=(i,v,x=["F3","A4"])=>{Object.assign(vn,{[i]:{dictionary:v,range:x}})},Au=(i,v,x={})=>{Object.assign(vn,{[i]:{dictionary:v,...x}})},cB=(i,v,x)=>{const{dictionary:T,range:F}=vn[v];return aB({chord:i,dictionary:T,range:F,picker:oB,lastVoicing:x})};let Fr;const pB=dt("voicings",function(i,v){return v.fmap(x=>(Fr=cB(x,i,Fr),xe(...Fr))).outerJoin()}),vB=dt("rootNotes",function(i,v){return v.fmap(x=>{const T=(x.chord||x).match(/^([a-gA-G][b#]?).*$/)[1]+i;return x.chord?{note:T}:T})}),mB=dt("voicing",function(i){return i.fmap(v=>{v=typeof v=="string"?{chord:v}:v;let{dictionary:x=CS,chord:T,anchor:F,offset:D,mode:p,n:M,octaves:t,...h}=v;x=typeof x=="string"?vn[x]:{dictionary:x,mode:"below",anchor:"c5"};try{let g=H6({...x,chord:T,anchor:F,offset:D,mode:p,n:M,octaves:t});return xe(...g).note().set(h)}catch{return Ie(`[voicing]: unknown chord "${T}"`),ce}}).outerJoin()});function Gn(i,v,x){x=Array.isArray(x)?x:[x],x.forEach(T=>{T[v]=T[i]})}Gn("^","",[Ss,ks]);Object.keys(Ss).forEach(i=>{if(i.includes("-")){let v=i.replace("-","m");Gn(i,v,[ks,Ss])}if(i.includes("^")){let v=i.replace("^","M");Gn(i,v,[ks,Ss])}if(i.includes("+")){let v=i.replace("+","aug");Gn(i,v,[ks,Ss])}});Au("ireal",Ss);Au("ireal-ext",ks);function gB(){Fr=void 0,SS("ireal")}const xB="@strudel/tonal",yB=Object.freeze(Object.defineProperty({__proto__:null,addVoicings:TS,complex:ks,packageName:xB,registerVoicings:Au,resetVoicings:gB,rootNotes:vB,scale:eB,scaleTrans:$6,scaleTranspose:Q6,setDefaultVoicings:SS,setVoicingRange:dB,simple:Ss,strans:q6,trans:j6,transpose:k6,voicing:mB,voicingAlias:Gn,voicingRegistry:vn,voicings:pB},Symbol.toStringTag,{value:"Module"}));async function MB(){const i=br(br,Promise.resolve().then(()=>o2),Promise.resolve().then(()=>sD),Promise.resolve().then(()=>yB),Promise.resolve().then(()=>Qb),{hush:PS,evaluate:CB});await Promise.all([i,iM()])}let Yo,Fs;function ES(i={}){q2(),i.miniAllStrings!==!1&&CM();const{prebake:v,...x}=i;return Fs=dM({...x,transpiler:lG}),Yo=(async()=>(await MB(),await v?.(),Fs))(),Dr(()=>Fs.scheduler.now()),Yo}window.initStrudel=ES;xt.prototype.play=function(){if(!Fs)throw new Error(".play: no repl found. Have you called initStrudel?");return Yo.then(()=>{Fs.setPattern(this,!0)}),this};function PS(){Fs.stop()}async function CB(i,v=!0){return Fs.evaluate(i,v)}class SB{constructor(){this.initialized=!1,this.currentMusic=null}init(){if(!this.initialized)try{ES(),this.initialized=!0}catch(v){console.warn("[Audio] Strudel init failed:",v)}}playMusic(v){this.initialized&&(this.stopMusic(),setTimeout(()=>{try{this.currentMusic=v()}catch(x){console.warn("[Audio] BGM error:",x)}},100))}stopMusic(){if(this.initialized){try{PS()}catch{}this.currentMusic=null}}}const hs=new SB;function Zo(){return xe(Si("e4 ~ g4 ~ a4 ~ bb4 ~ a4 ~ g4 ~ e4 ~ d4 ~").s("square").gain(.14).lpf(2e3).decay(.15).sustain(.2).release(.3).room(.3).delay(.15).delaytime(.375).delayfeedback(.3),Si("~ ~ bb5 ~ ~ ~ a5 ~ ~ ~ g5 ~ ~ ~ e5 ~").s("square").gain(.06).lpf(2500).decay(.12).sustain(0),Si("<e3,g3,bb3> <e3,g3,bb3> <d3,f3,a3> <d3,f3,a3> <c3,e3,g3> <c3,e3,g3> <d3,f3,bb3> <d3,f3,bb3>").s("sine").attack(.4).release(1.2).gain(.1).room(.4).roomsize(3).lpf(1400).slow(2),Si("e2 e2 ~ e2 d2 d2 ~ d2 c2 c2 ~ c2 d2 d2 ~ d2").s("sawtooth").gain(.18).lpf(400).decay(.2).sustain(.3),Si("c1 ~ g1 ~ c1 ~ g1 ~").s("sine").gain(.2).decay(.08).sustain(0).lpf(200),Si("e4 g4 bb4 e5").s("square").fast(4).gain(.04).lpf("<800 1200 1600 1200>").decay(.06).sustain(0)).cpm(120).play()}function Ef(){return xe(Si("bb4 ~ a4 ~ g4 ~ e4 ~ d4 ~ c4 ~ ~ ~ ~ ~").s("triangle").gain(.16).decay(.6).sustain(.1).release(1.2).room(.6).roomsize(5).lpf(1600),Si("d3,f3,a3").s("sine").attack(.6).release(2.5).gain(.1).room(.7).roomsize(6).lpf(1e3),Si("d2 ~ ~ ~ ~ ~ a1 ~").s("sine").gain(.12).slow(4).lpf(300)).slow(3).cpm(50).play()}let ro=null;function TB(){return ro||(ro=new(window.AudioContext||window.webkitAudioContext)),ro}function Pa(i,v,x,T,F=.3,D=4e3){if(Ht.isMuted)return;const p=TB(),M=p.currentTime;i.forEach((t,h)=>{const g=M+h*T,o=p.createOscillator();o.type=v,o.frequency.setValueAtTime(t,g);const a=p.createGain();a.gain.setValueAtTime(F,g),a.gain.exponentialRampToValueAtTime(.001,g+x);const r=p.createBiquadFilter();r.type="lowpass",r.frequency.setValueAtTime(D,g),o.connect(r).connect(a).connect(p.destination),o.start(g),o.stop(g+x)})}function EB(){Pa([659.25,987.77],"square",.12,.07,.3,5e3)}function PB(){Pa([392,329.63,261.63,220,174.61],"square",.2,.1,.25,2e3)}function AB(){Pa([261.63,329.63,392,523.25,659.25],"square",.1,.06,.25,5e3)}function FB(){Pa([174.61,220],"sawtooth",.15,.12,.2,1200)}let Yr=!1;function Zr(){if(Yr)return;Yr=!0,localStorage.getItem("meltdown-muted")==="true"&&(Ht.isMuted=!0),hs.init(),Ht.isMuted||hs.playMusic(Zo),window.removeEventListener("pointerdown",Zr),window.removeEventListener("keydown",Zr)}function RB(){window.addEventListener("pointerdown",Zr,{once:!1}),window.addEventListener("keydown",Zr,{once:!1}),_t.on(qt.MUSIC_GAMEPLAY,()=>{Ht.isMuted||hs.playMusic(Zo)}),_t.on(qt.MUSIC_GAMEOVER,()=>{Ht.isMuted||hs.playMusic(Ef)}),_t.on(qt.MUSIC_STOP,()=>hs.stopMusic()),_t.on(qt.FRAGMENT_COLLECTED,()=>EB()),_t.on(qt.PLAYER_DIED,()=>PB()),_t.on(qt.SLOWDOWN_START,()=>AB()),_t.on(qt.GAME_OVER,()=>{_t.emit(qt.MUSIC_STOP),setTimeout(()=>_t.emit(qt.MUSIC_GAMEOVER),500)}),_t.on(qt.GAME_RESTART,()=>{_t.emit(qt.MUSIC_STOP),setTimeout(()=>_t.emit(qt.MUSIC_GAMEPLAY),400)});const i=new Set;_t.on(qt.ACCELERATION_TICK,v=>{if(!v)return;const{speedMultiplier:x}=v;for(const T of[1.5,2,2.5,3])if(x>=T&&!i.has(T)){i.add(T),FB();break}}),window.addEventListener("keydown",v=>{(v.key==="m"||v.key==="M")&&(Ht.isMuted=!Ht.isMuted,localStorage.setItem("meltdown-muted",Ht.isMuted),Ht.isMuted?hs.stopMusic():Yr&&!Ht.gameOver?hs.playMusic(Zo):Yr&&Ht.gameOver&&hs.playMusic(Ef))}),_t.on(qt.GAME_RESTART,()=>i.clear())}const LB="80db7b07-f312-4755-9a3c-22905c805eb1";let ns=null;async function bB(){if(typeof OpenGameSDK>"u"){console.warn("[PlayFun] SDK not loaded, skipping integration");return}try{ns=new OpenGameSDK({gameId:LB,ui:{usePointsWidget:!0}}),await ns.init(),console.log("[PlayFun] SDK initialized"),_t.on(qt.SCORE_CHANGED,()=>{ns&&ns.addPoints(1)}),_t.on(qt.GAME_OVER,()=>{ns&&ns.savePoints()}),setInterval(()=>{ns&&Ht.started&&!Ht.gameOver&&ns.savePoints()},3e4)}catch(i){console.warn("[PlayFun] Init failed, game continues without rewards:",i)}}RB();bB();const Rr=new ze.Game(OT);window.__GAME__=Rr;window.__GAME_STATE__=Ht;window.__EVENT_BUS__=_t;window.__EVENTS__=qt;window.render_game_to_text=()=>{if(!Rr||!Ht)return JSON.stringify({error:"not_ready"});const i=Rr.scene.getScenes(!0).map(T=>T.scene.key),v={coords:"origin:top-left x:right y:down",mode:Ht.gameOver?"game_over":Ht.started?"playing":"menu",scene:i[0]||null,scenes:i,score:Ht.score,bestScore:Ht.bestScore,survivalTime:Ht.survivalTime,fragmentsCollected:Ht.fragmentsCollected,currentSpeedMultiplier:Math.round(Ht.currentSpeedMultiplier*100)/100,isSlowed:Ht.isSlowed},x=Rr.scene.getScene("GameScene");if(Ht.started&&x?.player?.sprite){const T=x.player.sprite,F=T.body;v.player={x:Math.round(T.x),y:Math.round(T.y),vx:Math.round(F.velocity.x),vy:Math.round(F.velocity.y)}}return x?.spawnSystem&&(v.enemies=x.spawnSystem.enemies.map(T=>({type:T.type,x:Math.round(T.sprite.x),y:Math.round(T.sprite.y)})),v.fragments=x.spawnSystem.fragments.map(T=>({x:Math.round(T.sprite.x),y:Math.round(T.sprite.y)}))),JSON.stringify(v)};window.advanceTime=i=>new Promise(v=>{const x=performance.now();function T(){if(performance.now()-x>=i)return v();requestAnimationFrame(T)}requestAnimationFrame(T)});
